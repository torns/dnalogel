import{h as d,i as h,k as P,l as w,m as x,a0 as I,n as c,q as g,v as A,w as p,z as N,t as G,a1 as D,X as C,Q as m,Y as M,N as v,J as y,K as _,R as b,a2 as B,U as O,L as E,E as R,a3 as L,I as Q}from"./vendor-b2bf1e8d.js";const j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAYAAACFUvPfAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAMAAAAADe2FZjAAAEF0lEQVRoBe2WzWskRRiHf13V092TxI2oEzYeVDwITtyDuCiihwiCePGgxIM3vYgHL4J4UIhBRA8i/gPqyUvWg7AiIuIeloDiYUHJLOK6BPwIk9nNODM9Xf1RVe1b3elJRjCZmQ6euqGmuqer33rq4e23GqiOykBloDJQGagMVAYqA5WBykBlYFYD1qwP/tdzaZqOx9zYOLxeX0+L5yzLGp0X/03a25MOnGRcBtx+6Rlo9SL08G4EooFnxa8Yiivox5/h5Ys/4cl7NVorNDRnngX+0MIkVMeMSf23zyKML8J7/Dy8hwF2Buh9CnS+AEQIdLspBuGb+M7/qLW4qJrNpsLapjYhpwVnx3BMfCtNNx3Etc9xywvnMf80wG8HmQainw0RxSGrnmeBp+8k5/j9S0HbvXb5io0Lz880/0wPHV1NlhLd316He+4xOCv5ragF7L9PrH1qBJyB0626x/lC+qrSvH5r/W+n1WpxUM5nMY4GPeH8lHJaPgfeAFQHCL+ntkXT+vnUc3W6pvTIwC0wy3rA4dwLmK2avZ7Eo9uKBuYJfgJscbs8dLCxDMt+EOEPBEZNEWyBYHqTz6bPXrzUnNrSShxHIsYiOL69zrCGLLcLqJP68tB+9w5wj+YhWDafQ2s61wNqxjZhmrQ2pvMFCEvXuCUZ7wqH794ZWs28LJqlTXSUyuksF2M/yOwqgkx2c1ADa4wLAQRk2sAGQQakhN6yFC2hltfz5kSY44NKQeeh+vtI/SSzWhg2CzCgmWISmKUGmaYFBDfCSymnfxJ6/+ospVcWOLLp5DGP/y0P/Rp66O99DQNq7Po3Ds0a0wY+My2QSv2N2mO/OyxR2o6UQk+Lv7yJ06JYSnnolZVU9cUn2O9SmaMWGFBqYXRwbqAJWIi94TX5biotpcGl1DXZ6LnqIbNDTnmUgi52Mv5l5ysMxIcZcGjy2DTK4ZHlcBC14zeSge4qphICjj3bS0A7o9nSp2TOkm7aZ8bGZy/jxhO87V91G0+dfY/Z7BWIIK9KYUi5qy/Hf8YfBG3sqJTHiQWhmTVkbip+wX3x6volVSx+LPAxF+VLXhZ8VQ+iP2Rta/iWe5v42Fngj0BbdnRTXh12ZIcKhTaGbcYjybRwXBU1lu9KlndXp04NM52poKWO0RZsviNaP9a6grkO972+st05pXhE5c1hTEluJy7XUejGUQNLMbAmTdWY1rKBLW3aTJqBZ7nZkb36DhYCreeYHbMUXHvaYi5XDK70EcgulmRjm77wNtenzuXCbmnTRaAx493rbGf3Jr/njMzj920CnKdUaFCjlDioy7NYNvOdGrQJNgI32/L2tkXfFPlxgToqjWVhD6KdLnQRdARf/HHQz2r2X2Gqy8pAZaAyUBmoDFQGKgP/q4F/AJYg9/s0ZoABAAAAAElFTkSuQmCC";function H(o,n={}){let t="";const{needZ:e,needA:r}=n;return(e?o.slice().concat(o[0]):o.slice()).forEach((a,s)=>{const{x:l,y:f}=n.format?n.format(a):a,u=l+","+f;return s===0?(t+="M"+u,t):(r==null?void 0:r[s])?(t+="A"+r[s]+","+u,t):(t+="L"+u,t)}),t+(e?"Z":"")}function J({x:o,y:n},t){const{max:e,min:r}=t;return{x:o-r.x,y:e.y-n}}function K(o,n){const t=o.x*1e3+n.bounding.origin.x,e=-o.z*1e3+n.bounding.origin.y;return{x:t,y:e}}function U(o,n){const t=n.bounding,e=t.max.x-t.min.x,r=t.max.y-t.min.y;return{x:(o.x-t.min.x)/e,y:(t.max.y-o.y)/r}}function Y(o,n){return Math.max(...n.work.observers.map(e=>o.z>=e.standingPosition.z?e.floorIndex:0))}async function z(o){const n=new Headers({"Content-Type":"text/plain"}),t=async function(r){const i={index:r.index,url:r.url,svgUrl:r.svg_url};if(r.svg_url){const a=await fetch(r.svg_url,{headers:n}).then(s=>s.text());i.svgContent=a}return i};return await Promise.all(o.map(t))}function W(o){return{id:o.id,size:o.size,name:o.name,path:o.path,roomType:o.room_type,floorType:o.floor_type,roomLabel:{position:o.room_label.position,positionInImage:o.room_label.position_in_image},observerIndexs:o.observer_indexs}}function T(o){return{floorName:o.floor_name,floorIndex:o.floor_index,rooms:o.rooms.map(W),rules:o.rules}}function F(o){return{index:o.index,floorIndex:o.floor_index,position:o.position,positionInImage:o.position_in_image}}function S(o){return{rad:o.rad,position:o.position,positionInImage:o.position_in_image,northRad:o.north_rad,roomId:o.room_id,floorIndex:o.floor_index}}async function hn(o){const n=await z(o.outlines),t=o.computed_data.bounding,e=o.computed_data.floor_datas.map(T),r=o.computed_data.entrance?S(o.computed_data.entrance):null;return{outlines:n,entrance:r,bounding:t,floorDatas:e,observers:o.computed_data.observers.map(F)}}function Pn(o,n,t){return o.map(r=>{const i=r.position,a=r.icon?r.icon:{url:j,width:45,height:48},s=Y(i,n),l=K(i,t),f=U(l,t);return{floorIndex:s,icon:a,id:r.id,position:l,positionInImage:f}})}const wn="data:image/png;base64,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";function Z(o){w(o,"svelte-1cuuebb","img.svelte-1cuuebb{width:100%;height:100%}")}function X(o){let n,t;return{c(){n=x("img"),I(n.src,t=o[0])||c(n,"src",t),c(n,"alt","floorplan iamge"),c(n,"class","svelte-1cuuebb")},m(e,r){g(e,n,r)},p(e,[r]){r&1&&!I(n.src,t=e[0])&&c(n,"src",t)},i:A,o:A,d(e){e&&p(n)}}}function V(o,n,t){let{url:e}=n;return o.$$set=r=>{"url"in r&&t(0,e=r.url)},[e]}class $ extends d{constructor(n){super();h(this,n,V,X,P,{url:0},Z)}}function nn(o){w(o,"svelte-1qqy56u",".floorplan-plugin__base-image.svelte-1qqy56u{width:100%;height:100%}")}function on(o){let n,t,e,r;return{c(){n=x("div"),t=new D,e=N(),r=new D,t.a=e,r.a=null,c(n,"class","floorplan-plugin__base-image svelte-1qqy56u")},m(i,a){g(i,n,a),t.m(o[1],n),G(n,e),r.m(o[0],n)},p(i,[a]){a&1&&r.p(i[0])},i:A,o:A,d(i){i&&p(n)}}}function en(o,n,t){let{content:e}=n;const r=`
    <style>
      svg [type='lineGroup'] path {
        fill: #ffffff;
        stroke: #ffffff;
      }
      svg [type='lineItemGroup'] g g g g {
        stroke: #ffffff;
      }
    </style>
  `;return o.$$set=i=>{"content"in i&&t(0,e=i.content)},[e,r]}class tn extends d{constructor(n){super();h(this,n,en,on,P,{content:0},nn)}}function rn(o){w(o,"svelte-126ja8e",".floorplan-plugin__base-image.svelte-126ja8e{position:absolute;z-index:10;width:100%;height:100%;pointer-events:none}")}function ln(o){let n,t;return n=new $({props:{url:o[1].url}}),{c(){y(n.$$.fragment)},m(e,r){_(n,e,r),t=!0},p(e,r){const i={};r&2&&(i.url=e[1].url),n.$set(i)},i(e){t||(v(n.$$.fragment,e),t=!0)},o(e){m(n.$$.fragment,e),t=!1},d(e){b(n,e)}}}function sn(o){let n,t;return n=new tn({props:{content:o[0]}}),{c(){y(n.$$.fragment)},m(e,r){_(n,e,r),t=!0},p(e,r){const i={};r&1&&(i.content=e[0]),n.$set(i)},i(e){t||(v(n.$$.fragment,e),t=!0)},o(e){m(n.$$.fragment,e),t=!1},d(e){b(n,e)}}}function an(o){let n,t,e,r;const i=[sn,ln],a=[];function s(l,f){return l[0]?0:l[1]?1:-1}return~(t=s(o))&&(e=a[t]=i[t](o)),{c(){n=x("div"),e&&e.c(),c(n,"class","floorplan-plugin__base-image svelte-126ja8e")},m(l,f){g(l,n,f),~t&&a[t].m(n,null),r=!0},p(l,[f]){let u=t;t=s(l),t===u?~t&&a[t].p(l,f):(e&&(C(),m(a[u],1,1,()=>{a[u]=null}),M()),~t?(e=a[t],e?e.p(l,f):(e=a[t]=i[t](l),e.c()),v(e,1),e.m(n,null)):e=null)},i(l){r||(v(e),r=!0)},o(l){m(e),r=!1},d(l){l&&p(n),~t&&a[t].d()}}}function fn(o,n,t){let e,r;var i,a;let{floorIndex:s}=n,{floorplanData:l}=n;return o.$$set=f=>{"floorIndex"in f&&t(2,s=f.floorIndex),"floorplanData"in f&&t(3,l=f.floorplanData)},o.$$.update=()=>{o.$$.dirty&12&&t(1,e=l.outlines[s]),o.$$.dirty&60&&t(0,r=t(5,a=t(4,i=l.outlines)===null||i===void 0?void 0:i[s])===null||a===void 0?void 0:a.svgContent)},[r,e,s,l,i,a]}class xn extends d{constructor(n){super();h(this,n,fn,an,P,{floorIndex:2,floorplanData:3},rn)}}function un(o){w(o,"svelte-11takew","path.svelte-11takew{opacity:0}path.svelte-11takew:hover{opacity:0.1}")}function cn(o){let n;return{c(){n=B("path"),c(n,"d",o[0]),c(n,"fill","#fff"),c(n,"class","svelte-11takew")},m(t,e){g(t,n,e)},p:A,i:A,o:A,d(t){t&&p(n)}}}function An(o,n,t){let{room:e}=n,{floorplanData:r}=n;const{bounding:i}=r,a=H(e.path,{needZ:!0,format:s=>J(s,i)});return o.$$set=s=>{"room"in s&&t(1,e=s.room),"floorplanData"in s&&t(2,r=s.floorplanData)},[a,e,r]}class mn extends d{constructor(n){super();h(this,n,An,cn,P,{room:1,floorplanData:2},un)}}function vn(o){w(o,"svelte-1tk06jk",".floorplan-plugin__room-highlight.svelte-1tk06jk{position:absolute;width:100%;height:100%}svg.svelte-1tk06jk{width:100%;height:100%;overflow:visible}")}function k(o,n,t){const e=o.slice();return e[4]=n[t],e}function q(o,n){let t,e,r;const i=[{room:n[4],floorplanData:n[1]}];let a={};for(let s=0;s<i.length;s+=1)a=Q(a,i[s]);return e=new mn({props:a}),{key:o,first:null,c(){t=O(),y(e.$$.fragment),this.first=t},m(s,l){g(s,t,l),_(e,s,l),r=!0},p(s,l){n=s;const f=l&3?E(i,[{room:n[4],floorplanData:n[1]}]):{};e.$set(f)},i(s){r||(v(e.$$.fragment,s),r=!0)},o(s){m(e.$$.fragment,s),r=!1},d(s){s&&p(t),b(e,s)}}}function gn(o){let n,t,e=[],r=new Map,i,a=o[1].floorDatas[o[0]].rooms;const s=l=>l[4].id;for(let l=0;l<a.length;l+=1){let f=k(o,a,l),u=s(f);r.set(u,e[l]=q(u,f))}return{c(){n=x("div"),t=B("svg");for(let l=0;l<e.length;l+=1)e[l].c();c(t,"width","100%"),c(t,"height","100%"),c(t,"viewBox",`0 0 ${o[2]} ${o[3]}`),c(t,"class","svelte-1tk06jk"),c(n,"class","floorplan-plugin__room-highlight svelte-1tk06jk")},m(l,f){g(l,n,f),G(n,t);for(let u=0;u<e.length;u+=1)e[u].m(t,null);i=!0},p(l,[f]){f&3&&(a=l[1].floorDatas[l[0]].rooms,C(),e=R(e,f,s,1,l,a,r,t,L,q,null,k),M())},i(l){if(!i){for(let f=0;f<a.length;f+=1)v(e[f]);i=!0}},o(l){for(let f=0;f<e.length;f+=1)m(e[f]);i=!1},d(l){l&&p(n);for(let f=0;f<e.length;f+=1)e[f].d()}}}function pn(o,n,t){let{floorIndex:e}=n,{floorplanData:r}=n;const i=r.bounding.max.x-r.bounding.min.x,a=r.bounding.max.y-r.bounding.min.y;return o.$$set=s=>{"floorIndex"in s&&t(0,e=s.floorIndex),"floorplanData"in s&&t(1,r=s.floorplanData)},[e,r,i,a]}class yn extends d{constructor(n){super();h(this,n,pn,gn,P,{floorIndex:0,floorplanData:1},vn)}}export{wn as C,xn as a,yn as b,Pn as c,J as d,hn as f,H as p};
