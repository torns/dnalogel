import{u as se,D as ae}from"./useFetchDatas-b277a088.js";import{aC as y,V as H,C as le,aD as ue,aA as S,a8 as q,aE as K,G as J,av as ce,T as he,s as de,aq as Z,M as B,aF as fe,aG as pe,aH as me,ao as be,aI as ve,g as ge,r as M,a as ye,a9 as Pe,j as A,B as _,aa as we,az as Oe,c as xe,d as Ae,p as je,e as He,$ as De}from"./vendor-b2bf1e8d.js";import{c as Ee,d as Le,t as ke}from"./typings-ddaad332.js";import{t as Ce}from"./throttle-19b08aa2.js";function k(a,e,t){const i=a[e];a[e]=a[t],a[t]=i}class ze{constructor(e,t){if(Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pixelRatio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"originWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"originHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"canvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!e.renderer)throw new Error("Five Render \u672A\u521D\u59CB\u5316");this.five=e;const i=t.scale,n=e.renderer.getPixelRatio(),r=t.width,o=t.height,s=r*n,l=o*n,u=this.canvas,c=this.canvas.getContext("2d");if(!c)throw new Error("CANNOT CREATE CONTEXT2D");this.scale=i,this.context=c,this.width=s,this.height=l,this.originWidth=r,this.originHeight=o,this.pixelRatio=n,u.classList.add("plugin-measure-magnifier"),u.style.position="absolute",u.style.pointerEvents="none",u.style.borderRadius="50%",u.style.left=-s/2+"px",u.style.top=-l-90+"px",u.setAttribute("width",s.toString()),u.setAttribute("height",l.toString()),this.canvas.style.width=r+"px",this.canvas.style.height=o+"px"}dispose(){this.clear(),this.canvas.remove()}clear(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}appendTo(e){this.container=e,e.append(this.canvas)}updateWithPoint(e){if(!this.five.renderer||!this.container)return;const{scale:t,pixelRatio:i,context:n,originWidth:r,originHeight:o,width:s,height:l}=this,u=e.clone().project(this.five.camera),c=(u.x+1)/2*this.container.clientWidth,d=-(u.x-1)/2*this.container.clientWidth,f=-(u.y-1)/2*this.container.clientHeight;c<183?(this.canvas.style.top=-o/2+"px",this.canvas.style.left=90+"px"):f<183?(this.canvas.style.top=90+"px",this.canvas.style.left=-r/2+"px"):d<183?(this.canvas.style.top=-o/2+"px",this.canvas.style.left=-r-90+"px"):(this.canvas.style.left=-r/2+"px",this.canvas.style.top=-o-90+"px"),this.canvas.style.transform=`translate3d(${c}px, ${f}px, 10px)`;const p=this.five.renderer.getSize(new y),h=(u.x+1)/2*p.x,v=(u.y+1)/2*p.y,g=this.five.getPixels(h-r/t/2,v-o/t/2,r/t,o/t,i*t),P=s*l/2;for(let m=0;m<P;m++){const b=(l-Math.floor(m/s)-1)*s+m%s;k(g,m*4+0,b*4+0),k(g,m*4+1,b*4+1),k(g,m*4+2,b*4+2),k(g,m*4+3,b*4+3)}const w=n.createImageData(s,l);w.data.set(g),n.putImageData(w,0,0)}}class Me{constructor(e){Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onModelLoaded",{enumerable:!0,configurable:!0,writable:!0,value:()=>{!this.five.model||(this.edges=this.five.model.getEdges())}}),this.five=e,this.five.model.loaded?this.onModelLoaded():this.five.on("modelLoaded",this.onModelLoaded)}dispose(){}getAdsorbentPoint(e){if(this.edges.length===0)return null;let t=1/0,i;return this.edges.forEach(n=>{const r=n.closestPointToPoint(e.point,!0,new H),o=r.distanceTo(e.point);o<t&&(i=r,t=o)}),t>.1?null:i||null}}function O(){return((1+Math.random())*65536|0).toString(16).substring(1)}function W(){return(O()+O()+"-"+O()+"-4"+O().substr(0,3)+"-"+O()+"-"+O()+O()+O()).toLowerCase()}class R{constructor(){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:W()}),Object.defineProperty(this,"points",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"lines",{enumerable:!0,configurable:!0,writable:!0,value:[]})}push(e){const t=this.getNext(e);if(!t)throw new Error("\u5F53\u524D\u7EBF\u6BB5\u4E8E\u4E0A\u4E00\u6761\u7EBF\u6BB5\u65E0\u6CD5\u6784\u6210\u6298\u7EBF");return this.lines.push(t.line),this.points.push(...t.points),this.lines.length}pop(){const e=this.lines.pop();return this.lines.length===0?this.points.slice(0,this.points.length):this.points.pop(),e}getNext(e){const t=this.points.slice(-1)[0];if(!t)return{line:e,points:e.points};if(!e.points.includes(t))return null;const i=e.points.find(n=>n!==t);return i?{line:e,points:[i]}:null}toJson(){return{id:this.id,lines:this.lines.map(e=>e.id),points:this.points.map(e=>e.id)}}toCompletelyJson(){return{id:this.id,points:this.points.map(e=>e.toJson()),lines:this.lines.map(e=>e.toCompletelyJson())}}}function Ie(a,e,t){var i,n,r,o,s;const l=(i=t==null?void 0:t.lineWidth)!==null&&i!==void 0?i:2,u=(n=t==null?void 0:t.lineColor)!==null&&n!==void 0?n:new le(16777215),c=(r=t==null?void 0:t.pointSize)!==null&&r!==void 0?r:5,d=(o=t==null?void 0:t.lineRenderOrder)!==null&&o!==void 0?o:10,f=(s=t==null?void 0:t.lineRenderOrder)!==null&&s!==void 0?s:20,p=new ue(a,e);p.setMaterial({linewidth:l,color:u}),p.line.material.depthTest=!1,p.line.material.transparent=!0,p.line.renderOrder=d,p.points.renderOrder=f;const h=p.points.material;return h.depthTest=!1,h.size=c,(t==null?void 0:t.pointColor)&&h.color.set(t.pointColor).convertSRGBToLinear(),(t==null?void 0:t.pointTexture)&&(h.map=t.pointTexture),p}function Y(a,e){const[t,i]=a.points,n=e==="light"?Ee:Le,r=Ie(t.position,i.position,n);return r.name="normalLine_"+a.id,r}function j(a){const{x:e,y:t,z:i}=a;return!(Math.abs(e)>1||Math.abs(t)>1||Math.abs(i)>1)}function Be(){const a=document.createElement("div");return a.style.height="24px",a.style.width="62px",a.style.lineHeight="24px",a.style.textAlign="center",a.style.transform="translate(-50%, -50%)",a.style.borderRadius="12px",a.style.fontSize="14px",a.style.color="#000000",a.style.background="#fff",a.style.pointerEvents="all",a.style.cursor="pointer",a}function Te(a){const e=document.createElement("div");return e.id="distance_"+a.id,e.classList.add("five-plugin-measure__distance"),e.style.opacity="0",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.transform="translate3d(0, 0, 0)",e}function Qe(a){function e(){var h;t(),(h=a.clickCallback)===null||h===void 0||h.call(a,p)}function t(){if(d)return d.highlight();u.style.border="1px solid #538FFF",u.style.color="#538FFF"}function i(){if(d)return d.unHighlight();u.style.border="none",u.style.color="#000"}function n(h){const v=h.getElement();if(!v)return;const g=v.clientWidth,P=v.clientHeight;if(s.points.length<2)return;const[w,m]=s.points,b=w.position.clone().project(h.camera),D=m.position.clone().project(h.camera),I=b.clone().lerp(D,.5);if((()=>{if(Math.abs(b.z)>1||Math.abs(D.z)>1||!j(b)&&!j(D)||!j(I))return!1;const re=new y(b.x*g,b.y*P),oe=new y(D.x*g,D.y*P);return!(re.distanceTo(oe)<20)})()===!1){c.style.opacity="0",c.style.pointerEvents="none";return}const ie=(I.x+1)/2*g,ne=-(I.y-1)/2*P;c.style.transform=`translate3d(${ie}px, ${ne}px, 10px)`,c.style.opacity="1",c.style.pointerEvents="all",d&&d.update({line:s.toCompletelyJson(),polyline:s.getPolyline().toCompletelyJson()});const N=w.position.clone().distanceTo(m.position).toFixed(2)+"m";u.innerText!==N&&(u.innerText=N)}function r(h){h.appendChild(c),c.addEventListener("click",e)}function o(){u.removeEventListener("click",e),c.remove()}const{line:s}=a,l=s.id,u=Be(),c=Te(s),d=a.userDistanceItem,f=new H(0,0,0),p={lineID:l,ndcPosition:f,update:n,appendTo:r,remove:o,highlight:t,unHighlight:i};return(d==null?void 0:d.element)?c.appendChild(d.element):c.appendChild(u),p}class L{constructor(e,t,i){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selected",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"line"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"points",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lightMesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distanceItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"polyline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=W(),this.model=i,e.id===t.id)throw new Error("\u65E0\u6548\u7684\u7EBF\u6BB5, \u4E00\u4E2A\u70B9\u65E0\u6CD5\u6784\u6210\u7EBF\u6BB5");this.hook=new S,this.points=[e,t],this.mesh=Y(this,"normal"),this.lightMesh=Y(this,"light"),this.distanceItem=Qe({line:this,clickCallback:()=>this.hook.emit("selected",this),userDistanceItem:this.model.params.userDistanceItemCreator?this.model.params.userDistanceItemCreator():void 0}),e.lines.push(this),t.lines.push(this)}clear(){this.selected=!1,this.polyline=void 0}getPolyline(){if(this.polyline)return this.polyline;const e=this.model.polylines.find(i=>i.lines.includes(this));if(this.polyline=e,e)return e;const t=new R;return t.push(this),t}findAnotherPoint(e){return this.points.find(({id:t})=>t!==e.id)}toJson(){return{id:this.id,points:this.points.map(({id:e})=>e)}}toCompletelyJson(){return{id:this.id,points:this.points.map(e=>e.toJson())}}clone(){return new L(this.points[0].clone(),this.points[1].clone(),this.model)}}function E(a,e){for(let t=0,i=e.length;t<i;t++)if(a===e[t])return e.splice(t,1)[0]}class x{constructor(e){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lines",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"position",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"point"}),this.id=W(),this.lines=[],this.position=new H,e instanceof H?this.position.copy(e):this.position.fromArray(e)}toJson(){return{id:this.id,lines:this.lines.map(({id:e})=>e),position:this.position.toArray()}}addLine(e){this.lines.push(e)}removeLine(e){E(e,this.lines)}clone(){return new x(this.position)}}class ${constructor(e){Object.defineProperty(this,"lines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"points",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"polylines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"hook",{enumerable:!0,configurable:!0,writable:!0,value:new S}),this.params=e}addLine(e){const[t,i]=e.points;if(!t||!i)return this;this.includes(t)||this.points.push(t),this.includes(i)||this.points.push(i),this.lines.push(e);const n=this.polylines.find(r=>!!r.getNext(e));if(n)n.push(e);else{const r=new R;r.push(e),this.polylines.push(r)}this.hook.emit("lineAdded",e)}removeLineByID(e){const t=this.getLineByID(e);t&&this.removeLine(t)}removeLine(e){const t=this.polylines.find(r=>r.lines.includes(e));if(t){if(t.lines.slice(-1)[0]!==e)throw new Error("\u4E0D\u80FD\u4ECE\u4E2D\u95F4\u5220\u9664\u7EBF\u6BB5");t.pop(),t.lines.length===0&&E(t,this.polylines)}const[i,n]=e.points;return i.lines.length===0&&E(i,this.points),n.lines.length===0&&E(n,this.points),E(e,this.lines),e.clear(),this.hook.emit("lineRemoved",e),this}mergeModel(e){e.lines.forEach(t=>this.addLine(t))}includes(e){if(e.type==="point")return this.points.find(({id:t})=>t===e.id)!==void 0;if(e.type==="line")return this.lines.find(({id:t})=>t===e.id)!==void 0}getPointByID(e){return this.points.find(({id:t})=>t===e)}getLineByID(e){return this.lines.find(({id:t})=>t===e)}getClosestPoint(){}parse(e){const t=e.points.map(({id:r,position:o})=>{const s=new x(o);return s.id=r,s}),i=e.lines.map(r=>{const[o,s]=r.points,l=this.getPointByID.call({points:t},o),u=this.getPointByID.call({points:t},s);if(!l||!u)throw new Error("\u7EBF\u4E0A\u7684\u70B9\u4E0D\u5B58\u5728");const c=new L(l,u,this);return c.id=r.id,c}),n=e.polylines.map(r=>{const o=new R;return r.lines.forEach(s=>{const l=i.find(({id:u})=>u===s);l&&o.push(l)}),o});return this.points.splice(0,this.points.length,...t),this.lines.splice(0,this.lines.length,...i),this.polylines.splice(0,this.polylines.length,...n),this}toJson(){return{points:this.points.map(e=>e.toJson()),lines:this.lines.map(e=>e.toJson()),polylines:this.polylines.map(e=>e.toJson()).filter(e=>e.lines.length>0)}}}const C=a=>a.preventDefault();class ee{constructor(e){Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"group",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"mouseGroup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fiveHelper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"magnifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"userDistanceItemCreator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"updateDistanceUI",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.model.lines.forEach(i=>i.distanceItem.update(this.five))}}),this.five=e.five,this.hook=e.hook,this.model=e.model,this.magnifier=e.magnifier,this.container=e.container,this.fiveHelper=e.fiveHelper,this.userDistanceItemCreator=e.userDistanceItemCreator,this.group=e.group,this.mouseGroup=e.mouseGroup;const t=this.five.getElement();t&&(t.addEventListener("touchstart",C),t.addEventListener("contextmenu",C))}removeLine(e){this.group.remove(e.mesh,e.lightMesh),e.distanceItem.remove(),this.five.needsRender=!0}updateMouseGroup(e,t){if(!e)return this.mouseGroup;const i=this.fiveHelper.getAdsorbentPoint(e),n=i||e.point;if(this.mouseGroup.position.copy(n),t)this.mouseGroup.quaternion.copy(t.quaternion);else if(e.face){const o=e.face.normal.clone().multiplyScalar(.05),l=e.point.clone().add(o).clone().add(o);this.mouseGroup.lookAt(l)}return this.mouseGroup}dispose(){this.disposed=!0,this.magnifier.dispose(),this.model.lines.forEach(t=>this.removeLine(t));const e=this.five.getElement();e&&(e.removeEventListener("touchstart",C),e.removeEventListener("contextmenu",C))}}function G(a){const{x:e,y:t}=a.center,{clientWidth:i,clientHeight:n}=a.target,r=a.target.getBoundingClientRect(),o=new y(e,t).sub(new y(r.left,r.top)),s=new y(o.x/i*2-1,-(o.y/n)*2+1);return{point:o,ndcPoint:s}}function T(a,e){const t=G(e).ndcPoint,i=new q;return i.setFromCamera(t,a.camera),a.model.intersectRaycaster(i)}class z extends ee{constructor(e){var t;super(e);Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"edit"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:new $({userDistanceItemCreator:this.userDistanceItemCreator})}),Object.defineProperty(this,"pressPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasAppendDashed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"hasAppendMouseGroup",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"fiveElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastPoint",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"dashed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hammer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onIntersectionUpdate",{enumerable:!0,configurable:!0,writable:!0,value:Ce((n,r)=>{var o;this.hasAppendMouseGroup===!1&&(this.group.add(this.mouseGroup),this.magnifier.appendTo(this.container),this.hasAppendMouseGroup=!0);const s=this.updateMouseGroup(n,r).position;(o=this.pressPoint)===null||o===void 0||o.position.copy(s),this.updateDashed(),requestAnimationFrame(()=>this.magnifier.updateWithPoint(this.mouseGroup.position)),this.five.needsRender=!0},20)}),Object.defineProperty(this,"revoke",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.model.lines.length===0&&this.lastPoint){this.lastPoint=null,this.hasAppendDashed=!1,this.dashed.distanceItem.remove(),this.group.remove(this.dashed.mesh),this.hook.emit("anchorChange",null),this.five.needsRender=!0;return}if(this.model.lines.length===0&&!this.lastPoint||!this.lastPoint)return;const n=this.model.lines[this.model.lines.length-1],r=n.findAnotherPoint(this.lastPoint);!r||(this.lastPoint=r,this.hook.emit("anchorChange",r.position),this.group.remove(n.mesh),this.model.removeLine(n),this.hasAppendMouseGroup=!1,this.mouseGroup.position.copy(this.lastPoint.position),this.group.remove(this.mouseGroup),n.distanceItem.remove(),this.updateDashed(),this.magnifier.dispose(),this.five.needsRender=!0)}}),Object.defineProperty(this,"onMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.magnifier.dispose(),this.group.remove(this.mouseGroup),this.hasAppendMouseGroup=!1,this.lastPoint&&(this.mouseGroup.position.copy(this.lastPoint.position),this.updateDashed())}}),Object.defineProperty(this,"onLineChanged",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.hook.emit("editedLineChange",this.model.lines.map(n=>n.toCompletelyJson()))}}),Object.defineProperty(this,"onPress",{enumerable:!0,configurable:!0,writable:!0,value:n=>{const[r]=T(this.five,n);if(!r||!r.face)return;const o=new x(r.point);this.pressPoint=o,this.onIntersectionUpdate(r)}}),Object.defineProperty(this,"onPan",{enumerable:!0,configurable:!0,writable:!0,value:n=>{if(!this.pressPoint)return;const[r]=T(this.five,n);!r||!r.face||this.onIntersectionUpdate(r)}}),Object.defineProperty(this,"onPanEnd",{enumerable:!0,configurable:!0,writable:!0,value:n=>{!this.pressPoint||this.onTap(n)}}),Object.defineProperty(this,"onTap",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.hasAppendDashed||(this.dashed.distanceItem.appendTo(this.container),this.group.add(this.dashed.mesh)),this.hasAppendDashed=!0;const[r]=T(this.five,n);this.updateMouseGroup(r);const o=new x(this.mouseGroup.position),s=this.lastPoint;if(o&&(this.lastPoint=o),o&&s){const l=new L(s,o,this.model);l.distanceItem.appendTo(this.container),this.model.addLine(l),this.group.add(l.mesh),l.distanceItem.update(this.five)}this.pressPoint=void 0,this.hasAppendMouseGroup=!1,this.magnifier.dispose(),this.group.remove(this.mouseGroup),this.updateDashed(),this.five.needsRender=!0,this.hook.emit("anchorChange",o.position)}}),Object.defineProperty(this,"onWantsTapGesture",{enumerable:!0,configurable:!0,writable:!0,value:()=>!1}),Object.defineProperty(this,"onWantsToMoveToPano",{enumerable:!0,configurable:!0,writable:!0,value:()=>!1}),Object.defineProperty(this,"onWantsPanGesture",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.pressPoint?!1:void 0}),Object.defineProperty(this,"onCameraUpdate",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.updateDistanceUI(),this.dashed.distanceItem.update(this.five)}}),Object.defineProperty(this,"updateDashed",{enumerable:!0,configurable:!0,writable:!0,value:()=>{!this.lastPoint||(this.dashed.points[0].position.copy(this.lastPoint.position),this.dashed.points[1].position.copy(this.mouseGroup.position),this.dashed.mesh.setPoints(this.lastPoint.position,this.mouseGroup.position),this.dashed.distanceItem.update(this.five))}}),this.dashed=new L(new x([0,0,0]),new x([0,0,0]),this.model),this.dashed.mesh.setMaterial({dashed:!0,dashScale:100}),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("wantsPanGesture",this.onWantsPanGesture),this.five.on("wantsTapGesture",this.onWantsTapGesture),this.five.on("wantsToMoveToPano",this.onWantsToMoveToPano),this.five.on("intersectionOnModelUpdate",this.onIntersectionUpdate),this.model.hook.on("lineAdded",this.onLineChanged),this.model.hook.on("lineRemoved",this.onLineChanged);const i=this.five.getElement();if(i){this.fiveElement=i;const n=new K(i);this.hammer=n,n.on("tap",this.onTap),n.on("pan",this.onPan),n.on("press",this.onPress),n.on("panend",this.onPanEnd)}(t=this.fiveElement)===null||t===void 0||t.addEventListener("mouseleave",this.onMouseLeave),this.hook.emit("anchorChange",null),this.five.refresh()}dispose(){var e,t;super.dispose(),this.group.remove(this.mouseGroup,this.dashed.mesh),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("wantsPanGesture",this.onWantsPanGesture),this.five.off("wantsTapGesture",this.onWantsTapGesture),this.five.off("wantsToMoveToPano",this.onWantsToMoveToPano),this.five.off("intersectionOnModelUpdate",this.onIntersectionUpdate),this.model.hook.off("lineAdded",this.onLineChanged),this.model.hook.off("lineRemoved",this.onLineChanged),(e=this.hammer)===null||e===void 0||e.destroy(),(t=this.fiveElement)===null||t===void 0||t.removeEventListener("mouseleave",this.onMouseLeave),this.magnifier.dispose(),this.dashed.distanceItem.remove(),this.five.needsRender=!0}getEditingLines(){return this.model.lines}}const Re=`<svg class="fpm__delete-icon" width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient x1="21.443%" y1="100%" x2="67.281%" y2="6.672%" id="a">
      <stop stop-color="#FFFCFC" stop-opacity=".6" offset="0%" />
      <stop stop-color="#FFF" offset="100%" />
    </linearGradient>
  </defs>
  <path
    d="M14.932 3.545a.75.75 0 0 1 .102 1.494l-.102.006H13.83l-.979 8.813a2.05 2.05 0 0 1-1.882 1.818l-.155.006H4.868a2.05 2.05 0 0 1-2.037-1.824l-.98-8.813H.75a.75.75 0 0 1-.102-1.493l.102-.007h14.182zm-2.611 1.5H3.36l.961 8.648a.55.55 0 0 0 .369.46l.087.021.091.008h5.946a.55.55 0 0 0 .546-.49l.961-8.647zM10.795 0a.75.75 0 0 1 .102 1.493l-.102.007H4.886A.75.75 0 0 1 4.785.007L4.886 0h5.91z"
    transform="translate(2.16 2.16)"
    fill="url(#a)"
    fill-rule="nonzero"
  />
</svg>`,X="data:image/png;base64,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",Ge="data:image/png;base64,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";class Fe{constructor(e,t){Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"points",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"onClick",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"onMouseEnter",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.content.style.backgroundImage=`url(${Ge})`}}),Object.defineProperty(this,"onMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.content.style.backgroundImage=`url(${X})`}}),this.five=e,this.onClick=(t==null?void 0:t.onClick)||(()=>{}),this.container.classList.add("fpm__delete"),this.container.style.opacity="0",this.container.style.position="absolute",this.container.style.left="0",this.container.style.top="0",this.container.style.transform="translate3d(0, 0, 10px)",this.container.style.pointerEvents="none",this.content.classList.add("fpm__delete-content"),this.content.style.width="67px",this.content.style.height="31px",this.content.style.display="flex",this.content.style.alignItems="center",this.content.style.justifyContent="center",this.content.style.transform="translate(-50%, -50%)",this.content.style.color="#fff",this.content.style.fontSize="14px",this.content.style.lineHeight="31px",this.content.style.borderRadius="15px",this.content.style.backgroundSize="100% 100%",this.content.style.cursor="pointer",this.content.style.userSelect="none",this.content.style.backgroundImage=`url(${X})`,this.content.innerHTML=`
      ${Re}
      <span>\u5220\u9664</span>
    `,this.container.append(this.content);const i=this.content.querySelector(".fpm__delete-icon");i&&(i.style.width="20px",i.style.height="20px",i.style.marginRight="2px"),this.content.addEventListener("click",this.onClick),this.content.addEventListener("mouseenter",this.onMouseEnter),this.content.addEventListener("mouseleave",this.onMouseLeave)}dispose(){this.content.removeEventListener("click",this.onClick),this.content.removeEventListener("mouseenter",this.onMouseEnter),this.content.removeEventListener("mouseleave",this.onMouseLeave),this.container.remove()}appendTo(e){return e.append(this.container),this}setLines(e){return this.lines=e,this.points=Array.from(new Set(this.lines.map(t=>[t.points[0],t.points[1]]).flat(1))),this}updatePosition(){if(this.lines.length===0)return this;const t=this.points.map(f=>f.position).map(f=>f.clone().project(this.five.camera));if(t.some(f=>Math.abs(f.z)>1))return this.hide();const i=t.map(f=>f.x),n=t.map(f=>f.y),r=(Math.min(...i)+Math.max(...i))/2,o=Math.max(...n),s=this.container.parentElement;if(!s)return this;const l=(r+1)/2*s.clientWidth,u=-(o-1)/2*s.clientHeight,c=l,d=u-34;return this.container.style.transform=`translate3d(${c}px, ${d}px, 10px)`,this.show()}hide(){return this.visible=!1,this.container.style.opacity="0",this.container.style.pointerEvents="none",this}show(){return this.visible=!0,this.container.style.opacity="1",this.container.style.pointerEvents="auto",this}}function Se(a,e){const t=a.x-e[0].x,i=a.y-e[0].y,n=e[1].x-e[0].x,r=e[1].y-e[0].y,o=t*n+i*r,s=n*n+r*r,l=o/s;let u,c;return l<0||We(e[0],e[1])?(u=e[0].x,c=e[0].y):l>1?(u=e[1].x,c=e[1].y):(u=e[0].x+l*n,c=e[0].y+l*r),new y(u,c)}function We(a,e){return a.x===e.x&&a.y===e.y}function Ne(a,e){const t=(a.x+1)/2*e.width,i=-(a.y-1)/2*e.height;return new y(t,i)}function Ze(a,e,t,i){const n=a.getElement();if(!n||e.length===0)return null;const r={width:n.clientWidth,height:n.clientHeight},o=e.map(s=>{const l=s.position.clone().project(a.camera);return j(l)?{distance:Ne(l,r).distanceTo(t),point:s}:{distance:1/0,point:s}}).sort((s,l)=>s.distance-l.distance);return typeof i=="number"&&o[0].distance>i?null:o[0]}function V(a){const e=(r,o,s)=>{const l=r.lines.find(c=>c.points.findIndex(({id:f})=>f===r.id)!==o);if(!l)return s;const u=l.points[o];return u?e(u,o,s.concat(l)):s},t=e(a.points[0],1,[]),i=e(a.points[0],0,[]);return t.concat(i)}class Q extends ee{constructor(e){super(e);Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"watch"}),Object.defineProperty(this,"deleteDom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"highlightedLines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"fiveElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"editPointState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hammer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onPanStart",{enumerable:!0,configurable:!0,writable:!0,value:i=>{var n;if(this.model.points.length===0||!this.fiveElement)return;const r=G(i).point,o=(n=Ze(this.five,this.model.points,r,20))===null||n===void 0?void 0:n.point;if(!o){this.editPointState=void 0;return}const s={point:o,associatedLines:V(o.lines[0])};this.hook.emit("wantsDragLine",{point:o.id,lines:s.associatedLines.map(({id:u})=>u)})||(this.editPointState=s,this.magnifier.appendTo(this.container),this.group.add(this.mouseGroup))}}),Object.defineProperty(this,"onPanEnd",{enumerable:!0,configurable:!0,writable:!0,value:()=>{!this.editPointState||(this.editPointState.point.lines.forEach(i=>i.mesh.setMaterial({dashed:!1})),this.highlightLines(this.editPointState.associatedLines),this.editPointState=void 0,this.magnifier.dispose(),this.group.remove(this.mouseGroup))}}),Object.defineProperty(this,"onPan",{enumerable:!0,configurable:!0,writable:!0,value:i=>{if(!this.editPointState||!this.fiveElement)return;const n=G(i).ndcPoint,r=new q;r.setFromCamera(n,this.five.camera);const[o]=this.five.model.intersectRaycaster(r);!o||this.onIntersectionUpdate(o)}}),Object.defineProperty(this,"onIntersectionUpdate",{enumerable:!0,configurable:!0,writable:!0,value:(i,n)=>{if(!!this.editPointState){if(this.clearHighlightLines(),this.editPointState.point.position.copy(i.point),this.editPointState.point.lines.forEach(r=>{r.mesh.setPoints(r.points[0].position.clone(),r.points[1].position.clone()),r.lightMesh.setPoints(r.points[0].position.clone(),r.points[1].position.clone()),r.mesh.setMaterial({dashed:!0})}),this.updateDistanceUI(),this.magnifier.updateWithPoint(i.point),this.mouseGroup.position.copy(i.point),n)this.mouseGroup.quaternion.copy(n.quaternion);else if(i.face){const o=i.face.normal.clone().multiplyScalar(.05),l=i.point.clone().add(o).clone().add(o);this.mouseGroup.lookAt(l)}this.five.needsRender=!0,this.hook.emit("selectedChange",this.editPointState.associatedLines.map(r=>r.toCompletelyJson()))}}}),Object.defineProperty(this,"wantsPanGesture",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.editPointState)return!1}}),Object.defineProperty(this,"wantsTapGesture",{enumerable:!0,configurable:!0,writable:!0,value:i=>{const[n]=this.five.model.intersectRaycaster(i);if(!n)return;const r=this.five.camera,o=n.point.clone().project(r),s=this.container.clientWidth,l=this.container.clientHeight,u=new y(o.x*s,o.y*l),c=this.model.lines.map(h=>{const[v,g]=h.points,P=v.position.clone().project(r),w=g.position.clone().project(r);if(!j(P)&&!j(w))return null;const m=new y(P.x*s,P.y*l),b=new y(w.x*s,w.y*l);return{id:h.id,points:[m,b]}}).filter(h=>!!h);if(c.length===0)return;const f=c.map(h=>{const v=Se(u,h.points);return{id:h.id,distance:v.distanceTo(u)}}).sort((h,v)=>h.distance-v.distance)[0];if(f.distance>20)return;const p=this.model.lines.find(({id:h})=>h===f.id);if(!!p)return this.chooseLine(p),!1}}),Object.defineProperty(this,"chooseLine",{enumerable:!0,configurable:!0,writable:!0,value:i=>{const n=V(i);this.highlightLines(n),this.five.needsRender=!0,this.hook.emit("selectedChange",n.map(r=>r.toCompletelyJson()))}}),Object.defineProperty(this,"lineRemoved",{enumerable:!0,configurable:!0,writable:!0,value:i=>{this.removeLine(i),this.hook.emit("selectedChange",this.model.lines.filter(n=>n.selected).map(n=>n.toCompletelyJson()))}}),Object.defineProperty(this,"onCameraUpdate",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.updateDistanceUI(),this.highlightedLines.length>0&&this.deleteDom.updatePosition()}}),Object.defineProperty(this,"deleteDomClickCallback",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.highlightedLines[0].getPolyline().lines.slice().reverse().forEach(n=>this.model.removeLine(n)),this.highlightedLines=[],this.deleteDom.setLines([]).hide()}}),this.deleteDom=new Fe(this.five,{onClick:this.deleteDomClickCallback}).appendTo(this.container),this.model.lines.forEach(i=>{i.distanceItem.appendTo(this.container),i.distanceItem.update(this.five),i.hook.on("selected",this.chooseLine),this.group.add(i.mesh)});const t=this.five.getElement();if(t){this.fiveElement=t;const i=new K(t);this.hammer=i,i.on("pan",this.onPan),i.on("panstart",this.onPanStart),i.on("panend",this.onPanEnd)}this.model.hook.on("lineRemoved",this.lineRemoved),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("wantsTapGesture",this.wantsTapGesture),this.five.on("wantsPanGesture",this.wantsPanGesture),this.five.needsRender=!0}dispose(){var e;super.dispose(),this.deleteDom.dispose(),this.model.hook.off("lineRemoved",this.lineRemoved),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("wantsPanGesture",this.wantsPanGesture),this.five.off("wantsTapGesture",this.wantsTapGesture),this.five.needsRender=!0,this.hook.emit("selectedChange",[]),(e=this.hammer)===null||e===void 0||e.destroy()}highlightLine(e){e.selected||(e.selected=!0,this.group.add(e.lightMesh),e.distanceItem.highlight(),this.five.needsRender=!0)}clearHighlightLines(){this.group.children.length!==0&&(this.deleteDom.setLines([]).hide(),this.model.lines.forEach(e=>{e.selected=!1,e.distanceItem.unHighlight(),this.group.remove(e.lightMesh)}),this.highlightedLines=[],this.five.needsRender=!0)}highlightLines(e){this.clearHighlightLines(),this.highlightedLines=e,this.deleteDom.setLines(e).updatePosition().show(),e.forEach(t=>this.highlightLine(t))}}const Ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjoAAAI6CAMAAAAZlhLyAAACB1BMVEUAAAD+/v6qqqqgoKCLi4t7e3u4uLhvb29MTExZWVlCQkJgYGBqamo4ODi9vb3///9FRUXPz887Ozv///9QUFBWVlZdXV38/Pzj4+Pn5+f8/Pz5+fn9/f329vZoaGje3t78/Pz////x8fH8/Pzs7OyBgYHd3d39/f319fX+/v79/f2Kior6+vr////+/v76+vr+/v7////8/Pz9/f3+/v7m5ub7+/v+/v7+/v7j4+P////+/v79/f3d3d3h4eH4+Pj+/v79/f12dnbc3Nz9/f3w8PD9/f34+Pj9/f3+/v5jY2P8/Pz9/f2ioqJubm7v7+/+/v76+vr5+fnv7+/09PSDg4P////t7e3+/v7+/v7+/v7///+ZmZl7e3v7+/vy8vL+/v7+/v7p6en19fX////s7Oz+/v6lpaX+/v7r6+vg4OD9/f3q6ur///////+UlJTt7e329vbz8/Pg4OD///+wsLCdnZ2QkJDe3t77+/vz8/Pw8PD+/v7c3Nyqqqrw8PD4+Pj+/v7////4+Pj////s7Oyurq7f39/p6en8/Pz////8/Pz19fVycnK0tLT////q6ure3t7o6Oj////s7Oz39/fd3d3h4eH+/v7j4+P////+/v7n5+f///////////////+ysrLe3t7////////8/PzHx8fl5eX////39/fv7+/d3d3///8S/hbOAAAArHRSTlMAzhATFhkNGyEfIx4dJQ/OKwoozS4wMh3Uy4SPbjs34kJ9EAkGP+8Snk1nRRo5JYl2eDQiA88wY3PXRDYN6dyTX0s751SxPJdhPjRdV1M4ti0XFa+pQiq5aShQSE09IKJwWMilWr9SVzLC3wvFwplKvKKY9spfUEjge6yqnexaLpqQakgBtVz1wQe9i4s6ZaG788fGKIXx95TZzKbSuKu1s2LlsJb7dqiu/cSWYhzVwQAALl1JREFUeNrs0jFqalEUheE9C9ugAQloCg0WmuIJIbxHUsQUQhQEQUTINNI463fvqU2xT3G5xfetNYQ/+M3PT7SDfDo/T0/SIe+pCJAOt0mHvrgvAqRDUn061/vrNSDrOhqNpEOFURGQNfqWDlW+i4CadJ6lQ95zESAdbpMOfTEcPg+Hw4CsphvpUGM4bsoZB2SNW9JB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";function Xe(){const a=new J,e=new ce(.3,.3),t=new he().load(Ye);t.encoding=de;const i=new Z({map:t,transparent:!0,depthTest:!1}),n=new B(e,i),r=new fe;r.add(new pe(new H(0,0,0),new H(0,0,.1)));const o=new me(r,10,.005),s=new Z({color:3404271,depthTest:!1,side:be}),l=new B(o,s),u=new ve(.01,32,32),c=new B(u,s);return c.position.set(0,0,.1),a.name="mouse-current",a.add(n,l,c),a}const F="M31.379 15.466a1.045 1.045 0 0 1-.92 1.076l-11.276.607a1.6 1.6 0 0 0-1.512 1.511l-.599 11.113a1.045 1.045 0 0 1-.92 1.075l-.164.008a1.183 1.183 0 0 1-1.123-.975l-.016-.164-.221-10.768a1.6 1.6 0 0 0-1.567-1.567l-11.3-.231-.165-.016a1.187 1.187 0 0 1-.964-.996l-.01-.127.007-.164c.061-.496.455-.876.958-.917l.118-.003 11.112-.599a1.6 1.6 0 0 0 1.498-1.37l.014-.142.607-11.276a1.045 1.045 0 0 1 1.076-.92c.573.015 1.055.46 1.13 1.019l.009.121.221 10.766a1.6 1.6 0 0 0 1.567 1.566l11.3.234a1.181 1.181 0 0 1 1.14 1.139z",Ve="M27.1772552,8.15828895 C27.8664561,7.48070421 28.5574369,7.81156875 28.8336646,8.04968716 C29.1098924,8.28780557 29.3990219,9.110014 28.8256559,9.79263351 L28.7110903,9.9165024 L13.9697229,25.1399531 C13.3288458,25.7700285 12.3239388,25.8070917 11.6402346,25.2511429 L11.5159715,25.1399531 L3.7056151,18.0063788 C3.01641417,17.3287941 3.00699739,16.2207954 3.68458213,15.5315945 C4.32230894,14.8829348 5.3413021,14.8364368 6.03356826,15.3981178 L6.15936649,15.5105615 L12.6856594,21.9049888 L27.1772552,8.15828895 Z",Ue="url(#fpm__main-b)",te="url(#fpm__main-c)",qe=`
  <svg class="fpm__revoke-icon" width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient x1="47.631%" y1="55.183%" x2="2.967%" y2="86.323%" id="fpm__revoke-a">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".5" offset="100%" />
      </linearGradient>
      <linearGradient x1="5.297%" y1="43.016%" x2="38.238%" y2="79.932%" id="fpm__revoke-b">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity="0" offset="100%" />
      </linearGradient>
    </defs>
    <path
      d="M13.388 7.108c.552 0 1.005.42 1.06.957l.006.11v1.224c0 .921.745 1.667 1.666 1.667h7.184c5.804 0 10.509 4.616 10.509 10.309 0 5.595-4.544 10.15-10.21 10.305l-.3.004H8.924c-.917 0-1.66-.729-1.66-1.628 0-.846.658-1.541 1.5-1.62l.16-.008h14.38c3.972 0 7.191-3.158 7.191-7.053 0-3.81-3.08-6.916-6.933-7.049l-.257-.004H10.029l-.109-.005H8.212c-.245 0-.482-.085-.67-.237l-.09-.082a1.066 1.066 0 0 1-.065-1.422l.079-.086 5.175-5.077c.2-.195.468-.305.747-.305z"
      fill="url(#fpm__revoke-a)"
      fill-rule="nonzero"
      stroke="url(#fpm__revoke-b)"
      stroke-width=".5"
    />
  </svg>
`,Ke=`
  <svg class="fpm__exit-icon width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient x1="36.288%" y1="73.736%" x2="54.242%" y2="97.166%" id="fpm__exit-a">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".5" offset="100%" />
      </linearGradient>
      <linearGradient x1="100%" y1="47.234%" x2="24.047%" y2="47.234%" id="fpm__exit-b">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".005" offset="99.535%" />
        <stop stop-color="#FFF" stop-opacity="0" offset="100%" />
      </linearGradient>
    </defs>
    <path
      d="M22 7a1.5 1.5 0 0 1 .144 2.993L22 10h-9a1.5 1.5 0 0 0-1.493 1.356l-.007.144v17a1.5 1.5 0 0 0 1.356 1.493L13 30h9a1.5 1.5 0 0 1 .144 2.993L22 33h-9a4.5 4.5 0 0 1-4.495-4.288L8.5 28.5v-17a4.5 4.5 0 0 1 4.288-4.495L13 7h9zm6.317 7.755a1 1 0 0 1 .7.286l4.856 4.764a1 1 0 0 1-.7 1.713h-5.856V21.5h-8.032a1.5 1.5 0 1 1 0-3h6.365c.92 0 1.666-.746 1.667-1.667v-1.078a1 1 0 0 1 1-1z"
      fill="url(#fpm__exit-a)"
      fill-rule="nonzero"
      stroke="url(#fpm__exit-b)"
      stroke-width=".5"
    />
  </svg>
`,Je=`
  <svg class="fpm__main-icon" width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <mask id="fpm__main-icon-mask">
        <rect id="fpm__main-icon-mask-black" x="0" y="0" width="30" height="30" fill="black"></rect>
        <rect id="fpm__main-icon-mask-white" x="0" y="0" width="0" height="30" fill="white"></rect>
      </mask>
      <linearGradient id="fpm__main-a" x1="25.371%" y1="0%" x2="109.587%" y2="172.268%">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".77" offset="44.051%" />
        <stop stop-color="#FFF" stop-opacity=".201" offset="100%" />
      </linearGradient>
      <radialGradient id="fpm__main-b" fx="50%" fy="50%" r="50.864%" gradientTransform="matrix(-.98302 0 0 -1 .992 1)">
        <stop stop-color="#2D7CFF" offset="0%" />
        <stop stop-color="#2D7CFF" stop-opacity=".3" offset="100%" />
      </radialGradient>
      <radialGradient id="fpm__main-c" fx="50%" fy="50%" r="50.864%" gradientTransform="matrix(-.98302 0 0 -1 .992 1)">
        <stop stop-opacity=".4" offset="0%" />
        <stop stop-opacity=".12" offset="100%" />
      </radialGradient>
    </defs>
    <g fill="none" fill-rule="evenodd">
      <circle fill="url(#fpm__main-a)" cx="30" cy="30" r="30" />
      <path
        class="fpm__main-icon-path"
        d="${F}"
        fill="${te}"
        fill-rule="nonzero"
        transform="translate(14 14)"
      />
    </g>
  </svg>
`;var _e=`
  <style>
    .fpm__revoke {
      opacity: 0.3;
    }
    
    .fpm__revoke.enabled {
      opacity: 0.7;
    }
    
    .fpm__revoke.enabled:hover {
      opacity: 1;
    }
    
    .fpm__revoke-icon {
      width: 40px;
      height: 40px;
      margin-top: 10px;
      cursor: pointer;
    }  
  </style>
  <div class="fpm_ui-bg"></div>
  <div class="fpm_operating-space">
    <div class="fpm__ui-item fpm__revoke">
      ${qe}
      <span class="fpm__text fpm__revoke-text">\u64A4\u9500</span>
    </div>
    <div class="fpm__ui-item fpm__main">
      ${Je}
      <span class="fpm__text fpm__main-text">\u6DFB\u52A0</span>
    </div>
    <div class="fpm__ui-item fpm__exit">
      ${Ke}
      <span class="fpm__text fpm__exit-text">\u9000\u51FA</span>
    </div>
  </div>
`;const $e={display:"none",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",opacity:"0",transform:"translate(0, 10px)",transition:"opacity 500ms ease-in-out, transform 500ms ease-in-out"},et={position:"absolute",left:"50%",bottom:"32px",transform:"translateX(-50%)",width:"300px",height:"89px",display:"flex",justifyContent:"space-between",fontSize:"16px",pointerEvents:"all",color:"#fff",zIndex:"10"},tt={height:"100%",width:"max-content",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},it={position:"absolute",bottom:"0",left:"0",opacity:"0.5",width:"100%",height:"184px",background:"linear-gradient(180deg, rgba(0,0,0,0.00) 0%, #000000 100%)",zIndex:"0"},nt={margin:"0 80px",opacity:"0.7"},rt={opacity:"0.7"},ot={width:"60px",height:"60px",backgroundSize:"100%",cursor:"pointer"},st={width:"40px",height:"40px",marginTop:"10px",backgroundSize:"100%",cursor:"pointer"},at={cursor:"default",userSelect:"none"};class lt{constructor(e,t){Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"measureController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainIconMaskTween",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onMouseEnter",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{mainItem:i,pathDom:n}=this.mainElement;i.style.opacity="1",n.setAttribute("fill",Ue)}}),Object.defineProperty(this,"onMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{mainItem:i,pathDom:n}=this.mainElement;i.style.opacity="0.7",n.setAttribute("fill",te)}}),Object.defineProperty(this,"onClick",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.measureController.getCurrentMode()==="Watch"?this.measureController.changeMode("Edit"):this.measureController.save().changeMode("Watch")}}),Object.defineProperty(this,"editedLineChangeHandler",{enumerable:!0,configurable:!0,writable:!0,value:i=>{if(!(i.length>1)){if(i.length===0)return this.change2Cancel(!1);this.change2Done()}}}),Object.defineProperty(this,"modeChangeHandler",{enumerable:!0,configurable:!0,writable:!0,value:i=>{i==="Watch"?this.change2Add():this.change2Cancel()}}),this.measureController=e,this.container=t,this.mainElement=this.getMainElement(),Object.assign(this.mainElement.mainIcon.style,ot),Object.assign(this.mainElement.mainItem.style,nt),this.change2Add(),this.measureController.hook.on("modeChange",this.modeChangeHandler),this.mainElement.mainIcon.addEventListener("click",this.onClick),this.mainElement.mainIcon.addEventListener("mouseenter",this.onMouseEnter),this.mainElement.mainIcon.addEventListener("mouseleave",this.onMouseLeave)}dispose(){this.measureController.hook.off("modeChange",this.modeChangeHandler),this.measureController.hook.off("editedLineChange",this.editedLineChangeHandler),this.mainElement.mainIcon.removeEventListener("click",this.onClick),this.mainElement.mainIcon.removeEventListener("mouseenter",this.onMouseEnter),this.mainElement.mainIcon.removeEventListener("mouseleave",this.onMouseLeave)}getMainElement(){const e=this.container.querySelector(".fpm__main-text"),t=this.container.querySelector(".fpm__main"),i=this.container.querySelector(".fpm__main-icon"),n=t==null?void 0:t.querySelector(".fpm__main-icon-path"),r=i==null?void 0:i.querySelector("#fpm__main-icon-mask-white");if(!t||!e||!i||!n||!r)throw new Error("cannot find dom");return{mainTextDom:e,mainItem:t,mainIcon:i,pathDom:n,maskWhiteRect:r}}change2Add(){this.measureController.hook.off("editedLineChange",this.editedLineChangeHandler);const{mainIcon:e,mainTextDom:t,pathDom:i}=this.mainElement;e.style.transition=t.innerText==="\u5B8C\u6210"?"none":"transform 300ms ease-in-out",e.style.transform="rotate(0deg)",t.innerText="\u6DFB\u52A0",i==null||i.setAttribute("d",F)}change2Cancel(e=!0){const{mainIcon:t,mainTextDom:i,pathDom:n}=this.mainElement;n.setAttribute("d",F),n.setAttribute("mask",""),t.style.transition=e?"transform 300ms ease-in-out":"none",t.style.transform="rotate(45deg)",i&&(i.innerText="\u53D6\u6D88"),this.measureController.hook.on("editedLineChange",this.editedLineChangeHandler)}change2Done(){var e;const{mainTextDom:t,mainIcon:i,pathDom:n,maskWhiteRect:r}=this.getMainElement();t.innerText!=="\u5B8C\u6210"&&(i.style.transition="none",i.style.transform="rotate(0deg)",t.innerText="\u5B8C\u6210",n.setAttribute("d",Ve),n.setAttribute("mask","url(#fpm__main-icon-mask)"),(e=this.mainIconMaskTween)===null||e===void 0||e.dispose(),this.mainIconMaskTween=ke().easing(ge.Easing.Quartic.InOut).onUpdate(({progress:o})=>{r.setAttribute("width",(o*30).toString())}).onComplete(()=>{var o;return(o=this.mainIconMaskTween)===null||o===void 0?void 0:o.dispose()}).play())}}class ut{constructor(e,t){Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"revokeIcon",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"revokeItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"measureController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onClick",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.measureController.revoke()}}),Object.defineProperty(this,"onModeChange",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(r!=="Edit"){this.revokeItem.classList.remove("enabled");return}this.revokeItem.classList.add("enabled")}}),Object.defineProperty(this,"handleRevoke",{enumerable:!0,configurable:!0,writable:!0,value:()=>()=>{}}),this.measureController=e,this.container=t;const i=this.container.querySelector(".fpm__revoke-icon"),n=this.container.querySelector(".fpm__revoke");if(!i||!n)throw new Error("\u4E0D\u6B63\u786E\u7684\u9009\u62E9\u5668");this.revokeIcon=i,this.revokeItem=n,this.revokeIcon.addEventListener("click",this.onClick),e.hook.on("modeChange",this.onModeChange)}dispose(){this.revokeIcon.removeEventListener("click",this.onClick),this.measureController.hook.off("modeChange",this.onModeChange)}}class ct{constructor(e,t){Object.defineProperty(this,"revoke",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"measureController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"handleExit",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const s=this.container.querySelector(".fpm__exit-icon"),l=this.container.querySelector(".fpm__exit");if(!l||!s)throw new Error("cannot find dom");Object.assign(l.style,rt),Object.assign(s==null?void 0:s.style,st);const u=()=>l.style.opacity="1",c=()=>l.style.opacity="0.7",d=()=>{this.measureController.disable()};return s.addEventListener("click",d),s.addEventListener("mouseenter",u),s.addEventListener("mouseleave",c),()=>{s.removeEventListener("click",d),s.removeEventListener("mouseenter",u),s.removeEventListener("mouseleave",c)}}}),this.measureController=e,this.container=document.createElement("div"),this.container.innerHTML=_e,this.container.classList.add("fpm__ui-controller"),t.container.appendChild(this.container);const i=this.container.querySelectorAll(".fpm__text"),n=this.container.querySelectorAll(".fpm__ui-item"),r=this.container.querySelector(".fpm_ui-bg"),o=this.container.querySelector(".fpm_operating-space");Object.assign(r==null?void 0:r.style,it),Object.assign(o==null?void 0:o.style,et),Object.assign(this.container.style,$e),n.forEach(s=>Object.assign(s.style,tt)),i.forEach(s=>Object.assign(s.style,at))}dispose(){this.hide(),this.container.remove()}show(){return this.container.style.display="block",this.container.style.opacity="1",this.container.style.transform="translate(0, 0)",this.revoke=new ut(this.measureController,this.container),this.mainController=new lt(this.measureController,this.container),this.disposers.push(this.handleExit()),this}hide(){var e,t;return this.container.style.display="none",this.container.style.opacity="0",this.container.style.transform="translate(0, 10px)",(e=this.revoke)===null||e===void 0||e.dispose(),(t=this.mainController)===null||t===void 0||t.dispose(),this.disposers.forEach(i=>i()),this.disposers=[],this}}class ht{constructor(e,t){Object.defineProperty(this,"measureController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("span")}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"hasAnchor",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"onModelChange",{enumerable:!0,configurable:!0,writable:!0,value:i=>{if(i==="Watch"){this.textDom.innerText="";return}this.textDom.innerText="\u8BF7\u9009\u62E9\u7B2C\u4E00\u4E2A\u6D4B\u91CF\u70B9\uFF0CEsc\u6216\u5355\u51FB\u9F20\u6807\u53F3\u952E\u53EF\u53D6\u6D88\u9009\u62E9"}}),Object.defineProperty(this,"anchorChange",{enumerable:!0,configurable:!0,writable:!0,value:i=>{!this.hasAnchor&&!!i?(this.hasAnchor=!0,this.textDom.innerText="\u9009\u62E9\u4E0B\u4E00\u4E2A\u6D4B\u91CF\u70B9\uFF0CEsc\u6216\u5355\u51FB\u9F20\u6807\u53F3\u952E\u53D6\u6D88\u9009\u62E9"):i||(this.hasAnchor=!1,this.textDom.innerText="\u8BF7\u9009\u62E9\u7B2C\u4E00\u4E2A\u6D4B\u91CF\u70B9\uFF0CEsc\u6216\u5355\u51FB\u9F20\u6807\u53F3\u952E\u53EF\u53D6\u6D88\u9009\u62E9")}}),Object.defineProperty(this,"onEditedLineChange",{enumerable:!0,configurable:!0,writable:!0,value:i=>{i.length===1&&(this.textDom.innerText="\u53EF\u4EE5\u8FDE\u7EED\u9009\u62E9\u6D4B\u91CF\u70B9\uFF0C\u6216\u70B9\u51FB\u4E0B\u65B9\u201C\u5B8C\u6210\u201D\u7ED3\u675F\u6D4B\u91CF\uFF08Esc\u53D6\u6D88\uFF0CCommand+S\u4FDD\u5B58\uFF09")}}),this.initDom(),t.container.append(this.container),this.measureController=e,e.hook.on("modeChange",this.onModelChange),e.hook.on("anchorChange",this.anchorChange),e.hook.on("editedLineChange",this.onEditedLineChange)}dispose(){this.hide(),this.container.remove()}show(){return this.container.style.opacity="1",this.container.style.transform="translate(0, 0)",this}hide(){return this.container.style.opacity="0",this.container.style.transform="translate(0, -10px)",this.measureController.hook.off("modeChange",this.onModelChange),this.measureController.hook.off("anchorChange",this.anchorChange),this.measureController.hook.off("editedLineChange",this.onEditedLineChange),this}initDom(){const e=this.container,t=this.textDom;e.classList.add("fpm__guide-container"),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.width="100%",e.style.height="110px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.transform="translate(0, -10px)",e.style.background="linear-gradient(180deg, rgba(0,0,0,0.40) 0%, rgba(0,0,0,0.00) 100%)",e.style.transition="opacity 500ms ease-in-out, transform 500ms ease-in-out",e.style.opacity="0",t.classList.add("fpm__guide-text"),t.style.color="#fff",t.style.fontSize="20px",t.innerText="\u70B9\u51FB\u4E0B\u65B9\u201C\u6DFB\u52A0\u201D\u5F00\u59CB\u6D4B\u8DDD",e.appendChild(t)}}class dt{constructor(e,t){Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"measureController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:n=>{if(n.metaKey&&n.code==="KeyS"){this.measureController.save().changeMode("Watch"),n.preventDefault();return}if(n.code==="Escape")return this.escape()}}),Object.defineProperty(this,"onMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.button===2&&(n.preventDefault(),this.escape())}}),this.five=t,this.measureController=e;const i=this.five.getElement();!i||(document.body.addEventListener("keydown",this.onKeyDown),i.addEventListener("mousedown",this.onMouseDown))}dispose(){const e=this.five.getElement();!e||(document.body.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("mousedown",this.onMouseDown))}escape(){return this.measureController.getCurrentMode()==="Watch"?this.measureController.disable():this.measureController.changeMode("Watch")}}class ft{constructor(e,t){Object.defineProperty(this,"hasOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"hook",{enumerable:!0,configurable:!0,writable:!0,value:new S}),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"group",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"magnifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fiveHelper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useUIController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useGuideController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"shortcutKeyController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"controllerParams",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getCurrentMode",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.controller instanceof z?"Edit":this.controller instanceof Q?"Watch":null}),Object.defineProperty(this,"changeMode",{enumerable:!0,configurable:!0,writable:!0,value:r=>{var o;if(!this.hasOpen||this.getCurrentMode()===r)return;(o=this.controller)===null||o===void 0||o.dispose();const s={Watch:Q,Edit:z};if(!s[r])throw new Error("\u4E0D\u5B58\u5728\u7684 Mode");this.controller=new s[r](this.controllerParams),this.hook.emit("modeChange",r)}}),this.five=e,this.params=t,this.model=new $({userDistanceItemCreator:this.params.userDistanceItemCreator}),this.fiveHelper=new Me(e);const i=190,n=2;this.magnifier=new ze(e,{scale:n,width:i,height:i}),this.group=new J,this.group.name="plugin-measure-group",this.container.classList.add("five-plugin-measure-container"),this.container.style.position="relative",this.container.style.pointerEvents="none",this.container.style.width="100%",this.container.style.height="100%",this.container.style.background="rgba(0, 0, 0, 0.15)",this.controllerParams={five:this.five,hook:this.hook,group:this.group,model:this.model,magnifier:this.magnifier,container:this.container,fiveHelper:this.fiveHelper,mouseGroup:Xe(),userDistanceItemCreator:this.params.userDistanceItemCreator},this.params.useUIController!==!1&&(this.useUIController=new ct(this,this.controllerParams)),this.params.useUIController!==!1&&(this.useGuideController=new ht(this,this.controllerParams))}appendTo(e){e.append(this.container)}dispose(){var e,t;this.disable(),(e=this.useUIController)===null||e===void 0||e.dispose(),(t=this.magnifier)===null||t===void 0||t.dispose(),this.five.needsRender=!0}load(e){this.model.parse(e),this.save()}enable(){var e,t;this.hasOpen||(this.hasOpen=!0,this.five.scene.add(this.group),this.five.helperVisible=!1,this.controller=new Q(this.controllerParams),(e=this.useUIController)===null||e===void 0||e.show(),(t=this.useGuideController)===null||t===void 0||t.show(),this.shortcutKeyController=new dt(this,this.five),this.hook.emit("enable",!0))}disable(){var e,t,i,n;this.hasOpen=!1,(e=this.controller)===null||e===void 0||e.dispose(),(t=this.useUIController)===null||t===void 0||t.hide(),(i=this.useGuideController)===null||i===void 0||i.hide(),(n=this.shortcutKeyController)===null||n===void 0||n.dispose(),this.controller=null,this.five.helperVisible=!0,this.five.scene.remove(this.group),this.five.needsRender=!0,this.hook.emit("disable",!0)}revoke(){this.controller instanceof z&&this.controller.revoke()}removeLineByID(e){this.model.removeLineByID(e)}highlightLine(e){if(this.getCurrentMode()!=="Watch")return!1;const t=this.model.getLineByID(e);return t?(this.controller.highlightLine(t),!0):!1}clearHighlightLines(){return this.getCurrentMode()!=="Watch"?!1:(this.controller.clearHighlightLines(),!0)}save(){return this.controller instanceof z?(this.model.mergeModel(this.controller.model),this):this}toJson(){return this.model.toJson()}}const pt=function(e,t){return new ft(e,t)};function U(){return{width:window.innerWidth,height:window.innerHeight}}function mt(){const[a,e]=M.exports.useState(U);return M.exports.useEffect(()=>{const t=()=>e(U());return window.addEventListener("resize",t,!1),()=>window.removeEventListener("resize",t,!1)}),a}const bt=a=>{const t=ye().plugins.panoMeasurePlugin,[i,n]=M.exports.useState(!0),r=()=>{t.hook.on("modeChange",s=>{console.log("__mode__",s)}),t.hook.on("enable",()=>{console.log("\u5F00\u542F\u6D4B\u91CF\u5DE5\u5177"),n(!1)}),t.hook.on("disable",()=>{console.log("\u5173\u95ED\u6D4B\u91CF\u5DE5\u5177"),n(!0)})};return M.exports.useEffect(()=>{r();const s=document.querySelector(".plugin-full-screen-container");s&&t.appendTo(s)},[]),Pe("modelLoaded",async()=>{t.enable()}),A(_,{children:A(we,{sx:{display:`${i?"block":"none"}`,position:"fixed",top:"10px",right:"10px",backgroundColor:"transparent"},children:A(Oe,{onClick:()=>{t.enable(),n(!1)},children:"\u5F00\u542F\u6D4B\u91CF\u5DE5\u5177"})})})},vt=xe({imageOptions:{size:512},textureOptions:{size:512},onlyRenderIfNeeds:!0,plugins:[[pt,"panoMeasurePlugin",{useUIController:!0}]]}),gt=()=>{const a=mt(),e=se(ae.WORK);return e&&Ae(vt,{initialWork:je(e),ref:t=>Object.assign(window,{$five:t?.five}),children:[A(He,{...a}),A(_,{className:"plugin-full-screen-container",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}}),A(bt,{})]})};De.render(A(gt,{}),document.querySelector("#app"));
