import{F as M}from"./typings-ddaad332.js";import{V as J,h as q,i as N,k as G,l as F,m as P,n as m,o as L,q as w,t as I,v as D,w as E,z as x,a4 as Z,a7 as we,U as R,a1 as Le,X as A,E as T,a3 as Ee,Y,N as v,Q as y,J as z,K as j,L as U,R as C,I as V,a5 as B,H as ke,ag as X,a2 as W,ah as $,Z as Pe,ai as We,aj as xe,ak as De}from"./vendor-b2bf1e8d.js";import{C as ee,p as K,d as ze,a as je,b as Ce}from"./RoomHighlight-ba554c03.js";function At(n,e,l,t){const a=Math.max(...n.work.observers.map(u=>u.floorIndex));function o(u){return u>a?n.model.bounding.max.y:Math.max(...n.work.observers.filter(p=>p.floorIndex===u).map(p=>p.standingPosition.y))}function s(){const u=o(l),p=o(l+1),d=(t==null?void 0:t.attachedTo)||M.BOUNDING_CENTER;return d===M.BOUNDING_CENTER?(n.model.bounding.max.y+n.model.bounding.min.y)/2:d===M.CEILING?p:u}const r=s(),i=new J(0,r,0),c=new J(1,r,0),h=i.clone().project(n.camera),b=c.clone().project(n.camera);return Math.abs((b.x-h.x)/1e3)*(e.getBoundingClientRect().width/2)}function qe(n,e){return e(n),n}function Yt(n,e){return qe({},l=>{for(const t in n)e.indexOf(t)===-1&&(l[t]=n[t])})}function Ne(n){return n*180/Math.PI}function Ge(n){F(n,"svelte-e8a2kn",".floorplan__camera-position.svelte-e8a2kn{position:absolute;width:0;height:0}.floorplan__camera-rotate.svelte-e8a2kn{position:absolute;background-repeat:no-repeat;background-size:100%}")}function Ae(n){let e,l;return{c(){e=P("div"),l=P("div"),m(l,"class","floorplan__camera-rotate svelte-e8a2kn"),L(l,"background-image",`url(${n[0]||ee})`),L(l,"width",n[4],!1),L(l,"height",n[4],!1),L(l,"left","-"+n[4],!1),L(l,"top","-"+n[4],!1),L(l,"transform",`rotate(${n[3]}deg)`,!1),L(l,"transform-origin",`${n[4]} ${n[4]}`,!1),m(e,"class","floorplan__camera-position svelte-e8a2kn"),L(e,"left",n[1],!1),L(e,"top",n[2],!1)},m(t,a){w(t,e,a),I(e,l)},p(t,[a]){a&1&&L(l,"background-image",`url(${t[0]||ee})`)},i:D,o:D,d(t){t&&E(e)}}}function Ye(n,e,l){let{panoIndex:t}=e,{floorplanData:a}=e,{lastPanoramaLongitude:o}=e,{cameraImageUrl:s}=e;const{observers:r}=a,i=r[t],c=i.positionInImage.x,h=i.positionInImage.y,b=c*100+"%",g=h*100+"%",u=-Ne(o)+45,p=document.body.clientWidth,d=document.body.clientHeight,_=`${(p<500||d<500?17:37)/16}rem`;return n.$$set=k=>{"panoIndex"in k&&l(5,t=k.panoIndex),"floorplanData"in k&&l(6,a=k.floorplanData),"lastPanoramaLongitude"in k&&l(7,o=k.lastPanoramaLongitude),"cameraImageUrl"in k&&l(0,s=k.cameraImageUrl)},[s,b,g,u,_,t,a,o]}class Ue extends q{constructor(e){super();N(this,e,Ye,Ae,G,{panoIndex:5,floorplanData:6,lastPanoramaLongitude:7,cameraImageUrl:0},Ge)}}const Ve="data:image/png;base64,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";function Fe(n){F(n,"svelte-5l80pv",".floorplan-plugin__compass.svelte-5l80pv{position:absolute;left:50%;top:-46px;width:231px;height:41px;will-change:opacity;transform-origin:center 184px}.floorplan-plugin__compass-image.svelte-5l80pv{width:100%;height:100%;position:absolute;left:0;top:0;opacity:0.1;background-repeat:no-repeat;background-size:100% 100%}.floorplan-plugin__compass-text.svelte-5l80pv{position:absolute;left:50%;top:15px;transform:translateX(-50%);opacity:0.2;font-weight:bold;font-size:10px;color:#fff}")}function Se(n){let e,l,t,a,o;return{c(){e=P("div"),l=P("div"),t=x(),a=P("span"),o=Z(n[0]),m(l,"class","floorplan-plugin__compass-image svelte-5l80pv"),L(l,"background-image",`url(${Ve})`),m(a,"class","floorplan-plugin__compass-text svelte-5l80pv"),m(e,"class","floorplan-plugin__compass svelte-5l80pv"),L(e,"transform",n[2],!1)},m(s,r){w(s,e,r),I(e,l),I(e,t),I(e,a),I(a,o)},p(s,r){r&1&&we(o,s[0])},d(s){s&&E(e)}}}function Qe(n){let e,l=n[1]&&Se(n);return{c(){l&&l.c(),e=R()},m(t,a){l&&l.m(t,a),w(t,e,a)},p(t,[a]){t[1]&&l.p(t,a)},i:D,o:D,d(t){l&&l.d(t),t&&E(e)}}}function Re(n){return n/Math.PI*180}function Be(n,e,l){var t;let{floorplanData:a}=e,{northDesc:o}=e;const s=(t=a.entrance)===null||t===void 0?void 0:t.northRad,i=`translateX(-50%) translateZ(10px) rotate(${-(s?Re(s):0)+90}deg)`;return n.$$set=c=>{"floorplanData"in c&&l(3,a=c.floorplanData),"northDesc"in c&&l(0,o=c.northDesc)},[o,s,i,a]}class Oe extends q{constructor(e){super();N(this,e,Be,Qe,G,{floorplanData:3,northDesc:0},Fe)}}function Me(n){F(n,"svelte-1ashbdx",".floorplan-plugin__room-label-item.svelte-1ashbdx{position:absolute;display:flex;flex-flow:column;align-items:center;line-height:15px;color:#fff;transform:translate(-50%, -50%);white-space:nowrap}.floorplan-plugin__room-size.svelte-1ashbdx{opacity:0.45}")}function He(n){let e,l=n[2].outerHTML+"",t;return{c(){e=new Le,t=R(),e.a=t},m(a,o){e.m(l,a,o),w(a,t,o)},p(a,o){o&4&&l!==(l=a[2].outerHTML+"")&&e.p(l)},d(a){a&&E(t),a&&e.d()}}}function Ze(n){let e,l=n[0].name+"",t,a,o;return{c(){e=P("span"),t=Z(l),a=x(),o=P("span"),o.textContent=`${n[3]}`,m(e,"class","floorplan-plugin__room-name"),m(o,"class","floorplan-plugin__room-size svelte-1ashbdx")},m(s,r){w(s,e,r),I(e,t),w(s,a,r),w(s,o,r)},p(s,r){r&1&&l!==(l=s[0].name+"")&&we(t,l)},d(s){s&&E(e),s&&E(a),s&&E(o)}}}function Te(n){let e;function l(o,s){if(o[1]===void 0)return Ze;if(o[2])return He}let t=l(n),a=t&&t(n);return{c(){e=P("div"),a&&a.c(),m(e,"class","floorplan-plugin__room-label-item svelte-1ashbdx"),L(e,"left",n[4],!1),L(e,"top",n[5],!1),L(e,"font-size",n[6],!1)},m(o,s){w(o,e,s),a&&a.m(e,null)},p(o,[s]){t===(t=l(o))&&a?a.p(o,s):(a&&a.d(1),a=t&&t(o),a&&(a.c(),a.m(e,null)))},i:D,o:D,d(o){o&&E(e),a&&a.d()}}}function Xe(n,e,l){let t,{room:a}=e,{getLabelElement:o}=e;const s=document.body.clientWidth,r=document.body.clientHeight,i=a.size?(a.size/1e6).toFixed(1)+"\u33A1":"",c=a.roomLabel,h=c.positionInImage.x*100+"%",b=c.positionInImage.y*100+"%",g=(s<500||r<500?10:14)/16+"rem";return n.$$set=u=>{"room"in u&&l(0,a=u.room),"getLabelElement"in u&&l(1,o=u.getLabelElement)},n.$$.update=()=>{n.$$.dirty&3&&l(2,t=o==null?void 0:o(a))},[a,o,t,i,h,b,g]}class Ke extends q{constructor(e){super();N(this,e,Xe,Te,G,{room:0,getLabelElement:1},Me)}}function Je(n){F(n,"svelte-447cof",".floorplan-plugin__room-labels.svelte-447cof{width:100%;height:100%;position:absolute;left:0;top:0;z-index:20;pointer-events:none}")}function te(n,e,l){const t=n.slice();return t[4]=e[l],t}function le(n){let e,l=[],t=new Map,a,o=n[1];const s=r=>r[4].id;for(let r=0;r<o.length;r+=1){let i=te(n,o,r),c=s(i);t.set(c,l[r]=ne(c,i))}return{c(){e=P("div");for(let r=0;r<l.length;r+=1)l[r].c();m(e,"class","floorplan-plugin__room-labels svelte-447cof")},m(r,i){w(r,e,i);for(let c=0;c<l.length;c+=1)l[c].m(e,null);a=!0},p(r,i){i&3&&(o=r[1],A(),l=T(l,i,s,1,r,o,t,e,Ee,ne,null,te),Y())},i(r){if(!a){for(let i=0;i<o.length;i+=1)v(l[i]);a=!0}},o(r){for(let i=0;i<l.length;i+=1)y(l[i]);a=!1},d(r){r&&E(e);for(let i=0;i<l.length;i+=1)l[i].d()}}}function ne(n,e){let l,t,a;const o=[{room:e[4],getLabelElement:e[0]}];let s={};for(let r=0;r<o.length;r+=1)s=V(s,o[r]);return t=new Ke({props:s}),{key:n,first:null,c(){l=R(),z(t.$$.fragment),this.first=l},m(r,i){w(r,l,i),j(t,r,i),a=!0},p(r,i){e=r;const c=i&3?U(o,[{room:e[4],getLabelElement:e[0]}]):{};t.$set(c)},i(r){a||(v(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&E(l),C(t,r)}}}function $e(n){let e,l,t=n[1]&&le(n);return{c(){t&&t.c(),e=R()},m(a,o){t&&t.m(a,o),w(a,e,o),l=!0},p(a,[o]){a[1]?t?(t.p(a,o),o&2&&v(t,1)):(t=le(a),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(A(),y(t,1,1,()=>{t=null}),Y())},i(a){l||(v(t),l=!0)},o(a){y(t),l=!1},d(a){t&&t.d(a),a&&E(e)}}}function et(n,e,l){let t,{floorIndex:a}=e,{floorplanData:o}=e,{getLabelElement:s}=e;return n.$$set=r=>{"floorIndex"in r&&l(2,a=r.floorIndex),"floorplanData"in r&&l(3,o=r.floorplanData),"getLabelElement"in r&&l(0,s=r.getLabelElement)},n.$$.update=()=>{n.$$.dirty&12&&l(1,t=o.floorDatas[a].rooms)},[s,t,a,o]}class tt extends q{constructor(e){super();N(this,e,et,$e,G,{floorIndex:2,floorplanData:3,getLabelElement:0},Je)}}function lt(n){F(n,"svelte-1l1xujz",".floorplan-plugin__rule-labels.svelte-1l1xujz.svelte-1l1xujz{position:absolute;display:flex}.floorplan-plugin__rule-labels--top.svelte-1l1xujz.svelte-1l1xujz{left:0;top:-1.25rem}.floorplan-plugin__rule-labels--bottom.svelte-1l1xujz.svelte-1l1xujz{left:0;bottom:-1.25rem}.floorplan-plugin__rule-labels--left.svelte-1l1xujz.svelte-1l1xujz{top:0;left:-1.25rem}.floorplan-plugin__rule-labels--right.svelte-1l1xujz.svelte-1l1xujz{top:0;right:-1.25rem}.floorplan-plugin__rule-line.svelte-1l1xujz.svelte-1l1xujz{background:#fff;opacity:0.05;width:100%;height:100%}.floorplan-plugin__rule-scale-wrapper.svelte-1l1xujz.svelte-1l1xujz{position:absolute;width:0.3125rem;height:100%;left:50%;top:0;transform:translateX(-50%)}.floorplan-plugin__rule-labels.is-row.svelte-1l1xujz .floorplan-plugin__rule-scale-wrapper.svelte-1l1xujz{width:100%;height:0.3125rem;top:50%;left:0;transform:translateY(-50%)}.floorplan-plugin__rule-scale.svelte-1l1xujz.svelte-1l1xujz{position:absolute;background:#fff;opacity:0.05;width:100%;height:0.0625rem}.floorplan-plugin__rule-labels.is-row.svelte-1l1xujz .floorplan-plugin__rule-scale.svelte-1l1xujz{width:0.0625rem;height:100%}.floorplan-plugin__rule-text-wrapper.svelte-1l1xujz.svelte-1l1xujz{position:absolute}.floorplan-plugin__rule-labels--top.svelte-1l1xujz .floorplan-plugin__rule-text-wrapper.svelte-1l1xujz{width:100%;height:0;top:0.625rem}.floorplan-plugin__rule-labels--bottom.svelte-1l1xujz .floorplan-plugin__rule-text-wrapper.svelte-1l1xujz{width:100%;height:0;bottom:0.625rem}.floorplan-plugin__rule-labels--left.svelte-1l1xujz .floorplan-plugin__rule-text-wrapper.svelte-1l1xujz{width:0;height:100%;left:0.625rem}.floorplan-plugin__rule-labels--right.svelte-1l1xujz .floorplan-plugin__rule-text-wrapper.svelte-1l1xujz{width:0;height:100%;right:0.625rem}.floorplan-plugin__rule-text-item.svelte-1l1xujz.svelte-1l1xujz{width:0;height:0;position:absolute;transform:rotate(90deg)}.floorplan-plugin__rule-labels.is-row.svelte-1l1xujz .floorplan-plugin__rule-text-item.svelte-1l1xujz{transform:rotate(0)}.floorplan-plugin__rule-text.svelte-1l1xujz.svelte-1l1xujz{width:max-content;transform:translate(-50%, -50%);font-size:0.625rem;color:#fff;opacity:0.2}")}function oe(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function ae(n,e,l){const t=n.slice();return t[13]=e[l],t}function re(n){let e;return{c(){e=P("div"),m(e,"class","floorplan-plugin__rule-scale svelte-1l1xujz"),L(e,"left",n[13].left*100+"%",!1),L(e,"bottom",n[13].bottom*100+"%",!1)},m(l,t){w(l,e,t)},p:D,d(l){l&&E(e)}}}function ie(n,e){let l,t,a=e[10].distance+"",o,s;return{key:n,first:null,c(){l=P("div"),t=P("div"),o=Z(a),s=x(),m(t,"class","floorplan-plugin__rule-text svelte-1l1xujz"),B(t,"is-row",e[1]),m(l,"class","floorplan-plugin__rule-text-item svelte-1l1xujz"),L(l,"left",e[10].left*100+"%",!1),L(l,"bottom",e[10].bottom*100+"%",!1),this.first=l},m(r,i){w(r,l,i),I(l,t),I(t,o),I(l,s)},p(r,i){e=r},d(r){r&&E(l)}}}function nt(n){let e,l,t,a,o,s,r=[],i=new Map,c,h=n[2],b=[];for(let p=0;p<h.length;p+=1)b[p]=re(ae(n,h,p));let g=n[3];const u=p=>p[12];for(let p=0;p<g.length;p+=1){let d=oe(n,g,p),f=u(d);i.set(f,r[p]=ie(f,d))}return{c(){e=P("div"),l=P("div"),t=x(),a=P("div");for(let p=0;p<b.length;p+=1)b[p].c();o=x(),s=P("div");for(let p=0;p<r.length;p+=1)r[p].c();m(l,"class","floorplan-plugin__rule-line svelte-1l1xujz"),m(a,"class","floorplan-plugin__rule-scale-wrapper svelte-1l1xujz"),B(a,"is-row",n[1]),m(s,"class","floorplan-plugin__rule-text-wrapper svelte-1l1xujz"),m(e,"class",c="floorplan-plugin__rule-labels floorplan-plugin__rule-labels--"+n[0]+" svelte-1l1xujz"),B(e,"is-row",n[1]),L(e,"width",n[1]?"100%":1/16+"rem",!1),L(e,"height",n[1]?1/16+"rem":"100%",!1)},m(p,d){w(p,e,d),I(e,l),I(e,t),I(e,a);for(let f=0;f<b.length;f+=1)b[f].m(a,null);I(e,o),I(e,s);for(let f=0;f<r.length;f+=1)r[f].m(s,null)},p(p,[d]){if(d&4){h=p[2];let f;for(f=0;f<h.length;f+=1){const _=ae(p,h,f);b[f]?b[f].p(_,d):(b[f]=re(_),b[f].c(),b[f].m(a,null))}for(;f<b.length;f+=1)b[f].d(1);b.length=h.length}d&10&&(g=p[3],r=T(r,d,u,1,p,g,i,s,ke,ie,null,oe)),d&1&&c!==(c="floorplan-plugin__rule-labels floorplan-plugin__rule-labels--"+p[0]+" svelte-1l1xujz")&&m(e,"class",c),d&3&&B(e,"is-row",p[1])},i:D,o:D,d(p){p&&E(e),X(b,p);for(let d=0;d<r.length;d+=1)r[d].d()}}}const S=1e3,Q=180;function ot(n,e,l){let{type:t}=e,{data:a}=e,{bounding:o}=e;const s=t==="top"||t==="bottom",r=o.max.x-o.min.x-(S-Q)*2,i=o.max.y-o.min.y-(S-Q)*2,c=a.map(([u,p])=>s?[u.x,p.x]:[u.y,p.y]).flat().sort().filter((u,p,d)=>p===0?!0:u!==d[p-1]),h=c.map(u=>{const p=s?(u-o.min.x-S+Q)/r:0,d=s?0:(u-o.min.y-S+Q)/i;return{left:p,bottom:d}});h.unshift({left:0,bottom:0}),h.push(s?{left:1,bottom:0}:{left:0,bottom:1});const b=c[c.length-1]-c[0],g=c.map((u,p,d)=>{const f=p===0?0:u-d[p-1],_=p===0?0:(u+d[p-1])/2,k=s?(_-o.min.x-S+Q)/r:0,O=s?0:(_-o.min.y-S+Q)/i;return{left:k,bottom:O,distance:f}}).filter(({distance:u})=>u/b>.1);return n.$$set=u=>{"type"in u&&l(0,t=u.type),"data"in u&&l(4,a=u.data),"bounding"in u&&l(5,o=u.bounding)},[t,s,h,g,a,o]}class at extends q{constructor(e){super();N(this,e,ot,nt,G,{type:0,data:4,bounding:5},lt)}}function rt(n){F(n,"svelte-12vlcaz",".floorplan-plugin__rule-labels-wrapper.svelte-12vlcaz{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);pointer-events:none}")}function se(n,e,l){const t=n.slice();return t[12]=e[l][0],t[13]=e[l][1],t}function fe(n,e){let l,t,a;const o=[{type:e[12],data:e[13],bounding:e[0]}];let s={};for(let r=0;r<o.length;r+=1)s=V(s,o[r]);return t=new at({props:s}),{key:n,first:null,c(){l=R(),z(t.$$.fragment),this.first=l},m(r,i){w(r,l,i),j(t,r,i),a=!0},p(r,i){e=r;const c=i&9?U(o,[{type:e[12],data:e[13],bounding:e[0]}]):{};t.$set(c)},i(r){a||(v(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&E(l),C(t,r)}}}function it(n){let e,l=[],t=new Map,a,o=n[3];const s=r=>r[12];for(let r=0;r<o.length;r+=1){let i=se(n,o,r),c=s(i);t.set(c,l[r]=fe(c,i))}return{c(){e=P("div");for(let r=0;r<l.length;r+=1)l[r].c();m(e,"class","floorplan-plugin__rule-labels-wrapper svelte-12vlcaz"),L(e,"width",n[2],!1),L(e,"height",n[1],!1)},m(r,i){w(r,e,i);for(let c=0;c<l.length;c+=1)l[c].m(e,null);a=!0},p(r,[i]){i&9&&(o=r[3],A(),l=T(l,i,s,1,r,o,t,e,Ee,fe,null,se),Y()),i&4&&L(e,"width",r[2],!1),i&2&&L(e,"height",r[1],!1)},i(r){if(!a){for(let i=0;i<o.length;i+=1)v(l[i]);a=!0}},o(r){for(let i=0;i<l.length;i+=1)y(l[i]);a=!1},d(r){r&&E(e);for(let i=0;i<l.length;i+=1)l[i].d()}}}const ue=1e3,ce=180;function st(n,e,l){let t,a,o,s,r,i,c,h,b,g,{floorIndex:u}=e,{floorplanData:p}=e;return n.$$set=d=>{"floorIndex"in d&&l(4,u=d.floorIndex),"floorplanData"in d&&l(5,p=d.floorplanData)},n.$$.update=()=>{n.$$.dirty&32&&l(0,t=p.bounding),n.$$.dirty&48&&l(10,a=p.floorDatas[u].rules),n.$$.dirty&1024&&l(11,o=Object.keys(a)),n.$$.dirty&3072&&l(3,s=o.map(d=>[d,a[d]])),n.$$.dirty&1&&l(8,r=t.max.x-t.min.x),n.$$.dirty&1&&l(6,i=t.max.y-t.min.y),n.$$.dirty&1&&l(9,c=t.max.x-t.min.x-(ue-ce)*2),n.$$.dirty&1&&l(7,h=t.max.y-t.min.y-(ue-ce)*2),n.$$.dirty&768&&l(2,b=c/r*100+"%"),n.$$.dirty&192&&l(1,g=h/i*100+"%")},[t,g,b,s,u,p,i,h,r,c,a,o]}class ft extends q{constructor(e){super();N(this,e,st,it,G,{floorIndex:4,floorplanData:5},rt)}}function ut(n){let e;return{c(){e=W("path"),m(e,"d",n[0]),m(e,"fill","#2F313A")},m(l,t){w(l,e,t)},p(l,[t]){t&1&&m(e,"d",l[0])},i:D,o:D,d(l){l&&E(e)}}}function ct(n,e,l){let t,{path:a}=e;return n.$$set=o=>{"path"in o&&l(1,a=o.path)},n.$$.update=()=>{n.$$.dirty&2&&l(0,t=K(a,{needZ:!0}))},[t,a]}class mt extends q{constructor(e){super();N(this,e,ct,ut,G,{path:1})}}function pt(n){let e,l,t,a,o,s;return{c(){e=W("defs"),l=W("pattern"),t=W("rect"),a=W("path"),o=x(),s=W("path"),m(t,"x","0"),m(t,"y","0"),m(t,"width",n[1]),m(t,"height",n[1]),m(t,"fill","#323747"),m(a,"d",n[2]),m(a,"stroke","#ffffff"),m(a,"stroke-opacity","0.06"),m(a,"stroke-width","0.5"),m(a,"fill","none"),m(l,"id","fpm-room-pattern-0"),m(l,"x","0"),m(l,"y","0"),m(l,"width",n[1]),m(l,"height",n[1]),m(l,"patternUnits","userSpaceOnUse"),m(s,"d",n[0]),m(s,"fill","url(#fpm-room-pattern-0)")},m(r,i){w(r,e,i),I(e,l),I(l,t),I(l,a),w(r,o,i),w(r,s,i)},p(r,[i]){i&1&&m(s,"d",r[0])},i:D,o:D,d(r){r&&E(e),r&&E(o),r&&E(s)}}}const H=6;function gt(n,e,l){let t,{path:a}=e;const o=H*2,s=`M0 ${H} h ${o} M${H} 0 v ${o}`;return n.$$set=r=>{"path"in r&&l(3,a=r.path)},n.$$.update=()=>{n.$$.dirty&8&&l(0,t=K(a,{needZ:!0}))},[t,o,s,a]}class dt extends q{constructor(e){super();N(this,e,gt,pt,G,{path:3})}}function ht(n){let e,l,t,a,o,s,r,i,c,h,b;return{c(){e=W("defs"),l=W("pattern"),t=W("rect"),a=W("pattern"),o=W("rect"),s=x(),r=W("path"),i=x(),c=W("path"),h=x(),b=W("path"),m(t,"x","0.5"),m(t,"y","0.5"),m(t,"width","6"),m(t,"height","50"),m(t,"fill","none"),m(t,"stroke","#4B4B57"),m(t,"stroke-width","0.5"),m(l,"id","room-material-pattern-1"),m(l,"x","0"),m(l,"y","0"),m(l,"width","13"),m(l,"height","51"),m(l,"patternUnits","userSpaceOnUse"),m(o,"x","0.5"),m(o,"y","0.5"),m(o,"width","6"),m(o,"height","50"),m(o,"fill","none"),m(o,"stroke","#4B4B57"),m(o,"stroke-width","0.5"),m(a,"id","room-material-pattern-2"),m(a,"x","7"),m(a,"y","25"),m(a,"width","13"),m(a,"height","51"),m(a,"patternUnits","userSpaceOnUse"),m(r,"d",n[0]),m(r,"fill","#43434D"),m(c,"d",n[0]),m(c,"fill","url(#room-material-pattern-1)"),m(b,"d",n[0]),m(b,"fill","url(#room-material-pattern-2)")},m(g,u){w(g,e,u),I(e,l),I(l,t),I(e,a),I(a,o),w(g,s,u),w(g,r,u),w(g,i,u),w(g,c,u),w(g,h,u),w(g,b,u)},p(g,[u]){u&1&&m(r,"d",g[0]),u&1&&m(c,"d",g[0]),u&1&&m(b,"d",g[0])},i:D,o:D,d(g){g&&E(e),g&&E(s),g&&E(r),g&&E(i),g&&E(c),g&&E(h),g&&E(b)}}}function bt(n,e,l){let t,{path:a}=e;return n.$$set=o=>{"path"in o&&l(1,a=o.path)},n.$$.update=()=>{n.$$.dirty&2&&l(0,t=K(a,{needZ:!0}))},[t,a]}class _t extends q{constructor(e){super();N(this,e,bt,ht,G,{path:1})}}function vt(n){F(n,"svelte-1b0icjc","svg.svelte-1b0icjc{position:absolute;width:100%;height:100%;overflow:visible}")}function me(n,e,l){const t=n.slice();return t[5]=e[l],t}function yt(n){let e,l;return e=new dt({props:{path:n[5].path}}),{c(){z(e.$$.fragment)},m(t,a){j(e,t,a),l=!0},p(t,a){const o={};a&1&&(o.path=t[5].path),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function wt(n){let e,l;return e=new _t({props:{path:n[5].path}}),{c(){z(e.$$.fragment)},m(t,a){j(e,t,a),l=!0},p(t,a){const o={};a&1&&(o.path=t[5].path),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function Et(n){let e,l;return e=new mt({props:{path:n[5].path}}),{c(){z(e.$$.fragment)},m(t,a){j(e,t,a),l=!0},p(t,a){const o={};a&1&&(o.path=t[5].path),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function pe(n){let e,l,t,a,o;const s=[Et,wt,yt],r=[];function i(c,h){return c[5].floorType===1?0:c[5].floorType===0?1:2}return l=i(n),t=r[l]=s[l](n),{c(){e=W("svg"),t.c(),m(e,"width","100%"),m(e,"height","100%"),m(e,"viewBox",a=`0 0 ${n[1]} ${n[2]}`),m(e,"class","svelte-1b0icjc")},m(c,h){w(c,e,h),r[l].m(e,null),o=!0},p(c,h){let b=l;l=i(c),l===b?r[l].p(c,h):(A(),y(r[b],1,1,()=>{r[b]=null}),Y(),t=r[l],t?t.p(c,h):(t=r[l]=s[l](c),t.c()),v(t,1),t.m(e,null))},i(c){o||(v(t),o=!0)},o(c){y(t),o=!1},d(c){c&&E(e),r[l].d()}}}function It(n){let e,l,t=n[0],a=[];for(let s=0;s<t.length;s+=1)a[s]=pe(me(n,t,s));const o=s=>y(a[s],1,1,()=>{a[s]=null});return{c(){e=P("div");for(let s=0;s<a.length;s+=1)a[s].c();m(e,"class","floorplan-plugin__room-material")},m(s,r){w(s,e,r);for(let i=0;i<a.length;i+=1)a[i].m(e,null);l=!0},p(s,[r]){if(r&7){t=s[0];let i;for(i=0;i<t.length;i+=1){const c=me(s,t,i);a[i]?(a[i].p(c,r),v(a[i],1)):(a[i]=pe(c),a[i].c(),v(a[i],1),a[i].m(e,null))}for(A(),i=t.length;i<a.length;i+=1)o(i);Y()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)v(a[r]);l=!0}},o(s){a=a.filter(Boolean);for(let r=0;r<a.length;r+=1)y(a[r]);l=!1},d(s){s&&E(e),X(a,s)}}}function Lt(n,e,l){let t,{floorIndex:a}=e,{floorplanData:o}=e;const s=o.bounding.max.x-o.bounding.min.x,r=o.bounding.max.y-o.bounding.min.y;return n.$$set=i=>{"floorIndex"in i&&l(3,a=i.floorIndex),"floorplanData"in i&&l(4,o=i.floorplanData)},n.$$.update=()=>{n.$$.dirty&24&&l(0,t=o.floorDatas[a].rooms.map(i=>Object.assign(Object.assign({},i),{path:i.path.map(c=>ze(c,o.bounding))})))},[t,s,r,a,o]}class kt extends q{constructor(e){super();N(this,e,Lt,It,G,{floorIndex:3,floorplanData:4},vt)}}function Pt(n){F(n,"svelte-1oamigj",".floorplan-plugin__floor.svelte-1oamigj{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;pointer-events:none}.floorplan-plugin__floor--is-current.svelte-1oamigj{opacity:1;pointer-events:auto}")}function ge(n){let e,l;const t=[{floorIndex:n[1],floorplanData:n[5]}];let a={};for(let o=0;o<t.length;o+=1)a=V(a,t[o]);return e=new Ce({props:a}),{c(){z(e.$$.fragment)},m(o,s){j(e,o,s),l=!0},p(o,s){const r=s&34?U(t,[{floorIndex:o[1],floorplanData:o[5]}]):{};e.$set(r)},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),l=!1},d(o){C(e,o)}}}function de(n){let e,l;const t=[{floorplanData:n[5],floorIndex:n[1],getLabelElement:n[6]}];let a={};for(let o=0;o<t.length;o+=1)a=V(a,t[o]);return e=new tt({props:a}),{c(){z(e.$$.fragment)},m(o,s){j(e,o,s),l=!0},p(o,s){const r=s&98?U(t,[{floorplanData:o[5],floorIndex:o[1],getLabelElement:o[6]}]):{};e.$set(r)},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),l=!1},d(o){C(e,o)}}}function he(n){let e,l;const t=[{floorplanData:n[5],floorIndex:n[1]}];let a={};for(let o=0;o<t.length;o+=1)a=V(a,t[o]);return e=new ft({props:a}),{c(){z(e.$$.fragment)},m(o,s){j(e,o,s),l=!0},p(o,s){const r=s&34?U(t,[{floorplanData:o[5],floorIndex:o[1]}]):{};e.$set(r)},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),l=!1},d(o){C(e,o)}}}function Wt(n){let e,l,t,a,o,s,r,i,c;const h=[{floorIndex:n[1],floorplanData:n[5]}];let b={};for(let _=0;_<h.length;_+=1)b=V(b,h[_]);l=new kt({props:b});let g=n[2]&&ge(n);const u=[{floorplanData:n[5],floorIndex:n[1]}];let p={};for(let _=0;_<u.length;_+=1)p=V(p,u[_]);o=new je({props:p});let d=n[3]&&de(n),f=n[4]&&he(n);return{c(){e=P("div"),z(l.$$.fragment),t=x(),g&&g.c(),a=x(),z(o.$$.fragment),s=x(),d&&d.c(),r=x(),f&&f.c(),m(e,"class",i=$(`floorplan-plugin__floor${n[0]?" floorplan-plugin__floor--is-current":""}`)+" svelte-1oamigj")},m(_,k){w(_,e,k),j(l,e,null),I(e,t),g&&g.m(e,null),I(e,a),j(o,e,null),I(e,s),d&&d.m(e,null),I(e,r),f&&f.m(e,null),c=!0},p(_,[k]){const O=k&34?U(h,[{floorIndex:_[1],floorplanData:_[5]}]):{};l.$set(O),_[2]?g?(g.p(_,k),k&4&&v(g,1)):(g=ge(_),g.c(),v(g,1),g.m(e,a)):g&&(A(),y(g,1,1,()=>{g=null}),Y());const Ie=k&34?U(u,[{floorplanData:_[5],floorIndex:_[1]}]):{};o.$set(Ie),_[3]?d?(d.p(_,k),k&8&&v(d,1)):(d=de(_),d.c(),v(d,1),d.m(e,r)):d&&(A(),y(d,1,1,()=>{d=null}),Y()),_[4]?f?(f.p(_,k),k&16&&v(f,1)):(f=he(_),f.c(),v(f,1),f.m(e,null)):f&&(A(),y(f,1,1,()=>{f=null}),Y()),(!c||k&1&&i!==(i=$(`floorplan-plugin__floor${_[0]?" floorplan-plugin__floor--is-current":""}`)+" svelte-1oamigj"))&&m(e,"class",i)},i(_){c||(v(l.$$.fragment,_),v(g),v(o.$$.fragment,_),v(d),v(f),c=!0)},o(_){y(l.$$.fragment,_),y(g),y(o.$$.fragment,_),y(d),y(f),c=!1},d(_){_&&E(e),C(l),g&&g.d(),C(o),d&&d.d(),f&&f.d()}}}function xt(n,e,l){let{isCurrent:t}=e,{floorIndex:a}=e,{hoverEnable:o}=e,{roomLabelsEnable:s}=e,{ruleLabelsEnable:r}=e,{floorplanData:i}=e,{getLabelElement:c}=e;return n.$$set=h=>{"isCurrent"in h&&l(0,t=h.isCurrent),"floorIndex"in h&&l(1,a=h.floorIndex),"hoverEnable"in h&&l(2,o=h.hoverEnable),"roomLabelsEnable"in h&&l(3,s=h.roomLabelsEnable),"ruleLabelsEnable"in h&&l(4,r=h.ruleLabelsEnable),"floorplanData"in h&&l(5,i=h.floorplanData),"getLabelElement"in h&&l(6,c=h.getLabelElement)},[t,a,o,s,r,i,c]}class Dt extends q{constructor(e){super();N(this,e,xt,Wt,G,{isCurrent:0,floorIndex:1,hoverEnable:2,roomLabelsEnable:3,ruleLabelsEnable:4,floorplanData:5,getLabelElement:6},Pt)}}function zt(n){F(n,"svelte-177x2q7",".floorplan-main.svelte-177x2q7{width:100%;height:100%}")}function be(n,e,l){const t=n.slice();return t[13]=e[l],t}function _e(n){let e,l,t,a,o,s,r=n[9].floorDatas,i=[];for(let u=0;u<r.length;u+=1)i[u]=ve(be(n,r,u));const c=u=>y(i[u],1,1,()=>{i[u]=null}),h=[{panoIndex:n[3],floorplanData:n[9],lastPanoramaLongitude:n[10],cameraImageUrl:n[11]}];let b={};for(let u=0;u<h.length;u+=1)b=V(b,h[u]);t=new Ue({props:b});let g=n[6]&&ye(n);return{c(){e=P("div");for(let u=0;u<i.length;u+=1)i[u].c();l=x(),z(t.$$.fragment),a=x(),g&&g.c(),m(e,"class","floorplan-main svelte-177x2q7")},m(u,p){w(u,e,p);for(let d=0;d<i.length;d+=1)i[d].m(e,null);I(e,l),j(t,e,null),I(e,a),g&&g.m(e,null),s=!0},p(u,p){if(n=u,p&5040){r=n[9].floorDatas;let f;for(f=0;f<r.length;f+=1){const _=be(n,r,f);i[f]?(i[f].p(_,p),v(i[f],1)):(i[f]=ve(_),i[f].c(),v(i[f],1),i[f].m(e,l))}for(A(),f=r.length;f<i.length;f+=1)c(f);Y()}const d=p&3592?U(h,[{panoIndex:n[3],floorplanData:n[9],lastPanoramaLongitude:n[10],cameraImageUrl:n[11]}]):{};t.$set(d),n[6]?g?(g.p(n,p),p&64&&v(g,1)):(g=ye(n),g.c(),v(g,1),g.m(e,null)):g&&(A(),y(g,1,1,()=>{g=null}),Y())},i(u){if(!s){for(let p=0;p<r.length;p+=1)v(i[p]);v(t.$$.fragment,u),v(g),o||Pe(()=>{o=We(e,De,{duration:n[0],easing:xe}),o.start()}),s=!0}},o(u){i=i.filter(Boolean);for(let p=0;p<i.length;p+=1)y(i[p]);y(t.$$.fragment,u),y(g),s=!1},d(u){u&&E(e),X(i,u),C(t),g&&g.d()}}}function ve(n){let e,l;const t=[{hoverEnable:n[5],floorplanData:n[9],getLabelElement:n[12],roomLabelsEnable:n[7],ruleLabelsEnable:n[8]},{floorIndex:n[13].floorIndex},{isCurrent:n[13].floorIndex===n[4]}];let a={};for(let o=0;o<t.length;o+=1)a=V(a,t[o]);return e=new Dt({props:a}),{c(){z(e.$$.fragment)},m(o,s){j(e,o,s),l=!0},p(o,s){const r=s&5040?U(t,[s&5024&&{hoverEnable:o[5],floorplanData:o[9],getLabelElement:o[12],roomLabelsEnable:o[7],ruleLabelsEnable:o[8]},s&512&&{floorIndex:o[13].floorIndex},s&528&&{isCurrent:o[13].floorIndex===o[4]}]):{};e.$set(r)},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),l=!1},d(o){C(e,o)}}}function ye(n){let e,l;return e=new Oe({props:{floorplanData:n[9],northDesc:n[2]}}),{c(){z(e.$$.fragment)},m(t,a){j(e,t,a),l=!0},p(t,a){const o={};a&512&&(o.floorplanData=t[9]),a&4&&(o.northDesc=t[2]),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function jt(n){let e,l,t=n[1]&&_e(n);return{c(){t&&t.c(),e=R()},m(a,o){t&&t.m(a,o),w(a,e,o),l=!0},p(a,[o]){a[1]?t?(t.p(a,o),o&2&&v(t,1)):(t=_e(a),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(A(),y(t,1,1,()=>{t=null}),Y())},i(a){l||(v(t),l=!0)},o(a){y(t),l=!1},d(a){t&&t.d(a),a&&E(e)}}}function Ct(n,e,l){let{duration:t=0}=e,{visible:a}=e,{northDesc:o}=e,{panoIndex:s}=e,{floorIndex:r}=e,{hoverEnable:i}=e,{compassEnable:c}=e,{roomLabelsEnable:h}=e,{ruleLabelsEnable:b}=e,{floorplanData:g}=e,{lastPanoramaLongitude:u}=e,{cameraImageUrl:p}=e,{getLabelElement:d}=e;return n.$$set=f=>{"duration"in f&&l(0,t=f.duration),"visible"in f&&l(1,a=f.visible),"northDesc"in f&&l(2,o=f.northDesc),"panoIndex"in f&&l(3,s=f.panoIndex),"floorIndex"in f&&l(4,r=f.floorIndex),"hoverEnable"in f&&l(5,i=f.hoverEnable),"compassEnable"in f&&l(6,c=f.compassEnable),"roomLabelsEnable"in f&&l(7,h=f.roomLabelsEnable),"ruleLabelsEnable"in f&&l(8,b=f.ruleLabelsEnable),"floorplanData"in f&&l(9,g=f.floorplanData),"lastPanoramaLongitude"in f&&l(10,u=f.lastPanoramaLongitude),"cameraImageUrl"in f&&l(11,p=f.cameraImageUrl),"getLabelElement"in f&&l(12,d=f.getLabelElement)},[t,a,o,s,r,i,c,h,b,g,u,p,d]}class Ut extends q{constructor(e){super();N(this,e,Ct,jt,G,{duration:0,visible:1,northDesc:2,panoIndex:3,floorIndex:4,hoverEnable:5,compassEnable:6,roomLabelsEnable:7,ruleLabelsEnable:8,floorplanData:9,lastPanoramaLongitude:10,cameraImageUrl:11,getLabelElement:12},zt)}}function Vt(n,e,l=300){const t=n.getElement();!t||(t.style.opacity=e+"",t.style.transition=l===0?"none":`opacity ${l}ms linear`,l!==0&&Promise.race([new Promise(a=>t.addEventListener("transitionend",a,{once:!0})),new Promise(a=>setTimeout(a,l))]).then(()=>{t.style.transition="none"}))}export{Ut as C,Vt as c,At as g,Yt as o};
