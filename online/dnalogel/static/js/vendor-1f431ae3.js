function _mergeNamespaces(va,_a){return _a.forEach(function(_s){_s&&typeof _s!="string"&&!Array.isArray(_s)&&Object.keys(_s).forEach(function(Ss){if(Ss!=="default"&&!(Ss in va)){var Ms=Object.getOwnPropertyDescriptor(_s,Ss);Object.defineProperty(va,Ss,Ms.get?Ms:{enumerable:!0,get:function(){return _s[Ss]}})}})}),Object.freeze(Object.defineProperty(va,Symbol.toStringTag,{value:"Module"}))}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(va){if(va.__esModule)return va;var _a=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(va).forEach(function(_s){var Ss=Object.getOwnPropertyDescriptor(va,_s);Object.defineProperty(_a,_s,Ss.get?Ss:{enumerable:!0,get:function(){return va[_s]}})}),_a}var reactDom={exports:{}},reactDom_production_min={},react$1={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(va){if(va==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(va)}function shouldUseNative(){try{if(!Object.assign)return!1;var va=new String("abc");if(va[5]="de",Object.getOwnPropertyNames(va)[0]==="5")return!1;for(var _a={},_s=0;_s<10;_s++)_a["_"+String.fromCharCode(_s)]=_s;var Ss=Object.getOwnPropertyNames(_a).map(function(Cs){return _a[Cs]});if(Ss.join("")!=="0123456789")return!1;var Ms={};return"abcdefghijklmnopqrst".split("").forEach(function(Cs){Ms[Cs]=Cs}),Object.keys(Object.assign({},Ms)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(va,_a){for(var _s,Ss=toObject(va),Ms,Cs=1;Cs<arguments.length;Cs++){_s=Object(arguments[Cs]);for(var Ts in _s)hasOwnProperty.call(_s,Ts)&&(Ss[Ts]=_s[Ts]);if(getOwnPropertySymbols){Ms=getOwnPropertySymbols(_s);for(var Bs=0;Bs<Ms.length;Bs++)propIsEnumerable.call(_s,Ms[Bs])&&(Ss[Ms[Bs]]=_s[Ms[Bs]])}}return Ss};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$6=objectAssign,n$6=60103,p$5=60106;react_production_min.Fragment=60107;react_production_min.StrictMode=60108;react_production_min.Profiler=60114;var q$4=60109,r$7=60110,t$5=60112;react_production_min.Suspense=60113;var u$4=60115,v$5=60116;if(typeof Symbol=="function"&&Symbol.for){var w$5=Symbol.for;n$6=w$5("react.element"),p$5=w$5("react.portal"),react_production_min.Fragment=w$5("react.fragment"),react_production_min.StrictMode=w$5("react.strict_mode"),react_production_min.Profiler=w$5("react.profiler"),q$4=w$5("react.provider"),r$7=w$5("react.context"),t$5=w$5("react.forward_ref"),react_production_min.Suspense=w$5("react.suspense"),u$4=w$5("react.memo"),v$5=w$5("react.lazy")}var x$4=typeof Symbol=="function"&&Symbol.iterator;function y$6(va){return va===null||typeof va!="object"?null:(va=x$4&&va[x$4]||va["@@iterator"],typeof va=="function"?va:null)}function z$3(va){for(var _a="https://reactjs.org/docs/error-decoder.html?invariant="+va,_s=1;_s<arguments.length;_s++)_a+="&args[]="+encodeURIComponent(arguments[_s]);return"Minified React error #"+va+"; visit "+_a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A$5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B$4={};function C$4(va,_a,_s){this.props=va,this.context=_a,this.refs=B$4,this.updater=_s||A$5}C$4.prototype.isReactComponent={};C$4.prototype.setState=function(va,_a){if(typeof va!="object"&&typeof va!="function"&&va!=null)throw Error(z$3(85));this.updater.enqueueSetState(this,va,_a,"setState")};C$4.prototype.forceUpdate=function(va){this.updater.enqueueForceUpdate(this,va,"forceUpdate")};function D$4(){}D$4.prototype=C$4.prototype;function E$5(va,_a,_s){this.props=va,this.context=_a,this.refs=B$4,this.updater=_s||A$5}var F$4=E$5.prototype=new D$4;F$4.constructor=E$5;l$6(F$4,C$4.prototype);F$4.isPureReactComponent=!0;var G$4={current:null},H$4=Object.prototype.hasOwnProperty,I$4={key:!0,ref:!0,__self:!0,__source:!0};function J$2(va,_a,_s){var Ss,Ms={},Cs=null,Ts=null;if(_a!=null)for(Ss in _a.ref!==void 0&&(Ts=_a.ref),_a.key!==void 0&&(Cs=""+_a.key),_a)H$4.call(_a,Ss)&&!I$4.hasOwnProperty(Ss)&&(Ms[Ss]=_a[Ss]);var Bs=arguments.length-2;if(Bs===1)Ms.children=_s;else if(1<Bs){for(var Ps=Array(Bs),Ls=0;Ls<Bs;Ls++)Ps[Ls]=arguments[Ls+2];Ms.children=Ps}if(va&&va.defaultProps)for(Ss in Bs=va.defaultProps,Bs)Ms[Ss]===void 0&&(Ms[Ss]=Bs[Ss]);return{$$typeof:n$6,type:va,key:Cs,ref:Ts,props:Ms,_owner:G$4.current}}function K$2(va,_a){return{$$typeof:n$6,type:va.type,key:_a,ref:va.ref,props:va.props,_owner:va._owner}}function L$3(va){return typeof va=="object"&&va!==null&&va.$$typeof===n$6}function escape$1(va){var _a={"=":"=0",":":"=2"};return"$"+va.replace(/[=:]/g,function(_s){return _a[_s]})}var M$3=/\/+/g;function N$4(va,_a){return typeof va=="object"&&va!==null&&va.key!=null?escape$1(""+va.key):_a.toString(36)}function O$4(va,_a,_s,Ss,Ms){var Cs=typeof va;(Cs==="undefined"||Cs==="boolean")&&(va=null);var Ts=!1;if(va===null)Ts=!0;else switch(Cs){case"string":case"number":Ts=!0;break;case"object":switch(va.$$typeof){case n$6:case p$5:Ts=!0}}if(Ts)return Ts=va,Ms=Ms(Ts),va=Ss===""?"."+N$4(Ts,0):Ss,Array.isArray(Ms)?(_s="",va!=null&&(_s=va.replace(M$3,"$&/")+"/"),O$4(Ms,_a,_s,"",function(Ls){return Ls})):Ms!=null&&(L$3(Ms)&&(Ms=K$2(Ms,_s+(!Ms.key||Ts&&Ts.key===Ms.key?"":(""+Ms.key).replace(M$3,"$&/")+"/")+va)),_a.push(Ms)),1;if(Ts=0,Ss=Ss===""?".":Ss+":",Array.isArray(va))for(var Bs=0;Bs<va.length;Bs++){Cs=va[Bs];var Ps=Ss+N$4(Cs,Bs);Ts+=O$4(Cs,_a,_s,Ps,Ms)}else if(Ps=y$6(va),typeof Ps=="function")for(va=Ps.call(va),Bs=0;!(Cs=va.next()).done;)Cs=Cs.value,Ps=Ss+N$4(Cs,Bs++),Ts+=O$4(Cs,_a,_s,Ps,Ms);else if(Cs==="object")throw _a=""+va,Error(z$3(31,_a==="[object Object]"?"object with keys {"+Object.keys(va).join(", ")+"}":_a));return Ts}function P$4(va,_a,_s){if(va==null)return va;var Ss=[],Ms=0;return O$4(va,Ss,"","",function(Cs){return _a.call(_s,Cs,Ms++)}),Ss}function Q$2(va){if(va._status===-1){var _a=va._result;_a=_a(),va._status=0,va._result=_a,_a.then(function(_s){va._status===0&&(_s=_s.default,va._status=1,va._result=_s)},function(_s){va._status===0&&(va._status=2,va._result=_s)})}if(va._status===1)return va._result;throw va._result}var R$4={current:null};function S$3(){var va=R$4.current;if(va===null)throw Error(z$3(321));return va}var T$2={ReactCurrentDispatcher:R$4,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G$4,IsSomeRendererActing:{current:!1},assign:l$6};react_production_min.Children={map:P$4,forEach:function(va,_a,_s){P$4(va,function(){_a.apply(this,arguments)},_s)},count:function(va){var _a=0;return P$4(va,function(){_a++}),_a},toArray:function(va){return P$4(va,function(_a){return _a})||[]},only:function(va){if(!L$3(va))throw Error(z$3(143));return va}};react_production_min.Component=C$4;react_production_min.PureComponent=E$5;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T$2;react_production_min.cloneElement=function(va,_a,_s){if(va==null)throw Error(z$3(267,va));var Ss=l$6({},va.props),Ms=va.key,Cs=va.ref,Ts=va._owner;if(_a!=null){if(_a.ref!==void 0&&(Cs=_a.ref,Ts=G$4.current),_a.key!==void 0&&(Ms=""+_a.key),va.type&&va.type.defaultProps)var Bs=va.type.defaultProps;for(Ps in _a)H$4.call(_a,Ps)&&!I$4.hasOwnProperty(Ps)&&(Ss[Ps]=_a[Ps]===void 0&&Bs!==void 0?Bs[Ps]:_a[Ps])}var Ps=arguments.length-2;if(Ps===1)Ss.children=_s;else if(1<Ps){Bs=Array(Ps);for(var Ls=0;Ls<Ps;Ls++)Bs[Ls]=arguments[Ls+2];Ss.children=Bs}return{$$typeof:n$6,type:va.type,key:Ms,ref:Cs,props:Ss,_owner:Ts}};react_production_min.createContext=function(va,_a){return _a===void 0&&(_a=null),va={$$typeof:r$7,_calculateChangedBits:_a,_currentValue:va,_currentValue2:va,_threadCount:0,Provider:null,Consumer:null},va.Provider={$$typeof:q$4,_context:va},va.Consumer=va};react_production_min.createElement=J$2;react_production_min.createFactory=function(va){var _a=J$2.bind(null,va);return _a.type=va,_a};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(va){return{$$typeof:t$5,render:va}};react_production_min.isValidElement=L$3;react_production_min.lazy=function(va){return{$$typeof:v$5,_payload:{_status:-1,_result:va},_init:Q$2}};react_production_min.memo=function(va,_a){return{$$typeof:u$4,type:va,compare:_a===void 0?null:_a}};react_production_min.useCallback=function(va,_a){return S$3().useCallback(va,_a)};react_production_min.useContext=function(va,_a){return S$3().useContext(va,_a)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(va,_a){return S$3().useEffect(va,_a)};react_production_min.useImperativeHandle=function(va,_a,_s){return S$3().useImperativeHandle(va,_a,_s)};react_production_min.useLayoutEffect=function(va,_a){return S$3().useLayoutEffect(va,_a)};react_production_min.useMemo=function(va,_a){return S$3().useMemo(va,_a)};react_production_min.useReducer=function(va,_a,_s){return S$3().useReducer(va,_a,_s)};react_production_min.useRef=function(va){return S$3().useRef(va)};react_production_min.useState=function(va){return S$3().useState(va)};react_production_min.version="17.0.2";react$1.exports=react_production_min;var React=react$1.exports,React$1=_mergeNamespaces({__proto__:null,default:React},[react$1.exports]),scheduler={exports:{}},scheduler_production_min={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(va){var _a,_s,Ss,Ms;if(typeof performance=="object"&&typeof performance.now=="function"){var Cs=performance;va.unstable_now=function(){return Cs.now()}}else{var Ts=Date,Bs=Ts.now();va.unstable_now=function(){return Ts.now()-Bs}}if(typeof window>"u"||typeof MessageChannel!="function"){var Ps=null,Ls=null,Rs=function(){if(Ps!==null)try{var al=va.unstable_now();Ps(!0,al),Ps=null}catch(dl){throw setTimeout(Rs,0),dl}};_a=function(al){Ps!==null?setTimeout(_a,0,al):(Ps=al,setTimeout(Rs,0))},_s=function(al,dl){Ls=setTimeout(al,dl)},Ss=function(){clearTimeout(Ls)},va.unstable_shouldYield=function(){return!1},Ms=va.unstable_forceFrameRate=function(){}}else{var $s=window.setTimeout,Fs=window.clearTimeout;if(typeof console<"u"){var Os=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof Os!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var Gs=!1,Ns=null,Vs=-1,Ds=5,ks=0;va.unstable_shouldYield=function(){return va.unstable_now()>=ks},Ms=function(){},va.unstable_forceFrameRate=function(al){0>al||125<al?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ds=0<al?Math.floor(1e3/al):5};var Us=new MessageChannel,zs=Us.port2;Us.port1.onmessage=function(){if(Ns!==null){var al=va.unstable_now();ks=al+Ds;try{Ns(!0,al)?zs.postMessage(null):(Gs=!1,Ns=null)}catch(dl){throw zs.postMessage(null),dl}}else Gs=!1},_a=function(al){Ns=al,Gs||(Gs=!0,zs.postMessage(null))},_s=function(al,dl){Vs=$s(function(){al(va.unstable_now())},dl)},Ss=function(){Fs(Vs),Vs=-1}}function Ws(al,dl){var yl=al.length;al.push(dl);e:for(;;){var xl=yl-1>>>1,wl=al[xl];if(wl!==void 0&&0<el(wl,dl))al[xl]=dl,al[yl]=wl,yl=xl;else break e}}function qs(al){return al=al[0],al===void 0?null:al}function Zs(al){var dl=al[0];if(dl!==void 0){var yl=al.pop();if(yl!==dl){al[0]=yl;e:for(var xl=0,wl=al.length;xl<wl;){var Al=2*(xl+1)-1,bl=al[Al],Bl=Al+1,Cl=al[Bl];if(bl!==void 0&&0>el(bl,yl))Cl!==void 0&&0>el(Cl,bl)?(al[xl]=Cl,al[Bl]=yl,xl=Bl):(al[xl]=bl,al[Al]=yl,xl=Al);else if(Cl!==void 0&&0>el(Cl,yl))al[xl]=Cl,al[Bl]=yl,xl=Bl;else break e}}return dl}return null}function el(al,dl){var yl=al.sortIndex-dl.sortIndex;return yl!==0?yl:al.id-dl.id}var Js=[],Hs=[],Qs=1,js=null,Ks=3,Xs=!1,Ys=!1,rl=!1;function tl(al){for(var dl=qs(Hs);dl!==null;){if(dl.callback===null)Zs(Hs);else if(dl.startTime<=al)Zs(Hs),dl.sortIndex=dl.expirationTime,Ws(Js,dl);else break;dl=qs(Hs)}}function il(al){if(rl=!1,tl(al),!Ys)if(qs(Js)!==null)Ys=!0,_a(ll);else{var dl=qs(Hs);dl!==null&&_s(il,dl.startTime-al)}}function ll(al,dl){Ys=!1,rl&&(rl=!1,Ss()),Xs=!0;var yl=Ks;try{for(tl(dl),js=qs(Js);js!==null&&(!(js.expirationTime>dl)||al&&!va.unstable_shouldYield());){var xl=js.callback;if(typeof xl=="function"){js.callback=null,Ks=js.priorityLevel;var wl=xl(js.expirationTime<=dl);dl=va.unstable_now(),typeof wl=="function"?js.callback=wl:js===qs(Js)&&Zs(Js),tl(dl)}else Zs(Js);js=qs(Js)}if(js!==null)var Al=!0;else{var bl=qs(Hs);bl!==null&&_s(il,bl.startTime-dl),Al=!1}return Al}finally{js=null,Ks=yl,Xs=!1}}var cl=Ms;va.unstable_IdlePriority=5,va.unstable_ImmediatePriority=1,va.unstable_LowPriority=4,va.unstable_NormalPriority=3,va.unstable_Profiling=null,va.unstable_UserBlockingPriority=2,va.unstable_cancelCallback=function(al){al.callback=null},va.unstable_continueExecution=function(){Ys||Xs||(Ys=!0,_a(ll))},va.unstable_getCurrentPriorityLevel=function(){return Ks},va.unstable_getFirstCallbackNode=function(){return qs(Js)},va.unstable_next=function(al){switch(Ks){case 1:case 2:case 3:var dl=3;break;default:dl=Ks}var yl=Ks;Ks=dl;try{return al()}finally{Ks=yl}},va.unstable_pauseExecution=function(){},va.unstable_requestPaint=cl,va.unstable_runWithPriority=function(al,dl){switch(al){case 1:case 2:case 3:case 4:case 5:break;default:al=3}var yl=Ks;Ks=al;try{return dl()}finally{Ks=yl}},va.unstable_scheduleCallback=function(al,dl,yl){var xl=va.unstable_now();switch(typeof yl=="object"&&yl!==null?(yl=yl.delay,yl=typeof yl=="number"&&0<yl?xl+yl:xl):yl=xl,al){case 1:var wl=-1;break;case 2:wl=250;break;case 5:wl=1073741823;break;case 4:wl=1e4;break;default:wl=5e3}return wl=yl+wl,al={id:Qs++,callback:dl,priorityLevel:al,startTime:yl,expirationTime:wl,sortIndex:-1},yl>xl?(al.sortIndex=yl,Ws(Hs,al),qs(Js)===null&&al===qs(Hs)&&(rl?Ss():rl=!0,_s(il,yl-xl))):(al.sortIndex=wl,Ws(Js,al),Ys||Xs||(Ys=!0,_a(ll))),al},va.unstable_wrapCallback=function(al){var dl=Ks;return function(){var yl=Ks;Ks=dl;try{return al.apply(this,arguments)}finally{Ks=yl}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=react$1.exports,m$5=objectAssign,r$6=scheduler.exports;function y$5(va){for(var _a="https://reactjs.org/docs/error-decoder.html?invariant="+va,_s=1;_s<arguments.length;_s++)_a+="&args[]="+encodeURIComponent(arguments[_s]);return"Minified React error #"+va+"; visit "+_a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa$1)throw Error(y$5(227));var ba$1=new Set,ca$1={};function da$1(va,_a){ea$1(va,_a),ea$1(va+"Capture",_a)}function ea$1(va,_a){for(ca$1[va]=_a,va=0;va<_a.length;va++)ba$1.add(_a[va])}var fa$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia$1=Object.prototype.hasOwnProperty,ja={},ka={};function la(va){return ia$1.call(ka,va)?!0:ia$1.call(ja,va)?!1:ha$1.test(va)?ka[va]=!0:(ja[va]=!0,!1)}function ma(va,_a,_s,Ss){if(_s!==null&&_s.type===0)return!1;switch(typeof _a){case"function":case"symbol":return!0;case"boolean":return Ss?!1:_s!==null?!_s.acceptsBooleans:(va=va.toLowerCase().slice(0,5),va!=="data-"&&va!=="aria-");default:return!1}}function na(va,_a,_s,Ss){if(_a===null||typeof _a>"u"||ma(va,_a,_s,Ss))return!0;if(Ss)return!1;if(_s!==null)switch(_s.type){case 3:return!_a;case 4:return _a===!1;case 5:return isNaN(_a);case 6:return isNaN(_a)||1>_a}return!1}function B$3(va,_a,_s,Ss,Ms,Cs,Ts){this.acceptsBooleans=_a===2||_a===3||_a===4,this.attributeName=Ss,this.attributeNamespace=Ms,this.mustUseProperty=_s,this.propertyName=va,this.type=_a,this.sanitizeURL=Cs,this.removeEmptyString=Ts}var D$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(va){D$3[va]=new B$3(va,0,!1,va,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(va){var _a=va[0];D$3[_a]=new B$3(_a,1,!1,va[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(va){D$3[va]=new B$3(va,2,!1,va.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(va){D$3[va]=new B$3(va,2,!1,va,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(va){D$3[va]=new B$3(va,3,!1,va.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(va){D$3[va]=new B$3(va,3,!0,va,null,!1,!1)});["capture","download"].forEach(function(va){D$3[va]=new B$3(va,4,!1,va,null,!1,!1)});["cols","rows","size","span"].forEach(function(va){D$3[va]=new B$3(va,6,!1,va,null,!1,!1)});["rowSpan","start"].forEach(function(va){D$3[va]=new B$3(va,5,!1,va.toLowerCase(),null,!1,!1)});var oa=/[\-:]([a-z])/g;function pa(va){return va[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(va){var _a=va.replace(oa,pa);D$3[_a]=new B$3(_a,1,!1,va,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(va){var _a=va.replace(oa,pa);D$3[_a]=new B$3(_a,1,!1,va,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(va){var _a=va.replace(oa,pa);D$3[_a]=new B$3(_a,1,!1,va,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(va){D$3[va]=new B$3(va,1,!1,va.toLowerCase(),null,!1,!1)});D$3.xlinkHref=new B$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(va){D$3[va]=new B$3(va,1,!1,va.toLowerCase(),null,!0,!0)});function qa(va,_a,_s,Ss){var Ms=D$3.hasOwnProperty(_a)?D$3[_a]:null,Cs=Ms!==null?Ms.type===0:Ss?!1:!(!(2<_a.length)||_a[0]!=="o"&&_a[0]!=="O"||_a[1]!=="n"&&_a[1]!=="N");Cs||(na(_a,_s,Ms,Ss)&&(_s=null),Ss||Ms===null?la(_a)&&(_s===null?va.removeAttribute(_a):va.setAttribute(_a,""+_s)):Ms.mustUseProperty?va[Ms.propertyName]=_s===null?Ms.type===3?!1:"":_s:(_a=Ms.attributeName,Ss=Ms.attributeNamespace,_s===null?va.removeAttribute(_a):(Ms=Ms.type,_s=Ms===3||Ms===4&&_s===!0?"":""+_s,Ss?va.setAttributeNS(Ss,_a,_s):va.setAttribute(_a,_s))))}var ra=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;if(typeof Symbol=="function"&&Symbol.for){var E$4=Symbol.for;sa=E$4("react.element"),ta=E$4("react.portal"),ua=E$4("react.fragment"),wa=E$4("react.strict_mode"),xa=E$4("react.profiler"),ya=E$4("react.provider"),za=E$4("react.context"),Aa=E$4("react.forward_ref"),Ba=E$4("react.suspense"),Ca=E$4("react.suspense_list"),Da=E$4("react.memo"),Ea=E$4("react.lazy"),Fa=E$4("react.block"),E$4("react.scope"),Ga=E$4("react.opaque.id"),Ha=E$4("react.debug_trace_mode"),Ia=E$4("react.offscreen"),Ja=E$4("react.legacy_hidden")}var Ka=typeof Symbol=="function"&&Symbol.iterator;function La(va){return va===null||typeof va!="object"?null:(va=Ka&&va[Ka]||va["@@iterator"],typeof va=="function"?va:null)}var Ma;function Na(va){if(Ma===void 0)try{throw Error()}catch(_s){var _a=_s.stack.trim().match(/\n( *(at )?)/);Ma=_a&&_a[1]||""}return`
`+Ma+va}var Oa=!1;function Pa(va,_a){if(!va||Oa)return"";Oa=!0;var _s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_a)if(_a=function(){throw Error()},Object.defineProperty(_a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_a,[])}catch(Ps){var Ss=Ps}Reflect.construct(va,[],_a)}else{try{_a.call()}catch(Ps){Ss=Ps}va.call(_a.prototype)}else{try{throw Error()}catch(Ps){Ss=Ps}va()}}catch(Ps){if(Ps&&Ss&&typeof Ps.stack=="string"){for(var Ms=Ps.stack.split(`
`),Cs=Ss.stack.split(`
`),Ts=Ms.length-1,Bs=Cs.length-1;1<=Ts&&0<=Bs&&Ms[Ts]!==Cs[Bs];)Bs--;for(;1<=Ts&&0<=Bs;Ts--,Bs--)if(Ms[Ts]!==Cs[Bs]){if(Ts!==1||Bs!==1)do if(Ts--,Bs--,0>Bs||Ms[Ts]!==Cs[Bs])return`
`+Ms[Ts].replace(" at new "," at ");while(1<=Ts&&0<=Bs);break}}}finally{Oa=!1,Error.prepareStackTrace=_s}return(va=va?va.displayName||va.name:"")?Na(va):""}function Qa(va){switch(va.tag){case 5:return Na(va.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return va=Pa(va.type,!1),va;case 11:return va=Pa(va.type.render,!1),va;case 22:return va=Pa(va.type._render,!1),va;case 1:return va=Pa(va.type,!0),va;default:return""}}function Ra(va){if(va==null)return null;if(typeof va=="function")return va.displayName||va.name||null;if(typeof va=="string")return va;switch(va){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if(typeof va=="object")switch(va.$$typeof){case za:return(va.displayName||"Context")+".Consumer";case ya:return(va._context.displayName||"Context")+".Provider";case Aa:var _a=va.render;return _a=_a.displayName||_a.name||"",va.displayName||(_a!==""?"ForwardRef("+_a+")":"ForwardRef");case Da:return Ra(va.type);case Fa:return Ra(va._render);case Ea:_a=va._payload,va=va._init;try{return Ra(va(_a))}catch{}}return null}function Sa(va){switch(typeof va){case"boolean":case"number":case"object":case"string":case"undefined":return va;default:return""}}function Ta(va){var _a=va.type;return(va=va.nodeName)&&va.toLowerCase()==="input"&&(_a==="checkbox"||_a==="radio")}function Ua(va){var _a=Ta(va)?"checked":"value",_s=Object.getOwnPropertyDescriptor(va.constructor.prototype,_a),Ss=""+va[_a];if(!va.hasOwnProperty(_a)&&typeof _s<"u"&&typeof _s.get=="function"&&typeof _s.set=="function"){var Ms=_s.get,Cs=_s.set;return Object.defineProperty(va,_a,{configurable:!0,get:function(){return Ms.call(this)},set:function(Ts){Ss=""+Ts,Cs.call(this,Ts)}}),Object.defineProperty(va,_a,{enumerable:_s.enumerable}),{getValue:function(){return Ss},setValue:function(Ts){Ss=""+Ts},stopTracking:function(){va._valueTracker=null,delete va[_a]}}}}function Va(va){va._valueTracker||(va._valueTracker=Ua(va))}function Wa(va){if(!va)return!1;var _a=va._valueTracker;if(!_a)return!0;var _s=_a.getValue(),Ss="";return va&&(Ss=Ta(va)?va.checked?"true":"false":va.value),va=Ss,va!==_s?(_a.setValue(va),!0):!1}function Xa(va){if(va=va||(typeof document<"u"?document:void 0),typeof va>"u")return null;try{return va.activeElement||va.body}catch{return va.body}}function Ya(va,_a){var _s=_a.checked;return m$5({},_a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_s??va._wrapperState.initialChecked})}function Za(va,_a){var _s=_a.defaultValue==null?"":_a.defaultValue,Ss=_a.checked!=null?_a.checked:_a.defaultChecked;_s=Sa(_a.value!=null?_a.value:_s),va._wrapperState={initialChecked:Ss,initialValue:_s,controlled:_a.type==="checkbox"||_a.type==="radio"?_a.checked!=null:_a.value!=null}}function $a(va,_a){_a=_a.checked,_a!=null&&qa(va,"checked",_a,!1)}function ab(va,_a){$a(va,_a);var _s=Sa(_a.value),Ss=_a.type;if(_s!=null)Ss==="number"?(_s===0&&va.value===""||va.value!=_s)&&(va.value=""+_s):va.value!==""+_s&&(va.value=""+_s);else if(Ss==="submit"||Ss==="reset"){va.removeAttribute("value");return}_a.hasOwnProperty("value")?bb(va,_a.type,_s):_a.hasOwnProperty("defaultValue")&&bb(va,_a.type,Sa(_a.defaultValue)),_a.checked==null&&_a.defaultChecked!=null&&(va.defaultChecked=!!_a.defaultChecked)}function cb(va,_a,_s){if(_a.hasOwnProperty("value")||_a.hasOwnProperty("defaultValue")){var Ss=_a.type;if(!(Ss!=="submit"&&Ss!=="reset"||_a.value!==void 0&&_a.value!==null))return;_a=""+va._wrapperState.initialValue,_s||_a===va.value||(va.value=_a),va.defaultValue=_a}_s=va.name,_s!==""&&(va.name=""),va.defaultChecked=!!va._wrapperState.initialChecked,_s!==""&&(va.name=_s)}function bb(va,_a,_s){(_a!=="number"||Xa(va.ownerDocument)!==va)&&(_s==null?va.defaultValue=""+va._wrapperState.initialValue:va.defaultValue!==""+_s&&(va.defaultValue=""+_s))}function db(va){var _a="";return aa$1.Children.forEach(va,function(_s){_s!=null&&(_a+=_s)}),_a}function eb(va,_a){return va=m$5({children:void 0},_a),(_a=db(_a.children))&&(va.children=_a),va}function fb(va,_a,_s,Ss){if(va=va.options,_a){_a={};for(var Ms=0;Ms<_s.length;Ms++)_a["$"+_s[Ms]]=!0;for(_s=0;_s<va.length;_s++)Ms=_a.hasOwnProperty("$"+va[_s].value),va[_s].selected!==Ms&&(va[_s].selected=Ms),Ms&&Ss&&(va[_s].defaultSelected=!0)}else{for(_s=""+Sa(_s),_a=null,Ms=0;Ms<va.length;Ms++){if(va[Ms].value===_s){va[Ms].selected=!0,Ss&&(va[Ms].defaultSelected=!0);return}_a!==null||va[Ms].disabled||(_a=va[Ms])}_a!==null&&(_a.selected=!0)}}function gb(va,_a){if(_a.dangerouslySetInnerHTML!=null)throw Error(y$5(91));return m$5({},_a,{value:void 0,defaultValue:void 0,children:""+va._wrapperState.initialValue})}function hb(va,_a){var _s=_a.value;if(_s==null){if(_s=_a.children,_a=_a.defaultValue,_s!=null){if(_a!=null)throw Error(y$5(92));if(Array.isArray(_s)){if(!(1>=_s.length))throw Error(y$5(93));_s=_s[0]}_a=_s}_a==null&&(_a=""),_s=_a}va._wrapperState={initialValue:Sa(_s)}}function ib(va,_a){var _s=Sa(_a.value),Ss=Sa(_a.defaultValue);_s!=null&&(_s=""+_s,_s!==va.value&&(va.value=_s),_a.defaultValue==null&&va.defaultValue!==_s&&(va.defaultValue=_s)),Ss!=null&&(va.defaultValue=""+Ss)}function jb(va){var _a=va.textContent;_a===va._wrapperState.initialValue&&_a!==""&&_a!==null&&(va.value=_a)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function lb(va){switch(va){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(va,_a){return va==null||va==="http://www.w3.org/1999/xhtml"?lb(_a):va==="http://www.w3.org/2000/svg"&&_a==="foreignObject"?"http://www.w3.org/1999/xhtml":va}var nb,ob=function(va){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_a,_s,Ss,Ms){MSApp.execUnsafeLocalFunction(function(){return va(_a,_s,Ss,Ms)})}:va}(function(va,_a){if(va.namespaceURI!==kb.svg||"innerHTML"in va)va.innerHTML=_a;else{for(nb=nb||document.createElement("div"),nb.innerHTML="<svg>"+_a.valueOf().toString()+"</svg>",_a=nb.firstChild;va.firstChild;)va.removeChild(va.firstChild);for(;_a.firstChild;)va.appendChild(_a.firstChild)}});function pb(va,_a){if(_a){var _s=va.firstChild;if(_s&&_s===va.lastChild&&_s.nodeType===3){_s.nodeValue=_a;return}}va.textContent=_a}var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(va){rb.forEach(function(_a){_a=_a+va.charAt(0).toUpperCase()+va.substring(1),qb[_a]=qb[va]})});function sb(va,_a,_s){return _a==null||typeof _a=="boolean"||_a===""?"":_s||typeof _a!="number"||_a===0||qb.hasOwnProperty(va)&&qb[va]?(""+_a).trim():_a+"px"}function tb(va,_a){va=va.style;for(var _s in _a)if(_a.hasOwnProperty(_s)){var Ss=_s.indexOf("--")===0,Ms=sb(_s,_a[_s],Ss);_s==="float"&&(_s="cssFloat"),Ss?va.setProperty(_s,Ms):va[_s]=Ms}}var ub=m$5({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vb(va,_a){if(_a){if(ub[va]&&(_a.children!=null||_a.dangerouslySetInnerHTML!=null))throw Error(y$5(137,va));if(_a.dangerouslySetInnerHTML!=null){if(_a.children!=null)throw Error(y$5(60));if(!(typeof _a.dangerouslySetInnerHTML=="object"&&"__html"in _a.dangerouslySetInnerHTML))throw Error(y$5(61))}if(_a.style!=null&&typeof _a.style!="object")throw Error(y$5(62))}}function wb(va,_a){if(va.indexOf("-")===-1)return typeof _a.is=="string";switch(va){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xb(va){return va=va.target||va.srcElement||window,va.correspondingUseElement&&(va=va.correspondingUseElement),va.nodeType===3?va.parentNode:va}var yb=null,zb=null,Ab=null;function Bb(va){if(va=Cb(va)){if(typeof yb!="function")throw Error(y$5(280));var _a=va.stateNode;_a&&(_a=Db(_a),yb(va.stateNode,va.type,_a))}}function Eb(va){zb?Ab?Ab.push(va):Ab=[va]:zb=va}function Fb(){if(zb){var va=zb,_a=Ab;if(Ab=zb=null,Bb(va),_a)for(va=0;va<_a.length;va++)Bb(_a[va])}}function Gb(va,_a){return va(_a)}function Hb(va,_a,_s,Ss,Ms){return va(_a,_s,Ss,Ms)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){(zb!==null||Ab!==null)&&(Ib(),Fb())}function Nb(va,_a,_s){if(Lb)return va(_a,_s);Lb=!0;try{return Jb(va,_a,_s)}finally{Lb=!1,Mb()}}function Ob(va,_a){var _s=va.stateNode;if(_s===null)return null;var Ss=Db(_s);if(Ss===null)return null;_s=Ss[_a];e:switch(_a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Ss=!Ss.disabled)||(va=va.type,Ss=!(va==="button"||va==="input"||va==="select"||va==="textarea")),va=!Ss;break e;default:va=!1}if(va)return null;if(_s&&typeof _s!="function")throw Error(y$5(231,_a,typeof _s));return _s}var Pb=!1;if(fa$1)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch{Pb=!1}function Rb(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps){var Ls=Array.prototype.slice.call(arguments,3);try{_a.apply(_s,Ls)}catch(Rs){this.onError(Rs)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(va){Sb=!0,Tb=va}};function Xb(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps){Sb=!1,Tb=null,Rb.apply(Wb,arguments)}function Yb(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps){if(Xb.apply(this,arguments),Sb){if(Sb){var Ls=Tb;Sb=!1,Tb=null}else throw Error(y$5(198));Ub||(Ub=!0,Vb=Ls)}}function Zb(va){var _a=va,_s=va;if(va.alternate)for(;_a.return;)_a=_a.return;else{va=_a;do _a=va,(_a.flags&1026)!==0&&(_s=_a.return),va=_a.return;while(va)}return _a.tag===3?_s:null}function $b(va){if(va.tag===13){var _a=va.memoizedState;if(_a===null&&(va=va.alternate,va!==null&&(_a=va.memoizedState)),_a!==null)return _a.dehydrated}return null}function ac(va){if(Zb(va)!==va)throw Error(y$5(188))}function bc(va){var _a=va.alternate;if(!_a){if(_a=Zb(va),_a===null)throw Error(y$5(188));return _a!==va?null:va}for(var _s=va,Ss=_a;;){var Ms=_s.return;if(Ms===null)break;var Cs=Ms.alternate;if(Cs===null){if(Ss=Ms.return,Ss!==null){_s=Ss;continue}break}if(Ms.child===Cs.child){for(Cs=Ms.child;Cs;){if(Cs===_s)return ac(Ms),va;if(Cs===Ss)return ac(Ms),_a;Cs=Cs.sibling}throw Error(y$5(188))}if(_s.return!==Ss.return)_s=Ms,Ss=Cs;else{for(var Ts=!1,Bs=Ms.child;Bs;){if(Bs===_s){Ts=!0,_s=Ms,Ss=Cs;break}if(Bs===Ss){Ts=!0,Ss=Ms,_s=Cs;break}Bs=Bs.sibling}if(!Ts){for(Bs=Cs.child;Bs;){if(Bs===_s){Ts=!0,_s=Cs,Ss=Ms;break}if(Bs===Ss){Ts=!0,Ss=Cs,_s=Ms;break}Bs=Bs.sibling}if(!Ts)throw Error(y$5(189))}}if(_s.alternate!==Ss)throw Error(y$5(190))}if(_s.tag!==3)throw Error(y$5(188));return _s.stateNode.current===_s?va:_a}function cc(va){if(va=bc(va),!va)return null;for(var _a=va;;){if(_a.tag===5||_a.tag===6)return _a;if(_a.child)_a.child.return=_a,_a=_a.child;else{if(_a===va)break;for(;!_a.sibling;){if(!_a.return||_a.return===va)return null;_a=_a.return}_a.sibling.return=_a.return,_a=_a.sibling}}return null}function dc(va,_a){for(var _s=va.alternate;_a!==null;){if(_a===va||_a===_s)return!0;_a=_a.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(va,_a,_s,Ss,Ms){return{blockedOn:va,domEventName:_a,eventSystemFlags:_s|16,nativeEvent:Ms,targetContainers:[Ss]}}function sc(va,_a){switch(va){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":nc.delete(_a.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(_a.pointerId)}}function tc(va,_a,_s,Ss,Ms,Cs){return va===null||va.nativeEvent!==Cs?(va=rc(_a,_s,Ss,Ms,Cs),_a!==null&&(_a=Cb(_a),_a!==null&&fc(_a)),va):(va.eventSystemFlags|=Ss,_a=va.targetContainers,Ms!==null&&_a.indexOf(Ms)===-1&&_a.push(Ms),va)}function uc(va,_a,_s,Ss,Ms){switch(_a){case"focusin":return kc=tc(kc,va,_a,_s,Ss,Ms),!0;case"dragenter":return lc=tc(lc,va,_a,_s,Ss,Ms),!0;case"mouseover":return mc=tc(mc,va,_a,_s,Ss,Ms),!0;case"pointerover":var Cs=Ms.pointerId;return nc.set(Cs,tc(nc.get(Cs)||null,va,_a,_s,Ss,Ms)),!0;case"gotpointercapture":return Cs=Ms.pointerId,oc.set(Cs,tc(oc.get(Cs)||null,va,_a,_s,Ss,Ms)),!0}return!1}function vc(va){var _a=wc(va.target);if(_a!==null){var _s=Zb(_a);if(_s!==null){if(_a=_s.tag,_a===13){if(_a=$b(_s),_a!==null){va.blockedOn=_a,hc(va.lanePriority,function(){r$6.unstable_runWithPriority(va.priority,function(){gc(_s)})});return}}else if(_a===3&&_s.stateNode.hydrate){va.blockedOn=_s.tag===3?_s.stateNode.containerInfo:null;return}}}va.blockedOn=null}function xc(va){if(va.blockedOn!==null)return!1;for(var _a=va.targetContainers;0<_a.length;){var _s=yc(va.domEventName,va.eventSystemFlags,_a[0],va.nativeEvent);if(_s!==null)return _a=Cb(_s),_a!==null&&fc(_a),va.blockedOn=_s,!1;_a.shift()}return!0}function zc(va,_a,_s){xc(va)&&_s.delete(_a)}function Ac(){for(ic=!1;0<jc.length;){var va=jc[0];if(va.blockedOn!==null){va=Cb(va.blockedOn),va!==null&&ec(va);break}for(var _a=va.targetContainers;0<_a.length;){var _s=yc(va.domEventName,va.eventSystemFlags,_a[0],va.nativeEvent);if(_s!==null){va.blockedOn=_s;break}_a.shift()}va.blockedOn===null&&jc.shift()}kc!==null&&xc(kc)&&(kc=null),lc!==null&&xc(lc)&&(lc=null),mc!==null&&xc(mc)&&(mc=null),nc.forEach(zc),oc.forEach(zc)}function Bc(va,_a){va.blockedOn===_a&&(va.blockedOn=null,ic||(ic=!0,r$6.unstable_scheduleCallback(r$6.unstable_NormalPriority,Ac)))}function Cc(va){function _a(Ms){return Bc(Ms,va)}if(0<jc.length){Bc(jc[0],va);for(var _s=1;_s<jc.length;_s++){var Ss=jc[_s];Ss.blockedOn===va&&(Ss.blockedOn=null)}}for(kc!==null&&Bc(kc,va),lc!==null&&Bc(lc,va),mc!==null&&Bc(mc,va),nc.forEach(_a),oc.forEach(_a),_s=0;_s<pc.length;_s++)Ss=pc[_s],Ss.blockedOn===va&&(Ss.blockedOn=null);for(;0<pc.length&&(_s=pc[0],_s.blockedOn===null);)vc(_s),_s.blockedOn===null&&pc.shift()}function Dc(va,_a){var _s={};return _s[va.toLowerCase()]=_a.toLowerCase(),_s["Webkit"+va]="webkit"+_a,_s["Moz"+va]="moz"+_a,_s}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};fa$1&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(va){if(Fc[va])return Fc[va];if(!Ec[va])return va;var _a=Ec[va],_s;for(_s in _a)if(_a.hasOwnProperty(_s)&&_s in Gc)return Fc[va]=_a[_s];return va}var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(va,_a){for(var _s=0;_s<va.length;_s+=2){var Ss=va[_s],Ms=va[_s+1];Ms="on"+(Ms[0].toUpperCase()+Ms.slice(1)),Nc.set(Ss,_a),Mc.set(Ss,Ms),da$1(Ms,[Ss])}}var Qc=r$6.unstable_now;Qc();var F$3=8;function Rc(va){if((1&va)!==0)return F$3=15,1;if((2&va)!==0)return F$3=14,2;if((4&va)!==0)return F$3=13,4;var _a=24&va;return _a!==0?(F$3=12,_a):(va&32)!==0?(F$3=11,32):(_a=192&va,_a!==0?(F$3=10,_a):(va&256)!==0?(F$3=9,256):(_a=3584&va,_a!==0?(F$3=8,_a):(va&4096)!==0?(F$3=7,4096):(_a=4186112&va,_a!==0?(F$3=6,_a):(_a=62914560&va,_a!==0?(F$3=5,_a):va&67108864?(F$3=4,67108864):(va&134217728)!==0?(F$3=3,134217728):(_a=805306368&va,_a!==0?(F$3=2,_a):(1073741824&va)!==0?(F$3=1,1073741824):(F$3=8,va))))))}function Sc(va){switch(va){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(va){switch(va){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y$5(358,va))}}function Uc(va,_a){var _s=va.pendingLanes;if(_s===0)return F$3=0;var Ss=0,Ms=0,Cs=va.expiredLanes,Ts=va.suspendedLanes,Bs=va.pingedLanes;if(Cs!==0)Ss=Cs,Ms=F$3=15;else if(Cs=_s&134217727,Cs!==0){var Ps=Cs&~Ts;Ps!==0?(Ss=Rc(Ps),Ms=F$3):(Bs&=Cs,Bs!==0&&(Ss=Rc(Bs),Ms=F$3))}else Cs=_s&~Ts,Cs!==0?(Ss=Rc(Cs),Ms=F$3):Bs!==0&&(Ss=Rc(Bs),Ms=F$3);if(Ss===0)return 0;if(Ss=31-Vc(Ss),Ss=_s&((0>Ss?0:1<<Ss)<<1)-1,_a!==0&&_a!==Ss&&(_a&Ts)===0){if(Rc(_a),Ms<=F$3)return _a;F$3=Ms}if(_a=va.entangledLanes,_a!==0)for(va=va.entanglements,_a&=Ss;0<_a;)_s=31-Vc(_a),Ms=1<<_s,Ss|=va[_s],_a&=~Ms;return Ss}function Wc(va){return va=va.pendingLanes&-1073741825,va!==0?va:va&1073741824?1073741824:0}function Xc(va,_a){switch(va){case 15:return 1;case 14:return 2;case 12:return va=Yc(24&~_a),va===0?Xc(10,_a):va;case 10:return va=Yc(192&~_a),va===0?Xc(8,_a):va;case 8:return va=Yc(3584&~_a),va===0&&(va=Yc(4186112&~_a),va===0&&(va=512)),va;case 2:return _a=Yc(805306368&~_a),_a===0&&(_a=268435456),_a}throw Error(y$5(358,va))}function Yc(va){return va&-va}function Zc(va){for(var _a=[],_s=0;31>_s;_s++)_a.push(va);return _a}function $c(va,_a,_s){va.pendingLanes|=_a;var Ss=_a-1;va.suspendedLanes&=Ss,va.pingedLanes&=Ss,va=va.eventTimes,_a=31-Vc(_a),va[_a]=_s}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(va){return va===0?32:31-(bd(va)/cd|0)|0}var dd=r$6.unstable_UserBlockingPriority,ed=r$6.unstable_runWithPriority,fd=!0;function gd(va,_a,_s,Ss){Kb||Ib();var Ms=hd,Cs=Kb;Kb=!0;try{Hb(Ms,va,_a,_s,Ss)}finally{(Kb=Cs)||Mb()}}function id(va,_a,_s,Ss){ed(dd,hd.bind(null,va,_a,_s,Ss))}function hd(va,_a,_s,Ss){if(fd){var Ms;if((Ms=(_a&4)===0)&&0<jc.length&&-1<qc.indexOf(va))va=rc(null,va,_a,_s,Ss),jc.push(va);else{var Cs=yc(va,_a,_s,Ss);if(Cs===null)Ms&&sc(va,Ss);else{if(Ms){if(-1<qc.indexOf(va)){va=rc(Cs,va,_a,_s,Ss),jc.push(va);return}if(uc(Cs,va,_a,_s,Ss))return;sc(va,Ss)}jd(va,_a,Ss,null,_s)}}}}function yc(va,_a,_s,Ss){var Ms=xb(Ss);if(Ms=wc(Ms),Ms!==null){var Cs=Zb(Ms);if(Cs===null)Ms=null;else{var Ts=Cs.tag;if(Ts===13){if(Ms=$b(Cs),Ms!==null)return Ms;Ms=null}else if(Ts===3){if(Cs.stateNode.hydrate)return Cs.tag===3?Cs.stateNode.containerInfo:null;Ms=null}else Cs!==Ms&&(Ms=null)}}return jd(va,_a,Ss,Ms,_s),null}var kd=null,ld=null,md=null;function nd(){if(md)return md;var va,_a=ld,_s=_a.length,Ss,Ms="value"in kd?kd.value:kd.textContent,Cs=Ms.length;for(va=0;va<_s&&_a[va]===Ms[va];va++);var Ts=_s-va;for(Ss=1;Ss<=Ts&&_a[_s-Ss]===Ms[Cs-Ss];Ss++);return md=Ms.slice(va,1<Ss?1-Ss:void 0)}function od(va){var _a=va.keyCode;return"charCode"in va?(va=va.charCode,va===0&&_a===13&&(va=13)):va=_a,va===10&&(va=13),32<=va||va===13?va:0}function pd(){return!0}function qd(){return!1}function rd(va){function _a(_s,Ss,Ms,Cs,Ts){this._reactName=_s,this._targetInst=Ms,this.type=Ss,this.nativeEvent=Cs,this.target=Ts,this.currentTarget=null;for(var Bs in va)va.hasOwnProperty(Bs)&&(_s=va[Bs],this[Bs]=_s?_s(Cs):Cs[Bs]);return this.isDefaultPrevented=(Cs.defaultPrevented!=null?Cs.defaultPrevented:Cs.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return m$5(_a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _s=this.nativeEvent;_s&&(_s.preventDefault?_s.preventDefault():typeof _s.returnValue!="unknown"&&(_s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _s=this.nativeEvent;_s&&(_s.stopPropagation?_s.stopPropagation():typeof _s.cancelBubble!="unknown"&&(_s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_a}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(va){return va.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m$5({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m$5({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(va){return va.relatedTarget===void 0?va.fromElement===va.srcElement?va.toElement:va.fromElement:va.relatedTarget},movementX:function(va){return"movementX"in va?va.movementX:(va!==yd&&(yd&&va.type==="mousemove"?(wd=va.screenX-yd.screenX,xd=va.screenY-yd.screenY):xd=wd=0,yd=va),wd)},movementY:function(va){return"movementY"in va?va.movementY:xd}}),Bd=rd(Ad),Cd=m$5({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m$5({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m$5({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m$5({},sd,{clipboardData:function(va){return"clipboardData"in va?va.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m$5({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(va){var _a=this.nativeEvent;return _a.getModifierState?_a.getModifierState(va):(va=Od[va])?!!_a[va]:!1}function zd(){return Pd}var Qd=m$5({},ud,{key:function(va){if(va.key){var _a=Md[va.key]||va.key;if(_a!=="Unidentified")return _a}return va.type==="keypress"?(va=od(va),va===13?"Enter":String.fromCharCode(va)):va.type==="keydown"||va.type==="keyup"?Nd[va.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(va){return va.type==="keypress"?od(va):0},keyCode:function(va){return va.type==="keydown"||va.type==="keyup"?va.keyCode:0},which:function(va){return va.type==="keypress"?od(va):va.type==="keydown"||va.type==="keyup"?va.keyCode:0}}),Rd=rd(Qd),Sd=m$5({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m$5({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m$5({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m$5({},Ad,{deltaX:function(va){return"deltaX"in va?va.deltaX:"wheelDeltaX"in va?-va.wheelDeltaX:0},deltaY:function(va){return"deltaY"in va?va.deltaY:"wheelDeltaY"in va?-va.wheelDeltaY:"wheelDelta"in va?-va.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=fa$1&&"CompositionEvent"in window,be$1=null;fa$1&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=fa$1&&"TextEvent"in window&&!be$1,de$1=fa$1&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=String.fromCharCode(32),fe$1=!1;function ge$1(va,_a){switch(va){case"keyup":return $d.indexOf(_a.keyCode)!==-1;case"keydown":return _a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(va){return va=va.detail,typeof va=="object"&&"data"in va?va.data:null}var ie$1=!1;function je$1(va,_a){switch(va){case"compositionend":return he$1(_a);case"keypress":return _a.which!==32?null:(fe$1=!0,ee$1);case"textInput":return va=_a.data,va===ee$1&&fe$1?null:va;default:return null}}function ke$1(va,_a){if(ie$1)return va==="compositionend"||!ae$1&&ge$1(va,_a)?(va=nd(),md=ld=kd=null,ie$1=!1,va):null;switch(va){case"paste":return null;case"keypress":if(!(_a.ctrlKey||_a.altKey||_a.metaKey)||_a.ctrlKey&&_a.altKey){if(_a.char&&1<_a.char.length)return _a.char;if(_a.which)return String.fromCharCode(_a.which)}return null;case"compositionend":return de$1&&_a.locale!=="ko"?null:_a.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(va){var _a=va&&va.nodeName&&va.nodeName.toLowerCase();return _a==="input"?!!le$1[va.type]:_a==="textarea"}function ne$1(va,_a,_s,Ss){Eb(Ss),_a=oe$1(_a,"onChange"),0<_a.length&&(_s=new td("onChange","change",null,_s,Ss),va.push({event:_s,listeners:_a}))}var pe$1=null,qe$1=null;function re$1(va){se$1(va,0)}function te$1(va){var _a=ue$1(va);if(Wa(_a))return va}function ve$1(va,_a){if(va==="change")return _a}var we$1=!1;if(fa$1){var xe$1;if(fa$1){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(va){if(va.propertyName==="value"&&te$1(qe$1)){var _a=[];if(ne$1(_a,qe$1,va,xb(va)),va=re$1,Kb)va(_a);else{Kb=!0;try{Gb(va,_a)}finally{Kb=!1,Mb()}}}}function Ce$1(va,_a,_s){va==="focusin"?(Ae$1(),pe$1=_a,qe$1=_s,pe$1.attachEvent("onpropertychange",Be$1)):va==="focusout"&&Ae$1()}function De$1(va){if(va==="selectionchange"||va==="keyup"||va==="keydown")return te$1(qe$1)}function Ee$1(va,_a){if(va==="click")return te$1(_a)}function Fe$1(va,_a){if(va==="input"||va==="change")return te$1(_a)}function Ge$1(va,_a){return va===_a&&(va!==0||1/va===1/_a)||va!==va&&_a!==_a}var He$1=typeof Object.is=="function"?Object.is:Ge$1,Ie$1=Object.prototype.hasOwnProperty;function Je$1(va,_a){if(He$1(va,_a))return!0;if(typeof va!="object"||va===null||typeof _a!="object"||_a===null)return!1;var _s=Object.keys(va),Ss=Object.keys(_a);if(_s.length!==Ss.length)return!1;for(Ss=0;Ss<_s.length;Ss++)if(!Ie$1.call(_a,_s[Ss])||!He$1(va[_s[Ss]],_a[_s[Ss]]))return!1;return!0}function Ke$1(va){for(;va&&va.firstChild;)va=va.firstChild;return va}function Le$1(va,_a){var _s=Ke$1(va);va=0;for(var Ss;_s;){if(_s.nodeType===3){if(Ss=va+_s.textContent.length,va<=_a&&Ss>=_a)return{node:_s,offset:_a-va};va=Ss}e:{for(;_s;){if(_s.nextSibling){_s=_s.nextSibling;break e}_s=_s.parentNode}_s=void 0}_s=Ke$1(_s)}}function Me$1(va,_a){return va&&_a?va===_a?!0:va&&va.nodeType===3?!1:_a&&_a.nodeType===3?Me$1(va,_a.parentNode):"contains"in va?va.contains(_a):va.compareDocumentPosition?!!(va.compareDocumentPosition(_a)&16):!1:!1}function Ne$1(){for(var va=window,_a=Xa();_a instanceof va.HTMLIFrameElement;){try{var _s=typeof _a.contentWindow.location.href=="string"}catch{_s=!1}if(_s)va=_a.contentWindow;else break;_a=Xa(va.document)}return _a}function Oe$1(va){var _a=va&&va.nodeName&&va.nodeName.toLowerCase();return _a&&(_a==="input"&&(va.type==="text"||va.type==="search"||va.type==="tel"||va.type==="url"||va.type==="password")||_a==="textarea"||va.contentEditable==="true")}var Pe$1=fa$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(va,_a,_s){var Ss=_s.window===_s?_s.document:_s.nodeType===9?_s:_s.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa(Ss)||(Ss=Qe$1,"selectionStart"in Ss&&Oe$1(Ss)?Ss={start:Ss.selectionStart,end:Ss.selectionEnd}:(Ss=(Ss.ownerDocument&&Ss.ownerDocument.defaultView||window).getSelection(),Ss={anchorNode:Ss.anchorNode,anchorOffset:Ss.anchorOffset,focusNode:Ss.focusNode,focusOffset:Ss.focusOffset}),Se$1&&Je$1(Se$1,Ss)||(Se$1=Ss,Ss=oe$1(Re$1,"onSelect"),0<Ss.length&&(_a=new td("onSelect","select",null,_a,_s),va.push({event:_a,listeners:Ss}),_a.target=Qe$1)))}Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve$1="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We$1=0;We$1<Ve$1.length;We$1++)Nc.set(Ve$1[We$1],0);ea$1("onMouseEnter",["mouseout","mouseover"]);ea$1("onMouseLeave",["mouseout","mouseover"]);ea$1("onPointerEnter",["pointerout","pointerover"]);ea$1("onPointerLeave",["pointerout","pointerover"]);da$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);da$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe$1));function Ze$1(va,_a,_s){var Ss=va.type||"unknown-event";va.currentTarget=_s,Yb(Ss,_a,void 0,va),va.currentTarget=null}function se$1(va,_a){_a=(_a&4)!==0;for(var _s=0;_s<va.length;_s++){var Ss=va[_s],Ms=Ss.event;Ss=Ss.listeners;e:{var Cs=void 0;if(_a)for(var Ts=Ss.length-1;0<=Ts;Ts--){var Bs=Ss[Ts],Ps=Bs.instance,Ls=Bs.currentTarget;if(Bs=Bs.listener,Ps!==Cs&&Ms.isPropagationStopped())break e;Ze$1(Ms,Bs,Ls),Cs=Ps}else for(Ts=0;Ts<Ss.length;Ts++){if(Bs=Ss[Ts],Ps=Bs.instance,Ls=Bs.currentTarget,Bs=Bs.listener,Ps!==Cs&&Ms.isPropagationStopped())break e;Ze$1(Ms,Bs,Ls),Cs=Ps}}}if(Ub)throw va=Vb,Ub=!1,Vb=null,va}function G$3(va,_a){var _s=$e$1(_a),Ss=va+"__bubble";_s.has(Ss)||(af(_a,va,2,!1),_s.add(Ss))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(va){va[bf]||(va[bf]=!0,ba$1.forEach(function(_a){Ye$1.has(_a)||df(_a,!1,va,null),df(_a,!0,va,null)}))}function df(va,_a,_s,Ss){var Ms=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,Cs=_s;if(va==="selectionchange"&&_s.nodeType!==9&&(Cs=_s.ownerDocument),Ss!==null&&!_a&&Ye$1.has(va)){if(va!=="scroll")return;Ms|=2,Cs=Ss}var Ts=$e$1(Cs),Bs=va+"__"+(_a?"capture":"bubble");Ts.has(Bs)||(_a&&(Ms|=4),af(Cs,va,Ms,_a),Ts.add(Bs))}function af(va,_a,_s,Ss){var Ms=Nc.get(_a);switch(Ms===void 0?2:Ms){case 0:Ms=gd;break;case 1:Ms=id;break;default:Ms=hd}_s=Ms.bind(null,_a,_s,va),Ms=void 0,!Pb||_a!=="touchstart"&&_a!=="touchmove"&&_a!=="wheel"||(Ms=!0),Ss?Ms!==void 0?va.addEventListener(_a,_s,{capture:!0,passive:Ms}):va.addEventListener(_a,_s,!0):Ms!==void 0?va.addEventListener(_a,_s,{passive:Ms}):va.addEventListener(_a,_s,!1)}function jd(va,_a,_s,Ss,Ms){var Cs=Ss;if((_a&1)===0&&(_a&2)===0&&Ss!==null)e:for(;;){if(Ss===null)return;var Ts=Ss.tag;if(Ts===3||Ts===4){var Bs=Ss.stateNode.containerInfo;if(Bs===Ms||Bs.nodeType===8&&Bs.parentNode===Ms)break;if(Ts===4)for(Ts=Ss.return;Ts!==null;){var Ps=Ts.tag;if((Ps===3||Ps===4)&&(Ps=Ts.stateNode.containerInfo,Ps===Ms||Ps.nodeType===8&&Ps.parentNode===Ms))return;Ts=Ts.return}for(;Bs!==null;){if(Ts=wc(Bs),Ts===null)return;if(Ps=Ts.tag,Ps===5||Ps===6){Ss=Cs=Ts;continue e}Bs=Bs.parentNode}}Ss=Ss.return}Nb(function(){var Ls=Cs,Rs=xb(_s),$s=[];e:{var Fs=Mc.get(va);if(Fs!==void 0){var Os=td,Gs=va;switch(va){case"keypress":if(od(_s)===0)break e;case"keydown":case"keyup":Os=Rd;break;case"focusin":Gs="focus",Os=Fd;break;case"focusout":Gs="blur",Os=Fd;break;case"beforeblur":case"afterblur":Os=Fd;break;case"click":if(_s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Os=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Os=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Os=Vd;break;case Ic:case Jc:case Kc:Os=Hd;break;case Lc:Os=Xd;break;case"scroll":Os=vd;break;case"wheel":Os=Zd;break;case"copy":case"cut":case"paste":Os=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Os=Td}var Ns=(_a&4)!==0,Vs=!Ns&&va==="scroll",Ds=Ns?Fs!==null?Fs+"Capture":null:Fs;Ns=[];for(var ks=Ls,Us;ks!==null;){Us=ks;var zs=Us.stateNode;if(Us.tag===5&&zs!==null&&(Us=zs,Ds!==null&&(zs=Ob(ks,Ds),zs!=null&&Ns.push(ef(ks,zs,Us)))),Vs)break;ks=ks.return}0<Ns.length&&(Fs=new Os(Fs,Gs,null,_s,Rs),$s.push({event:Fs,listeners:Ns}))}}if((_a&7)===0){e:{if(Fs=va==="mouseover"||va==="pointerover",Os=va==="mouseout"||va==="pointerout",Fs&&(_a&16)===0&&(Gs=_s.relatedTarget||_s.fromElement)&&(wc(Gs)||Gs[ff]))break e;if((Os||Fs)&&(Fs=Rs.window===Rs?Rs:(Fs=Rs.ownerDocument)?Fs.defaultView||Fs.parentWindow:window,Os?(Gs=_s.relatedTarget||_s.toElement,Os=Ls,Gs=Gs?wc(Gs):null,Gs!==null&&(Vs=Zb(Gs),Gs!==Vs||Gs.tag!==5&&Gs.tag!==6)&&(Gs=null)):(Os=null,Gs=Ls),Os!==Gs)){if(Ns=Bd,zs="onMouseLeave",Ds="onMouseEnter",ks="mouse",(va==="pointerout"||va==="pointerover")&&(Ns=Td,zs="onPointerLeave",Ds="onPointerEnter",ks="pointer"),Vs=Os==null?Fs:ue$1(Os),Us=Gs==null?Fs:ue$1(Gs),Fs=new Ns(zs,ks+"leave",Os,_s,Rs),Fs.target=Vs,Fs.relatedTarget=Us,zs=null,wc(Rs)===Ls&&(Ns=new Ns(Ds,ks+"enter",Gs,_s,Rs),Ns.target=Us,Ns.relatedTarget=Vs,zs=Ns),Vs=zs,Os&&Gs)t:{for(Ns=Os,Ds=Gs,ks=0,Us=Ns;Us;Us=gf(Us))ks++;for(Us=0,zs=Ds;zs;zs=gf(zs))Us++;for(;0<ks-Us;)Ns=gf(Ns),ks--;for(;0<Us-ks;)Ds=gf(Ds),Us--;for(;ks--;){if(Ns===Ds||Ds!==null&&Ns===Ds.alternate)break t;Ns=gf(Ns),Ds=gf(Ds)}Ns=null}else Ns=null;Os!==null&&hf($s,Fs,Os,Ns,!1),Gs!==null&&Vs!==null&&hf($s,Vs,Gs,Ns,!0)}}e:{if(Fs=Ls?ue$1(Ls):window,Os=Fs.nodeName&&Fs.nodeName.toLowerCase(),Os==="select"||Os==="input"&&Fs.type==="file")var Ws=ve$1;else if(me$1(Fs))if(we$1)Ws=Fe$1;else{Ws=De$1;var qs=Ce$1}else(Os=Fs.nodeName)&&Os.toLowerCase()==="input"&&(Fs.type==="checkbox"||Fs.type==="radio")&&(Ws=Ee$1);if(Ws&&(Ws=Ws(va,Ls))){ne$1($s,Ws,_s,Rs);break e}qs&&qs(va,Fs,Ls),va==="focusout"&&(qs=Fs._wrapperState)&&qs.controlled&&Fs.type==="number"&&bb(Fs,"number",Fs.value)}switch(qs=Ls?ue$1(Ls):window,va){case"focusin":(me$1(qs)||qs.contentEditable==="true")&&(Qe$1=qs,Re$1=Ls,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1($s,_s,Rs);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1($s,_s,Rs)}var Zs;if(ae$1)e:{switch(va){case"compositionstart":var el="onCompositionStart";break e;case"compositionend":el="onCompositionEnd";break e;case"compositionupdate":el="onCompositionUpdate";break e}el=void 0}else ie$1?ge$1(va,_s)&&(el="onCompositionEnd"):va==="keydown"&&_s.keyCode===229&&(el="onCompositionStart");el&&(de$1&&_s.locale!=="ko"&&(ie$1||el!=="onCompositionStart"?el==="onCompositionEnd"&&ie$1&&(Zs=nd()):(kd=Rs,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),qs=oe$1(Ls,el),0<qs.length&&(el=new Ld(el,va,null,_s,Rs),$s.push({event:el,listeners:qs}),Zs?el.data=Zs:(Zs=he$1(_s),Zs!==null&&(el.data=Zs)))),(Zs=ce$1?je$1(va,_s):ke$1(va,_s))&&(Ls=oe$1(Ls,"onBeforeInput"),0<Ls.length&&(Rs=new Ld("onBeforeInput","beforeinput",null,_s,Rs),$s.push({event:Rs,listeners:Ls}),Rs.data=Zs))}se$1($s,_a)})}function ef(va,_a,_s){return{instance:va,listener:_a,currentTarget:_s}}function oe$1(va,_a){for(var _s=_a+"Capture",Ss=[];va!==null;){var Ms=va,Cs=Ms.stateNode;Ms.tag===5&&Cs!==null&&(Ms=Cs,Cs=Ob(va,_s),Cs!=null&&Ss.unshift(ef(va,Cs,Ms)),Cs=Ob(va,_a),Cs!=null&&Ss.push(ef(va,Cs,Ms))),va=va.return}return Ss}function gf(va){if(va===null)return null;do va=va.return;while(va&&va.tag!==5);return va||null}function hf(va,_a,_s,Ss,Ms){for(var Cs=_a._reactName,Ts=[];_s!==null&&_s!==Ss;){var Bs=_s,Ps=Bs.alternate,Ls=Bs.stateNode;if(Ps!==null&&Ps===Ss)break;Bs.tag===5&&Ls!==null&&(Bs=Ls,Ms?(Ps=Ob(_s,Cs),Ps!=null&&Ts.unshift(ef(_s,Ps,Bs))):Ms||(Ps=Ob(_s,Cs),Ps!=null&&Ts.push(ef(_s,Ps,Bs)))),_s=_s.return}Ts.length!==0&&va.push({event:_a,listeners:Ts})}function jf(){}var kf=null,lf=null;function mf(va,_a){switch(va){case"button":case"input":case"select":case"textarea":return!!_a.autoFocus}return!1}function nf(va,_a){return va==="textarea"||va==="option"||va==="noscript"||typeof _a.children=="string"||typeof _a.children=="number"||typeof _a.dangerouslySetInnerHTML=="object"&&_a.dangerouslySetInnerHTML!==null&&_a.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,pf=typeof clearTimeout=="function"?clearTimeout:void 0;function qf(va){va.nodeType===1?va.textContent="":va.nodeType===9&&(va=va.body,va!=null&&(va.textContent=""))}function rf(va){for(;va!=null;va=va.nextSibling){var _a=va.nodeType;if(_a===1||_a===3)break}return va}function sf(va){va=va.previousSibling;for(var _a=0;va;){if(va.nodeType===8){var _s=va.data;if(_s==="$"||_s==="$!"||_s==="$?"){if(_a===0)return va;_a--}else _s==="/$"&&_a++}va=va.previousSibling}return null}var tf=0;function uf(va){return{$$typeof:Ga,toString:va,valueOf:va}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;function wc(va){var _a=va[wf];if(_a)return _a;for(var _s=va.parentNode;_s;){if(_a=_s[ff]||_s[wf]){if(_s=_a.alternate,_a.child!==null||_s!==null&&_s.child!==null)for(va=sf(va);va!==null;){if(_s=va[wf])return _s;va=sf(va)}return _a}va=_s,_s=va.parentNode}return null}function Cb(va){return va=va[wf]||va[ff],!va||va.tag!==5&&va.tag!==6&&va.tag!==13&&va.tag!==3?null:va}function ue$1(va){if(va.tag===5||va.tag===6)return va.stateNode;throw Error(y$5(33))}function Db(va){return va[xf]||null}function $e$1(va){var _a=va[yf];return _a===void 0&&(_a=va[yf]=new Set),_a}var zf=[],Af=-1;function Bf(va){return{current:va}}function H$3(va){0>Af||(va.current=zf[Af],zf[Af]=null,Af--)}function I$3(va,_a){Af++,zf[Af]=va.current,va.current=_a}var Cf={},M$2=Bf(Cf),N$3=Bf(!1),Df=Cf;function Ef(va,_a){var _s=va.type.contextTypes;if(!_s)return Cf;var Ss=va.stateNode;if(Ss&&Ss.__reactInternalMemoizedUnmaskedChildContext===_a)return Ss.__reactInternalMemoizedMaskedChildContext;var Ms={},Cs;for(Cs in _s)Ms[Cs]=_a[Cs];return Ss&&(va=va.stateNode,va.__reactInternalMemoizedUnmaskedChildContext=_a,va.__reactInternalMemoizedMaskedChildContext=Ms),Ms}function Ff(va){return va=va.childContextTypes,va!=null}function Gf(){H$3(N$3),H$3(M$2)}function Hf(va,_a,_s){if(M$2.current!==Cf)throw Error(y$5(168));I$3(M$2,_a),I$3(N$3,_s)}function If(va,_a,_s){var Ss=va.stateNode;if(va=_a.childContextTypes,typeof Ss.getChildContext!="function")return _s;Ss=Ss.getChildContext();for(var Ms in Ss)if(!(Ms in va))throw Error(y$5(108,Ra(_a)||"Unknown",Ms));return m$5({},_s,Ss)}function Jf(va){return va=(va=va.stateNode)&&va.__reactInternalMemoizedMergedChildContext||Cf,Df=M$2.current,I$3(M$2,va),I$3(N$3,N$3.current),!0}function Kf(va,_a,_s){var Ss=va.stateNode;if(!Ss)throw Error(y$5(169));_s?(va=If(va,_a,Df),Ss.__reactInternalMemoizedMergedChildContext=va,H$3(N$3),H$3(M$2),I$3(M$2,va)):H$3(N$3),I$3(N$3,_s)}var Lf=null,Mf=null,Nf=r$6.unstable_runWithPriority,Of=r$6.unstable_scheduleCallback,Pf=r$6.unstable_cancelCallback,Qf=r$6.unstable_shouldYield,Rf=r$6.unstable_requestPaint,Sf=r$6.unstable_now,Tf=r$6.unstable_getCurrentPriorityLevel,Uf=r$6.unstable_ImmediatePriority,Vf=r$6.unstable_UserBlockingPriority,Wf=r$6.unstable_NormalPriority,Xf=r$6.unstable_LowPriority,Yf=r$6.unstable_IdlePriority,Zf={},$f=Rf!==void 0?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O$3=1e4>dg?Sf:function(){return Sf()-dg};function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y$5(332))}}function fg(va){switch(va){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y$5(332))}}function gg(va,_a){return va=fg(va),Nf(va,_a)}function hg(va,_a,_s){return va=fg(va),Of(va,_a,_s)}function ig(){if(bg!==null){var va=bg;bg=null,Pf(va)}jg()}function jg(){if(!cg&&ag!==null){cg=!0;var va=0;try{var _a=ag;gg(99,function(){for(;va<_a.length;va++){var _s=_a[va];do _s=_s(!0);while(_s!==null)}}),ag=null}catch(_s){throw ag!==null&&(ag=ag.slice(va+1)),Of(Uf,ig),_s}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(va,_a){if(va&&va.defaultProps){_a=m$5({},_a),va=va.defaultProps;for(var _s in va)_a[_s]===void 0&&(_a[_s]=va[_s]);return _a}return _a}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}function rg(va){var _a=mg.current;H$3(mg),va.type._context._currentValue=_a}function sg(va,_a){for(;va!==null;){var _s=va.alternate;if((va.childLanes&_a)===_a){if(_s===null||(_s.childLanes&_a)===_a)break;_s.childLanes|=_a}else va.childLanes|=_a,_s!==null&&(_s.childLanes|=_a);va=va.return}}function tg(va,_a){ng=va,pg=og=null,va=va.dependencies,va!==null&&va.firstContext!==null&&((va.lanes&_a)!==0&&(ug=!0),va.firstContext=null)}function vg(va,_a){if(pg!==va&&_a!==!1&&_a!==0)if((typeof _a!="number"||_a===1073741823)&&(pg=va,_a=1073741823),_a={context:va,observedBits:_a,next:null},og===null){if(ng===null)throw Error(y$5(308));og=_a,ng.dependencies={lanes:0,firstContext:_a,responders:null}}else og=og.next=_a;return va._currentValue}var wg=!1;function xg(va){va.updateQueue={baseState:va.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yg(va,_a){va=va.updateQueue,_a.updateQueue===va&&(_a.updateQueue={baseState:va.baseState,firstBaseUpdate:va.firstBaseUpdate,lastBaseUpdate:va.lastBaseUpdate,shared:va.shared,effects:va.effects})}function zg(va,_a){return{eventTime:va,lane:_a,tag:0,payload:null,callback:null,next:null}}function Ag(va,_a){if(va=va.updateQueue,va!==null){va=va.shared;var _s=va.pending;_s===null?_a.next=_a:(_a.next=_s.next,_s.next=_a),va.pending=_a}}function Bg(va,_a){var _s=va.updateQueue,Ss=va.alternate;if(Ss!==null&&(Ss=Ss.updateQueue,_s===Ss)){var Ms=null,Cs=null;if(_s=_s.firstBaseUpdate,_s!==null){do{var Ts={eventTime:_s.eventTime,lane:_s.lane,tag:_s.tag,payload:_s.payload,callback:_s.callback,next:null};Cs===null?Ms=Cs=Ts:Cs=Cs.next=Ts,_s=_s.next}while(_s!==null);Cs===null?Ms=Cs=_a:Cs=Cs.next=_a}else Ms=Cs=_a;_s={baseState:Ss.baseState,firstBaseUpdate:Ms,lastBaseUpdate:Cs,shared:Ss.shared,effects:Ss.effects},va.updateQueue=_s;return}va=_s.lastBaseUpdate,va===null?_s.firstBaseUpdate=_a:va.next=_a,_s.lastBaseUpdate=_a}function Cg(va,_a,_s,Ss){var Ms=va.updateQueue;wg=!1;var Cs=Ms.firstBaseUpdate,Ts=Ms.lastBaseUpdate,Bs=Ms.shared.pending;if(Bs!==null){Ms.shared.pending=null;var Ps=Bs,Ls=Ps.next;Ps.next=null,Ts===null?Cs=Ls:Ts.next=Ls,Ts=Ps;var Rs=va.alternate;if(Rs!==null){Rs=Rs.updateQueue;var $s=Rs.lastBaseUpdate;$s!==Ts&&($s===null?Rs.firstBaseUpdate=Ls:$s.next=Ls,Rs.lastBaseUpdate=Ps)}}if(Cs!==null){$s=Ms.baseState,Ts=0,Rs=Ls=Ps=null;do{Bs=Cs.lane;var Fs=Cs.eventTime;if((Ss&Bs)===Bs){Rs!==null&&(Rs=Rs.next={eventTime:Fs,lane:0,tag:Cs.tag,payload:Cs.payload,callback:Cs.callback,next:null});e:{var Os=va,Gs=Cs;switch(Bs=_a,Fs=_s,Gs.tag){case 1:if(Os=Gs.payload,typeof Os=="function"){$s=Os.call(Fs,$s,Bs);break e}$s=Os;break e;case 3:Os.flags=Os.flags&-4097|64;case 0:if(Os=Gs.payload,Bs=typeof Os=="function"?Os.call(Fs,$s,Bs):Os,Bs==null)break e;$s=m$5({},$s,Bs);break e;case 2:wg=!0}}Cs.callback!==null&&(va.flags|=32,Bs=Ms.effects,Bs===null?Ms.effects=[Cs]:Bs.push(Cs))}else Fs={eventTime:Fs,lane:Bs,tag:Cs.tag,payload:Cs.payload,callback:Cs.callback,next:null},Rs===null?(Ls=Rs=Fs,Ps=$s):Rs=Rs.next=Fs,Ts|=Bs;if(Cs=Cs.next,Cs===null){if(Bs=Ms.shared.pending,Bs===null)break;Cs=Bs.next,Bs.next=null,Ms.lastBaseUpdate=Bs,Ms.shared.pending=null}}while(1);Rs===null&&(Ps=$s),Ms.baseState=Ps,Ms.firstBaseUpdate=Ls,Ms.lastBaseUpdate=Rs,Dg|=Ts,va.lanes=Ts,va.memoizedState=$s}}function Eg(va,_a,_s){if(va=_a.effects,_a.effects=null,va!==null)for(_a=0;_a<va.length;_a++){var Ss=va[_a],Ms=Ss.callback;if(Ms!==null){if(Ss.callback=null,Ss=_s,typeof Ms!="function")throw Error(y$5(191,Ms));Ms.call(Ss)}}}var Fg=new aa$1.Component().refs;function Gg(va,_a,_s,Ss){_a=va.memoizedState,_s=_s(Ss,_a),_s=_s==null?_a:m$5({},_a,_s),va.memoizedState=_s,va.lanes===0&&(va.updateQueue.baseState=_s)}var Kg={isMounted:function(va){return(va=va._reactInternals)?Zb(va)===va:!1},enqueueSetState:function(va,_a,_s){va=va._reactInternals;var Ss=Hg(),Ms=Ig(va),Cs=zg(Ss,Ms);Cs.payload=_a,_s!=null&&(Cs.callback=_s),Ag(va,Cs),Jg(va,Ms,Ss)},enqueueReplaceState:function(va,_a,_s){va=va._reactInternals;var Ss=Hg(),Ms=Ig(va),Cs=zg(Ss,Ms);Cs.tag=1,Cs.payload=_a,_s!=null&&(Cs.callback=_s),Ag(va,Cs),Jg(va,Ms,Ss)},enqueueForceUpdate:function(va,_a){va=va._reactInternals;var _s=Hg(),Ss=Ig(va),Ms=zg(_s,Ss);Ms.tag=2,_a!=null&&(Ms.callback=_a),Ag(va,Ms),Jg(va,Ss,_s)}};function Lg(va,_a,_s,Ss,Ms,Cs,Ts){return va=va.stateNode,typeof va.shouldComponentUpdate=="function"?va.shouldComponentUpdate(Ss,Cs,Ts):_a.prototype&&_a.prototype.isPureReactComponent?!Je$1(_s,Ss)||!Je$1(Ms,Cs):!0}function Mg(va,_a,_s){var Ss=!1,Ms=Cf,Cs=_a.contextType;return typeof Cs=="object"&&Cs!==null?Cs=vg(Cs):(Ms=Ff(_a)?Df:M$2.current,Ss=_a.contextTypes,Cs=(Ss=Ss!=null)?Ef(va,Ms):Cf),_a=new _a(_s,Cs),va.memoizedState=_a.state!==null&&_a.state!==void 0?_a.state:null,_a.updater=Kg,va.stateNode=_a,_a._reactInternals=va,Ss&&(va=va.stateNode,va.__reactInternalMemoizedUnmaskedChildContext=Ms,va.__reactInternalMemoizedMaskedChildContext=Cs),_a}function Ng(va,_a,_s,Ss){va=_a.state,typeof _a.componentWillReceiveProps=="function"&&_a.componentWillReceiveProps(_s,Ss),typeof _a.UNSAFE_componentWillReceiveProps=="function"&&_a.UNSAFE_componentWillReceiveProps(_s,Ss),_a.state!==va&&Kg.enqueueReplaceState(_a,_a.state,null)}function Og(va,_a,_s,Ss){var Ms=va.stateNode;Ms.props=_s,Ms.state=va.memoizedState,Ms.refs=Fg,xg(va);var Cs=_a.contextType;typeof Cs=="object"&&Cs!==null?Ms.context=vg(Cs):(Cs=Ff(_a)?Df:M$2.current,Ms.context=Ef(va,Cs)),Cg(va,_s,Ms,Ss),Ms.state=va.memoizedState,Cs=_a.getDerivedStateFromProps,typeof Cs=="function"&&(Gg(va,_a,Cs,_s),Ms.state=va.memoizedState),typeof _a.getDerivedStateFromProps=="function"||typeof Ms.getSnapshotBeforeUpdate=="function"||typeof Ms.UNSAFE_componentWillMount!="function"&&typeof Ms.componentWillMount!="function"||(_a=Ms.state,typeof Ms.componentWillMount=="function"&&Ms.componentWillMount(),typeof Ms.UNSAFE_componentWillMount=="function"&&Ms.UNSAFE_componentWillMount(),_a!==Ms.state&&Kg.enqueueReplaceState(Ms,Ms.state,null),Cg(va,_s,Ms,Ss),Ms.state=va.memoizedState),typeof Ms.componentDidMount=="function"&&(va.flags|=4)}var Pg=Array.isArray;function Qg(va,_a,_s){if(va=_s.ref,va!==null&&typeof va!="function"&&typeof va!="object"){if(_s._owner){if(_s=_s._owner,_s){if(_s.tag!==1)throw Error(y$5(309));var Ss=_s.stateNode}if(!Ss)throw Error(y$5(147,va));var Ms=""+va;return _a!==null&&_a.ref!==null&&typeof _a.ref=="function"&&_a.ref._stringRef===Ms?_a.ref:(_a=function(Cs){var Ts=Ss.refs;Ts===Fg&&(Ts=Ss.refs={}),Cs===null?delete Ts[Ms]:Ts[Ms]=Cs},_a._stringRef=Ms,_a)}if(typeof va!="string")throw Error(y$5(284));if(!_s._owner)throw Error(y$5(290,va))}return va}function Rg(va,_a){if(va.type!=="textarea")throw Error(y$5(31,Object.prototype.toString.call(_a)==="[object Object]"?"object with keys {"+Object.keys(_a).join(", ")+"}":_a))}function Sg(va){function _a(Vs,Ds){if(va){var ks=Vs.lastEffect;ks!==null?(ks.nextEffect=Ds,Vs.lastEffect=Ds):Vs.firstEffect=Vs.lastEffect=Ds,Ds.nextEffect=null,Ds.flags=8}}function _s(Vs,Ds){if(!va)return null;for(;Ds!==null;)_a(Vs,Ds),Ds=Ds.sibling;return null}function Ss(Vs,Ds){for(Vs=new Map;Ds!==null;)Ds.key!==null?Vs.set(Ds.key,Ds):Vs.set(Ds.index,Ds),Ds=Ds.sibling;return Vs}function Ms(Vs,Ds){return Vs=Tg(Vs,Ds),Vs.index=0,Vs.sibling=null,Vs}function Cs(Vs,Ds,ks){return Vs.index=ks,va?(ks=Vs.alternate,ks!==null?(ks=ks.index,ks<Ds?(Vs.flags=2,Ds):ks):(Vs.flags=2,Ds)):Ds}function Ts(Vs){return va&&Vs.alternate===null&&(Vs.flags=2),Vs}function Bs(Vs,Ds,ks,Us){return Ds===null||Ds.tag!==6?(Ds=Ug(ks,Vs.mode,Us),Ds.return=Vs,Ds):(Ds=Ms(Ds,ks),Ds.return=Vs,Ds)}function Ps(Vs,Ds,ks,Us){return Ds!==null&&Ds.elementType===ks.type?(Us=Ms(Ds,ks.props),Us.ref=Qg(Vs,Ds,ks),Us.return=Vs,Us):(Us=Vg(ks.type,ks.key,ks.props,null,Vs.mode,Us),Us.ref=Qg(Vs,Ds,ks),Us.return=Vs,Us)}function Ls(Vs,Ds,ks,Us){return Ds===null||Ds.tag!==4||Ds.stateNode.containerInfo!==ks.containerInfo||Ds.stateNode.implementation!==ks.implementation?(Ds=Wg(ks,Vs.mode,Us),Ds.return=Vs,Ds):(Ds=Ms(Ds,ks.children||[]),Ds.return=Vs,Ds)}function Rs(Vs,Ds,ks,Us,zs){return Ds===null||Ds.tag!==7?(Ds=Xg(ks,Vs.mode,Us,zs),Ds.return=Vs,Ds):(Ds=Ms(Ds,ks),Ds.return=Vs,Ds)}function $s(Vs,Ds,ks){if(typeof Ds=="string"||typeof Ds=="number")return Ds=Ug(""+Ds,Vs.mode,ks),Ds.return=Vs,Ds;if(typeof Ds=="object"&&Ds!==null){switch(Ds.$$typeof){case sa:return ks=Vg(Ds.type,Ds.key,Ds.props,null,Vs.mode,ks),ks.ref=Qg(Vs,null,Ds),ks.return=Vs,ks;case ta:return Ds=Wg(Ds,Vs.mode,ks),Ds.return=Vs,Ds}if(Pg(Ds)||La(Ds))return Ds=Xg(Ds,Vs.mode,ks,null),Ds.return=Vs,Ds;Rg(Vs,Ds)}return null}function Fs(Vs,Ds,ks,Us){var zs=Ds!==null?Ds.key:null;if(typeof ks=="string"||typeof ks=="number")return zs!==null?null:Bs(Vs,Ds,""+ks,Us);if(typeof ks=="object"&&ks!==null){switch(ks.$$typeof){case sa:return ks.key===zs?ks.type===ua?Rs(Vs,Ds,ks.props.children,Us,zs):Ps(Vs,Ds,ks,Us):null;case ta:return ks.key===zs?Ls(Vs,Ds,ks,Us):null}if(Pg(ks)||La(ks))return zs!==null?null:Rs(Vs,Ds,ks,Us,null);Rg(Vs,ks)}return null}function Os(Vs,Ds,ks,Us,zs){if(typeof Us=="string"||typeof Us=="number")return Vs=Vs.get(ks)||null,Bs(Ds,Vs,""+Us,zs);if(typeof Us=="object"&&Us!==null){switch(Us.$$typeof){case sa:return Vs=Vs.get(Us.key===null?ks:Us.key)||null,Us.type===ua?Rs(Ds,Vs,Us.props.children,zs,Us.key):Ps(Ds,Vs,Us,zs);case ta:return Vs=Vs.get(Us.key===null?ks:Us.key)||null,Ls(Ds,Vs,Us,zs)}if(Pg(Us)||La(Us))return Vs=Vs.get(ks)||null,Rs(Ds,Vs,Us,zs,null);Rg(Ds,Us)}return null}function Gs(Vs,Ds,ks,Us){for(var zs=null,Ws=null,qs=Ds,Zs=Ds=0,el=null;qs!==null&&Zs<ks.length;Zs++){qs.index>Zs?(el=qs,qs=null):el=qs.sibling;var Js=Fs(Vs,qs,ks[Zs],Us);if(Js===null){qs===null&&(qs=el);break}va&&qs&&Js.alternate===null&&_a(Vs,qs),Ds=Cs(Js,Ds,Zs),Ws===null?zs=Js:Ws.sibling=Js,Ws=Js,qs=el}if(Zs===ks.length)return _s(Vs,qs),zs;if(qs===null){for(;Zs<ks.length;Zs++)qs=$s(Vs,ks[Zs],Us),qs!==null&&(Ds=Cs(qs,Ds,Zs),Ws===null?zs=qs:Ws.sibling=qs,Ws=qs);return zs}for(qs=Ss(Vs,qs);Zs<ks.length;Zs++)el=Os(qs,Vs,Zs,ks[Zs],Us),el!==null&&(va&&el.alternate!==null&&qs.delete(el.key===null?Zs:el.key),Ds=Cs(el,Ds,Zs),Ws===null?zs=el:Ws.sibling=el,Ws=el);return va&&qs.forEach(function(Hs){return _a(Vs,Hs)}),zs}function Ns(Vs,Ds,ks,Us){var zs=La(ks);if(typeof zs!="function")throw Error(y$5(150));if(ks=zs.call(ks),ks==null)throw Error(y$5(151));for(var Ws=zs=null,qs=Ds,Zs=Ds=0,el=null,Js=ks.next();qs!==null&&!Js.done;Zs++,Js=ks.next()){qs.index>Zs?(el=qs,qs=null):el=qs.sibling;var Hs=Fs(Vs,qs,Js.value,Us);if(Hs===null){qs===null&&(qs=el);break}va&&qs&&Hs.alternate===null&&_a(Vs,qs),Ds=Cs(Hs,Ds,Zs),Ws===null?zs=Hs:Ws.sibling=Hs,Ws=Hs,qs=el}if(Js.done)return _s(Vs,qs),zs;if(qs===null){for(;!Js.done;Zs++,Js=ks.next())Js=$s(Vs,Js.value,Us),Js!==null&&(Ds=Cs(Js,Ds,Zs),Ws===null?zs=Js:Ws.sibling=Js,Ws=Js);return zs}for(qs=Ss(Vs,qs);!Js.done;Zs++,Js=ks.next())Js=Os(qs,Vs,Zs,Js.value,Us),Js!==null&&(va&&Js.alternate!==null&&qs.delete(Js.key===null?Zs:Js.key),Ds=Cs(Js,Ds,Zs),Ws===null?zs=Js:Ws.sibling=Js,Ws=Js);return va&&qs.forEach(function(Qs){return _a(Vs,Qs)}),zs}return function(Vs,Ds,ks,Us){var zs=typeof ks=="object"&&ks!==null&&ks.type===ua&&ks.key===null;zs&&(ks=ks.props.children);var Ws=typeof ks=="object"&&ks!==null;if(Ws)switch(ks.$$typeof){case sa:e:{for(Ws=ks.key,zs=Ds;zs!==null;){if(zs.key===Ws){switch(zs.tag){case 7:if(ks.type===ua){_s(Vs,zs.sibling),Ds=Ms(zs,ks.props.children),Ds.return=Vs,Vs=Ds;break e}break;default:if(zs.elementType===ks.type){_s(Vs,zs.sibling),Ds=Ms(zs,ks.props),Ds.ref=Qg(Vs,zs,ks),Ds.return=Vs,Vs=Ds;break e}}_s(Vs,zs);break}else _a(Vs,zs);zs=zs.sibling}ks.type===ua?(Ds=Xg(ks.props.children,Vs.mode,Us,ks.key),Ds.return=Vs,Vs=Ds):(Us=Vg(ks.type,ks.key,ks.props,null,Vs.mode,Us),Us.ref=Qg(Vs,Ds,ks),Us.return=Vs,Vs=Us)}return Ts(Vs);case ta:e:{for(zs=ks.key;Ds!==null;){if(Ds.key===zs)if(Ds.tag===4&&Ds.stateNode.containerInfo===ks.containerInfo&&Ds.stateNode.implementation===ks.implementation){_s(Vs,Ds.sibling),Ds=Ms(Ds,ks.children||[]),Ds.return=Vs,Vs=Ds;break e}else{_s(Vs,Ds);break}else _a(Vs,Ds);Ds=Ds.sibling}Ds=Wg(ks,Vs.mode,Us),Ds.return=Vs,Vs=Ds}return Ts(Vs)}if(typeof ks=="string"||typeof ks=="number")return ks=""+ks,Ds!==null&&Ds.tag===6?(_s(Vs,Ds.sibling),Ds=Ms(Ds,ks),Ds.return=Vs,Vs=Ds):(_s(Vs,Ds),Ds=Ug(ks,Vs.mode,Us),Ds.return=Vs,Vs=Ds),Ts(Vs);if(Pg(ks))return Gs(Vs,Ds,ks,Us);if(La(ks))return Ns(Vs,Ds,ks,Us);if(Ws&&Rg(Vs,ks),typeof ks>"u"&&!zs)switch(Vs.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y$5(152,Ra(Vs.type)||"Component"))}return _s(Vs,Ds)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);function dh(va){if(va===$g)throw Error(y$5(174));return va}function eh(va,_a){switch(I$3(ch,_a),I$3(bh,va),I$3(ah,$g),va=_a.nodeType,va){case 9:case 11:_a=(_a=_a.documentElement)?_a.namespaceURI:mb(null,"");break;default:va=va===8?_a.parentNode:_a,_a=va.namespaceURI||null,va=va.tagName,_a=mb(_a,va)}H$3(ah),I$3(ah,_a)}function fh(){H$3(ah),H$3(bh),H$3(ch)}function gh(va){dh(ch.current);var _a=dh(ah.current),_s=mb(_a,va.type);_a!==_s&&(I$3(bh,va),I$3(ah,_s))}function hh(va){bh.current===va&&(H$3(ah),H$3(bh))}var P$3=Bf(0);function ih(va){for(var _a=va;_a!==null;){if(_a.tag===13){var _s=_a.memoizedState;if(_s!==null&&(_s=_s.dehydrated,_s===null||_s.data==="$?"||_s.data==="$!"))return _a}else if(_a.tag===19&&_a.memoizedProps.revealOrder!==void 0){if((_a.flags&64)!==0)return _a}else if(_a.child!==null){_a.child.return=_a,_a=_a.child;continue}if(_a===va)break;for(;_a.sibling===null;){if(_a.return===null||_a.return===va)return null;_a=_a.return}_a.sibling.return=_a.return,_a=_a.sibling}return null}var jh=null,kh=null,lh=!1;function mh(va,_a){var _s=nh(5,null,null,0);_s.elementType="DELETED",_s.type="DELETED",_s.stateNode=_a,_s.return=va,_s.flags=8,va.lastEffect!==null?(va.lastEffect.nextEffect=_s,va.lastEffect=_s):va.firstEffect=va.lastEffect=_s}function oh(va,_a){switch(va.tag){case 5:var _s=va.type;return _a=_a.nodeType!==1||_s.toLowerCase()!==_a.nodeName.toLowerCase()?null:_a,_a!==null?(va.stateNode=_a,!0):!1;case 6:return _a=va.pendingProps===""||_a.nodeType!==3?null:_a,_a!==null?(va.stateNode=_a,!0):!1;case 13:return!1;default:return!1}}function ph(va){if(lh){var _a=kh;if(_a){var _s=_a;if(!oh(va,_a)){if(_a=rf(_s.nextSibling),!_a||!oh(va,_a)){va.flags=va.flags&-1025|2,lh=!1,jh=va;return}mh(jh,_s)}jh=va,kh=rf(_a.firstChild)}else va.flags=va.flags&-1025|2,lh=!1,jh=va}}function qh(va){for(va=va.return;va!==null&&va.tag!==5&&va.tag!==3&&va.tag!==13;)va=va.return;jh=va}function rh(va){if(va!==jh)return!1;if(!lh)return qh(va),lh=!0,!1;var _a=va.type;if(va.tag!==5||_a!=="head"&&_a!=="body"&&!nf(_a,va.memoizedProps))for(_a=kh;_a;)mh(va,_a),_a=rf(_a.nextSibling);if(qh(va),va.tag===13){if(va=va.memoizedState,va=va!==null?va.dehydrated:null,!va)throw Error(y$5(317));e:{for(va=va.nextSibling,_a=0;va;){if(va.nodeType===8){var _s=va.data;if(_s==="/$"){if(_a===0){kh=rf(va.nextSibling);break e}_a--}else _s!=="$"&&_s!=="$!"&&_s!=="$?"||_a++}va=va.nextSibling}kh=null}}else kh=jh?rf(va.stateNode.nextSibling):null;return!0}function sh(){kh=jh=null,lh=!1}var th=[];function uh(){for(var va=0;va<th.length;va++)th[va]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R$3=null,S$2=null,T$1=null,yh=!1,zh=!1;function Ah(){throw Error(y$5(321))}function Bh(va,_a){if(_a===null)return!1;for(var _s=0;_s<_a.length&&_s<va.length;_s++)if(!He$1(va[_s],_a[_s]))return!1;return!0}function Ch(va,_a,_s,Ss,Ms,Cs){if(xh=Cs,R$3=_a,_a.memoizedState=null,_a.updateQueue=null,_a.lanes=0,vh.current=va===null||va.memoizedState===null?Dh:Eh,va=_s(Ss,Ms),zh){Cs=0;do{if(zh=!1,!(25>Cs))throw Error(y$5(301));Cs+=1,T$1=S$2=null,_a.updateQueue=null,vh.current=Fh,va=_s(Ss,Ms)}while(zh)}if(vh.current=Gh,_a=S$2!==null&&S$2.next!==null,xh=0,T$1=S$2=R$3=null,yh=!1,_a)throw Error(y$5(300));return va}function Hh(){var va={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return T$1===null?R$3.memoizedState=T$1=va:T$1=T$1.next=va,T$1}function Ih(){if(S$2===null){var va=R$3.alternate;va=va!==null?va.memoizedState:null}else va=S$2.next;var _a=T$1===null?R$3.memoizedState:T$1.next;if(_a!==null)T$1=_a,S$2=va;else{if(va===null)throw Error(y$5(310));S$2=va,va={memoizedState:S$2.memoizedState,baseState:S$2.baseState,baseQueue:S$2.baseQueue,queue:S$2.queue,next:null},T$1===null?R$3.memoizedState=T$1=va:T$1=T$1.next=va}return T$1}function Jh(va,_a){return typeof _a=="function"?_a(va):_a}function Kh(va){var _a=Ih(),_s=_a.queue;if(_s===null)throw Error(y$5(311));_s.lastRenderedReducer=va;var Ss=S$2,Ms=Ss.baseQueue,Cs=_s.pending;if(Cs!==null){if(Ms!==null){var Ts=Ms.next;Ms.next=Cs.next,Cs.next=Ts}Ss.baseQueue=Ms=Cs,_s.pending=null}if(Ms!==null){Ms=Ms.next,Ss=Ss.baseState;var Bs=Ts=Cs=null,Ps=Ms;do{var Ls=Ps.lane;if((xh&Ls)===Ls)Bs!==null&&(Bs=Bs.next={lane:0,action:Ps.action,eagerReducer:Ps.eagerReducer,eagerState:Ps.eagerState,next:null}),Ss=Ps.eagerReducer===va?Ps.eagerState:va(Ss,Ps.action);else{var Rs={lane:Ls,action:Ps.action,eagerReducer:Ps.eagerReducer,eagerState:Ps.eagerState,next:null};Bs===null?(Ts=Bs=Rs,Cs=Ss):Bs=Bs.next=Rs,R$3.lanes|=Ls,Dg|=Ls}Ps=Ps.next}while(Ps!==null&&Ps!==Ms);Bs===null?Cs=Ss:Bs.next=Ts,He$1(Ss,_a.memoizedState)||(ug=!0),_a.memoizedState=Ss,_a.baseState=Cs,_a.baseQueue=Bs,_s.lastRenderedState=Ss}return[_a.memoizedState,_s.dispatch]}function Lh(va){var _a=Ih(),_s=_a.queue;if(_s===null)throw Error(y$5(311));_s.lastRenderedReducer=va;var Ss=_s.dispatch,Ms=_s.pending,Cs=_a.memoizedState;if(Ms!==null){_s.pending=null;var Ts=Ms=Ms.next;do Cs=va(Cs,Ts.action),Ts=Ts.next;while(Ts!==Ms);He$1(Cs,_a.memoizedState)||(ug=!0),_a.memoizedState=Cs,_a.baseQueue===null&&(_a.baseState=Cs),_s.lastRenderedState=Cs}return[Cs,Ss]}function Mh(va,_a,_s){var Ss=_a._getVersion;Ss=Ss(_a._source);var Ms=_a._workInProgressVersionPrimary;if(Ms!==null?va=Ms===Ss:(va=va.mutableReadLanes,(va=(xh&va)===va)&&(_a._workInProgressVersionPrimary=Ss,th.push(_a))),va)return _s(_a._source);throw th.push(_a),Error(y$5(350))}function Nh(va,_a,_s,Ss){var Ms=U$1;if(Ms===null)throw Error(y$5(349));var Cs=_a._getVersion,Ts=Cs(_a._source),Bs=vh.current,Ps=Bs.useState(function(){return Mh(Ms,_a,_s)}),Ls=Ps[1],Rs=Ps[0];Ps=T$1;var $s=va.memoizedState,Fs=$s.refs,Os=Fs.getSnapshot,Gs=$s.source;$s=$s.subscribe;var Ns=R$3;return va.memoizedState={refs:Fs,source:_a,subscribe:Ss},Bs.useEffect(function(){Fs.getSnapshot=_s,Fs.setSnapshot=Ls;var Vs=Cs(_a._source);if(!He$1(Ts,Vs)){Vs=_s(_a._source),He$1(Rs,Vs)||(Ls(Vs),Vs=Ig(Ns),Ms.mutableReadLanes|=Vs&Ms.pendingLanes),Vs=Ms.mutableReadLanes,Ms.entangledLanes|=Vs;for(var Ds=Ms.entanglements,ks=Vs;0<ks;){var Us=31-Vc(ks),zs=1<<Us;Ds[Us]|=Vs,ks&=~zs}}},[_s,_a,Ss]),Bs.useEffect(function(){return Ss(_a._source,function(){var Vs=Fs.getSnapshot,Ds=Fs.setSnapshot;try{Ds(Vs(_a._source));var ks=Ig(Ns);Ms.mutableReadLanes|=ks&Ms.pendingLanes}catch(Us){Ds(function(){throw Us})}})},[_a,Ss]),He$1(Os,_s)&&He$1(Gs,_a)&&He$1($s,Ss)||(va={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:Rs},va.dispatch=Ls=Oh.bind(null,R$3,va),Ps.queue=va,Ps.baseQueue=null,Rs=Mh(Ms,_a,_s),Ps.memoizedState=Ps.baseState=Rs),Rs}function Ph(va,_a,_s){var Ss=Ih();return Nh(Ss,va,_a,_s)}function Qh(va){var _a=Hh();return typeof va=="function"&&(va=va()),_a.memoizedState=_a.baseState=va,va=_a.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:va},va=va.dispatch=Oh.bind(null,R$3,va),[_a.memoizedState,va]}function Rh(va,_a,_s,Ss){return va={tag:va,create:_a,destroy:_s,deps:Ss,next:null},_a=R$3.updateQueue,_a===null?(_a={lastEffect:null},R$3.updateQueue=_a,_a.lastEffect=va.next=va):(_s=_a.lastEffect,_s===null?_a.lastEffect=va.next=va:(Ss=_s.next,_s.next=va,va.next=Ss,_a.lastEffect=va)),va}function Sh(va){var _a=Hh();return va={current:va},_a.memoizedState=va}function Th(){return Ih().memoizedState}function Uh(va,_a,_s,Ss){var Ms=Hh();R$3.flags|=va,Ms.memoizedState=Rh(1|_a,_s,void 0,Ss===void 0?null:Ss)}function Vh(va,_a,_s,Ss){var Ms=Ih();Ss=Ss===void 0?null:Ss;var Cs=void 0;if(S$2!==null){var Ts=S$2.memoizedState;if(Cs=Ts.destroy,Ss!==null&&Bh(Ss,Ts.deps)){Rh(_a,_s,Cs,Ss);return}}R$3.flags|=va,Ms.memoizedState=Rh(1|_a,_s,Cs,Ss)}function Wh(va,_a){return Uh(516,4,va,_a)}function Xh(va,_a){return Vh(516,4,va,_a)}function Yh(va,_a){return Vh(4,2,va,_a)}function Zh(va,_a){if(typeof _a=="function")return va=va(),_a(va),function(){_a(null)};if(_a!=null)return va=va(),_a.current=va,function(){_a.current=null}}function $h(va,_a,_s){return _s=_s!=null?_s.concat([va]):null,Vh(4,2,Zh.bind(null,_a,va),_s)}function ai$1(){}function bi$1(va,_a){var _s=Ih();_a=_a===void 0?null:_a;var Ss=_s.memoizedState;return Ss!==null&&_a!==null&&Bh(_a,Ss[1])?Ss[0]:(_s.memoizedState=[va,_a],va)}function ci$1(va,_a){var _s=Ih();_a=_a===void 0?null:_a;var Ss=_s.memoizedState;return Ss!==null&&_a!==null&&Bh(_a,Ss[1])?Ss[0]:(va=va(),_s.memoizedState=[va,_a],va)}function di$1(va,_a){var _s=eg();gg(98>_s?98:_s,function(){va(!0)}),gg(97<_s?97:_s,function(){var Ss=wh.transition;wh.transition=1;try{va(!1),_a()}finally{wh.transition=Ss}})}function Oh(va,_a,_s){var Ss=Hg(),Ms=Ig(va),Cs={lane:Ms,action:_s,eagerReducer:null,eagerState:null,next:null},Ts=_a.pending;if(Ts===null?Cs.next=Cs:(Cs.next=Ts.next,Ts.next=Cs),_a.pending=Cs,Ts=va.alternate,va===R$3||Ts!==null&&Ts===R$3)zh=yh=!0;else{if(va.lanes===0&&(Ts===null||Ts.lanes===0)&&(Ts=_a.lastRenderedReducer,Ts!==null))try{var Bs=_a.lastRenderedState,Ps=Ts(Bs,_s);if(Cs.eagerReducer=Ts,Cs.eagerState=Ps,He$1(Ps,Bs))return}catch{}finally{}Jg(va,Ms,Ss)}}var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(va,_a){return Hh().memoizedState=[va,_a===void 0?null:_a],va},useContext:vg,useEffect:Wh,useImperativeHandle:function(va,_a,_s){return _s=_s!=null?_s.concat([va]):null,Uh(4,2,Zh.bind(null,_a,va),_s)},useLayoutEffect:function(va,_a){return Uh(4,2,va,_a)},useMemo:function(va,_a){var _s=Hh();return _a=_a===void 0?null:_a,va=va(),_s.memoizedState=[va,_a],va},useReducer:function(va,_a,_s){var Ss=Hh();return _a=_s!==void 0?_s(_a):_a,Ss.memoizedState=Ss.baseState=_a,va=Ss.queue={pending:null,dispatch:null,lastRenderedReducer:va,lastRenderedState:_a},va=va.dispatch=Oh.bind(null,R$3,va),[Ss.memoizedState,va]},useRef:Sh,useState:Qh,useDebugValue:ai$1,useDeferredValue:function(va){var _a=Qh(va),_s=_a[0],Ss=_a[1];return Wh(function(){var Ms=wh.transition;wh.transition=1;try{Ss(va)}finally{wh.transition=Ms}},[va]),_s},useTransition:function(){var va=Qh(!1),_a=va[0];return va=di$1.bind(null,va[1]),Sh(va),[va,_a]},useMutableSource:function(va,_a,_s){var Ss=Hh();return Ss.memoizedState={refs:{getSnapshot:_a,setSnapshot:null},source:va,subscribe:_s},Nh(Ss,va,_a,_s)},useOpaqueIdentifier:function(){if(lh){var va=!1,_a=uf(function(){throw va||(va=!0,_s("r:"+(tf++).toString(36))),Error(y$5(355))}),_s=Qh(_a)[1];return(R$3.mode&2)===0&&(R$3.flags|=516,Rh(5,function(){_s("r:"+(tf++).toString(36))},void 0,null)),_a}return _a="r:"+(tf++).toString(36),Qh(_a),_a},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi$1,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci$1,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai$1,useDeferredValue:function(va){var _a=Kh(Jh),_s=_a[0],Ss=_a[1];return Xh(function(){var Ms=wh.transition;wh.transition=1;try{Ss(va)}finally{wh.transition=Ms}},[va]),_s},useTransition:function(){var va=Kh(Jh)[0];return[Th().current,va]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi$1,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci$1,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai$1,useDeferredValue:function(va){var _a=Lh(Jh),_s=_a[0],Ss=_a[1];return Xh(function(){var Ms=wh.transition;wh.transition=1;try{Ss(va)}finally{wh.transition=Ms}},[va]),_s},useTransition:function(){var va=Lh(Jh)[0];return[Th().current,va]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei$1=ra.ReactCurrentOwner,ug=!1;function fi$1(va,_a,_s,Ss){_a.child=va===null?Zg(_a,null,_s,Ss):Yg(_a,va.child,_s,Ss)}function gi$1(va,_a,_s,Ss,Ms){_s=_s.render;var Cs=_a.ref;return tg(_a,Ms),Ss=Ch(va,_a,_s,Ss,Cs,Ms),va!==null&&!ug?(_a.updateQueue=va.updateQueue,_a.flags&=-517,va.lanes&=~Ms,hi$1(va,_a,Ms)):(_a.flags|=1,fi$1(va,_a,Ss,Ms),_a.child)}function ii$1(va,_a,_s,Ss,Ms,Cs){if(va===null){var Ts=_s.type;return typeof Ts=="function"&&!ji$1(Ts)&&Ts.defaultProps===void 0&&_s.compare===null&&_s.defaultProps===void 0?(_a.tag=15,_a.type=Ts,ki$1(va,_a,Ts,Ss,Ms,Cs)):(va=Vg(_s.type,null,Ss,_a,_a.mode,Cs),va.ref=_a.ref,va.return=_a,_a.child=va)}return Ts=va.child,(Ms&Cs)===0&&(Ms=Ts.memoizedProps,_s=_s.compare,_s=_s!==null?_s:Je$1,_s(Ms,Ss)&&va.ref===_a.ref)?hi$1(va,_a,Cs):(_a.flags|=1,va=Tg(Ts,Ss),va.ref=_a.ref,va.return=_a,_a.child=va)}function ki$1(va,_a,_s,Ss,Ms,Cs){if(va!==null&&Je$1(va.memoizedProps,Ss)&&va.ref===_a.ref)if(ug=!1,(Cs&Ms)!==0)(va.flags&16384)!==0&&(ug=!0);else return _a.lanes=va.lanes,hi$1(va,_a,Cs);return li$1(va,_a,_s,Ss,Cs)}function mi$1(va,_a,_s){var Ss=_a.pendingProps,Ms=Ss.children,Cs=va!==null?va.memoizedState:null;if(Ss.mode==="hidden"||Ss.mode==="unstable-defer-without-hiding")if((_a.mode&4)===0)_a.memoizedState={baseLanes:0},ni$1(_a,_s);else if((_s&1073741824)!==0)_a.memoizedState={baseLanes:0},ni$1(_a,Cs!==null?Cs.baseLanes:_s);else return va=Cs!==null?Cs.baseLanes|_s:_s,_a.lanes=_a.childLanes=1073741824,_a.memoizedState={baseLanes:va},ni$1(_a,va),null;else Cs!==null?(Ss=Cs.baseLanes|_s,_a.memoizedState=null):Ss=_s,ni$1(_a,Ss);return fi$1(va,_a,Ms,_s),_a.child}function oi$1(va,_a){var _s=_a.ref;(va===null&&_s!==null||va!==null&&va.ref!==_s)&&(_a.flags|=128)}function li$1(va,_a,_s,Ss,Ms){var Cs=Ff(_s)?Df:M$2.current;return Cs=Ef(_a,Cs),tg(_a,Ms),_s=Ch(va,_a,_s,Ss,Cs,Ms),va!==null&&!ug?(_a.updateQueue=va.updateQueue,_a.flags&=-517,va.lanes&=~Ms,hi$1(va,_a,Ms)):(_a.flags|=1,fi$1(va,_a,_s,Ms),_a.child)}function pi$1(va,_a,_s,Ss,Ms){if(Ff(_s)){var Cs=!0;Jf(_a)}else Cs=!1;if(tg(_a,Ms),_a.stateNode===null)va!==null&&(va.alternate=null,_a.alternate=null,_a.flags|=2),Mg(_a,_s,Ss),Og(_a,_s,Ss,Ms),Ss=!0;else if(va===null){var Ts=_a.stateNode,Bs=_a.memoizedProps;Ts.props=Bs;var Ps=Ts.context,Ls=_s.contextType;typeof Ls=="object"&&Ls!==null?Ls=vg(Ls):(Ls=Ff(_s)?Df:M$2.current,Ls=Ef(_a,Ls));var Rs=_s.getDerivedStateFromProps,$s=typeof Rs=="function"||typeof Ts.getSnapshotBeforeUpdate=="function";$s||typeof Ts.UNSAFE_componentWillReceiveProps!="function"&&typeof Ts.componentWillReceiveProps!="function"||(Bs!==Ss||Ps!==Ls)&&Ng(_a,Ts,Ss,Ls),wg=!1;var Fs=_a.memoizedState;Ts.state=Fs,Cg(_a,Ss,Ts,Ms),Ps=_a.memoizedState,Bs!==Ss||Fs!==Ps||N$3.current||wg?(typeof Rs=="function"&&(Gg(_a,_s,Rs,Ss),Ps=_a.memoizedState),(Bs=wg||Lg(_a,_s,Bs,Ss,Fs,Ps,Ls))?($s||typeof Ts.UNSAFE_componentWillMount!="function"&&typeof Ts.componentWillMount!="function"||(typeof Ts.componentWillMount=="function"&&Ts.componentWillMount(),typeof Ts.UNSAFE_componentWillMount=="function"&&Ts.UNSAFE_componentWillMount()),typeof Ts.componentDidMount=="function"&&(_a.flags|=4)):(typeof Ts.componentDidMount=="function"&&(_a.flags|=4),_a.memoizedProps=Ss,_a.memoizedState=Ps),Ts.props=Ss,Ts.state=Ps,Ts.context=Ls,Ss=Bs):(typeof Ts.componentDidMount=="function"&&(_a.flags|=4),Ss=!1)}else{Ts=_a.stateNode,yg(va,_a),Bs=_a.memoizedProps,Ls=_a.type===_a.elementType?Bs:lg(_a.type,Bs),Ts.props=Ls,$s=_a.pendingProps,Fs=Ts.context,Ps=_s.contextType,typeof Ps=="object"&&Ps!==null?Ps=vg(Ps):(Ps=Ff(_s)?Df:M$2.current,Ps=Ef(_a,Ps));var Os=_s.getDerivedStateFromProps;(Rs=typeof Os=="function"||typeof Ts.getSnapshotBeforeUpdate=="function")||typeof Ts.UNSAFE_componentWillReceiveProps!="function"&&typeof Ts.componentWillReceiveProps!="function"||(Bs!==$s||Fs!==Ps)&&Ng(_a,Ts,Ss,Ps),wg=!1,Fs=_a.memoizedState,Ts.state=Fs,Cg(_a,Ss,Ts,Ms);var Gs=_a.memoizedState;Bs!==$s||Fs!==Gs||N$3.current||wg?(typeof Os=="function"&&(Gg(_a,_s,Os,Ss),Gs=_a.memoizedState),(Ls=wg||Lg(_a,_s,Ls,Ss,Fs,Gs,Ps))?(Rs||typeof Ts.UNSAFE_componentWillUpdate!="function"&&typeof Ts.componentWillUpdate!="function"||(typeof Ts.componentWillUpdate=="function"&&Ts.componentWillUpdate(Ss,Gs,Ps),typeof Ts.UNSAFE_componentWillUpdate=="function"&&Ts.UNSAFE_componentWillUpdate(Ss,Gs,Ps)),typeof Ts.componentDidUpdate=="function"&&(_a.flags|=4),typeof Ts.getSnapshotBeforeUpdate=="function"&&(_a.flags|=256)):(typeof Ts.componentDidUpdate!="function"||Bs===va.memoizedProps&&Fs===va.memoizedState||(_a.flags|=4),typeof Ts.getSnapshotBeforeUpdate!="function"||Bs===va.memoizedProps&&Fs===va.memoizedState||(_a.flags|=256),_a.memoizedProps=Ss,_a.memoizedState=Gs),Ts.props=Ss,Ts.state=Gs,Ts.context=Ps,Ss=Ls):(typeof Ts.componentDidUpdate!="function"||Bs===va.memoizedProps&&Fs===va.memoizedState||(_a.flags|=4),typeof Ts.getSnapshotBeforeUpdate!="function"||Bs===va.memoizedProps&&Fs===va.memoizedState||(_a.flags|=256),Ss=!1)}return qi$1(va,_a,_s,Ss,Cs,Ms)}function qi$1(va,_a,_s,Ss,Ms,Cs){oi$1(va,_a);var Ts=(_a.flags&64)!==0;if(!Ss&&!Ts)return Ms&&Kf(_a,_s,!1),hi$1(va,_a,Cs);Ss=_a.stateNode,ei$1.current=_a;var Bs=Ts&&typeof _s.getDerivedStateFromError!="function"?null:Ss.render();return _a.flags|=1,va!==null&&Ts?(_a.child=Yg(_a,va.child,null,Cs),_a.child=Yg(_a,null,Bs,Cs)):fi$1(va,_a,Bs,Cs),_a.memoizedState=Ss.state,Ms&&Kf(_a,_s,!0),_a.child}function ri$1(va){var _a=va.stateNode;_a.pendingContext?Hf(va,_a.pendingContext,_a.pendingContext!==_a.context):_a.context&&Hf(va,_a.context,!1),eh(va,_a.containerInfo)}var si$1={dehydrated:null,retryLane:0};function ti$1(va,_a,_s){var Ss=_a.pendingProps,Ms=P$3.current,Cs=!1,Ts;return(Ts=(_a.flags&64)!==0)||(Ts=va!==null&&va.memoizedState===null?!1:(Ms&2)!==0),Ts?(Cs=!0,_a.flags&=-65):va!==null&&va.memoizedState===null||Ss.fallback===void 0||Ss.unstable_avoidThisFallback===!0||(Ms|=1),I$3(P$3,Ms&1),va===null?(Ss.fallback!==void 0&&ph(_a),va=Ss.children,Ms=Ss.fallback,Cs?(va=ui$1(_a,va,Ms,_s),_a.child.memoizedState={baseLanes:_s},_a.memoizedState=si$1,va):typeof Ss.unstable_expectedLoadTime=="number"?(va=ui$1(_a,va,Ms,_s),_a.child.memoizedState={baseLanes:_s},_a.memoizedState=si$1,_a.lanes=33554432,va):(_s=vi$1({mode:"visible",children:va},_a.mode,_s,null),_s.return=_a,_a.child=_s)):va.memoizedState!==null?Cs?(Ss=wi$1(va,_a,Ss.children,Ss.fallback,_s),Cs=_a.child,Ms=va.child.memoizedState,Cs.memoizedState=Ms===null?{baseLanes:_s}:{baseLanes:Ms.baseLanes|_s},Cs.childLanes=va.childLanes&~_s,_a.memoizedState=si$1,Ss):(_s=xi$1(va,_a,Ss.children,_s),_a.memoizedState=null,_s):Cs?(Ss=wi$1(va,_a,Ss.children,Ss.fallback,_s),Cs=_a.child,Ms=va.child.memoizedState,Cs.memoizedState=Ms===null?{baseLanes:_s}:{baseLanes:Ms.baseLanes|_s},Cs.childLanes=va.childLanes&~_s,_a.memoizedState=si$1,Ss):(_s=xi$1(va,_a,Ss.children,_s),_a.memoizedState=null,_s)}function ui$1(va,_a,_s,Ss){var Ms=va.mode,Cs=va.child;return _a={mode:"hidden",children:_a},(Ms&2)===0&&Cs!==null?(Cs.childLanes=0,Cs.pendingProps=_a):Cs=vi$1(_a,Ms,0,null),_s=Xg(_s,Ms,Ss,null),Cs.return=va,_s.return=va,Cs.sibling=_s,va.child=Cs,_s}function xi$1(va,_a,_s,Ss){var Ms=va.child;return va=Ms.sibling,_s=Tg(Ms,{mode:"visible",children:_s}),(_a.mode&2)===0&&(_s.lanes=Ss),_s.return=_a,_s.sibling=null,va!==null&&(va.nextEffect=null,va.flags=8,_a.firstEffect=_a.lastEffect=va),_a.child=_s}function wi$1(va,_a,_s,Ss,Ms){var Cs=_a.mode,Ts=va.child;va=Ts.sibling;var Bs={mode:"hidden",children:_s};return(Cs&2)===0&&_a.child!==Ts?(_s=_a.child,_s.childLanes=0,_s.pendingProps=Bs,Ts=_s.lastEffect,Ts!==null?(_a.firstEffect=_s.firstEffect,_a.lastEffect=Ts,Ts.nextEffect=null):_a.firstEffect=_a.lastEffect=null):_s=Tg(Ts,Bs),va!==null?Ss=Tg(va,Ss):(Ss=Xg(Ss,Cs,Ms,null),Ss.flags|=2),Ss.return=_a,_s.return=_a,_s.sibling=Ss,_a.child=_s,Ss}function yi$1(va,_a){va.lanes|=_a;var _s=va.alternate;_s!==null&&(_s.lanes|=_a),sg(va.return,_a)}function zi$1(va,_a,_s,Ss,Ms,Cs){var Ts=va.memoizedState;Ts===null?va.memoizedState={isBackwards:_a,rendering:null,renderingStartTime:0,last:Ss,tail:_s,tailMode:Ms,lastEffect:Cs}:(Ts.isBackwards=_a,Ts.rendering=null,Ts.renderingStartTime=0,Ts.last=Ss,Ts.tail=_s,Ts.tailMode=Ms,Ts.lastEffect=Cs)}function Ai$1(va,_a,_s){var Ss=_a.pendingProps,Ms=Ss.revealOrder,Cs=Ss.tail;if(fi$1(va,_a,Ss.children,_s),Ss=P$3.current,(Ss&2)!==0)Ss=Ss&1|2,_a.flags|=64;else{if(va!==null&&(va.flags&64)!==0)e:for(va=_a.child;va!==null;){if(va.tag===13)va.memoizedState!==null&&yi$1(va,_s);else if(va.tag===19)yi$1(va,_s);else if(va.child!==null){va.child.return=va,va=va.child;continue}if(va===_a)break e;for(;va.sibling===null;){if(va.return===null||va.return===_a)break e;va=va.return}va.sibling.return=va.return,va=va.sibling}Ss&=1}if(I$3(P$3,Ss),(_a.mode&2)===0)_a.memoizedState=null;else switch(Ms){case"forwards":for(_s=_a.child,Ms=null;_s!==null;)va=_s.alternate,va!==null&&ih(va)===null&&(Ms=_s),_s=_s.sibling;_s=Ms,_s===null?(Ms=_a.child,_a.child=null):(Ms=_s.sibling,_s.sibling=null),zi$1(_a,!1,Ms,_s,Cs,_a.lastEffect);break;case"backwards":for(_s=null,Ms=_a.child,_a.child=null;Ms!==null;){if(va=Ms.alternate,va!==null&&ih(va)===null){_a.child=Ms;break}va=Ms.sibling,Ms.sibling=_s,_s=Ms,Ms=va}zi$1(_a,!0,_s,null,Cs,_a.lastEffect);break;case"together":zi$1(_a,!1,null,null,void 0,_a.lastEffect);break;default:_a.memoizedState=null}return _a.child}function hi$1(va,_a,_s){if(va!==null&&(_a.dependencies=va.dependencies),Dg|=_a.lanes,(_s&_a.childLanes)!==0){if(va!==null&&_a.child!==va.child)throw Error(y$5(153));if(_a.child!==null){for(va=_a.child,_s=Tg(va,va.pendingProps),_a.child=_s,_s.return=_a;va.sibling!==null;)va=va.sibling,_s=_s.sibling=Tg(va,va.pendingProps),_s.return=_a;_s.sibling=null}return _a.child}return null}var Bi$1,Ci$1,Di$1,Ei$1;Bi$1=function(va,_a){for(var _s=_a.child;_s!==null;){if(_s.tag===5||_s.tag===6)va.appendChild(_s.stateNode);else if(_s.tag!==4&&_s.child!==null){_s.child.return=_s,_s=_s.child;continue}if(_s===_a)break;for(;_s.sibling===null;){if(_s.return===null||_s.return===_a)return;_s=_s.return}_s.sibling.return=_s.return,_s=_s.sibling}};Ci$1=function(){};Di$1=function(va,_a,_s,Ss){var Ms=va.memoizedProps;if(Ms!==Ss){va=_a.stateNode,dh(ah.current);var Cs=null;switch(_s){case"input":Ms=Ya(va,Ms),Ss=Ya(va,Ss),Cs=[];break;case"option":Ms=eb(va,Ms),Ss=eb(va,Ss),Cs=[];break;case"select":Ms=m$5({},Ms,{value:void 0}),Ss=m$5({},Ss,{value:void 0}),Cs=[];break;case"textarea":Ms=gb(va,Ms),Ss=gb(va,Ss),Cs=[];break;default:typeof Ms.onClick!="function"&&typeof Ss.onClick=="function"&&(va.onclick=jf)}vb(_s,Ss);var Ts;_s=null;for(Ls in Ms)if(!Ss.hasOwnProperty(Ls)&&Ms.hasOwnProperty(Ls)&&Ms[Ls]!=null)if(Ls==="style"){var Bs=Ms[Ls];for(Ts in Bs)Bs.hasOwnProperty(Ts)&&(_s||(_s={}),_s[Ts]="")}else Ls!=="dangerouslySetInnerHTML"&&Ls!=="children"&&Ls!=="suppressContentEditableWarning"&&Ls!=="suppressHydrationWarning"&&Ls!=="autoFocus"&&(ca$1.hasOwnProperty(Ls)?Cs||(Cs=[]):(Cs=Cs||[]).push(Ls,null));for(Ls in Ss){var Ps=Ss[Ls];if(Bs=Ms?.[Ls],Ss.hasOwnProperty(Ls)&&Ps!==Bs&&(Ps!=null||Bs!=null))if(Ls==="style")if(Bs){for(Ts in Bs)!Bs.hasOwnProperty(Ts)||Ps&&Ps.hasOwnProperty(Ts)||(_s||(_s={}),_s[Ts]="");for(Ts in Ps)Ps.hasOwnProperty(Ts)&&Bs[Ts]!==Ps[Ts]&&(_s||(_s={}),_s[Ts]=Ps[Ts])}else _s||(Cs||(Cs=[]),Cs.push(Ls,_s)),_s=Ps;else Ls==="dangerouslySetInnerHTML"?(Ps=Ps?Ps.__html:void 0,Bs=Bs?Bs.__html:void 0,Ps!=null&&Bs!==Ps&&(Cs=Cs||[]).push(Ls,Ps)):Ls==="children"?typeof Ps!="string"&&typeof Ps!="number"||(Cs=Cs||[]).push(Ls,""+Ps):Ls!=="suppressContentEditableWarning"&&Ls!=="suppressHydrationWarning"&&(ca$1.hasOwnProperty(Ls)?(Ps!=null&&Ls==="onScroll"&&G$3("scroll",va),Cs||Bs===Ps||(Cs=[])):typeof Ps=="object"&&Ps!==null&&Ps.$$typeof===Ga?Ps.toString():(Cs=Cs||[]).push(Ls,Ps))}_s&&(Cs=Cs||[]).push("style",_s);var Ls=Cs;(_a.updateQueue=Ls)&&(_a.flags|=4)}};Ei$1=function(va,_a,_s,Ss){_s!==Ss&&(_a.flags|=4)};function Fi$1(va,_a){if(!lh)switch(va.tailMode){case"hidden":_a=va.tail;for(var _s=null;_a!==null;)_a.alternate!==null&&(_s=_a),_a=_a.sibling;_s===null?va.tail=null:_s.sibling=null;break;case"collapsed":_s=va.tail;for(var Ss=null;_s!==null;)_s.alternate!==null&&(Ss=_s),_s=_s.sibling;Ss===null?_a||va.tail===null?va.tail=null:va.tail.sibling=null:Ss.sibling=null}}function Gi$1(va,_a,_s){var Ss=_a.pendingProps;switch(_a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(_a.type)&&Gf(),null;case 3:return fh(),H$3(N$3),H$3(M$2),uh(),Ss=_a.stateNode,Ss.pendingContext&&(Ss.context=Ss.pendingContext,Ss.pendingContext=null),(va===null||va.child===null)&&(rh(_a)?_a.flags|=4:Ss.hydrate||(_a.flags|=256)),Ci$1(_a),null;case 5:hh(_a);var Ms=dh(ch.current);if(_s=_a.type,va!==null&&_a.stateNode!=null)Di$1(va,_a,_s,Ss,Ms),va.ref!==_a.ref&&(_a.flags|=128);else{if(!Ss){if(_a.stateNode===null)throw Error(y$5(166));return null}if(va=dh(ah.current),rh(_a)){Ss=_a.stateNode,_s=_a.type;var Cs=_a.memoizedProps;switch(Ss[wf]=_a,Ss[xf]=Cs,_s){case"dialog":G$3("cancel",Ss),G$3("close",Ss);break;case"iframe":case"object":case"embed":G$3("load",Ss);break;case"video":case"audio":for(va=0;va<Xe$1.length;va++)G$3(Xe$1[va],Ss);break;case"source":G$3("error",Ss);break;case"img":case"image":case"link":G$3("error",Ss),G$3("load",Ss);break;case"details":G$3("toggle",Ss);break;case"input":Za(Ss,Cs),G$3("invalid",Ss);break;case"select":Ss._wrapperState={wasMultiple:!!Cs.multiple},G$3("invalid",Ss);break;case"textarea":hb(Ss,Cs),G$3("invalid",Ss)}vb(_s,Cs),va=null;for(var Ts in Cs)Cs.hasOwnProperty(Ts)&&(Ms=Cs[Ts],Ts==="children"?typeof Ms=="string"?Ss.textContent!==Ms&&(va=["children",Ms]):typeof Ms=="number"&&Ss.textContent!==""+Ms&&(va=["children",""+Ms]):ca$1.hasOwnProperty(Ts)&&Ms!=null&&Ts==="onScroll"&&G$3("scroll",Ss));switch(_s){case"input":Va(Ss),cb(Ss,Cs,!0);break;case"textarea":Va(Ss),jb(Ss);break;case"select":case"option":break;default:typeof Cs.onClick=="function"&&(Ss.onclick=jf)}Ss=va,_a.updateQueue=Ss,Ss!==null&&(_a.flags|=4)}else{switch(Ts=Ms.nodeType===9?Ms:Ms.ownerDocument,va===kb.html&&(va=lb(_s)),va===kb.html?_s==="script"?(va=Ts.createElement("div"),va.innerHTML="<script><\/script>",va=va.removeChild(va.firstChild)):typeof Ss.is=="string"?va=Ts.createElement(_s,{is:Ss.is}):(va=Ts.createElement(_s),_s==="select"&&(Ts=va,Ss.multiple?Ts.multiple=!0:Ss.size&&(Ts.size=Ss.size))):va=Ts.createElementNS(va,_s),va[wf]=_a,va[xf]=Ss,Bi$1(va,_a,!1,!1),_a.stateNode=va,Ts=wb(_s,Ss),_s){case"dialog":G$3("cancel",va),G$3("close",va),Ms=Ss;break;case"iframe":case"object":case"embed":G$3("load",va),Ms=Ss;break;case"video":case"audio":for(Ms=0;Ms<Xe$1.length;Ms++)G$3(Xe$1[Ms],va);Ms=Ss;break;case"source":G$3("error",va),Ms=Ss;break;case"img":case"image":case"link":G$3("error",va),G$3("load",va),Ms=Ss;break;case"details":G$3("toggle",va),Ms=Ss;break;case"input":Za(va,Ss),Ms=Ya(va,Ss),G$3("invalid",va);break;case"option":Ms=eb(va,Ss);break;case"select":va._wrapperState={wasMultiple:!!Ss.multiple},Ms=m$5({},Ss,{value:void 0}),G$3("invalid",va);break;case"textarea":hb(va,Ss),Ms=gb(va,Ss),G$3("invalid",va);break;default:Ms=Ss}vb(_s,Ms);var Bs=Ms;for(Cs in Bs)if(Bs.hasOwnProperty(Cs)){var Ps=Bs[Cs];Cs==="style"?tb(va,Ps):Cs==="dangerouslySetInnerHTML"?(Ps=Ps?Ps.__html:void 0,Ps!=null&&ob(va,Ps)):Cs==="children"?typeof Ps=="string"?(_s!=="textarea"||Ps!=="")&&pb(va,Ps):typeof Ps=="number"&&pb(va,""+Ps):Cs!=="suppressContentEditableWarning"&&Cs!=="suppressHydrationWarning"&&Cs!=="autoFocus"&&(ca$1.hasOwnProperty(Cs)?Ps!=null&&Cs==="onScroll"&&G$3("scroll",va):Ps!=null&&qa(va,Cs,Ps,Ts))}switch(_s){case"input":Va(va),cb(va,Ss,!1);break;case"textarea":Va(va),jb(va);break;case"option":Ss.value!=null&&va.setAttribute("value",""+Sa(Ss.value));break;case"select":va.multiple=!!Ss.multiple,Cs=Ss.value,Cs!=null?fb(va,!!Ss.multiple,Cs,!1):Ss.defaultValue!=null&&fb(va,!!Ss.multiple,Ss.defaultValue,!0);break;default:typeof Ms.onClick=="function"&&(va.onclick=jf)}mf(_s,Ss)&&(_a.flags|=4)}_a.ref!==null&&(_a.flags|=128)}return null;case 6:if(va&&_a.stateNode!=null)Ei$1(va,_a,va.memoizedProps,Ss);else{if(typeof Ss!="string"&&_a.stateNode===null)throw Error(y$5(166));_s=dh(ch.current),dh(ah.current),rh(_a)?(Ss=_a.stateNode,_s=_a.memoizedProps,Ss[wf]=_a,Ss.nodeValue!==_s&&(_a.flags|=4)):(Ss=(_s.nodeType===9?_s:_s.ownerDocument).createTextNode(Ss),Ss[wf]=_a,_a.stateNode=Ss)}return null;case 13:return H$3(P$3),Ss=_a.memoizedState,(_a.flags&64)!==0?(_a.lanes=_s,_a):(Ss=Ss!==null,_s=!1,va===null?_a.memoizedProps.fallback!==void 0&&rh(_a):_s=va.memoizedState!==null,Ss&&!_s&&(_a.mode&2)!==0&&(va===null&&_a.memoizedProps.unstable_avoidThisFallback!==!0||(P$3.current&1)!==0?V$2===0&&(V$2=3):((V$2===0||V$2===3)&&(V$2=4),U$1===null||(Dg&134217727)===0&&(Hi$1&134217727)===0||Ii$1(U$1,W$3))),(Ss||_s)&&(_a.flags|=4),null);case 4:return fh(),Ci$1(_a),va===null&&cf(_a.stateNode.containerInfo),null;case 10:return rg(_a),null;case 17:return Ff(_a.type)&&Gf(),null;case 19:if(H$3(P$3),Ss=_a.memoizedState,Ss===null)return null;if(Cs=(_a.flags&64)!==0,Ts=Ss.rendering,Ts===null)if(Cs)Fi$1(Ss,!1);else{if(V$2!==0||va!==null&&(va.flags&64)!==0)for(va=_a.child;va!==null;){if(Ts=ih(va),Ts!==null){for(_a.flags|=64,Fi$1(Ss,!1),Cs=Ts.updateQueue,Cs!==null&&(_a.updateQueue=Cs,_a.flags|=4),Ss.lastEffect===null&&(_a.firstEffect=null),_a.lastEffect=Ss.lastEffect,Ss=_s,_s=_a.child;_s!==null;)Cs=_s,va=Ss,Cs.flags&=2,Cs.nextEffect=null,Cs.firstEffect=null,Cs.lastEffect=null,Ts=Cs.alternate,Ts===null?(Cs.childLanes=0,Cs.lanes=va,Cs.child=null,Cs.memoizedProps=null,Cs.memoizedState=null,Cs.updateQueue=null,Cs.dependencies=null,Cs.stateNode=null):(Cs.childLanes=Ts.childLanes,Cs.lanes=Ts.lanes,Cs.child=Ts.child,Cs.memoizedProps=Ts.memoizedProps,Cs.memoizedState=Ts.memoizedState,Cs.updateQueue=Ts.updateQueue,Cs.type=Ts.type,va=Ts.dependencies,Cs.dependencies=va===null?null:{lanes:va.lanes,firstContext:va.firstContext}),_s=_s.sibling;return I$3(P$3,P$3.current&1|2),_a.child}va=va.sibling}Ss.tail!==null&&O$3()>Ji$1&&(_a.flags|=64,Cs=!0,Fi$1(Ss,!1),_a.lanes=33554432)}else{if(!Cs)if(va=ih(Ts),va!==null){if(_a.flags|=64,Cs=!0,_s=va.updateQueue,_s!==null&&(_a.updateQueue=_s,_a.flags|=4),Fi$1(Ss,!0),Ss.tail===null&&Ss.tailMode==="hidden"&&!Ts.alternate&&!lh)return _a=_a.lastEffect=Ss.lastEffect,_a!==null&&(_a.nextEffect=null),null}else 2*O$3()-Ss.renderingStartTime>Ji$1&&_s!==1073741824&&(_a.flags|=64,Cs=!0,Fi$1(Ss,!1),_a.lanes=33554432);Ss.isBackwards?(Ts.sibling=_a.child,_a.child=Ts):(_s=Ss.last,_s!==null?_s.sibling=Ts:_a.child=Ts,Ss.last=Ts)}return Ss.tail!==null?(_s=Ss.tail,Ss.rendering=_s,Ss.tail=_s.sibling,Ss.lastEffect=_a.lastEffect,Ss.renderingStartTime=O$3(),_s.sibling=null,_a=P$3.current,I$3(P$3,Cs?_a&1|2:_a&1),_s):null;case 23:case 24:return Ki$1(),va!==null&&va.memoizedState!==null!=(_a.memoizedState!==null)&&Ss.mode!=="unstable-defer-without-hiding"&&(_a.flags|=4),null}throw Error(y$5(156,_a.tag))}function Li$1(va){switch(va.tag){case 1:Ff(va.type)&&Gf();var _a=va.flags;return _a&4096?(va.flags=_a&-4097|64,va):null;case 3:if(fh(),H$3(N$3),H$3(M$2),uh(),_a=va.flags,(_a&64)!==0)throw Error(y$5(285));return va.flags=_a&-4097|64,va;case 5:return hh(va),null;case 13:return H$3(P$3),_a=va.flags,_a&4096?(va.flags=_a&-4097|64,va):null;case 19:return H$3(P$3),null;case 4:return fh(),null;case 10:return rg(va),null;case 23:case 24:return Ki$1(),null;default:return null}}function Mi$1(va,_a){try{var _s="",Ss=_a;do _s+=Qa(Ss),Ss=Ss.return;while(Ss);var Ms=_s}catch(Cs){Ms=`
Error generating stack: `+Cs.message+`
`+Cs.stack}return{value:va,source:_a,stack:Ms}}function Ni$1(va,_a){try{console.error(_a.value)}catch(_s){setTimeout(function(){throw _s})}}var Oi$1=typeof WeakMap=="function"?WeakMap:Map;function Pi$1(va,_a,_s){_s=zg(-1,_s),_s.tag=3,_s.payload={element:null};var Ss=_a.value;return _s.callback=function(){Qi$1||(Qi$1=!0,Ri$1=Ss),Ni$1(va,_a)},_s}function Si$1(va,_a,_s){_s=zg(-1,_s),_s.tag=3;var Ss=va.type.getDerivedStateFromError;if(typeof Ss=="function"){var Ms=_a.value;_s.payload=function(){return Ni$1(va,_a),Ss(Ms)}}var Cs=va.stateNode;return Cs!==null&&typeof Cs.componentDidCatch=="function"&&(_s.callback=function(){typeof Ss!="function"&&(Ti$1===null?Ti$1=new Set([this]):Ti$1.add(this),Ni$1(va,_a));var Ts=_a.stack;this.componentDidCatch(_a.value,{componentStack:Ts!==null?Ts:""})}),_s}var Ui$1=typeof WeakSet=="function"?WeakSet:Set;function Vi$1(va){var _a=va.ref;if(_a!==null)if(typeof _a=="function")try{_a(null)}catch(_s){Wi$1(va,_s)}else _a.current=null}function Xi$1(va,_a){switch(_a.tag){case 0:case 11:case 15:case 22:return;case 1:if(_a.flags&256&&va!==null){var _s=va.memoizedProps,Ss=va.memoizedState;va=_a.stateNode,_a=va.getSnapshotBeforeUpdate(_a.elementType===_a.type?_s:lg(_a.type,_s),Ss),va.__reactInternalSnapshotBeforeUpdate=_a}return;case 3:_a.flags&256&&qf(_a.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y$5(163))}function Yi$1(va,_a,_s){switch(_s.tag){case 0:case 11:case 15:case 22:if(_a=_s.updateQueue,_a=_a!==null?_a.lastEffect:null,_a!==null){va=_a=_a.next;do{if((va.tag&3)===3){var Ss=va.create;va.destroy=Ss()}va=va.next}while(va!==_a)}if(_a=_s.updateQueue,_a=_a!==null?_a.lastEffect:null,_a!==null){va=_a=_a.next;do{var Ms=va;Ss=Ms.next,Ms=Ms.tag,(Ms&4)!==0&&(Ms&1)!==0&&(Zi$1(_s,va),$i$1(_s,va)),va=Ss}while(va!==_a)}return;case 1:va=_s.stateNode,_s.flags&4&&(_a===null?va.componentDidMount():(Ss=_s.elementType===_s.type?_a.memoizedProps:lg(_s.type,_a.memoizedProps),va.componentDidUpdate(Ss,_a.memoizedState,va.__reactInternalSnapshotBeforeUpdate))),_a=_s.updateQueue,_a!==null&&Eg(_s,_a,va);return;case 3:if(_a=_s.updateQueue,_a!==null){if(va=null,_s.child!==null)switch(_s.child.tag){case 5:va=_s.child.stateNode;break;case 1:va=_s.child.stateNode}Eg(_s,_a,va)}return;case 5:va=_s.stateNode,_a===null&&_s.flags&4&&mf(_s.type,_s.memoizedProps)&&va.focus();return;case 6:return;case 4:return;case 12:return;case 13:_s.memoizedState===null&&(_s=_s.alternate,_s!==null&&(_s=_s.memoizedState,_s!==null&&(_s=_s.dehydrated,_s!==null&&Cc(_s))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y$5(163))}function aj(va,_a){for(var _s=va;;){if(_s.tag===5){var Ss=_s.stateNode;if(_a)Ss=Ss.style,typeof Ss.setProperty=="function"?Ss.setProperty("display","none","important"):Ss.display="none";else{Ss=_s.stateNode;var Ms=_s.memoizedProps.style;Ms=Ms!=null&&Ms.hasOwnProperty("display")?Ms.display:null,Ss.style.display=sb("display",Ms)}}else if(_s.tag===6)_s.stateNode.nodeValue=_a?"":_s.memoizedProps;else if((_s.tag!==23&&_s.tag!==24||_s.memoizedState===null||_s===va)&&_s.child!==null){_s.child.return=_s,_s=_s.child;continue}if(_s===va)break;for(;_s.sibling===null;){if(_s.return===null||_s.return===va)return;_s=_s.return}_s.sibling.return=_s.return,_s=_s.sibling}}function bj(va,_a){if(Mf&&typeof Mf.onCommitFiberUnmount=="function")try{Mf.onCommitFiberUnmount(Lf,_a)}catch{}switch(_a.tag){case 0:case 11:case 14:case 15:case 22:if(va=_a.updateQueue,va!==null&&(va=va.lastEffect,va!==null)){var _s=va=va.next;do{var Ss=_s,Ms=Ss.destroy;if(Ss=Ss.tag,Ms!==void 0)if((Ss&4)!==0)Zi$1(_a,_s);else{Ss=_a;try{Ms()}catch(Cs){Wi$1(Ss,Cs)}}_s=_s.next}while(_s!==va)}break;case 1:if(Vi$1(_a),va=_a.stateNode,typeof va.componentWillUnmount=="function")try{va.props=_a.memoizedProps,va.state=_a.memoizedState,va.componentWillUnmount()}catch(Cs){Wi$1(_a,Cs)}break;case 5:Vi$1(_a);break;case 4:cj(va,_a)}}function dj(va){va.alternate=null,va.child=null,va.dependencies=null,va.firstEffect=null,va.lastEffect=null,va.memoizedProps=null,va.memoizedState=null,va.pendingProps=null,va.return=null,va.updateQueue=null}function ej(va){return va.tag===5||va.tag===3||va.tag===4}function fj(va){e:{for(var _a=va.return;_a!==null;){if(ej(_a))break e;_a=_a.return}throw Error(y$5(160))}var _s=_a;switch(_a=_s.stateNode,_s.tag){case 5:var Ss=!1;break;case 3:_a=_a.containerInfo,Ss=!0;break;case 4:_a=_a.containerInfo,Ss=!0;break;default:throw Error(y$5(161))}_s.flags&16&&(pb(_a,""),_s.flags&=-17);e:t:for(_s=va;;){for(;_s.sibling===null;){if(_s.return===null||ej(_s.return)){_s=null;break e}_s=_s.return}for(_s.sibling.return=_s.return,_s=_s.sibling;_s.tag!==5&&_s.tag!==6&&_s.tag!==18;){if(_s.flags&2||_s.child===null||_s.tag===4)continue t;_s.child.return=_s,_s=_s.child}if(!(_s.flags&2)){_s=_s.stateNode;break e}}Ss?gj(va,_s,_a):hj(va,_s,_a)}function gj(va,_a,_s){var Ss=va.tag,Ms=Ss===5||Ss===6;if(Ms)va=Ms?va.stateNode:va.stateNode.instance,_a?_s.nodeType===8?_s.parentNode.insertBefore(va,_a):_s.insertBefore(va,_a):(_s.nodeType===8?(_a=_s.parentNode,_a.insertBefore(va,_s)):(_a=_s,_a.appendChild(va)),_s=_s._reactRootContainer,_s!=null||_a.onclick!==null||(_a.onclick=jf));else if(Ss!==4&&(va=va.child,va!==null))for(gj(va,_a,_s),va=va.sibling;va!==null;)gj(va,_a,_s),va=va.sibling}function hj(va,_a,_s){var Ss=va.tag,Ms=Ss===5||Ss===6;if(Ms)va=Ms?va.stateNode:va.stateNode.instance,_a?_s.insertBefore(va,_a):_s.appendChild(va);else if(Ss!==4&&(va=va.child,va!==null))for(hj(va,_a,_s),va=va.sibling;va!==null;)hj(va,_a,_s),va=va.sibling}function cj(va,_a){for(var _s=_a,Ss=!1,Ms,Cs;;){if(!Ss){Ss=_s.return;e:for(;;){if(Ss===null)throw Error(y$5(160));switch(Ms=Ss.stateNode,Ss.tag){case 5:Cs=!1;break e;case 3:Ms=Ms.containerInfo,Cs=!0;break e;case 4:Ms=Ms.containerInfo,Cs=!0;break e}Ss=Ss.return}Ss=!0}if(_s.tag===5||_s.tag===6){e:for(var Ts=va,Bs=_s,Ps=Bs;;)if(bj(Ts,Ps),Ps.child!==null&&Ps.tag!==4)Ps.child.return=Ps,Ps=Ps.child;else{if(Ps===Bs)break e;for(;Ps.sibling===null;){if(Ps.return===null||Ps.return===Bs)break e;Ps=Ps.return}Ps.sibling.return=Ps.return,Ps=Ps.sibling}Cs?(Ts=Ms,Bs=_s.stateNode,Ts.nodeType===8?Ts.parentNode.removeChild(Bs):Ts.removeChild(Bs)):Ms.removeChild(_s.stateNode)}else if(_s.tag===4){if(_s.child!==null){Ms=_s.stateNode.containerInfo,Cs=!0,_s.child.return=_s,_s=_s.child;continue}}else if(bj(va,_s),_s.child!==null){_s.child.return=_s,_s=_s.child;continue}if(_s===_a)break;for(;_s.sibling===null;){if(_s.return===null||_s.return===_a)return;_s=_s.return,_s.tag===4&&(Ss=!1)}_s.sibling.return=_s.return,_s=_s.sibling}}function ij(va,_a){switch(_a.tag){case 0:case 11:case 14:case 15:case 22:var _s=_a.updateQueue;if(_s=_s!==null?_s.lastEffect:null,_s!==null){var Ss=_s=_s.next;do(Ss.tag&3)===3&&(va=Ss.destroy,Ss.destroy=void 0,va!==void 0&&va()),Ss=Ss.next;while(Ss!==_s)}return;case 1:return;case 5:if(_s=_a.stateNode,_s!=null){Ss=_a.memoizedProps;var Ms=va!==null?va.memoizedProps:Ss;va=_a.type;var Cs=_a.updateQueue;if(_a.updateQueue=null,Cs!==null){for(_s[xf]=Ss,va==="input"&&Ss.type==="radio"&&Ss.name!=null&&$a(_s,Ss),wb(va,Ms),_a=wb(va,Ss),Ms=0;Ms<Cs.length;Ms+=2){var Ts=Cs[Ms],Bs=Cs[Ms+1];Ts==="style"?tb(_s,Bs):Ts==="dangerouslySetInnerHTML"?ob(_s,Bs):Ts==="children"?pb(_s,Bs):qa(_s,Ts,Bs,_a)}switch(va){case"input":ab(_s,Ss);break;case"textarea":ib(_s,Ss);break;case"select":va=_s._wrapperState.wasMultiple,_s._wrapperState.wasMultiple=!!Ss.multiple,Cs=Ss.value,Cs!=null?fb(_s,!!Ss.multiple,Cs,!1):va!==!!Ss.multiple&&(Ss.defaultValue!=null?fb(_s,!!Ss.multiple,Ss.defaultValue,!0):fb(_s,!!Ss.multiple,Ss.multiple?[]:"",!1))}}}return;case 6:if(_a.stateNode===null)throw Error(y$5(162));_a.stateNode.nodeValue=_a.memoizedProps;return;case 3:_s=_a.stateNode,_s.hydrate&&(_s.hydrate=!1,Cc(_s.containerInfo));return;case 12:return;case 13:_a.memoizedState!==null&&(jj=O$3(),aj(_a.child,!0)),kj(_a);return;case 19:kj(_a);return;case 17:return;case 23:case 24:aj(_a,_a.memoizedState!==null);return}throw Error(y$5(163))}function kj(va){var _a=va.updateQueue;if(_a!==null){va.updateQueue=null;var _s=va.stateNode;_s===null&&(_s=va.stateNode=new Ui$1),_a.forEach(function(Ss){var Ms=lj.bind(null,va,Ss);_s.has(Ss)||(_s.add(Ss),Ss.then(Ms,Ms))})}}function mj(va,_a){return va!==null&&(va=va.memoizedState,va===null||va.dehydrated!==null)?(_a=_a.memoizedState,_a!==null&&_a.dehydrated===null):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X$2=0,U$1=null,Y$2=null,W$3=0,qj=0,rj=Bf(0),V$2=0,sj=null,tj=0,Dg=0,Hi$1=0,uj=0,vj=null,jj=0,Ji$1=1/0;function wj(){Ji$1=O$3()+500}var Z$2=null,Qi$1=!1,Ri$1=null,Ti$1=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return(X$2&48)!==0?O$3():Fj!==-1?Fj:Fj=O$3()}function Ig(va){if(va=va.mode,(va&2)===0)return 1;if((va&4)===0)return eg()===99?1:2;if(Gj===0&&(Gj=tj),kg.transition!==0){Hj!==0&&(Hj=vj!==null?vj.pendingLanes:0),va=Gj;var _a=4186112&~Hj;return _a&=-_a,_a===0&&(va=4186112&~va,_a=va&-va,_a===0&&(_a=8192)),_a}return va=eg(),(X$2&4)!==0&&va===98?va=Xc(12,Gj):(va=Sc(va),va=Xc(va,Gj)),va}function Jg(va,_a,_s){if(50<Dj)throw Dj=0,Ej=null,Error(y$5(185));if(va=Kj(va,_a),va===null)return null;$c(va,_a,_s),va===U$1&&(Hi$1|=_a,V$2===4&&Ii$1(va,W$3));var Ss=eg();_a===1?(X$2&8)!==0&&(X$2&48)===0?Lj(va):(Mj(va,_s),X$2===0&&(wj(),ig())):((X$2&4)===0||Ss!==98&&Ss!==99||(Cj===null?Cj=new Set([va]):Cj.add(va)),Mj(va,_s)),vj=va}function Kj(va,_a){va.lanes|=_a;var _s=va.alternate;for(_s!==null&&(_s.lanes|=_a),_s=va,va=va.return;va!==null;)va.childLanes|=_a,_s=va.alternate,_s!==null&&(_s.childLanes|=_a),_s=va,va=va.return;return _s.tag===3?_s.stateNode:null}function Mj(va,_a){for(var _s=va.callbackNode,Ss=va.suspendedLanes,Ms=va.pingedLanes,Cs=va.expirationTimes,Ts=va.pendingLanes;0<Ts;){var Bs=31-Vc(Ts),Ps=1<<Bs,Ls=Cs[Bs];if(Ls===-1){if((Ps&Ss)===0||(Ps&Ms)!==0){Ls=_a,Rc(Ps);var Rs=F$3;Cs[Bs]=10<=Rs?Ls+250:6<=Rs?Ls+5e3:-1}}else Ls<=_a&&(va.expiredLanes|=Ps);Ts&=~Ps}if(Ss=Uc(va,va===U$1?W$3:0),_a=F$3,Ss===0)_s!==null&&(_s!==Zf&&Pf(_s),va.callbackNode=null,va.callbackPriority=0);else{if(_s!==null){if(va.callbackPriority===_a)return;_s!==Zf&&Pf(_s)}_a===15?(_s=Lj.bind(null,va),ag===null?(ag=[_s],bg=Of(Uf,jg)):ag.push(_s),_s=Zf):_a===14?_s=hg(99,Lj.bind(null,va)):(_s=Tc(_a),_s=hg(_s,Nj.bind(null,va))),va.callbackPriority=_a,va.callbackNode=_s}}function Nj(va){if(Fj=-1,Hj=Gj=0,(X$2&48)!==0)throw Error(y$5(327));var _a=va.callbackNode;if(Oj()&&va.callbackNode!==_a)return null;var _s=Uc(va,va===U$1?W$3:0);if(_s===0)return null;var Ss=_s,Ms=X$2;X$2|=16;var Cs=Pj();(U$1!==va||W$3!==Ss)&&(wj(),Qj(va,Ss));do try{Rj();break}catch(Bs){Sj(va,Bs)}while(1);if(qg(),oj.current=Cs,X$2=Ms,Y$2!==null?Ss=0:(U$1=null,W$3=0,Ss=V$2),(tj&Hi$1)!==0)Qj(va,0);else if(Ss!==0){if(Ss===2&&(X$2|=64,va.hydrate&&(va.hydrate=!1,qf(va.containerInfo)),_s=Wc(va),_s!==0&&(Ss=Tj(va,_s))),Ss===1)throw _a=sj,Qj(va,0),Ii$1(va,_s),Mj(va,O$3()),_a;switch(va.finishedWork=va.current.alternate,va.finishedLanes=_s,Ss){case 0:case 1:throw Error(y$5(345));case 2:Uj(va);break;case 3:if(Ii$1(va,_s),(_s&62914560)===_s&&(Ss=jj+500-O$3(),10<Ss)){if(Uc(va,0)!==0)break;if(Ms=va.suspendedLanes,(Ms&_s)!==_s){Hg(),va.pingedLanes|=va.suspendedLanes&Ms;break}va.timeoutHandle=of(Uj.bind(null,va),Ss);break}Uj(va);break;case 4:if(Ii$1(va,_s),(_s&4186112)===_s)break;for(Ss=va.eventTimes,Ms=-1;0<_s;){var Ts=31-Vc(_s);Cs=1<<Ts,Ts=Ss[Ts],Ts>Ms&&(Ms=Ts),_s&=~Cs}if(_s=Ms,_s=O$3()-_s,_s=(120>_s?120:480>_s?480:1080>_s?1080:1920>_s?1920:3e3>_s?3e3:4320>_s?4320:1960*nj(_s/1960))-_s,10<_s){va.timeoutHandle=of(Uj.bind(null,va),_s);break}Uj(va);break;case 5:Uj(va);break;default:throw Error(y$5(329))}}return Mj(va,O$3()),va.callbackNode===_a?Nj.bind(null,va):null}function Ii$1(va,_a){for(_a&=~uj,_a&=~Hi$1,va.suspendedLanes|=_a,va.pingedLanes&=~_a,va=va.expirationTimes;0<_a;){var _s=31-Vc(_a),Ss=1<<_s;va[_s]=-1,_a&=~Ss}}function Lj(va){if((X$2&48)!==0)throw Error(y$5(327));if(Oj(),va===U$1&&(va.expiredLanes&W$3)!==0){var _a=W$3,_s=Tj(va,_a);(tj&Hi$1)!==0&&(_a=Uc(va,_a),_s=Tj(va,_a))}else _a=Uc(va,0),_s=Tj(va,_a);if(va.tag!==0&&_s===2&&(X$2|=64,va.hydrate&&(va.hydrate=!1,qf(va.containerInfo)),_a=Wc(va),_a!==0&&(_s=Tj(va,_a))),_s===1)throw _s=sj,Qj(va,0),Ii$1(va,_a),Mj(va,O$3()),_s;return va.finishedWork=va.current.alternate,va.finishedLanes=_a,Uj(va),Mj(va,O$3()),null}function Vj(){if(Cj!==null){var va=Cj;Cj=null,va.forEach(function(_a){_a.expiredLanes|=24&_a.pendingLanes,Mj(_a,O$3())})}ig()}function Wj(va,_a){var _s=X$2;X$2|=1;try{return va(_a)}finally{X$2=_s,X$2===0&&(wj(),ig())}}function Xj(va,_a){var _s=X$2;X$2&=-2,X$2|=8;try{return va(_a)}finally{X$2=_s,X$2===0&&(wj(),ig())}}function ni$1(va,_a){I$3(rj,qj),qj|=_a,tj|=_a}function Ki$1(){qj=rj.current,H$3(rj)}function Qj(va,_a){va.finishedWork=null,va.finishedLanes=0;var _s=va.timeoutHandle;if(_s!==-1&&(va.timeoutHandle=-1,pf(_s)),Y$2!==null)for(_s=Y$2.return;_s!==null;){var Ss=_s;switch(Ss.tag){case 1:Ss=Ss.type.childContextTypes,Ss!=null&&Gf();break;case 3:fh(),H$3(N$3),H$3(M$2),uh();break;case 5:hh(Ss);break;case 4:fh();break;case 13:H$3(P$3);break;case 19:H$3(P$3);break;case 10:rg(Ss);break;case 23:case 24:Ki$1()}_s=_s.return}U$1=va,Y$2=Tg(va.current,null),W$3=qj=tj=_a,V$2=0,sj=null,uj=Hi$1=Dg=0}function Sj(va,_a){do{var _s=Y$2;try{if(qg(),vh.current=Gh,yh){for(var Ss=R$3.memoizedState;Ss!==null;){var Ms=Ss.queue;Ms!==null&&(Ms.pending=null),Ss=Ss.next}yh=!1}if(xh=0,T$1=S$2=R$3=null,zh=!1,pj.current=null,_s===null||_s.return===null){V$2=1,sj=_a,Y$2=null;break}e:{var Cs=va,Ts=_s.return,Bs=_s,Ps=_a;if(_a=W$3,Bs.flags|=2048,Bs.firstEffect=Bs.lastEffect=null,Ps!==null&&typeof Ps=="object"&&typeof Ps.then=="function"){var Ls=Ps;if((Bs.mode&2)===0){var Rs=Bs.alternate;Rs?(Bs.updateQueue=Rs.updateQueue,Bs.memoizedState=Rs.memoizedState,Bs.lanes=Rs.lanes):(Bs.updateQueue=null,Bs.memoizedState=null)}var $s=(P$3.current&1)!==0,Fs=Ts;do{var Os;if(Os=Fs.tag===13){var Gs=Fs.memoizedState;if(Gs!==null)Os=Gs.dehydrated!==null;else{var Ns=Fs.memoizedProps;Os=Ns.fallback===void 0?!1:Ns.unstable_avoidThisFallback!==!0?!0:!$s}}if(Os){var Vs=Fs.updateQueue;if(Vs===null){var Ds=new Set;Ds.add(Ls),Fs.updateQueue=Ds}else Vs.add(Ls);if((Fs.mode&2)===0){if(Fs.flags|=64,Bs.flags|=16384,Bs.flags&=-2981,Bs.tag===1)if(Bs.alternate===null)Bs.tag=17;else{var ks=zg(-1,1);ks.tag=2,Ag(Bs,ks)}Bs.lanes|=1;break e}Ps=void 0,Bs=_a;var Us=Cs.pingCache;if(Us===null?(Us=Cs.pingCache=new Oi$1,Ps=new Set,Us.set(Ls,Ps)):(Ps=Us.get(Ls),Ps===void 0&&(Ps=new Set,Us.set(Ls,Ps))),!Ps.has(Bs)){Ps.add(Bs);var zs=Yj.bind(null,Cs,Ls,Bs);Ls.then(zs,zs)}Fs.flags|=4096,Fs.lanes=_a;break e}Fs=Fs.return}while(Fs!==null);Ps=Error((Ra(Bs.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}V$2!==5&&(V$2=2),Ps=Mi$1(Ps,Bs),Fs=Ts;do{switch(Fs.tag){case 3:Cs=Ps,Fs.flags|=4096,_a&=-_a,Fs.lanes|=_a;var Ws=Pi$1(Fs,Cs,_a);Bg(Fs,Ws);break e;case 1:Cs=Ps;var qs=Fs.type,Zs=Fs.stateNode;if((Fs.flags&64)===0&&(typeof qs.getDerivedStateFromError=="function"||Zs!==null&&typeof Zs.componentDidCatch=="function"&&(Ti$1===null||!Ti$1.has(Zs)))){Fs.flags|=4096,_a&=-_a,Fs.lanes|=_a;var el=Si$1(Fs,Cs,_a);Bg(Fs,el);break e}}Fs=Fs.return}while(Fs!==null)}Zj(_s)}catch(Js){_a=Js,Y$2===_s&&_s!==null&&(Y$2=_s=_s.return);continue}break}while(1)}function Pj(){var va=oj.current;return oj.current=Gh,va===null?Gh:va}function Tj(va,_a){var _s=X$2;X$2|=16;var Ss=Pj();U$1===va&&W$3===_a||Qj(va,_a);do try{ak();break}catch(Ms){Sj(va,Ms)}while(1);if(qg(),X$2=_s,oj.current=Ss,Y$2!==null)throw Error(y$5(261));return U$1=null,W$3=0,V$2}function ak(){for(;Y$2!==null;)bk(Y$2)}function Rj(){for(;Y$2!==null&&!Qf();)bk(Y$2)}function bk(va){var _a=ck(va.alternate,va,qj);va.memoizedProps=va.pendingProps,_a===null?Zj(va):Y$2=_a,pj.current=null}function Zj(va){var _a=va;do{var _s=_a.alternate;if(va=_a.return,(_a.flags&2048)===0){if(_s=Gi$1(_s,_a,qj),_s!==null){Y$2=_s;return}if(_s=_a,_s.tag!==24&&_s.tag!==23||_s.memoizedState===null||(qj&1073741824)!==0||(_s.mode&4)===0){for(var Ss=0,Ms=_s.child;Ms!==null;)Ss|=Ms.lanes|Ms.childLanes,Ms=Ms.sibling;_s.childLanes=Ss}va!==null&&(va.flags&2048)===0&&(va.firstEffect===null&&(va.firstEffect=_a.firstEffect),_a.lastEffect!==null&&(va.lastEffect!==null&&(va.lastEffect.nextEffect=_a.firstEffect),va.lastEffect=_a.lastEffect),1<_a.flags&&(va.lastEffect!==null?va.lastEffect.nextEffect=_a:va.firstEffect=_a,va.lastEffect=_a))}else{if(_s=Li$1(_a),_s!==null){_s.flags&=2047,Y$2=_s;return}va!==null&&(va.firstEffect=va.lastEffect=null,va.flags|=2048)}if(_a=_a.sibling,_a!==null){Y$2=_a;return}Y$2=_a=va}while(_a!==null);V$2===0&&(V$2=5)}function Uj(va){var _a=eg();return gg(99,dk.bind(null,va,_a)),null}function dk(va,_a){do Oj();while(yj!==null);if((X$2&48)!==0)throw Error(y$5(327));var _s=va.finishedWork;if(_s===null)return null;if(va.finishedWork=null,va.finishedLanes=0,_s===va.current)throw Error(y$5(177));va.callbackNode=null;var Ss=_s.lanes|_s.childLanes,Ms=Ss,Cs=va.pendingLanes&~Ms;va.pendingLanes=Ms,va.suspendedLanes=0,va.pingedLanes=0,va.expiredLanes&=Ms,va.mutableReadLanes&=Ms,va.entangledLanes&=Ms,Ms=va.entanglements;for(var Ts=va.eventTimes,Bs=va.expirationTimes;0<Cs;){var Ps=31-Vc(Cs),Ls=1<<Ps;Ms[Ps]=0,Ts[Ps]=-1,Bs[Ps]=-1,Cs&=~Ls}if(Cj!==null&&(Ss&24)===0&&Cj.has(va)&&Cj.delete(va),va===U$1&&(Y$2=U$1=null,W$3=0),1<_s.flags?_s.lastEffect!==null?(_s.lastEffect.nextEffect=_s,Ss=_s.firstEffect):Ss=_s:Ss=_s.firstEffect,Ss!==null){if(Ms=X$2,X$2|=32,pj.current=null,kf=fd,Ts=Ne$1(),Oe$1(Ts)){if("selectionStart"in Ts)Bs={start:Ts.selectionStart,end:Ts.selectionEnd};else e:if(Bs=(Bs=Ts.ownerDocument)&&Bs.defaultView||window,(Ls=Bs.getSelection&&Bs.getSelection())&&Ls.rangeCount!==0){Bs=Ls.anchorNode,Cs=Ls.anchorOffset,Ps=Ls.focusNode,Ls=Ls.focusOffset;try{Bs.nodeType,Ps.nodeType}catch{Bs=null;break e}var Rs=0,$s=-1,Fs=-1,Os=0,Gs=0,Ns=Ts,Vs=null;t:for(;;){for(var Ds;Ns!==Bs||Cs!==0&&Ns.nodeType!==3||($s=Rs+Cs),Ns!==Ps||Ls!==0&&Ns.nodeType!==3||(Fs=Rs+Ls),Ns.nodeType===3&&(Rs+=Ns.nodeValue.length),(Ds=Ns.firstChild)!==null;)Vs=Ns,Ns=Ds;for(;;){if(Ns===Ts)break t;if(Vs===Bs&&++Os===Cs&&($s=Rs),Vs===Ps&&++Gs===Ls&&(Fs=Rs),(Ds=Ns.nextSibling)!==null)break;Ns=Vs,Vs=Ns.parentNode}Ns=Ds}Bs=$s===-1||Fs===-1?null:{start:$s,end:Fs}}else Bs=null;Bs=Bs||{start:0,end:0}}else Bs=null;lf={focusedElem:Ts,selectionRange:Bs},fd=!1,Ij=null,Jj=!1,Z$2=Ss;do try{ek()}catch(Js){if(Z$2===null)throw Error(y$5(330));Wi$1(Z$2,Js),Z$2=Z$2.nextEffect}while(Z$2!==null);Ij=null,Z$2=Ss;do try{for(Ts=va;Z$2!==null;){var ks=Z$2.flags;if(ks&16&&pb(Z$2.stateNode,""),ks&128){var Us=Z$2.alternate;if(Us!==null){var zs=Us.ref;zs!==null&&(typeof zs=="function"?zs(null):zs.current=null)}}switch(ks&1038){case 2:fj(Z$2),Z$2.flags&=-3;break;case 6:fj(Z$2),Z$2.flags&=-3,ij(Z$2.alternate,Z$2);break;case 1024:Z$2.flags&=-1025;break;case 1028:Z$2.flags&=-1025,ij(Z$2.alternate,Z$2);break;case 4:ij(Z$2.alternate,Z$2);break;case 8:Bs=Z$2,cj(Ts,Bs);var Ws=Bs.alternate;dj(Bs),Ws!==null&&dj(Ws)}Z$2=Z$2.nextEffect}}catch(Js){if(Z$2===null)throw Error(y$5(330));Wi$1(Z$2,Js),Z$2=Z$2.nextEffect}while(Z$2!==null);if(zs=lf,Us=Ne$1(),ks=zs.focusedElem,Ts=zs.selectionRange,Us!==ks&&ks&&ks.ownerDocument&&Me$1(ks.ownerDocument.documentElement,ks)){for(Ts!==null&&Oe$1(ks)&&(Us=Ts.start,zs=Ts.end,zs===void 0&&(zs=Us),"selectionStart"in ks?(ks.selectionStart=Us,ks.selectionEnd=Math.min(zs,ks.value.length)):(zs=(Us=ks.ownerDocument||document)&&Us.defaultView||window,zs.getSelection&&(zs=zs.getSelection(),Bs=ks.textContent.length,Ws=Math.min(Ts.start,Bs),Ts=Ts.end===void 0?Ws:Math.min(Ts.end,Bs),!zs.extend&&Ws>Ts&&(Bs=Ts,Ts=Ws,Ws=Bs),Bs=Le$1(ks,Ws),Cs=Le$1(ks,Ts),Bs&&Cs&&(zs.rangeCount!==1||zs.anchorNode!==Bs.node||zs.anchorOffset!==Bs.offset||zs.focusNode!==Cs.node||zs.focusOffset!==Cs.offset)&&(Us=Us.createRange(),Us.setStart(Bs.node,Bs.offset),zs.removeAllRanges(),Ws>Ts?(zs.addRange(Us),zs.extend(Cs.node,Cs.offset)):(Us.setEnd(Cs.node,Cs.offset),zs.addRange(Us)))))),Us=[],zs=ks;zs=zs.parentNode;)zs.nodeType===1&&Us.push({element:zs,left:zs.scrollLeft,top:zs.scrollTop});for(typeof ks.focus=="function"&&ks.focus(),ks=0;ks<Us.length;ks++)zs=Us[ks],zs.element.scrollLeft=zs.left,zs.element.scrollTop=zs.top}fd=!!kf,lf=kf=null,va.current=_s,Z$2=Ss;do try{for(ks=va;Z$2!==null;){var qs=Z$2.flags;if(qs&36&&Yi$1(ks,Z$2.alternate,Z$2),qs&128){Us=void 0;var Zs=Z$2.ref;if(Zs!==null){var el=Z$2.stateNode;switch(Z$2.tag){case 5:Us=el;break;default:Us=el}typeof Zs=="function"?Zs(Us):Zs.current=Us}}Z$2=Z$2.nextEffect}}catch(Js){if(Z$2===null)throw Error(y$5(330));Wi$1(Z$2,Js),Z$2=Z$2.nextEffect}while(Z$2!==null);Z$2=null,$f(),X$2=Ms}else va.current=_s;if(xj)xj=!1,yj=va,zj=_a;else for(Z$2=Ss;Z$2!==null;)_a=Z$2.nextEffect,Z$2.nextEffect=null,Z$2.flags&8&&(qs=Z$2,qs.sibling=null,qs.stateNode=null),Z$2=_a;if(Ss=va.pendingLanes,Ss===0&&(Ti$1=null),Ss===1?va===Ej?Dj++:(Dj=0,Ej=va):Dj=0,_s=_s.stateNode,Mf&&typeof Mf.onCommitFiberRoot=="function")try{Mf.onCommitFiberRoot(Lf,_s,void 0,(_s.current.flags&64)===64)}catch{}if(Mj(va,O$3()),Qi$1)throw Qi$1=!1,va=Ri$1,Ri$1=null,va;return(X$2&8)!==0||ig(),null}function ek(){for(;Z$2!==null;){var va=Z$2.alternate;Jj||Ij===null||((Z$2.flags&8)!==0?dc(Z$2,Ij)&&(Jj=!0):Z$2.tag===13&&mj(va,Z$2)&&dc(Z$2,Ij)&&(Jj=!0));var _a=Z$2.flags;(_a&256)!==0&&Xi$1(va,Z$2),(_a&512)===0||xj||(xj=!0,hg(97,function(){return Oj(),null})),Z$2=Z$2.nextEffect}}function Oj(){if(zj!==90){var va=97<zj?97:zj;return zj=90,gg(va,fk)}return!1}function $i$1(va,_a){Aj.push(_a,va),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function Zi$1(va,_a){Bj.push(_a,va),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function fk(){if(yj===null)return!1;var va=yj;if(yj=null,(X$2&48)!==0)throw Error(y$5(331));var _a=X$2;X$2|=32;var _s=Bj;Bj=[];for(var Ss=0;Ss<_s.length;Ss+=2){var Ms=_s[Ss],Cs=_s[Ss+1],Ts=Ms.destroy;if(Ms.destroy=void 0,typeof Ts=="function")try{Ts()}catch(Ps){if(Cs===null)throw Error(y$5(330));Wi$1(Cs,Ps)}}for(_s=Aj,Aj=[],Ss=0;Ss<_s.length;Ss+=2){Ms=_s[Ss],Cs=_s[Ss+1];try{var Bs=Ms.create;Ms.destroy=Bs()}catch(Ps){if(Cs===null)throw Error(y$5(330));Wi$1(Cs,Ps)}}for(Bs=va.current.firstEffect;Bs!==null;)va=Bs.nextEffect,Bs.nextEffect=null,Bs.flags&8&&(Bs.sibling=null,Bs.stateNode=null),Bs=va;return X$2=_a,ig(),!0}function gk(va,_a,_s){_a=Mi$1(_s,_a),_a=Pi$1(va,_a,1),Ag(va,_a),_a=Hg(),va=Kj(va,1),va!==null&&($c(va,1,_a),Mj(va,_a))}function Wi$1(va,_a){if(va.tag===3)gk(va,va,_a);else for(var _s=va.return;_s!==null;){if(_s.tag===3){gk(_s,va,_a);break}else if(_s.tag===1){var Ss=_s.stateNode;if(typeof _s.type.getDerivedStateFromError=="function"||typeof Ss.componentDidCatch=="function"&&(Ti$1===null||!Ti$1.has(Ss))){va=Mi$1(_a,va);var Ms=Si$1(_s,va,1);if(Ag(_s,Ms),Ms=Hg(),_s=Kj(_s,1),_s!==null)$c(_s,1,Ms),Mj(_s,Ms);else if(typeof Ss.componentDidCatch=="function"&&(Ti$1===null||!Ti$1.has(Ss)))try{Ss.componentDidCatch(_a,va)}catch{}break}}_s=_s.return}}function Yj(va,_a,_s){var Ss=va.pingCache;Ss!==null&&Ss.delete(_a),_a=Hg(),va.pingedLanes|=va.suspendedLanes&_s,U$1===va&&(W$3&_s)===_s&&(V$2===4||V$2===3&&(W$3&62914560)===W$3&&500>O$3()-jj?Qj(va,0):uj|=_s),Mj(va,_a)}function lj(va,_a){var _s=va.stateNode;_s!==null&&_s.delete(_a),_a=0,_a===0&&(_a=va.mode,(_a&2)===0?_a=1:(_a&4)===0?_a=eg()===99?1:2:(Gj===0&&(Gj=tj),_a=Yc(62914560&~Gj),_a===0&&(_a=4194304))),_s=Hg(),va=Kj(va,_a),va!==null&&($c(va,_a,_s),Mj(va,_s))}var ck;ck=function(va,_a,_s){var Ss=_a.lanes;if(va!==null)if(va.memoizedProps!==_a.pendingProps||N$3.current)ug=!0;else if((_s&Ss)!==0)ug=(va.flags&16384)!==0;else{switch(ug=!1,_a.tag){case 3:ri$1(_a),sh();break;case 5:gh(_a);break;case 1:Ff(_a.type)&&Jf(_a);break;case 4:eh(_a,_a.stateNode.containerInfo);break;case 10:Ss=_a.memoizedProps.value;var Ms=_a.type._context;I$3(mg,Ms._currentValue),Ms._currentValue=Ss;break;case 13:if(_a.memoizedState!==null)return(_s&_a.child.childLanes)!==0?ti$1(va,_a,_s):(I$3(P$3,P$3.current&1),_a=hi$1(va,_a,_s),_a!==null?_a.sibling:null);I$3(P$3,P$3.current&1);break;case 19:if(Ss=(_s&_a.childLanes)!==0,(va.flags&64)!==0){if(Ss)return Ai$1(va,_a,_s);_a.flags|=64}if(Ms=_a.memoizedState,Ms!==null&&(Ms.rendering=null,Ms.tail=null,Ms.lastEffect=null),I$3(P$3,P$3.current),Ss)break;return null;case 23:case 24:return _a.lanes=0,mi$1(va,_a,_s)}return hi$1(va,_a,_s)}else ug=!1;switch(_a.lanes=0,_a.tag){case 2:if(Ss=_a.type,va!==null&&(va.alternate=null,_a.alternate=null,_a.flags|=2),va=_a.pendingProps,Ms=Ef(_a,M$2.current),tg(_a,_s),Ms=Ch(null,_a,Ss,va,Ms,_s),_a.flags|=1,typeof Ms=="object"&&Ms!==null&&typeof Ms.render=="function"&&Ms.$$typeof===void 0){if(_a.tag=1,_a.memoizedState=null,_a.updateQueue=null,Ff(Ss)){var Cs=!0;Jf(_a)}else Cs=!1;_a.memoizedState=Ms.state!==null&&Ms.state!==void 0?Ms.state:null,xg(_a);var Ts=Ss.getDerivedStateFromProps;typeof Ts=="function"&&Gg(_a,Ss,Ts,va),Ms.updater=Kg,_a.stateNode=Ms,Ms._reactInternals=_a,Og(_a,Ss,va,_s),_a=qi$1(null,_a,Ss,!0,Cs,_s)}else _a.tag=0,fi$1(null,_a,Ms,_s),_a=_a.child;return _a;case 16:Ms=_a.elementType;e:{switch(va!==null&&(va.alternate=null,_a.alternate=null,_a.flags|=2),va=_a.pendingProps,Cs=Ms._init,Ms=Cs(Ms._payload),_a.type=Ms,Cs=_a.tag=hk(Ms),va=lg(Ms,va),Cs){case 0:_a=li$1(null,_a,Ms,va,_s);break e;case 1:_a=pi$1(null,_a,Ms,va,_s);break e;case 11:_a=gi$1(null,_a,Ms,va,_s);break e;case 14:_a=ii$1(null,_a,Ms,lg(Ms.type,va),Ss,_s);break e}throw Error(y$5(306,Ms,""))}return _a;case 0:return Ss=_a.type,Ms=_a.pendingProps,Ms=_a.elementType===Ss?Ms:lg(Ss,Ms),li$1(va,_a,Ss,Ms,_s);case 1:return Ss=_a.type,Ms=_a.pendingProps,Ms=_a.elementType===Ss?Ms:lg(Ss,Ms),pi$1(va,_a,Ss,Ms,_s);case 3:if(ri$1(_a),Ss=_a.updateQueue,va===null||Ss===null)throw Error(y$5(282));if(Ss=_a.pendingProps,Ms=_a.memoizedState,Ms=Ms!==null?Ms.element:null,yg(va,_a),Cg(_a,Ss,null,_s),Ss=_a.memoizedState.element,Ss===Ms)sh(),_a=hi$1(va,_a,_s);else{if(Ms=_a.stateNode,(Cs=Ms.hydrate)&&(kh=rf(_a.stateNode.containerInfo.firstChild),jh=_a,Cs=lh=!0),Cs){if(va=Ms.mutableSourceEagerHydrationData,va!=null)for(Ms=0;Ms<va.length;Ms+=2)Cs=va[Ms],Cs._workInProgressVersionPrimary=va[Ms+1],th.push(Cs);for(_s=Zg(_a,null,Ss,_s),_a.child=_s;_s;)_s.flags=_s.flags&-3|1024,_s=_s.sibling}else fi$1(va,_a,Ss,_s),sh();_a=_a.child}return _a;case 5:return gh(_a),va===null&&ph(_a),Ss=_a.type,Ms=_a.pendingProps,Cs=va!==null?va.memoizedProps:null,Ts=Ms.children,nf(Ss,Ms)?Ts=null:Cs!==null&&nf(Ss,Cs)&&(_a.flags|=16),oi$1(va,_a),fi$1(va,_a,Ts,_s),_a.child;case 6:return va===null&&ph(_a),null;case 13:return ti$1(va,_a,_s);case 4:return eh(_a,_a.stateNode.containerInfo),Ss=_a.pendingProps,va===null?_a.child=Yg(_a,null,Ss,_s):fi$1(va,_a,Ss,_s),_a.child;case 11:return Ss=_a.type,Ms=_a.pendingProps,Ms=_a.elementType===Ss?Ms:lg(Ss,Ms),gi$1(va,_a,Ss,Ms,_s);case 7:return fi$1(va,_a,_a.pendingProps,_s),_a.child;case 8:return fi$1(va,_a,_a.pendingProps.children,_s),_a.child;case 12:return fi$1(va,_a,_a.pendingProps.children,_s),_a.child;case 10:e:{Ss=_a.type._context,Ms=_a.pendingProps,Ts=_a.memoizedProps,Cs=Ms.value;var Bs=_a.type._context;if(I$3(mg,Bs._currentValue),Bs._currentValue=Cs,Ts!==null)if(Bs=Ts.value,Cs=He$1(Bs,Cs)?0:(typeof Ss._calculateChangedBits=="function"?Ss._calculateChangedBits(Bs,Cs):1073741823)|0,Cs===0){if(Ts.children===Ms.children&&!N$3.current){_a=hi$1(va,_a,_s);break e}}else for(Bs=_a.child,Bs!==null&&(Bs.return=_a);Bs!==null;){var Ps=Bs.dependencies;if(Ps!==null){Ts=Bs.child;for(var Ls=Ps.firstContext;Ls!==null;){if(Ls.context===Ss&&(Ls.observedBits&Cs)!==0){Bs.tag===1&&(Ls=zg(-1,_s&-_s),Ls.tag=2,Ag(Bs,Ls)),Bs.lanes|=_s,Ls=Bs.alternate,Ls!==null&&(Ls.lanes|=_s),sg(Bs.return,_s),Ps.lanes|=_s;break}Ls=Ls.next}}else Ts=Bs.tag===10&&Bs.type===_a.type?null:Bs.child;if(Ts!==null)Ts.return=Bs;else for(Ts=Bs;Ts!==null;){if(Ts===_a){Ts=null;break}if(Bs=Ts.sibling,Bs!==null){Bs.return=Ts.return,Ts=Bs;break}Ts=Ts.return}Bs=Ts}fi$1(va,_a,Ms.children,_s),_a=_a.child}return _a;case 9:return Ms=_a.type,Cs=_a.pendingProps,Ss=Cs.children,tg(_a,_s),Ms=vg(Ms,Cs.unstable_observedBits),Ss=Ss(Ms),_a.flags|=1,fi$1(va,_a,Ss,_s),_a.child;case 14:return Ms=_a.type,Cs=lg(Ms,_a.pendingProps),Cs=lg(Ms.type,Cs),ii$1(va,_a,Ms,Cs,Ss,_s);case 15:return ki$1(va,_a,_a.type,_a.pendingProps,Ss,_s);case 17:return Ss=_a.type,Ms=_a.pendingProps,Ms=_a.elementType===Ss?Ms:lg(Ss,Ms),va!==null&&(va.alternate=null,_a.alternate=null,_a.flags|=2),_a.tag=1,Ff(Ss)?(va=!0,Jf(_a)):va=!1,tg(_a,_s),Mg(_a,Ss,Ms),Og(_a,Ss,Ms,_s),qi$1(null,_a,Ss,!0,va,_s);case 19:return Ai$1(va,_a,_s);case 23:return mi$1(va,_a,_s);case 24:return mi$1(va,_a,_s)}throw Error(y$5(156,_a.tag))};function ik(va,_a,_s,Ss){this.tag=va,this.key=_s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ss,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(va,_a,_s,Ss){return new ik(va,_a,_s,Ss)}function ji$1(va){return va=va.prototype,!(!va||!va.isReactComponent)}function hk(va){if(typeof va=="function")return ji$1(va)?1:0;if(va!=null){if(va=va.$$typeof,va===Aa)return 11;if(va===Da)return 14}return 2}function Tg(va,_a){var _s=va.alternate;return _s===null?(_s=nh(va.tag,_a,va.key,va.mode),_s.elementType=va.elementType,_s.type=va.type,_s.stateNode=va.stateNode,_s.alternate=va,va.alternate=_s):(_s.pendingProps=_a,_s.type=va.type,_s.flags=0,_s.nextEffect=null,_s.firstEffect=null,_s.lastEffect=null),_s.childLanes=va.childLanes,_s.lanes=va.lanes,_s.child=va.child,_s.memoizedProps=va.memoizedProps,_s.memoizedState=va.memoizedState,_s.updateQueue=va.updateQueue,_a=va.dependencies,_s.dependencies=_a===null?null:{lanes:_a.lanes,firstContext:_a.firstContext},_s.sibling=va.sibling,_s.index=va.index,_s.ref=va.ref,_s}function Vg(va,_a,_s,Ss,Ms,Cs){var Ts=2;if(Ss=va,typeof va=="function")ji$1(va)&&(Ts=1);else if(typeof va=="string")Ts=5;else e:switch(va){case ua:return Xg(_s.children,Ms,Cs,_a);case Ha:Ts=8,Ms|=16;break;case wa:Ts=8,Ms|=1;break;case xa:return va=nh(12,_s,_a,Ms|8),va.elementType=xa,va.type=xa,va.lanes=Cs,va;case Ba:return va=nh(13,_s,_a,Ms),va.type=Ba,va.elementType=Ba,va.lanes=Cs,va;case Ca:return va=nh(19,_s,_a,Ms),va.elementType=Ca,va.lanes=Cs,va;case Ia:return vi$1(_s,Ms,Cs,_a);case Ja:return va=nh(24,_s,_a,Ms),va.elementType=Ja,va.lanes=Cs,va;default:if(typeof va=="object"&&va!==null)switch(va.$$typeof){case ya:Ts=10;break e;case za:Ts=9;break e;case Aa:Ts=11;break e;case Da:Ts=14;break e;case Ea:Ts=16,Ss=null;break e;case Fa:Ts=22;break e}throw Error(y$5(130,va==null?va:typeof va,""))}return _a=nh(Ts,_s,_a,Ms),_a.elementType=va,_a.type=Ss,_a.lanes=Cs,_a}function Xg(va,_a,_s,Ss){return va=nh(7,va,Ss,_a),va.lanes=_s,va}function vi$1(va,_a,_s,Ss){return va=nh(23,va,Ss,_a),va.elementType=Ia,va.lanes=_s,va}function Ug(va,_a,_s){return va=nh(6,va,null,_a),va.lanes=_s,va}function Wg(va,_a,_s){return _a=nh(4,va.children!==null?va.children:[],va.key,_a),_a.lanes=_s,_a.stateNode={containerInfo:va.containerInfo,pendingChildren:null,implementation:va.implementation},_a}function jk(va,_a,_s){this.tag=_a,this.containerInfo=va,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=_s,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.mutableSourceEagerHydrationData=null}function kk(va,_a,_s){var Ss=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:Ss==null?null:""+Ss,children:va,containerInfo:_a,implementation:_s}}function lk(va,_a,_s,Ss){var Ms=_a.current,Cs=Hg(),Ts=Ig(Ms);e:if(_s){_s=_s._reactInternals;t:{if(Zb(_s)!==_s||_s.tag!==1)throw Error(y$5(170));var Bs=_s;do{switch(Bs.tag){case 3:Bs=Bs.stateNode.context;break t;case 1:if(Ff(Bs.type)){Bs=Bs.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Bs=Bs.return}while(Bs!==null);throw Error(y$5(171))}if(_s.tag===1){var Ps=_s.type;if(Ff(Ps)){_s=If(_s,Ps,Bs);break e}}_s=Bs}else _s=Cf;return _a.context===null?_a.context=_s:_a.pendingContext=_s,_a=zg(Cs,Ts),_a.payload={element:va},Ss=Ss===void 0?null:Ss,Ss!==null&&(_a.callback=Ss),Ag(Ms,_a),Jg(Ms,Ts,Cs),Ts}function mk(va){if(va=va.current,!va.child)return null;switch(va.child.tag){case 5:return va.child.stateNode;default:return va.child.stateNode}}function nk(va,_a){if(va=va.memoizedState,va!==null&&va.dehydrated!==null){var _s=va.retryLane;va.retryLane=_s!==0&&_s<_a?_s:_a}}function ok(va,_a){nk(va,_a),(va=va.alternate)&&nk(va,_a)}function pk(){return null}function qk(va,_a,_s){var Ss=_s!=null&&_s.hydrationOptions!=null&&_s.hydrationOptions.mutableSources||null;if(_s=new jk(va,_a,_s!=null&&_s.hydrate===!0),_a=nh(3,null,null,_a===2?7:_a===1?3:0),_s.current=_a,_a.stateNode=_s,xg(_a),va[ff]=_s.current,cf(va.nodeType===8?va.parentNode:va),Ss)for(va=0;va<Ss.length;va++){_a=Ss[va];var Ms=_a._getVersion;Ms=Ms(_a._source),_s.mutableSourceEagerHydrationData==null?_s.mutableSourceEagerHydrationData=[_a,Ms]:_s.mutableSourceEagerHydrationData.push(_a,Ms)}this._internalRoot=_s}qk.prototype.render=function(va){lk(va,this._internalRoot,null,null)};qk.prototype.unmount=function(){var va=this._internalRoot,_a=va.containerInfo;lk(null,va,null,function(){_a[ff]=null})};function rk(va){return!(!va||va.nodeType!==1&&va.nodeType!==9&&va.nodeType!==11&&(va.nodeType!==8||va.nodeValue!==" react-mount-point-unstable "))}function sk(va,_a){if(_a||(_a=va?va.nodeType===9?va.documentElement:va.firstChild:null,_a=!(!_a||_a.nodeType!==1||!_a.hasAttribute("data-reactroot"))),!_a)for(var _s;_s=va.lastChild;)va.removeChild(_s);return new qk(va,0,_a?{hydrate:!0}:void 0)}function tk(va,_a,_s,Ss,Ms){var Cs=_s._reactRootContainer;if(Cs){var Ts=Cs._internalRoot;if(typeof Ms=="function"){var Bs=Ms;Ms=function(){var Ls=mk(Ts);Bs.call(Ls)}}lk(_a,Ts,va,Ms)}else{if(Cs=_s._reactRootContainer=sk(_s,Ss),Ts=Cs._internalRoot,typeof Ms=="function"){var Ps=Ms;Ms=function(){var Ls=mk(Ts);Ps.call(Ls)}}Xj(function(){lk(_a,Ts,va,Ms)})}return mk(Ts)}ec=function(va){if(va.tag===13){var _a=Hg();Jg(va,4,_a),ok(va,4)}};fc=function(va){if(va.tag===13){var _a=Hg();Jg(va,67108864,_a),ok(va,67108864)}};gc=function(va){if(va.tag===13){var _a=Hg(),_s=Ig(va);Jg(va,_s,_a),ok(va,_s)}};hc=function(va,_a){return _a()};yb=function(va,_a,_s){switch(_a){case"input":if(ab(va,_s),_a=_s.name,_s.type==="radio"&&_a!=null){for(_s=va;_s.parentNode;)_s=_s.parentNode;for(_s=_s.querySelectorAll("input[name="+JSON.stringify(""+_a)+'][type="radio"]'),_a=0;_a<_s.length;_a++){var Ss=_s[_a];if(Ss!==va&&Ss.form===va.form){var Ms=Db(Ss);if(!Ms)throw Error(y$5(90));Wa(Ss),ab(Ss,Ms)}}}break;case"textarea":ib(va,_s);break;case"select":_a=_s.value,_a!=null&&fb(va,!!_s.multiple,_a,!1)}};Gb=Wj;Hb=function(va,_a,_s,Ss,Ms){var Cs=X$2;X$2|=4;try{return gg(98,va.bind(null,_a,_s,Ss,Ms))}finally{X$2=Cs,X$2===0&&(wj(),ig())}};Ib=function(){(X$2&49)===0&&(Vj(),Oj())};Jb=function(va,_a){var _s=X$2;X$2|=2;try{return va(_a)}finally{X$2=_s,X$2===0&&(wj(),ig())}};function uk(va,_a){var _s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rk(_a))throw Error(y$5(200));return kk(va,_a,null,_s)}var vk={Events:[Cb,ue$1,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(va){return va=cc(va),va===null?null:va.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;reactDom_production_min.createPortal=uk;reactDom_production_min.findDOMNode=function(va){if(va==null)return null;if(va.nodeType===1)return va;var _a=va._reactInternals;if(_a===void 0)throw typeof va.render=="function"?Error(y$5(188)):Error(y$5(268,Object.keys(va)));return va=cc(_a),va=va===null?null:va.stateNode,va};reactDom_production_min.flushSync=function(va,_a){var _s=X$2;if((_s&48)!==0)return va(_a);X$2|=1;try{if(va)return gg(99,va.bind(null,_a))}finally{X$2=_s,ig()}};reactDom_production_min.hydrate=function(va,_a,_s){if(!rk(_a))throw Error(y$5(200));return tk(null,va,_a,!0,_s)};reactDom_production_min.render=function(va,_a,_s){if(!rk(_a))throw Error(y$5(200));return tk(null,va,_a,!1,_s)};reactDom_production_min.unmountComponentAtNode=function(va){if(!rk(va))throw Error(y$5(40));return va._reactRootContainer?(Xj(function(){tk(null,null,va,!1,function(){va._reactRootContainer=null,va[ff]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Wj;reactDom_production_min.unstable_createPortal=function(va,_a){return uk(va,_a,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(va,_a,_s,Ss){if(!rk(_s))throw Error(y$5(200));if(va==null||va._reactInternals===void 0)throw Error(y$5(38));return tk(va,_a,_s,!1,Ss)};reactDom_production_min.version="17.0.2";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(va){console.error(va)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports;Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(va){return typeof va=="number"&&isFinite(va)&&Math.floor(va)===va});Math.sign===void 0&&(Math.sign=function(va){return va<0?-1:va>0?1:+va});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(va){if(va==null)throw new TypeError("Cannot convert undefined or null to object");const _a=Object(va);for(let _s=1;_s<arguments.length;_s++){const Ss=arguments[_s];if(Ss!=null)for(const Ms in Ss)Object.prototype.hasOwnProperty.call(Ss,Ms)&&(_a[Ms]=Ss[Ms])}return _a});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(va,_a){this._listeners===void 0&&(this._listeners={});var _s=this._listeners;_s[va]===void 0&&(_s[va]=[]),_s[va].indexOf(_a)===-1&&_s[va].push(_a)},hasEventListener:function(va,_a){if(this._listeners===void 0)return!1;var _s=this._listeners;return _s[va]!==void 0&&_s[va].indexOf(_a)!==-1},removeEventListener:function(va,_a){if(this._listeners!==void 0){var _s=this._listeners,Ss=_s[va];if(Ss!==void 0){var Ms=Ss.indexOf(_a);Ms!==-1&&Ss.splice(Ms,1)}}},dispatchEvent:function(va){if(this._listeners!==void 0){var _a=this._listeners,_s=_a[va.type];if(_s!==void 0){va.target=this;for(var Ss=_s.slice(0),Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Ss[Ms].call(this,va)}}}});var _lut=[];for(var i$3=0;i$3<256;i$3++)_lut[i$3]=(i$3<16?"0":"")+i$3.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var va=Math.random()*4294967295|0,_a=Math.random()*4294967295|0,_s=Math.random()*4294967295|0,Ss=Math.random()*4294967295|0,Ms=_lut[va&255]+_lut[va>>8&255]+_lut[va>>16&255]+_lut[va>>24&255]+"-"+_lut[_a&255]+_lut[_a>>8&255]+"-"+_lut[_a>>16&15|64]+_lut[_a>>24&255]+"-"+_lut[_s&63|128]+_lut[_s>>8&255]+"-"+_lut[_s>>16&255]+_lut[_s>>24&255]+_lut[Ss&255]+_lut[Ss>>8&255]+_lut[Ss>>16&255]+_lut[Ss>>24&255];return Ms.toUpperCase()},clamp:function(va,_a,_s){return Math.max(_a,Math.min(_s,va))},euclideanModulo:function(va,_a){return(va%_a+_a)%_a},mapLinear:function(va,_a,_s,Ss,Ms){return Ss+(va-_a)*(Ms-Ss)/(_s-_a)},lerp:function(va,_a,_s){return(1-_s)*va+_s*_a},smoothstep:function(va,_a,_s){return va<=_a?0:va>=_s?1:(va=(va-_a)/(_s-_a),va*va*(3-2*va))},smootherstep:function(va,_a,_s){return va<=_a?0:va>=_s?1:(va=(va-_a)/(_s-_a),va*va*va*(va*(va*6-15)+10))},randInt:function(va,_a){return va+Math.floor(Math.random()*(_a-va+1))},randFloat:function(va,_a){return va+Math.random()*(_a-va)},randFloatSpread:function(va){return va*(.5-Math.random())},degToRad:function(va){return va*MathUtils.DEG2RAD},radToDeg:function(va){return va*MathUtils.RAD2DEG},isPowerOfTwo:function(va){return(va&va-1)===0&&va!==0},ceilPowerOfTwo:function(va){return Math.pow(2,Math.ceil(Math.log(va)/Math.LN2))},floorPowerOfTwo:function(va){return Math.pow(2,Math.floor(Math.log(va)/Math.LN2))},setQuaternionFromProperEuler:function(va,_a,_s,Ss,Ms){var Cs=Math.cos,Ts=Math.sin,Bs=Cs(_s/2),Ps=Ts(_s/2),Ls=Cs((_a+Ss)/2),Rs=Ts((_a+Ss)/2),$s=Cs((_a-Ss)/2),Fs=Ts((_a-Ss)/2),Os=Cs((Ss-_a)/2),Gs=Ts((Ss-_a)/2);switch(Ms){case"XYX":va.set(Bs*Rs,Ps*$s,Ps*Fs,Bs*Ls);break;case"YZY":va.set(Ps*Fs,Bs*Rs,Ps*$s,Bs*Ls);break;case"ZXZ":va.set(Ps*$s,Ps*Fs,Bs*Rs,Bs*Ls);break;case"XZX":va.set(Bs*Rs,Ps*Gs,Ps*Os,Bs*Ls);break;case"YXY":va.set(Ps*Os,Bs*Rs,Ps*Gs,Bs*Ls);break;case"ZYZ":va.set(Ps*Gs,Ps*Os,Bs*Rs,Bs*Ls);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Ms)}}};function Vector2(va,_a){this.x=va||0,this.y=_a||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(va){this.x=va}},height:{get:function(){return this.y},set:function(va){this.y=va}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(va,_a){return this.x=va,this.y=_a,this},setScalar:function(va){return this.x=va,this.y=va,this},setX:function(va){return this.x=va,this},setY:function(va){return this.y=va,this},setComponent:function(va,_a){switch(va){case 0:this.x=_a;break;case 1:this.y=_a;break;default:throw new Error("index is out of range: "+va)}return this},getComponent:function(va){switch(va){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+va)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(va){return this.x=va.x,this.y=va.y,this},add:function(va,_a){return _a!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(va,_a)):(this.x+=va.x,this.y+=va.y,this)},addScalar:function(va){return this.x+=va,this.y+=va,this},addVectors:function(va,_a){return this.x=va.x+_a.x,this.y=va.y+_a.y,this},addScaledVector:function(va,_a){return this.x+=va.x*_a,this.y+=va.y*_a,this},sub:function(va,_a){return _a!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(va,_a)):(this.x-=va.x,this.y-=va.y,this)},subScalar:function(va){return this.x-=va,this.y-=va,this},subVectors:function(va,_a){return this.x=va.x-_a.x,this.y=va.y-_a.y,this},multiply:function(va){return this.x*=va.x,this.y*=va.y,this},multiplyScalar:function(va){return this.x*=va,this.y*=va,this},divide:function(va){return this.x/=va.x,this.y/=va.y,this},divideScalar:function(va){return this.multiplyScalar(1/va)},applyMatrix3:function(va){var _a=this.x,_s=this.y,Ss=va.elements;return this.x=Ss[0]*_a+Ss[3]*_s+Ss[6],this.y=Ss[1]*_a+Ss[4]*_s+Ss[7],this},min:function(va){return this.x=Math.min(this.x,va.x),this.y=Math.min(this.y,va.y),this},max:function(va){return this.x=Math.max(this.x,va.x),this.y=Math.max(this.y,va.y),this},clamp:function(va,_a){return this.x=Math.max(va.x,Math.min(_a.x,this.x)),this.y=Math.max(va.y,Math.min(_a.y,this.y)),this},clampScalar:function(va,_a){return this.x=Math.max(va,Math.min(_a,this.x)),this.y=Math.max(va,Math.min(_a,this.y)),this},clampLength:function(va,_a){var _s=this.length();return this.divideScalar(_s||1).multiplyScalar(Math.max(va,Math.min(_a,_s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(va){return this.x*va.x+this.y*va.y},cross:function(va){return this.x*va.y-this.y*va.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var va=Math.atan2(-this.y,-this.x)+Math.PI;return va},distanceTo:function(va){return Math.sqrt(this.distanceToSquared(va))},distanceToSquared:function(va){var _a=this.x-va.x,_s=this.y-va.y;return _a*_a+_s*_s},manhattanDistanceTo:function(va){return Math.abs(this.x-va.x)+Math.abs(this.y-va.y)},setLength:function(va){return this.normalize().multiplyScalar(va)},lerp:function(va,_a){return this.x+=(va.x-this.x)*_a,this.y+=(va.y-this.y)*_a,this},lerpVectors:function(va,_a,_s){return this.x=va.x+(_a.x-va.x)*_s,this.y=va.y+(_a.y-va.y)*_s,this},equals:function(va){return va.x===this.x&&va.y===this.y},fromArray:function(va,_a){return _a===void 0&&(_a=0),this.x=va[_a],this.y=va[_a+1],this},toArray:function(va,_a){return va===void 0&&(va=[]),_a===void 0&&(_a=0),va[_a]=this.x,va[_a+1]=this.y,va},fromBufferAttribute:function(va,_a,_s){return _s!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=va.getX(_a),this.y=va.getY(_a),this},rotateAround:function(va,_a){var _s=Math.cos(_a),Ss=Math.sin(_a),Ms=this.x-va.x,Cs=this.y-va.y;return this.x=Ms*_s-Cs*Ss+va.x,this.y=Ms*Ss+Cs*_s+va.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps){var Ls=this.elements;return Ls[0]=va,Ls[1]=Ss,Ls[2]=Ts,Ls[3]=_a,Ls[4]=Ms,Ls[5]=Bs,Ls[6]=_s,Ls[7]=Cs,Ls[8]=Ps,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(va){var _a=this.elements,_s=va.elements;return _a[0]=_s[0],_a[1]=_s[1],_a[2]=_s[2],_a[3]=_s[3],_a[4]=_s[4],_a[5]=_s[5],_a[6]=_s[6],_a[7]=_s[7],_a[8]=_s[8],this},extractBasis:function(va,_a,_s){return va.setFromMatrix3Column(this,0),_a.setFromMatrix3Column(this,1),_s.setFromMatrix3Column(this,2),this},setFromMatrix4:function(va){var _a=va.elements;return this.set(_a[0],_a[4],_a[8],_a[1],_a[5],_a[9],_a[2],_a[6],_a[10]),this},multiply:function(va){return this.multiplyMatrices(this,va)},premultiply:function(va){return this.multiplyMatrices(va,this)},multiplyMatrices:function(va,_a){var _s=va.elements,Ss=_a.elements,Ms=this.elements,Cs=_s[0],Ts=_s[3],Bs=_s[6],Ps=_s[1],Ls=_s[4],Rs=_s[7],$s=_s[2],Fs=_s[5],Os=_s[8],Gs=Ss[0],Ns=Ss[3],Vs=Ss[6],Ds=Ss[1],ks=Ss[4],Us=Ss[7],zs=Ss[2],Ws=Ss[5],qs=Ss[8];return Ms[0]=Cs*Gs+Ts*Ds+Bs*zs,Ms[3]=Cs*Ns+Ts*ks+Bs*Ws,Ms[6]=Cs*Vs+Ts*Us+Bs*qs,Ms[1]=Ps*Gs+Ls*Ds+Rs*zs,Ms[4]=Ps*Ns+Ls*ks+Rs*Ws,Ms[7]=Ps*Vs+Ls*Us+Rs*qs,Ms[2]=$s*Gs+Fs*Ds+Os*zs,Ms[5]=$s*Ns+Fs*ks+Os*Ws,Ms[8]=$s*Vs+Fs*Us+Os*qs,this},multiplyScalar:function(va){var _a=this.elements;return _a[0]*=va,_a[3]*=va,_a[6]*=va,_a[1]*=va,_a[4]*=va,_a[7]*=va,_a[2]*=va,_a[5]*=va,_a[8]*=va,this},determinant:function(){var va=this.elements,_a=va[0],_s=va[1],Ss=va[2],Ms=va[3],Cs=va[4],Ts=va[5],Bs=va[6],Ps=va[7],Ls=va[8];return _a*Cs*Ls-_a*Ts*Ps-_s*Ms*Ls+_s*Ts*Bs+Ss*Ms*Ps-Ss*Cs*Bs},getInverse:function(va,_a){_a!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var _s=va.elements,Ss=this.elements,Ms=_s[0],Cs=_s[1],Ts=_s[2],Bs=_s[3],Ps=_s[4],Ls=_s[5],Rs=_s[6],$s=_s[7],Fs=_s[8],Os=Fs*Ps-Ls*$s,Gs=Ls*Rs-Fs*Bs,Ns=$s*Bs-Ps*Rs,Vs=Ms*Os+Cs*Gs+Ts*Ns;if(Vs===0)return this.set(0,0,0,0,0,0,0,0,0);var Ds=1/Vs;return Ss[0]=Os*Ds,Ss[1]=(Ts*$s-Fs*Cs)*Ds,Ss[2]=(Ls*Cs-Ts*Ps)*Ds,Ss[3]=Gs*Ds,Ss[4]=(Fs*Ms-Ts*Rs)*Ds,Ss[5]=(Ts*Bs-Ls*Ms)*Ds,Ss[6]=Ns*Ds,Ss[7]=(Cs*Rs-$s*Ms)*Ds,Ss[8]=(Ps*Ms-Cs*Bs)*Ds,this},transpose:function(){var va,_a=this.elements;return va=_a[1],_a[1]=_a[3],_a[3]=va,va=_a[2],_a[2]=_a[6],_a[6]=va,va=_a[5],_a[5]=_a[7],_a[7]=va,this},getNormalMatrix:function(va){return this.setFromMatrix4(va).getInverse(this).transpose()},transposeIntoArray:function(va){var _a=this.elements;return va[0]=_a[0],va[1]=_a[3],va[2]=_a[6],va[3]=_a[1],va[4]=_a[4],va[5]=_a[7],va[6]=_a[2],va[7]=_a[5],va[8]=_a[8],this},setUvTransform:function(va,_a,_s,Ss,Ms,Cs,Ts){var Bs=Math.cos(Ms),Ps=Math.sin(Ms);this.set(_s*Bs,_s*Ps,-_s*(Bs*Cs+Ps*Ts)+Cs+va,-Ss*Ps,Ss*Bs,-Ss*(-Ps*Cs+Bs*Ts)+Ts+_a,0,0,1)},scale:function(va,_a){var _s=this.elements;return _s[0]*=va,_s[3]*=va,_s[6]*=va,_s[1]*=_a,_s[4]*=_a,_s[7]*=_a,this},rotate:function(va){var _a=Math.cos(va),_s=Math.sin(va),Ss=this.elements,Ms=Ss[0],Cs=Ss[3],Ts=Ss[6],Bs=Ss[1],Ps=Ss[4],Ls=Ss[7];return Ss[0]=_a*Ms+_s*Bs,Ss[3]=_a*Cs+_s*Ps,Ss[6]=_a*Ts+_s*Ls,Ss[1]=-_s*Ms+_a*Bs,Ss[4]=-_s*Cs+_a*Ps,Ss[7]=-_s*Ts+_a*Ls,this},translate:function(va,_a){var _s=this.elements;return _s[0]+=va*_s[2],_s[3]+=va*_s[5],_s[6]+=va*_s[8],_s[1]+=_a*_s[2],_s[4]+=_a*_s[5],_s[7]+=_a*_s[8],this},equals:function(va){for(var _a=this.elements,_s=va.elements,Ss=0;Ss<9;Ss++)if(_a[Ss]!==_s[Ss])return!1;return!0},fromArray:function(va,_a){_a===void 0&&(_a=0);for(var _s=0;_s<9;_s++)this.elements[_s]=va[_s+_a];return this},toArray:function(va,_a){va===void 0&&(va=[]),_a===void 0&&(_a=0);var _s=this.elements;return va[_a]=_s[0],va[_a+1]=_s[1],va[_a+2]=_s[2],va[_a+3]=_s[3],va[_a+4]=_s[4],va[_a+5]=_s[5],va[_a+6]=_s[6],va[_a+7]=_s[7],va[_a+8]=_s[8],va}});var _canvas,ImageUtils={getDataURL:function(va){var _a;if(typeof HTMLCanvasElement>"u")return va.src;if(va instanceof HTMLCanvasElement)_a=va;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=va.width,_canvas.height=va.height;var _s=_canvas.getContext("2d");va instanceof ImageData?_s.putImageData(va,0,0):_s.drawImage(va,0,0,va.width,va.height),_a=_canvas}return _a.width>2048||_a.height>2048?_a.toDataURL("image/jpeg",.6):_a.toDataURL("image/png")}},textureId=0;function Texture(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=va!==void 0?va:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=_a!==void 0?_a:Texture.DEFAULT_MAPPING,this.wrapS=_s!==void 0?_s:ClampToEdgeWrapping,this.wrapT=Ss!==void 0?Ss:ClampToEdgeWrapping,this.magFilter=Ms!==void 0?Ms:LinearFilter,this.minFilter=Cs!==void 0?Cs:LinearMipmapLinearFilter,this.anisotropy=Ps!==void 0?Ps:1,this.format=Ts!==void 0?Ts:RGBAFormat,this.internalFormat=null,this.type=Bs!==void 0?Bs:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Ls!==void 0?Ls:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.name=va.name,this.image=va.image,this.mipmaps=va.mipmaps.slice(0),this.mapping=va.mapping,this.wrapS=va.wrapS,this.wrapT=va.wrapT,this.magFilter=va.magFilter,this.minFilter=va.minFilter,this.anisotropy=va.anisotropy,this.format=va.format,this.internalFormat=va.internalFormat,this.type=va.type,this.offset.copy(va.offset),this.repeat.copy(va.repeat),this.center.copy(va.center),this.rotation=va.rotation,this.matrixAutoUpdate=va.matrixAutoUpdate,this.matrix.copy(va.matrix),this.generateMipmaps=va.generateMipmaps,this.premultiplyAlpha=va.premultiplyAlpha,this.flipY=va.flipY,this.unpackAlignment=va.unpackAlignment,this.encoding=va.encoding,this},toJSON:function(va){var _a=va===void 0||typeof va=="string";if(!_a&&va.textures[this.uuid]!==void 0)return va.textures[this.uuid];var _s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var Ss=this.image;if(Ss.uuid===void 0&&(Ss.uuid=MathUtils.generateUUID()),!_a&&va.images[Ss.uuid]===void 0){var Ms;if(Array.isArray(Ss)){Ms=[];for(var Cs=0,Ts=Ss.length;Cs<Ts;Cs++)Ms.push(ImageUtils.getDataURL(Ss[Cs]))}else Ms=ImageUtils.getDataURL(Ss);va.images[Ss.uuid]={uuid:Ss.uuid,url:Ms}}_s.image=Ss.uuid}return _a||(va.textures[this.uuid]=_s),_s},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(va){if(this.mapping!==UVMapping)return va;if(va.applyMatrix3(this.matrix),va.x<0||va.x>1)switch(this.wrapS){case RepeatWrapping:va.x=va.x-Math.floor(va.x);break;case ClampToEdgeWrapping:va.x=va.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(va.x)%2)===1?va.x=Math.ceil(va.x)-va.x:va.x=va.x-Math.floor(va.x);break}if(va.y<0||va.y>1)switch(this.wrapT){case RepeatWrapping:va.y=va.y-Math.floor(va.y);break;case ClampToEdgeWrapping:va.y=va.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(va.y)%2)===1?va.y=Math.ceil(va.y)-va.y:va.y=va.y-Math.floor(va.y);break}return this.flipY&&(va.y=1-va.y),va}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(va){va===!0&&this.version++}});function Vector4(va,_a,_s,Ss){this.x=va||0,this.y=_a||0,this.z=_s||0,this.w=Ss!==void 0?Ss:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(va){this.z=va}},height:{get:function(){return this.w},set:function(va){this.w=va}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(va,_a,_s,Ss){return this.x=va,this.y=_a,this.z=_s,this.w=Ss,this},setScalar:function(va){return this.x=va,this.y=va,this.z=va,this.w=va,this},setX:function(va){return this.x=va,this},setY:function(va){return this.y=va,this},setZ:function(va){return this.z=va,this},setW:function(va){return this.w=va,this},setComponent:function(va,_a){switch(va){case 0:this.x=_a;break;case 1:this.y=_a;break;case 2:this.z=_a;break;case 3:this.w=_a;break;default:throw new Error("index is out of range: "+va)}return this},getComponent:function(va){switch(va){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+va)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(va){return this.x=va.x,this.y=va.y,this.z=va.z,this.w=va.w!==void 0?va.w:1,this},add:function(va,_a){return _a!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(va,_a)):(this.x+=va.x,this.y+=va.y,this.z+=va.z,this.w+=va.w,this)},addScalar:function(va){return this.x+=va,this.y+=va,this.z+=va,this.w+=va,this},addVectors:function(va,_a){return this.x=va.x+_a.x,this.y=va.y+_a.y,this.z=va.z+_a.z,this.w=va.w+_a.w,this},addScaledVector:function(va,_a){return this.x+=va.x*_a,this.y+=va.y*_a,this.z+=va.z*_a,this.w+=va.w*_a,this},sub:function(va,_a){return _a!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(va,_a)):(this.x-=va.x,this.y-=va.y,this.z-=va.z,this.w-=va.w,this)},subScalar:function(va){return this.x-=va,this.y-=va,this.z-=va,this.w-=va,this},subVectors:function(va,_a){return this.x=va.x-_a.x,this.y=va.y-_a.y,this.z=va.z-_a.z,this.w=va.w-_a.w,this},multiplyScalar:function(va){return this.x*=va,this.y*=va,this.z*=va,this.w*=va,this},applyMatrix4:function(va){var _a=this.x,_s=this.y,Ss=this.z,Ms=this.w,Cs=va.elements;return this.x=Cs[0]*_a+Cs[4]*_s+Cs[8]*Ss+Cs[12]*Ms,this.y=Cs[1]*_a+Cs[5]*_s+Cs[9]*Ss+Cs[13]*Ms,this.z=Cs[2]*_a+Cs[6]*_s+Cs[10]*Ss+Cs[14]*Ms,this.w=Cs[3]*_a+Cs[7]*_s+Cs[11]*Ss+Cs[15]*Ms,this},divideScalar:function(va){return this.multiplyScalar(1/va)},setAxisAngleFromQuaternion:function(va){this.w=2*Math.acos(va.w);var _a=Math.sqrt(1-va.w*va.w);return _a<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=va.x/_a,this.y=va.y/_a,this.z=va.z/_a),this},setAxisAngleFromRotationMatrix:function(va){var _a,_s,Ss,Ms,Cs=.01,Ts=.1,Bs=va.elements,Ps=Bs[0],Ls=Bs[4],Rs=Bs[8],$s=Bs[1],Fs=Bs[5],Os=Bs[9],Gs=Bs[2],Ns=Bs[6],Vs=Bs[10];if(Math.abs(Ls-$s)<Cs&&Math.abs(Rs-Gs)<Cs&&Math.abs(Os-Ns)<Cs){if(Math.abs(Ls+$s)<Ts&&Math.abs(Rs+Gs)<Ts&&Math.abs(Os+Ns)<Ts&&Math.abs(Ps+Fs+Vs-3)<Ts)return this.set(1,0,0,0),this;_a=Math.PI;var Ds=(Ps+1)/2,ks=(Fs+1)/2,Us=(Vs+1)/2,zs=(Ls+$s)/4,Ws=(Rs+Gs)/4,qs=(Os+Ns)/4;return Ds>ks&&Ds>Us?Ds<Cs?(_s=0,Ss=.707106781,Ms=.707106781):(_s=Math.sqrt(Ds),Ss=zs/_s,Ms=Ws/_s):ks>Us?ks<Cs?(_s=.707106781,Ss=0,Ms=.707106781):(Ss=Math.sqrt(ks),_s=zs/Ss,Ms=qs/Ss):Us<Cs?(_s=.707106781,Ss=.707106781,Ms=0):(Ms=Math.sqrt(Us),_s=Ws/Ms,Ss=qs/Ms),this.set(_s,Ss,Ms,_a),this}var Zs=Math.sqrt((Ns-Os)*(Ns-Os)+(Rs-Gs)*(Rs-Gs)+($s-Ls)*($s-Ls));return Math.abs(Zs)<.001&&(Zs=1),this.x=(Ns-Os)/Zs,this.y=(Rs-Gs)/Zs,this.z=($s-Ls)/Zs,this.w=Math.acos((Ps+Fs+Vs-1)/2),this},min:function(va){return this.x=Math.min(this.x,va.x),this.y=Math.min(this.y,va.y),this.z=Math.min(this.z,va.z),this.w=Math.min(this.w,va.w),this},max:function(va){return this.x=Math.max(this.x,va.x),this.y=Math.max(this.y,va.y),this.z=Math.max(this.z,va.z),this.w=Math.max(this.w,va.w),this},clamp:function(va,_a){return this.x=Math.max(va.x,Math.min(_a.x,this.x)),this.y=Math.max(va.y,Math.min(_a.y,this.y)),this.z=Math.max(va.z,Math.min(_a.z,this.z)),this.w=Math.max(va.w,Math.min(_a.w,this.w)),this},clampScalar:function(va,_a){return this.x=Math.max(va,Math.min(_a,this.x)),this.y=Math.max(va,Math.min(_a,this.y)),this.z=Math.max(va,Math.min(_a,this.z)),this.w=Math.max(va,Math.min(_a,this.w)),this},clampLength:function(va,_a){var _s=this.length();return this.divideScalar(_s||1).multiplyScalar(Math.max(va,Math.min(_a,_s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(va){return this.x*va.x+this.y*va.y+this.z*va.z+this.w*va.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(va){return this.normalize().multiplyScalar(va)},lerp:function(va,_a){return this.x+=(va.x-this.x)*_a,this.y+=(va.y-this.y)*_a,this.z+=(va.z-this.z)*_a,this.w+=(va.w-this.w)*_a,this},lerpVectors:function(va,_a,_s){return this.x=va.x+(_a.x-va.x)*_s,this.y=va.y+(_a.y-va.y)*_s,this.z=va.z+(_a.z-va.z)*_s,this.w=va.w+(_a.w-va.w)*_s,this},equals:function(va){return va.x===this.x&&va.y===this.y&&va.z===this.z&&va.w===this.w},fromArray:function(va,_a){return _a===void 0&&(_a=0),this.x=va[_a],this.y=va[_a+1],this.z=va[_a+2],this.w=va[_a+3],this},toArray:function(va,_a){return va===void 0&&(va=[]),_a===void 0&&(_a=0),va[_a]=this.x,va[_a+1]=this.y,va[_a+2]=this.z,va[_a+3]=this.w,va},fromBufferAttribute:function(va,_a,_s){return _s!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=va.getX(_a),this.y=va.getY(_a),this.z=va.getZ(_a),this.w=va.getW(_a),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(va,_a,_s){this.width=va,this.height=_a,this.scissor=new Vector4(0,0,va,_a),this.scissorTest=!1,this.viewport=new Vector4(0,0,va,_a),_s=_s||{},this.texture=new Texture(void 0,_s.mapping,_s.wrapS,_s.wrapT,_s.magFilter,_s.minFilter,_s.format,_s.type,_s.anisotropy,_s.encoding),this.texture.image={},this.texture.image.width=va,this.texture.image.height=_a,this.texture.generateMipmaps=_s.generateMipmaps!==void 0?_s.generateMipmaps:!1,this.texture.minFilter=_s.minFilter!==void 0?_s.minFilter:LinearFilter,this.depthBuffer=_s.depthBuffer!==void 0?_s.depthBuffer:!0,this.stencilBuffer=_s.stencilBuffer!==void 0?_s.stencilBuffer:!0,this.depthTexture=_s.depthTexture!==void 0?_s.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(va,_a){(this.width!==va||this.height!==_a)&&(this.width=va,this.height=_a,this.texture.image.width=va,this.texture.image.height=_a,this.dispose()),this.viewport.set(0,0,va,_a),this.scissor.set(0,0,va,_a)},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.width=va.width,this.height=va.height,this.viewport.copy(va.viewport),this.texture=va.texture.clone(),this.depthBuffer=va.depthBuffer,this.stencilBuffer=va.stencilBuffer,this.depthTexture=va.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(va,_a,_s){WebGLRenderTarget.call(this,va,_a,_s),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(va){return WebGLRenderTarget.prototype.copy.call(this,va),this.samples=va.samples,this}});function Quaternion(va,_a,_s,Ss){this._x=va||0,this._y=_a||0,this._z=_s||0,this._w=Ss!==void 0?Ss:1}Object.assign(Quaternion,{slerp:function(va,_a,_s,Ss){return _s.copy(va).slerp(_a,Ss)},slerpFlat:function(va,_a,_s,Ss,Ms,Cs,Ts){var Bs=_s[Ss+0],Ps=_s[Ss+1],Ls=_s[Ss+2],Rs=_s[Ss+3],$s=Ms[Cs+0],Fs=Ms[Cs+1],Os=Ms[Cs+2],Gs=Ms[Cs+3];if(Rs!==Gs||Bs!==$s||Ps!==Fs||Ls!==Os){var Ns=1-Ts,Vs=Bs*$s+Ps*Fs+Ls*Os+Rs*Gs,Ds=Vs>=0?1:-1,ks=1-Vs*Vs;if(ks>Number.EPSILON){var Us=Math.sqrt(ks),zs=Math.atan2(Us,Vs*Ds);Ns=Math.sin(Ns*zs)/Us,Ts=Math.sin(Ts*zs)/Us}var Ws=Ts*Ds;if(Bs=Bs*Ns+$s*Ws,Ps=Ps*Ns+Fs*Ws,Ls=Ls*Ns+Os*Ws,Rs=Rs*Ns+Gs*Ws,Ns===1-Ts){var qs=1/Math.sqrt(Bs*Bs+Ps*Ps+Ls*Ls+Rs*Rs);Bs*=qs,Ps*=qs,Ls*=qs,Rs*=qs}}va[_a]=Bs,va[_a+1]=Ps,va[_a+2]=Ls,va[_a+3]=Rs},multiplyQuaternionsFlat:function(va,_a,_s,Ss,Ms,Cs){var Ts=_s[Ss],Bs=_s[Ss+1],Ps=_s[Ss+2],Ls=_s[Ss+3],Rs=Ms[Cs],$s=Ms[Cs+1],Fs=Ms[Cs+2],Os=Ms[Cs+3];return va[_a]=Ts*Os+Ls*Rs+Bs*Fs-Ps*$s,va[_a+1]=Bs*Os+Ls*$s+Ps*Rs-Ts*Fs,va[_a+2]=Ps*Os+Ls*Fs+Ts*$s-Bs*Rs,va[_a+3]=Ls*Os-Ts*Rs-Bs*$s-Ps*Fs,va}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(va){this._x=va,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(va){this._y=va,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(va){this._z=va,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(va){this._w=va,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(va,_a,_s,Ss){return this._x=va,this._y=_a,this._z=_s,this._w=Ss,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(va){return this._x=va.x,this._y=va.y,this._z=va.z,this._w=va.w,this._onChangeCallback(),this},setFromEuler:function(va,_a){if(!(va&&va.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var _s=va._x,Ss=va._y,Ms=va._z,Cs=va.order,Ts=Math.cos,Bs=Math.sin,Ps=Ts(_s/2),Ls=Ts(Ss/2),Rs=Ts(Ms/2),$s=Bs(_s/2),Fs=Bs(Ss/2),Os=Bs(Ms/2);switch(Cs){case"XYZ":this._x=$s*Ls*Rs+Ps*Fs*Os,this._y=Ps*Fs*Rs-$s*Ls*Os,this._z=Ps*Ls*Os+$s*Fs*Rs,this._w=Ps*Ls*Rs-$s*Fs*Os;break;case"YXZ":this._x=$s*Ls*Rs+Ps*Fs*Os,this._y=Ps*Fs*Rs-$s*Ls*Os,this._z=Ps*Ls*Os-$s*Fs*Rs,this._w=Ps*Ls*Rs+$s*Fs*Os;break;case"ZXY":this._x=$s*Ls*Rs-Ps*Fs*Os,this._y=Ps*Fs*Rs+$s*Ls*Os,this._z=Ps*Ls*Os+$s*Fs*Rs,this._w=Ps*Ls*Rs-$s*Fs*Os;break;case"ZYX":this._x=$s*Ls*Rs-Ps*Fs*Os,this._y=Ps*Fs*Rs+$s*Ls*Os,this._z=Ps*Ls*Os-$s*Fs*Rs,this._w=Ps*Ls*Rs+$s*Fs*Os;break;case"YZX":this._x=$s*Ls*Rs+Ps*Fs*Os,this._y=Ps*Fs*Rs+$s*Ls*Os,this._z=Ps*Ls*Os-$s*Fs*Rs,this._w=Ps*Ls*Rs-$s*Fs*Os;break;case"XZY":this._x=$s*Ls*Rs-Ps*Fs*Os,this._y=Ps*Fs*Rs-$s*Ls*Os,this._z=Ps*Ls*Os+$s*Fs*Rs,this._w=Ps*Ls*Rs+$s*Fs*Os;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Cs)}return _a!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(va,_a){var _s=_a/2,Ss=Math.sin(_s);return this._x=va.x*Ss,this._y=va.y*Ss,this._z=va.z*Ss,this._w=Math.cos(_s),this._onChangeCallback(),this},setFromRotationMatrix:function(va){var _a=va.elements,_s=_a[0],Ss=_a[4],Ms=_a[8],Cs=_a[1],Ts=_a[5],Bs=_a[9],Ps=_a[2],Ls=_a[6],Rs=_a[10],$s=_s+Ts+Rs,Fs;return $s>0?(Fs=.5/Math.sqrt($s+1),this._w=.25/Fs,this._x=(Ls-Bs)*Fs,this._y=(Ms-Ps)*Fs,this._z=(Cs-Ss)*Fs):_s>Ts&&_s>Rs?(Fs=2*Math.sqrt(1+_s-Ts-Rs),this._w=(Ls-Bs)/Fs,this._x=.25*Fs,this._y=(Ss+Cs)/Fs,this._z=(Ms+Ps)/Fs):Ts>Rs?(Fs=2*Math.sqrt(1+Ts-_s-Rs),this._w=(Ms-Ps)/Fs,this._x=(Ss+Cs)/Fs,this._y=.25*Fs,this._z=(Bs+Ls)/Fs):(Fs=2*Math.sqrt(1+Rs-_s-Ts),this._w=(Cs-Ss)/Fs,this._x=(Ms+Ps)/Fs,this._y=(Bs+Ls)/Fs,this._z=.25*Fs),this._onChangeCallback(),this},setFromUnitVectors:function(va,_a){var _s=1e-6,Ss=va.dot(_a)+1;return Ss<_s?(Ss=0,Math.abs(va.x)>Math.abs(va.z)?(this._x=-va.y,this._y=va.x,this._z=0,this._w=Ss):(this._x=0,this._y=-va.z,this._z=va.y,this._w=Ss)):(this._x=va.y*_a.z-va.z*_a.y,this._y=va.z*_a.x-va.x*_a.z,this._z=va.x*_a.y-va.y*_a.x,this._w=Ss),this.normalize()},angleTo:function(va){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(va),-1,1)))},rotateTowards:function(va,_a){var _s=this.angleTo(va);if(_s===0)return this;var Ss=Math.min(1,_a/_s);return this.slerp(va,Ss),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(va){return this._x*va._x+this._y*va._y+this._z*va._z+this._w*va._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var va=this.length();return va===0?(this._x=0,this._y=0,this._z=0,this._w=1):(va=1/va,this._x=this._x*va,this._y=this._y*va,this._z=this._z*va,this._w=this._w*va),this._onChangeCallback(),this},multiply:function(va,_a){return _a!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(va,_a)):this.multiplyQuaternions(this,va)},premultiply:function(va){return this.multiplyQuaternions(va,this)},multiplyQuaternions:function(va,_a){var _s=va._x,Ss=va._y,Ms=va._z,Cs=va._w,Ts=_a._x,Bs=_a._y,Ps=_a._z,Ls=_a._w;return this._x=_s*Ls+Cs*Ts+Ss*Ps-Ms*Bs,this._y=Ss*Ls+Cs*Bs+Ms*Ts-_s*Ps,this._z=Ms*Ls+Cs*Ps+_s*Bs-Ss*Ts,this._w=Cs*Ls-_s*Ts-Ss*Bs-Ms*Ps,this._onChangeCallback(),this},slerp:function(va,_a){if(_a===0)return this;if(_a===1)return this.copy(va);var _s=this._x,Ss=this._y,Ms=this._z,Cs=this._w,Ts=Cs*va._w+_s*va._x+Ss*va._y+Ms*va._z;if(Ts<0?(this._w=-va._w,this._x=-va._x,this._y=-va._y,this._z=-va._z,Ts=-Ts):this.copy(va),Ts>=1)return this._w=Cs,this._x=_s,this._y=Ss,this._z=Ms,this;var Bs=1-Ts*Ts;if(Bs<=Number.EPSILON){var Ps=1-_a;return this._w=Ps*Cs+_a*this._w,this._x=Ps*_s+_a*this._x,this._y=Ps*Ss+_a*this._y,this._z=Ps*Ms+_a*this._z,this.normalize(),this._onChangeCallback(),this}var Ls=Math.sqrt(Bs),Rs=Math.atan2(Ls,Ts),$s=Math.sin((1-_a)*Rs)/Ls,Fs=Math.sin(_a*Rs)/Ls;return this._w=Cs*$s+this._w*Fs,this._x=_s*$s+this._x*Fs,this._y=Ss*$s+this._y*Fs,this._z=Ms*$s+this._z*Fs,this._onChangeCallback(),this},equals:function(va){return va._x===this._x&&va._y===this._y&&va._z===this._z&&va._w===this._w},fromArray:function(va,_a){return _a===void 0&&(_a=0),this._x=va[_a],this._y=va[_a+1],this._z=va[_a+2],this._w=va[_a+3],this._onChangeCallback(),this},toArray:function(va,_a){return va===void 0&&(va=[]),_a===void 0&&(_a=0),va[_a]=this._x,va[_a+1]=this._y,va[_a+2]=this._z,va[_a+3]=this._w,va},fromBufferAttribute:function(va,_a){return this._x=va.getX(_a),this._y=va.getY(_a),this._z=va.getZ(_a),this._w=va.getW(_a),this},_onChange:function(va){return this._onChangeCallback=va,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(va,_a,_s){this.x=va||0,this.y=_a||0,this.z=_s||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(va,_a,_s){return this.x=va,this.y=_a,this.z=_s,this},setScalar:function(va){return this.x=va,this.y=va,this.z=va,this},setX:function(va){return this.x=va,this},setY:function(va){return this.y=va,this},setZ:function(va){return this.z=va,this},setComponent:function(va,_a){switch(va){case 0:this.x=_a;break;case 1:this.y=_a;break;case 2:this.z=_a;break;default:throw new Error("index is out of range: "+va)}return this},getComponent:function(va){switch(va){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+va)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(va){return this.x=va.x,this.y=va.y,this.z=va.z,this},add:function(va,_a){return _a!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(va,_a)):(this.x+=va.x,this.y+=va.y,this.z+=va.z,this)},addScalar:function(va){return this.x+=va,this.y+=va,this.z+=va,this},addVectors:function(va,_a){return this.x=va.x+_a.x,this.y=va.y+_a.y,this.z=va.z+_a.z,this},addScaledVector:function(va,_a){return this.x+=va.x*_a,this.y+=va.y*_a,this.z+=va.z*_a,this},sub:function(va,_a){return _a!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(va,_a)):(this.x-=va.x,this.y-=va.y,this.z-=va.z,this)},subScalar:function(va){return this.x-=va,this.y-=va,this.z-=va,this},subVectors:function(va,_a){return this.x=va.x-_a.x,this.y=va.y-_a.y,this.z=va.z-_a.z,this},multiply:function(va,_a){return _a!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(va,_a)):(this.x*=va.x,this.y*=va.y,this.z*=va.z,this)},multiplyScalar:function(va){return this.x*=va,this.y*=va,this.z*=va,this},multiplyVectors:function(va,_a){return this.x=va.x*_a.x,this.y=va.y*_a.y,this.z=va.z*_a.z,this},applyEuler:function(va){return va&&va.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(va))},applyAxisAngle:function(va,_a){return this.applyQuaternion(_quaternion.setFromAxisAngle(va,_a))},applyMatrix3:function(va){var _a=this.x,_s=this.y,Ss=this.z,Ms=va.elements;return this.x=Ms[0]*_a+Ms[3]*_s+Ms[6]*Ss,this.y=Ms[1]*_a+Ms[4]*_s+Ms[7]*Ss,this.z=Ms[2]*_a+Ms[5]*_s+Ms[8]*Ss,this},applyNormalMatrix:function(va){return this.applyMatrix3(va).normalize()},applyMatrix4:function(va){var _a=this.x,_s=this.y,Ss=this.z,Ms=va.elements,Cs=1/(Ms[3]*_a+Ms[7]*_s+Ms[11]*Ss+Ms[15]);return this.x=(Ms[0]*_a+Ms[4]*_s+Ms[8]*Ss+Ms[12])*Cs,this.y=(Ms[1]*_a+Ms[5]*_s+Ms[9]*Ss+Ms[13])*Cs,this.z=(Ms[2]*_a+Ms[6]*_s+Ms[10]*Ss+Ms[14])*Cs,this},applyQuaternion:function(va){var _a=this.x,_s=this.y,Ss=this.z,Ms=va.x,Cs=va.y,Ts=va.z,Bs=va.w,Ps=Bs*_a+Cs*Ss-Ts*_s,Ls=Bs*_s+Ts*_a-Ms*Ss,Rs=Bs*Ss+Ms*_s-Cs*_a,$s=-Ms*_a-Cs*_s-Ts*Ss;return this.x=Ps*Bs+$s*-Ms+Ls*-Ts-Rs*-Cs,this.y=Ls*Bs+$s*-Cs+Rs*-Ms-Ps*-Ts,this.z=Rs*Bs+$s*-Ts+Ps*-Cs-Ls*-Ms,this},project:function(va){return this.applyMatrix4(va.matrixWorldInverse).applyMatrix4(va.projectionMatrix)},unproject:function(va){return this.applyMatrix4(va.projectionMatrixInverse).applyMatrix4(va.matrixWorld)},transformDirection:function(va){var _a=this.x,_s=this.y,Ss=this.z,Ms=va.elements;return this.x=Ms[0]*_a+Ms[4]*_s+Ms[8]*Ss,this.y=Ms[1]*_a+Ms[5]*_s+Ms[9]*Ss,this.z=Ms[2]*_a+Ms[6]*_s+Ms[10]*Ss,this.normalize()},divide:function(va){return this.x/=va.x,this.y/=va.y,this.z/=va.z,this},divideScalar:function(va){return this.multiplyScalar(1/va)},min:function(va){return this.x=Math.min(this.x,va.x),this.y=Math.min(this.y,va.y),this.z=Math.min(this.z,va.z),this},max:function(va){return this.x=Math.max(this.x,va.x),this.y=Math.max(this.y,va.y),this.z=Math.max(this.z,va.z),this},clamp:function(va,_a){return this.x=Math.max(va.x,Math.min(_a.x,this.x)),this.y=Math.max(va.y,Math.min(_a.y,this.y)),this.z=Math.max(va.z,Math.min(_a.z,this.z)),this},clampScalar:function(va,_a){return this.x=Math.max(va,Math.min(_a,this.x)),this.y=Math.max(va,Math.min(_a,this.y)),this.z=Math.max(va,Math.min(_a,this.z)),this},clampLength:function(va,_a){var _s=this.length();return this.divideScalar(_s||1).multiplyScalar(Math.max(va,Math.min(_a,_s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(va){return this.x*va.x+this.y*va.y+this.z*va.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(va){return this.normalize().multiplyScalar(va)},lerp:function(va,_a){return this.x+=(va.x-this.x)*_a,this.y+=(va.y-this.y)*_a,this.z+=(va.z-this.z)*_a,this},lerpVectors:function(va,_a,_s){return this.x=va.x+(_a.x-va.x)*_s,this.y=va.y+(_a.y-va.y)*_s,this.z=va.z+(_a.z-va.z)*_s,this},cross:function(va,_a){return _a!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(va,_a)):this.crossVectors(this,va)},crossVectors:function(va,_a){var _s=va.x,Ss=va.y,Ms=va.z,Cs=_a.x,Ts=_a.y,Bs=_a.z;return this.x=Ss*Bs-Ms*Ts,this.y=Ms*Cs-_s*Bs,this.z=_s*Ts-Ss*Cs,this},projectOnVector:function(va){var _a=va.lengthSq();if(_a===0)return this.set(0,0,0);var _s=va.dot(this)/_a;return this.copy(va).multiplyScalar(_s)},projectOnPlane:function(va){return _vector.copy(this).projectOnVector(va),this.sub(_vector)},reflect:function(va){return this.sub(_vector.copy(va).multiplyScalar(2*this.dot(va)))},angleTo:function(va){var _a=Math.sqrt(this.lengthSq()*va.lengthSq());if(_a===0)return Math.PI/2;var _s=this.dot(va)/_a;return Math.acos(MathUtils.clamp(_s,-1,1))},distanceTo:function(va){return Math.sqrt(this.distanceToSquared(va))},distanceToSquared:function(va){var _a=this.x-va.x,_s=this.y-va.y,Ss=this.z-va.z;return _a*_a+_s*_s+Ss*Ss},manhattanDistanceTo:function(va){return Math.abs(this.x-va.x)+Math.abs(this.y-va.y)+Math.abs(this.z-va.z)},setFromSpherical:function(va){return this.setFromSphericalCoords(va.radius,va.phi,va.theta)},setFromSphericalCoords:function(va,_a,_s){var Ss=Math.sin(_a)*va;return this.x=Ss*Math.sin(_s),this.y=Math.cos(_a)*va,this.z=Ss*Math.cos(_s),this},setFromCylindrical:function(va){return this.setFromCylindricalCoords(va.radius,va.theta,va.y)},setFromCylindricalCoords:function(va,_a,_s){return this.x=va*Math.sin(_a),this.y=_s,this.z=va*Math.cos(_a),this},setFromMatrixPosition:function(va){var _a=va.elements;return this.x=_a[12],this.y=_a[13],this.z=_a[14],this},setFromMatrixScale:function(va){var _a=this.setFromMatrixColumn(va,0).length(),_s=this.setFromMatrixColumn(va,1).length(),Ss=this.setFromMatrixColumn(va,2).length();return this.x=_a,this.y=_s,this.z=Ss,this},setFromMatrixColumn:function(va,_a){return this.fromArray(va.elements,_a*4)},setFromMatrix3Column:function(va,_a){return this.fromArray(va.elements,_a*3)},equals:function(va){return va.x===this.x&&va.y===this.y&&va.z===this.z},fromArray:function(va,_a){return _a===void 0&&(_a=0),this.x=va[_a],this.y=va[_a+1],this.z=va[_a+2],this},toArray:function(va,_a){return va===void 0&&(va=[]),_a===void 0&&(_a=0),va[_a]=this.x,va[_a+1]=this.y,va[_a+2]=this.z,va},fromBufferAttribute:function(va,_a,_s){return _s!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=va.getX(_a),this.y=va.getY(_a),this.z=va.getZ(_a),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s,Fs,Os,Gs,Ns){var Vs=this.elements;return Vs[0]=va,Vs[4]=_a,Vs[8]=_s,Vs[12]=Ss,Vs[1]=Ms,Vs[5]=Cs,Vs[9]=Ts,Vs[13]=Bs,Vs[2]=Ps,Vs[6]=Ls,Vs[10]=Rs,Vs[14]=$s,Vs[3]=Fs,Vs[7]=Os,Vs[11]=Gs,Vs[15]=Ns,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(va){var _a=this.elements,_s=va.elements;return _a[0]=_s[0],_a[1]=_s[1],_a[2]=_s[2],_a[3]=_s[3],_a[4]=_s[4],_a[5]=_s[5],_a[6]=_s[6],_a[7]=_s[7],_a[8]=_s[8],_a[9]=_s[9],_a[10]=_s[10],_a[11]=_s[11],_a[12]=_s[12],_a[13]=_s[13],_a[14]=_s[14],_a[15]=_s[15],this},copyPosition:function(va){var _a=this.elements,_s=va.elements;return _a[12]=_s[12],_a[13]=_s[13],_a[14]=_s[14],this},extractBasis:function(va,_a,_s){return va.setFromMatrixColumn(this,0),_a.setFromMatrixColumn(this,1),_s.setFromMatrixColumn(this,2),this},makeBasis:function(va,_a,_s){return this.set(va.x,_a.x,_s.x,0,va.y,_a.y,_s.y,0,va.z,_a.z,_s.z,0,0,0,0,1),this},extractRotation:function(va){var _a=this.elements,_s=va.elements,Ss=1/_v1.setFromMatrixColumn(va,0).length(),Ms=1/_v1.setFromMatrixColumn(va,1).length(),Cs=1/_v1.setFromMatrixColumn(va,2).length();return _a[0]=_s[0]*Ss,_a[1]=_s[1]*Ss,_a[2]=_s[2]*Ss,_a[3]=0,_a[4]=_s[4]*Ms,_a[5]=_s[5]*Ms,_a[6]=_s[6]*Ms,_a[7]=0,_a[8]=_s[8]*Cs,_a[9]=_s[9]*Cs,_a[10]=_s[10]*Cs,_a[11]=0,_a[12]=0,_a[13]=0,_a[14]=0,_a[15]=1,this},makeRotationFromEuler:function(va){va&&va.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var _a=this.elements,_s=va.x,Ss=va.y,Ms=va.z,Cs=Math.cos(_s),Ts=Math.sin(_s),Bs=Math.cos(Ss),Ps=Math.sin(Ss),Ls=Math.cos(Ms),Rs=Math.sin(Ms);if(va.order==="XYZ"){var $s=Cs*Ls,Fs=Cs*Rs,Os=Ts*Ls,Gs=Ts*Rs;_a[0]=Bs*Ls,_a[4]=-Bs*Rs,_a[8]=Ps,_a[1]=Fs+Os*Ps,_a[5]=$s-Gs*Ps,_a[9]=-Ts*Bs,_a[2]=Gs-$s*Ps,_a[6]=Os+Fs*Ps,_a[10]=Cs*Bs}else if(va.order==="YXZ"){var Ns=Bs*Ls,Vs=Bs*Rs,Ds=Ps*Ls,ks=Ps*Rs;_a[0]=Ns+ks*Ts,_a[4]=Ds*Ts-Vs,_a[8]=Cs*Ps,_a[1]=Cs*Rs,_a[5]=Cs*Ls,_a[9]=-Ts,_a[2]=Vs*Ts-Ds,_a[6]=ks+Ns*Ts,_a[10]=Cs*Bs}else if(va.order==="ZXY"){var Ns=Bs*Ls,Vs=Bs*Rs,Ds=Ps*Ls,ks=Ps*Rs;_a[0]=Ns-ks*Ts,_a[4]=-Cs*Rs,_a[8]=Ds+Vs*Ts,_a[1]=Vs+Ds*Ts,_a[5]=Cs*Ls,_a[9]=ks-Ns*Ts,_a[2]=-Cs*Ps,_a[6]=Ts,_a[10]=Cs*Bs}else if(va.order==="ZYX"){var $s=Cs*Ls,Fs=Cs*Rs,Os=Ts*Ls,Gs=Ts*Rs;_a[0]=Bs*Ls,_a[4]=Os*Ps-Fs,_a[8]=$s*Ps+Gs,_a[1]=Bs*Rs,_a[5]=Gs*Ps+$s,_a[9]=Fs*Ps-Os,_a[2]=-Ps,_a[6]=Ts*Bs,_a[10]=Cs*Bs}else if(va.order==="YZX"){var Us=Cs*Bs,zs=Cs*Ps,Ws=Ts*Bs,qs=Ts*Ps;_a[0]=Bs*Ls,_a[4]=qs-Us*Rs,_a[8]=Ws*Rs+zs,_a[1]=Rs,_a[5]=Cs*Ls,_a[9]=-Ts*Ls,_a[2]=-Ps*Ls,_a[6]=zs*Rs+Ws,_a[10]=Us-qs*Rs}else if(va.order==="XZY"){var Us=Cs*Bs,zs=Cs*Ps,Ws=Ts*Bs,qs=Ts*Ps;_a[0]=Bs*Ls,_a[4]=-Rs,_a[8]=Ps*Ls,_a[1]=Us*Rs+qs,_a[5]=Cs*Ls,_a[9]=zs*Rs-Ws,_a[2]=Ws*Rs-zs,_a[6]=Ts*Ls,_a[10]=qs*Rs+Us}return _a[3]=0,_a[7]=0,_a[11]=0,_a[12]=0,_a[13]=0,_a[14]=0,_a[15]=1,this},makeRotationFromQuaternion:function(va){return this.compose(_zero,va,_one)},lookAt:function(va,_a,_s){var Ss=this.elements;return _z.subVectors(va,_a),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(_s,_z),_x.lengthSq()===0&&(Math.abs(_s.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(_s,_z)),_x.normalize(),_y.crossVectors(_z,_x),Ss[0]=_x.x,Ss[4]=_y.x,Ss[8]=_z.x,Ss[1]=_x.y,Ss[5]=_y.y,Ss[9]=_z.y,Ss[2]=_x.z,Ss[6]=_y.z,Ss[10]=_z.z,this},multiply:function(va,_a){return _a!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(va,_a)):this.multiplyMatrices(this,va)},premultiply:function(va){return this.multiplyMatrices(va,this)},multiplyMatrices:function(va,_a){var _s=va.elements,Ss=_a.elements,Ms=this.elements,Cs=_s[0],Ts=_s[4],Bs=_s[8],Ps=_s[12],Ls=_s[1],Rs=_s[5],$s=_s[9],Fs=_s[13],Os=_s[2],Gs=_s[6],Ns=_s[10],Vs=_s[14],Ds=_s[3],ks=_s[7],Us=_s[11],zs=_s[15],Ws=Ss[0],qs=Ss[4],Zs=Ss[8],el=Ss[12],Js=Ss[1],Hs=Ss[5],Qs=Ss[9],js=Ss[13],Ks=Ss[2],Xs=Ss[6],Ys=Ss[10],rl=Ss[14],tl=Ss[3],il=Ss[7],ll=Ss[11],cl=Ss[15];return Ms[0]=Cs*Ws+Ts*Js+Bs*Ks+Ps*tl,Ms[4]=Cs*qs+Ts*Hs+Bs*Xs+Ps*il,Ms[8]=Cs*Zs+Ts*Qs+Bs*Ys+Ps*ll,Ms[12]=Cs*el+Ts*js+Bs*rl+Ps*cl,Ms[1]=Ls*Ws+Rs*Js+$s*Ks+Fs*tl,Ms[5]=Ls*qs+Rs*Hs+$s*Xs+Fs*il,Ms[9]=Ls*Zs+Rs*Qs+$s*Ys+Fs*ll,Ms[13]=Ls*el+Rs*js+$s*rl+Fs*cl,Ms[2]=Os*Ws+Gs*Js+Ns*Ks+Vs*tl,Ms[6]=Os*qs+Gs*Hs+Ns*Xs+Vs*il,Ms[10]=Os*Zs+Gs*Qs+Ns*Ys+Vs*ll,Ms[14]=Os*el+Gs*js+Ns*rl+Vs*cl,Ms[3]=Ds*Ws+ks*Js+Us*Ks+zs*tl,Ms[7]=Ds*qs+ks*Hs+Us*Xs+zs*il,Ms[11]=Ds*Zs+ks*Qs+Us*Ys+zs*ll,Ms[15]=Ds*el+ks*js+Us*rl+zs*cl,this},multiplyScalar:function(va){var _a=this.elements;return _a[0]*=va,_a[4]*=va,_a[8]*=va,_a[12]*=va,_a[1]*=va,_a[5]*=va,_a[9]*=va,_a[13]*=va,_a[2]*=va,_a[6]*=va,_a[10]*=va,_a[14]*=va,_a[3]*=va,_a[7]*=va,_a[11]*=va,_a[15]*=va,this},determinant:function(){var va=this.elements,_a=va[0],_s=va[4],Ss=va[8],Ms=va[12],Cs=va[1],Ts=va[5],Bs=va[9],Ps=va[13],Ls=va[2],Rs=va[6],$s=va[10],Fs=va[14],Os=va[3],Gs=va[7],Ns=va[11],Vs=va[15];return Os*(+Ms*Bs*Rs-Ss*Ps*Rs-Ms*Ts*$s+_s*Ps*$s+Ss*Ts*Fs-_s*Bs*Fs)+Gs*(+_a*Bs*Fs-_a*Ps*$s+Ms*Cs*$s-Ss*Cs*Fs+Ss*Ps*Ls-Ms*Bs*Ls)+Ns*(+_a*Ps*Rs-_a*Ts*Fs-Ms*Cs*Rs+_s*Cs*Fs+Ms*Ts*Ls-_s*Ps*Ls)+Vs*(-Ss*Ts*Ls-_a*Bs*Rs+_a*Ts*$s+Ss*Cs*Rs-_s*Cs*$s+_s*Bs*Ls)},transpose:function(){var va=this.elements,_a;return _a=va[1],va[1]=va[4],va[4]=_a,_a=va[2],va[2]=va[8],va[8]=_a,_a=va[6],va[6]=va[9],va[9]=_a,_a=va[3],va[3]=va[12],va[12]=_a,_a=va[7],va[7]=va[13],va[13]=_a,_a=va[11],va[11]=va[14],va[14]=_a,this},setPosition:function(va,_a,_s){var Ss=this.elements;return va.isVector3?(Ss[12]=va.x,Ss[13]=va.y,Ss[14]=va.z):(Ss[12]=va,Ss[13]=_a,Ss[14]=_s),this},getInverse:function(va,_a){_a!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var _s=this.elements,Ss=va.elements,Ms=Ss[0],Cs=Ss[1],Ts=Ss[2],Bs=Ss[3],Ps=Ss[4],Ls=Ss[5],Rs=Ss[6],$s=Ss[7],Fs=Ss[8],Os=Ss[9],Gs=Ss[10],Ns=Ss[11],Vs=Ss[12],Ds=Ss[13],ks=Ss[14],Us=Ss[15],zs=Os*ks*$s-Ds*Gs*$s+Ds*Rs*Ns-Ls*ks*Ns-Os*Rs*Us+Ls*Gs*Us,Ws=Vs*Gs*$s-Fs*ks*$s-Vs*Rs*Ns+Ps*ks*Ns+Fs*Rs*Us-Ps*Gs*Us,qs=Fs*Ds*$s-Vs*Os*$s+Vs*Ls*Ns-Ps*Ds*Ns-Fs*Ls*Us+Ps*Os*Us,Zs=Vs*Os*Rs-Fs*Ds*Rs-Vs*Ls*Gs+Ps*Ds*Gs+Fs*Ls*ks-Ps*Os*ks,el=Ms*zs+Cs*Ws+Ts*qs+Bs*Zs;if(el===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var Js=1/el;return _s[0]=zs*Js,_s[1]=(Ds*Gs*Bs-Os*ks*Bs-Ds*Ts*Ns+Cs*ks*Ns+Os*Ts*Us-Cs*Gs*Us)*Js,_s[2]=(Ls*ks*Bs-Ds*Rs*Bs+Ds*Ts*$s-Cs*ks*$s-Ls*Ts*Us+Cs*Rs*Us)*Js,_s[3]=(Os*Rs*Bs-Ls*Gs*Bs-Os*Ts*$s+Cs*Gs*$s+Ls*Ts*Ns-Cs*Rs*Ns)*Js,_s[4]=Ws*Js,_s[5]=(Fs*ks*Bs-Vs*Gs*Bs+Vs*Ts*Ns-Ms*ks*Ns-Fs*Ts*Us+Ms*Gs*Us)*Js,_s[6]=(Vs*Rs*Bs-Ps*ks*Bs-Vs*Ts*$s+Ms*ks*$s+Ps*Ts*Us-Ms*Rs*Us)*Js,_s[7]=(Ps*Gs*Bs-Fs*Rs*Bs+Fs*Ts*$s-Ms*Gs*$s-Ps*Ts*Ns+Ms*Rs*Ns)*Js,_s[8]=qs*Js,_s[9]=(Vs*Os*Bs-Fs*Ds*Bs-Vs*Cs*Ns+Ms*Ds*Ns+Fs*Cs*Us-Ms*Os*Us)*Js,_s[10]=(Ps*Ds*Bs-Vs*Ls*Bs+Vs*Cs*$s-Ms*Ds*$s-Ps*Cs*Us+Ms*Ls*Us)*Js,_s[11]=(Fs*Ls*Bs-Ps*Os*Bs-Fs*Cs*$s+Ms*Os*$s+Ps*Cs*Ns-Ms*Ls*Ns)*Js,_s[12]=Zs*Js,_s[13]=(Fs*Ds*Ts-Vs*Os*Ts+Vs*Cs*Gs-Ms*Ds*Gs-Fs*Cs*ks+Ms*Os*ks)*Js,_s[14]=(Vs*Ls*Ts-Ps*Ds*Ts-Vs*Cs*Rs+Ms*Ds*Rs+Ps*Cs*ks-Ms*Ls*ks)*Js,_s[15]=(Ps*Os*Ts-Fs*Ls*Ts+Fs*Cs*Rs-Ms*Os*Rs-Ps*Cs*Gs+Ms*Ls*Gs)*Js,this},scale:function(va){var _a=this.elements,_s=va.x,Ss=va.y,Ms=va.z;return _a[0]*=_s,_a[4]*=Ss,_a[8]*=Ms,_a[1]*=_s,_a[5]*=Ss,_a[9]*=Ms,_a[2]*=_s,_a[6]*=Ss,_a[10]*=Ms,_a[3]*=_s,_a[7]*=Ss,_a[11]*=Ms,this},getMaxScaleOnAxis:function(){var va=this.elements,_a=va[0]*va[0]+va[1]*va[1]+va[2]*va[2],_s=va[4]*va[4]+va[5]*va[5]+va[6]*va[6],Ss=va[8]*va[8]+va[9]*va[9]+va[10]*va[10];return Math.sqrt(Math.max(_a,_s,Ss))},makeTranslation:function(va,_a,_s){return this.set(1,0,0,va,0,1,0,_a,0,0,1,_s,0,0,0,1),this},makeRotationX:function(va){var _a=Math.cos(va),_s=Math.sin(va);return this.set(1,0,0,0,0,_a,-_s,0,0,_s,_a,0,0,0,0,1),this},makeRotationY:function(va){var _a=Math.cos(va),_s=Math.sin(va);return this.set(_a,0,_s,0,0,1,0,0,-_s,0,_a,0,0,0,0,1),this},makeRotationZ:function(va){var _a=Math.cos(va),_s=Math.sin(va);return this.set(_a,-_s,0,0,_s,_a,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(va,_a){var _s=Math.cos(_a),Ss=Math.sin(_a),Ms=1-_s,Cs=va.x,Ts=va.y,Bs=va.z,Ps=Ms*Cs,Ls=Ms*Ts;return this.set(Ps*Cs+_s,Ps*Ts-Ss*Bs,Ps*Bs+Ss*Ts,0,Ps*Ts+Ss*Bs,Ls*Ts+_s,Ls*Bs-Ss*Cs,0,Ps*Bs-Ss*Ts,Ls*Bs+Ss*Cs,Ms*Bs*Bs+_s,0,0,0,0,1),this},makeScale:function(va,_a,_s){return this.set(va,0,0,0,0,_a,0,0,0,0,_s,0,0,0,0,1),this},makeShear:function(va,_a,_s){return this.set(1,_a,_s,0,va,1,_s,0,va,_a,1,0,0,0,0,1),this},compose:function(va,_a,_s){var Ss=this.elements,Ms=_a._x,Cs=_a._y,Ts=_a._z,Bs=_a._w,Ps=Ms+Ms,Ls=Cs+Cs,Rs=Ts+Ts,$s=Ms*Ps,Fs=Ms*Ls,Os=Ms*Rs,Gs=Cs*Ls,Ns=Cs*Rs,Vs=Ts*Rs,Ds=Bs*Ps,ks=Bs*Ls,Us=Bs*Rs,zs=_s.x,Ws=_s.y,qs=_s.z;return Ss[0]=(1-(Gs+Vs))*zs,Ss[1]=(Fs+Us)*zs,Ss[2]=(Os-ks)*zs,Ss[3]=0,Ss[4]=(Fs-Us)*Ws,Ss[5]=(1-($s+Vs))*Ws,Ss[6]=(Ns+Ds)*Ws,Ss[7]=0,Ss[8]=(Os+ks)*qs,Ss[9]=(Ns-Ds)*qs,Ss[10]=(1-($s+Gs))*qs,Ss[11]=0,Ss[12]=va.x,Ss[13]=va.y,Ss[14]=va.z,Ss[15]=1,this},decompose:function(va,_a,_s){var Ss=this.elements,Ms=_v1.set(Ss[0],Ss[1],Ss[2]).length(),Cs=_v1.set(Ss[4],Ss[5],Ss[6]).length(),Ts=_v1.set(Ss[8],Ss[9],Ss[10]).length(),Bs=this.determinant();Bs<0&&(Ms=-Ms),va.x=Ss[12],va.y=Ss[13],va.z=Ss[14],_m1.copy(this);var Ps=1/Ms,Ls=1/Cs,Rs=1/Ts;return _m1.elements[0]*=Ps,_m1.elements[1]*=Ps,_m1.elements[2]*=Ps,_m1.elements[4]*=Ls,_m1.elements[5]*=Ls,_m1.elements[6]*=Ls,_m1.elements[8]*=Rs,_m1.elements[9]*=Rs,_m1.elements[10]*=Rs,_a.setFromRotationMatrix(_m1),_s.x=Ms,_s.y=Cs,_s.z=Ts,this},makePerspective:function(va,_a,_s,Ss,Ms,Cs){Cs===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Ts=this.elements,Bs=2*Ms/(_a-va),Ps=2*Ms/(_s-Ss),Ls=(_a+va)/(_a-va),Rs=(_s+Ss)/(_s-Ss),$s=-(Cs+Ms)/(Cs-Ms),Fs=-2*Cs*Ms/(Cs-Ms);return Ts[0]=Bs,Ts[4]=0,Ts[8]=Ls,Ts[12]=0,Ts[1]=0,Ts[5]=Ps,Ts[9]=Rs,Ts[13]=0,Ts[2]=0,Ts[6]=0,Ts[10]=$s,Ts[14]=Fs,Ts[3]=0,Ts[7]=0,Ts[11]=-1,Ts[15]=0,this},makeOrthographic:function(va,_a,_s,Ss,Ms,Cs){var Ts=this.elements,Bs=1/(_a-va),Ps=1/(_s-Ss),Ls=1/(Cs-Ms),Rs=(_a+va)*Bs,$s=(_s+Ss)*Ps,Fs=(Cs+Ms)*Ls;return Ts[0]=2*Bs,Ts[4]=0,Ts[8]=0,Ts[12]=-Rs,Ts[1]=0,Ts[5]=2*Ps,Ts[9]=0,Ts[13]=-$s,Ts[2]=0,Ts[6]=0,Ts[10]=-2*Ls,Ts[14]=-Fs,Ts[3]=0,Ts[7]=0,Ts[11]=0,Ts[15]=1,this},equals:function(va){for(var _a=this.elements,_s=va.elements,Ss=0;Ss<16;Ss++)if(_a[Ss]!==_s[Ss])return!1;return!0},fromArray:function(va,_a){_a===void 0&&(_a=0);for(var _s=0;_s<16;_s++)this.elements[_s]=va[_s+_a];return this},toArray:function(va,_a){va===void 0&&(va=[]),_a===void 0&&(_a=0);var _s=this.elements;return va[_a]=_s[0],va[_a+1]=_s[1],va[_a+2]=_s[2],va[_a+3]=_s[3],va[_a+4]=_s[4],va[_a+5]=_s[5],va[_a+6]=_s[6],va[_a+7]=_s[7],va[_a+8]=_s[8],va[_a+9]=_s[9],va[_a+10]=_s[10],va[_a+11]=_s[11],va[_a+12]=_s[12],va[_a+13]=_s[13],va[_a+14]=_s[14],va[_a+15]=_s[15],va}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(va,_a,_s,Ss){this._x=va||0,this._y=_a||0,this._z=_s||0,this._order=Ss||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(va){this._x=va,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(va){this._y=va,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(va){this._z=va,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(va){this._order=va,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(va,_a,_s,Ss){return this._x=va,this._y=_a,this._z=_s,this._order=Ss||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(va){return this._x=va._x,this._y=va._y,this._z=va._z,this._order=va._order,this._onChangeCallback(),this},setFromRotationMatrix:function(va,_a,_s){var Ss=MathUtils.clamp,Ms=va.elements,Cs=Ms[0],Ts=Ms[4],Bs=Ms[8],Ps=Ms[1],Ls=Ms[5],Rs=Ms[9],$s=Ms[2],Fs=Ms[6],Os=Ms[10];switch(_a=_a||this._order,_a){case"XYZ":this._y=Math.asin(Ss(Bs,-1,1)),Math.abs(Bs)<.9999999?(this._x=Math.atan2(-Rs,Os),this._z=Math.atan2(-Ts,Cs)):(this._x=Math.atan2(Fs,Ls),this._z=0);break;case"YXZ":this._x=Math.asin(-Ss(Rs,-1,1)),Math.abs(Rs)<.9999999?(this._y=Math.atan2(Bs,Os),this._z=Math.atan2(Ps,Ls)):(this._y=Math.atan2(-$s,Cs),this._z=0);break;case"ZXY":this._x=Math.asin(Ss(Fs,-1,1)),Math.abs(Fs)<.9999999?(this._y=Math.atan2(-$s,Os),this._z=Math.atan2(-Ts,Ls)):(this._y=0,this._z=Math.atan2(Ps,Cs));break;case"ZYX":this._y=Math.asin(-Ss($s,-1,1)),Math.abs($s)<.9999999?(this._x=Math.atan2(Fs,Os),this._z=Math.atan2(Ps,Cs)):(this._x=0,this._z=Math.atan2(-Ts,Ls));break;case"YZX":this._z=Math.asin(Ss(Ps,-1,1)),Math.abs(Ps)<.9999999?(this._x=Math.atan2(-Rs,Ls),this._y=Math.atan2(-$s,Cs)):(this._x=0,this._y=Math.atan2(Bs,Os));break;case"XZY":this._z=Math.asin(-Ss(Ts,-1,1)),Math.abs(Ts)<.9999999?(this._x=Math.atan2(Fs,Ls),this._y=Math.atan2(Bs,Cs)):(this._x=Math.atan2(-Rs,Os),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+_a)}return this._order=_a,_s!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(va,_a,_s){return _matrix.makeRotationFromQuaternion(va),this.setFromRotationMatrix(_matrix,_a,_s)},setFromVector3:function(va,_a){return this.set(va.x,va.y,va.z,_a||this._order)},reorder:function(va){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,va)},equals:function(va){return va._x===this._x&&va._y===this._y&&va._z===this._z&&va._order===this._order},fromArray:function(va){return this._x=va[0],this._y=va[1],this._z=va[2],va[3]!==void 0&&(this._order=va[3]),this._onChangeCallback(),this},toArray:function(va,_a){return va===void 0&&(va=[]),_a===void 0&&(_a=0),va[_a]=this._x,va[_a+1]=this._y,va[_a+2]=this._z,va[_a+3]=this._order,va},toVector3:function(va){return va?va.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(va){return this._onChangeCallback=va,this},_onChangeCallback:function(){}});function Layers(){this.mask=1}Object.assign(Layers.prototype,{set:function(va){this.mask=1<<va|0},enable:function(va){this.mask|=1<<va|0},enableAll:function(){this.mask=-1},toggle:function(va){this.mask^=1<<va|0},disable:function(va){this.mask&=~(1<<va|0)},disableAll:function(){this.mask=0},test:function(va){return(this.mask&va.mask)!==0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var va=new Vector3,_a=new Euler,_s=new Quaternion,Ss=new Vector3(1,1,1);function Ms(){_s.setFromEuler(_a,!1)}function Cs(){_a.setFromQuaternion(_s,void 0,!1)}_a._onChange(Ms),_s._onChange(Cs),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:va},rotation:{configurable:!0,enumerable:!0,value:_a},quaternion:{configurable:!0,enumerable:!0,value:_s},scale:{configurable:!0,enumerable:!0,value:Ss},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(va){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(va),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(va){return this.quaternion.premultiply(va),this},setRotationFromAxisAngle:function(va,_a){this.quaternion.setFromAxisAngle(va,_a)},setRotationFromEuler:function(va){this.quaternion.setFromEuler(va,!0)},setRotationFromMatrix:function(va){this.quaternion.setFromRotationMatrix(va)},setRotationFromQuaternion:function(va){this.quaternion.copy(va)},rotateOnAxis:function(va,_a){return _q1.setFromAxisAngle(va,_a),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(va,_a){return _q1.setFromAxisAngle(va,_a),this.quaternion.premultiply(_q1),this},rotateX:function(va){return this.rotateOnAxis(_xAxis,va)},rotateY:function(va){return this.rotateOnAxis(_yAxis,va)},rotateZ:function(va){return this.rotateOnAxis(_zAxis,va)},translateOnAxis:function(va,_a){return _v1$1.copy(va).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar(_a)),this},translateX:function(va){return this.translateOnAxis(_xAxis,va)},translateY:function(va){return this.translateOnAxis(_yAxis,va)},translateZ:function(va){return this.translateOnAxis(_zAxis,va)},localToWorld:function(va){return va.applyMatrix4(this.matrixWorld)},worldToLocal:function(va){return va.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(va,_a,_s){va.isVector3?_target.copy(va):_target.set(va,_a,_s);var Ss=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),Ss&&(_m1$1.extractRotation(Ss.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(va){if(arguments.length>1){for(var _a=0;_a<arguments.length;_a++)this.add(arguments[_a]);return this}return va===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",va),this):(va&&va.isObject3D?(va.parent!==null&&va.parent.remove(va),va.parent=this,this.children.push(va),va.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",va),this)},remove:function(va){if(arguments.length>1){for(var _a=0;_a<arguments.length;_a++)this.remove(arguments[_a]);return this}var _s=this.children.indexOf(va);return _s!==-1&&(va.parent=null,this.children.splice(_s,1),va.dispatchEvent(_removedEvent)),this},attach:function(va){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),va.parent!==null&&(va.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(va.parent.matrixWorld)),va.applyMatrix4(_m1$1),va.updateWorldMatrix(!1,!1),this.add(va),this},getObjectById:function(va){return this.getObjectByProperty("id",va)},getObjectByName:function(va){return this.getObjectByProperty("name",va)},getObjectByProperty:function(va,_a){if(this[va]===_a)return this;for(var _s=0,Ss=this.children.length;_s<Ss;_s++){var Ms=this.children[_s],Cs=Ms.getObjectByProperty(va,_a);if(Cs!==void 0)return Cs}},getWorldPosition:function(va){return va===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),va=new Vector3),this.updateMatrixWorld(!0),va.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(va){return va===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),va=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,va,_scale),va},getWorldScale:function(va){return va===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),va=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,va),va},getWorldDirection:function(va){va===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),va=new Vector3),this.updateMatrixWorld(!0);var _a=this.matrixWorld.elements;return va.set(_a[8],_a[9],_a[10]).normalize()},raycast:function(){},traverse:function(va){va(this);for(var _a=this.children,_s=0,Ss=_a.length;_s<Ss;_s++)_a[_s].traverse(va)},traverseVisible:function(va){if(this.visible!==!1){va(this);for(var _a=this.children,_s=0,Ss=_a.length;_s<Ss;_s++)_a[_s].traverseVisible(va)}},traverseAncestors:function(va){var _a=this.parent;_a!==null&&(va(_a),_a.traverseAncestors(va))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(va){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||va)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,va=!0);for(var _a=this.children,_s=0,Ss=_a.length;_s<Ss;_s++)_a[_s].updateMatrixWorld(va)},updateWorldMatrix:function(va,_a){var _s=this.parent;if(va===!0&&_s!==null&&_s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),_a===!0)for(var Ss=this.children,Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Ss[Ms].updateWorldMatrix(!1,!0)},toJSON:function(va){var _a=va===void 0||typeof va=="string",_s={};_a&&(va={geometries:{},materials:{},textures:{},images:{},shapes:{}},_s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var Ss={};Ss.uuid=this.uuid,Ss.type=this.type,this.name!==""&&(Ss.name=this.name),this.castShadow===!0&&(Ss.castShadow=!0),this.receiveShadow===!0&&(Ss.receiveShadow=!0),this.visible===!1&&(Ss.visible=!1),this.frustumCulled===!1&&(Ss.frustumCulled=!1),this.renderOrder!==0&&(Ss.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(Ss.userData=this.userData),Ss.layers=this.layers.mask,Ss.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(Ss.matrixAutoUpdate=!1),this.isInstancedMesh&&(Ss.type="InstancedMesh",Ss.count=this.count,Ss.instanceMatrix=this.instanceMatrix.toJSON());function Ms(Vs,Ds){return Vs[Ds.uuid]===void 0&&(Vs[Ds.uuid]=Ds.toJSON(va)),Ds.uuid}if(this.isMesh||this.isLine||this.isPoints){Ss.geometry=Ms(va.geometries,this.geometry);var Cs=this.geometry.parameters;if(Cs!==void 0&&Cs.shapes!==void 0){var Ts=Cs.shapes;if(Array.isArray(Ts))for(var Bs=0,Ps=Ts.length;Bs<Ps;Bs++){var Ls=Ts[Bs];Ms(va.shapes,Ls)}else Ms(va.shapes,Ts)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var Rs=[],Bs=0,Ps=this.material.length;Bs<Ps;Bs++)Rs.push(Ms(va.materials,this.material[Bs]));Ss.material=Rs}else Ss.material=Ms(va.materials,this.material);if(this.children.length>0){Ss.children=[];for(var Bs=0;Bs<this.children.length;Bs++)Ss.children.push(this.children[Bs].toJSON(va).object)}if(_a){var $s=Ns(va.geometries),Fs=Ns(va.materials),Os=Ns(va.textures),Gs=Ns(va.images),Ts=Ns(va.shapes);$s.length>0&&(_s.geometries=$s),Fs.length>0&&(_s.materials=Fs),Os.length>0&&(_s.textures=Os),Gs.length>0&&(_s.images=Gs),Ts.length>0&&(_s.shapes=Ts)}return _s.object=Ss,_s;function Ns(Vs){var Ds=[];for(var ks in Vs){var Us=Vs[ks];delete Us.metadata,Ds.push(Us)}return Ds}},clone:function(va){return new this.constructor().copy(this,va)},copy:function(va,_a){if(_a===void 0&&(_a=!0),this.name=va.name,this.up.copy(va.up),this.position.copy(va.position),this.quaternion.copy(va.quaternion),this.scale.copy(va.scale),this.matrix.copy(va.matrix),this.matrixWorld.copy(va.matrixWorld),this.matrixAutoUpdate=va.matrixAutoUpdate,this.matrixWorldNeedsUpdate=va.matrixWorldNeedsUpdate,this.layers.mask=va.layers.mask,this.visible=va.visible,this.castShadow=va.castShadow,this.receiveShadow=va.receiveShadow,this.frustumCulled=va.frustumCulled,this.renderOrder=va.renderOrder,this.userData=JSON.parse(JSON.stringify(va.userData)),_a===!0)for(var _s=0;_s<va.children.length;_s++){var Ss=va.children[_s];this.add(Ss.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(va,_a){return Object3D.prototype.copy.call(this,va,_a),va.background!==null&&(this.background=va.background.clone()),va.environment!==null&&(this.environment=va.environment.clone()),va.fog!==null&&(this.fog=va.fog.clone()),va.overrideMaterial!==null&&(this.overrideMaterial=va.overrideMaterial.clone()),this.autoUpdate=va.autoUpdate,this.matrixAutoUpdate=va.matrixAutoUpdate,this},toJSON:function(va){var _a=Object3D.prototype.toJSON.call(this,va);return this.background!==null&&(_a.object.background=this.background.toJSON(va)),this.environment!==null&&(_a.object.environment=this.environment.toJSON(va)),this.fog!==null&&(_a.object.fog=this.fog.toJSON()),_a},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(va,_a){this.min=va!==void 0?va:new Vector3(1/0,1/0,1/0),this.max=_a!==void 0?_a:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(va,_a){return this.min.copy(va),this.max.copy(_a),this},setFromArray:function(va){for(var _a=1/0,_s=1/0,Ss=1/0,Ms=-1/0,Cs=-1/0,Ts=-1/0,Bs=0,Ps=va.length;Bs<Ps;Bs+=3){var Ls=va[Bs],Rs=va[Bs+1],$s=va[Bs+2];Ls<_a&&(_a=Ls),Rs<_s&&(_s=Rs),$s<Ss&&(Ss=$s),Ls>Ms&&(Ms=Ls),Rs>Cs&&(Cs=Rs),$s>Ts&&(Ts=$s)}return this.min.set(_a,_s,Ss),this.max.set(Ms,Cs,Ts),this},setFromBufferAttribute:function(va){for(var _a=1/0,_s=1/0,Ss=1/0,Ms=-1/0,Cs=-1/0,Ts=-1/0,Bs=0,Ps=va.count;Bs<Ps;Bs++){var Ls=va.getX(Bs),Rs=va.getY(Bs),$s=va.getZ(Bs);Ls<_a&&(_a=Ls),Rs<_s&&(_s=Rs),$s<Ss&&(Ss=$s),Ls>Ms&&(Ms=Ls),Rs>Cs&&(Cs=Rs),$s>Ts&&(Ts=$s)}return this.min.set(_a,_s,Ss),this.max.set(Ms,Cs,Ts),this},setFromPoints:function(va){this.makeEmpty();for(var _a=0,_s=va.length;_a<_s;_a++)this.expandByPoint(va[_a]);return this},setFromCenterAndSize:function(va,_a){var _s=_vector$1.copy(_a).multiplyScalar(.5);return this.min.copy(va).sub(_s),this.max.copy(va).add(_s),this},setFromObject:function(va){return this.makeEmpty(),this.expandByObject(va)},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.min.copy(va.min),this.max.copy(va.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(va){return va===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),va=new Vector3),this.isEmpty()?va.set(0,0,0):va.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(va){return va===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),va=new Vector3),this.isEmpty()?va.set(0,0,0):va.subVectors(this.max,this.min)},expandByPoint:function(va){return this.min.min(va),this.max.max(va),this},expandByVector:function(va){return this.min.sub(va),this.max.add(va),this},expandByScalar:function(va){return this.min.addScalar(-va),this.max.addScalar(va),this},expandByObject:function(va){va.updateWorldMatrix(!1,!1);var _a=va.geometry;_a!==void 0&&(_a.boundingBox===null&&_a.computeBoundingBox(),_box.copy(_a.boundingBox),_box.applyMatrix4(va.matrixWorld),this.union(_box));for(var _s=va.children,Ss=0,Ms=_s.length;Ss<Ms;Ss++)this.expandByObject(_s[Ss]);return this},containsPoint:function(va){return!(va.x<this.min.x||va.x>this.max.x||va.y<this.min.y||va.y>this.max.y||va.z<this.min.z||va.z>this.max.z)},containsBox:function(va){return this.min.x<=va.min.x&&va.max.x<=this.max.x&&this.min.y<=va.min.y&&va.max.y<=this.max.y&&this.min.z<=va.min.z&&va.max.z<=this.max.z},getParameter:function(va,_a){return _a===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),_a=new Vector3),_a.set((va.x-this.min.x)/(this.max.x-this.min.x),(va.y-this.min.y)/(this.max.y-this.min.y),(va.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(va){return!(va.max.x<this.min.x||va.min.x>this.max.x||va.max.y<this.min.y||va.min.y>this.max.y||va.max.z<this.min.z||va.min.z>this.max.z)},intersectsSphere:function(va){return this.clampPoint(va.center,_vector$1),_vector$1.distanceToSquared(va.center)<=va.radius*va.radius},intersectsPlane:function(va){var _a,_s;return va.normal.x>0?(_a=va.normal.x*this.min.x,_s=va.normal.x*this.max.x):(_a=va.normal.x*this.max.x,_s=va.normal.x*this.min.x),va.normal.y>0?(_a+=va.normal.y*this.min.y,_s+=va.normal.y*this.max.y):(_a+=va.normal.y*this.max.y,_s+=va.normal.y*this.min.y),va.normal.z>0?(_a+=va.normal.z*this.min.z,_s+=va.normal.z*this.max.z):(_a+=va.normal.z*this.max.z,_s+=va.normal.z*this.min.z),_a<=-va.constant&&_s>=-va.constant},intersectsTriangle:function(va){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(va.a,_center),_v1$2.subVectors(va.b,_center),_v2.subVectors(va.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var _a=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(_a,_v0,_v1$2,_v2,_extents)||(_a=[1,0,0,0,1,0,0,0,1],!satForAxes(_a,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),_a=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(_a,_v0,_v1$2,_v2,_extents))},clampPoint:function(va,_a){return _a===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),_a=new Vector3),_a.copy(va).clamp(this.min,this.max)},distanceToPoint:function(va){var _a=_vector$1.copy(va).clamp(this.min,this.max);return _a.sub(va).length()},getBoundingSphere:function(va){return va===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(va.center),va.radius=this.getSize(_vector$1).length()*.5,va},intersect:function(va){return this.min.max(va.min),this.max.min(va.max),this.isEmpty()&&this.makeEmpty(),this},union:function(va){return this.min.min(va.min),this.max.max(va.max),this},applyMatrix4:function(va){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(va),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(va),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(va),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(va),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(va),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(va),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(va),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(va),this.setFromPoints(_points),this)},translate:function(va){return this.min.add(va),this.max.add(va),this},equals:function(va){return va.min.equals(this.min)&&va.max.equals(this.max)}});function satForAxes(va,_a,_s,Ss,Ms){var Cs,Ts;for(Cs=0,Ts=va.length-3;Cs<=Ts;Cs+=3){_testAxis.fromArray(va,Cs);var Bs=Ms.x*Math.abs(_testAxis.x)+Ms.y*Math.abs(_testAxis.y)+Ms.z*Math.abs(_testAxis.z),Ps=_a.dot(_testAxis),Ls=_s.dot(_testAxis),Rs=Ss.dot(_testAxis);if(Math.max(-Math.max(Ps,Ls,Rs),Math.min(Ps,Ls,Rs))>Bs)return!1}return!0}var _box$1=new Box3;function Sphere(va,_a){this.center=va!==void 0?va:new Vector3,this.radius=_a!==void 0?_a:-1}Object.assign(Sphere.prototype,{set:function(va,_a){return this.center.copy(va),this.radius=_a,this},setFromPoints:function(va,_a){var _s=this.center;_a!==void 0?_s.copy(_a):_box$1.setFromPoints(va).getCenter(_s);for(var Ss=0,Ms=0,Cs=va.length;Ms<Cs;Ms++)Ss=Math.max(Ss,_s.distanceToSquared(va[Ms]));return this.radius=Math.sqrt(Ss),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.center.copy(va.center),this.radius=va.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(va){return va.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(va){return va.distanceTo(this.center)-this.radius},intersectsSphere:function(va){var _a=this.radius+va.radius;return va.center.distanceToSquared(this.center)<=_a*_a},intersectsBox:function(va){return va.intersectsSphere(this)},intersectsPlane:function(va){return Math.abs(va.distanceToPoint(this.center))<=this.radius},clampPoint:function(va,_a){var _s=this.center.distanceToSquared(va);return _a===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),_a=new Vector3),_a.copy(va),_s>this.radius*this.radius&&(_a.sub(this.center).normalize(),_a.multiplyScalar(this.radius).add(this.center)),_a},getBoundingBox:function(va){return va===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),va=new Box3),this.isEmpty()?(va.makeEmpty(),va):(va.set(this.center,this.center),va.expandByScalar(this.radius),va)},applyMatrix4:function(va){return this.center.applyMatrix4(va),this.radius=this.radius*va.getMaxScaleOnAxis(),this},translate:function(va){return this.center.add(va),this},equals:function(va){return va.center.equals(this.center)&&va.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(va,_a){this.origin=va!==void 0?va:new Vector3,this.direction=_a!==void 0?_a:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(va,_a){return this.origin.copy(va),this.direction.copy(_a),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.origin.copy(va.origin),this.direction.copy(va.direction),this},at:function(va,_a){return _a===void 0&&(console.warn("THREE.Ray: .at() target is now required"),_a=new Vector3),_a.copy(this.direction).multiplyScalar(va).add(this.origin)},lookAt:function(va){return this.direction.copy(va).sub(this.origin).normalize(),this},recast:function(va){return this.origin.copy(this.at(va,_vector$2)),this},closestPointToPoint:function(va,_a){_a===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),_a=new Vector3),_a.subVectors(va,this.origin);var _s=_a.dot(this.direction);return _s<0?_a.copy(this.origin):_a.copy(this.direction).multiplyScalar(_s).add(this.origin)},distanceToPoint:function(va){return Math.sqrt(this.distanceSqToPoint(va))},distanceSqToPoint:function(va){var _a=_vector$2.subVectors(va,this.origin).dot(this.direction);return _a<0?this.origin.distanceToSquared(va):(_vector$2.copy(this.direction).multiplyScalar(_a).add(this.origin),_vector$2.distanceToSquared(va))},distanceSqToSegment:function(va,_a,_s,Ss){_segCenter.copy(va).add(_a).multiplyScalar(.5),_segDir.copy(_a).sub(va).normalize(),_diff.copy(this.origin).sub(_segCenter);var Ms=va.distanceTo(_a)*.5,Cs=-this.direction.dot(_segDir),Ts=_diff.dot(this.direction),Bs=-_diff.dot(_segDir),Ps=_diff.lengthSq(),Ls=Math.abs(1-Cs*Cs),Rs,$s,Fs,Os;if(Ls>0)if(Rs=Cs*Bs-Ts,$s=Cs*Ts-Bs,Os=Ms*Ls,Rs>=0)if($s>=-Os)if($s<=Os){var Gs=1/Ls;Rs*=Gs,$s*=Gs,Fs=Rs*(Rs+Cs*$s+2*Ts)+$s*(Cs*Rs+$s+2*Bs)+Ps}else $s=Ms,Rs=Math.max(0,-(Cs*$s+Ts)),Fs=-Rs*Rs+$s*($s+2*Bs)+Ps;else $s=-Ms,Rs=Math.max(0,-(Cs*$s+Ts)),Fs=-Rs*Rs+$s*($s+2*Bs)+Ps;else $s<=-Os?(Rs=Math.max(0,-(-Cs*Ms+Ts)),$s=Rs>0?-Ms:Math.min(Math.max(-Ms,-Bs),Ms),Fs=-Rs*Rs+$s*($s+2*Bs)+Ps):$s<=Os?(Rs=0,$s=Math.min(Math.max(-Ms,-Bs),Ms),Fs=$s*($s+2*Bs)+Ps):(Rs=Math.max(0,-(Cs*Ms+Ts)),$s=Rs>0?Ms:Math.min(Math.max(-Ms,-Bs),Ms),Fs=-Rs*Rs+$s*($s+2*Bs)+Ps);else $s=Cs>0?-Ms:Ms,Rs=Math.max(0,-(Cs*$s+Ts)),Fs=-Rs*Rs+$s*($s+2*Bs)+Ps;return _s&&_s.copy(this.direction).multiplyScalar(Rs).add(this.origin),Ss&&Ss.copy(_segDir).multiplyScalar($s).add(_segCenter),Fs},intersectSphere:function(va,_a){_vector$2.subVectors(va.center,this.origin);var _s=_vector$2.dot(this.direction),Ss=_vector$2.dot(_vector$2)-_s*_s,Ms=va.radius*va.radius;if(Ss>Ms)return null;var Cs=Math.sqrt(Ms-Ss),Ts=_s-Cs,Bs=_s+Cs;return Ts<0&&Bs<0?null:Ts<0?this.at(Bs,_a):this.at(Ts,_a)},intersectsSphere:function(va){return this.distanceSqToPoint(va.center)<=va.radius*va.radius},distanceToPlane:function(va){var _a=va.normal.dot(this.direction);if(_a===0)return va.distanceToPoint(this.origin)===0?0:null;var _s=-(this.origin.dot(va.normal)+va.constant)/_a;return _s>=0?_s:null},intersectPlane:function(va,_a){var _s=this.distanceToPlane(va);return _s===null?null:this.at(_s,_a)},intersectsPlane:function(va){var _a=va.distanceToPoint(this.origin);if(_a===0)return!0;var _s=va.normal.dot(this.direction);return _s*_a<0},intersectBox:function(va,_a){var _s,Ss,Ms,Cs,Ts,Bs,Ps=1/this.direction.x,Ls=1/this.direction.y,Rs=1/this.direction.z,$s=this.origin;return Ps>=0?(_s=(va.min.x-$s.x)*Ps,Ss=(va.max.x-$s.x)*Ps):(_s=(va.max.x-$s.x)*Ps,Ss=(va.min.x-$s.x)*Ps),Ls>=0?(Ms=(va.min.y-$s.y)*Ls,Cs=(va.max.y-$s.y)*Ls):(Ms=(va.max.y-$s.y)*Ls,Cs=(va.min.y-$s.y)*Ls),_s>Cs||Ms>Ss||((Ms>_s||_s!==_s)&&(_s=Ms),(Cs<Ss||Ss!==Ss)&&(Ss=Cs),Rs>=0?(Ts=(va.min.z-$s.z)*Rs,Bs=(va.max.z-$s.z)*Rs):(Ts=(va.max.z-$s.z)*Rs,Bs=(va.min.z-$s.z)*Rs),_s>Bs||Ts>Ss)||((Ts>_s||_s!==_s)&&(_s=Ts),(Bs<Ss||Ss!==Ss)&&(Ss=Bs),Ss<0)?null:this.at(_s>=0?_s:Ss,_a)},intersectsBox:function(va){return this.intersectBox(va,_vector$2)!==null},intersectTriangle:function(va,_a,_s,Ss,Ms){_edge1.subVectors(_a,va),_edge2.subVectors(_s,va),_normal.crossVectors(_edge1,_edge2);var Cs=this.direction.dot(_normal),Ts;if(Cs>0){if(Ss)return null;Ts=1}else if(Cs<0)Ts=-1,Cs=-Cs;else return null;_diff.subVectors(this.origin,va);var Bs=Ts*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Bs<0)return null;var Ps=Ts*this.direction.dot(_edge1.cross(_diff));if(Ps<0||Bs+Ps>Cs)return null;var Ls=-Ts*_diff.dot(_normal);return Ls<0?null:this.at(Ls/Cs,Ms)},applyMatrix4:function(va){return this.origin.applyMatrix4(va),this.direction.transformDirection(va),this},equals:function(va){return va.origin.equals(this.origin)&&va.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(va,_a){this.normal=va!==void 0?va:new Vector3(1,0,0),this.constant=_a!==void 0?_a:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(va,_a){return this.normal.copy(va),this.constant=_a,this},setComponents:function(va,_a,_s,Ss){return this.normal.set(va,_a,_s),this.constant=Ss,this},setFromNormalAndCoplanarPoint:function(va,_a){return this.normal.copy(va),this.constant=-_a.dot(this.normal),this},setFromCoplanarPoints:function(va,_a,_s){var Ss=_vector1.subVectors(_s,_a).cross(_vector2.subVectors(va,_a)).normalize();return this.setFromNormalAndCoplanarPoint(Ss,va),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.normal.copy(va.normal),this.constant=va.constant,this},normalize:function(){var va=1/this.normal.length();return this.normal.multiplyScalar(va),this.constant*=va,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(va){return this.normal.dot(va)+this.constant},distanceToSphere:function(va){return this.distanceToPoint(va.center)-va.radius},projectPoint:function(va,_a){return _a===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),_a=new Vector3),_a.copy(this.normal).multiplyScalar(-this.distanceToPoint(va)).add(va)},intersectLine:function(va,_a){_a===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),_a=new Vector3);var _s=va.delta(_vector1),Ss=this.normal.dot(_s);if(Ss===0)return this.distanceToPoint(va.start)===0?_a.copy(va.start):void 0;var Ms=-(va.start.dot(this.normal)+this.constant)/Ss;if(!(Ms<0||Ms>1))return _a.copy(_s).multiplyScalar(Ms).add(va.start)},intersectsLine:function(va){var _a=this.distanceToPoint(va.start),_s=this.distanceToPoint(va.end);return _a<0&&_s>0||_s<0&&_a>0},intersectsBox:function(va){return va.intersectsPlane(this)},intersectsSphere:function(va){return va.intersectsPlane(this)},coplanarPoint:function(va){return va===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),va=new Vector3),va.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(va,_a){var _s=_a||_normalMatrix.getNormalMatrix(va),Ss=this.coplanarPoint(_vector1).applyMatrix4(va),Ms=this.normal.applyMatrix3(_s).normalize();return this.constant=-Ss.dot(Ms),this},translate:function(va){return this.constant-=va.dot(this.normal),this},equals:function(va){return va.normal.equals(this.normal)&&va.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(va,_a,_s){this.a=va!==void 0?va:new Vector3,this.b=_a!==void 0?_a:new Vector3,this.c=_s!==void 0?_s:new Vector3}Object.assign(Triangle,{getNormal:function(va,_a,_s,Ss){Ss===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),Ss=new Vector3),Ss.subVectors(_s,_a),_v0$1.subVectors(va,_a),Ss.cross(_v0$1);var Ms=Ss.lengthSq();return Ms>0?Ss.multiplyScalar(1/Math.sqrt(Ms)):Ss.set(0,0,0)},getBarycoord:function(va,_a,_s,Ss,Ms){_v0$1.subVectors(Ss,_a),_v1$3.subVectors(_s,_a),_v2$1.subVectors(va,_a);var Cs=_v0$1.dot(_v0$1),Ts=_v0$1.dot(_v1$3),Bs=_v0$1.dot(_v2$1),Ps=_v1$3.dot(_v1$3),Ls=_v1$3.dot(_v2$1),Rs=Cs*Ps-Ts*Ts;if(Ms===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),Ms=new Vector3),Rs===0)return Ms.set(-2,-1,-1);var $s=1/Rs,Fs=(Ps*Bs-Ts*Ls)*$s,Os=(Cs*Ls-Ts*Bs)*$s;return Ms.set(1-Fs-Os,Os,Fs)},containsPoint:function(va,_a,_s,Ss){return Triangle.getBarycoord(va,_a,_s,Ss,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(va,_a,_s,Ss,Ms,Cs,Ts,Bs){return this.getBarycoord(va,_a,_s,Ss,_v3),Bs.set(0,0),Bs.addScaledVector(Ms,_v3.x),Bs.addScaledVector(Cs,_v3.y),Bs.addScaledVector(Ts,_v3.z),Bs},isFrontFacing:function(va,_a,_s,Ss){return _v0$1.subVectors(_s,_a),_v1$3.subVectors(va,_a),_v0$1.cross(_v1$3).dot(Ss)<0}});Object.assign(Triangle.prototype,{set:function(va,_a,_s){return this.a.copy(va),this.b.copy(_a),this.c.copy(_s),this},setFromPointsAndIndices:function(va,_a,_s,Ss){return this.a.copy(va[_a]),this.b.copy(va[_s]),this.c.copy(va[Ss]),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.a.copy(va.a),this.b.copy(va.b),this.c.copy(va.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(va){return va===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),va=new Vector3),va.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(va){return Triangle.getNormal(this.a,this.b,this.c,va)},getPlane:function(va){return va===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),va=new Plane),va.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(va,_a){return Triangle.getBarycoord(va,this.a,this.b,this.c,_a)},getUV:function(va,_a,_s,Ss,Ms){return Triangle.getUV(va,this.a,this.b,this.c,_a,_s,Ss,Ms)},containsPoint:function(va){return Triangle.containsPoint(va,this.a,this.b,this.c)},isFrontFacing:function(va){return Triangle.isFrontFacing(this.a,this.b,this.c,va)},intersectsBox:function(va){return va.intersectsTriangle(this)},closestPointToPoint:function(va,_a){_a===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),_a=new Vector3);var _s=this.a,Ss=this.b,Ms=this.c,Cs,Ts;_vab.subVectors(Ss,_s),_vac.subVectors(Ms,_s),_vap.subVectors(va,_s);var Bs=_vab.dot(_vap),Ps=_vac.dot(_vap);if(Bs<=0&&Ps<=0)return _a.copy(_s);_vbp.subVectors(va,Ss);var Ls=_vab.dot(_vbp),Rs=_vac.dot(_vbp);if(Ls>=0&&Rs<=Ls)return _a.copy(Ss);var $s=Bs*Rs-Ls*Ps;if($s<=0&&Bs>=0&&Ls<=0)return Cs=Bs/(Bs-Ls),_a.copy(_s).addScaledVector(_vab,Cs);_vcp.subVectors(va,Ms);var Fs=_vab.dot(_vcp),Os=_vac.dot(_vcp);if(Os>=0&&Fs<=Os)return _a.copy(Ms);var Gs=Fs*Ps-Bs*Os;if(Gs<=0&&Ps>=0&&Os<=0)return Ts=Ps/(Ps-Os),_a.copy(_s).addScaledVector(_vac,Ts);var Ns=Ls*Os-Fs*Rs;if(Ns<=0&&Rs-Ls>=0&&Fs-Os>=0)return _vbc.subVectors(Ms,Ss),Ts=(Rs-Ls)/(Rs-Ls+(Fs-Os)),_a.copy(Ss).addScaledVector(_vbc,Ts);var Vs=1/(Ns+Gs+$s);return Cs=Gs*Vs,Ts=$s*Vs,_a.copy(_s).addScaledVector(_vab,Cs).addScaledVector(_vac,Ts)},equals:function(va){return va.a.equals(this.a)&&va.b.equals(this.b)&&va.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(va,_a,_s){return _a===void 0&&_s===void 0?this.set(va):this.setRGB(va,_a,_s)}function hue2rgb(va,_a,_s){return _s<0&&(_s+=1),_s>1&&(_s-=1),_s<1/6?va+(_a-va)*6*_s:_s<1/2?_a:_s<2/3?va+(_a-va)*6*(2/3-_s):va}function SRGBToLinear(va){return va<.04045?va*.0773993808:Math.pow(va*.9478672986+.0521327014,2.4)}function LinearToSRGB(va){return va<.0031308?va*12.92:1.055*Math.pow(va,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(va){return va&&va.isColor?this.copy(va):typeof va=="number"?this.setHex(va):typeof va=="string"&&this.setStyle(va),this},setScalar:function(va){return this.r=va,this.g=va,this.b=va,this},setHex:function(va){return va=Math.floor(va),this.r=(va>>16&255)/255,this.g=(va>>8&255)/255,this.b=(va&255)/255,this},setRGB:function(va,_a,_s){return this.r=va,this.g=_a,this.b=_s,this},setHSL:function(va,_a,_s){if(va=MathUtils.euclideanModulo(va,1),_a=MathUtils.clamp(_a,0,1),_s=MathUtils.clamp(_s,0,1),_a===0)this.r=this.g=this.b=_s;else{var Ss=_s<=.5?_s*(1+_a):_s+_a-_s*_a,Ms=2*_s-Ss;this.r=hue2rgb(Ms,Ss,va+1/3),this.g=hue2rgb(Ms,Ss,va),this.b=hue2rgb(Ms,Ss,va-1/3)}return this},setStyle:function(va){function _a($s){$s!==void 0&&parseFloat($s)<1&&console.warn("THREE.Color: Alpha component of "+va+" will be ignored.")}var _s;if(_s=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(va)){var Ss,Ms=_s[1],Cs=_s[2];switch(Ms){case"rgb":case"rgba":if(Ss=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Cs))return this.r=Math.min(255,parseInt(Ss[1],10))/255,this.g=Math.min(255,parseInt(Ss[2],10))/255,this.b=Math.min(255,parseInt(Ss[3],10))/255,_a(Ss[5]),this;if(Ss=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Cs))return this.r=Math.min(100,parseInt(Ss[1],10))/100,this.g=Math.min(100,parseInt(Ss[2],10))/100,this.b=Math.min(100,parseInt(Ss[3],10))/100,_a(Ss[5]),this;break;case"hsl":case"hsla":if(Ss=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Cs)){var Ts=parseFloat(Ss[1])/360,Bs=parseInt(Ss[2],10)/100,Ps=parseInt(Ss[3],10)/100;return _a(Ss[5]),this.setHSL(Ts,Bs,Ps)}break}}else if(_s=/^\#([A-Fa-f0-9]+)$/.exec(va)){var Ls=_s[1],Rs=Ls.length;if(Rs===3)return this.r=parseInt(Ls.charAt(0)+Ls.charAt(0),16)/255,this.g=parseInt(Ls.charAt(1)+Ls.charAt(1),16)/255,this.b=parseInt(Ls.charAt(2)+Ls.charAt(2),16)/255,this;if(Rs===6)return this.r=parseInt(Ls.charAt(0)+Ls.charAt(1),16)/255,this.g=parseInt(Ls.charAt(2)+Ls.charAt(3),16)/255,this.b=parseInt(Ls.charAt(4)+Ls.charAt(5),16)/255,this}return va&&va.length>0?this.setColorName(va):this},setColorName:function(va){var _a=_colorKeywords[va];return _a!==void 0?this.setHex(_a):console.warn("THREE.Color: Unknown color "+va),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(va){return this.r=va.r,this.g=va.g,this.b=va.b,this},copyGammaToLinear:function(va,_a){return _a===void 0&&(_a=2),this.r=Math.pow(va.r,_a),this.g=Math.pow(va.g,_a),this.b=Math.pow(va.b,_a),this},copyLinearToGamma:function(va,_a){_a===void 0&&(_a=2);var _s=_a>0?1/_a:1;return this.r=Math.pow(va.r,_s),this.g=Math.pow(va.g,_s),this.b=Math.pow(va.b,_s),this},convertGammaToLinear:function(va){return this.copyGammaToLinear(this,va),this},convertLinearToGamma:function(va){return this.copyLinearToGamma(this,va),this},copySRGBToLinear:function(va){return this.r=SRGBToLinear(va.r),this.g=SRGBToLinear(va.g),this.b=SRGBToLinear(va.b),this},copyLinearToSRGB:function(va){return this.r=LinearToSRGB(va.r),this.g=LinearToSRGB(va.g),this.b=LinearToSRGB(va.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(va){va===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),va={h:0,s:0,l:0});var _a=this.r,_s=this.g,Ss=this.b,Ms=Math.max(_a,_s,Ss),Cs=Math.min(_a,_s,Ss),Ts,Bs,Ps=(Cs+Ms)/2;if(Cs===Ms)Ts=0,Bs=0;else{var Ls=Ms-Cs;switch(Bs=Ps<=.5?Ls/(Ms+Cs):Ls/(2-Ms-Cs),Ms){case _a:Ts=(_s-Ss)/Ls+(_s<Ss?6:0);break;case _s:Ts=(Ss-_a)/Ls+2;break;case Ss:Ts=(_a-_s)/Ls+4;break}Ts/=6}return va.h=Ts,va.s=Bs,va.l=Ps,va},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(va,_a,_s){return this.getHSL(_hslA),_hslA.h+=va,_hslA.s+=_a,_hslA.l+=_s,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(va){return this.r+=va.r,this.g+=va.g,this.b+=va.b,this},addColors:function(va,_a){return this.r=va.r+_a.r,this.g=va.g+_a.g,this.b=va.b+_a.b,this},addScalar:function(va){return this.r+=va,this.g+=va,this.b+=va,this},sub:function(va){return this.r=Math.max(0,this.r-va.r),this.g=Math.max(0,this.g-va.g),this.b=Math.max(0,this.b-va.b),this},multiply:function(va){return this.r*=va.r,this.g*=va.g,this.b*=va.b,this},multiplyScalar:function(va){return this.r*=va,this.g*=va,this.b*=va,this},lerp:function(va,_a){return this.r+=(va.r-this.r)*_a,this.g+=(va.g-this.g)*_a,this.b+=(va.b-this.b)*_a,this},lerpHSL:function(va,_a){this.getHSL(_hslA),va.getHSL(_hslB);var _s=MathUtils.lerp(_hslA.h,_hslB.h,_a),Ss=MathUtils.lerp(_hslA.s,_hslB.s,_a),Ms=MathUtils.lerp(_hslA.l,_hslB.l,_a);return this.setHSL(_s,Ss,Ms),this},equals:function(va){return va.r===this.r&&va.g===this.g&&va.b===this.b},fromArray:function(va,_a){return _a===void 0&&(_a=0),this.r=va[_a],this.g=va[_a+1],this.b=va[_a+2],this},toArray:function(va,_a){return va===void 0&&(va=[]),_a===void 0&&(_a=0),va[_a]=this.r,va[_a+1]=this.g,va[_a+2]=this.b,va},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(va,_a,_s,Ss,Ms,Cs){this.a=va,this.b=_a,this.c=_s,this.normal=Ss&&Ss.isVector3?Ss:new Vector3,this.vertexNormals=Array.isArray(Ss)?Ss:[],this.color=Ms&&Ms.isColor?Ms:new Color,this.vertexColors=Array.isArray(Ms)?Ms:[],this.materialIndex=Cs!==void 0?Cs:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(va){this.a=va.a,this.b=va.b,this.c=va.c,this.normal.copy(va.normal),this.color.copy(va.color),this.materialIndex=va.materialIndex;for(var _a=0,_s=va.vertexNormals.length;_a<_s;_a++)this.vertexNormals[_a]=va.vertexNormals[_a].clone();for(var _a=0,_s=va.vertexColors.length;_a<_s;_a++)this.vertexColors[_a]=va.vertexColors[_a].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(va){if(va!==void 0)for(var _a in va){var _s=va[_a];if(_s===void 0){console.warn("THREE.Material: '"+_a+"' parameter is undefined.");continue}if(_a==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=_s===FlatShading;continue}var Ss=this[_a];if(Ss===void 0){console.warn("THREE."+this.type+": '"+_a+"' is not a property of this material.");continue}Ss&&Ss.isColor?Ss.set(_s):Ss&&Ss.isVector3&&_s&&_s.isVector3?Ss.copy(_s):this[_a]=_s}},toJSON:function(va){var _a=va===void 0||typeof va=="string";_a&&(va={textures:{},images:{}});var _s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};_s.uuid=this.uuid,_s.type=this.type,this.name!==""&&(_s.name=this.name),this.color&&this.color.isColor&&(_s.color=this.color.getHex()),this.roughness!==void 0&&(_s.roughness=this.roughness),this.metalness!==void 0&&(_s.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(_s.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(_s.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(_s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(_s.specular=this.specular.getHex()),this.shininess!==void 0&&(_s.shininess=this.shininess),this.clearcoat!==void 0&&(_s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(_s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(_s.clearcoatMap=this.clearcoatMap.toJSON(va).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(_s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(va).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(_s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(va).uuid,_s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(_s.map=this.map.toJSON(va).uuid),this.matcap&&this.matcap.isTexture&&(_s.matcap=this.matcap.toJSON(va).uuid),this.alphaMap&&this.alphaMap.isTexture&&(_s.alphaMap=this.alphaMap.toJSON(va).uuid),this.lightMap&&this.lightMap.isTexture&&(_s.lightMap=this.lightMap.toJSON(va).uuid),this.aoMap&&this.aoMap.isTexture&&(_s.aoMap=this.aoMap.toJSON(va).uuid,_s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(_s.bumpMap=this.bumpMap.toJSON(va).uuid,_s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(_s.normalMap=this.normalMap.toJSON(va).uuid,_s.normalMapType=this.normalMapType,_s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(_s.displacementMap=this.displacementMap.toJSON(va).uuid,_s.displacementScale=this.displacementScale,_s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(_s.roughnessMap=this.roughnessMap.toJSON(va).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(_s.metalnessMap=this.metalnessMap.toJSON(va).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(_s.emissiveMap=this.emissiveMap.toJSON(va).uuid),this.specularMap&&this.specularMap.isTexture&&(_s.specularMap=this.specularMap.toJSON(va).uuid),this.envMap&&this.envMap.isTexture&&(_s.envMap=this.envMap.toJSON(va).uuid,_s.reflectivity=this.reflectivity,_s.refractionRatio=this.refractionRatio,this.combine!==void 0&&(_s.combine=this.combine),this.envMapIntensity!==void 0&&(_s.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(_s.gradientMap=this.gradientMap.toJSON(va).uuid),this.size!==void 0&&(_s.size=this.size),this.sizeAttenuation!==void 0&&(_s.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(_s.blending=this.blending),this.flatShading===!0&&(_s.flatShading=this.flatShading),this.side!==FrontSide&&(_s.side=this.side),this.vertexColors&&(_s.vertexColors=!0),this.opacity<1&&(_s.opacity=this.opacity),this.transparent===!0&&(_s.transparent=this.transparent),_s.depthFunc=this.depthFunc,_s.depthTest=this.depthTest,_s.depthWrite=this.depthWrite,_s.stencilWrite=this.stencilWrite,_s.stencilWriteMask=this.stencilWriteMask,_s.stencilFunc=this.stencilFunc,_s.stencilRef=this.stencilRef,_s.stencilFuncMask=this.stencilFuncMask,_s.stencilFail=this.stencilFail,_s.stencilZFail=this.stencilZFail,_s.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(_s.rotation=this.rotation),this.polygonOffset===!0&&(_s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(_s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(_s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(_s.linewidth=this.linewidth),this.dashSize!==void 0&&(_s.dashSize=this.dashSize),this.gapSize!==void 0&&(_s.gapSize=this.gapSize),this.scale!==void 0&&(_s.scale=this.scale),this.dithering===!0&&(_s.dithering=!0),this.alphaTest>0&&(_s.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(_s.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(_s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(_s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(_s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(_s.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(_s.morphTargets=!0),this.morphNormals===!0&&(_s.morphNormals=!0),this.skinning===!0&&(_s.skinning=!0),this.visible===!1&&(_s.visible=!1),this.toneMapped===!1&&(_s.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(_s.userData=this.userData);function Ss(Ts){var Bs=[];for(var Ps in Ts){var Ls=Ts[Ps];delete Ls.metadata,Bs.push(Ls)}return Bs}if(_a){var Ms=Ss(va.textures),Cs=Ss(va.images);Ms.length>0&&(_s.textures=Ms),Cs.length>0&&(_s.images=Cs)}return _s},clone:function(){return new this.constructor().copy(this)},copy:function(va){this.name=va.name,this.fog=va.fog,this.blending=va.blending,this.side=va.side,this.flatShading=va.flatShading,this.vertexColors=va.vertexColors,this.opacity=va.opacity,this.transparent=va.transparent,this.blendSrc=va.blendSrc,this.blendDst=va.blendDst,this.blendEquation=va.blendEquation,this.blendSrcAlpha=va.blendSrcAlpha,this.blendDstAlpha=va.blendDstAlpha,this.blendEquationAlpha=va.blendEquationAlpha,this.depthFunc=va.depthFunc,this.depthTest=va.depthTest,this.depthWrite=va.depthWrite,this.stencilWriteMask=va.stencilWriteMask,this.stencilFunc=va.stencilFunc,this.stencilRef=va.stencilRef,this.stencilFuncMask=va.stencilFuncMask,this.stencilFail=va.stencilFail,this.stencilZFail=va.stencilZFail,this.stencilZPass=va.stencilZPass,this.stencilWrite=va.stencilWrite;var _a=va.clippingPlanes,_s=null;if(_a!==null){var Ss=_a.length;_s=new Array(Ss);for(var Ms=0;Ms!==Ss;++Ms)_s[Ms]=_a[Ms].clone()}return this.clippingPlanes=_s,this.clipIntersection=va.clipIntersection,this.clipShadows=va.clipShadows,this.shadowSide=va.shadowSide,this.colorWrite=va.colorWrite,this.precision=va.precision,this.polygonOffset=va.polygonOffset,this.polygonOffsetFactor=va.polygonOffsetFactor,this.polygonOffsetUnits=va.polygonOffsetUnits,this.dithering=va.dithering,this.alphaTest=va.alphaTest,this.premultipliedAlpha=va.premultipliedAlpha,this.visible=va.visible,this.toneMapped=va.toneMapped,this.userData=JSON.parse(JSON.stringify(va.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(va){va===!0&&this.version++}});function MeshBasicMaterial(va){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(va)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.map=va.map,this.lightMap=va.lightMap,this.lightMapIntensity=va.lightMapIntensity,this.aoMap=va.aoMap,this.aoMapIntensity=va.aoMapIntensity,this.specularMap=va.specularMap,this.alphaMap=va.alphaMap,this.envMap=va.envMap,this.combine=va.combine,this.reflectivity=va.reflectivity,this.refractionRatio=va.refractionRatio,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.wireframeLinecap=va.wireframeLinecap,this.wireframeLinejoin=va.wireframeLinejoin,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(va,_a,_s){if(Array.isArray(va))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=va,this.itemSize=_a,this.count=va!==void 0?va.length/_a:0,this.normalized=_s===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(va){va===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(va){return this.usage=va,this},copy:function(va){return this.name=va.name,this.array=new va.array.constructor(va.array),this.itemSize=va.itemSize,this.count=va.count,this.normalized=va.normalized,this.usage=va.usage,this},copyAt:function(va,_a,_s){va*=this.itemSize,_s*=_a.itemSize;for(var Ss=0,Ms=this.itemSize;Ss<Ms;Ss++)this.array[va+Ss]=_a.array[_s+Ss];return this},copyArray:function(va){return this.array.set(va),this},copyColorsArray:function(va){for(var _a=this.array,_s=0,Ss=0,Ms=va.length;Ss<Ms;Ss++){var Cs=va[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Ss),Cs=new Color),_a[_s++]=Cs.r,_a[_s++]=Cs.g,_a[_s++]=Cs.b}return this},copyVector2sArray:function(va){for(var _a=this.array,_s=0,Ss=0,Ms=va.length;Ss<Ms;Ss++){var Cs=va[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Ss),Cs=new Vector2),_a[_s++]=Cs.x,_a[_s++]=Cs.y}return this},copyVector3sArray:function(va){for(var _a=this.array,_s=0,Ss=0,Ms=va.length;Ss<Ms;Ss++){var Cs=va[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Ss),Cs=new Vector3),_a[_s++]=Cs.x,_a[_s++]=Cs.y,_a[_s++]=Cs.z}return this},copyVector4sArray:function(va){for(var _a=this.array,_s=0,Ss=0,Ms=va.length;Ss<Ms;Ss++){var Cs=va[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Ss),Cs=new Vector4),_a[_s++]=Cs.x,_a[_s++]=Cs.y,_a[_s++]=Cs.z,_a[_s++]=Cs.w}return this},applyMatrix3:function(va){for(var _a=0,_s=this.count;_a<_s;_a++)_vector$3.x=this.getX(_a),_vector$3.y=this.getY(_a),_vector$3.z=this.getZ(_a),_vector$3.applyMatrix3(va),this.setXYZ(_a,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(va){for(var _a=0,_s=this.count;_a<_s;_a++)_vector$3.x=this.getX(_a),_vector$3.y=this.getY(_a),_vector$3.z=this.getZ(_a),_vector$3.applyMatrix4(va),this.setXYZ(_a,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(va){for(var _a=0,_s=this.count;_a<_s;_a++)_vector$3.x=this.getX(_a),_vector$3.y=this.getY(_a),_vector$3.z=this.getZ(_a),_vector$3.applyNormalMatrix(va),this.setXYZ(_a,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(va){for(var _a=0,_s=this.count;_a<_s;_a++)_vector$3.x=this.getX(_a),_vector$3.y=this.getY(_a),_vector$3.z=this.getZ(_a),_vector$3.transformDirection(va),this.setXYZ(_a,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(va,_a){return _a===void 0&&(_a=0),this.array.set(va,_a),this},getX:function(va){return this.array[va*this.itemSize]},setX:function(va,_a){return this.array[va*this.itemSize]=_a,this},getY:function(va){return this.array[va*this.itemSize+1]},setY:function(va,_a){return this.array[va*this.itemSize+1]=_a,this},getZ:function(va){return this.array[va*this.itemSize+2]},setZ:function(va,_a){return this.array[va*this.itemSize+2]=_a,this},getW:function(va){return this.array[va*this.itemSize+3]},setW:function(va,_a){return this.array[va*this.itemSize+3]=_a,this},setXY:function(va,_a,_s){return va*=this.itemSize,this.array[va+0]=_a,this.array[va+1]=_s,this},setXYZ:function(va,_a,_s,Ss){return va*=this.itemSize,this.array[va+0]=_a,this.array[va+1]=_s,this.array[va+2]=Ss,this},setXYZW:function(va,_a,_s,Ss,Ms){return va*=this.itemSize,this.array[va+0]=_a,this.array[va+1]=_s,this.array[va+2]=Ss,this.array[va+3]=Ms,this},onUpload:function(va){return this.onUploadCallback=va,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(va,_a,_s){BufferAttribute.call(this,new Int8Array(va),_a,_s)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(va,_a,_s){BufferAttribute.call(this,new Uint8Array(va),_a,_s)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(va,_a,_s){BufferAttribute.call(this,new Uint8ClampedArray(va),_a,_s)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(va,_a,_s){BufferAttribute.call(this,new Int16Array(va),_a,_s)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(va,_a,_s){BufferAttribute.call(this,new Uint16Array(va),_a,_s)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(va,_a,_s){BufferAttribute.call(this,new Int32Array(va),_a,_s)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(va,_a,_s){BufferAttribute.call(this,new Uint32Array(va),_a,_s)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(va,_a,_s){BufferAttribute.call(this,new Float32Array(va),_a,_s)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(va,_a,_s){BufferAttribute.call(this,new Float64Array(va),_a,_s)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(va){for(var _a,_s=[],Ss=void 0,Ms=va.faces,Cs=0;Cs<Ms.length;Cs++){var Ts=Ms[Cs];Ts.materialIndex!==Ss&&(Ss=Ts.materialIndex,_a!==void 0&&(_a.count=Cs*3-_a.start,_s.push(_a)),_a={start:Cs*3,materialIndex:Ss})}_a!==void 0&&(_a.count=Cs*3-_a.start,_s.push(_a)),this.groups=_s},fromGeometry:function(va){var _a=va.faces,_s=va.vertices,Ss=va.faceVertexUvs,Ms=Ss[0]&&Ss[0].length>0,Cs=Ss[1]&&Ss[1].length>0,Ts=va.morphTargets,Bs=Ts.length,Ps;if(Bs>0){Ps=[];for(var Ls=0;Ls<Bs;Ls++)Ps[Ls]={name:Ts[Ls].name,data:[]};this.morphTargets.position=Ps}var Rs=va.morphNormals,$s=Rs.length,Fs;if($s>0){Fs=[];for(var Ls=0;Ls<$s;Ls++)Fs[Ls]={name:Rs[Ls].name,data:[]};this.morphTargets.normal=Fs}var Os=va.skinIndices,Gs=va.skinWeights,Ns=Os.length===_s.length,Vs=Gs.length===_s.length;_s.length>0&&_a.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var Ls=0;Ls<_a.length;Ls++){var Ds=_a[Ls];this.vertices.push(_s[Ds.a],_s[Ds.b],_s[Ds.c]);var ks=Ds.vertexNormals;if(ks.length===3)this.normals.push(ks[0],ks[1],ks[2]);else{var Us=Ds.normal;this.normals.push(Us,Us,Us)}var zs=Ds.vertexColors;if(zs.length===3)this.colors.push(zs[0],zs[1],zs[2]);else{var Ws=Ds.color;this.colors.push(Ws,Ws,Ws)}if(Ms===!0){var qs=Ss[0][Ls];qs!==void 0?this.uvs.push(qs[0],qs[1],qs[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Ls),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Cs===!0){var qs=Ss[1][Ls];qs!==void 0?this.uvs2.push(qs[0],qs[1],qs[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Ls),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var Zs=0;Zs<Bs;Zs++){var el=Ts[Zs].vertices;Ps[Zs].data.push(el[Ds.a],el[Ds.b],el[Ds.c])}for(var Zs=0;Zs<$s;Zs++){var Js=Rs[Zs].vertexNormals[Ls];Fs[Zs].data.push(Js.a,Js.b,Js.c)}Ns&&this.skinIndices.push(Os[Ds.a],Os[Ds.b],Os[Ds.c]),Vs&&this.skinWeights.push(Gs[Ds.a],Gs[Ds.b],Gs[Ds.c])}return this.computeGroups(va),this.verticesNeedUpdate=va.verticesNeedUpdate,this.normalsNeedUpdate=va.normalsNeedUpdate,this.colorsNeedUpdate=va.colorsNeedUpdate,this.uvsNeedUpdate=va.uvsNeedUpdate,this.groupsNeedUpdate=va.groupsNeedUpdate,va.boundingSphere!==null&&(this.boundingSphere=va.boundingSphere.clone()),va.boundingBox!==null&&(this.boundingBox=va.boundingBox.clone()),this}});function arrayMax(va){if(va.length===0)return-1/0;let _a=va[0];for(let _s=1,Ss=va.length;_s<Ss;++_s)va[_s]>_a&&(_a=va[_s]);return _a}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(va){Array.isArray(va)?this.index=new(arrayMax(va)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(va,1):this.index=va},getAttribute:function(va){return this.attributes[va]},setAttribute:function(va,_a){return this.attributes[va]=_a,this},deleteAttribute:function(va){return delete this.attributes[va],this},addGroup:function(va,_a,_s){this.groups.push({start:va,count:_a,materialIndex:_s!==void 0?_s:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(va,_a){this.drawRange.start=va,this.drawRange.count=_a},applyMatrix4:function(va){var _a=this.attributes.position;_a!==void 0&&(_a.applyMatrix4(va),_a.needsUpdate=!0);var _s=this.attributes.normal;if(_s!==void 0){var Ss=new Matrix3().getNormalMatrix(va);_s.applyNormalMatrix(Ss),_s.needsUpdate=!0}var Ms=this.attributes.tangent;return Ms!==void 0&&(Ms.transformDirection(va),Ms.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(va){return _m1$2.makeRotationX(va),this.applyMatrix4(_m1$2),this},rotateY:function(va){return _m1$2.makeRotationY(va),this.applyMatrix4(_m1$2),this},rotateZ:function(va){return _m1$2.makeRotationZ(va),this.applyMatrix4(_m1$2),this},translate:function(va,_a,_s){return _m1$2.makeTranslation(va,_a,_s),this.applyMatrix4(_m1$2),this},scale:function(va,_a,_s){return _m1$2.makeScale(va,_a,_s),this.applyMatrix4(_m1$2),this},lookAt:function(va){return _obj.lookAt(va),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(va){var _a=va.geometry;if(va.isPoints||va.isLine){var _s=new Float32BufferAttribute(_a.vertices.length*3,3),Ss=new Float32BufferAttribute(_a.colors.length*3,3);if(this.setAttribute("position",_s.copyVector3sArray(_a.vertices)),this.setAttribute("color",Ss.copyColorsArray(_a.colors)),_a.lineDistances&&_a.lineDistances.length===_a.vertices.length){var Ms=new Float32BufferAttribute(_a.lineDistances.length,1);this.setAttribute("lineDistance",Ms.copyArray(_a.lineDistances))}_a.boundingSphere!==null&&(this.boundingSphere=_a.boundingSphere.clone()),_a.boundingBox!==null&&(this.boundingBox=_a.boundingBox.clone())}else va.isMesh&&_a&&_a.isGeometry&&this.fromGeometry(_a);return this},setFromPoints:function(va){for(var _a=[],_s=0,Ss=va.length;_s<Ss;_s++){var Ms=va[_s];_a.push(Ms.x,Ms.y,Ms.z||0)}return this.setAttribute("position",new Float32BufferAttribute(_a,3)),this},updateFromObject:function(va){var _a=va.geometry;if(va.isMesh){var _s=_a.__directGeometry;if(_a.elementsNeedUpdate===!0&&(_s=void 0,_a.elementsNeedUpdate=!1),_s===void 0)return this.fromGeometry(_a);_s.verticesNeedUpdate=_a.verticesNeedUpdate,_s.normalsNeedUpdate=_a.normalsNeedUpdate,_s.colorsNeedUpdate=_a.colorsNeedUpdate,_s.uvsNeedUpdate=_a.uvsNeedUpdate,_s.groupsNeedUpdate=_a.groupsNeedUpdate,_a.verticesNeedUpdate=!1,_a.normalsNeedUpdate=!1,_a.colorsNeedUpdate=!1,_a.uvsNeedUpdate=!1,_a.groupsNeedUpdate=!1,_a=_s}var Ss;return _a.verticesNeedUpdate===!0&&(Ss=this.attributes.position,Ss!==void 0&&(Ss.copyVector3sArray(_a.vertices),Ss.needsUpdate=!0),_a.verticesNeedUpdate=!1),_a.normalsNeedUpdate===!0&&(Ss=this.attributes.normal,Ss!==void 0&&(Ss.copyVector3sArray(_a.normals),Ss.needsUpdate=!0),_a.normalsNeedUpdate=!1),_a.colorsNeedUpdate===!0&&(Ss=this.attributes.color,Ss!==void 0&&(Ss.copyColorsArray(_a.colors),Ss.needsUpdate=!0),_a.colorsNeedUpdate=!1),_a.uvsNeedUpdate&&(Ss=this.attributes.uv,Ss!==void 0&&(Ss.copyVector2sArray(_a.uvs),Ss.needsUpdate=!0),_a.uvsNeedUpdate=!1),_a.lineDistancesNeedUpdate&&(Ss=this.attributes.lineDistance,Ss!==void 0&&(Ss.copyArray(_a.lineDistances),Ss.needsUpdate=!0),_a.lineDistancesNeedUpdate=!1),_a.groupsNeedUpdate&&(_a.computeGroups(va.geometry),this.groups=_a.groups,_a.groupsNeedUpdate=!1),this},fromGeometry:function(va){return va.__directGeometry=new DirectGeometry().fromGeometry(va),this.fromDirectGeometry(va.__directGeometry)},fromDirectGeometry:function(va){var _a=new Float32Array(va.vertices.length*3);if(this.setAttribute("position",new BufferAttribute(_a,3).copyVector3sArray(va.vertices)),va.normals.length>0){var _s=new Float32Array(va.normals.length*3);this.setAttribute("normal",new BufferAttribute(_s,3).copyVector3sArray(va.normals))}if(va.colors.length>0){var Ss=new Float32Array(va.colors.length*3);this.setAttribute("color",new BufferAttribute(Ss,3).copyColorsArray(va.colors))}if(va.uvs.length>0){var Ms=new Float32Array(va.uvs.length*2);this.setAttribute("uv",new BufferAttribute(Ms,2).copyVector2sArray(va.uvs))}if(va.uvs2.length>0){var Cs=new Float32Array(va.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Cs,2).copyVector2sArray(va.uvs2))}this.groups=va.groups;for(var Ts in va.morphTargets){for(var Bs=[],Ps=va.morphTargets[Ts],Ls=0,Rs=Ps.length;Ls<Rs;Ls++){var $s=Ps[Ls],Fs=new Float32BufferAttribute($s.data.length*3,3);Fs.name=$s.name,Bs.push(Fs.copyVector3sArray($s.data))}this.morphAttributes[Ts]=Bs}if(va.skinIndices.length>0){var Os=new Float32BufferAttribute(va.skinIndices.length*4,4);this.setAttribute("skinIndex",Os.copyVector4sArray(va.skinIndices))}if(va.skinWeights.length>0){var Gs=new Float32BufferAttribute(va.skinWeights.length*4,4);this.setAttribute("skinWeight",Gs.copyVector4sArray(va.skinWeights))}return va.boundingSphere!==null&&(this.boundingSphere=va.boundingSphere.clone()),va.boundingBox!==null&&(this.boundingBox=va.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var va=this.attributes.position,_a=this.morphAttributes.position;if(va!==void 0){if(this.boundingBox.setFromBufferAttribute(va),_a)for(var _s=0,Ss=_a.length;_s<Ss;_s++){var Ms=_a[_s];_box$2.setFromBufferAttribute(Ms),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var va=this.attributes.position,_a=this.morphAttributes.position;if(va){var _s=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(va),_a)for(var Ss=0,Ms=_a.length;Ss<Ms;Ss++){var Cs=_a[Ss];_boxMorphTargets.setFromBufferAttribute(Cs),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(_s);for(var Ts=0,Ss=0,Ms=va.count;Ss<Ms;Ss++)_vector$4.fromBufferAttribute(va,Ss),Ts=Math.max(Ts,_s.distanceToSquared(_vector$4));if(_a)for(var Ss=0,Ms=_a.length;Ss<Ms;Ss++)for(var Cs=_a[Ss],Bs=this.morphTargetsRelative,Ps=0,Ls=Cs.count;Ps<Ls;Ps++)_vector$4.fromBufferAttribute(Cs,Ps),Bs&&(_offset.fromBufferAttribute(va,Ps),_vector$4.add(_offset)),Ts=Math.max(Ts,_s.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(Ts),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var va=this.index,_a=this.attributes;if(_a.position){var _s=_a.position.array;if(_a.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(_s.length),3));else for(var Ss=_a.normal.array,Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Ss[Ms]=0;var Ts=_a.normal.array,Bs,Ps,Ls,Rs=new Vector3,$s=new Vector3,Fs=new Vector3,Os=new Vector3,Gs=new Vector3;if(va)for(var Ns=va.array,Ms=0,Cs=va.count;Ms<Cs;Ms+=3)Bs=Ns[Ms+0]*3,Ps=Ns[Ms+1]*3,Ls=Ns[Ms+2]*3,Rs.fromArray(_s,Bs),$s.fromArray(_s,Ps),Fs.fromArray(_s,Ls),Os.subVectors(Fs,$s),Gs.subVectors(Rs,$s),Os.cross(Gs),Ts[Bs]+=Os.x,Ts[Bs+1]+=Os.y,Ts[Bs+2]+=Os.z,Ts[Ps]+=Os.x,Ts[Ps+1]+=Os.y,Ts[Ps+2]+=Os.z,Ts[Ls]+=Os.x,Ts[Ls+1]+=Os.y,Ts[Ls+2]+=Os.z;else for(var Ms=0,Cs=_s.length;Ms<Cs;Ms+=9)Rs.fromArray(_s,Ms),$s.fromArray(_s,Ms+3),Fs.fromArray(_s,Ms+6),Os.subVectors(Fs,$s),Gs.subVectors(Rs,$s),Os.cross(Gs),Ts[Ms]=Os.x,Ts[Ms+1]=Os.y,Ts[Ms+2]=Os.z,Ts[Ms+3]=Os.x,Ts[Ms+4]=Os.y,Ts[Ms+5]=Os.z,Ts[Ms+6]=Os.x,Ts[Ms+7]=Os.y,Ts[Ms+8]=Os.z;this.normalizeNormals(),_a.normal.needsUpdate=!0}},merge:function(va,_a){if(!(va&&va.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",va);return}_a===void 0&&(_a=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var _s=this.attributes;for(var Ss in _s)if(va.attributes[Ss]!==void 0)for(var Ms=_s[Ss],Cs=Ms.array,Ts=va.attributes[Ss],Bs=Ts.array,Ps=Ts.itemSize*_a,Ls=Math.min(Bs.length,Cs.length-Ps),Rs=0,$s=Ps;Rs<Ls;Rs++,$s++)Cs[$s]=Bs[Rs];return this},normalizeNormals:function(){for(var va=this.attributes.normal,_a=0,_s=va.count;_a<_s;_a++)_vector$4.x=va.getX(_a),_vector$4.y=va.getY(_a),_vector$4.z=va.getZ(_a),_vector$4.normalize(),va.setXYZ(_a,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function va(Ns,Vs){for(var Ds=Ns.array,ks=Ns.itemSize,Us=Ns.normalized,zs=new Ds.constructor(Vs.length*ks),Ws=0,qs=0,Zs=0,el=Vs.length;Zs<el;Zs++){Ws=Vs[Zs]*ks;for(var Js=0;Js<ks;Js++)zs[qs++]=Ds[Ws++]}return new BufferAttribute(zs,ks,Us)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var _a=new BufferGeometry,_s=this.index.array,Ss=this.attributes;for(var Ms in Ss){var Cs=Ss[Ms],Ts=va(Cs,_s);_a.setAttribute(Ms,Ts)}var Bs=this.morphAttributes;for(Ms in Bs){for(var Ps=[],Ls=Bs[Ms],Rs=0,$s=Ls.length;Rs<$s;Rs++){var Cs=Ls[Rs],Ts=va(Cs,_s);Ps.push(Ts)}_a.morphAttributes[Ms]=Ps}_a.morphTargetsRelative=this.morphTargetsRelative;for(var Fs=this.groups,Rs=0,Os=Fs.length;Rs<Os;Rs++){var Gs=Fs[Rs];_a.addGroup(Gs.start,Gs.count,Gs.materialIndex)}return _a},toJSON:function(){var va={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(va.uuid=this.uuid,va.type=this.type,this.name!==""&&(va.name=this.name),Object.keys(this.userData).length>0&&(va.userData=this.userData),this.parameters!==void 0){var _a=this.parameters;for(var _s in _a)_a[_s]!==void 0&&(va[_s]=_a[_s]);return va}va.data={attributes:{}};var Ss=this.index;Ss!==null&&(va.data.index={type:Ss.array.constructor.name,array:Array.prototype.slice.call(Ss.array)});var Ms=this.attributes;for(var _s in Ms){var Cs=Ms[_s],Ts=Cs.toJSON();Cs.name!==""&&(Ts.name=Cs.name),va.data.attributes[_s]=Ts}var Bs={},Ps=!1;for(var _s in this.morphAttributes){for(var Ls=this.morphAttributes[_s],Rs=[],$s=0,Fs=Ls.length;$s<Fs;$s++){var Cs=Ls[$s],Ts=Cs.toJSON();Cs.name!==""&&(Ts.name=Cs.name),Rs.push(Ts)}Rs.length>0&&(Bs[_s]=Rs,Ps=!0)}Ps&&(va.data.morphAttributes=Bs,va.data.morphTargetsRelative=this.morphTargetsRelative);var Os=this.groups;Os.length>0&&(va.data.groups=JSON.parse(JSON.stringify(Os)));var Gs=this.boundingSphere;return Gs!==null&&(va.data.boundingSphere={center:Gs.center.toArray(),radius:Gs.radius}),va},clone:function(){return new BufferGeometry().copy(this)},copy:function(va){var _a,_s,Ss;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=va.name;var Ms=va.index;Ms!==null&&this.setIndex(Ms.clone());var Cs=va.attributes;for(_a in Cs){var Ts=Cs[_a];this.setAttribute(_a,Ts.clone())}var Bs=va.morphAttributes;for(_a in Bs){var Ps=[],Ls=Bs[_a];for(_s=0,Ss=Ls.length;_s<Ss;_s++)Ps.push(Ls[_s].clone());this.morphAttributes[_a]=Ps}this.morphTargetsRelative=va.morphTargetsRelative;var Rs=va.groups;for(_s=0,Ss=Rs.length;_s<Ss;_s++){var $s=Rs[_s];this.addGroup($s.start,$s.count,$s.materialIndex)}var Fs=va.boundingBox;Fs!==null&&(this.boundingBox=Fs.clone());var Os=va.boundingSphere;return Os!==null&&(this.boundingSphere=Os.clone()),this.drawRange.start=va.drawRange.start,this.drawRange.count=va.drawRange.count,this.userData=va.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(va,_a){Object3D.call(this),this.type="Mesh",this.geometry=va!==void 0?va:new BufferGeometry,this.material=_a!==void 0?_a:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(va){return Object3D.prototype.copy.call(this,va),va.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=va.morphTargetInfluences.slice()),va.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},va.morphTargetDictionary)),this},updateMorphTargets:function(){var va=this.geometry,_a,_s,Ss;if(va.isBufferGeometry){var Ms=va.morphAttributes,Cs=Object.keys(Ms);if(Cs.length>0){var Ts=Ms[Cs[0]];if(Ts!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},_a=0,_s=Ts.length;_a<_s;_a++)Ss=Ts[_a].name||String(_a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ss]=_a}}else{var Bs=va.morphTargets;Bs!==void 0&&Bs.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(va,_a){var _s=this.geometry,Ss=this.material,Ms=this.matrixWorld;if(Ss!==void 0&&(_s.boundingSphere===null&&_s.computeBoundingSphere(),_sphere.copy(_s.boundingSphere),_sphere.applyMatrix4(Ms),va.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(Ms),_ray.copy(va.ray).applyMatrix4(_inverseMatrix),!(_s.boundingBox!==null&&_ray.intersectsBox(_s.boundingBox)===!1)))){var Cs;if(_s.isBufferGeometry){var Ts,Bs,Ps,Ls=_s.index,Rs=_s.attributes.position,$s=_s.morphAttributes.position,Fs=_s.morphTargetsRelative,Os=_s.attributes.uv,Gs=_s.attributes.uv2,Ns=_s.groups,Vs=_s.drawRange,Ds,ks,Us,zs,Ws,qs,Zs,el;if(Ls!==null)if(Array.isArray(Ss))for(Ds=0,Us=Ns.length;Ds<Us;Ds++)for(Ws=Ns[Ds],qs=Ss[Ws.materialIndex],Zs=Math.max(Ws.start,Vs.start),el=Math.min(Ws.start+Ws.count,Vs.start+Vs.count),ks=Zs,zs=el;ks<zs;ks+=3)Ts=Ls.getX(ks),Bs=Ls.getX(ks+1),Ps=Ls.getX(ks+2),Cs=checkBufferGeometryIntersection(this,qs,va,_ray,Rs,$s,Fs,Os,Gs,Ts,Bs,Ps),Cs&&(Cs.faceIndex=Math.floor(ks/3),Cs.face.materialIndex=Ws.materialIndex,_a.push(Cs));else for(Zs=Math.max(0,Vs.start),el=Math.min(Ls.count,Vs.start+Vs.count),Ds=Zs,Us=el;Ds<Us;Ds+=3)Ts=Ls.getX(Ds),Bs=Ls.getX(Ds+1),Ps=Ls.getX(Ds+2),Cs=checkBufferGeometryIntersection(this,Ss,va,_ray,Rs,$s,Fs,Os,Gs,Ts,Bs,Ps),Cs&&(Cs.faceIndex=Math.floor(Ds/3),_a.push(Cs));else if(Rs!==void 0)if(Array.isArray(Ss))for(Ds=0,Us=Ns.length;Ds<Us;Ds++)for(Ws=Ns[Ds],qs=Ss[Ws.materialIndex],Zs=Math.max(Ws.start,Vs.start),el=Math.min(Ws.start+Ws.count,Vs.start+Vs.count),ks=Zs,zs=el;ks<zs;ks+=3)Ts=ks,Bs=ks+1,Ps=ks+2,Cs=checkBufferGeometryIntersection(this,qs,va,_ray,Rs,$s,Fs,Os,Gs,Ts,Bs,Ps),Cs&&(Cs.faceIndex=Math.floor(ks/3),Cs.face.materialIndex=Ws.materialIndex,_a.push(Cs));else for(Zs=Math.max(0,Vs.start),el=Math.min(Rs.count,Vs.start+Vs.count),Ds=Zs,Us=el;Ds<Us;Ds+=3)Ts=Ds,Bs=Ds+1,Ps=Ds+2,Cs=checkBufferGeometryIntersection(this,Ss,va,_ray,Rs,$s,Fs,Os,Gs,Ts,Bs,Ps),Cs&&(Cs.faceIndex=Math.floor(Ds/3),_a.push(Cs))}else if(_s.isGeometry){var Js,Hs,Qs,js=Array.isArray(Ss),Ks=_s.vertices,Xs=_s.faces,Ys,rl=_s.faceVertexUvs[0];rl.length>0&&(Ys=rl);for(var tl=0,il=Xs.length;tl<il;tl++){var ll=Xs[tl],cl=js?Ss[ll.materialIndex]:Ss;if(cl!==void 0&&(Js=Ks[ll.a],Hs=Ks[ll.b],Qs=Ks[ll.c],Cs=checkIntersection(this,cl,va,_ray,Js,Hs,Qs,_intersectionPoint),Cs)){if(Ys&&Ys[tl]){var al=Ys[tl];_uvA.copy(al[0]),_uvB.copy(al[1]),_uvC.copy(al[2]),Cs.uv=Triangle.getUV(_intersectionPoint,Js,Hs,Qs,_uvA,_uvB,_uvC,new Vector2)}Cs.face=ll,Cs.faceIndex=tl,_a.push(Cs)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(va,_a,_s,Ss,Ms,Cs,Ts,Bs){var Ps;if(_a.side===BackSide?Ps=Ss.intersectTriangle(Ts,Cs,Ms,!0,Bs):Ps=Ss.intersectTriangle(Ms,Cs,Ts,_a.side!==DoubleSide,Bs),Ps===null)return null;_intersectionPointWorld.copy(Bs),_intersectionPointWorld.applyMatrix4(va.matrixWorld);var Ls=_s.ray.origin.distanceTo(_intersectionPointWorld);return Ls<_s.near||Ls>_s.far?null:{distance:Ls,point:_intersectionPointWorld.clone(),object:va}}function checkBufferGeometryIntersection(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s){_vA.fromBufferAttribute(Ms,Ls),_vB.fromBufferAttribute(Ms,Rs),_vC.fromBufferAttribute(Ms,$s);var Fs=va.morphTargetInfluences;if(_a.morphTargets&&Cs&&Fs){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var Os=0,Gs=Cs.length;Os<Gs;Os++){var Ns=Fs[Os],Vs=Cs[Os];Ns!==0&&(_tempA.fromBufferAttribute(Vs,Ls),_tempB.fromBufferAttribute(Vs,Rs),_tempC.fromBufferAttribute(Vs,$s),Ts?(_morphA.addScaledVector(_tempA,Ns),_morphB.addScaledVector(_tempB,Ns),_morphC.addScaledVector(_tempC,Ns)):(_morphA.addScaledVector(_tempA.sub(_vA),Ns),_morphB.addScaledVector(_tempB.sub(_vB),Ns),_morphC.addScaledVector(_tempC.sub(_vC),Ns)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}va.isSkinnedMesh&&(va.boneTransform(Ls,_vA),va.boneTransform(Rs,_vB),va.boneTransform($s,_vC));var Ds=checkIntersection(va,_a,_s,Ss,_vA,_vB,_vC,_intersectionPoint);if(Ds){Bs&&(_uvA.fromBufferAttribute(Bs,Ls),_uvB.fromBufferAttribute(Bs,Rs),_uvC.fromBufferAttribute(Bs,$s),Ds.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),Ps&&(_uvA.fromBufferAttribute(Ps,Ls),_uvB.fromBufferAttribute(Ps,Rs),_uvC.fromBufferAttribute(Ps,$s),Ds.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var ks=new Face3(Ls,Rs,$s);Triangle.getNormal(_vA,_vB,_vC,ks.normal),Ds.face=ks}return Ds}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(va){for(var _a=new Matrix3().getNormalMatrix(va),_s=0,Ss=this.vertices.length;_s<Ss;_s++){var Ms=this.vertices[_s];Ms.applyMatrix4(va)}for(var _s=0,Ss=this.faces.length;_s<Ss;_s++){var Cs=this.faces[_s];Cs.normal.applyMatrix3(_a).normalize();for(var Ts=0,Bs=Cs.vertexNormals.length;Ts<Bs;Ts++)Cs.vertexNormals[Ts].applyMatrix3(_a).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(va){return _m1$3.makeRotationX(va),this.applyMatrix4(_m1$3),this},rotateY:function(va){return _m1$3.makeRotationY(va),this.applyMatrix4(_m1$3),this},rotateZ:function(va){return _m1$3.makeRotationZ(va),this.applyMatrix4(_m1$3),this},translate:function(va,_a,_s){return _m1$3.makeTranslation(va,_a,_s),this.applyMatrix4(_m1$3),this},scale:function(va,_a,_s){return _m1$3.makeScale(va,_a,_s),this.applyMatrix4(_m1$3),this},lookAt:function(va){return _obj$1.lookAt(va),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(va){var _a=this,_s=va.index!==null?va.index.array:void 0,Ss=va.attributes;if(Ss.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var Ms=Ss.position.array,Cs=Ss.normal!==void 0?Ss.normal.array:void 0,Ts=Ss.color!==void 0?Ss.color.array:void 0,Bs=Ss.uv!==void 0?Ss.uv.array:void 0,Ps=Ss.uv2!==void 0?Ss.uv2.array:void 0;Ps!==void 0&&(this.faceVertexUvs[1]=[]);for(var Ls=0;Ls<Ms.length;Ls+=3)_a.vertices.push(new Vector3().fromArray(Ms,Ls)),Ts!==void 0&&_a.colors.push(new Color().fromArray(Ts,Ls));function Rs(Ds,ks,Us,zs){var Ws=Ts===void 0?[]:[_a.colors[Ds].clone(),_a.colors[ks].clone(),_a.colors[Us].clone()],qs=Cs===void 0?[]:[new Vector3().fromArray(Cs,Ds*3),new Vector3().fromArray(Cs,ks*3),new Vector3().fromArray(Cs,Us*3)],Zs=new Face3(Ds,ks,Us,qs,Ws,zs);_a.faces.push(Zs),Bs!==void 0&&_a.faceVertexUvs[0].push([new Vector2().fromArray(Bs,Ds*2),new Vector2().fromArray(Bs,ks*2),new Vector2().fromArray(Bs,Us*2)]),Ps!==void 0&&_a.faceVertexUvs[1].push([new Vector2().fromArray(Ps,Ds*2),new Vector2().fromArray(Ps,ks*2),new Vector2().fromArray(Ps,Us*2)])}var $s=va.groups;if($s.length>0)for(var Ls=0;Ls<$s.length;Ls++)for(var Fs=$s[Ls],Os=Fs.start,Gs=Fs.count,Ns=Os,Vs=Os+Gs;Ns<Vs;Ns+=3)_s!==void 0?Rs(_s[Ns],_s[Ns+1],_s[Ns+2],Fs.materialIndex):Rs(Ns,Ns+1,Ns+2,Fs.materialIndex);else if(_s!==void 0)for(var Ls=0;Ls<_s.length;Ls+=3)Rs(_s[Ls],_s[Ls+1],_s[Ls+2]);else for(var Ls=0;Ls<Ms.length/3;Ls+=3)Rs(Ls,Ls+1,Ls+2);return this.computeFaceNormals(),va.boundingBox!==null&&(this.boundingBox=va.boundingBox.clone()),va.boundingSphere!==null&&(this.boundingSphere=va.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var va=this.boundingSphere.center,_a=this.boundingSphere.radius,_s=_a===0?1:1/_a,Ss=new Matrix4;return Ss.set(_s,0,0,-_s*va.x,0,_s,0,-_s*va.y,0,0,_s,-_s*va.z,0,0,0,1),this.applyMatrix4(Ss),this},computeFaceNormals:function(){for(var va=new Vector3,_a=new Vector3,_s=0,Ss=this.faces.length;_s<Ss;_s++){var Ms=this.faces[_s],Cs=this.vertices[Ms.a],Ts=this.vertices[Ms.b],Bs=this.vertices[Ms.c];va.subVectors(Bs,Ts),_a.subVectors(Cs,Ts),va.cross(_a),va.normalize(),Ms.normal.copy(va)}},computeVertexNormals:function(va){va===void 0&&(va=!0);var _a,_s,Ss,Ms,Cs,Ts;for(Ts=new Array(this.vertices.length),_a=0,_s=this.vertices.length;_a<_s;_a++)Ts[_a]=new Vector3;if(va){var Bs,Ps,Ls,Rs=new Vector3,$s=new Vector3;for(Ss=0,Ms=this.faces.length;Ss<Ms;Ss++)Cs=this.faces[Ss],Bs=this.vertices[Cs.a],Ps=this.vertices[Cs.b],Ls=this.vertices[Cs.c],Rs.subVectors(Ls,Ps),$s.subVectors(Bs,Ps),Rs.cross($s),Ts[Cs.a].add(Rs),Ts[Cs.b].add(Rs),Ts[Cs.c].add(Rs)}else for(this.computeFaceNormals(),Ss=0,Ms=this.faces.length;Ss<Ms;Ss++)Cs=this.faces[Ss],Ts[Cs.a].add(Cs.normal),Ts[Cs.b].add(Cs.normal),Ts[Cs.c].add(Cs.normal);for(_a=0,_s=this.vertices.length;_a<_s;_a++)Ts[_a].normalize();for(Ss=0,Ms=this.faces.length;Ss<Ms;Ss++){Cs=this.faces[Ss];var Fs=Cs.vertexNormals;Fs.length===3?(Fs[0].copy(Ts[Cs.a]),Fs[1].copy(Ts[Cs.b]),Fs[2].copy(Ts[Cs.c])):(Fs[0]=Ts[Cs.a].clone(),Fs[1]=Ts[Cs.b].clone(),Fs[2]=Ts[Cs.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var va,_a,_s;for(this.computeFaceNormals(),va=0,_a=this.faces.length;va<_a;va++){_s=this.faces[va];var Ss=_s.vertexNormals;Ss.length===3?(Ss[0].copy(_s.normal),Ss[1].copy(_s.normal),Ss[2].copy(_s.normal)):(Ss[0]=_s.normal.clone(),Ss[1]=_s.normal.clone(),Ss[2]=_s.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var va,_a,_s,Ss,Ms;for(_s=0,Ss=this.faces.length;_s<Ss;_s++)for(Ms=this.faces[_s],Ms.__originalFaceNormal?Ms.__originalFaceNormal.copy(Ms.normal):Ms.__originalFaceNormal=Ms.normal.clone(),Ms.__originalVertexNormals||(Ms.__originalVertexNormals=[]),va=0,_a=Ms.vertexNormals.length;va<_a;va++)Ms.__originalVertexNormals[va]?Ms.__originalVertexNormals[va].copy(Ms.vertexNormals[va]):Ms.__originalVertexNormals[va]=Ms.vertexNormals[va].clone();var Cs=new Geometry;for(Cs.faces=this.faces,va=0,_a=this.morphTargets.length;va<_a;va++){if(!this.morphNormals[va]){this.morphNormals[va]={},this.morphNormals[va].faceNormals=[],this.morphNormals[va].vertexNormals=[];var Ts=this.morphNormals[va].faceNormals,Bs=this.morphNormals[va].vertexNormals,Ls,Rs;for(_s=0,Ss=this.faces.length;_s<Ss;_s++)Ls=new Vector3,Rs={a:new Vector3,b:new Vector3,c:new Vector3},Ts.push(Ls),Bs.push(Rs)}var Ps=this.morphNormals[va];Cs.vertices=this.morphTargets[va].vertices,Cs.computeFaceNormals(),Cs.computeVertexNormals();var Ls,Rs;for(_s=0,Ss=this.faces.length;_s<Ss;_s++)Ms=this.faces[_s],Ls=Ps.faceNormals[_s],Rs=Ps.vertexNormals[_s],Ls.copy(Ms.normal),Rs.a.copy(Ms.vertexNormals[0]),Rs.b.copy(Ms.vertexNormals[1]),Rs.c.copy(Ms.vertexNormals[2])}for(_s=0,Ss=this.faces.length;_s<Ss;_s++)Ms=this.faces[_s],Ms.normal=Ms.__originalFaceNormal,Ms.vertexNormals=Ms.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(va,_a,_s){if(!(va&&va.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",va);return}var Ss,Ms=this.vertices.length,Cs=this.vertices,Ts=va.vertices,Bs=this.faces,Ps=va.faces,Ls=this.colors,Rs=va.colors;_s===void 0&&(_s=0),_a!==void 0&&(Ss=new Matrix3().getNormalMatrix(_a));for(var $s=0,Fs=Ts.length;$s<Fs;$s++){var Os=Ts[$s],Gs=Os.clone();_a!==void 0&&Gs.applyMatrix4(_a),Cs.push(Gs)}for(var $s=0,Fs=Rs.length;$s<Fs;$s++)Ls.push(Rs[$s].clone());for($s=0,Fs=Ps.length;$s<Fs;$s++){var Ns=Ps[$s],Vs,Ds,ks,Us=Ns.vertexNormals,zs=Ns.vertexColors;Vs=new Face3(Ns.a+Ms,Ns.b+Ms,Ns.c+Ms),Vs.normal.copy(Ns.normal),Ss!==void 0&&Vs.normal.applyMatrix3(Ss).normalize();for(var Ws=0,qs=Us.length;Ws<qs;Ws++)Ds=Us[Ws].clone(),Ss!==void 0&&Ds.applyMatrix3(Ss).normalize(),Vs.vertexNormals.push(Ds);Vs.color.copy(Ns.color);for(var Ws=0,qs=zs.length;Ws<qs;Ws++)ks=zs[Ws],Vs.vertexColors.push(ks.clone());Vs.materialIndex=Ns.materialIndex+_s,Bs.push(Vs)}for(var $s=0,Fs=va.faceVertexUvs.length;$s<Fs;$s++){var Zs=va.faceVertexUvs[$s];this.faceVertexUvs[$s]===void 0&&(this.faceVertexUvs[$s]=[]);for(var Ws=0,qs=Zs.length;Ws<qs;Ws++){for(var el=Zs[Ws],Js=[],Hs=0,Qs=el.length;Hs<Qs;Hs++)Js.push(el[Hs].clone());this.faceVertexUvs[$s].push(Js)}}},mergeMesh:function(va){if(!(va&&va.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",va);return}va.matrixAutoUpdate&&va.updateMatrix(),this.merge(va.geometry,va.matrix)},mergeVertices:function(){var va={},_a=[],_s=[],Ss,Ms,Cs=4,Ts=Math.pow(10,Cs),Bs,Ps,Ls,Rs,$s,Fs;for(Bs=0,Ps=this.vertices.length;Bs<Ps;Bs++)Ss=this.vertices[Bs],Ms=Math.round(Ss.x*Ts)+"_"+Math.round(Ss.y*Ts)+"_"+Math.round(Ss.z*Ts),va[Ms]===void 0?(va[Ms]=Bs,_a.push(this.vertices[Bs]),_s[Bs]=_a.length-1):_s[Bs]=_s[va[Ms]];var Os=[];for(Bs=0,Ps=this.faces.length;Bs<Ps;Bs++){Ls=this.faces[Bs],Ls.a=_s[Ls.a],Ls.b=_s[Ls.b],Ls.c=_s[Ls.c],Rs=[Ls.a,Ls.b,Ls.c];for(var Gs=0;Gs<3;Gs++)if(Rs[Gs]===Rs[(Gs+1)%3]){Os.push(Bs);break}}for(Bs=Os.length-1;Bs>=0;Bs--){var Ns=Os[Bs];for(this.faces.splice(Ns,1),$s=0,Fs=this.faceVertexUvs.length;$s<Fs;$s++)this.faceVertexUvs[$s].splice(Ns,1)}var Vs=this.vertices.length-_a.length;return this.vertices=_a,Vs},setFromPoints:function(va){this.vertices=[];for(var _a=0,_s=va.length;_a<_s;_a++){var Ss=va[_a];this.vertices.push(new Vector3(Ss.x,Ss.y,Ss.z||0))}return this},sortFacesByMaterialIndex:function(){for(var va=this.faces,_a=va.length,_s=0;_s<_a;_s++)va[_s]._id=_s;function Ss(Ls,Rs){return Ls.materialIndex-Rs.materialIndex}va.sort(Ss);var Ms=this.faceVertexUvs[0],Cs=this.faceVertexUvs[1],Ts,Bs;Ms&&Ms.length===_a&&(Ts=[]),Cs&&Cs.length===_a&&(Bs=[]);for(var _s=0;_s<_a;_s++){var Ps=va[_s]._id;Ts&&Ts.push(Ms[Ps]),Bs&&Bs.push(Cs[Ps])}Ts&&(this.faceVertexUvs[0]=Ts),Bs&&(this.faceVertexUvs[1]=Bs)},toJSON:function(){var va={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(va.uuid=this.uuid,va.type=this.type,this.name!==""&&(va.name=this.name),this.parameters!==void 0){var _a=this.parameters;for(var _s in _a)_a[_s]!==void 0&&(va[_s]=_a[_s]);return va}for(var Ss=[],Ms=0;Ms<this.vertices.length;Ms++){var Cs=this.vertices[Ms];Ss.push(Cs.x,Cs.y,Cs.z)}for(var Ts=[],Bs=[],Ps={},Ls=[],Rs={},$s=[],Fs={},Ms=0;Ms<this.faces.length;Ms++){var Os=this.faces[Ms],Gs=!0,Ns=!1,Vs=this.faceVertexUvs[0][Ms]!==void 0,Ds=Os.normal.length()>0,ks=Os.vertexNormals.length>0,Us=Os.color.r!==1||Os.color.g!==1||Os.color.b!==1,zs=Os.vertexColors.length>0,Ws=0;if(Ws=Js(Ws,0,0),Ws=Js(Ws,1,Gs),Ws=Js(Ws,2,Ns),Ws=Js(Ws,3,Vs),Ws=Js(Ws,4,Ds),Ws=Js(Ws,5,ks),Ws=Js(Ws,6,Us),Ws=Js(Ws,7,zs),Ts.push(Ws),Ts.push(Os.a,Os.b,Os.c),Ts.push(Os.materialIndex),Vs){var qs=this.faceVertexUvs[0][Ms];Ts.push(js(qs[0]),js(qs[1]),js(qs[2]))}if(Ds&&Ts.push(Hs(Os.normal)),ks){var Zs=Os.vertexNormals;Ts.push(Hs(Zs[0]),Hs(Zs[1]),Hs(Zs[2]))}if(Us&&Ts.push(Qs(Os.color)),zs){var el=Os.vertexColors;Ts.push(Qs(el[0]),Qs(el[1]),Qs(el[2]))}}function Js(Ks,Xs,Ys){return Ys?Ks|1<<Xs:Ks&~(1<<Xs)}function Hs(Ks){var Xs=Ks.x.toString()+Ks.y.toString()+Ks.z.toString();return Ps[Xs]!==void 0||(Ps[Xs]=Bs.length/3,Bs.push(Ks.x,Ks.y,Ks.z)),Ps[Xs]}function Qs(Ks){var Xs=Ks.r.toString()+Ks.g.toString()+Ks.b.toString();return Rs[Xs]!==void 0||(Rs[Xs]=Ls.length,Ls.push(Ks.getHex())),Rs[Xs]}function js(Ks){var Xs=Ks.x.toString()+Ks.y.toString();return Fs[Xs]!==void 0||(Fs[Xs]=$s.length/2,$s.push(Ks.x,Ks.y)),Fs[Xs]}return va.data={},va.data.vertices=Ss,va.data.normals=Bs,Ls.length>0&&(va.data.colors=Ls),$s.length>0&&(va.data.uvs=[$s]),va.data.faces=Ts,va},clone:function(){return new Geometry().copy(this)},copy:function(va){var _a,_s,Ss,Ms,Cs,Ts;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=va.name;var Bs=va.vertices;for(_a=0,_s=Bs.length;_a<_s;_a++)this.vertices.push(Bs[_a].clone());var Ps=va.colors;for(_a=0,_s=Ps.length;_a<_s;_a++)this.colors.push(Ps[_a].clone());var Ls=va.faces;for(_a=0,_s=Ls.length;_a<_s;_a++)this.faces.push(Ls[_a].clone());for(_a=0,_s=va.faceVertexUvs.length;_a<_s;_a++){var Rs=va.faceVertexUvs[_a];for(this.faceVertexUvs[_a]===void 0&&(this.faceVertexUvs[_a]=[]),Ss=0,Ms=Rs.length;Ss<Ms;Ss++){var $s=Rs[Ss],Fs=[];for(Cs=0,Ts=$s.length;Cs<Ts;Cs++){var Os=$s[Cs];Fs.push(Os.clone())}this.faceVertexUvs[_a].push(Fs)}}var Gs=va.morphTargets;for(_a=0,_s=Gs.length;_a<_s;_a++){var Ns={};if(Ns.name=Gs[_a].name,Gs[_a].vertices!==void 0)for(Ns.vertices=[],Ss=0,Ms=Gs[_a].vertices.length;Ss<Ms;Ss++)Ns.vertices.push(Gs[_a].vertices[Ss].clone());if(Gs[_a].normals!==void 0)for(Ns.normals=[],Ss=0,Ms=Gs[_a].normals.length;Ss<Ms;Ss++)Ns.normals.push(Gs[_a].normals[Ss].clone());this.morphTargets.push(Ns)}var Vs=va.morphNormals;for(_a=0,_s=Vs.length;_a<_s;_a++){var Ds={};if(Vs[_a].vertexNormals!==void 0)for(Ds.vertexNormals=[],Ss=0,Ms=Vs[_a].vertexNormals.length;Ss<Ms;Ss++){var ks=Vs[_a].vertexNormals[Ss],Us={};Us.a=ks.a.clone(),Us.b=ks.b.clone(),Us.c=ks.c.clone(),Ds.vertexNormals.push(Us)}if(Vs[_a].faceNormals!==void 0)for(Ds.faceNormals=[],Ss=0,Ms=Vs[_a].faceNormals.length;Ss<Ms;Ss++)Ds.faceNormals.push(Vs[_a].faceNormals[Ss].clone());this.morphNormals.push(Ds)}var zs=va.skinWeights;for(_a=0,_s=zs.length;_a<_s;_a++)this.skinWeights.push(zs[_a].clone());var Ws=va.skinIndices;for(_a=0,_s=Ws.length;_a<_s;_a++)this.skinIndices.push(Ws[_a].clone());var qs=va.lineDistances;for(_a=0,_s=qs.length;_a<_s;_a++)this.lineDistances.push(qs[_a]);var Zs=va.boundingBox;Zs!==null&&(this.boundingBox=Zs.clone());var el=va.boundingSphere;return el!==null&&(this.boundingSphere=el.clone()),this.elementsNeedUpdate=va.elementsNeedUpdate,this.verticesNeedUpdate=va.verticesNeedUpdate,this.uvsNeedUpdate=va.uvsNeedUpdate,this.normalsNeedUpdate=va.normalsNeedUpdate,this.colorsNeedUpdate=va.colorsNeedUpdate,this.lineDistancesNeedUpdate=va.lineDistancesNeedUpdate,this.groupsNeedUpdate=va.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor(_a,_s,Ss,Ms,Cs,Ts){super();this.type="BoxGeometry",this.parameters={width:_a,height:_s,depth:Ss,widthSegments:Ms,heightSegments:Cs,depthSegments:Ts},this.fromBufferGeometry(new BoxBufferGeometry(_a,_s,Ss,Ms,Cs,Ts)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor(_a,_s,Ss,Ms,Cs,Ts){super();this.type="BoxBufferGeometry",this.parameters={width:_a,height:_s,depth:Ss,widthSegments:Ms,heightSegments:Cs,depthSegments:Ts};const Bs=this;_a=_a||1,_s=_s||1,Ss=Ss||1,Ms=Math.floor(Ms)||1,Cs=Math.floor(Cs)||1,Ts=Math.floor(Ts)||1;const Ps=[],Ls=[],Rs=[],$s=[];let Fs=0,Os=0;Gs("z","y","x",-1,-1,Ss,_s,_a,Ts,Cs,0),Gs("z","y","x",1,-1,Ss,_s,-_a,Ts,Cs,1),Gs("x","z","y",1,1,_a,Ss,_s,Ms,Ts,2),Gs("x","z","y",1,-1,_a,Ss,-_s,Ms,Ts,3),Gs("x","y","z",1,-1,_a,_s,Ss,Ms,Cs,4),Gs("x","y","z",-1,-1,_a,_s,-Ss,Ms,Cs,5),this.setIndex(Ps),this.setAttribute("position",new Float32BufferAttribute(Ls,3)),this.setAttribute("normal",new Float32BufferAttribute(Rs,3)),this.setAttribute("uv",new Float32BufferAttribute($s,2));function Gs(Ns,Vs,Ds,ks,Us,zs,Ws,qs,Zs,el,Js){const Hs=zs/Zs,Qs=Ws/el,js=zs/2,Ks=Ws/2,Xs=qs/2,Ys=Zs+1,rl=el+1;let tl=0,il=0;const ll=new Vector3;for(let cl=0;cl<rl;cl++){const al=cl*Qs-Ks;for(let dl=0;dl<Ys;dl++){const yl=dl*Hs-js;ll[Ns]=yl*ks,ll[Vs]=al*Us,ll[Ds]=Xs,Ls.push(ll.x,ll.y,ll.z),ll[Ns]=0,ll[Vs]=0,ll[Ds]=qs>0?1:-1,Rs.push(ll.x,ll.y,ll.z),$s.push(dl/Zs),$s.push(1-cl/el),tl+=1}}for(let cl=0;cl<el;cl++)for(let al=0;al<Zs;al++){const dl=Fs+al+Ys*cl,yl=Fs+al+Ys*(cl+1),xl=Fs+(al+1)+Ys*(cl+1),wl=Fs+(al+1)+Ys*cl;Ps.push(dl,yl,wl),Ps.push(yl,xl,wl),il+=6}Bs.addGroup(Os,il,Js),Os+=il,Fs+=tl}}}function cloneUniforms(va){var _a={};for(var _s in va){_a[_s]={};for(var Ss in va[_s]){var Ms=va[_s][Ss];Ms&&(Ms.isColor||Ms.isMatrix3||Ms.isMatrix4||Ms.isVector2||Ms.isVector3||Ms.isVector4||Ms.isTexture)?_a[_s][Ss]=Ms.clone():Array.isArray(Ms)?_a[_s][Ss]=Ms.slice():_a[_s][Ss]=Ms}}return _a}function mergeUniforms(va){for(var _a={},_s=0;_s<va.length;_s++){var Ss=cloneUniforms(va[_s]);for(var Ms in Ss)_a[Ms]=Ss[Ms]}return _a}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(va){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,va!==void 0&&(va.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(va))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.fragmentShader=va.fragmentShader,this.vertexShader=va.vertexShader,this.uniforms=cloneUniforms(va.uniforms),this.defines=Object.assign({},va.defines),this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.lights=va.lights,this.clipping=va.clipping,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this.extensions=Object.assign({},va.extensions),this};ShaderMaterial.prototype.toJSON=function(va){var _a=Material.prototype.toJSON.call(this,va);_a.uniforms={};for(var _s in this.uniforms){var Ss=this.uniforms[_s],Ms=Ss.value;Ms&&Ms.isTexture?_a.uniforms[_s]={type:"t",value:Ms.toJSON(va).uuid}:Ms&&Ms.isColor?_a.uniforms[_s]={type:"c",value:Ms.getHex()}:Ms&&Ms.isVector2?_a.uniforms[_s]={type:"v2",value:Ms.toArray()}:Ms&&Ms.isVector3?_a.uniforms[_s]={type:"v3",value:Ms.toArray()}:Ms&&Ms.isVector4?_a.uniforms[_s]={type:"v4",value:Ms.toArray()}:Ms&&Ms.isMatrix3?_a.uniforms[_s]={type:"m3",value:Ms.toArray()}:Ms&&Ms.isMatrix4?_a.uniforms[_s]={type:"m4",value:Ms.toArray()}:_a.uniforms[_s]={value:Ms}}Object.keys(this.defines).length>0&&(_a.defines=this.defines),_a.vertexShader=this.vertexShader,_a.fragmentShader=this.fragmentShader;var Cs={};for(var Ts in this.extensions)this.extensions[Ts]===!0&&(Cs[Ts]=!0);return Object.keys(Cs).length>0&&(_a.extensions=Cs),_a};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(va,_a){return Object3D.prototype.copy.call(this,va,_a),this.matrixWorldInverse.copy(va.matrixWorldInverse),this.projectionMatrix.copy(va.projectionMatrix),this.projectionMatrixInverse.copy(va.projectionMatrixInverse),this},getWorldDirection:function(va){va===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),va=new Vector3),this.updateMatrixWorld(!0);var _a=this.matrixWorld.elements;return va.set(-_a[8],-_a[9],-_a[10]).normalize()},updateMatrixWorld:function(va){Object3D.prototype.updateMatrixWorld.call(this,va),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(va,_a){Object3D.prototype.updateWorldMatrix.call(this,va,_a),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(va,_a,_s,Ss){Camera.call(this),this.type="PerspectiveCamera",this.fov=va!==void 0?va:50,this.zoom=1,this.near=_s!==void 0?_s:.1,this.far=Ss!==void 0?Ss:2e3,this.focus=10,this.aspect=_a!==void 0?_a:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(va,_a){return Camera.prototype.copy.call(this,va,_a),this.fov=va.fov,this.zoom=va.zoom,this.near=va.near,this.far=va.far,this.focus=va.focus,this.aspect=va.aspect,this.view=va.view===null?null:Object.assign({},va.view),this.filmGauge=va.filmGauge,this.filmOffset=va.filmOffset,this},setFocalLength:function(va){var _a=.5*this.getFilmHeight()/va;this.fov=MathUtils.RAD2DEG*2*Math.atan(_a),this.updateProjectionMatrix()},getFocalLength:function(){var va=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/va},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(va,_a,_s,Ss,Ms,Cs){this.aspect=va/_a,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=va,this.view.fullHeight=_a,this.view.offsetX=_s,this.view.offsetY=Ss,this.view.width=Ms,this.view.height=Cs,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var va=this.near,_a=va*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,_s=2*_a,Ss=this.aspect*_s,Ms=-.5*Ss,Cs=this.view;if(this.view!==null&&this.view.enabled){var Ts=Cs.fullWidth,Bs=Cs.fullHeight;Ms+=Cs.offsetX*Ss/Ts,_a-=Cs.offsetY*_s/Bs,Ss*=Cs.width/Ts,_s*=Cs.height/Bs}var Ps=this.filmOffset;Ps!==0&&(Ms+=va*Ps/this.getFilmWidth()),this.projectionMatrix.makePerspective(Ms,Ms+Ss,_a,_a-_s,va,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(va){var _a=Object3D.prototype.toJSON.call(this,va);return _a.object.fov=this.fov,_a.object.zoom=this.zoom,_a.object.near=this.near,_a.object.far=this.far,_a.object.focus=this.focus,_a.object.aspect=this.aspect,this.view!==null&&(_a.object.view=Object.assign({},this.view)),_a.object.filmGauge=this.filmGauge,_a.object.filmOffset=this.filmOffset,_a}});var fov=90,aspect=1;function CubeCamera(va,_a,_s){if(Object3D.call(this),this.type="CubeCamera",_s.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=_s;var Ss=new PerspectiveCamera(fov,aspect,va,_a);Ss.layers=this.layers,Ss.up.set(0,-1,0),Ss.lookAt(new Vector3(1,0,0)),this.add(Ss);var Ms=new PerspectiveCamera(fov,aspect,va,_a);Ms.layers=this.layers,Ms.up.set(0,-1,0),Ms.lookAt(new Vector3(-1,0,0)),this.add(Ms);var Cs=new PerspectiveCamera(fov,aspect,va,_a);Cs.layers=this.layers,Cs.up.set(0,0,1),Cs.lookAt(new Vector3(0,1,0)),this.add(Cs);var Ts=new PerspectiveCamera(fov,aspect,va,_a);Ts.layers=this.layers,Ts.up.set(0,0,-1),Ts.lookAt(new Vector3(0,-1,0)),this.add(Ts);var Bs=new PerspectiveCamera(fov,aspect,va,_a);Bs.layers=this.layers,Bs.up.set(0,-1,0),Bs.lookAt(new Vector3(0,0,1)),this.add(Bs);var Ps=new PerspectiveCamera(fov,aspect,va,_a);Ps.layers=this.layers,Ps.up.set(0,-1,0),Ps.lookAt(new Vector3(0,0,-1)),this.add(Ps),this.update=function(Ls,Rs){this.parent===null&&this.updateMatrixWorld();var $s=Ls.xr.enabled,Fs=Ls.getRenderTarget();Ls.xr.enabled=!1;var Os=_s.texture.generateMipmaps;_s.texture.generateMipmaps=!1,Ls.setRenderTarget(_s,0),Ls.render(Rs,Ss),Ls.setRenderTarget(_s,1),Ls.render(Rs,Ms),Ls.setRenderTarget(_s,2),Ls.render(Rs,Cs),Ls.setRenderTarget(_s,3),Ls.render(Rs,Ts),Ls.setRenderTarget(_s,4),Ls.render(Rs,Bs),_s.texture.generateMipmaps=Os,Ls.setRenderTarget(_s,5),Ls.render(Rs,Ps),Ls.setRenderTarget(Fs),Ls.xr.enabled=$s},this.clear=function(Ls,Rs,$s,Fs){for(var Os=Ls.getRenderTarget(),Gs=0;Gs<6;Gs++)Ls.setRenderTarget(_s,Gs),Ls.clear(Rs,$s,Fs);Ls.setRenderTarget(Os)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(va,_a,_s){Number.isInteger(_a)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),_a=_s),WebGLRenderTarget.call(this,va,va,_a)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(va,_a){this.texture.type=_a.type,this.texture.format=_a.format,this.texture.encoding=_a.encoding;var _s=new Scene,Ss={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},Ms=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(Ss.uniforms),vertexShader:Ss.vertexShader,fragmentShader:Ss.fragmentShader,side:BackSide,blending:NoBlending});Ms.uniforms.tEquirect.value=_a;var Cs=new Mesh(new BoxBufferGeometry(5,5,5),Ms);_s.add(Cs);var Ts=new CubeCamera(1,10,this);return Ts.update(va,_s),Cs.geometry.dispose(),Cs.material.dispose(),this};function DataTexture(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s){Texture.call(this,null,Cs,Ts,Bs,Ps,Ls,Ss,Ms,Rs,$s),this.image={data:va||null,width:_a||1,height:_s||1},this.magFilter=Ps!==void 0?Ps:NearestFilter,this.minFilter=Ls!==void 0?Ls:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(va,_a,_s,Ss,Ms,Cs){this.planes=[va!==void 0?va:new Plane,_a!==void 0?_a:new Plane,_s!==void 0?_s:new Plane,Ss!==void 0?Ss:new Plane,Ms!==void 0?Ms:new Plane,Cs!==void 0?Cs:new Plane]}Object.assign(Frustum.prototype,{set:function(va,_a,_s,Ss,Ms,Cs){var Ts=this.planes;return Ts[0].copy(va),Ts[1].copy(_a),Ts[2].copy(_s),Ts[3].copy(Ss),Ts[4].copy(Ms),Ts[5].copy(Cs),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){for(var _a=this.planes,_s=0;_s<6;_s++)_a[_s].copy(va.planes[_s]);return this},setFromProjectionMatrix:function(va){var _a=this.planes,_s=va.elements,Ss=_s[0],Ms=_s[1],Cs=_s[2],Ts=_s[3],Bs=_s[4],Ps=_s[5],Ls=_s[6],Rs=_s[7],$s=_s[8],Fs=_s[9],Os=_s[10],Gs=_s[11],Ns=_s[12],Vs=_s[13],Ds=_s[14],ks=_s[15];return _a[0].setComponents(Ts-Ss,Rs-Bs,Gs-$s,ks-Ns).normalize(),_a[1].setComponents(Ts+Ss,Rs+Bs,Gs+$s,ks+Ns).normalize(),_a[2].setComponents(Ts+Ms,Rs+Ps,Gs+Fs,ks+Vs).normalize(),_a[3].setComponents(Ts-Ms,Rs-Ps,Gs-Fs,ks-Vs).normalize(),_a[4].setComponents(Ts-Cs,Rs-Ls,Gs-Os,ks-Ds).normalize(),_a[5].setComponents(Ts+Cs,Rs+Ls,Gs+Os,ks+Ds).normalize(),this},intersectsObject:function(va){var _a=va.geometry;return _a.boundingSphere===null&&_a.computeBoundingSphere(),_sphere$1.copy(_a.boundingSphere).applyMatrix4(va.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(va){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(va.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(va){for(var _a=this.planes,_s=va.center,Ss=-va.radius,Ms=0;Ms<6;Ms++){var Cs=_a[Ms].distanceToPoint(_s);if(Cs<Ss)return!1}return!0},intersectsBox:function(va){for(var _a=this.planes,_s=0;_s<6;_s++){var Ss=_a[_s];if(_vector$5.x=Ss.normal.x>0?va.max.x:va.min.x,_vector$5.y=Ss.normal.y>0?va.max.y:va.min.y,_vector$5.z=Ss.normal.z>0?va.max.z:va.min.z,Ss.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(va){for(var _a=this.planes,_s=0;_s<6;_s++)if(_a[_s].distanceToPoint(va)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var va=null,_a=!1,_s=null;function Ss(Ms,Cs){_a!==!1&&(_s(Ms,Cs),va.requestAnimationFrame(Ss))}return{start:function(){_a!==!0&&_s!==null&&(va.requestAnimationFrame(Ss),_a=!0)},stop:function(){_a=!1},setAnimationLoop:function(Ms){_s=Ms},setContext:function(Ms){va=Ms}}}function WebGLAttributes(va,_a){var _s=_a.isWebGL2,Ss=new WeakMap;function Ms(Ls,Rs){var $s=Ls.array,Fs=Ls.usage,Os=va.createBuffer();va.bindBuffer(Rs,Os),va.bufferData(Rs,$s,Fs),Ls.onUploadCallback();var Gs=5126;return $s instanceof Float32Array?Gs=5126:$s instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):$s instanceof Uint16Array?Gs=5123:$s instanceof Int16Array?Gs=5122:$s instanceof Uint32Array?Gs=5125:$s instanceof Int32Array?Gs=5124:$s instanceof Int8Array?Gs=5120:$s instanceof Uint8Array&&(Gs=5121),{buffer:Os,type:Gs,bytesPerElement:$s.BYTES_PER_ELEMENT,version:Ls.version}}function Cs(Ls,Rs,$s){var Fs=Rs.array,Os=Rs.updateRange;va.bindBuffer($s,Ls),Os.count===-1?va.bufferSubData($s,0,Fs):(_s?va.bufferSubData($s,Os.offset*Fs.BYTES_PER_ELEMENT,Fs,Os.offset,Os.count):va.bufferSubData($s,Os.offset*Fs.BYTES_PER_ELEMENT,Fs.subarray(Os.offset,Os.offset+Os.count)),Os.count=-1)}function Ts(Ls){return Ls.isInterleavedBufferAttribute&&(Ls=Ls.data),Ss.get(Ls)}function Bs(Ls){Ls.isInterleavedBufferAttribute&&(Ls=Ls.data);var Rs=Ss.get(Ls);Rs&&(va.deleteBuffer(Rs.buffer),Ss.delete(Ls))}function Ps(Ls,Rs){Ls.isInterleavedBufferAttribute&&(Ls=Ls.data);var $s=Ss.get(Ls);$s===void 0?Ss.set(Ls,Ms(Ls,Rs)):$s.version<Ls.version&&(Cs($s.buffer,Ls,Rs),$s.version=Ls.version)}return{get:Ts,remove:Bs,update:Ps}}function PlaneGeometry(va,_a,_s,Ss){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:va,height:_a,widthSegments:_s,heightSegments:Ss},this.fromBufferGeometry(new PlaneBufferGeometry(va,_a,_s,Ss)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(va,_a,_s,Ss){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:va,height:_a,widthSegments:_s,heightSegments:Ss},va=va||1,_a=_a||1;var Ms=va/2,Cs=_a/2,Ts=Math.floor(_s)||1,Bs=Math.floor(Ss)||1,Ps=Ts+1,Ls=Bs+1,Rs=va/Ts,$s=_a/Bs,Fs,Os,Gs=[],Ns=[],Vs=[],Ds=[];for(Os=0;Os<Ls;Os++){var ks=Os*$s-Cs;for(Fs=0;Fs<Ps;Fs++){var Us=Fs*Rs-Ms;Ns.push(Us,-ks,0),Vs.push(0,0,1),Ds.push(Fs/Ts),Ds.push(1-Os/Bs)}}for(Os=0;Os<Bs;Os++)for(Fs=0;Fs<Ts;Fs++){var zs=Fs+Ps*Os,Ws=Fs+Ps*(Os+1),qs=Fs+1+Ps*(Os+1),Zs=Fs+1+Ps*Os;Gs.push(zs,Ws,Zs),Gs.push(Ws,qs,Zs)}this.setIndex(Gs),this.setAttribute("position",new Float32BufferAttribute(Ns,3)),this.setAttribute("normal",new Float32BufferAttribute(Vs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ds,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common$2=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common:common$2,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(va,_a,_s,Ss){var Ms=new Color(0),Cs=0,Ts,Bs,Ps=null,Ls=0,Rs=null;function $s(Os,Gs,Ns,Vs){var Ds=Gs.background,ks=va.xr,Us=ks.getSession&&ks.getSession();if(Us&&Us.environmentBlendMode==="additive"&&(Ds=null),Ds===null?Fs(Ms,Cs):Ds&&Ds.isColor&&(Fs(Ds,1),Vs=!0),(va.autoClear||Vs)&&va.clear(va.autoClearColor,va.autoClearDepth,va.autoClearStencil),Ds&&(Ds.isCubeTexture||Ds.isWebGLCubeRenderTarget||Ds.mapping===CubeUVReflectionMapping)){Bs===void 0&&(Bs=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Bs.geometry.deleteAttribute("normal"),Bs.geometry.deleteAttribute("uv"),Bs.onBeforeRender=function(Ws,qs,Zs){this.matrixWorld.copyPosition(Zs.matrixWorld)},Object.defineProperty(Bs.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),_s.update(Bs));var zs=Ds.isWebGLCubeRenderTarget?Ds.texture:Ds;Bs.material.uniforms.envMap.value=zs,Bs.material.uniforms.flipEnvMap.value=zs.isCubeTexture?-1:1,(Ps!==Ds||Ls!==zs.version||Rs!==va.toneMapping)&&(Bs.material.needsUpdate=!0,Ps=Ds,Ls=zs.version,Rs=va.toneMapping),Os.unshift(Bs,Bs.geometry,Bs.material,0,0,null)}else Ds&&Ds.isTexture&&(Ts===void 0&&(Ts=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Ts.geometry.deleteAttribute("normal"),Object.defineProperty(Ts.material,"map",{get:function(){return this.uniforms.t2D.value}}),_s.update(Ts)),Ts.material.uniforms.t2D.value=Ds,Ds.matrixAutoUpdate===!0&&Ds.updateMatrix(),Ts.material.uniforms.uvTransform.value.copy(Ds.matrix),(Ps!==Ds||Ls!==Ds.version||Rs!==va.toneMapping)&&(Ts.material.needsUpdate=!0,Ps=Ds,Ls=Ds.version,Rs=va.toneMapping),Os.unshift(Ts,Ts.geometry,Ts.material,0,0,null))}function Fs(Os,Gs){_a.buffers.color.setClear(Os.r,Os.g,Os.b,Gs,Ss)}return{getClearColor:function(){return Ms},setClearColor:function(Os,Gs){Ms.set(Os),Cs=Gs!==void 0?Gs:1,Fs(Ms,Cs)},getClearAlpha:function(){return Cs},setClearAlpha:function(Os){Cs=Os,Fs(Ms,Cs)},render:$s}}function WebGLBufferRenderer(va,_a,_s,Ss){var Ms=Ss.isWebGL2,Cs;function Ts(Ls){Cs=Ls}function Bs(Ls,Rs){va.drawArrays(Cs,Ls,Rs),_s.update(Rs,Cs)}function Ps(Ls,Rs,$s,Fs){if(Fs!==0){var Os,Gs;if(Ms)Os=va,Gs="drawArraysInstanced";else if(Os=_a.get("ANGLE_instanced_arrays"),Gs="drawArraysInstancedANGLE",Os===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Os[Gs](Cs,Rs,$s,Fs),_s.update($s,Cs,Fs)}}this.setMode=Ts,this.render=Bs,this.renderInstances=Ps}function WebGLCapabilities(va,_a,_s){var Ss;function Ms(){if(Ss!==void 0)return Ss;var qs=_a.get("EXT_texture_filter_anisotropic");return qs!==null?Ss=va.getParameter(qs.MAX_TEXTURE_MAX_ANISOTROPY_EXT):Ss=0,Ss}function Cs(qs){if(qs==="highp"){if(va.getShaderPrecisionFormat(35633,36338).precision>0&&va.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";qs="mediump"}return qs==="mediump"&&va.getShaderPrecisionFormat(35633,36337).precision>0&&va.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var Ts=typeof WebGL2RenderingContext<"u"&&va instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&va instanceof WebGL2ComputeRenderingContext,Bs=_s.precision!==void 0?_s.precision:"highp",Ps=Cs(Bs);Ps!==Bs&&(console.warn("THREE.WebGLRenderer:",Bs,"not supported, using",Ps,"instead."),Bs=Ps);var Ls=_s.logarithmicDepthBuffer===!0,Rs=va.getParameter(34930),$s=va.getParameter(35660),Fs=va.getParameter(3379),Os=va.getParameter(34076),Gs=va.getParameter(34921),Ns=va.getParameter(36347),Vs=va.getParameter(36348),Ds=va.getParameter(36349),ks=$s>0,Us=Ts||!!_a.get("OES_texture_float"),zs=ks&&Us,Ws=Ts?va.getParameter(36183):0;return{isWebGL2:Ts,getMaxAnisotropy:Ms,getMaxPrecision:Cs,precision:Bs,logarithmicDepthBuffer:Ls,maxTextures:Rs,maxVertexTextures:$s,maxTextureSize:Fs,maxCubemapSize:Os,maxAttributes:Gs,maxVertexUniforms:Ns,maxVaryings:Vs,maxFragmentUniforms:Ds,vertexTextures:ks,floatFragmentTextures:Us,floatVertexTextures:zs,maxSamples:Ws}}function WebGLClipping(){var va=this,_a=null,_s=0,Ss=!1,Ms=!1,Cs=new Plane,Ts=new Matrix3,Bs={value:null,needsUpdate:!1};this.uniform=Bs,this.numPlanes=0,this.numIntersection=0,this.init=function(Rs,$s,Fs){var Os=Rs.length!==0||$s||_s!==0||Ss;return Ss=$s,_a=Ls(Rs,Fs,0),_s=Rs.length,Os},this.beginShadows=function(){Ms=!0,Ls(null)},this.endShadows=function(){Ms=!1,Ps()},this.setState=function(Rs,$s,Fs,Os,Gs,Ns){if(!Ss||Rs===null||Rs.length===0||Ms&&!Fs)Ms?Ls(null):Ps();else{var Vs=Ms?0:_s,Ds=Vs*4,ks=Gs.clippingState||null;Bs.value=ks,ks=Ls(Rs,Os,Ds,Ns);for(var Us=0;Us!==Ds;++Us)ks[Us]=_a[Us];Gs.clippingState=ks,this.numIntersection=$s?this.numPlanes:0,this.numPlanes+=Vs}};function Ps(){Bs.value!==_a&&(Bs.value=_a,Bs.needsUpdate=_s>0),va.numPlanes=_s,va.numIntersection=0}function Ls(Rs,$s,Fs,Os){var Gs=Rs!==null?Rs.length:0,Ns=null;if(Gs!==0){if(Ns=Bs.value,Os!==!0||Ns===null){var Vs=Fs+Gs*4,Ds=$s.matrixWorldInverse;Ts.getNormalMatrix(Ds),(Ns===null||Ns.length<Vs)&&(Ns=new Float32Array(Vs));for(var ks=0,Us=Fs;ks!==Gs;++ks,Us+=4)Cs.copy(Rs[ks]).applyMatrix4(Ds,Ts),Cs.normal.toArray(Ns,Us),Ns[Us+3]=Cs.constant}Bs.value=Ns,Bs.needsUpdate=!0}return va.numPlanes=Gs,va.numIntersection=0,Ns}}function WebGLExtensions(va){var _a={};return{get:function(_s){if(_a[_s]!==void 0)return _a[_s];var Ss;switch(_s){case"WEBGL_depth_texture":Ss=va.getExtension("WEBGL_depth_texture")||va.getExtension("MOZ_WEBGL_depth_texture")||va.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Ss=va.getExtension("EXT_texture_filter_anisotropic")||va.getExtension("MOZ_EXT_texture_filter_anisotropic")||va.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Ss=va.getExtension("WEBGL_compressed_texture_s3tc")||va.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||va.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Ss=va.getExtension("WEBGL_compressed_texture_pvrtc")||va.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Ss=va.getExtension(_s)}return Ss===null&&console.warn("THREE.WebGLRenderer: "+_s+" extension not supported."),_a[_s]=Ss,Ss}}}function WebGLGeometries(va,_a,_s){var Ss=new WeakMap,Ms=new WeakMap;function Cs(Rs){var $s=Rs.target,Fs=Ss.get($s);Fs.index!==null&&_a.remove(Fs.index);for(var Os in Fs.attributes)_a.remove(Fs.attributes[Os]);$s.removeEventListener("dispose",Cs),Ss.delete($s);var Gs=Ms.get(Fs);Gs&&(_a.remove(Gs),Ms.delete(Fs)),_s.memory.geometries--}function Ts(Rs,$s){var Fs=Ss.get($s);return Fs||($s.addEventListener("dispose",Cs),$s.isBufferGeometry?Fs=$s:$s.isGeometry&&($s._bufferGeometry===void 0&&($s._bufferGeometry=new BufferGeometry().setFromObject(Rs)),Fs=$s._bufferGeometry),Ss.set($s,Fs),_s.memory.geometries++,Fs)}function Bs(Rs){var $s=Rs.index,Fs=Rs.attributes;$s!==null&&_a.update($s,34963);for(var Os in Fs)_a.update(Fs[Os],34962);var Gs=Rs.morphAttributes;for(var Os in Gs)for(var Ns=Gs[Os],Vs=0,Ds=Ns.length;Vs<Ds;Vs++)_a.update(Ns[Vs],34962)}function Ps(Rs){var $s=[],Fs=Rs.index,Os=Rs.attributes.position,Gs=0;if(Fs!==null){var Ns=Fs.array;Gs=Fs.version;for(var Vs=0,Ds=Ns.length;Vs<Ds;Vs+=3){var ks=Ns[Vs+0],Us=Ns[Vs+1],zs=Ns[Vs+2];$s.push(ks,Us,Us,zs,zs,ks)}}else{var Ns=Os.array;Gs=Os.version;for(var Vs=0,Ds=Ns.length/3-1;Vs<Ds;Vs+=3){var ks=Vs+0,Us=Vs+1,zs=Vs+2;$s.push(ks,Us,Us,zs,zs,ks)}}var Ws=new(arrayMax($s)>65535?Uint32BufferAttribute:Uint16BufferAttribute)($s,1);Ws.version=Gs,_a.update(Ws,34963);var qs=Ms.get(Rs);qs&&_a.remove(qs),Ms.set(Rs,Ws)}function Ls(Rs){var $s=Ms.get(Rs);if($s){var Fs=Rs.index;Fs!==null&&$s.version<Fs.version&&Ps(Rs)}else Ps(Rs);return Ms.get(Rs)}return{get:Ts,update:Bs,getWireframeAttribute:Ls}}function WebGLIndexedBufferRenderer(va,_a,_s,Ss){var Ms=Ss.isWebGL2,Cs;function Ts(Fs){Cs=Fs}var Bs,Ps;function Ls(Fs){Bs=Fs.type,Ps=Fs.bytesPerElement}function Rs(Fs,Os){va.drawElements(Cs,Os,Bs,Fs*Ps),_s.update(Os,Cs)}function $s(Fs,Os,Gs,Ns){if(Ns!==0){var Vs,Ds;if(Ms)Vs=va,Ds="drawElementsInstanced";else if(Vs=_a.get("ANGLE_instanced_arrays"),Ds="drawElementsInstancedANGLE",Vs===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Vs[Ds](Cs,Gs,Bs,Os*Ps,Ns),_s.update(Gs,Cs,Ns)}}this.setMode=Ts,this.setIndex=Ls,this.render=Rs,this.renderInstances=$s}function WebGLInfo(va){var _a={geometries:0,textures:0},_s={frame:0,calls:0,triangles:0,points:0,lines:0};function Ss(Cs,Ts,Bs){switch(Bs=Bs||1,_s.calls++,Ts){case 4:_s.triangles+=Bs*(Cs/3);break;case 1:_s.lines+=Bs*(Cs/2);break;case 3:_s.lines+=Bs*(Cs-1);break;case 2:_s.lines+=Bs*Cs;break;case 0:_s.points+=Bs*Cs;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Ts);break}}function Ms(){_s.frame++,_s.calls=0,_s.triangles=0,_s.points=0,_s.lines=0}return{memory:_a,render:_s,programs:null,autoReset:!0,reset:Ms,update:Ss}}function absNumericalSort(va,_a){return Math.abs(_a[1])-Math.abs(va[1])}function WebGLMorphtargets(va){var _a={},_s=new Float32Array(8);function Ss(Ms,Cs,Ts,Bs){var Ps=Ms.morphTargetInfluences,Ls=Ps===void 0?0:Ps.length,Rs=_a[Cs.id];if(Rs===void 0){Rs=[];for(var $s=0;$s<Ls;$s++)Rs[$s]=[$s,0];_a[Cs.id]=Rs}for(var Fs=Ts.morphTargets&&Cs.morphAttributes.position,Os=Ts.morphNormals&&Cs.morphAttributes.normal,$s=0;$s<Ls;$s++){var Gs=Rs[$s];Gs[1]!==0&&(Fs&&Cs.deleteAttribute("morphTarget"+$s),Os&&Cs.deleteAttribute("morphNormal"+$s))}for(var $s=0;$s<Ls;$s++){var Gs=Rs[$s];Gs[0]=$s,Gs[1]=Ps[$s]}Rs.sort(absNumericalSort);for(var Ns=0,$s=0;$s<8;$s++){var Gs=Rs[$s];if(Gs){var Vs=Gs[0],Ds=Gs[1];if(Ds){Fs&&Cs.setAttribute("morphTarget"+$s,Fs[Vs]),Os&&Cs.setAttribute("morphNormal"+$s,Os[Vs]),_s[$s]=Ds,Ns+=Ds;continue}}_s[$s]=0}var ks=Cs.morphTargetsRelative?1:1-Ns;Bs.getUniforms().setValue(va,"morphTargetBaseInfluence",ks),Bs.getUniforms().setValue(va,"morphTargetInfluences",_s)}return{update:Ss}}function WebGLObjects(va,_a,_s,Ss){var Ms=new WeakMap;function Cs(Bs){var Ps=Ss.render.frame,Ls=Bs.geometry,Rs=_a.get(Bs,Ls);return Ms.get(Rs)!==Ps&&(Ls.isGeometry&&Rs.updateFromObject(Bs),_a.update(Rs),Ms.set(Rs,Ps)),Bs.isInstancedMesh&&_s.update(Bs.instanceMatrix,34962),Rs}function Ts(){Ms=new WeakMap}return{update:Cs,dispose:Ts}}function CubeTexture(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls){va=va!==void 0?va:[],_a=_a!==void 0?_a:CubeReflectionMapping,Ts=Ts!==void 0?Ts:RGBFormat,Texture.call(this,va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(va){this.image=va}});function DataTexture2DArray(va,_a,_s,Ss){Texture.call(this,null),this.image={data:va||null,width:_a||1,height:_s||1,depth:Ss||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(va,_a,_s,Ss){Texture.call(this,null),this.image={data:va||null,width:_a||1,height:_s||1,depth:Ss||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(va,_a,_s){var Ss=va[0];if(Ss<=0||Ss>0)return va;var Ms=_a*_s,Cs=arrayCacheF32[Ms];if(Cs===void 0&&(Cs=new Float32Array(Ms),arrayCacheF32[Ms]=Cs),_a!==0){Ss.toArray(Cs,0);for(var Ts=1,Bs=0;Ts!==_a;++Ts)Bs+=_s,va[Ts].toArray(Cs,Bs)}return Cs}function arraysEqual(va,_a){if(va.length!==_a.length)return!1;for(var _s=0,Ss=va.length;_s<Ss;_s++)if(va[_s]!==_a[_s])return!1;return!0}function copyArray(va,_a){for(var _s=0,Ss=_a.length;_s<Ss;_s++)va[_s]=_a[_s]}function allocTexUnits(va,_a){var _s=arrayCacheI32[_a];_s===void 0&&(_s=new Int32Array(_a),arrayCacheI32[_a]=_s);for(var Ss=0;Ss!==_a;++Ss)_s[Ss]=va.allocateTextureUnit();return _s}function setValueV1f(va,_a){var _s=this.cache;_s[0]!==_a&&(va.uniform1f(this.addr,_a),_s[0]=_a)}function setValueV2f(va,_a){var _s=this.cache;if(_a.x!==void 0)(_s[0]!==_a.x||_s[1]!==_a.y)&&(va.uniform2f(this.addr,_a.x,_a.y),_s[0]=_a.x,_s[1]=_a.y);else{if(arraysEqual(_s,_a))return;va.uniform2fv(this.addr,_a),copyArray(_s,_a)}}function setValueV3f(va,_a){var _s=this.cache;if(_a.x!==void 0)(_s[0]!==_a.x||_s[1]!==_a.y||_s[2]!==_a.z)&&(va.uniform3f(this.addr,_a.x,_a.y,_a.z),_s[0]=_a.x,_s[1]=_a.y,_s[2]=_a.z);else if(_a.r!==void 0)(_s[0]!==_a.r||_s[1]!==_a.g||_s[2]!==_a.b)&&(va.uniform3f(this.addr,_a.r,_a.g,_a.b),_s[0]=_a.r,_s[1]=_a.g,_s[2]=_a.b);else{if(arraysEqual(_s,_a))return;va.uniform3fv(this.addr,_a),copyArray(_s,_a)}}function setValueV4f(va,_a){var _s=this.cache;if(_a.x!==void 0)(_s[0]!==_a.x||_s[1]!==_a.y||_s[2]!==_a.z||_s[3]!==_a.w)&&(va.uniform4f(this.addr,_a.x,_a.y,_a.z,_a.w),_s[0]=_a.x,_s[1]=_a.y,_s[2]=_a.z,_s[3]=_a.w);else{if(arraysEqual(_s,_a))return;va.uniform4fv(this.addr,_a),copyArray(_s,_a)}}function setValueM2(va,_a){var _s=this.cache,Ss=_a.elements;if(Ss===void 0){if(arraysEqual(_s,_a))return;va.uniformMatrix2fv(this.addr,!1,_a),copyArray(_s,_a)}else{if(arraysEqual(_s,Ss))return;mat2array.set(Ss),va.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(_s,Ss)}}function setValueM3(va,_a){var _s=this.cache,Ss=_a.elements;if(Ss===void 0){if(arraysEqual(_s,_a))return;va.uniformMatrix3fv(this.addr,!1,_a),copyArray(_s,_a)}else{if(arraysEqual(_s,Ss))return;mat3array.set(Ss),va.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(_s,Ss)}}function setValueM4(va,_a){var _s=this.cache,Ss=_a.elements;if(Ss===void 0){if(arraysEqual(_s,_a))return;va.uniformMatrix4fv(this.addr,!1,_a),copyArray(_s,_a)}else{if(arraysEqual(_s,Ss))return;mat4array.set(Ss),va.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(_s,Ss)}}function setValueT1(va,_a,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(va.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.safeSetTexture2D(_a||emptyTexture,Ms)}function setValueT2DArray1(va,_a,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(va.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.setTexture2DArray(_a||emptyTexture2dArray,Ms)}function setValueT3D1(va,_a,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(va.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.setTexture3D(_a||emptyTexture3d,Ms)}function setValueT6(va,_a,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(va.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.safeSetTextureCube(_a||emptyCubeTexture,Ms)}function setValueV1i(va,_a){var _s=this.cache;_s[0]!==_a&&(va.uniform1i(this.addr,_a),_s[0]=_a)}function setValueV2i(va,_a){var _s=this.cache;arraysEqual(_s,_a)||(va.uniform2iv(this.addr,_a),copyArray(_s,_a))}function setValueV3i(va,_a){var _s=this.cache;arraysEqual(_s,_a)||(va.uniform3iv(this.addr,_a),copyArray(_s,_a))}function setValueV4i(va,_a){var _s=this.cache;arraysEqual(_s,_a)||(va.uniform4iv(this.addr,_a),copyArray(_s,_a))}function setValueV1ui(va,_a){var _s=this.cache;_s[0]!==_a&&(va.uniform1ui(this.addr,_a),_s[0]=_a)}function getSingularSetter(va){switch(va){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(va,_a){va.uniform1fv(this.addr,_a)}function setValueV1iArray(va,_a){va.uniform1iv(this.addr,_a)}function setValueV2iArray(va,_a){va.uniform2iv(this.addr,_a)}function setValueV3iArray(va,_a){va.uniform3iv(this.addr,_a)}function setValueV4iArray(va,_a){va.uniform4iv(this.addr,_a)}function setValueV2fArray(va,_a){var _s=flatten(_a,this.size,2);va.uniform2fv(this.addr,_s)}function setValueV3fArray(va,_a){var _s=flatten(_a,this.size,3);va.uniform3fv(this.addr,_s)}function setValueV4fArray(va,_a){var _s=flatten(_a,this.size,4);va.uniform4fv(this.addr,_s)}function setValueM2Array(va,_a){var _s=flatten(_a,this.size,4);va.uniformMatrix2fv(this.addr,!1,_s)}function setValueM3Array(va,_a){var _s=flatten(_a,this.size,9);va.uniformMatrix3fv(this.addr,!1,_s)}function setValueM4Array(va,_a){var _s=flatten(_a,this.size,16);va.uniformMatrix4fv(this.addr,!1,_s)}function setValueT1Array(va,_a,_s){var Ss=_a.length,Ms=allocTexUnits(_s,Ss);va.uniform1iv(this.addr,Ms);for(var Cs=0;Cs!==Ss;++Cs)_s.safeSetTexture2D(_a[Cs]||emptyTexture,Ms[Cs])}function setValueT6Array(va,_a,_s){var Ss=_a.length,Ms=allocTexUnits(_s,Ss);va.uniform1iv(this.addr,Ms);for(var Cs=0;Cs!==Ss;++Cs)_s.safeSetTextureCube(_a[Cs]||emptyCubeTexture,Ms[Cs])}function getPureArraySetter(va){switch(va){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(va,_a,_s){this.id=va,this.addr=_s,this.cache=[],this.setValue=getSingularSetter(_a.type)}function PureArrayUniform(va,_a,_s){this.id=va,this.addr=_s,this.cache=[],this.size=_a.size,this.setValue=getPureArraySetter(_a.type)}PureArrayUniform.prototype.updateCache=function(va){var _a=this.cache;va instanceof Float32Array&&_a.length!==va.length&&(this.cache=new Float32Array(va.length)),copyArray(_a,va)};function StructuredUniform(va){this.id=va,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(va,_a,_s){for(var Ss=this.seq,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms){var Ts=Ss[Ms];Ts.setValue(va,_a[Ts.id],_s)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(va,_a){va.seq.push(_a),va.map[_a.id]=_a}function parseUniform(va,_a,_s){var Ss=va.name,Ms=Ss.length;for(RePathPart.lastIndex=0;;){var Cs=RePathPart.exec(Ss),Ts=RePathPart.lastIndex,Bs=Cs[1],Ps=Cs[2]==="]",Ls=Cs[3];if(Ps&&(Bs=Bs|0),Ls===void 0||Ls==="["&&Ts+2===Ms){addUniform(_s,Ls===void 0?new SingleUniform(Bs,va,_a):new PureArrayUniform(Bs,va,_a));break}else{var Rs=_s.map,$s=Rs[Bs];$s===void 0&&($s=new StructuredUniform(Bs),addUniform(_s,$s)),_s=$s}}}function WebGLUniforms(va,_a){this.seq=[],this.map={};for(var _s=va.getProgramParameter(_a,35718),Ss=0;Ss<_s;++Ss){var Ms=va.getActiveUniform(_a,Ss),Cs=va.getUniformLocation(_a,Ms.name);parseUniform(Ms,Cs,this)}}WebGLUniforms.prototype.setValue=function(va,_a,_s,Ss){var Ms=this.map[_a];Ms!==void 0&&Ms.setValue(va,_s,Ss)};WebGLUniforms.prototype.setOptional=function(va,_a,_s){var Ss=_a[_s];Ss!==void 0&&this.setValue(va,_s,Ss)};WebGLUniforms.upload=function(va,_a,_s,Ss){for(var Ms=0,Cs=_a.length;Ms!==Cs;++Ms){var Ts=_a[Ms],Bs=_s[Ts.id];Bs.needsUpdate!==!1&&Ts.setValue(va,Bs.value,Ss)}};WebGLUniforms.seqWithValue=function(va,_a){for(var _s=[],Ss=0,Ms=va.length;Ss!==Ms;++Ss){var Cs=va[Ss];Cs.id in _a&&_s.push(Cs)}return _s};function WebGLShader(va,_a,_s){var Ss=va.createShader(_a);return va.shaderSource(Ss,_s),va.compileShader(Ss),Ss}var programIdCount=0;function addLineNumbers(va){for(var _a=va.split(`
`),_s=0;_s<_a.length;_s++)_a[_s]=_s+1+": "+_a[_s];return _a.join(`
`)}function getEncodingComponents(va){switch(va){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+va)}}function getShaderErrors(va,_a,_s){var Ss=va.getShaderParameter(_a,35713),Ms=va.getShaderInfoLog(_a).trim();if(Ss&&Ms==="")return"";var Cs=va.getShaderSource(_a);return"THREE.WebGLShader: gl.getShaderInfoLog() "+_s+`
`+Ms+addLineNumbers(Cs)}function getTexelDecodingFunction(va,_a){var _s=getEncodingComponents(_a);return"vec4 "+va+"( vec4 value ) { return "+_s[0]+"ToLinear"+_s[1]+"; }"}function getTexelEncodingFunction(va,_a){var _s=getEncodingComponents(_a);return"vec4 "+va+"( vec4 value ) { return LinearTo"+_s[0]+_s[1]+"; }"}function getToneMappingFunction(va,_a){var _s;switch(_a){case LinearToneMapping:_s="Linear";break;case ReinhardToneMapping:_s="Reinhard";break;case Uncharted2ToneMapping:_s="Uncharted2";break;case CineonToneMapping:_s="OptimizedCineon";break;case ACESFilmicToneMapping:_s="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+_a)}return"vec3 "+va+"( vec3 color ) { return "+_s+"ToneMapping( color ); }"}function generateExtensions(va){var _a=[va.extensionDerivatives||va.envMapCubeUV||va.bumpMap||va.tangentSpaceNormalMap||va.clearcoatNormalMap||va.flatShading||va.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(va.extensionFragDepth||va.logarithmicDepthBuffer)&&va.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",va.extensionDrawBuffers&&va.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(va.extensionShaderTextureLOD||va.envMap)&&va.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return _a.filter(filterEmptyLine).join(`
`)}function generateDefines(va){var _a=[];for(var _s in va){var Ss=va[_s];Ss!==!1&&_a.push("#define "+_s+" "+Ss)}return _a.join(`
`)}function fetchAttributeLocations(va,_a){for(var _s={},Ss=va.getProgramParameter(_a,35721),Ms=0;Ms<Ss;Ms++){var Cs=va.getActiveAttrib(_a,Ms),Ts=Cs.name;_s[Ts]=va.getAttribLocation(_a,Ts)}return _s}function filterEmptyLine(va){return va!==""}function replaceLightNums(va,_a){return va.replace(/NUM_DIR_LIGHTS/g,_a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,_a.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,_a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,_a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,_a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,_a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,_a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,_a.numPointLightShadows)}function replaceClippingPlaneNums(va,_a){return va.replace(/NUM_CLIPPING_PLANES/g,_a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,_a.numClippingPlanes-_a.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(va){return va.replace(includePattern,includeReplacer)}function includeReplacer(va,_a){var _s=ShaderChunk[_a];if(_s===void 0)throw new Error("Can not resolve #include <"+_a+">");return resolveIncludes(_s)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(va){return va.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(va,_a,_s,Ss){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(va,_a,_s,Ss)}function loopReplacer(va,_a,_s,Ss){for(var Ms="",Cs=parseInt(_a);Cs<parseInt(_s);Cs++)Ms+=Ss.replace(/\[ i \]/g,"[ "+Cs+" ]").replace(/UNROLLED_LOOP_INDEX/g,Cs);return Ms}function generatePrecision(va){var _a="precision "+va.precision+` float;
precision `+va.precision+" int;";return va.precision==="highp"?_a+=`
#define HIGH_PRECISION`:va.precision==="mediump"?_a+=`
#define MEDIUM_PRECISION`:va.precision==="lowp"&&(_a+=`
#define LOW_PRECISION`),_a}function generateShadowMapTypeDefine(va){var _a="SHADOWMAP_TYPE_BASIC";return va.shadowMapType===PCFShadowMap?_a="SHADOWMAP_TYPE_PCF":va.shadowMapType===PCFSoftShadowMap?_a="SHADOWMAP_TYPE_PCF_SOFT":va.shadowMapType===VSMShadowMap&&(_a="SHADOWMAP_TYPE_VSM"),_a}function generateEnvMapTypeDefine(va){var _a="ENVMAP_TYPE_CUBE";if(va.envMap)switch(va.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:_a="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:_a="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:_a="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:_a="ENVMAP_TYPE_SPHERE";break}return _a}function generateEnvMapModeDefine(va){var _a="ENVMAP_MODE_REFLECTION";if(va.envMap)switch(va.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:_a="ENVMAP_MODE_REFRACTION";break}return _a}function generateEnvMapBlendingDefine(va){var _a="ENVMAP_BLENDING_NONE";if(va.envMap)switch(va.combine){case MultiplyOperation:_a="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:_a="ENVMAP_BLENDING_MIX";break;case AddOperation:_a="ENVMAP_BLENDING_ADD";break}return _a}function WebGLProgram(va,_a,_s){var Ss=va.getContext(),Ms=_s.defines,Cs=_s.vertexShader,Ts=_s.fragmentShader,Bs=generateShadowMapTypeDefine(_s),Ps=generateEnvMapTypeDefine(_s),Ls=generateEnvMapModeDefine(_s),Rs=generateEnvMapBlendingDefine(_s),$s=va.gammaFactor>0?va.gammaFactor:1,Fs=_s.isWebGL2?"":generateExtensions(_s),Os=generateDefines(Ms),Gs=Ss.createProgram(),Ns,Vs;if(_s.isRawShaderMaterial?(Ns=[Os].filter(filterEmptyLine).join(`
`),Ns.length>0&&(Ns+=`
`),Vs=[Fs,Os].filter(filterEmptyLine).join(`
`),Vs.length>0&&(Vs+=`
`)):(Ns=[generatePrecision(_s),"#define SHADER_NAME "+_s.shaderName,Os,_s.instancing?"#define USE_INSTANCING":"",_s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+$s,"#define MAX_BONES "+_s.maxBones,_s.useFog&&_s.fog?"#define USE_FOG":"",_s.useFog&&_s.fogExp2?"#define FOG_EXP2":"",_s.map?"#define USE_MAP":"",_s.envMap?"#define USE_ENVMAP":"",_s.envMap?"#define "+Ls:"",_s.lightMap?"#define USE_LIGHTMAP":"",_s.aoMap?"#define USE_AOMAP":"",_s.emissiveMap?"#define USE_EMISSIVEMAP":"",_s.bumpMap?"#define USE_BUMPMAP":"",_s.normalMap?"#define USE_NORMALMAP":"",_s.normalMap&&_s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",_s.normalMap&&_s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",_s.clearcoatMap?"#define USE_CLEARCOATMAP":"",_s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_s.displacementMap&&_s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",_s.specularMap?"#define USE_SPECULARMAP":"",_s.roughnessMap?"#define USE_ROUGHNESSMAP":"",_s.metalnessMap?"#define USE_METALNESSMAP":"",_s.alphaMap?"#define USE_ALPHAMAP":"",_s.vertexTangents?"#define USE_TANGENT":"",_s.vertexColors?"#define USE_COLOR":"",_s.vertexUvs?"#define USE_UV":"",_s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",_s.flatShading?"#define FLAT_SHADED":"",_s.skinning?"#define USE_SKINNING":"",_s.useVertexTexture?"#define BONE_TEXTURE":"",_s.morphTargets?"#define USE_MORPHTARGETS":"",_s.morphNormals&&_s.flatShading===!1?"#define USE_MORPHNORMALS":"",_s.doubleSided?"#define DOUBLE_SIDED":"",_s.flipSided?"#define FLIP_SIDED":"",_s.shadowMapEnabled?"#define USE_SHADOWMAP":"",_s.shadowMapEnabled?"#define "+Bs:"",_s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",_s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",_s.logarithmicDepthBuffer&&_s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Vs=[Fs,generatePrecision(_s),"#define SHADER_NAME "+_s.shaderName,Os,_s.alphaTest?"#define ALPHATEST "+_s.alphaTest+(_s.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+$s,_s.useFog&&_s.fog?"#define USE_FOG":"",_s.useFog&&_s.fogExp2?"#define FOG_EXP2":"",_s.map?"#define USE_MAP":"",_s.matcap?"#define USE_MATCAP":"",_s.envMap?"#define USE_ENVMAP":"",_s.envMap?"#define "+Ps:"",_s.envMap?"#define "+Ls:"",_s.envMap?"#define "+Rs:"",_s.lightMap?"#define USE_LIGHTMAP":"",_s.aoMap?"#define USE_AOMAP":"",_s.emissiveMap?"#define USE_EMISSIVEMAP":"",_s.bumpMap?"#define USE_BUMPMAP":"",_s.normalMap?"#define USE_NORMALMAP":"",_s.normalMap&&_s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",_s.normalMap&&_s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",_s.clearcoatMap?"#define USE_CLEARCOATMAP":"",_s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_s.specularMap?"#define USE_SPECULARMAP":"",_s.roughnessMap?"#define USE_ROUGHNESSMAP":"",_s.metalnessMap?"#define USE_METALNESSMAP":"",_s.alphaMap?"#define USE_ALPHAMAP":"",_s.sheen?"#define USE_SHEEN":"",_s.vertexTangents?"#define USE_TANGENT":"",_s.vertexColors?"#define USE_COLOR":"",_s.vertexUvs?"#define USE_UV":"",_s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",_s.gradientMap?"#define USE_GRADIENTMAP":"",_s.flatShading?"#define FLAT_SHADED":"",_s.doubleSided?"#define DOUBLE_SIDED":"",_s.flipSided?"#define FLIP_SIDED":"",_s.shadowMapEnabled?"#define USE_SHADOWMAP":"",_s.shadowMapEnabled?"#define "+Bs:"",_s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",_s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",_s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",_s.logarithmicDepthBuffer&&_s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(_s.extensionShaderTextureLOD||_s.envMap)&&_s.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",_s.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",_s.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",_s.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",_s.toneMapping):"",_s.dithering?"#define DITHERING":"",_s.outputEncoding||_s.mapEncoding||_s.matcapEncoding||_s.envMapEncoding||_s.emissiveMapEncoding||_s.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",_s.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",_s.mapEncoding):"",_s.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",_s.matcapEncoding):"",_s.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",_s.envMapEncoding):"",_s.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",_s.emissiveMapEncoding):"",_s.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",_s.lightMapEncoding):"",_s.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",_s.outputEncoding):"",_s.depthPacking?"#define DEPTH_PACKING "+_s.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Cs=resolveIncludes(Cs),Cs=replaceLightNums(Cs,_s),Cs=replaceClippingPlaneNums(Cs,_s),Ts=resolveIncludes(Ts),Ts=replaceLightNums(Ts,_s),Ts=replaceClippingPlaneNums(Ts,_s),Cs=unrollLoops(Cs),Ts=unrollLoops(Ts),_s.isWebGL2&&!_s.isRawShaderMaterial){var Ds=!1,ks=/^\s*#version\s+300\s+es\s*\n/;_s.isShaderMaterial&&Cs.match(ks)!==null&&Ts.match(ks)!==null&&(Ds=!0,Cs=Cs.replace(ks,""),Ts=Ts.replace(ks,"")),Ns=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Ns,Vs=[`#version 300 es
`,"#define varying in",Ds?"":"out highp vec4 pc_fragColor;",Ds?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Vs}var Us=Ns+Cs,zs=Vs+Ts,Ws=WebGLShader(Ss,35633,Us),qs=WebGLShader(Ss,35632,zs);if(Ss.attachShader(Gs,Ws),Ss.attachShader(Gs,qs),_s.index0AttributeName!==void 0?Ss.bindAttribLocation(Gs,0,_s.index0AttributeName):_s.morphTargets===!0&&Ss.bindAttribLocation(Gs,0,"position"),Ss.linkProgram(Gs),va.debug.checkShaderErrors){var Zs=Ss.getProgramInfoLog(Gs).trim(),el=Ss.getShaderInfoLog(Ws).trim(),Js=Ss.getShaderInfoLog(qs).trim(),Hs=!0,Qs=!0;if(Ss.getProgramParameter(Gs,35714)===!1){Hs=!1;var js=getShaderErrors(Ss,Ws,"vertex"),Ks=getShaderErrors(Ss,qs,"fragment");console.error("THREE.WebGLProgram: shader error: ",Ss.getError(),"35715",Ss.getProgramParameter(Gs,35715),"gl.getProgramInfoLog",Zs,js,Ks)}else Zs!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",Zs):(el===""||Js==="")&&(Qs=!1);Qs&&(this.diagnostics={runnable:Hs,programLog:Zs,vertexShader:{log:el,prefix:Ns},fragmentShader:{log:Js,prefix:Vs}})}Ss.deleteShader(Ws),Ss.deleteShader(qs);var Xs;this.getUniforms=function(){return Xs===void 0&&(Xs=new WebGLUniforms(Ss,Gs)),Xs};var Ys;return this.getAttributes=function(){return Ys===void 0&&(Ys=fetchAttributeLocations(Ss,Gs)),Ys},this.destroy=function(){Ss.deleteProgram(Gs),this.program=void 0},this.name=_s.shaderName,this.id=programIdCount++,this.cacheKey=_a,this.usedTimes=1,this.program=Gs,this.vertexShader=Ws,this.fragmentShader=qs,this}function WebGLPrograms(va,_a,_s){var Ss=[],Ms=_s.isWebGL2,Cs=_s.logarithmicDepthBuffer,Ts=_s.floatVertexTextures,Bs=_s.precision,Ps=_s.maxVertexUniforms,Ls=_s.vertexTextures,Rs={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},$s=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function Fs(Ns,Vs){var Ds;if(Vs){var ks=ShaderLib[Vs];Ds={name:Ns.type,uniforms:UniformsUtils.clone(ks.uniforms),vertexShader:ks.vertexShader,fragmentShader:ks.fragmentShader}}else Ds={name:Ns.type,uniforms:Ns.uniforms,vertexShader:Ns.vertexShader,fragmentShader:Ns.fragmentShader};return Ds}function Os(Ns){var Vs=Ns.skeleton,Ds=Vs.bones;if(Ts)return 1024;var ks=Ps,Us=Math.floor((ks-20)/4),zs=Math.min(Us,Ds.length);return zs<Ds.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Ds.length+" bones. This GPU supports "+zs+"."),0):zs}function Gs(Ns){var Vs;return Ns?Ns.isTexture?Vs=Ns.encoding:Ns.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Vs=Ns.texture.encoding):Vs=LinearEncoding,Vs}this.getParameters=function(Ns,Vs,Ds,ks,Us,zs,Ws){var qs=ks.fog,Zs=Ns.isMeshStandardMaterial?ks.environment:null,el=Ns.envMap||Zs,Js=Rs[Ns.type],Hs=Ws.isSkinnedMesh?Os(Ws):0;Ns.precision!==null&&(Bs=_s.getMaxPrecision(Ns.precision),Bs!==Ns.precision&&console.warn("THREE.WebGLProgram.getParameters:",Ns.precision,"not supported, using",Bs,"instead."));var Qs=Fs(Ns,Js);Ns.onBeforeCompile(Qs,va);var js=va.getRenderTarget(),Ks={isWebGL2:Ms,shaderID:Js,shaderName:Qs.name,uniforms:Qs.uniforms,vertexShader:Qs.vertexShader,fragmentShader:Qs.fragmentShader,defines:Ns.defines,isRawShaderMaterial:Ns.isRawShaderMaterial,isShaderMaterial:Ns.isShaderMaterial,precision:Bs,instancing:Ws.isInstancedMesh===!0,supportsVertexTextures:Ls,outputEncoding:js!==null?Gs(js.texture):va.outputEncoding,map:!!Ns.map,mapEncoding:Gs(Ns.map),matcap:!!Ns.matcap,matcapEncoding:Gs(Ns.matcap),envMap:!!el,envMapMode:el&&el.mapping,envMapEncoding:Gs(el),envMapCubeUV:!!el&&(el.mapping===CubeUVReflectionMapping||el.mapping===CubeUVRefractionMapping),lightMap:!!Ns.lightMap,lightMapEncoding:Gs(Ns.lightMap),aoMap:!!Ns.aoMap,emissiveMap:!!Ns.emissiveMap,emissiveMapEncoding:Gs(Ns.emissiveMap),bumpMap:!!Ns.bumpMap,normalMap:!!Ns.normalMap,objectSpaceNormalMap:Ns.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:Ns.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!Ns.clearcoatMap,clearcoatRoughnessMap:!!Ns.clearcoatRoughnessMap,clearcoatNormalMap:!!Ns.clearcoatNormalMap,displacementMap:!!Ns.displacementMap,roughnessMap:!!Ns.roughnessMap,metalnessMap:!!Ns.metalnessMap,specularMap:!!Ns.specularMap,alphaMap:!!Ns.alphaMap,gradientMap:!!Ns.gradientMap,sheen:!!Ns.sheen,combine:Ns.combine,vertexTangents:Ns.normalMap&&Ns.vertexTangents,vertexColors:Ns.vertexColors,vertexUvs:!!Ns.map||!!Ns.bumpMap||!!Ns.normalMap||!!Ns.specularMap||!!Ns.alphaMap||!!Ns.emissiveMap||!!Ns.roughnessMap||!!Ns.metalnessMap||!!Ns.clearcoatMap||!!Ns.clearcoatRoughnessMap||!!Ns.clearcoatNormalMap||!!Ns.displacementMap,uvsVertexOnly:!(!!Ns.map||!!Ns.bumpMap||!!Ns.normalMap||!!Ns.specularMap||!!Ns.alphaMap||!!Ns.emissiveMap||!!Ns.roughnessMap||!!Ns.metalnessMap||!!Ns.clearcoatNormalMap)&&!!Ns.displacementMap,fog:!!qs,useFog:Ns.fog,fogExp2:qs&&qs.isFogExp2,flatShading:Ns.flatShading,sizeAttenuation:Ns.sizeAttenuation,logarithmicDepthBuffer:Cs,skinning:Ns.skinning&&Hs>0,maxBones:Hs,useVertexTexture:Ts,morphTargets:Ns.morphTargets,morphNormals:Ns.morphNormals,maxMorphTargets:va.maxMorphTargets,maxMorphNormals:va.maxMorphNormals,numDirLights:Vs.directional.length,numPointLights:Vs.point.length,numSpotLights:Vs.spot.length,numRectAreaLights:Vs.rectArea.length,numHemiLights:Vs.hemi.length,numDirLightShadows:Vs.directionalShadowMap.length,numPointLightShadows:Vs.pointShadowMap.length,numSpotLightShadows:Vs.spotShadowMap.length,numClippingPlanes:Us,numClipIntersection:zs,dithering:Ns.dithering,shadowMapEnabled:va.shadowMap.enabled&&Ds.length>0,shadowMapType:va.shadowMap.type,toneMapping:Ns.toneMapped?va.toneMapping:NoToneMapping,physicallyCorrectLights:va.physicallyCorrectLights,premultipliedAlpha:Ns.premultipliedAlpha,alphaTest:Ns.alphaTest,doubleSided:Ns.side===DoubleSide,flipSided:Ns.side===BackSide,depthPacking:Ns.depthPacking!==void 0?Ns.depthPacking:!1,index0AttributeName:Ns.index0AttributeName,extensionDerivatives:Ns.extensions&&Ns.extensions.derivatives,extensionFragDepth:Ns.extensions&&Ns.extensions.fragDepth,extensionDrawBuffers:Ns.extensions&&Ns.extensions.drawBuffers,extensionShaderTextureLOD:Ns.extensions&&Ns.extensions.shaderTextureLOD,rendererExtensionFragDepth:Ms||_a.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:Ms||_a.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:Ms||_a.get("EXT_shader_texture_lod")!==null,onBeforeCompile:Ns.onBeforeCompile};return Ks},this.getProgramCacheKey=function(Ns){var Vs=[];if(Ns.shaderID?Vs.push(Ns.shaderID):(Vs.push(Ns.fragmentShader),Vs.push(Ns.vertexShader)),Ns.defines!==void 0)for(var Ds in Ns.defines)Vs.push(Ds),Vs.push(Ns.defines[Ds]);if(Ns.isRawShaderMaterial===void 0){for(var ks=0;ks<$s.length;ks++)Vs.push(Ns[$s[ks]]);Vs.push(va.outputEncoding),Vs.push(va.gammaFactor)}return Vs.push(Ns.onBeforeCompile.toString()),Vs.join()},this.acquireProgram=function(Ns,Vs){for(var Ds,ks=0,Us=Ss.length;ks<Us;ks++){var zs=Ss[ks];if(zs.cacheKey===Vs){Ds=zs,++Ds.usedTimes;break}}return Ds===void 0&&(Ds=new WebGLProgram(va,Vs,Ns),Ss.push(Ds)),Ds},this.releaseProgram=function(Ns){if(--Ns.usedTimes===0){var Vs=Ss.indexOf(Ns);Ss[Vs]=Ss[Ss.length-1],Ss.pop(),Ns.destroy()}},this.programs=Ss}function WebGLProperties(){var va=new WeakMap;function _a(Cs){var Ts=va.get(Cs);return Ts===void 0&&(Ts={},va.set(Cs,Ts)),Ts}function _s(Cs){va.delete(Cs)}function Ss(Cs,Ts,Bs){va.get(Cs)[Ts]=Bs}function Ms(){va=new WeakMap}return{get:_a,remove:_s,update:Ss,dispose:Ms}}function painterSortStable(va,_a){return va.groupOrder!==_a.groupOrder?va.groupOrder-_a.groupOrder:va.renderOrder!==_a.renderOrder?va.renderOrder-_a.renderOrder:va.program!==_a.program?va.program.id-_a.program.id:va.material.id!==_a.material.id?va.material.id-_a.material.id:va.z!==_a.z?va.z-_a.z:va.id-_a.id}function reversePainterSortStable(va,_a){return va.groupOrder!==_a.groupOrder?va.groupOrder-_a.groupOrder:va.renderOrder!==_a.renderOrder?va.renderOrder-_a.renderOrder:va.z!==_a.z?_a.z-va.z:va.id-_a.id}function WebGLRenderList(){var va=[],_a=0,_s=[],Ss=[],Ms={id:-1};function Cs(){_a=0,_s.length=0,Ss.length=0}function Ts($s,Fs,Os,Gs,Ns,Vs){var Ds=va[_a];return Ds===void 0?(Ds={id:$s.id,object:$s,geometry:Fs,material:Os,program:Os.program||Ms,groupOrder:Gs,renderOrder:$s.renderOrder,z:Ns,group:Vs},va[_a]=Ds):(Ds.id=$s.id,Ds.object=$s,Ds.geometry=Fs,Ds.material=Os,Ds.program=Os.program||Ms,Ds.groupOrder=Gs,Ds.renderOrder=$s.renderOrder,Ds.z=Ns,Ds.group=Vs),_a++,Ds}function Bs($s,Fs,Os,Gs,Ns,Vs){var Ds=Ts($s,Fs,Os,Gs,Ns,Vs);(Os.transparent===!0?Ss:_s).push(Ds)}function Ps($s,Fs,Os,Gs,Ns,Vs){var Ds=Ts($s,Fs,Os,Gs,Ns,Vs);(Os.transparent===!0?Ss:_s).unshift(Ds)}function Ls($s,Fs){_s.length>1&&_s.sort($s||painterSortStable),Ss.length>1&&Ss.sort(Fs||reversePainterSortStable)}function Rs(){for(var $s=_a,Fs=va.length;$s<Fs;$s++){var Os=va[$s];if(Os.id===null)break;Os.id=null,Os.object=null,Os.geometry=null,Os.material=null,Os.program=null,Os.group=null}}return{opaque:_s,transparent:Ss,init:Cs,push:Bs,unshift:Ps,finish:Rs,sort:Ls}}function WebGLRenderLists(){var va=new WeakMap;function _a(Ms){var Cs=Ms.target;Cs.removeEventListener("dispose",_a),va.delete(Cs)}function _s(Ms,Cs){var Ts=va.get(Ms),Bs;return Ts===void 0?(Bs=new WebGLRenderList,va.set(Ms,new WeakMap),va.get(Ms).set(Cs,Bs),Ms.addEventListener("dispose",_a)):(Bs=Ts.get(Cs),Bs===void 0&&(Bs=new WebGLRenderList,Ts.set(Cs,Bs))),Bs}function Ss(){va=new WeakMap}return{get:_s,dispose:Ss}}function UniformsCache(){var va={};return{get:function(_a){if(va[_a.id]!==void 0)return va[_a.id];var _s;switch(_a.type){case"DirectionalLight":_s={direction:new Vector3,color:new Color};break;case"SpotLight":_s={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":_s={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":_s={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":_s={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return va[_a.id]=_s,_s}}}function ShadowUniformsCache(){var va={};return{get:function(_a){if(va[_a.id]!==void 0)return va[_a.id];var _s;switch(_a.type){case"DirectionalLight":_s={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":_s={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":_s={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return va[_a.id]=_s,_s}}}var nextVersion=0;function shadowCastingLightsFirst(va,_a){return(_a.castShadow?1:0)-(va.castShadow?1:0)}function WebGLLights(){for(var va=new UniformsCache,_a=ShadowUniformsCache(),_s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},Ss=0;Ss<9;Ss++)_s.probe.push(new Vector3);var Ms=new Vector3,Cs=new Matrix4,Ts=new Matrix4;function Bs(Ps,Ls,Rs){for(var $s=0,Fs=0,Os=0,Gs=0;Gs<9;Gs++)_s.probe[Gs].set(0,0,0);var Ns=0,Vs=0,Ds=0,ks=0,Us=0,zs=0,Ws=0,qs=0,Zs=Rs.matrixWorldInverse;Ps.sort(shadowCastingLightsFirst);for(var Gs=0,el=Ps.length;Gs<el;Gs++){var Js=Ps[Gs],Hs=Js.color,Qs=Js.intensity,js=Js.distance,Ks=Js.shadow&&Js.shadow.map?Js.shadow.map.texture:null;if(Js.isAmbientLight)$s+=Hs.r*Qs,Fs+=Hs.g*Qs,Os+=Hs.b*Qs;else if(Js.isLightProbe)for(var Xs=0;Xs<9;Xs++)_s.probe[Xs].addScaledVector(Js.sh.coefficients[Xs],Qs);else if(Js.isDirectionalLight){var Ys=va.get(Js);if(Ys.color.copy(Js.color).multiplyScalar(Js.intensity),Ys.direction.setFromMatrixPosition(Js.matrixWorld),Ms.setFromMatrixPosition(Js.target.matrixWorld),Ys.direction.sub(Ms),Ys.direction.transformDirection(Zs),Js.castShadow){var rl=Js.shadow,tl=_a.get(Js);tl.shadowBias=rl.bias,tl.shadowRadius=rl.radius,tl.shadowMapSize=rl.mapSize,_s.directionalShadow[Ns]=tl,_s.directionalShadowMap[Ns]=Ks,_s.directionalShadowMatrix[Ns]=Js.shadow.matrix,zs++}_s.directional[Ns]=Ys,Ns++}else if(Js.isSpotLight){var Ys=va.get(Js);if(Ys.position.setFromMatrixPosition(Js.matrixWorld),Ys.position.applyMatrix4(Zs),Ys.color.copy(Hs).multiplyScalar(Qs),Ys.distance=js,Ys.direction.setFromMatrixPosition(Js.matrixWorld),Ms.setFromMatrixPosition(Js.target.matrixWorld),Ys.direction.sub(Ms),Ys.direction.transformDirection(Zs),Ys.coneCos=Math.cos(Js.angle),Ys.penumbraCos=Math.cos(Js.angle*(1-Js.penumbra)),Ys.decay=Js.decay,Js.castShadow){var rl=Js.shadow,tl=_a.get(Js);tl.shadowBias=rl.bias,tl.shadowRadius=rl.radius,tl.shadowMapSize=rl.mapSize,_s.spotShadow[Ds]=tl,_s.spotShadowMap[Ds]=Ks,_s.spotShadowMatrix[Ds]=Js.shadow.matrix,qs++}_s.spot[Ds]=Ys,Ds++}else if(Js.isRectAreaLight){var Ys=va.get(Js);Ys.color.copy(Hs).multiplyScalar(Qs),Ys.position.setFromMatrixPosition(Js.matrixWorld),Ys.position.applyMatrix4(Zs),Ts.identity(),Cs.copy(Js.matrixWorld),Cs.premultiply(Zs),Ts.extractRotation(Cs),Ys.halfWidth.set(Js.width*.5,0,0),Ys.halfHeight.set(0,Js.height*.5,0),Ys.halfWidth.applyMatrix4(Ts),Ys.halfHeight.applyMatrix4(Ts),_s.rectArea[ks]=Ys,ks++}else if(Js.isPointLight){var Ys=va.get(Js);if(Ys.position.setFromMatrixPosition(Js.matrixWorld),Ys.position.applyMatrix4(Zs),Ys.color.copy(Js.color).multiplyScalar(Js.intensity),Ys.distance=Js.distance,Ys.decay=Js.decay,Js.castShadow){var rl=Js.shadow,tl=_a.get(Js);tl.shadowBias=rl.bias,tl.shadowRadius=rl.radius,tl.shadowMapSize=rl.mapSize,tl.shadowCameraNear=rl.camera.near,tl.shadowCameraFar=rl.camera.far,_s.pointShadow[Vs]=tl,_s.pointShadowMap[Vs]=Ks,_s.pointShadowMatrix[Vs]=Js.shadow.matrix,Ws++}_s.point[Vs]=Ys,Vs++}else if(Js.isHemisphereLight){var Ys=va.get(Js);Ys.direction.setFromMatrixPosition(Js.matrixWorld),Ys.direction.transformDirection(Zs),Ys.direction.normalize(),Ys.skyColor.copy(Js.color).multiplyScalar(Qs),Ys.groundColor.copy(Js.groundColor).multiplyScalar(Qs),_s.hemi[Us]=Ys,Us++}}_s.ambient[0]=$s,_s.ambient[1]=Fs,_s.ambient[2]=Os;var il=_s.hash;(il.directionalLength!==Ns||il.pointLength!==Vs||il.spotLength!==Ds||il.rectAreaLength!==ks||il.hemiLength!==Us||il.numDirectionalShadows!==zs||il.numPointShadows!==Ws||il.numSpotShadows!==qs)&&(_s.directional.length=Ns,_s.spot.length=Ds,_s.rectArea.length=ks,_s.point.length=Vs,_s.hemi.length=Us,_s.directionalShadow.length=zs,_s.directionalShadowMap.length=zs,_s.pointShadow.length=Ws,_s.pointShadowMap.length=Ws,_s.spotShadow.length=qs,_s.spotShadowMap.length=qs,_s.directionalShadowMatrix.length=zs,_s.pointShadowMatrix.length=Ws,_s.spotShadowMatrix.length=qs,il.directionalLength=Ns,il.pointLength=Vs,il.spotLength=Ds,il.rectAreaLength=ks,il.hemiLength=Us,il.numDirectionalShadows=zs,il.numPointShadows=Ws,il.numSpotShadows=qs,_s.version=nextVersion++)}return{setup:Bs,state:_s}}function WebGLRenderState(){var va=new WebGLLights,_a=[],_s=[];function Ss(){_a.length=0,_s.length=0}function Ms(Ps){_a.push(Ps)}function Cs(Ps){_s.push(Ps)}function Ts(Ps){va.setup(_a,_s,Ps)}var Bs={lightsArray:_a,shadowsArray:_s,lights:va};return{init:Ss,state:Bs,setupLights:Ts,pushLight:Ms,pushShadow:Cs}}function WebGLRenderStates(){var va=new WeakMap;function _a(Ms){var Cs=Ms.target;Cs.removeEventListener("dispose",_a),va.delete(Cs)}function _s(Ms,Cs){var Ts;return va.has(Ms)===!1?(Ts=new WebGLRenderState,va.set(Ms,new WeakMap),va.get(Ms).set(Cs,Ts),Ms.addEventListener("dispose",_a)):va.get(Ms).has(Cs)===!1?(Ts=new WebGLRenderState,va.get(Ms).set(Cs,Ts)):Ts=va.get(Ms).get(Cs),Ts}function Ss(){va=new WeakMap}return{get:_s,dispose:Ss}}function MeshDepthMaterial(va){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(va)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.depthPacking=va.depthPacking,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.map=va.map,this.alphaMap=va.alphaMap,this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this};function MeshDistanceMaterial(va){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(va)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.referencePosition.copy(va.referencePosition),this.nearDistance=va.nearDistance,this.farDistance=va.farDistance,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.map=va.map,this.alphaMap=va.alphaMap,this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(va,_a,_s){var Ss=new Frustum,Ms=new Vector2,Cs=new Vector2,Ts=new Vector4,Bs=[],Ps=[],Ls={},Rs={0:BackSide,1:FrontSide,2:DoubleSide},$s=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),Fs=$s.clone();Fs.defines.HORIZONAL_PASS=1;var Os=new BufferGeometry;Os.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Gs=new Mesh(Os,$s),Ns=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(Ws,qs,Zs){if(Ns.enabled!==!1&&!(Ns.autoUpdate===!1&&Ns.needsUpdate===!1)&&Ws.length!==0){var el=va.getRenderTarget(),Js=va.getActiveCubeFace(),Hs=va.getActiveMipmapLevel(),Qs=va.state;Qs.setBlending(NoBlending),Qs.buffers.color.setClear(1,1,1,1),Qs.buffers.depth.setTest(!0),Qs.setScissorTest(!1);for(var js=0,Ks=Ws.length;js<Ks;js++){var Xs=Ws[js],Ys=Xs.shadow;if(Ys===void 0){console.warn("THREE.WebGLShadowMap:",Xs,"has no shadow.");continue}Ms.copy(Ys.mapSize);var rl=Ys.getFrameExtents();if(Ms.multiply(rl),Cs.copy(Ys.mapSize),(Ms.x>_s||Ms.y>_s)&&(Ms.x>_s&&(Cs.x=Math.floor(_s/rl.x),Ms.x=Cs.x*rl.x,Ys.mapSize.x=Cs.x),Ms.y>_s&&(Cs.y=Math.floor(_s/rl.y),Ms.y=Cs.y*rl.y,Ys.mapSize.y=Cs.y)),Ys.map===null&&!Ys.isPointLightShadow&&this.type===VSMShadowMap){var tl={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};Ys.map=new WebGLRenderTarget(Ms.x,Ms.y,tl),Ys.map.texture.name=Xs.name+".shadowMap",Ys.mapPass=new WebGLRenderTarget(Ms.x,Ms.y,tl),Ys.camera.updateProjectionMatrix()}if(Ys.map===null){var tl={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};Ys.map=new WebGLRenderTarget(Ms.x,Ms.y,tl),Ys.map.texture.name=Xs.name+".shadowMap",Ys.camera.updateProjectionMatrix()}va.setRenderTarget(Ys.map),va.clear();for(var il=Ys.getViewportCount(),ll=0;ll<il;ll++){var cl=Ys.getViewport(ll);Ts.set(Cs.x*cl.x,Cs.y*cl.y,Cs.x*cl.z,Cs.y*cl.w),Qs.viewport(Ts),Ys.updateMatrices(Xs,ll),Ss=Ys.getFrustum(),zs(qs,Zs,Ys.camera,Xs,this.type)}!Ys.isPointLightShadow&&this.type===VSMShadowMap&&Vs(Ys,Zs)}Ns.needsUpdate=!1,va.setRenderTarget(el,Js,Hs)}};function Vs(Ws,qs){var Zs=_a.update(Gs);$s.uniforms.shadow_pass.value=Ws.map.texture,$s.uniforms.resolution.value=Ws.mapSize,$s.uniforms.radius.value=Ws.radius,va.setRenderTarget(Ws.mapPass),va.clear(),va.renderBufferDirect(qs,null,Zs,$s,Gs,null),Fs.uniforms.shadow_pass.value=Ws.mapPass.texture,Fs.uniforms.resolution.value=Ws.mapSize,Fs.uniforms.radius.value=Ws.radius,va.setRenderTarget(Ws.map),va.clear(),va.renderBufferDirect(qs,null,Zs,Fs,Gs,null)}function Ds(Ws,qs,Zs){var el=Ws<<0|qs<<1|Zs<<2,Js=Bs[el];return Js===void 0&&(Js=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:Ws,skinning:qs}),Bs[el]=Js),Js}function ks(Ws,qs,Zs){var el=Ws<<0|qs<<1|Zs<<2,Js=Ps[el];return Js===void 0&&(Js=new MeshDistanceMaterial({morphTargets:Ws,skinning:qs}),Ps[el]=Js),Js}function Us(Ws,qs,Zs,el,Js,Hs,Qs){var js=null,Ks=Ds,Xs=Ws.customDepthMaterial;if(el.isPointLight===!0&&(Ks=ks,Xs=Ws.customDistanceMaterial),Xs===void 0){var Ys=!1;Zs.morphTargets===!0&&(Ys=qs.morphAttributes&&qs.morphAttributes.position&&qs.morphAttributes.position.length>0);var rl=!1;Ws.isSkinnedMesh===!0&&(Zs.skinning===!0?rl=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",Ws));var tl=Ws.isInstancedMesh===!0;js=Ks(Ys,rl,tl)}else js=Xs;if(va.localClippingEnabled&&Zs.clipShadows===!0&&Zs.clippingPlanes.length!==0){var il=js.uuid,ll=Zs.uuid,cl=Ls[il];cl===void 0&&(cl={},Ls[il]=cl);var al=cl[ll];al===void 0&&(al=js.clone(),cl[ll]=al),js=al}return js.visible=Zs.visible,js.wireframe=Zs.wireframe,Qs===VSMShadowMap?js.side=Zs.shadowSide!==null?Zs.shadowSide:Zs.side:js.side=Zs.shadowSide!==null?Zs.shadowSide:Rs[Zs.side],js.clipShadows=Zs.clipShadows,js.clippingPlanes=Zs.clippingPlanes,js.clipIntersection=Zs.clipIntersection,js.wireframeLinewidth=Zs.wireframeLinewidth,js.linewidth=Zs.linewidth,el.isPointLight===!0&&js.isMeshDistanceMaterial===!0&&(js.referencePosition.setFromMatrixPosition(el.matrixWorld),js.nearDistance=Js,js.farDistance=Hs),js}function zs(Ws,qs,Zs,el,Js){if(Ws.visible!==!1){var Hs=Ws.layers.test(qs.layers);if(Hs&&(Ws.isMesh||Ws.isLine||Ws.isPoints)&&(Ws.castShadow||Ws.receiveShadow&&Js===VSMShadowMap)&&(!Ws.frustumCulled||Ss.intersectsObject(Ws))){Ws.modelViewMatrix.multiplyMatrices(Zs.matrixWorldInverse,Ws.matrixWorld);var Qs=_a.update(Ws),js=Ws.material;if(Array.isArray(js))for(var Ks=Qs.groups,Xs=0,Ys=Ks.length;Xs<Ys;Xs++){var rl=Ks[Xs],tl=js[rl.materialIndex];if(tl&&tl.visible){var il=Us(Ws,Qs,tl,el,Zs.near,Zs.far,Js);va.renderBufferDirect(Zs,null,Qs,il,Ws,rl)}}else if(js.visible){var il=Us(Ws,Qs,js,el,Zs.near,Zs.far,Js);va.renderBufferDirect(Zs,null,Qs,il,Ws,null)}}for(var ll=Ws.children,cl=0,al=ll.length;cl<al;cl++)zs(ll[cl],qs,Zs,el,Js)}}}function WebGLState(va,_a,_s){var Ss=_s.isWebGL2;function Ms(){var gl=!1,ql=new Vector4,Xl=null,uu=new Vector4(0,0,0,0);return{setMask:function(Zl){Xl!==Zl&&!gl&&(va.colorMask(Zl,Zl,Zl,Zl),Xl=Zl)},setLocked:function(Zl){gl=Zl},setClear:function(Zl,hu,vu,mu,bu){bu===!0&&(Zl*=mu,hu*=mu,vu*=mu),ql.set(Zl,hu,vu,mu),uu.equals(ql)===!1&&(va.clearColor(Zl,hu,vu,mu),uu.copy(ql))},reset:function(){gl=!1,Xl=null,uu.set(-1,0,0,0)}}}function Cs(){var gl=!1,ql=null,Xl=null,uu=null;return{setTest:function(Zl){Zl?Cl(2929):Sl(2929)},setMask:function(Zl){ql!==Zl&&!gl&&(va.depthMask(Zl),ql=Zl)},setFunc:function(Zl){if(Xl!==Zl){if(Zl)switch(Zl){case NeverDepth:va.depthFunc(512);break;case AlwaysDepth:va.depthFunc(519);break;case LessDepth:va.depthFunc(513);break;case LessEqualDepth:va.depthFunc(515);break;case EqualDepth:va.depthFunc(514);break;case GreaterEqualDepth:va.depthFunc(518);break;case GreaterDepth:va.depthFunc(516);break;case NotEqualDepth:va.depthFunc(517);break;default:va.depthFunc(515)}else va.depthFunc(515);Xl=Zl}},setLocked:function(Zl){gl=Zl},setClear:function(Zl){uu!==Zl&&(va.clearDepth(Zl),uu=Zl)},reset:function(){gl=!1,ql=null,Xl=null,uu=null}}}function Ts(){var gl=!1,ql=null,Xl=null,uu=null,Zl=null,hu=null,vu=null,mu=null,bu=null;return{setTest:function(du){gl||(du?Cl(2960):Sl(2960))},setMask:function(du){ql!==du&&!gl&&(va.stencilMask(du),ql=du)},setFunc:function(du,_u,wu){(Xl!==du||uu!==_u||Zl!==wu)&&(va.stencilFunc(du,_u,wu),Xl=du,uu=_u,Zl=wu)},setOp:function(du,_u,wu){(hu!==du||vu!==_u||mu!==wu)&&(va.stencilOp(du,_u,wu),hu=du,vu=_u,mu=wu)},setLocked:function(du){gl=du},setClear:function(du){bu!==du&&(va.clearStencil(du),bu=du)},reset:function(){gl=!1,ql=null,Xl=null,uu=null,Zl=null,hu=null,vu=null,mu=null,bu=null}}}var Bs=new Ms,Ps=new Cs,Ls=new Ts,Rs=va.getParameter(34921),$s=new Uint8Array(Rs),Fs=new Uint8Array(Rs),Os=new Uint8Array(Rs),Gs={},Ns=null,Vs=null,Ds=null,ks=null,Us=null,zs=null,Ws=null,qs=null,Zs=null,el=!1,Js=null,Hs=null,Qs=null,js=null,Ks=null,Xs=va.getParameter(35661),Ys=!1,rl=0,tl=va.getParameter(7938);tl.indexOf("WebGL")!==-1?(rl=parseFloat(/^WebGL\ ([0-9])/.exec(tl)[1]),Ys=rl>=1):tl.indexOf("OpenGL ES")!==-1&&(rl=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(tl)[1]),Ys=rl>=2);var il=null,ll={},cl=new Vector4,al=new Vector4;function dl(gl,ql,Xl){var uu=new Uint8Array(4),Zl=va.createTexture();va.bindTexture(gl,Zl),va.texParameteri(gl,10241,9728),va.texParameteri(gl,10240,9728);for(var hu=0;hu<Xl;hu++)va.texImage2D(ql+hu,0,6408,1,1,0,6408,5121,uu);return Zl}var yl={};yl[3553]=dl(3553,3553,1),yl[34067]=dl(34067,34069,6),Bs.setClear(0,0,0,1),Ps.setClear(1),Ls.setClear(0),Cl(2929),Ps.setFunc(LessEqualDepth),ul(!1),pl(CullFaceBack),Cl(2884),Vl(NoBlending);function xl(){for(var gl=0,ql=$s.length;gl<ql;gl++)$s[gl]=0}function wl(gl){Al(gl,0)}function Al(gl,ql){if($s[gl]=1,Fs[gl]===0&&(va.enableVertexAttribArray(gl),Fs[gl]=1),Os[gl]!==ql){var Xl=Ss?va:_a.get("ANGLE_instanced_arrays");Xl[Ss?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](gl,ql),Os[gl]=ql}}function bl(){for(var gl=0,ql=Fs.length;gl!==ql;++gl)Fs[gl]!==$s[gl]&&(va.disableVertexAttribArray(gl),Fs[gl]=0)}function Bl(gl,ql,Xl,uu,Zl,hu){Ss===!0&&(Xl===5124||Xl===5125)?va.vertexAttribIPointer(gl,ql,Xl,uu,Zl,hu):va.vertexAttribPointer(gl,ql,Xl,uu,Zl,hu)}function Cl(gl){Gs[gl]!==!0&&(va.enable(gl),Gs[gl]=!0)}function Sl(gl){Gs[gl]!==!1&&(va.disable(gl),Gs[gl]=!1)}function El(gl){return Ns!==gl?(va.useProgram(gl),Ns=gl,!0):!1}var Rl={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(Ss)Rl[MinEquation]=32775,Rl[MaxEquation]=32776;else{var Fl=_a.get("EXT_blend_minmax");Fl!==null&&(Rl[MinEquation]=Fl.MIN_EXT,Rl[MaxEquation]=Fl.MAX_EXT)}var jl={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function Vl(gl,ql,Xl,uu,Zl,hu,vu,mu){if(gl===NoBlending){Vs&&(Sl(3042),Vs=!1);return}if(Vs||(Cl(3042),Vs=!0),gl!==CustomBlending){if(gl!==Ds||mu!==el){if((ks!==AddEquation||Ws!==AddEquation)&&(va.blendEquation(32774),ks=AddEquation,Ws=AddEquation),mu)switch(gl){case NormalBlending:va.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:va.blendFunc(1,1);break;case SubtractiveBlending:va.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:va.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",gl);break}else switch(gl){case NormalBlending:va.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:va.blendFunc(770,1);break;case SubtractiveBlending:va.blendFunc(0,769);break;case MultiplyBlending:va.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",gl);break}Us=null,zs=null,qs=null,Zs=null,Ds=gl,el=mu}return}Zl=Zl||ql,hu=hu||Xl,vu=vu||uu,(ql!==ks||Zl!==Ws)&&(va.blendEquationSeparate(Rl[ql],Rl[Zl]),ks=ql,Ws=Zl),(Xl!==Us||uu!==zs||hu!==qs||vu!==Zs)&&(va.blendFuncSeparate(jl[Xl],jl[uu],jl[hu],jl[vu]),Us=Xl,zs=uu,qs=hu,Zs=vu),Ds=gl,el=null}function Wl(gl,ql){gl.side===DoubleSide?Sl(2884):Cl(2884);var Xl=gl.side===BackSide;ql&&(Xl=!Xl),ul(Xl),gl.blending===NormalBlending&&gl.transparent===!1?Vl(NoBlending):Vl(gl.blending,gl.blendEquation,gl.blendSrc,gl.blendDst,gl.blendEquationAlpha,gl.blendSrcAlpha,gl.blendDstAlpha,gl.premultipliedAlpha),Ps.setFunc(gl.depthFunc),Ps.setTest(gl.depthTest),Ps.setMask(gl.depthWrite),Bs.setMask(gl.colorWrite);var uu=gl.stencilWrite;Ls.setTest(uu),uu&&(Ls.setMask(gl.stencilWriteMask),Ls.setFunc(gl.stencilFunc,gl.stencilRef,gl.stencilFuncMask),Ls.setOp(gl.stencilFail,gl.stencilZFail,gl.stencilZPass)),$l(gl.polygonOffset,gl.polygonOffsetFactor,gl.polygonOffsetUnits)}function ul(gl){Js!==gl&&(gl?va.frontFace(2304):va.frontFace(2305),Js=gl)}function pl(gl){gl!==CullFaceNone?(Cl(2884),gl!==Hs&&(gl===CullFaceBack?va.cullFace(1029):gl===CullFaceFront?va.cullFace(1028):va.cullFace(1032))):Sl(2884),Hs=gl}function kl(gl){gl!==Qs&&(Ys&&va.lineWidth(gl),Qs=gl)}function $l(gl,ql,Xl){gl?(Cl(32823),(js!==ql||Ks!==Xl)&&(va.polygonOffset(ql,Xl),js=ql,Ks=Xl)):Sl(32823)}function Ql(gl){gl?Cl(3089):Sl(3089)}function zl(gl){gl===void 0&&(gl=33984+Xs-1),il!==gl&&(va.activeTexture(gl),il=gl)}function Nl(gl,ql){il===null&&zl();var Xl=ll[il];Xl===void 0&&(Xl={type:void 0,texture:void 0},ll[il]=Xl),(Xl.type!==gl||Xl.texture!==ql)&&(va.bindTexture(gl,ql||yl[gl]),Xl.type=gl,Xl.texture=ql)}function su(){var gl=ll[il];gl!==void 0&&gl.type!==void 0&&(va.bindTexture(gl.type,null),gl.type=void 0,gl.texture=void 0)}function ru(){try{va.compressedTexImage2D.apply(va,arguments)}catch(gl){console.error("THREE.WebGLState:",gl)}}function nu(){try{va.texImage2D.apply(va,arguments)}catch(gl){console.error("THREE.WebGLState:",gl)}}function Ul(){try{va.texImage3D.apply(va,arguments)}catch(gl){console.error("THREE.WebGLState:",gl)}}function Yl(gl){cl.equals(gl)===!1&&(va.scissor(gl.x,gl.y,gl.z,gl.w),cl.copy(gl))}function Hl(gl){al.equals(gl)===!1&&(va.viewport(gl.x,gl.y,gl.z,gl.w),al.copy(gl))}function Dl(){for(var gl=0;gl<Fs.length;gl++)Fs[gl]===1&&(va.disableVertexAttribArray(gl),Fs[gl]=0);Gs={},il=null,ll={},Ns=null,Ds=null,Js=null,Hs=null,Bs.reset(),Ps.reset(),Ls.reset()}return{buffers:{color:Bs,depth:Ps,stencil:Ls},initAttributes:xl,enableAttribute:wl,enableAttributeAndDivisor:Al,disableUnusedAttributes:bl,vertexAttribPointer:Bl,enable:Cl,disable:Sl,useProgram:El,setBlending:Vl,setMaterial:Wl,setFlipSided:ul,setCullFace:pl,setLineWidth:kl,setPolygonOffset:$l,setScissorTest:Ql,activeTexture:zl,bindTexture:Nl,unbindTexture:su,compressedTexImage2D:ru,texImage2D:nu,texImage3D:Ul,scissor:Yl,viewport:Hl,reset:Dl}}function WebGLTextures(va,_a,_s,Ss,Ms,Cs,Ts){var Bs=Ms.isWebGL2,Ps=Ms.maxTextures,Ls=Ms.maxCubemapSize,Rs=Ms.maxTextureSize,$s=Ms.maxSamples,Fs=new WeakMap,Os,Gs=!1;try{Gs=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Ns(ul,pl){return Gs?new OffscreenCanvas(ul,pl):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function Vs(ul,pl,kl,$l){var Ql=1;if((ul.width>$l||ul.height>$l)&&(Ql=$l/Math.max(ul.width,ul.height)),Ql<1||pl===!0)if(typeof HTMLImageElement<"u"&&ul instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ul instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ul instanceof ImageBitmap){var zl=pl?MathUtils.floorPowerOfTwo:Math.floor,Nl=zl(Ql*ul.width),su=zl(Ql*ul.height);Os===void 0&&(Os=Ns(Nl,su));var ru=kl?Ns(Nl,su):Os;ru.width=Nl,ru.height=su;var nu=ru.getContext("2d");return nu.drawImage(ul,0,0,Nl,su),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ul.width+"x"+ul.height+") to ("+Nl+"x"+su+")."),ru}else return"data"in ul&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ul.width+"x"+ul.height+")."),ul;return ul}function Ds(ul){return MathUtils.isPowerOfTwo(ul.width)&&MathUtils.isPowerOfTwo(ul.height)}function ks(ul){return Bs?!1:ul.wrapS!==ClampToEdgeWrapping||ul.wrapT!==ClampToEdgeWrapping||ul.minFilter!==NearestFilter&&ul.minFilter!==LinearFilter}function Us(ul,pl){return ul.generateMipmaps&&pl&&ul.minFilter!==NearestFilter&&ul.minFilter!==LinearFilter}function zs(ul,pl,kl,$l){va.generateMipmap(ul);var Ql=Ss.get(pl);Ql.__maxMipLevel=Math.log(Math.max(kl,$l))*Math.LOG2E}function Ws(ul,pl,kl){if(Bs===!1)return pl;if(ul!==null){if(va[ul]!==void 0)return va[ul];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ul+"'")}var $l=pl;return pl===6403&&(kl===5126&&($l=33326),kl===5131&&($l=33325),kl===5121&&($l=33321)),pl===6407&&(kl===5126&&($l=34837),kl===5131&&($l=34843),kl===5121&&($l=32849)),pl===6408&&(kl===5126&&($l=34836),kl===5131&&($l=34842),kl===5121&&($l=32856)),($l===33325||$l===33326||$l===34842||$l===34836)&&_a.get("EXT_color_buffer_float"),$l}function qs(ul){return ul===NearestFilter||ul===NearestMipmapNearestFilter||ul===NearestMipmapLinearFilter?9728:9729}function Zs(ul){var pl=ul.target;pl.removeEventListener("dispose",Zs),Js(pl),pl.isVideoTexture&&Fs.delete(pl),Ts.memory.textures--}function el(ul){var pl=ul.target;pl.removeEventListener("dispose",el),Hs(pl),Ts.memory.textures--}function Js(ul){var pl=Ss.get(ul);pl.__webglInit!==void 0&&(va.deleteTexture(pl.__webglTexture),Ss.remove(ul))}function Hs(ul){var pl=Ss.get(ul),kl=Ss.get(ul.texture);if(!!ul){if(kl.__webglTexture!==void 0&&va.deleteTexture(kl.__webglTexture),ul.depthTexture&&ul.depthTexture.dispose(),ul.isWebGLCubeRenderTarget)for(var $l=0;$l<6;$l++)va.deleteFramebuffer(pl.__webglFramebuffer[$l]),pl.__webglDepthbuffer&&va.deleteRenderbuffer(pl.__webglDepthbuffer[$l]);else va.deleteFramebuffer(pl.__webglFramebuffer),pl.__webglDepthbuffer&&va.deleteRenderbuffer(pl.__webglDepthbuffer),pl.__webglMultisampledFramebuffer&&va.deleteFramebuffer(pl.__webglMultisampledFramebuffer),pl.__webglColorRenderbuffer&&va.deleteRenderbuffer(pl.__webglColorRenderbuffer),pl.__webglDepthRenderbuffer&&va.deleteRenderbuffer(pl.__webglDepthRenderbuffer);Ss.remove(ul.texture),Ss.remove(ul)}}var Qs=0;function js(){Qs=0}function Ks(){var ul=Qs;return ul>=Ps&&console.warn("THREE.WebGLTextures: Trying to use "+ul+" texture units while this GPU supports only "+Ps),Qs+=1,ul}function Xs(ul,pl){var kl=Ss.get(ul);if(ul.isVideoTexture&&Rl(ul),ul.version>0&&kl.__version!==ul.version){var $l=ul.image;if($l===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if($l.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{yl(kl,ul,pl);return}}_s.activeTexture(33984+pl),_s.bindTexture(3553,kl.__webglTexture)}function Ys(ul,pl){var kl=Ss.get(ul);if(ul.version>0&&kl.__version!==ul.version){yl(kl,ul,pl);return}_s.activeTexture(33984+pl),_s.bindTexture(35866,kl.__webglTexture)}function rl(ul,pl){var kl=Ss.get(ul);if(ul.version>0&&kl.__version!==ul.version){yl(kl,ul,pl);return}_s.activeTexture(33984+pl),_s.bindTexture(32879,kl.__webglTexture)}function tl(ul,pl){if(ul.image.length===6){var kl=Ss.get(ul);if(ul.version>0&&kl.__version!==ul.version){dl(kl,ul),_s.activeTexture(33984+pl),_s.bindTexture(34067,kl.__webglTexture),va.pixelStorei(37440,ul.flipY);for(var $l=ul&&(ul.isCompressedTexture||ul.image[0].isCompressedTexture),Ql=ul.image[0]&&ul.image[0].isDataTexture,zl=[],Nl=0;Nl<6;Nl++)!$l&&!Ql?zl[Nl]=Vs(ul.image[Nl],!1,!0,Ls):zl[Nl]=Ql?ul.image[Nl].image:ul.image[Nl];var su=zl[0],ru=Ds(su)||Bs,nu=Cs.convert(ul.format),Ul=Cs.convert(ul.type),Yl=Ws(ul.internalFormat,nu,Ul);al(34067,ul,ru);var Hl;if($l){for(var Nl=0;Nl<6;Nl++){Hl=zl[Nl].mipmaps;for(var Dl=0;Dl<Hl.length;Dl++){var gl=Hl[Dl];ul.format!==RGBAFormat&&ul.format!==RGBFormat?nu!==null?_s.compressedTexImage2D(34069+Nl,Dl,Yl,gl.width,gl.height,0,gl.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_s.texImage2D(34069+Nl,Dl,Yl,gl.width,gl.height,0,nu,Ul,gl.data)}}kl.__maxMipLevel=Hl.length-1}else{Hl=ul.mipmaps;for(var Nl=0;Nl<6;Nl++)if(Ql){_s.texImage2D(34069+Nl,0,Yl,zl[Nl].width,zl[Nl].height,0,nu,Ul,zl[Nl].data);for(var Dl=0;Dl<Hl.length;Dl++){var gl=Hl[Dl],ql=gl.image[Nl].image;_s.texImage2D(34069+Nl,Dl+1,Yl,ql.width,ql.height,0,nu,Ul,ql.data)}}else{_s.texImage2D(34069+Nl,0,Yl,nu,Ul,zl[Nl]);for(var Dl=0;Dl<Hl.length;Dl++){var gl=Hl[Dl];_s.texImage2D(34069+Nl,Dl+1,Yl,nu,Ul,gl.image[Nl])}}kl.__maxMipLevel=Hl.length}Us(ul,ru)&&zs(34067,ul,su.width,su.height),kl.__version=ul.version,ul.onUpdate&&ul.onUpdate(ul)}else _s.activeTexture(33984+pl),_s.bindTexture(34067,kl.__webglTexture)}}function il(ul,pl){_s.activeTexture(33984+pl),_s.bindTexture(34067,Ss.get(ul).__webglTexture)}var ll={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},cl={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function al(ul,pl,kl){kl?(va.texParameteri(ul,10242,ll[pl.wrapS]),va.texParameteri(ul,10243,ll[pl.wrapT]),(ul===32879||ul===35866)&&va.texParameteri(ul,32882,ll[pl.wrapR]),va.texParameteri(ul,10240,cl[pl.magFilter]),va.texParameteri(ul,10241,cl[pl.minFilter])):(va.texParameteri(ul,10242,33071),va.texParameteri(ul,10243,33071),(ul===32879||ul===35866)&&va.texParameteri(ul,32882,33071),(pl.wrapS!==ClampToEdgeWrapping||pl.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),va.texParameteri(ul,10240,qs(pl.magFilter)),va.texParameteri(ul,10241,qs(pl.minFilter)),pl.minFilter!==NearestFilter&&pl.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var $l=_a.get("EXT_texture_filter_anisotropic");if($l){if(pl.type===FloatType&&_a.get("OES_texture_float_linear")===null||pl.type===HalfFloatType&&(Bs||_a.get("OES_texture_half_float_linear"))===null)return;(pl.anisotropy>1||Ss.get(pl).__currentAnisotropy)&&(va.texParameterf(ul,$l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(pl.anisotropy,Ms.getMaxAnisotropy())),Ss.get(pl).__currentAnisotropy=pl.anisotropy)}}function dl(ul,pl){ul.__webglInit===void 0&&(ul.__webglInit=!0,pl.addEventListener("dispose",Zs),ul.__webglTexture=va.createTexture(),Ts.memory.textures++)}function yl(ul,pl,kl){var $l=3553;pl.isDataTexture2DArray&&($l=35866),pl.isDataTexture3D&&($l=32879),dl(ul,pl),_s.activeTexture(33984+kl),_s.bindTexture($l,ul.__webglTexture),va.pixelStorei(37440,pl.flipY),va.pixelStorei(37441,pl.premultiplyAlpha),va.pixelStorei(3317,pl.unpackAlignment);var Ql=ks(pl)&&Ds(pl.image)===!1,zl=Vs(pl.image,Ql,!1,Rs),Nl=Ds(zl)||Bs,su=Cs.convert(pl.format),ru=Cs.convert(pl.type),nu=Ws(pl.internalFormat,su,ru);al($l,pl,Nl);var Ul,Yl=pl.mipmaps;if(pl.isDepthTexture)nu=6402,Bs?pl.type===FloatType?nu=36012:pl.type===UnsignedIntType?nu=33190:pl.type===UnsignedInt248Type?nu=35056:nu=33189:pl.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),pl.format===DepthFormat&&nu===6402&&pl.type!==UnsignedShortType&&pl.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),pl.type=UnsignedShortType,ru=Cs.convert(pl.type)),pl.format===DepthStencilFormat&&nu===6402&&(nu=34041,pl.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),pl.type=UnsignedInt248Type,ru=Cs.convert(pl.type))),_s.texImage2D(3553,0,nu,zl.width,zl.height,0,su,ru,null);else if(pl.isDataTexture)if(Yl.length>0&&Nl){for(var Hl=0,Dl=Yl.length;Hl<Dl;Hl++)Ul=Yl[Hl],_s.texImage2D(3553,Hl,nu,Ul.width,Ul.height,0,su,ru,Ul.data);pl.generateMipmaps=!1,ul.__maxMipLevel=Yl.length-1}else _s.texImage2D(3553,0,nu,zl.width,zl.height,0,su,ru,zl.data),ul.__maxMipLevel=0;else if(pl.isCompressedTexture){for(var Hl=0,Dl=Yl.length;Hl<Dl;Hl++)Ul=Yl[Hl],pl.format!==RGBAFormat&&pl.format!==RGBFormat?su!==null?_s.compressedTexImage2D(3553,Hl,nu,Ul.width,Ul.height,0,Ul.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_s.texImage2D(3553,Hl,nu,Ul.width,Ul.height,0,su,ru,Ul.data);ul.__maxMipLevel=Yl.length-1}else if(pl.isDataTexture2DArray)_s.texImage3D(35866,0,nu,zl.width,zl.height,zl.depth,0,su,ru,zl.data),ul.__maxMipLevel=0;else if(pl.isDataTexture3D)_s.texImage3D(32879,0,nu,zl.width,zl.height,zl.depth,0,su,ru,zl.data),ul.__maxMipLevel=0;else if(Yl.length>0&&Nl){for(var Hl=0,Dl=Yl.length;Hl<Dl;Hl++)Ul=Yl[Hl],_s.texImage2D(3553,Hl,nu,su,ru,Ul);pl.generateMipmaps=!1,ul.__maxMipLevel=Yl.length-1}else _s.texImage2D(3553,0,nu,su,ru,zl),ul.__maxMipLevel=0;Us(pl,Nl)&&zs($l,pl,zl.width,zl.height),ul.__version=pl.version,pl.onUpdate&&pl.onUpdate(pl)}function xl(ul,pl,kl,$l){var Ql=Cs.convert(pl.texture.format),zl=Cs.convert(pl.texture.type),Nl=Ws(pl.texture.internalFormat,Ql,zl);_s.texImage2D($l,0,Nl,pl.width,pl.height,0,Ql,zl,null),va.bindFramebuffer(36160,ul),va.framebufferTexture2D(36160,kl,$l,Ss.get(pl.texture).__webglTexture,0),va.bindFramebuffer(36160,null)}function wl(ul,pl,kl){if(va.bindRenderbuffer(36161,ul),pl.depthBuffer&&!pl.stencilBuffer){var $l=33189;if(kl){var Ql=pl.depthTexture;Ql&&Ql.isDepthTexture&&(Ql.type===FloatType?$l=36012:Ql.type===UnsignedIntType&&($l=33190));var zl=El(pl);va.renderbufferStorageMultisample(36161,zl,$l,pl.width,pl.height)}else va.renderbufferStorage(36161,$l,pl.width,pl.height);va.framebufferRenderbuffer(36160,36096,36161,ul)}else if(pl.depthBuffer&&pl.stencilBuffer){if(kl){var zl=El(pl);va.renderbufferStorageMultisample(36161,zl,35056,pl.width,pl.height)}else va.renderbufferStorage(36161,34041,pl.width,pl.height);va.framebufferRenderbuffer(36160,33306,36161,ul)}else{var Nl=Cs.convert(pl.texture.format),su=Cs.convert(pl.texture.type),$l=Ws(pl.texture.internalFormat,Nl,su);if(kl){var zl=El(pl);va.renderbufferStorageMultisample(36161,zl,$l,pl.width,pl.height)}else va.renderbufferStorage(36161,$l,pl.width,pl.height)}va.bindRenderbuffer(36161,null)}function Al(ul,pl){var kl=pl&&pl.isWebGLCubeRenderTarget;if(kl)throw new Error("Depth Texture with cube render targets is not supported");if(va.bindFramebuffer(36160,ul),!(pl.depthTexture&&pl.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!Ss.get(pl.depthTexture).__webglTexture||pl.depthTexture.image.width!==pl.width||pl.depthTexture.image.height!==pl.height)&&(pl.depthTexture.image.width=pl.width,pl.depthTexture.image.height=pl.height,pl.depthTexture.needsUpdate=!0),Xs(pl.depthTexture,0);var $l=Ss.get(pl.depthTexture).__webglTexture;if(pl.depthTexture.format===DepthFormat)va.framebufferTexture2D(36160,36096,3553,$l,0);else if(pl.depthTexture.format===DepthStencilFormat)va.framebufferTexture2D(36160,33306,3553,$l,0);else throw new Error("Unknown depthTexture format")}function bl(ul){var pl=Ss.get(ul),kl=ul.isWebGLCubeRenderTarget===!0;if(ul.depthTexture){if(kl)throw new Error("target.depthTexture not supported in Cube render targets");Al(pl.__webglFramebuffer,ul)}else if(kl){pl.__webglDepthbuffer=[];for(var $l=0;$l<6;$l++)va.bindFramebuffer(36160,pl.__webglFramebuffer[$l]),pl.__webglDepthbuffer[$l]=va.createRenderbuffer(),wl(pl.__webglDepthbuffer[$l],ul,!1)}else va.bindFramebuffer(36160,pl.__webglFramebuffer),pl.__webglDepthbuffer=va.createRenderbuffer(),wl(pl.__webglDepthbuffer,ul,!1);va.bindFramebuffer(36160,null)}function Bl(ul){var pl=Ss.get(ul),kl=Ss.get(ul.texture);ul.addEventListener("dispose",el),kl.__webglTexture=va.createTexture(),Ts.memory.textures++;var $l=ul.isWebGLCubeRenderTarget===!0,Ql=ul.isWebGLMultisampleRenderTarget===!0,zl=Ds(ul)||Bs;if(Bs&&ul.texture.format===RGBFormat&&(ul.texture.type===FloatType||ul.texture.type===HalfFloatType)&&(ul.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),$l){pl.__webglFramebuffer=[];for(var Nl=0;Nl<6;Nl++)pl.__webglFramebuffer[Nl]=va.createFramebuffer()}else if(pl.__webglFramebuffer=va.createFramebuffer(),Ql)if(Bs){pl.__webglMultisampledFramebuffer=va.createFramebuffer(),pl.__webglColorRenderbuffer=va.createRenderbuffer(),va.bindRenderbuffer(36161,pl.__webglColorRenderbuffer);var su=Cs.convert(ul.texture.format),ru=Cs.convert(ul.texture.type),nu=Ws(ul.texture.internalFormat,su,ru),Ul=El(ul);va.renderbufferStorageMultisample(36161,Ul,nu,ul.width,ul.height),va.bindFramebuffer(36160,pl.__webglMultisampledFramebuffer),va.framebufferRenderbuffer(36160,36064,36161,pl.__webglColorRenderbuffer),va.bindRenderbuffer(36161,null),ul.depthBuffer&&(pl.__webglDepthRenderbuffer=va.createRenderbuffer(),wl(pl.__webglDepthRenderbuffer,ul,!0)),va.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if($l){_s.bindTexture(34067,kl.__webglTexture),al(34067,ul.texture,zl);for(var Nl=0;Nl<6;Nl++)xl(pl.__webglFramebuffer[Nl],ul,36064,34069+Nl);Us(ul.texture,zl)&&zs(34067,ul.texture,ul.width,ul.height),_s.bindTexture(34067,null)}else _s.bindTexture(3553,kl.__webglTexture),al(3553,ul.texture,zl),xl(pl.__webglFramebuffer,ul,36064,3553),Us(ul.texture,zl)&&zs(3553,ul.texture,ul.width,ul.height),_s.bindTexture(3553,null);ul.depthBuffer&&bl(ul)}function Cl(ul){var pl=ul.texture,kl=Ds(ul)||Bs;if(Us(pl,kl)){var $l=ul.isWebGLCubeRenderTarget?34067:3553,Ql=Ss.get(pl).__webglTexture;_s.bindTexture($l,Ql),zs($l,pl,ul.width,ul.height),_s.bindTexture($l,null)}}function Sl(ul){if(ul.isWebGLMultisampleRenderTarget)if(Bs){var pl=Ss.get(ul);va.bindFramebuffer(36008,pl.__webglMultisampledFramebuffer),va.bindFramebuffer(36009,pl.__webglFramebuffer);var kl=ul.width,$l=ul.height,Ql=16384;ul.depthBuffer&&(Ql|=256),ul.stencilBuffer&&(Ql|=1024),va.blitFramebuffer(0,0,kl,$l,0,0,kl,$l,Ql,9728),va.bindFramebuffer(36160,pl.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function El(ul){return Bs&&ul.isWebGLMultisampleRenderTarget?Math.min($s,ul.samples):0}function Rl(ul){var pl=Ts.render.frame;Fs.get(ul)!==pl&&(Fs.set(ul,pl),ul.update())}var Fl=!1,jl=!1;function Vl(ul,pl){ul&&ul.isWebGLRenderTarget&&(Fl===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Fl=!0),ul=ul.texture),Xs(ul,pl)}function Wl(ul,pl){ul&&ul.isWebGLCubeRenderTarget&&(jl===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),jl=!0),ul=ul.texture),ul&&ul.isCubeTexture||Array.isArray(ul.image)&&ul.image.length===6?tl(ul,pl):il(ul,pl)}this.allocateTextureUnit=Ks,this.resetTextureUnits=js,this.setTexture2D=Xs,this.setTexture2DArray=Ys,this.setTexture3D=rl,this.setTextureCube=tl,this.setTextureCubeDynamic=il,this.setupRenderTarget=Bl,this.updateRenderTargetMipmap=Cl,this.updateMultisampleRenderTarget=Sl,this.safeSetTexture2D=Vl,this.safeSetTextureCube=Wl}function WebGLUtils(va,_a,_s){var Ss=_s.isWebGL2;function Ms(Cs){var Ts;if(Cs===UnsignedByteType)return 5121;if(Cs===UnsignedShort4444Type)return 32819;if(Cs===UnsignedShort5551Type)return 32820;if(Cs===UnsignedShort565Type)return 33635;if(Cs===ByteType)return 5120;if(Cs===ShortType)return 5122;if(Cs===UnsignedShortType)return 5123;if(Cs===IntType)return 5124;if(Cs===UnsignedIntType)return 5125;if(Cs===FloatType)return 5126;if(Cs===HalfFloatType)return Ss?5131:(Ts=_a.get("OES_texture_half_float"),Ts!==null?Ts.HALF_FLOAT_OES:null);if(Cs===AlphaFormat)return 6406;if(Cs===RGBFormat)return 6407;if(Cs===RGBAFormat)return 6408;if(Cs===LuminanceFormat)return 6409;if(Cs===LuminanceAlphaFormat)return 6410;if(Cs===DepthFormat)return 6402;if(Cs===DepthStencilFormat)return 34041;if(Cs===RedFormat)return 6403;if(Cs===RedIntegerFormat)return 36244;if(Cs===RGFormat)return 33319;if(Cs===RGIntegerFormat)return 33320;if(Cs===RGBIntegerFormat)return 36248;if(Cs===RGBAIntegerFormat)return 36249;if(Cs===RGB_S3TC_DXT1_Format||Cs===RGBA_S3TC_DXT1_Format||Cs===RGBA_S3TC_DXT3_Format||Cs===RGBA_S3TC_DXT5_Format)if(Ts=_a.get("WEBGL_compressed_texture_s3tc"),Ts!==null){if(Cs===RGB_S3TC_DXT1_Format)return Ts.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Cs===RGBA_S3TC_DXT1_Format)return Ts.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Cs===RGBA_S3TC_DXT3_Format)return Ts.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Cs===RGBA_S3TC_DXT5_Format)return Ts.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Cs===RGB_PVRTC_4BPPV1_Format||Cs===RGB_PVRTC_2BPPV1_Format||Cs===RGBA_PVRTC_4BPPV1_Format||Cs===RGBA_PVRTC_2BPPV1_Format)if(Ts=_a.get("WEBGL_compressed_texture_pvrtc"),Ts!==null){if(Cs===RGB_PVRTC_4BPPV1_Format)return Ts.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Cs===RGB_PVRTC_2BPPV1_Format)return Ts.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Cs===RGBA_PVRTC_4BPPV1_Format)return Ts.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Cs===RGBA_PVRTC_2BPPV1_Format)return Ts.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Cs===RGB_ETC1_Format)return Ts=_a.get("WEBGL_compressed_texture_etc1"),Ts!==null?Ts.COMPRESSED_RGB_ETC1_WEBGL:null;if((Cs===RGB_ETC2_Format||Cs===RGBA_ETC2_EAC_Format)&&(Ts=_a.get("WEBGL_compressed_texture_etc"),Ts!==null)){if(Cs===RGB_ETC2_Format)return Ts.COMPRESSED_RGB8_ETC2;if(Cs===RGBA_ETC2_EAC_Format)return Ts.COMPRESSED_RGBA8_ETC2_EAC}if(Cs===RGBA_ASTC_4x4_Format||Cs===RGBA_ASTC_5x4_Format||Cs===RGBA_ASTC_5x5_Format||Cs===RGBA_ASTC_6x5_Format||Cs===RGBA_ASTC_6x6_Format||Cs===RGBA_ASTC_8x5_Format||Cs===RGBA_ASTC_8x6_Format||Cs===RGBA_ASTC_8x8_Format||Cs===RGBA_ASTC_10x5_Format||Cs===RGBA_ASTC_10x6_Format||Cs===RGBA_ASTC_10x8_Format||Cs===RGBA_ASTC_10x10_Format||Cs===RGBA_ASTC_12x10_Format||Cs===RGBA_ASTC_12x12_Format||Cs===SRGB8_ALPHA8_ASTC_4x4_Format||Cs===SRGB8_ALPHA8_ASTC_5x4_Format||Cs===SRGB8_ALPHA8_ASTC_5x5_Format||Cs===SRGB8_ALPHA8_ASTC_6x5_Format||Cs===SRGB8_ALPHA8_ASTC_6x6_Format||Cs===SRGB8_ALPHA8_ASTC_8x5_Format||Cs===SRGB8_ALPHA8_ASTC_8x6_Format||Cs===SRGB8_ALPHA8_ASTC_8x8_Format||Cs===SRGB8_ALPHA8_ASTC_10x5_Format||Cs===SRGB8_ALPHA8_ASTC_10x6_Format||Cs===SRGB8_ALPHA8_ASTC_10x8_Format||Cs===SRGB8_ALPHA8_ASTC_10x10_Format||Cs===SRGB8_ALPHA8_ASTC_12x10_Format||Cs===SRGB8_ALPHA8_ASTC_12x12_Format)return Ts=_a.get("WEBGL_compressed_texture_astc"),Ts!==null?Cs:null;if(Cs===RGBA_BPTC_Format)return Ts=_a.get("EXT_texture_compression_bptc"),Ts!==null?Cs:null;if(Cs===UnsignedInt248Type)return Ss?34042:(Ts=_a.get("WEBGL_depth_texture"),Ts!==null?Ts.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:Ms}}function ArrayCamera(va){PerspectiveCamera.call(this),this.cameras=va||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group$1(){Object3D.call(this),this.type="Group"}Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(va){return this._targetRay!==null&&this._targetRay.dispatchEvent(va),this._grip!==null&&this._grip.dispatchEvent(va),this},disconnect:function(va){return this.dispatchEvent({type:"disconnected",data:va}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(va,_a,_s){var Ss=null,Ms=null,Cs=this._targetRay,Ts=this._grip;return va&&(Cs!==null&&(Ss=_a.getPose(va.targetRaySpace,_s),Ss!==null&&(Cs.matrix.fromArray(Ss.transform.matrix),Cs.matrix.decompose(Cs.position,Cs.rotation,Cs.scale))),Ts!==null&&va.gripSpace&&(Ms=_a.getPose(va.gripSpace,_s),Ms!==null&&(Ts.matrix.fromArray(Ms.transform.matrix),Ts.matrix.decompose(Ts.position,Ts.rotation,Ts.scale)))),Cs!==null&&(Cs.visible=Ss!==null),Ts!==null&&(Ts.visible=Ms!==null),this}});function WebXRManager(va,_a){var _s=this,Ss=null,Ms=1,Cs=null,Ts="local-floor",Bs=null,Ps=[],Ls=new Map,Rs=new PerspectiveCamera;Rs.layers.enable(1),Rs.viewport=new Vector4;var $s=new PerspectiveCamera;$s.layers.enable(2),$s.viewport=new Vector4;var Fs=[Rs,$s],Os=new ArrayCamera;Os.layers.enable(1),Os.layers.enable(2);var Gs=null,Ns=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(Qs){var js=Ps[Qs];return js===void 0&&(js=new WebXRController,Ps[Qs]=js),js.getTargetRaySpace()},this.getControllerGrip=function(Qs){var js=Ps[Qs];return js===void 0&&(js=new WebXRController,Ps[Qs]=js),js.getGripSpace()};function Vs(Qs){var js=Ls.get(Qs.inputSource);js&&js.dispatchEvent({type:Qs.type})}function Ds(){Ls.forEach(function(Qs,js){Qs.disconnect(js)}),Ls.clear(),va.setFramebuffer(null),va.setRenderTarget(va.getRenderTarget()),Hs.stop(),_s.isPresenting=!1,_s.dispatchEvent({type:"sessionend"})}function ks(Qs){Cs=Qs,Hs.setContext(Ss),Hs.start(),_s.isPresenting=!0,_s.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(Qs){Ms=Qs,_s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Qs){Ts=Qs,_s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Cs},this.getSession=function(){return Ss},this.setSession=function(Qs){if(Ss=Qs,Ss!==null){Ss.addEventListener("select",Vs),Ss.addEventListener("selectstart",Vs),Ss.addEventListener("selectend",Vs),Ss.addEventListener("squeeze",Vs),Ss.addEventListener("squeezestart",Vs),Ss.addEventListener("squeezeend",Vs),Ss.addEventListener("end",Ds);var js=_a.getContextAttributes();js.xrCompatible!==!0&&_a.makeXRCompatible();var Ks={antialias:js.antialias,alpha:js.alpha,depth:js.depth,stencil:js.stencil,framebufferScaleFactor:Ms},Xs=new XRWebGLLayer(Ss,_a,Ks);Ss.updateRenderState({baseLayer:Xs}),Ss.requestReferenceSpace(Ts).then(ks),Ss.addEventListener("inputsourceschange",Us)}};function Us(Qs){for(var js=Ss.inputSources,Ks=0;Ks<Ps.length;Ks++)Ls.set(js[Ks],Ps[Ks]);for(var Ks=0;Ks<Qs.removed.length;Ks++){var Xs=Qs.removed[Ks],Ys=Ls.get(Xs);Ys&&(Ys.dispatchEvent({type:"disconnected",data:Xs}),Ls.delete(Xs))}for(var Ks=0;Ks<Qs.added.length;Ks++){var Xs=Qs.added[Ks],Ys=Ls.get(Xs);Ys&&Ys.dispatchEvent({type:"connected",data:Xs})}}var zs=new Vector3,Ws=new Vector3;function qs(Qs,js,Ks){zs.setFromMatrixPosition(js.matrixWorld),Ws.setFromMatrixPosition(Ks.matrixWorld);var Xs=zs.distanceTo(Ws),Ys=js.projectionMatrix.elements,rl=Ks.projectionMatrix.elements,tl=Ys[14]/(Ys[10]-1),il=Ys[14]/(Ys[10]+1),ll=(Ys[9]+1)/Ys[5],cl=(Ys[9]-1)/Ys[5],al=(Ys[8]-1)/Ys[0],dl=(rl[8]+1)/rl[0],yl=tl*al,xl=tl*dl,wl=Xs/(-al+dl),Al=wl*-al;js.matrixWorld.decompose(Qs.position,Qs.quaternion,Qs.scale),Qs.translateX(Al),Qs.translateZ(wl),Qs.matrixWorld.compose(Qs.position,Qs.quaternion,Qs.scale),Qs.matrixWorldInverse.getInverse(Qs.matrixWorld);var bl=tl+wl,Bl=il+wl,Cl=yl-Al,Sl=xl+(Xs-Al),El=ll*il/Bl*bl,Rl=cl*il/Bl*bl;Qs.projectionMatrix.makePerspective(Cl,Sl,El,Rl,bl,Bl)}function Zs(Qs,js){js===null?Qs.matrixWorld.copy(Qs.matrix):Qs.matrixWorld.multiplyMatrices(js.matrixWorld,Qs.matrix),Qs.matrixWorldInverse.getInverse(Qs.matrixWorld)}this.getCamera=function(Qs){Os.near=$s.near=Rs.near=Qs.near,Os.far=$s.far=Rs.far=Qs.far,(Gs!==Os.near||Ns!==Os.far)&&(Ss.updateRenderState({depthNear:Os.near,depthFar:Os.far}),Gs=Os.near,Ns=Os.far);var js=Qs.parent,Ks=Os.cameras;Zs(Os,js);for(var Xs=0;Xs<Ks.length;Xs++)Zs(Ks[Xs],js);Qs.matrixWorld.copy(Os.matrixWorld);for(var Ys=Qs.children,Xs=0,rl=Ys.length;Xs<rl;Xs++)Ys[Xs].updateMatrixWorld(!0);return Ks.length===2?qs(Os,Rs,$s):Os.projectionMatrix.copy(Rs.projectionMatrix),Os};var el=null;function Js(Qs,js){if(Bs=js.getViewerPose(Cs),Bs!==null){var Ks=Bs.views,Xs=Ss.renderState.baseLayer;va.setFramebuffer(Xs.framebuffer);var Ys=!1;Ks.length!==Os.cameras.length&&(Os.cameras.length=0,Ys=!0);for(var rl=0;rl<Ks.length;rl++){var tl=Ks[rl],il=Xs.getViewport(tl),ll=Fs[rl];ll.matrix.fromArray(tl.transform.matrix),ll.projectionMatrix.fromArray(tl.projectionMatrix),ll.viewport.set(il.x,il.y,il.width,il.height),rl===0&&Os.matrix.copy(ll.matrix),Ys===!0&&Os.cameras.push(ll)}}for(var cl=Ss.inputSources,rl=0;rl<Ps.length;rl++){var al=Ps[rl],dl=cl[rl];al.update(dl,js,Cs)}el&&el(Qs,js)}var Hs=new WebGLAnimation;Hs.setAnimationLoop(Js),this.setAnimationLoop=function(Qs){el=Qs},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(va){function _a(Ds,ks){Ds.fogColor.value.copy(ks.color),ks.isFog?(Ds.fogNear.value=ks.near,Ds.fogFar.value=ks.far):ks.isFogExp2&&(Ds.fogDensity.value=ks.density)}function _s(Ds,ks,Us,zs,Ws){ks.isMeshBasicMaterial?Ss(Ds,ks):ks.isMeshLambertMaterial?(Ss(Ds,ks),Ps(Ds,ks)):ks.isMeshToonMaterial?(Ss(Ds,ks),Rs(Ds,ks)):ks.isMeshPhongMaterial?(Ss(Ds,ks),Ls(Ds,ks)):ks.isMeshStandardMaterial?(Ss(Ds,ks,Us),ks.isMeshPhysicalMaterial?Fs(Ds,ks,Us):$s(Ds,ks,Us)):ks.isMeshMatcapMaterial?(Ss(Ds,ks),Os(Ds,ks)):ks.isMeshDepthMaterial?(Ss(Ds,ks),Gs(Ds,ks)):ks.isMeshDistanceMaterial?(Ss(Ds,ks),Ns(Ds,ks)):ks.isMeshNormalMaterial?(Ss(Ds,ks),Vs(Ds,ks)):ks.isLineBasicMaterial?(Ms(Ds,ks),ks.isLineDashedMaterial&&Cs(Ds,ks)):ks.isPointsMaterial?Ts(Ds,ks,zs,Ws):ks.isSpriteMaterial?Bs(Ds,ks):ks.isShadowMaterial?(Ds.color.value.copy(ks.color),Ds.opacity.value=ks.opacity):ks.isShaderMaterial&&(ks.uniformsNeedUpdate=!1)}function Ss(Ds,ks,Us){Ds.opacity.value=ks.opacity,ks.color&&Ds.diffuse.value.copy(ks.color),ks.emissive&&Ds.emissive.value.copy(ks.emissive).multiplyScalar(ks.emissiveIntensity),ks.map&&(Ds.map.value=ks.map),ks.alphaMap&&(Ds.alphaMap.value=ks.alphaMap),ks.specularMap&&(Ds.specularMap.value=ks.specularMap);var zs=ks.envMap||Us;zs&&(Ds.envMap.value=zs,Ds.flipEnvMap.value=zs.isCubeTexture?-1:1,Ds.reflectivity.value=ks.reflectivity,Ds.refractionRatio.value=ks.refractionRatio,Ds.maxMipLevel.value=va.get(zs).__maxMipLevel),ks.lightMap&&(Ds.lightMap.value=ks.lightMap,Ds.lightMapIntensity.value=ks.lightMapIntensity),ks.aoMap&&(Ds.aoMap.value=ks.aoMap,Ds.aoMapIntensity.value=ks.aoMapIntensity);var Ws;ks.map?Ws=ks.map:ks.specularMap?Ws=ks.specularMap:ks.displacementMap?Ws=ks.displacementMap:ks.normalMap?Ws=ks.normalMap:ks.bumpMap?Ws=ks.bumpMap:ks.roughnessMap?Ws=ks.roughnessMap:ks.metalnessMap?Ws=ks.metalnessMap:ks.alphaMap?Ws=ks.alphaMap:ks.emissiveMap&&(Ws=ks.emissiveMap),Ws!==void 0&&(Ws.isWebGLRenderTarget&&(Ws=Ws.texture),Ws.matrixAutoUpdate===!0&&Ws.updateMatrix(),Ds.uvTransform.value.copy(Ws.matrix));var qs;ks.aoMap?qs=ks.aoMap:ks.lightMap&&(qs=ks.lightMap),qs!==void 0&&(qs.isWebGLRenderTarget&&(qs=qs.texture),qs.matrixAutoUpdate===!0&&qs.updateMatrix(),Ds.uv2Transform.value.copy(qs.matrix))}function Ms(Ds,ks){Ds.diffuse.value.copy(ks.color),Ds.opacity.value=ks.opacity}function Cs(Ds,ks){Ds.dashSize.value=ks.dashSize,Ds.totalSize.value=ks.dashSize+ks.gapSize,Ds.scale.value=ks.scale}function Ts(Ds,ks,Us,zs){Ds.diffuse.value.copy(ks.color),Ds.opacity.value=ks.opacity,Ds.size.value=ks.size*Us,Ds.scale.value=zs*.5,ks.map&&(Ds.map.value=ks.map),ks.alphaMap&&(Ds.alphaMap.value=ks.alphaMap);var Ws;ks.map?Ws=ks.map:ks.alphaMap&&(Ws=ks.alphaMap),Ws!==void 0&&(Ws.matrixAutoUpdate===!0&&Ws.updateMatrix(),Ds.uvTransform.value.copy(Ws.matrix))}function Bs(Ds,ks){Ds.diffuse.value.copy(ks.color),Ds.opacity.value=ks.opacity,Ds.rotation.value=ks.rotation,ks.map&&(Ds.map.value=ks.map),ks.alphaMap&&(Ds.alphaMap.value=ks.alphaMap);var Us;ks.map?Us=ks.map:ks.alphaMap&&(Us=ks.alphaMap),Us!==void 0&&(Us.matrixAutoUpdate===!0&&Us.updateMatrix(),Ds.uvTransform.value.copy(Us.matrix))}function Ps(Ds,ks){ks.emissiveMap&&(Ds.emissiveMap.value=ks.emissiveMap)}function Ls(Ds,ks){Ds.specular.value.copy(ks.specular),Ds.shininess.value=Math.max(ks.shininess,1e-4),ks.emissiveMap&&(Ds.emissiveMap.value=ks.emissiveMap),ks.bumpMap&&(Ds.bumpMap.value=ks.bumpMap,Ds.bumpScale.value=ks.bumpScale,ks.side===BackSide&&(Ds.bumpScale.value*=-1)),ks.normalMap&&(Ds.normalMap.value=ks.normalMap,Ds.normalScale.value.copy(ks.normalScale),ks.side===BackSide&&Ds.normalScale.value.negate()),ks.displacementMap&&(Ds.displacementMap.value=ks.displacementMap,Ds.displacementScale.value=ks.displacementScale,Ds.displacementBias.value=ks.displacementBias)}function Rs(Ds,ks){Ds.specular.value.copy(ks.specular),Ds.shininess.value=Math.max(ks.shininess,1e-4),ks.gradientMap&&(Ds.gradientMap.value=ks.gradientMap),ks.emissiveMap&&(Ds.emissiveMap.value=ks.emissiveMap),ks.bumpMap&&(Ds.bumpMap.value=ks.bumpMap,Ds.bumpScale.value=ks.bumpScale,ks.side===BackSide&&(Ds.bumpScale.value*=-1)),ks.normalMap&&(Ds.normalMap.value=ks.normalMap,Ds.normalScale.value.copy(ks.normalScale),ks.side===BackSide&&Ds.normalScale.value.negate()),ks.displacementMap&&(Ds.displacementMap.value=ks.displacementMap,Ds.displacementScale.value=ks.displacementScale,Ds.displacementBias.value=ks.displacementBias)}function $s(Ds,ks,Us){Ds.roughness.value=ks.roughness,Ds.metalness.value=ks.metalness,ks.roughnessMap&&(Ds.roughnessMap.value=ks.roughnessMap),ks.metalnessMap&&(Ds.metalnessMap.value=ks.metalnessMap),ks.emissiveMap&&(Ds.emissiveMap.value=ks.emissiveMap),ks.bumpMap&&(Ds.bumpMap.value=ks.bumpMap,Ds.bumpScale.value=ks.bumpScale,ks.side===BackSide&&(Ds.bumpScale.value*=-1)),ks.normalMap&&(Ds.normalMap.value=ks.normalMap,Ds.normalScale.value.copy(ks.normalScale),ks.side===BackSide&&Ds.normalScale.value.negate()),ks.displacementMap&&(Ds.displacementMap.value=ks.displacementMap,Ds.displacementScale.value=ks.displacementScale,Ds.displacementBias.value=ks.displacementBias),(ks.envMap||Us)&&(Ds.envMapIntensity.value=ks.envMapIntensity)}function Fs(Ds,ks,Us){$s(Ds,ks,Us),Ds.reflectivity.value=ks.reflectivity,Ds.clearcoat.value=ks.clearcoat,Ds.clearcoatRoughness.value=ks.clearcoatRoughness,ks.sheen&&Ds.sheen.value.copy(ks.sheen),ks.clearcoatMap&&(Ds.clearcoatMap.value=ks.clearcoatMap),ks.clearcoatRoughnessMap&&(Ds.clearcoatRoughnessMap.value=ks.clearcoatRoughnessMap),ks.clearcoatNormalMap&&(Ds.clearcoatNormalScale.value.copy(ks.clearcoatNormalScale),Ds.clearcoatNormalMap.value=ks.clearcoatNormalMap,ks.side===BackSide&&Ds.clearcoatNormalScale.value.negate()),Ds.transparency.value=ks.transparency}function Os(Ds,ks){ks.matcap&&(Ds.matcap.value=ks.matcap),ks.bumpMap&&(Ds.bumpMap.value=ks.bumpMap,Ds.bumpScale.value=ks.bumpScale,ks.side===BackSide&&(Ds.bumpScale.value*=-1)),ks.normalMap&&(Ds.normalMap.value=ks.normalMap,Ds.normalScale.value.copy(ks.normalScale),ks.side===BackSide&&Ds.normalScale.value.negate()),ks.displacementMap&&(Ds.displacementMap.value=ks.displacementMap,Ds.displacementScale.value=ks.displacementScale,Ds.displacementBias.value=ks.displacementBias)}function Gs(Ds,ks){ks.displacementMap&&(Ds.displacementMap.value=ks.displacementMap,Ds.displacementScale.value=ks.displacementScale,Ds.displacementBias.value=ks.displacementBias)}function Ns(Ds,ks){ks.displacementMap&&(Ds.displacementMap.value=ks.displacementMap,Ds.displacementScale.value=ks.displacementScale,Ds.displacementBias.value=ks.displacementBias),Ds.referencePosition.value.copy(ks.referencePosition),Ds.nearDistance.value=ks.nearDistance,Ds.farDistance.value=ks.farDistance}function Vs(Ds,ks){ks.bumpMap&&(Ds.bumpMap.value=ks.bumpMap,Ds.bumpScale.value=ks.bumpScale,ks.side===BackSide&&(Ds.bumpScale.value*=-1)),ks.normalMap&&(Ds.normalMap.value=ks.normalMap,Ds.normalScale.value.copy(ks.normalScale),ks.side===BackSide&&Ds.normalScale.value.negate()),ks.displacementMap&&(Ds.displacementMap.value=ks.displacementMap,Ds.displacementScale.value=ks.displacementScale,Ds.displacementBias.value=ks.displacementBias)}return{refreshFogUniforms:_a,refreshMaterialUniforms:_s}}function WebGLRenderer(va){va=va||{};var _a=va.canvas!==void 0?va.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),_s=va.context!==void 0?va.context:null,Ss=va.alpha!==void 0?va.alpha:!1,Ms=va.depth!==void 0?va.depth:!0,Cs=va.stencil!==void 0?va.stencil:!0,Ts=va.antialias!==void 0?va.antialias:!1,Bs=va.premultipliedAlpha!==void 0?va.premultipliedAlpha:!0,Ps=va.preserveDrawingBuffer!==void 0?va.preserveDrawingBuffer:!1,Ls=va.powerPreference!==void 0?va.powerPreference:"default",Rs=va.failIfMajorPerformanceCaveat!==void 0?va.failIfMajorPerformanceCaveat:!1,$s=null,Fs=null;this.domElement=_a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Os=this,Gs=!1,Ns=null,Vs=0,Ds=0,ks=null,Us=null,zs=-1,Ws={geometry:null,program:null,wireframe:!1},qs=null,Zs=null,el=new Vector4,Js=new Vector4,Hs=null,Qs=_a.width,js=_a.height,Ks=1,Xs=null,Ys=null,rl=new Vector4(0,0,Qs,js),tl=new Vector4(0,0,Qs,js),il=!1,ll=new Frustum,cl=new WebGLClipping,al=!1,dl=!1,yl=new Matrix4,xl=new Vector3;function wl(){return ks===null?Ks:1}var Al;try{var bl={alpha:Ss,depth:Ms,stencil:Cs,antialias:Ts,premultipliedAlpha:Bs,preserveDrawingBuffer:Ps,powerPreference:Ls,failIfMajorPerformanceCaveat:Rs};if(_a.addEventListener("webglcontextlost",Hl,!1),_a.addEventListener("webglcontextrestored",Dl,!1),Al=_s||_a.getContext("webgl",bl)||_a.getContext("experimental-webgl",bl),Al===null)throw _a.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");Al.getShaderPrecisionFormat===void 0&&(Al.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(hl){throw console.error("THREE.WebGLRenderer: "+hl.message),hl}var Bl,Cl,Sl,El,Rl,Fl,jl,Vl,Wl,ul,pl,kl,$l,Ql,zl,Nl,su,ru;function nu(){Bl=new WebGLExtensions(Al),Cl=new WebGLCapabilities(Al,Bl,va),Cl.isWebGL2===!1&&(Bl.get("WEBGL_depth_texture"),Bl.get("OES_texture_float"),Bl.get("OES_texture_half_float"),Bl.get("OES_texture_half_float_linear"),Bl.get("OES_standard_derivatives"),Bl.get("OES_element_index_uint"),Bl.get("ANGLE_instanced_arrays")),Bl.get("OES_texture_float_linear"),ru=new WebGLUtils(Al,Bl,Cl),Sl=new WebGLState(Al,Bl,Cl),Sl.scissor(Js.copy(tl).multiplyScalar(Ks).floor()),Sl.viewport(el.copy(rl).multiplyScalar(Ks).floor()),El=new WebGLInfo(Al),Rl=new WebGLProperties,Fl=new WebGLTextures(Al,Bl,Sl,Rl,Cl,ru,El),jl=new WebGLAttributes(Al,Cl),Vl=new WebGLGeometries(Al,jl,El),Wl=new WebGLObjects(Al,Vl,jl,El),zl=new WebGLMorphtargets(Al),ul=new WebGLPrograms(Os,Bl,Cl),pl=new WebGLMaterials(Rl),kl=new WebGLRenderLists,$l=new WebGLRenderStates,Ql=new WebGLBackground(Os,Sl,Wl,Bs),Nl=new WebGLBufferRenderer(Al,Bl,El,Cl),su=new WebGLIndexedBufferRenderer(Al,Bl,El,Cl),El.programs=ul.programs,Os.capabilities=Cl,Os.extensions=Bl,Os.properties=Rl,Os.renderLists=kl,Os.state=Sl,Os.info=El}nu();var Ul=new WebXRManager(Os,Al);this.xr=Ul;var Yl=new WebGLShadowMap(Os,Wl,Cl.maxTextureSize);this.shadowMap=Yl,this.getContext=function(){return Al},this.getContextAttributes=function(){return Al.getContextAttributes()},this.forceContextLoss=function(){var hl=Bl.get("WEBGL_lose_context");hl&&hl.loseContext()},this.forceContextRestore=function(){var hl=Bl.get("WEBGL_lose_context");hl&&hl.restoreContext()},this.getPixelRatio=function(){return Ks},this.setPixelRatio=function(hl){hl!==void 0&&(Ks=hl,this.setSize(Qs,js,!1))},this.getSize=function(hl){return hl===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),hl=new Vector2),hl.set(Qs,js)},this.setSize=function(hl,Il,Tl){if(Ul.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Qs=hl,js=Il,_a.width=Math.floor(hl*Ks),_a.height=Math.floor(Il*Ks),Tl!==!1&&(_a.style.width=hl+"px",_a.style.height=Il+"px"),this.setViewport(0,0,hl,Il)},this.getDrawingBufferSize=function(hl){return hl===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),hl=new Vector2),hl.set(Qs*Ks,js*Ks).floor()},this.setDrawingBufferSize=function(hl,Il,Tl){Qs=hl,js=Il,Ks=Tl,_a.width=Math.floor(hl*Tl),_a.height=Math.floor(Il*Tl),this.setViewport(0,0,hl,Il)},this.getCurrentViewport=function(hl){return hl===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),hl=new Vector4),hl.copy(el)},this.getViewport=function(hl){return hl.copy(rl)},this.setViewport=function(hl,Il,Tl,Pl){hl.isVector4?rl.set(hl.x,hl.y,hl.z,hl.w):rl.set(hl,Il,Tl,Pl),Sl.viewport(el.copy(rl).multiplyScalar(Ks).floor())},this.getScissor=function(hl){return hl.copy(tl)},this.setScissor=function(hl,Il,Tl,Pl){hl.isVector4?tl.set(hl.x,hl.y,hl.z,hl.w):tl.set(hl,Il,Tl,Pl),Sl.scissor(Js.copy(tl).multiplyScalar(Ks).floor())},this.getScissorTest=function(){return il},this.setScissorTest=function(hl){Sl.setScissorTest(il=hl)},this.setOpaqueSort=function(hl){Xs=hl},this.setTransparentSort=function(hl){Ys=hl},this.getClearColor=function(){return Ql.getClearColor()},this.setClearColor=function(){Ql.setClearColor.apply(Ql,arguments)},this.getClearAlpha=function(){return Ql.getClearAlpha()},this.setClearAlpha=function(){Ql.setClearAlpha.apply(Ql,arguments)},this.clear=function(hl,Il,Tl){var Pl=0;(hl===void 0||hl)&&(Pl|=16384),(Il===void 0||Il)&&(Pl|=256),(Tl===void 0||Tl)&&(Pl|=1024),Al.clear(Pl)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){_a.removeEventListener("webglcontextlost",Hl,!1),_a.removeEventListener("webglcontextrestored",Dl,!1),kl.dispose(),$l.dispose(),Rl.dispose(),Wl.dispose(),Ul.dispose(),bu.stop()};function Hl(hl){hl.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Gs=!0}function Dl(){console.log("THREE.WebGLRenderer: Context Restored."),Gs=!1,nu()}function gl(hl){var Il=hl.target;Il.removeEventListener("dispose",gl),ql(Il)}function ql(hl){Xl(hl),Rl.remove(hl)}function Xl(hl){var Il=Rl.get(hl).program;hl.program=void 0,Il!==void 0&&ul.releaseProgram(Il)}function uu(hl,Il){hl.render(function(Tl){Os.renderBufferImmediate(Tl,Il)})}this.renderBufferImmediate=function(hl,Il){Sl.initAttributes();var Tl=Rl.get(hl);hl.hasPositions&&!Tl.position&&(Tl.position=Al.createBuffer()),hl.hasNormals&&!Tl.normal&&(Tl.normal=Al.createBuffer()),hl.hasUvs&&!Tl.uv&&(Tl.uv=Al.createBuffer()),hl.hasColors&&!Tl.color&&(Tl.color=Al.createBuffer());var Pl=Il.getAttributes();hl.hasPositions&&(Al.bindBuffer(34962,Tl.position),Al.bufferData(34962,hl.positionArray,35048),Sl.enableAttribute(Pl.position),Al.vertexAttribPointer(Pl.position,3,5126,!1,0,0)),hl.hasNormals&&(Al.bindBuffer(34962,Tl.normal),Al.bufferData(34962,hl.normalArray,35048),Sl.enableAttribute(Pl.normal),Al.vertexAttribPointer(Pl.normal,3,5126,!1,0,0)),hl.hasUvs&&(Al.bindBuffer(34962,Tl.uv),Al.bufferData(34962,hl.uvArray,35048),Sl.enableAttribute(Pl.uv),Al.vertexAttribPointer(Pl.uv,2,5126,!1,0,0)),hl.hasColors&&(Al.bindBuffer(34962,Tl.color),Al.bufferData(34962,hl.colorArray,35048),Sl.enableAttribute(Pl.color),Al.vertexAttribPointer(Pl.color,3,5126,!1,0,0)),Sl.disableUnusedAttributes(),Al.drawArrays(4,0,hl.count),hl.count=0};var Zl=new Scene;this.renderBufferDirect=function(hl,Il,Tl,Pl,Gl,lu){Il===null&&(Il=Zl);var au=Gl.isMesh&&Gl.matrixWorld.determinant()<0,eu=Iu(hl,Il,Pl,Gl);Sl.setMaterial(Pl,au);var iu=!1;(Ws.geometry!==Tl.id||Ws.program!==eu.id||Ws.wireframe!==(Pl.wireframe===!0))&&(Ws.geometry=Tl.id,Ws.program=eu.id,Ws.wireframe=Pl.wireframe===!0,iu=!0),(Pl.morphTargets||Pl.morphNormals)&&(zl.update(Gl,Tl,Pl,eu),iu=!0),Gl.isInstancedMesh===!0&&(iu=!0);var cu=Tl.index,gu=Tl.attributes.position;if(cu===null){if(gu===void 0||gu.count===0)return}else if(cu.count===0)return;var nl=1;Pl.wireframe===!0&&(cu=Vl.getWireframeAttribute(Tl),nl=2);var fl,ml=Nl;cu!==null&&(fl=jl.get(cu),ml=su,ml.setIndex(fl)),iu&&(hu(Gl,Tl,Pl,eu),cu!==null&&Al.bindBuffer(34963,fl.buffer));var _l=cu!==null?cu.count:gu.count,Ll=Tl.drawRange.start*nl,tu=Tl.drawRange.count*nl,ou=lu!==null?lu.start*nl:0,yu=lu!==null?lu.count*nl:1/0,Jl=Math.max(Ll,ou),Au=Math.min(_l,Ll+tu,ou+yu)-1,Bu=Math.max(0,Au-Jl+1);if(Bu!==0){if(Gl.isMesh)Pl.wireframe===!0?(Sl.setLineWidth(Pl.wireframeLinewidth*wl()),ml.setMode(1)):ml.setMode(4);else if(Gl.isLine){var Wu=Pl.linewidth;Wu===void 0&&(Wu=1),Sl.setLineWidth(Wu*wl()),Gl.isLineSegments?ml.setMode(1):Gl.isLineLoop?ml.setMode(2):ml.setMode(3)}else Gl.isPoints?ml.setMode(0):Gl.isSprite&&ml.setMode(4);if(Gl.isInstancedMesh)ml.renderInstances(Tl,Jl,Bu,Gl.count);else if(Tl.isInstancedBufferGeometry){var Qu=Math.min(Tl.instanceCount,Tl._maxInstanceCount);ml.renderInstances(Tl,Jl,Bu,Qu)}else ml.render(Jl,Bu)}};function hu(hl,Il,Tl,Pl){if(!(Cl.isWebGL2===!1&&(hl.isInstancedMesh||Il.isInstancedBufferGeometry)&&Bl.get("ANGLE_instanced_arrays")===null)){Sl.initAttributes();var Gl=Il.attributes,lu=Pl.getAttributes(),au=Tl.defaultAttributeValues;for(var eu in lu){var iu=lu[eu];if(iu>=0){var cu=Gl[eu];if(cu!==void 0){var gu=cu.normalized,nl=cu.itemSize,fl=jl.get(cu);if(fl===void 0)continue;var ml=fl.buffer,_l=fl.type,Ll=fl.bytesPerElement;if(cu.isInterleavedBufferAttribute){var tu=cu.data,ou=tu.stride,yu=cu.offset;tu&&tu.isInstancedInterleavedBuffer?(Sl.enableAttributeAndDivisor(iu,tu.meshPerAttribute),Il._maxInstanceCount===void 0&&(Il._maxInstanceCount=tu.meshPerAttribute*tu.count)):Sl.enableAttribute(iu),Al.bindBuffer(34962,ml),Sl.vertexAttribPointer(iu,nl,_l,gu,ou*Ll,yu*Ll)}else cu.isInstancedBufferAttribute?(Sl.enableAttributeAndDivisor(iu,cu.meshPerAttribute),Il._maxInstanceCount===void 0&&(Il._maxInstanceCount=cu.meshPerAttribute*cu.count)):Sl.enableAttribute(iu),Al.bindBuffer(34962,ml),Sl.vertexAttribPointer(iu,nl,_l,gu,0,0)}else if(eu==="instanceMatrix"){var fl=jl.get(hl.instanceMatrix);if(fl===void 0)continue;var ml=fl.buffer,_l=fl.type;Sl.enableAttributeAndDivisor(iu+0,1),Sl.enableAttributeAndDivisor(iu+1,1),Sl.enableAttributeAndDivisor(iu+2,1),Sl.enableAttributeAndDivisor(iu+3,1),Al.bindBuffer(34962,ml),Al.vertexAttribPointer(iu+0,4,_l,!1,64,0),Al.vertexAttribPointer(iu+1,4,_l,!1,64,16),Al.vertexAttribPointer(iu+2,4,_l,!1,64,32),Al.vertexAttribPointer(iu+3,4,_l,!1,64,48)}else if(au!==void 0){var Jl=au[eu];if(Jl!==void 0)switch(Jl.length){case 2:Al.vertexAttrib2fv(iu,Jl);break;case 3:Al.vertexAttrib3fv(iu,Jl);break;case 4:Al.vertexAttrib4fv(iu,Jl);break;default:Al.vertexAttrib1fv(iu,Jl)}}}}Sl.disableUnusedAttributes()}}this.compile=function(hl,Il){Fs=$l.get(hl,Il),Fs.init(),hl.traverse(function(Pl){Pl.isLight&&(Fs.pushLight(Pl),Pl.castShadow&&Fs.pushShadow(Pl))}),Fs.setupLights(Il);const Tl={};hl.traverse(function(Pl){let Gl=Pl.material;if(Gl)if(Array.isArray(Gl))for(let lu=0;lu<Gl.length;lu++){let au=Gl[lu];au.uuid in Tl||(xu(au,hl,Pl),Tl[au.uuid]=!0)}else Gl.uuid in Tl||(xu(Gl,hl,Pl),Tl[Gl.uuid]=!0)})};var vu=null;function mu(hl){Ul.isPresenting||vu&&vu(hl)}var bu=new WebGLAnimation;bu.setAnimationLoop(mu),typeof window<"u"&&bu.setContext(window),this.setAnimationLoop=function(hl){vu=hl,Ul.setAnimationLoop(hl),bu.start()},this.render=function(hl,Il){var Tl,Pl;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Tl=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Pl=arguments[3]),!(Il&&Il.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!Gs){Ws.geometry=null,Ws.program=null,Ws.wireframe=!1,zs=-1,qs=null,hl.autoUpdate===!0&&hl.updateMatrixWorld(),Il.parent===null&&Il.updateMatrixWorld(),Ul.enabled&&Ul.isPresenting&&(Il=Ul.getCamera(Il)),hl.onBeforeRender(Os,hl,Il,Tl||ks),Fs=$l.get(hl,Il),Fs.init(),yl.multiplyMatrices(Il.projectionMatrix,Il.matrixWorldInverse),ll.setFromProjectionMatrix(yl),dl=this.localClippingEnabled,al=cl.init(this.clippingPlanes,dl,Il),$s=kl.get(hl,Il),$s.init(),du(hl,Il,0,Os.sortObjects),$s.finish(),Os.sortObjects===!0&&$s.sort(Xs,Ys),al&&cl.beginShadows();var Gl=Fs.state.shadowsArray;Yl.render(Gl,hl,Il),Fs.setupLights(Il),al&&cl.endShadows(),this.info.autoReset&&this.info.reset(),Tl!==void 0&&this.setRenderTarget(Tl),Ql.render($s,hl,Il,Pl);var lu=$s.opaque,au=$s.transparent;if(hl.overrideMaterial){var eu=hl.overrideMaterial;lu.length&&_u(lu,hl,Il,eu),au.length&&_u(au,hl,Il,eu)}else lu.length&&_u(lu,hl,Il),au.length&&_u(au,hl,Il);hl.onAfterRender(Os,hl,Il),ks!==null&&(Fl.updateRenderTargetMipmap(ks),Fl.updateMultisampleRenderTarget(ks)),Sl.buffers.depth.setTest(!0),Sl.buffers.depth.setMask(!0),Sl.buffers.color.setMask(!0),Sl.setPolygonOffset(!1),$s=null,Fs=null}};function du(hl,Il,Tl,Pl){if(hl.visible!==!1){var Gl=hl.layers.test(Il.layers);if(Gl){if(hl.isGroup)Tl=hl.renderOrder;else if(hl.isLOD)hl.autoUpdate===!0&&hl.update(Il);else if(hl.isLight)Fs.pushLight(hl),hl.castShadow&&Fs.pushShadow(hl);else if(hl.isSprite){if(!hl.frustumCulled||ll.intersectsSprite(hl)){Pl&&xl.setFromMatrixPosition(hl.matrixWorld).applyMatrix4(yl);var lu=Wl.update(hl),au=hl.material;au.visible&&$s.push(hl,lu,au,Tl,xl.z,null)}}else if(hl.isImmediateRenderObject)Pl&&xl.setFromMatrixPosition(hl.matrixWorld).applyMatrix4(yl),$s.push(hl,null,hl.material,Tl,xl.z,null);else if((hl.isMesh||hl.isLine||hl.isPoints)&&(hl.isSkinnedMesh&&hl.skeleton.frame!==El.render.frame&&(hl.skeleton.update(),hl.skeleton.frame=El.render.frame),!hl.frustumCulled||ll.intersectsObject(hl))){Pl&&xl.setFromMatrixPosition(hl.matrixWorld).applyMatrix4(yl);var lu=Wl.update(hl),au=hl.material;if(Array.isArray(au))for(var eu=lu.groups,iu=0,cu=eu.length;iu<cu;iu++){var gu=eu[iu],nl=au[gu.materialIndex];nl&&nl.visible&&$s.push(hl,lu,nl,Tl,xl.z,gu)}else au.visible&&$s.push(hl,lu,au,Tl,xl.z,null)}}for(var fl=hl.children,iu=0,cu=fl.length;iu<cu;iu++)du(fl[iu],Il,Tl,Pl)}}function _u(hl,Il,Tl,Pl){for(var Gl=0,lu=hl.length;Gl<lu;Gl++){var au=hl[Gl],eu=au.object,iu=au.geometry,cu=Pl===void 0?au.material:Pl,gu=au.group;if(Tl.isArrayCamera){Zs=Tl;for(var nl=Tl.cameras,fl=0,ml=nl.length;fl<ml;fl++){var _l=nl[fl];eu.layers.test(_l.layers)&&(Sl.viewport(el.copy(_l.viewport)),Fs.setupLights(_l),wu(eu,Il,_l,iu,cu,gu))}}else Zs=null,wu(eu,Il,Tl,iu,cu,gu)}}function wu(hl,Il,Tl,Pl,Gl,lu){if(hl.onBeforeRender(Os,Il,Tl,Pl,Gl,lu),Fs=$l.get(Il,Zs||Tl),hl.modelViewMatrix.multiplyMatrices(Tl.matrixWorldInverse,hl.matrixWorld),hl.normalMatrix.getNormalMatrix(hl.modelViewMatrix),hl.isImmediateRenderObject){var au=Iu(Tl,Il,Gl,hl);Sl.setMaterial(Gl),Ws.geometry=null,Ws.program=null,Ws.wireframe=!1,uu(hl,au)}else Os.renderBufferDirect(Tl,Il,Pl,Gl,hl,lu);hl.onAfterRender(Os,Il,Tl,Pl,Gl,lu),Fs=$l.get(Il,Zs||Tl)}function xu(hl,Il,Tl){var Pl=Rl.get(hl),Gl=Fs.state.lights,lu=Fs.state.shadowsArray,au=Gl.state.version,eu=ul.getParameters(hl,Gl.state,lu,Il,cl.numPlanes,cl.numIntersection,Tl),iu=ul.getProgramCacheKey(eu),cu=Pl.program,gu=!0;if(cu===void 0)hl.addEventListener("dispose",gl);else if(cu.cacheKey!==iu)Xl(hl);else if(Pl.lightsStateVersion!==au)Pl.lightsStateVersion=au,gu=!1;else{if(eu.shaderID!==void 0)return;gu=!1}gu&&(cu=ul.acquireProgram(eu,iu),Pl.program=cu,Pl.uniforms=eu.uniforms,Pl.outputEncoding=eu.outputEncoding,hl.program=cu);var nl=cu.getAttributes();if(hl.morphTargets){hl.numSupportedMorphTargets=0;for(var fl=0;fl<Os.maxMorphTargets;fl++)nl["morphTarget"+fl]>=0&&hl.numSupportedMorphTargets++}if(hl.morphNormals){hl.numSupportedMorphNormals=0;for(var fl=0;fl<Os.maxMorphNormals;fl++)nl["morphNormal"+fl]>=0&&hl.numSupportedMorphNormals++}var ml=Pl.uniforms;(!hl.isShaderMaterial&&!hl.isRawShaderMaterial||hl.clipping===!0)&&(Pl.numClippingPlanes=cl.numPlanes,Pl.numIntersection=cl.numIntersection,ml.clippingPlanes=cl.uniform),Pl.environment=hl.isMeshStandardMaterial?Il.environment:null,Pl.fog=Il.fog,Pl.needsLights=Uu(hl),Pl.lightsStateVersion=au,Pl.needsLights&&(ml.ambientLightColor.value=Gl.state.ambient,ml.lightProbe.value=Gl.state.probe,ml.directionalLights.value=Gl.state.directional,ml.directionalLightShadows.value=Gl.state.directionalShadow,ml.spotLights.value=Gl.state.spot,ml.spotLightShadows.value=Gl.state.spotShadow,ml.rectAreaLights.value=Gl.state.rectArea,ml.pointLights.value=Gl.state.point,ml.pointLightShadows.value=Gl.state.pointShadow,ml.hemisphereLights.value=Gl.state.hemi,ml.directionalShadowMap.value=Gl.state.directionalShadowMap,ml.directionalShadowMatrix.value=Gl.state.directionalShadowMatrix,ml.spotShadowMap.value=Gl.state.spotShadowMap,ml.spotShadowMatrix.value=Gl.state.spotShadowMatrix,ml.pointShadowMap.value=Gl.state.pointShadowMap,ml.pointShadowMatrix.value=Gl.state.pointShadowMatrix);var _l=Pl.program.getUniforms(),Ll=WebGLUniforms.seqWithValue(_l.seq,ml);Pl.uniformsList=Ll}function Iu(hl,Il,Tl,Pl){Fl.resetTextureUnits();var Gl=Il.fog,lu=Tl.isMeshStandardMaterial?Il.environment:null,au=ks===null?Os.outputEncoding:ks.texture.encoding,eu=Rl.get(Tl),iu=Fs.state.lights;if(al&&(dl||hl!==qs)){var cu=hl===qs&&Tl.id===zs;cl.setState(Tl.clippingPlanes,Tl.clipIntersection,Tl.clipShadows,hl,eu,cu)}Tl.version===eu.__version?(eu.program===void 0||Tl.fog&&eu.fog!==Gl||eu.environment!==lu||eu.needsLights&&eu.lightsStateVersion!==iu.state.version||eu.numClippingPlanes!==void 0&&(eu.numClippingPlanes!==cl.numPlanes||eu.numIntersection!==cl.numIntersection)||eu.outputEncoding!==au)&&xu(Tl,Il,Pl):(xu(Tl,Il,Pl),eu.__version=Tl.version);var gu=!1,nl=!1,fl=!1,ml=eu.program,_l=ml.getUniforms(),Ll=eu.uniforms;if(Sl.useProgram(ml.program)&&(gu=!0,nl=!0,fl=!0),Tl.id!==zs&&(zs=Tl.id,nl=!0),gu||qs!==hl){if(_l.setValue(Al,"projectionMatrix",hl.projectionMatrix),Cl.logarithmicDepthBuffer&&_l.setValue(Al,"logDepthBufFC",2/(Math.log(hl.far+1)/Math.LN2)),qs!==hl&&(qs=hl,nl=!0,fl=!0),Tl.isShaderMaterial||Tl.isMeshPhongMaterial||Tl.isMeshToonMaterial||Tl.isMeshStandardMaterial||Tl.envMap){var tu=_l.map.cameraPosition;tu!==void 0&&tu.setValue(Al,xl.setFromMatrixPosition(hl.matrixWorld))}(Tl.isMeshPhongMaterial||Tl.isMeshToonMaterial||Tl.isMeshLambertMaterial||Tl.isMeshBasicMaterial||Tl.isMeshStandardMaterial||Tl.isShaderMaterial)&&_l.setValue(Al,"isOrthographic",hl.isOrthographicCamera===!0),(Tl.isMeshPhongMaterial||Tl.isMeshToonMaterial||Tl.isMeshLambertMaterial||Tl.isMeshBasicMaterial||Tl.isMeshStandardMaterial||Tl.isShaderMaterial||Tl.skinning)&&_l.setValue(Al,"viewMatrix",hl.matrixWorldInverse)}if(Tl.skinning){_l.setOptional(Al,Pl,"bindMatrix"),_l.setOptional(Al,Pl,"bindMatrixInverse");var ou=Pl.skeleton;if(ou){var yu=ou.bones;if(Cl.floatVertexTextures){if(ou.boneTexture===void 0){var Jl=Math.sqrt(yu.length*4);Jl=MathUtils.ceilPowerOfTwo(Jl),Jl=Math.max(Jl,4);var Au=new Float32Array(Jl*Jl*4);Au.set(ou.boneMatrices);var Bu=new DataTexture(Au,Jl,Jl,RGBAFormat,FloatType);ou.boneMatrices=Au,ou.boneTexture=Bu,ou.boneTextureSize=Jl}_l.setValue(Al,"boneTexture",ou.boneTexture,Fl),_l.setValue(Al,"boneTextureSize",ou.boneTextureSize)}else _l.setOptional(Al,ou,"boneMatrices")}}return(nl||eu.receiveShadow!==Pl.receiveShadow)&&(eu.receiveShadow=Pl.receiveShadow,_l.setValue(Al,"receiveShadow",Pl.receiveShadow)),nl&&(_l.setValue(Al,"toneMappingExposure",Os.toneMappingExposure),_l.setValue(Al,"toneMappingWhitePoint",Os.toneMappingWhitePoint),eu.needsLights&&Gu(Ll,fl),Gl&&Tl.fog&&pl.refreshFogUniforms(Ll,Gl),pl.refreshMaterialUniforms(Ll,Tl,lu,Ks,js),Ll.ltc_1!==void 0&&(Ll.ltc_1.value=UniformsLib.LTC_1),Ll.ltc_2!==void 0&&(Ll.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(Al,eu.uniformsList,Ll,Fl)),Tl.isShaderMaterial&&Tl.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Al,eu.uniformsList,Ll,Fl),Tl.uniformsNeedUpdate=!1),Tl.isSpriteMaterial&&_l.setValue(Al,"center",Pl.center),_l.setValue(Al,"modelViewMatrix",Pl.modelViewMatrix),_l.setValue(Al,"normalMatrix",Pl.normalMatrix),_l.setValue(Al,"modelMatrix",Pl.matrixWorld),ml}function Gu(hl,Il){hl.ambientLightColor.needsUpdate=Il,hl.lightProbe.needsUpdate=Il,hl.directionalLights.needsUpdate=Il,hl.directionalLightShadows.needsUpdate=Il,hl.pointLights.needsUpdate=Il,hl.pointLightShadows.needsUpdate=Il,hl.spotLights.needsUpdate=Il,hl.spotLightShadows.needsUpdate=Il,hl.rectAreaLights.needsUpdate=Il,hl.hemisphereLights.needsUpdate=Il}function Uu(hl){return hl.isMeshLambertMaterial||hl.isMeshToonMaterial||hl.isMeshPhongMaterial||hl.isMeshStandardMaterial||hl.isShadowMaterial||hl.isShaderMaterial&&hl.lights===!0}this.setFramebuffer=function(hl){Ns!==hl&&ks===null&&Al.bindFramebuffer(36160,hl),Ns=hl},this.getActiveCubeFace=function(){return Vs},this.getActiveMipmapLevel=function(){return Ds},this.getRenderTarget=function(){return ks},this.setRenderTarget=function(hl,Il,Tl){ks=hl,Vs=Il,Ds=Tl,hl&&Rl.get(hl).__webglFramebuffer===void 0&&Fl.setupRenderTarget(hl);var Pl=Ns,Gl=!1;if(hl){var lu=Rl.get(hl).__webglFramebuffer;hl.isWebGLCubeRenderTarget?(Pl=lu[Il||0],Gl=!0):hl.isWebGLMultisampleRenderTarget?Pl=Rl.get(hl).__webglMultisampledFramebuffer:Pl=lu,el.copy(hl.viewport),Js.copy(hl.scissor),Hs=hl.scissorTest}else el.copy(rl).multiplyScalar(Ks).floor(),Js.copy(tl).multiplyScalar(Ks).floor(),Hs=il;if(Us!==Pl&&(Al.bindFramebuffer(36160,Pl),Us=Pl),Sl.viewport(el),Sl.scissor(Js),Sl.setScissorTest(Hs),Gl){var au=Rl.get(hl.texture);Al.framebufferTexture2D(36160,36064,34069+(Il||0),au.__webglTexture,Tl||0)}},this.readRenderTargetPixels=function(hl,Il,Tl,Pl,Gl,lu,au){if(!(hl&&hl.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var eu=Rl.get(hl).__webglFramebuffer;if(hl.isWebGLCubeRenderTarget&&au!==void 0&&(eu=eu[au]),eu){var iu=!1;eu!==Us&&(Al.bindFramebuffer(36160,eu),iu=!0);try{var cu=hl.texture,gu=cu.format,nl=cu.type;if(gu!==RGBAFormat&&ru.convert(gu)!==Al.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(nl!==UnsignedByteType&&ru.convert(nl)!==Al.getParameter(35738)&&!(nl===FloatType&&(Cl.isWebGL2||Bl.get("OES_texture_float")||Bl.get("WEBGL_color_buffer_float")))&&!(nl===HalfFloatType&&(Cl.isWebGL2?Bl.get("EXT_color_buffer_float"):Bl.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Al.checkFramebufferStatus(36160)===36053?Il>=0&&Il<=hl.width-Pl&&Tl>=0&&Tl<=hl.height-Gl&&Al.readPixels(Il,Tl,Pl,Gl,ru.convert(gu),ru.convert(nl),lu):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{iu&&Al.bindFramebuffer(36160,Us)}}},this.copyFramebufferToTexture=function(hl,Il,Tl){Tl===void 0&&(Tl=0);var Pl=Math.pow(2,-Tl),Gl=Math.floor(Il.image.width*Pl),lu=Math.floor(Il.image.height*Pl),au=ru.convert(Il.format);Fl.setTexture2D(Il,0),Al.copyTexImage2D(3553,Tl,au,hl.x,hl.y,Gl,lu,0),Sl.unbindTexture()},this.copyTextureToTexture=function(hl,Il,Tl,Pl){Pl===void 0&&(Pl=0);var Gl=Il.image.width,lu=Il.image.height,au=ru.convert(Tl.format),eu=ru.convert(Tl.type);Fl.setTexture2D(Tl,0),Il.isDataTexture?Al.texSubImage2D(3553,Pl,hl.x,hl.y,Gl,lu,au,eu,Il.image.data):Il.isCompressedTexture?Al.compressedTexSubImage2D(3553,Pl,hl.x,hl.y,Il.mipmaps[0].width,Il.mipmaps[0].height,au,Il.mipmaps[0].data):Al.texSubImage2D(3553,Pl,hl.x,hl.y,au,eu,Il.image),Pl===0&&Tl.generateMipmaps&&Al.generateMipmap(3553),Sl.unbindTexture()},this.initTexture=function(hl){Fl.setTexture2D(hl,0),Sl.unbindTexture()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(va,_a){this.name="",this.color=new Color(va),this.density=_a!==void 0?_a:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(va,_a,_s){this.name="",this.color=new Color(va),this.near=_a!==void 0?_a:1,this.far=_s!==void 0?_s:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(va,_a){this.array=va,this.stride=_a,this.count=va!==void 0?va.length/_a:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(va){va===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(va){return this.usage=va,this},copy:function(va){return this.array=new va.array.constructor(va.array),this.count=va.count,this.stride=va.stride,this.usage=va.usage,this},copyAt:function(va,_a,_s){va*=this.stride,_s*=_a.stride;for(var Ss=0,Ms=this.stride;Ss<Ms;Ss++)this.array[va+Ss]=_a.array[_s+Ss];return this},set:function(va,_a){return _a===void 0&&(_a=0),this.array.set(va,_a),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(va){return this.onUploadCallback=va,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(va,_a,_s,Ss){this.name="",this.data=va,this.itemSize=_a,this.offset=_s,this.normalized=Ss===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(va){for(var _a=0,_s=this.data.count;_a<_s;_a++)_vector$6.x=this.getX(_a),_vector$6.y=this.getY(_a),_vector$6.z=this.getZ(_a),_vector$6.applyMatrix4(va),this.setXYZ(_a,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(va,_a){return this.data.array[va*this.data.stride+this.offset]=_a,this},setY:function(va,_a){return this.data.array[va*this.data.stride+this.offset+1]=_a,this},setZ:function(va,_a){return this.data.array[va*this.data.stride+this.offset+2]=_a,this},setW:function(va,_a){return this.data.array[va*this.data.stride+this.offset+3]=_a,this},getX:function(va){return this.data.array[va*this.data.stride+this.offset]},getY:function(va){return this.data.array[va*this.data.stride+this.offset+1]},getZ:function(va){return this.data.array[va*this.data.stride+this.offset+2]},getW:function(va){return this.data.array[va*this.data.stride+this.offset+3]},setXY:function(va,_a,_s){return va=va*this.data.stride+this.offset,this.data.array[va+0]=_a,this.data.array[va+1]=_s,this},setXYZ:function(va,_a,_s,Ss){return va=va*this.data.stride+this.offset,this.data.array[va+0]=_a,this.data.array[va+1]=_s,this.data.array[va+2]=Ss,this},setXYZW:function(va,_a,_s,Ss,Ms){return va=va*this.data.stride+this.offset,this.data.array[va+0]=_a,this.data.array[va+1]=_s,this.data.array[va+2]=Ss,this.data.array[va+3]=Ms,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var va=[],_a=0;_a<this.count;_a++)for(var _s=_a*this.data.stride+this.offset,Ss=0;Ss<this.itemSize;Ss++)va.push(this.data.array[_s+Ss]);return new BufferAttribute(new this.array.constructor(va),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var va=[],_a=0;_a<this.count;_a++)for(var _s=_a*this.data.stride+this.offset,Ss=0;Ss<this.itemSize;Ss++)va.push(this.data.array[_s+Ss]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:va,normalized:this.normalized}}});function SpriteMaterial(va){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(va)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.map=va.map,this.alphaMap=va.alphaMap,this.rotation=va.rotation,this.sizeAttenuation=va.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(va){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var _a=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),_s=new InterleavedBuffer(_a,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(_s,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(_s,2,3,!1))}this.geometry=_geometry,this.material=va!==void 0?va:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(va,_a){va.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(va.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(va.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),va.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var _s=this.material.rotation,Ss,Ms;_s!==0&&(Ms=Math.cos(_s),Ss=Math.sin(_s));var Cs=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var Ts=va.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(Ts===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),_uvB$1.set(0,1),Ts=va.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),Ts===null))){var Bs=va.ray.origin.distanceTo(_intersectPoint);Bs<va.near||Bs>va.far||_a.push({distance:Bs,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(va){return Object3D.prototype.copy.call(this,va),va.center!==void 0&&this.center.copy(va.center),this}});function transformVertex(va,_a,_s,Ss,Ms,Cs){_alignedPosition.subVectors(va,_s).addScalar(.5).multiply(Ss),Ms!==void 0?(_rotatedPosition.x=Cs*_alignedPosition.x-Ms*_alignedPosition.y,_rotatedPosition.y=Ms*_alignedPosition.x+Cs*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),va.copy(_a),va.x+=_rotatedPosition.x,va.y+=_rotatedPosition.y,va.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(va){Object3D.prototype.copy.call(this,va,!1);for(var _a=va.levels,_s=0,Ss=_a.length;_s<Ss;_s++){var Ms=_a[_s];this.addLevel(Ms.object.clone(),Ms.distance)}return this.autoUpdate=va.autoUpdate,this},addLevel:function(va,_a){_a===void 0&&(_a=0),_a=Math.abs(_a);for(var _s=this.levels,Ss=0;Ss<_s.length&&!(_a<_s[Ss].distance);Ss++);return _s.splice(Ss,0,{distance:_a,object:va}),this.add(va),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(va){var _a=this.levels;if(_a.length>0){for(var _s=1,Ss=_a.length;_s<Ss&&!(va<_a[_s].distance);_s++);return _a[_s-1].object}return null},raycast:function(va,_a){var _s=this.levels;if(_s.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var Ss=va.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(Ss).raycast(va,_a)}},update:function(va){var _a=this.levels;if(_a.length>1){_v1$4.setFromMatrixPosition(va.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var _s=_v1$4.distanceTo(_v2$2)/va.zoom;_a[0].object.visible=!0;for(var Ss=1,Ms=_a.length;Ss<Ms&&_s>=_a[Ss].distance;Ss++)_a[Ss-1].object.visible=!1,_a[Ss].object.visible=!0;for(this._currentLevel=Ss-1;Ss<Ms;Ss++)_a[Ss].object.visible=!1}},toJSON:function(va){var _a=Object3D.prototype.toJSON.call(this,va);this.autoUpdate===!1&&(_a.object.autoUpdate=!1),_a.object.levels=[];for(var _s=this.levels,Ss=0,Ms=_s.length;Ss<Ms;Ss++){var Cs=_s[Ss];_a.object.levels.push({object:Cs.object.uuid,distance:Cs.distance})}return _a}});function SkinnedMesh(va,_a){va&&va.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,va,_a),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(va,_a){this.skeleton=va,_a===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),_a=this.matrixWorld),this.bindMatrix.copy(_a),this.bindMatrixInverse.getInverse(_a)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var va=new Vector4,_a=this.geometry.attributes.skinWeight,_s=0,Ss=_a.count;_s<Ss;_s++){va.x=_a.getX(_s),va.y=_a.getY(_s),va.z=_a.getZ(_s),va.w=_a.getW(_s);var Ms=1/va.manhattanLength();Ms!==1/0?va.multiplyScalar(Ms):va.set(1,0,0,0),_a.setXYZW(_s,va.x,va.y,va.z,va.w)}},updateMatrixWorld:function(va){Mesh.prototype.updateMatrixWorld.call(this,va),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var va=new Vector3,_a=new Vector4,_s=new Vector4,Ss=new Vector3,Ms=new Matrix4;return function(Cs,Ts){var Bs=this.skeleton,Ps=this.geometry;_a.fromBufferAttribute(Ps.attributes.skinIndex,Cs),_s.fromBufferAttribute(Ps.attributes.skinWeight,Cs),va.fromBufferAttribute(Ps.attributes.position,Cs).applyMatrix4(this.bindMatrix),Ts.set(0,0,0);for(var Ls=0;Ls<4;Ls++){var Rs=_s.getComponent(Ls);if(Rs!==0){var $s=_a.getComponent(Ls);Ms.multiplyMatrices(Bs.bones[$s].matrixWorld,Bs.boneInverses[$s]),Ts.addScaledVector(Ss.copy(va).applyMatrix4(Ms),Rs)}}return Ts.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(va,_a){if(va=va||[],this.bones=va.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,_a===void 0)this.calculateInverses();else if(this.bones.length===_a.length)this.boneInverses=_a.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var _s=0,Ss=this.bones.length;_s<Ss;_s++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var va=0,_a=this.bones.length;va<_a;va++){var _s=new Matrix4;this.bones[va]&&_s.getInverse(this.bones[va].matrixWorld),this.boneInverses.push(_s)}},pose:function(){var va,_a,_s;for(_a=0,_s=this.bones.length;_a<_s;_a++)va=this.bones[_a],va&&va.matrixWorld.getInverse(this.boneInverses[_a]);for(_a=0,_s=this.bones.length;_a<_s;_a++)va=this.bones[_a],va&&(va.parent&&va.parent.isBone?(va.matrix.getInverse(va.parent.matrixWorld),va.matrix.multiply(va.matrixWorld)):va.matrix.copy(va.matrixWorld),va.matrix.decompose(va.position,va.quaternion,va.scale))},update:function(){for(var va=this.bones,_a=this.boneInverses,_s=this.boneMatrices,Ss=this.boneTexture,Ms=0,Cs=va.length;Ms<Cs;Ms++){var Ts=va[Ms]?va[Ms].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Ts,_a[Ms]),_offsetMatrix.toArray(_s,Ms*16)}Ss!==void 0&&(Ss.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(va){for(var _a=0,_s=this.bones.length;_a<_s;_a++){var Ss=this.bones[_a];if(Ss.name===va)return Ss}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(va,_a,_s){Mesh.call(this,va,_a),this.instanceMatrix=new BufferAttribute(new Float32Array(_s*16),16),this.count=_s,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(va,_a){_a.fromArray(this.instanceMatrix.array,va*16)},raycast:function(va,_a){var _s=this.matrixWorld,Ss=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var Ms=0;Ms<Ss;Ms++){this.getMatrixAt(Ms,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(_s,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(va,_instanceIntersects);for(var Cs=0,Ts=_instanceIntersects.length;Cs<Ts;Cs++){var Bs=_instanceIntersects[Cs];Bs.instanceId=Ms,Bs.object=this,_a.push(Bs)}_instanceIntersects.length=0}},setMatrixAt:function(va,_a){_a.toArray(this.instanceMatrix.array,va*16)},updateMorphTargets:function(){}});function LineBasicMaterial(va){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(va)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.linewidth=va.linewidth,this.linecap=va.linecap,this.linejoin=va.linejoin,this.morphTargets=va.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line$1(va,_a,_s){_s===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=va!==void 0?va:new BufferGeometry,this.material=_a!==void 0?_a:new LineBasicMaterial,this.updateMorphTargets()}Line$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line$1,isLine:!0,computeLineDistances:function(){var va=this.geometry;if(va.isBufferGeometry)if(va.index===null){for(var _a=va.attributes.position,_s=[0],Ss=1,Ms=_a.count;Ss<Ms;Ss++)_start.fromBufferAttribute(_a,Ss-1),_end.fromBufferAttribute(_a,Ss),_s[Ss]=_s[Ss-1],_s[Ss]+=_start.distanceTo(_end);va.setAttribute("lineDistance",new Float32BufferAttribute(_s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(va.isGeometry){var Cs=va.vertices,_s=va.lineDistances;_s[0]=0;for(var Ss=1,Ms=Cs.length;Ss<Ms;Ss++)_s[Ss]=_s[Ss-1],_s[Ss]+=Cs[Ss-1].distanceTo(Cs[Ss])}return this},raycast:function(va,_a){var _s=this.geometry,Ss=this.matrixWorld,Ms=va.params.Line.threshold;if(_s.boundingSphere===null&&_s.computeBoundingSphere(),_sphere$2.copy(_s.boundingSphere),_sphere$2.applyMatrix4(Ss),_sphere$2.radius+=Ms,va.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(Ss),_ray$1.copy(va.ray).applyMatrix4(_inverseMatrix$1);var Cs=Ms/((this.scale.x+this.scale.y+this.scale.z)/3),Ts=Cs*Cs,Bs=new Vector3,Ps=new Vector3,Ls=new Vector3,Rs=new Vector3,$s=this&&this.isLineSegments?2:1;if(_s.isBufferGeometry){var Fs=_s.index,Os=_s.attributes,Gs=Os.position.array;if(Fs!==null)for(var Ns=Fs.array,Vs=0,Ds=Ns.length-1;Vs<Ds;Vs+=$s){var ks=Ns[Vs],Us=Ns[Vs+1];Bs.fromArray(Gs,ks*3),Ps.fromArray(Gs,Us*3);var zs=_ray$1.distanceSqToSegment(Bs,Ps,Rs,Ls);if(!(zs>Ts)){Rs.applyMatrix4(this.matrixWorld);var Ws=va.ray.origin.distanceTo(Rs);Ws<va.near||Ws>va.far||_a.push({distance:Ws,point:Ls.clone().applyMatrix4(this.matrixWorld),index:Vs,face:null,faceIndex:null,object:this})}}else for(var Vs=0,Ds=Gs.length/3-1;Vs<Ds;Vs+=$s){Bs.fromArray(Gs,3*Vs),Ps.fromArray(Gs,3*Vs+3);var zs=_ray$1.distanceSqToSegment(Bs,Ps,Rs,Ls);if(!(zs>Ts)){Rs.applyMatrix4(this.matrixWorld);var Ws=va.ray.origin.distanceTo(Rs);Ws<va.near||Ws>va.far||_a.push({distance:Ws,point:Ls.clone().applyMatrix4(this.matrixWorld),index:Vs,face:null,faceIndex:null,object:this})}}}else if(_s.isGeometry)for(var qs=_s.vertices,Zs=qs.length,Vs=0;Vs<Zs-1;Vs+=$s){var zs=_ray$1.distanceSqToSegment(qs[Vs],qs[Vs+1],Rs,Ls);if(!(zs>Ts)){Rs.applyMatrix4(this.matrixWorld);var Ws=va.ray.origin.distanceTo(Rs);Ws<va.near||Ws>va.far||_a.push({distance:Ws,point:Ls.clone().applyMatrix4(this.matrixWorld),index:Vs,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var va=this.geometry,_a,_s,Ss;if(va.isBufferGeometry){var Ms=va.morphAttributes,Cs=Object.keys(Ms);if(Cs.length>0){var Ts=Ms[Cs[0]];if(Ts!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},_a=0,_s=Ts.length;_a<_s;_a++)Ss=Ts[_a].name||String(_a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ss]=_a}}else{var Bs=va.morphTargets;Bs!==void 0&&Bs.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(va,_a){Line$1.call(this,va,_a),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var va=this.geometry;if(va.isBufferGeometry)if(va.index===null){for(var _a=va.attributes.position,_s=[],Ss=0,Ms=_a.count;Ss<Ms;Ss+=2)_start$1.fromBufferAttribute(_a,Ss),_end$1.fromBufferAttribute(_a,Ss+1),_s[Ss]=Ss===0?0:_s[Ss-1],_s[Ss+1]=_s[Ss]+_start$1.distanceTo(_end$1);va.setAttribute("lineDistance",new Float32BufferAttribute(_s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(va.isGeometry)for(var Cs=va.vertices,_s=va.lineDistances,Ss=0,Ms=Cs.length;Ss<Ms;Ss+=2)_start$1.copy(Cs[Ss]),_end$1.copy(Cs[Ss+1]),_s[Ss]=Ss===0?0:_s[Ss-1],_s[Ss+1]=_s[Ss]+_start$1.distanceTo(_end$1);return this}});function LineLoop(va,_a){Line$1.call(this,va,_a),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(va){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(va)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.map=va.map,this.alphaMap=va.alphaMap,this.size=va.size,this.sizeAttenuation=va.sizeAttenuation,this.morphTargets=va.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(va,_a){Object3D.call(this),this.type="Points",this.geometry=va!==void 0?va:new BufferGeometry,this.material=_a!==void 0?_a:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(va,_a){var _s=this.geometry,Ss=this.matrixWorld,Ms=va.params.Points.threshold;if(_s.boundingSphere===null&&_s.computeBoundingSphere(),_sphere$3.copy(_s.boundingSphere),_sphere$3.applyMatrix4(Ss),_sphere$3.radius+=Ms,va.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(Ss),_ray$2.copy(va.ray).applyMatrix4(_inverseMatrix$2);var Cs=Ms/((this.scale.x+this.scale.y+this.scale.z)/3),Ts=Cs*Cs;if(_s.isBufferGeometry){var Bs=_s.index,Ps=_s.attributes,Ls=Ps.position.array;if(Bs!==null)for(var Rs=Bs.array,$s=0,Fs=Rs.length;$s<Fs;$s++){var Os=Rs[$s];_position$1.fromArray(Ls,Os*3),testPoint(_position$1,Os,Ts,Ss,va,_a,this)}else for(var $s=0,Gs=Ls.length/3;$s<Gs;$s++)_position$1.fromArray(Ls,$s*3),testPoint(_position$1,$s,Ts,Ss,va,_a,this)}else for(var Ns=_s.vertices,$s=0,Gs=Ns.length;$s<Gs;$s++)testPoint(Ns[$s],$s,Ts,Ss,va,_a,this)}},updateMorphTargets:function(){var va=this.geometry,_a,_s,Ss;if(va.isBufferGeometry){var Ms=va.morphAttributes,Cs=Object.keys(Ms);if(Cs.length>0){var Ts=Ms[Cs[0]];if(Ts!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},_a=0,_s=Ts.length;_a<_s;_a++)Ss=Ts[_a].name||String(_a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ss]=_a}}else{var Bs=va.morphTargets;Bs!==void 0&&Bs.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(va,_a,_s,Ss,Ms,Cs,Ts){var Bs=_ray$2.distanceSqToPoint(va);if(Bs<_s){var Ps=new Vector3;_ray$2.closestPointToPoint(va,Ps),Ps.applyMatrix4(Ss);var Ls=Ms.ray.origin.distanceTo(Ps);if(Ls<Ms.near||Ls>Ms.far)return;Cs.push({distance:Ls,distanceToRay:Math.sqrt(Bs),point:Ps,index:_a,face:null,object:Ts})}}function VideoTexture(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps){Texture.call(this,va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps),this.format=Ts!==void 0?Ts:RGBFormat,this.minFilter=Cs!==void 0?Cs:LinearFilter,this.magFilter=Ms!==void 0?Ms:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var va=this.image;va.readyState>=va.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s){Texture.call(this,null,Cs,Ts,Bs,Ps,Ls,Ss,Ms,Rs,$s),this.image={width:_a,height:_s},this.mipmaps=va,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps){Texture.call(this,va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls){if(Ls=Ls!==void 0?Ls:DepthFormat,Ls!==DepthFormat&&Ls!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");_s===void 0&&Ls===DepthFormat&&(_s=UnsignedShortType),_s===void 0&&Ls===DepthStencilFormat&&(_s=UnsignedInt248Type),Texture.call(this,null,Ss,Ms,Cs,Ts,Bs,Ls,_s,Ps),this.image={width:va,height:_a},this.magFilter=Ts!==void 0?Ts:NearestFilter,this.minFilter=Bs!==void 0?Bs:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(va){BufferGeometry.call(this),this.type="WireframeGeometry";var _a=[],_s,Ss,Ms,Cs,Ts,Bs=[0,0],Ps={},Ls,Rs,$s,Fs,Os=["a","b","c"],Gs;if(va&&va.isGeometry){var Ns=va.faces;for(_s=0,Ms=Ns.length;_s<Ms;_s++){var Vs=Ns[_s];for(Ss=0;Ss<3;Ss++)Rs=Vs[Os[Ss]],$s=Vs[Os[(Ss+1)%3]],Bs[0]=Math.min(Rs,$s),Bs[1]=Math.max(Rs,$s),Fs=Bs[0]+","+Bs[1],Ps[Fs]===void 0&&(Ps[Fs]={index1:Bs[0],index2:Bs[1]})}for(Fs in Ps)Ls=Ps[Fs],Gs=va.vertices[Ls.index1],_a.push(Gs.x,Gs.y,Gs.z),Gs=va.vertices[Ls.index2],_a.push(Gs.x,Gs.y,Gs.z)}else if(va&&va.isBufferGeometry){var Ds,ks,Us,zs,Ws,qs,Zs,el;if(Gs=new Vector3,va.index!==null){for(Ds=va.attributes.position,ks=va.index,Us=va.groups,Us.length===0&&(Us=[{start:0,count:ks.count,materialIndex:0}]),Cs=0,Ts=Us.length;Cs<Ts;++Cs)for(zs=Us[Cs],Ws=zs.start,qs=zs.count,_s=Ws,Ms=Ws+qs;_s<Ms;_s+=3)for(Ss=0;Ss<3;Ss++)Rs=ks.getX(_s+Ss),$s=ks.getX(_s+(Ss+1)%3),Bs[0]=Math.min(Rs,$s),Bs[1]=Math.max(Rs,$s),Fs=Bs[0]+","+Bs[1],Ps[Fs]===void 0&&(Ps[Fs]={index1:Bs[0],index2:Bs[1]});for(Fs in Ps)Ls=Ps[Fs],Gs.fromBufferAttribute(Ds,Ls.index1),_a.push(Gs.x,Gs.y,Gs.z),Gs.fromBufferAttribute(Ds,Ls.index2),_a.push(Gs.x,Gs.y,Gs.z)}else for(Ds=va.attributes.position,_s=0,Ms=Ds.count/3;_s<Ms;_s++)for(Ss=0;Ss<3;Ss++)Zs=3*_s+Ss,Gs.fromBufferAttribute(Ds,Zs),_a.push(Gs.x,Gs.y,Gs.z),el=3*_s+(Ss+1)%3,Gs.fromBufferAttribute(Ds,el),_a.push(Gs.x,Gs.y,Gs.z)}this.setAttribute("position",new Float32BufferAttribute(_a,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(va,_a,_s){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:va,slices:_a,stacks:_s},this.fromBufferGeometry(new ParametricBufferGeometry(va,_a,_s)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(va,_a,_s){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:va,slices:_a,stacks:_s};var Ss=[],Ms=[],Cs=[],Ts=[],Bs=1e-5,Ps=new Vector3,Ls=new Vector3,Rs=new Vector3,$s=new Vector3,Fs=new Vector3,Os,Gs;va.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var Ns=_a+1;for(Os=0;Os<=_s;Os++){var Vs=Os/_s;for(Gs=0;Gs<=_a;Gs++){var Ds=Gs/_a;va(Ds,Vs,Ls),Ms.push(Ls.x,Ls.y,Ls.z),Ds-Bs>=0?(va(Ds-Bs,Vs,Rs),$s.subVectors(Ls,Rs)):(va(Ds+Bs,Vs,Rs),$s.subVectors(Rs,Ls)),Vs-Bs>=0?(va(Ds,Vs-Bs,Rs),Fs.subVectors(Ls,Rs)):(va(Ds,Vs+Bs,Rs),Fs.subVectors(Rs,Ls)),Ps.crossVectors($s,Fs).normalize(),Cs.push(Ps.x,Ps.y,Ps.z),Ts.push(Ds,Vs)}}for(Os=0;Os<_s;Os++)for(Gs=0;Gs<_a;Gs++){var ks=Os*Ns+Gs,Us=Os*Ns+Gs+1,zs=(Os+1)*Ns+Gs+1,Ws=(Os+1)*Ns+Gs;Ss.push(ks,Us,Ws),Ss.push(Us,zs,Ws)}this.setIndex(Ss),this.setAttribute("position",new Float32BufferAttribute(Ms,3)),this.setAttribute("normal",new Float32BufferAttribute(Cs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ts,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(va,_a,_s,Ss){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:va,indices:_a,radius:_s,detail:Ss},this.fromBufferGeometry(new PolyhedronBufferGeometry(va,_a,_s,Ss)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(va,_a,_s,Ss){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:va,indices:_a,radius:_s,detail:Ss},_s=_s||1,Ss=Ss||0;var Ms=[],Cs=[];Ts(Ss),Ps(_s),Ls(),this.setAttribute("position",new Float32BufferAttribute(Ms,3)),this.setAttribute("normal",new Float32BufferAttribute(Ms.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Cs,2)),Ss===0?this.computeVertexNormals():this.normalizeNormals();function Ts(Ds){for(var ks=new Vector3,Us=new Vector3,zs=new Vector3,Ws=0;Ws<_a.length;Ws+=3)Fs(_a[Ws+0],ks),Fs(_a[Ws+1],Us),Fs(_a[Ws+2],zs),Bs(ks,Us,zs,Ds)}function Bs(Ds,ks,Us,zs){var Ws=Math.pow(2,zs),qs=[],Zs,el;for(Zs=0;Zs<=Ws;Zs++){qs[Zs]=[];var Js=Ds.clone().lerp(Us,Zs/Ws),Hs=ks.clone().lerp(Us,Zs/Ws),Qs=Ws-Zs;for(el=0;el<=Qs;el++)el===0&&Zs===Ws?qs[Zs][el]=Js:qs[Zs][el]=Js.clone().lerp(Hs,el/Qs)}for(Zs=0;Zs<Ws;Zs++)for(el=0;el<2*(Ws-Zs)-1;el++){var js=Math.floor(el/2);el%2===0?($s(qs[Zs][js+1]),$s(qs[Zs+1][js]),$s(qs[Zs][js])):($s(qs[Zs][js+1]),$s(qs[Zs+1][js+1]),$s(qs[Zs+1][js]))}}function Ps(Ds){for(var ks=new Vector3,Us=0;Us<Ms.length;Us+=3)ks.x=Ms[Us+0],ks.y=Ms[Us+1],ks.z=Ms[Us+2],ks.normalize().multiplyScalar(Ds),Ms[Us+0]=ks.x,Ms[Us+1]=ks.y,Ms[Us+2]=ks.z}function Ls(){for(var Ds=new Vector3,ks=0;ks<Ms.length;ks+=3){Ds.x=Ms[ks+0],Ds.y=Ms[ks+1],Ds.z=Ms[ks+2];var Us=Ns(Ds)/2/Math.PI+.5,zs=Vs(Ds)/Math.PI+.5;Cs.push(Us,1-zs)}Os(),Rs()}function Rs(){for(var Ds=0;Ds<Cs.length;Ds+=6){var ks=Cs[Ds+0],Us=Cs[Ds+2],zs=Cs[Ds+4],Ws=Math.max(ks,Us,zs),qs=Math.min(ks,Us,zs);Ws>.9&&qs<.1&&(ks<.2&&(Cs[Ds+0]+=1),Us<.2&&(Cs[Ds+2]+=1),zs<.2&&(Cs[Ds+4]+=1))}}function $s(Ds){Ms.push(Ds.x,Ds.y,Ds.z)}function Fs(Ds,ks){var Us=Ds*3;ks.x=va[Us+0],ks.y=va[Us+1],ks.z=va[Us+2]}function Os(){for(var Ds=new Vector3,ks=new Vector3,Us=new Vector3,zs=new Vector3,Ws=new Vector2,qs=new Vector2,Zs=new Vector2,el=0,Js=0;el<Ms.length;el+=9,Js+=6){Ds.set(Ms[el+0],Ms[el+1],Ms[el+2]),ks.set(Ms[el+3],Ms[el+4],Ms[el+5]),Us.set(Ms[el+6],Ms[el+7],Ms[el+8]),Ws.set(Cs[Js+0],Cs[Js+1]),qs.set(Cs[Js+2],Cs[Js+3]),Zs.set(Cs[Js+4],Cs[Js+5]),zs.copy(Ds).add(ks).add(Us).divideScalar(3);var Hs=Ns(zs);Gs(Ws,Js+0,Ds,Hs),Gs(qs,Js+2,ks,Hs),Gs(Zs,Js+4,Us,Hs)}}function Gs(Ds,ks,Us,zs){zs<0&&Ds.x===1&&(Cs[ks]=Ds.x-1),Us.x===0&&Us.z===0&&(Cs[ks]=zs/2/Math.PI+.5)}function Ns(Ds){return Math.atan2(Ds.z,-Ds.x)}function Vs(Ds){return Math.atan2(-Ds.y,Math.sqrt(Ds.x*Ds.x+Ds.z*Ds.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(va,_a){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:va,detail:_a},this.fromBufferGeometry(new TetrahedronBufferGeometry(va,_a)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(va,_a){var _s=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Ss=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,_s,Ss,va,_a),this.type="TetrahedronBufferGeometry",this.parameters={radius:va,detail:_a}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(va,_a){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:va,detail:_a},this.fromBufferGeometry(new OctahedronBufferGeometry(va,_a)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(va,_a){var _s=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Ss=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,_s,Ss,va,_a),this.type="OctahedronBufferGeometry",this.parameters={radius:va,detail:_a}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(va,_a){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:va,detail:_a},this.fromBufferGeometry(new IcosahedronBufferGeometry(va,_a)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(va,_a){var _s=(1+Math.sqrt(5))/2,Ss=[-1,_s,0,1,_s,0,-1,-_s,0,1,-_s,0,0,-1,_s,0,1,_s,0,-1,-_s,0,1,-_s,_s,0,-1,_s,0,1,-_s,0,-1,-_s,0,1],Ms=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,Ss,Ms,va,_a),this.type="IcosahedronBufferGeometry",this.parameters={radius:va,detail:_a}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(va,_a){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:va,detail:_a},this.fromBufferGeometry(new DodecahedronBufferGeometry(va,_a)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(va,_a){var _s=(1+Math.sqrt(5))/2,Ss=1/_s,Ms=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Ss,-_s,0,-Ss,_s,0,Ss,-_s,0,Ss,_s,-Ss,-_s,0,-Ss,_s,0,Ss,-_s,0,Ss,_s,0,-_s,0,-Ss,_s,0,-Ss,-_s,0,Ss,_s,0,Ss],Cs=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,Ms,Cs,va,_a),this.type="DodecahedronBufferGeometry",this.parameters={radius:va,detail:_a}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(va,_a,_s,Ss,Ms,Cs){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:va,tubularSegments:_a,radius:_s,radialSegments:Ss,closed:Ms},Cs!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Ts=new TubeBufferGeometry(va,_a,_s,Ss,Ms);this.tangents=Ts.tangents,this.normals=Ts.normals,this.binormals=Ts.binormals,this.fromBufferGeometry(Ts),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(va,_a,_s,Ss,Ms){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:va,tubularSegments:_a,radius:_s,radialSegments:Ss,closed:Ms},_a=_a||64,_s=_s||1,Ss=Ss||8,Ms=Ms||!1;var Cs=va.computeFrenetFrames(_a,Ms);this.tangents=Cs.tangents,this.normals=Cs.normals,this.binormals=Cs.binormals;var Ts=new Vector3,Bs=new Vector3,Ps=new Vector2,Ls=new Vector3,Rs,$s,Fs=[],Os=[],Gs=[],Ns=[];Vs(),this.setIndex(Ns),this.setAttribute("position",new Float32BufferAttribute(Fs,3)),this.setAttribute("normal",new Float32BufferAttribute(Os,3)),this.setAttribute("uv",new Float32BufferAttribute(Gs,2));function Vs(){for(Rs=0;Rs<_a;Rs++)Ds(Rs);Ds(Ms===!1?_a:0),Us(),ks()}function Ds(zs){Ls=va.getPointAt(zs/_a,Ls);var Ws=Cs.normals[zs],qs=Cs.binormals[zs];for($s=0;$s<=Ss;$s++){var Zs=$s/Ss*Math.PI*2,el=Math.sin(Zs),Js=-Math.cos(Zs);Bs.x=Js*Ws.x+el*qs.x,Bs.y=Js*Ws.y+el*qs.y,Bs.z=Js*Ws.z+el*qs.z,Bs.normalize(),Os.push(Bs.x,Bs.y,Bs.z),Ts.x=Ls.x+_s*Bs.x,Ts.y=Ls.y+_s*Bs.y,Ts.z=Ls.z+_s*Bs.z,Fs.push(Ts.x,Ts.y,Ts.z)}}function ks(){for($s=1;$s<=_a;$s++)for(Rs=1;Rs<=Ss;Rs++){var zs=(Ss+1)*($s-1)+(Rs-1),Ws=(Ss+1)*$s+(Rs-1),qs=(Ss+1)*$s+Rs,Zs=(Ss+1)*($s-1)+Rs;Ns.push(zs,Ws,Zs),Ns.push(Ws,qs,Zs)}}function Us(){for(Rs=0;Rs<=_a;Rs++)for($s=0;$s<=Ss;$s++)Ps.x=Rs/_a,Ps.y=$s/Ss,Gs.push(Ps.x,Ps.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var va=BufferGeometry.prototype.toJSON.call(this);return va.path=this.parameters.path.toJSON(),va};function TorusKnotGeometry(va,_a,_s,Ss,Ms,Cs,Ts){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:va,tube:_a,tubularSegments:_s,radialSegments:Ss,p:Ms,q:Cs},Ts!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(va,_a,_s,Ss,Ms,Cs)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(va,_a,_s,Ss,Ms,Cs){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:va,tube:_a,tubularSegments:_s,radialSegments:Ss,p:Ms,q:Cs},va=va||1,_a=_a||.4,_s=Math.floor(_s)||64,Ss=Math.floor(Ss)||8,Ms=Ms||2,Cs=Cs||3;var Ts=[],Bs=[],Ps=[],Ls=[],Rs,$s,Fs=new Vector3,Os=new Vector3,Gs=new Vector3,Ns=new Vector3,Vs=new Vector3,Ds=new Vector3,ks=new Vector3;for(Rs=0;Rs<=_s;++Rs){var Us=Rs/_s*Ms*Math.PI*2;for(Qs(Us,Ms,Cs,va,Gs),Qs(Us+.01,Ms,Cs,va,Ns),Ds.subVectors(Ns,Gs),ks.addVectors(Ns,Gs),Vs.crossVectors(Ds,ks),ks.crossVectors(Vs,Ds),Vs.normalize(),ks.normalize(),$s=0;$s<=Ss;++$s){var zs=$s/Ss*Math.PI*2,Ws=-_a*Math.cos(zs),qs=_a*Math.sin(zs);Fs.x=Gs.x+(Ws*ks.x+qs*Vs.x),Fs.y=Gs.y+(Ws*ks.y+qs*Vs.y),Fs.z=Gs.z+(Ws*ks.z+qs*Vs.z),Bs.push(Fs.x,Fs.y,Fs.z),Os.subVectors(Fs,Gs).normalize(),Ps.push(Os.x,Os.y,Os.z),Ls.push(Rs/_s),Ls.push($s/Ss)}}for($s=1;$s<=_s;$s++)for(Rs=1;Rs<=Ss;Rs++){var Zs=(Ss+1)*($s-1)+(Rs-1),el=(Ss+1)*$s+(Rs-1),Js=(Ss+1)*$s+Rs,Hs=(Ss+1)*($s-1)+Rs;Ts.push(Zs,el,Hs),Ts.push(el,Js,Hs)}this.setIndex(Ts),this.setAttribute("position",new Float32BufferAttribute(Bs,3)),this.setAttribute("normal",new Float32BufferAttribute(Ps,3)),this.setAttribute("uv",new Float32BufferAttribute(Ls,2));function Qs(js,Ks,Xs,Ys,rl){var tl=Math.cos(js),il=Math.sin(js),ll=Xs/Ks*js,cl=Math.cos(ll);rl.x=Ys*(2+cl)*.5*tl,rl.y=Ys*(2+cl)*il*.5,rl.z=Ys*Math.sin(ll)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(va,_a,_s,Ss,Ms){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:va,tube:_a,radialSegments:_s,tubularSegments:Ss,arc:Ms},this.fromBufferGeometry(new TorusBufferGeometry(va,_a,_s,Ss,Ms)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(va,_a,_s,Ss,Ms){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:va,tube:_a,radialSegments:_s,tubularSegments:Ss,arc:Ms},va=va||1,_a=_a||.4,_s=Math.floor(_s)||8,Ss=Math.floor(Ss)||6,Ms=Ms||Math.PI*2;var Cs=[],Ts=[],Bs=[],Ps=[],Ls=new Vector3,Rs=new Vector3,$s=new Vector3,Fs,Os;for(Fs=0;Fs<=_s;Fs++)for(Os=0;Os<=Ss;Os++){var Gs=Os/Ss*Ms,Ns=Fs/_s*Math.PI*2;Rs.x=(va+_a*Math.cos(Ns))*Math.cos(Gs),Rs.y=(va+_a*Math.cos(Ns))*Math.sin(Gs),Rs.z=_a*Math.sin(Ns),Ts.push(Rs.x,Rs.y,Rs.z),Ls.x=va*Math.cos(Gs),Ls.y=va*Math.sin(Gs),$s.subVectors(Rs,Ls).normalize(),Bs.push($s.x,$s.y,$s.z),Ps.push(Os/Ss),Ps.push(Fs/_s)}for(Fs=1;Fs<=_s;Fs++)for(Os=1;Os<=Ss;Os++){var Vs=(Ss+1)*Fs+Os-1,Ds=(Ss+1)*(Fs-1)+Os-1,ks=(Ss+1)*(Fs-1)+Os,Us=(Ss+1)*Fs+Os;Cs.push(Vs,Ds,Us),Cs.push(Ds,ks,Us)}this.setIndex(Cs),this.setAttribute("position",new Float32BufferAttribute(Ts,3)),this.setAttribute("normal",new Float32BufferAttribute(Bs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ps,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(va,_a,_s){_s=_s||2;var Ss=_a&&_a.length,Ms=Ss?_a[0]*_s:va.length,Cs=linkedList(va,0,Ms,_s,!0),Ts=[];if(!Cs||Cs.next===Cs.prev)return Ts;var Bs,Ps,Ls,Rs,$s,Fs,Os;if(Ss&&(Cs=eliminateHoles(va,_a,Cs,_s)),va.length>80*_s){Bs=Ls=va[0],Ps=Rs=va[1];for(var Gs=_s;Gs<Ms;Gs+=_s)$s=va[Gs],Fs=va[Gs+1],$s<Bs&&(Bs=$s),Fs<Ps&&(Ps=Fs),$s>Ls&&(Ls=$s),Fs>Rs&&(Rs=Fs);Os=Math.max(Ls-Bs,Rs-Ps),Os=Os!==0?1/Os:0}return earcutLinked(Cs,Ts,_s,Bs,Ps,Os),Ts}};function linkedList(va,_a,_s,Ss,Ms){var Cs,Ts;if(Ms===signedArea(va,_a,_s,Ss)>0)for(Cs=_a;Cs<_s;Cs+=Ss)Ts=insertNode(Cs,va[Cs],va[Cs+1],Ts);else for(Cs=_s-Ss;Cs>=_a;Cs-=Ss)Ts=insertNode(Cs,va[Cs],va[Cs+1],Ts);return Ts&&equals(Ts,Ts.next)&&(removeNode(Ts),Ts=Ts.next),Ts}function filterPoints(va,_a){if(!va)return va;_a||(_a=va);var _s=va,Ss;do if(Ss=!1,!_s.steiner&&(equals(_s,_s.next)||area(_s.prev,_s,_s.next)===0)){if(removeNode(_s),_s=_a=_s.prev,_s===_s.next)break;Ss=!0}else _s=_s.next;while(Ss||_s!==_a);return _a}function earcutLinked(va,_a,_s,Ss,Ms,Cs,Ts){if(!!va){!Ts&&Cs&&indexCurve(va,Ss,Ms,Cs);for(var Bs=va,Ps,Ls;va.prev!==va.next;){if(Ps=va.prev,Ls=va.next,Cs?isEarHashed(va,Ss,Ms,Cs):isEar(va)){_a.push(Ps.i/_s),_a.push(va.i/_s),_a.push(Ls.i/_s),removeNode(va),va=Ls.next,Bs=Ls.next;continue}if(va=Ls,va===Bs){Ts?Ts===1?(va=cureLocalIntersections(filterPoints(va),_a,_s),earcutLinked(va,_a,_s,Ss,Ms,Cs,2)):Ts===2&&splitEarcut(va,_a,_s,Ss,Ms,Cs):earcutLinked(filterPoints(va),_a,_s,Ss,Ms,Cs,1);break}}}}function isEar(va){var _a=va.prev,_s=va,Ss=va.next;if(area(_a,_s,Ss)>=0)return!1;for(var Ms=va.next.next;Ms!==va.prev;){if(pointInTriangle(_a.x,_a.y,_s.x,_s.y,Ss.x,Ss.y,Ms.x,Ms.y)&&area(Ms.prev,Ms,Ms.next)>=0)return!1;Ms=Ms.next}return!0}function isEarHashed(va,_a,_s,Ss){var Ms=va.prev,Cs=va,Ts=va.next;if(area(Ms,Cs,Ts)>=0)return!1;for(var Bs=Ms.x<Cs.x?Ms.x<Ts.x?Ms.x:Ts.x:Cs.x<Ts.x?Cs.x:Ts.x,Ps=Ms.y<Cs.y?Ms.y<Ts.y?Ms.y:Ts.y:Cs.y<Ts.y?Cs.y:Ts.y,Ls=Ms.x>Cs.x?Ms.x>Ts.x?Ms.x:Ts.x:Cs.x>Ts.x?Cs.x:Ts.x,Rs=Ms.y>Cs.y?Ms.y>Ts.y?Ms.y:Ts.y:Cs.y>Ts.y?Cs.y:Ts.y,$s=zOrder(Bs,Ps,_a,_s,Ss),Fs=zOrder(Ls,Rs,_a,_s,Ss),Os=va.prevZ,Gs=va.nextZ;Os&&Os.z>=$s&&Gs&&Gs.z<=Fs;){if(Os!==va.prev&&Os!==va.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Os.x,Os.y)&&area(Os.prev,Os,Os.next)>=0||(Os=Os.prevZ,Gs!==va.prev&&Gs!==va.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Gs.x,Gs.y)&&area(Gs.prev,Gs,Gs.next)>=0))return!1;Gs=Gs.nextZ}for(;Os&&Os.z>=$s;){if(Os!==va.prev&&Os!==va.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Os.x,Os.y)&&area(Os.prev,Os,Os.next)>=0)return!1;Os=Os.prevZ}for(;Gs&&Gs.z<=Fs;){if(Gs!==va.prev&&Gs!==va.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Gs.x,Gs.y)&&area(Gs.prev,Gs,Gs.next)>=0)return!1;Gs=Gs.nextZ}return!0}function cureLocalIntersections(va,_a,_s){var Ss=va;do{var Ms=Ss.prev,Cs=Ss.next.next;!equals(Ms,Cs)&&intersects(Ms,Ss,Ss.next,Cs)&&locallyInside(Ms,Cs)&&locallyInside(Cs,Ms)&&(_a.push(Ms.i/_s),_a.push(Ss.i/_s),_a.push(Cs.i/_s),removeNode(Ss),removeNode(Ss.next),Ss=va=Cs),Ss=Ss.next}while(Ss!==va);return filterPoints(Ss)}function splitEarcut(va,_a,_s,Ss,Ms,Cs){var Ts=va;do{for(var Bs=Ts.next.next;Bs!==Ts.prev;){if(Ts.i!==Bs.i&&isValidDiagonal(Ts,Bs)){var Ps=splitPolygon(Ts,Bs);Ts=filterPoints(Ts,Ts.next),Ps=filterPoints(Ps,Ps.next),earcutLinked(Ts,_a,_s,Ss,Ms,Cs),earcutLinked(Ps,_a,_s,Ss,Ms,Cs);return}Bs=Bs.next}Ts=Ts.next}while(Ts!==va)}function eliminateHoles(va,_a,_s,Ss){var Ms=[],Cs,Ts,Bs,Ps,Ls;for(Cs=0,Ts=_a.length;Cs<Ts;Cs++)Bs=_a[Cs]*Ss,Ps=Cs<Ts-1?_a[Cs+1]*Ss:va.length,Ls=linkedList(va,Bs,Ps,Ss,!1),Ls===Ls.next&&(Ls.steiner=!0),Ms.push(getLeftmost(Ls));for(Ms.sort(compareX),Cs=0;Cs<Ms.length;Cs++)eliminateHole(Ms[Cs],_s),_s=filterPoints(_s,_s.next);return _s}function compareX(va,_a){return va.x-_a.x}function eliminateHole(va,_a){if(_a=findHoleBridge(va,_a),_a){var _s=splitPolygon(_a,va);filterPoints(_a,_a.next),filterPoints(_s,_s.next)}}function findHoleBridge(va,_a){var _s=_a,Ss=va.x,Ms=va.y,Cs=-1/0,Ts;do{if(Ms<=_s.y&&Ms>=_s.next.y&&_s.next.y!==_s.y){var Bs=_s.x+(Ms-_s.y)*(_s.next.x-_s.x)/(_s.next.y-_s.y);if(Bs<=Ss&&Bs>Cs){if(Cs=Bs,Bs===Ss){if(Ms===_s.y)return _s;if(Ms===_s.next.y)return _s.next}Ts=_s.x<_s.next.x?_s:_s.next}}_s=_s.next}while(_s!==_a);if(!Ts)return null;if(Ss===Cs)return Ts;var Ps=Ts,Ls=Ts.x,Rs=Ts.y,$s=1/0,Fs;_s=Ts;do Ss>=_s.x&&_s.x>=Ls&&Ss!==_s.x&&pointInTriangle(Ms<Rs?Ss:Cs,Ms,Ls,Rs,Ms<Rs?Cs:Ss,Ms,_s.x,_s.y)&&(Fs=Math.abs(Ms-_s.y)/(Ss-_s.x),locallyInside(_s,va)&&(Fs<$s||Fs===$s&&(_s.x>Ts.x||_s.x===Ts.x&&sectorContainsSector(Ts,_s)))&&(Ts=_s,$s=Fs)),_s=_s.next;while(_s!==Ps);return Ts}function sectorContainsSector(va,_a){return area(va.prev,va,_a.prev)<0&&area(_a.next,va,va.next)<0}function indexCurve(va,_a,_s,Ss){var Ms=va;do Ms.z===null&&(Ms.z=zOrder(Ms.x,Ms.y,_a,_s,Ss)),Ms.prevZ=Ms.prev,Ms.nextZ=Ms.next,Ms=Ms.next;while(Ms!==va);Ms.prevZ.nextZ=null,Ms.prevZ=null,sortLinked(Ms)}function sortLinked(va){var _a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls=1;do{for(_s=va,va=null,Cs=null,Ts=0;_s;){for(Ts++,Ss=_s,Bs=0,_a=0;_a<Ls&&(Bs++,Ss=Ss.nextZ,!!Ss);_a++);for(Ps=Ls;Bs>0||Ps>0&&Ss;)Bs!==0&&(Ps===0||!Ss||_s.z<=Ss.z)?(Ms=_s,_s=_s.nextZ,Bs--):(Ms=Ss,Ss=Ss.nextZ,Ps--),Cs?Cs.nextZ=Ms:va=Ms,Ms.prevZ=Cs,Cs=Ms;_s=Ss}Cs.nextZ=null,Ls*=2}while(Ts>1);return va}function zOrder(va,_a,_s,Ss,Ms){return va=32767*(va-_s)*Ms,_a=32767*(_a-Ss)*Ms,va=(va|va<<8)&16711935,va=(va|va<<4)&252645135,va=(va|va<<2)&858993459,va=(va|va<<1)&1431655765,_a=(_a|_a<<8)&16711935,_a=(_a|_a<<4)&252645135,_a=(_a|_a<<2)&858993459,_a=(_a|_a<<1)&1431655765,va|_a<<1}function getLeftmost(va){var _a=va,_s=va;do(_a.x<_s.x||_a.x===_s.x&&_a.y<_s.y)&&(_s=_a),_a=_a.next;while(_a!==va);return _s}function pointInTriangle(va,_a,_s,Ss,Ms,Cs,Ts,Bs){return(Ms-Ts)*(_a-Bs)-(va-Ts)*(Cs-Bs)>=0&&(va-Ts)*(Ss-Bs)-(_s-Ts)*(_a-Bs)>=0&&(_s-Ts)*(Cs-Bs)-(Ms-Ts)*(Ss-Bs)>=0}function isValidDiagonal(va,_a){return va.next.i!==_a.i&&va.prev.i!==_a.i&&!intersectsPolygon(va,_a)&&(locallyInside(va,_a)&&locallyInside(_a,va)&&middleInside(va,_a)&&(area(va.prev,va,_a.prev)||area(va,_a.prev,_a))||equals(va,_a)&&area(va.prev,va,va.next)>0&&area(_a.prev,_a,_a.next)>0)}function area(va,_a,_s){return(_a.y-va.y)*(_s.x-_a.x)-(_a.x-va.x)*(_s.y-_a.y)}function equals(va,_a){return va.x===_a.x&&va.y===_a.y}function intersects(va,_a,_s,Ss){var Ms=sign(area(va,_a,_s)),Cs=sign(area(va,_a,Ss)),Ts=sign(area(_s,Ss,va)),Bs=sign(area(_s,Ss,_a));return!!(Ms!==Cs&&Ts!==Bs||Ms===0&&onSegment(va,_s,_a)||Cs===0&&onSegment(va,Ss,_a)||Ts===0&&onSegment(_s,va,Ss)||Bs===0&&onSegment(_s,_a,Ss))}function onSegment(va,_a,_s){return _a.x<=Math.max(va.x,_s.x)&&_a.x>=Math.min(va.x,_s.x)&&_a.y<=Math.max(va.y,_s.y)&&_a.y>=Math.min(va.y,_s.y)}function sign(va){return va>0?1:va<0?-1:0}function intersectsPolygon(va,_a){var _s=va;do{if(_s.i!==va.i&&_s.next.i!==va.i&&_s.i!==_a.i&&_s.next.i!==_a.i&&intersects(_s,_s.next,va,_a))return!0;_s=_s.next}while(_s!==va);return!1}function locallyInside(va,_a){return area(va.prev,va,va.next)<0?area(va,_a,va.next)>=0&&area(va,va.prev,_a)>=0:area(va,_a,va.prev)<0||area(va,va.next,_a)<0}function middleInside(va,_a){var _s=va,Ss=!1,Ms=(va.x+_a.x)/2,Cs=(va.y+_a.y)/2;do _s.y>Cs!=_s.next.y>Cs&&_s.next.y!==_s.y&&Ms<(_s.next.x-_s.x)*(Cs-_s.y)/(_s.next.y-_s.y)+_s.x&&(Ss=!Ss),_s=_s.next;while(_s!==va);return Ss}function splitPolygon(va,_a){var _s=new Node(va.i,va.x,va.y),Ss=new Node(_a.i,_a.x,_a.y),Ms=va.next,Cs=_a.prev;return va.next=_a,_a.prev=va,_s.next=Ms,Ms.prev=_s,Ss.next=_s,_s.prev=Ss,Cs.next=Ss,Ss.prev=Cs,Ss}function insertNode(va,_a,_s,Ss){var Ms=new Node(va,_a,_s);return Ss?(Ms.next=Ss.next,Ms.prev=Ss,Ss.next.prev=Ms,Ss.next=Ms):(Ms.prev=Ms,Ms.next=Ms),Ms}function removeNode(va){va.next.prev=va.prev,va.prev.next=va.next,va.prevZ&&(va.prevZ.nextZ=va.nextZ),va.nextZ&&(va.nextZ.prevZ=va.prevZ)}function Node(va,_a,_s){this.i=va,this.x=_a,this.y=_s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(va,_a,_s,Ss){for(var Ms=0,Cs=_a,Ts=_s-Ss;Cs<_s;Cs+=Ss)Ms+=(va[Ts]-va[Cs])*(va[Cs+1]+va[Ts+1]),Ts=Cs;return Ms}var ShapeUtils={area:function(va){for(var _a=va.length,_s=0,Ss=_a-1,Ms=0;Ms<_a;Ss=Ms++)_s+=va[Ss].x*va[Ms].y-va[Ms].x*va[Ss].y;return _s*.5},isClockWise:function(va){return ShapeUtils.area(va)<0},triangulateShape:function(va,_a){var _s=[],Ss=[],Ms=[];removeDupEndPts(va),addContour(_s,va);var Cs=va.length;_a.forEach(removeDupEndPts);for(var Ts=0;Ts<_a.length;Ts++)Ss.push(Cs),Cs+=_a[Ts].length,addContour(_s,_a[Ts]);for(var Bs=Earcut.triangulate(_s,Ss),Ts=0;Ts<Bs.length;Ts+=3)Ms.push(Bs.slice(Ts,Ts+3));return Ms}};function removeDupEndPts(va){var _a=va.length;_a>2&&va[_a-1].equals(va[0])&&va.pop()}function addContour(va,_a){for(var _s=0;_s<_a.length;_s++)va.push(_a[_s].x),va.push(_a[_s].y)}function ExtrudeGeometry(va,_a){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:va,options:_a},this.fromBufferGeometry(new ExtrudeBufferGeometry(va,_a)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var va=Geometry.prototype.toJSON.call(this),_a=this.parameters.shapes,_s=this.parameters.options;return toJSON(_a,_s,va)};function ExtrudeBufferGeometry(va,_a){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:va,options:_a},va=Array.isArray(va)?va:[va];for(var _s=this,Ss=[],Ms=[],Cs=0,Ts=va.length;Cs<Ts;Cs++){var Bs=va[Cs];Ps(Bs)}this.setAttribute("position",new Float32BufferAttribute(Ss,3)),this.setAttribute("uv",new Float32BufferAttribute(Ms,2)),this.computeVertexNormals();function Ps(Ls){var Rs=[],$s=_a.curveSegments!==void 0?_a.curveSegments:12,Fs=_a.steps!==void 0?_a.steps:1,Os=_a.depth!==void 0?_a.depth:100,Gs=_a.bevelEnabled!==void 0?_a.bevelEnabled:!0,Ns=_a.bevelThickness!==void 0?_a.bevelThickness:6,Vs=_a.bevelSize!==void 0?_a.bevelSize:Ns-2,Ds=_a.bevelOffset!==void 0?_a.bevelOffset:0,ks=_a.bevelSegments!==void 0?_a.bevelSegments:3,Us=_a.extrudePath,zs=_a.UVGenerator!==void 0?_a.UVGenerator:WorldUVGenerator;_a.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Os=_a.amount);var Ws,qs=!1,Zs,el,Js,Hs;Us&&(Ws=Us.getSpacedPoints(Fs),qs=!0,Gs=!1,Zs=Us.computeFrenetFrames(Fs,!1),el=new Vector3,Js=new Vector3,Hs=new Vector3),Gs||(ks=0,Ns=0,Vs=0,Ds=0);var Qs,js,Ks,Xs=Ls.extractPoints($s),Ys=Xs.shape,rl=Xs.holes,tl=!ShapeUtils.isClockWise(Ys);if(tl)for(Ys=Ys.reverse(),js=0,Ks=rl.length;js<Ks;js++)Qs=rl[js],ShapeUtils.isClockWise(Qs)&&(rl[js]=Qs.reverse());var il=ShapeUtils.triangulateShape(Ys,rl),ll=Ys;for(js=0,Ks=rl.length;js<Ks;js++)Qs=rl[js],Ys=Ys.concat(Qs);function cl(Ul,Yl,Hl){return Yl||console.error("THREE.ExtrudeGeometry: vec does not exist"),Yl.clone().multiplyScalar(Hl).add(Ul)}var al,dl,yl,xl,wl,Al=Ys.length,bl,Bl=il.length;function Cl(Ul,Yl,Hl){var Dl,gl,ql,Xl=Ul.x-Yl.x,uu=Ul.y-Yl.y,Zl=Hl.x-Ul.x,hu=Hl.y-Ul.y,vu=Xl*Xl+uu*uu,mu=Xl*hu-uu*Zl;if(Math.abs(mu)>Number.EPSILON){var bu=Math.sqrt(vu),du=Math.sqrt(Zl*Zl+hu*hu),_u=Yl.x-uu/bu,wu=Yl.y+Xl/bu,xu=Hl.x-hu/du,Iu=Hl.y+Zl/du,Gu=((xu-_u)*hu-(Iu-wu)*Zl)/(Xl*hu-uu*Zl);Dl=_u+Xl*Gu-Ul.x,gl=wu+uu*Gu-Ul.y;var Uu=Dl*Dl+gl*gl;if(Uu<=2)return new Vector2(Dl,gl);ql=Math.sqrt(Uu/2)}else{var hl=!1;Xl>Number.EPSILON?Zl>Number.EPSILON&&(hl=!0):Xl<-Number.EPSILON?Zl<-Number.EPSILON&&(hl=!0):Math.sign(uu)===Math.sign(hu)&&(hl=!0),hl?(Dl=-uu,gl=Xl,ql=Math.sqrt(vu)):(Dl=Xl,gl=uu,ql=Math.sqrt(vu/2))}return new Vector2(Dl/ql,gl/ql)}for(var Sl=[],El=0,Rl=ll.length,Fl=Rl-1,jl=El+1;El<Rl;El++,Fl++,jl++)Fl===Rl&&(Fl=0),jl===Rl&&(jl=0),Sl[El]=Cl(ll[El],ll[Fl],ll[jl]);var Vl=[],Wl,ul=Sl.concat();for(js=0,Ks=rl.length;js<Ks;js++){for(Qs=rl[js],Wl=[],El=0,Rl=Qs.length,Fl=Rl-1,jl=El+1;El<Rl;El++,Fl++,jl++)Fl===Rl&&(Fl=0),jl===Rl&&(jl=0),Wl[El]=Cl(Qs[El],Qs[Fl],Qs[jl]);Vl.push(Wl),ul=ul.concat(Wl)}for(al=0;al<ks;al++){for(yl=al/ks,xl=Ns*Math.cos(yl*Math.PI/2),dl=Vs*Math.sin(yl*Math.PI/2)+Ds,El=0,Rl=ll.length;El<Rl;El++)wl=cl(ll[El],Sl[El],dl),zl(wl.x,wl.y,-xl);for(js=0,Ks=rl.length;js<Ks;js++)for(Qs=rl[js],Wl=Vl[js],El=0,Rl=Qs.length;El<Rl;El++)wl=cl(Qs[El],Wl[El],dl),zl(wl.x,wl.y,-xl)}for(dl=Vs+Ds,El=0;El<Al;El++)wl=Gs?cl(Ys[El],ul[El],dl):Ys[El],qs?(Js.copy(Zs.normals[0]).multiplyScalar(wl.x),el.copy(Zs.binormals[0]).multiplyScalar(wl.y),Hs.copy(Ws[0]).add(Js).add(el),zl(Hs.x,Hs.y,Hs.z)):zl(wl.x,wl.y,0);var pl;for(pl=1;pl<=Fs;pl++)for(El=0;El<Al;El++)wl=Gs?cl(Ys[El],ul[El],dl):Ys[El],qs?(Js.copy(Zs.normals[pl]).multiplyScalar(wl.x),el.copy(Zs.binormals[pl]).multiplyScalar(wl.y),Hs.copy(Ws[pl]).add(Js).add(el),zl(Hs.x,Hs.y,Hs.z)):zl(wl.x,wl.y,Os/Fs*pl);for(al=ks-1;al>=0;al--){for(yl=al/ks,xl=Ns*Math.cos(yl*Math.PI/2),dl=Vs*Math.sin(yl*Math.PI/2)+Ds,El=0,Rl=ll.length;El<Rl;El++)wl=cl(ll[El],Sl[El],dl),zl(wl.x,wl.y,Os+xl);for(js=0,Ks=rl.length;js<Ks;js++)for(Qs=rl[js],Wl=Vl[js],El=0,Rl=Qs.length;El<Rl;El++)wl=cl(Qs[El],Wl[El],dl),qs?zl(wl.x,wl.y+Ws[Fs-1].y,Ws[Fs-1].x+xl):zl(wl.x,wl.y,Os+xl)}kl(),$l();function kl(){var Ul=Ss.length/3;if(Gs){var Yl=0,Hl=Al*Yl;for(El=0;El<Bl;El++)bl=il[El],Nl(bl[2]+Hl,bl[1]+Hl,bl[0]+Hl);for(Yl=Fs+ks*2,Hl=Al*Yl,El=0;El<Bl;El++)bl=il[El],Nl(bl[0]+Hl,bl[1]+Hl,bl[2]+Hl)}else{for(El=0;El<Bl;El++)bl=il[El],Nl(bl[2],bl[1],bl[0]);for(El=0;El<Bl;El++)bl=il[El],Nl(bl[0]+Al*Fs,bl[1]+Al*Fs,bl[2]+Al*Fs)}_s.addGroup(Ul,Ss.length/3-Ul,0)}function $l(){var Ul=Ss.length/3,Yl=0;for(Ql(ll,Yl),Yl+=ll.length,js=0,Ks=rl.length;js<Ks;js++)Qs=rl[js],Ql(Qs,Yl),Yl+=Qs.length;_s.addGroup(Ul,Ss.length/3-Ul,1)}function Ql(Ul,Yl){var Hl,Dl;for(El=Ul.length;--El>=0;){Hl=El,Dl=El-1,Dl<0&&(Dl=Ul.length-1);var gl=0,ql=Fs+ks*2;for(gl=0;gl<ql;gl++){var Xl=Al*gl,uu=Al*(gl+1),Zl=Yl+Hl+Xl,hu=Yl+Dl+Xl,vu=Yl+Dl+uu,mu=Yl+Hl+uu;su(Zl,hu,vu,mu)}}}function zl(Ul,Yl,Hl){Rs.push(Ul),Rs.push(Yl),Rs.push(Hl)}function Nl(Ul,Yl,Hl){ru(Ul),ru(Yl),ru(Hl);var Dl=Ss.length/3,gl=zs.generateTopUV(_s,Ss,Dl-3,Dl-2,Dl-1);nu(gl[0]),nu(gl[1]),nu(gl[2])}function su(Ul,Yl,Hl,Dl){ru(Ul),ru(Yl),ru(Dl),ru(Yl),ru(Hl),ru(Dl);var gl=Ss.length/3,ql=zs.generateSideWallUV(_s,Ss,gl-6,gl-3,gl-2,gl-1);nu(ql[0]),nu(ql[1]),nu(ql[3]),nu(ql[1]),nu(ql[2]),nu(ql[3])}function ru(Ul){Ss.push(Rs[Ul*3+0]),Ss.push(Rs[Ul*3+1]),Ss.push(Rs[Ul*3+2])}function nu(Ul){Ms.push(Ul.x),Ms.push(Ul.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var va=BufferGeometry.prototype.toJSON.call(this),_a=this.parameters.shapes,_s=this.parameters.options;return toJSON(_a,_s,va)};var WorldUVGenerator={generateTopUV:function(va,_a,_s,Ss,Ms){var Cs=_a[_s*3],Ts=_a[_s*3+1],Bs=_a[Ss*3],Ps=_a[Ss*3+1],Ls=_a[Ms*3],Rs=_a[Ms*3+1];return[new Vector2(Cs,Ts),new Vector2(Bs,Ps),new Vector2(Ls,Rs)]},generateSideWallUV:function(va,_a,_s,Ss,Ms,Cs){var Ts=_a[_s*3],Bs=_a[_s*3+1],Ps=_a[_s*3+2],Ls=_a[Ss*3],Rs=_a[Ss*3+1],$s=_a[Ss*3+2],Fs=_a[Ms*3],Os=_a[Ms*3+1],Gs=_a[Ms*3+2],Ns=_a[Cs*3],Vs=_a[Cs*3+1],Ds=_a[Cs*3+2];return Math.abs(Bs-Rs)<.01?[new Vector2(Ts,1-Ps),new Vector2(Ls,1-$s),new Vector2(Fs,1-Gs),new Vector2(Ns,1-Ds)]:[new Vector2(Bs,1-Ps),new Vector2(Rs,1-$s),new Vector2(Os,1-Gs),new Vector2(Vs,1-Ds)]}};function toJSON(va,_a,_s){if(_s.shapes=[],Array.isArray(va))for(var Ss=0,Ms=va.length;Ss<Ms;Ss++){var Cs=va[Ss];_s.shapes.push(Cs.uuid)}else _s.shapes.push(va.uuid);return _a.extrudePath!==void 0&&(_s.options.extrudePath=_a.extrudePath.toJSON()),_s}function TextGeometry(va,_a){Geometry.call(this),this.type="TextGeometry",this.parameters={text:va,parameters:_a},this.fromBufferGeometry(new TextBufferGeometry(va,_a)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(va,_a){_a=_a||{};var _s=_a.font;if(!(_s&&_s.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var Ss=_s.generateShapes(va,_a.size);_a.depth=_a.height!==void 0?_a.height:50,_a.bevelThickness===void 0&&(_a.bevelThickness=10),_a.bevelSize===void 0&&(_a.bevelSize=8),_a.bevelEnabled===void 0&&(_a.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,Ss,_a),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(va,_a,_s,Ss,Ms,Cs,Ts){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:va,widthSegments:_a,heightSegments:_s,phiStart:Ss,phiLength:Ms,thetaStart:Cs,thetaLength:Ts},this.fromBufferGeometry(new SphereBufferGeometry(va,_a,_s,Ss,Ms,Cs,Ts)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(va,_a,_s,Ss,Ms,Cs,Ts){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:va,widthSegments:_a,heightSegments:_s,phiStart:Ss,phiLength:Ms,thetaStart:Cs,thetaLength:Ts},va=va||1,_a=Math.max(3,Math.floor(_a)||8),_s=Math.max(2,Math.floor(_s)||6),Ss=Ss!==void 0?Ss:0,Ms=Ms!==void 0?Ms:Math.PI*2,Cs=Cs!==void 0?Cs:0,Ts=Ts!==void 0?Ts:Math.PI;var Bs=Math.min(Cs+Ts,Math.PI),Ps,Ls,Rs=0,$s=[],Fs=new Vector3,Os=new Vector3,Gs=[],Ns=[],Vs=[],Ds=[];for(Ls=0;Ls<=_s;Ls++){var ks=[],Us=Ls/_s,zs=0;for(Ls==0&&Cs==0?zs=.5/_a:Ls==_s&&Bs==Math.PI&&(zs=-.5/_a),Ps=0;Ps<=_a;Ps++){var Ws=Ps/_a;Fs.x=-va*Math.cos(Ss+Ws*Ms)*Math.sin(Cs+Us*Ts),Fs.y=va*Math.cos(Cs+Us*Ts),Fs.z=va*Math.sin(Ss+Ws*Ms)*Math.sin(Cs+Us*Ts),Ns.push(Fs.x,Fs.y,Fs.z),Os.copy(Fs).normalize(),Vs.push(Os.x,Os.y,Os.z),Ds.push(Ws+zs,1-Us),ks.push(Rs++)}$s.push(ks)}for(Ls=0;Ls<_s;Ls++)for(Ps=0;Ps<_a;Ps++){var qs=$s[Ls][Ps+1],Zs=$s[Ls][Ps],el=$s[Ls+1][Ps],Js=$s[Ls+1][Ps+1];(Ls!==0||Cs>0)&&Gs.push(qs,Zs,Js),(Ls!==_s-1||Bs<Math.PI)&&Gs.push(Zs,el,Js)}this.setIndex(Gs),this.setAttribute("position",new Float32BufferAttribute(Ns,3)),this.setAttribute("normal",new Float32BufferAttribute(Vs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ds,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(va,_a,_s,Ss,Ms,Cs){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:va,outerRadius:_a,thetaSegments:_s,phiSegments:Ss,thetaStart:Ms,thetaLength:Cs},this.fromBufferGeometry(new RingBufferGeometry(va,_a,_s,Ss,Ms,Cs)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(va,_a,_s,Ss,Ms,Cs){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:va,outerRadius:_a,thetaSegments:_s,phiSegments:Ss,thetaStart:Ms,thetaLength:Cs},va=va||.5,_a=_a||1,Ms=Ms!==void 0?Ms:0,Cs=Cs!==void 0?Cs:Math.PI*2,_s=_s!==void 0?Math.max(3,_s):8,Ss=Ss!==void 0?Math.max(1,Ss):1;var Ts=[],Bs=[],Ps=[],Ls=[],Rs,$s=va,Fs=(_a-va)/Ss,Os=new Vector3,Gs=new Vector2,Ns,Vs;for(Ns=0;Ns<=Ss;Ns++){for(Vs=0;Vs<=_s;Vs++)Rs=Ms+Vs/_s*Cs,Os.x=$s*Math.cos(Rs),Os.y=$s*Math.sin(Rs),Bs.push(Os.x,Os.y,Os.z),Ps.push(0,0,1),Gs.x=(Os.x/_a+1)/2,Gs.y=(Os.y/_a+1)/2,Ls.push(Gs.x,Gs.y);$s+=Fs}for(Ns=0;Ns<Ss;Ns++){var Ds=Ns*(_s+1);for(Vs=0;Vs<_s;Vs++){Rs=Vs+Ds;var ks=Rs,Us=Rs+_s+1,zs=Rs+_s+2,Ws=Rs+1;Ts.push(ks,Us,Ws),Ts.push(Us,zs,Ws)}}this.setIndex(Ts),this.setAttribute("position",new Float32BufferAttribute(Bs,3)),this.setAttribute("normal",new Float32BufferAttribute(Ps,3)),this.setAttribute("uv",new Float32BufferAttribute(Ls,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(va,_a,_s,Ss){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:va,segments:_a,phiStart:_s,phiLength:Ss},this.fromBufferGeometry(new LatheBufferGeometry(va,_a,_s,Ss)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(va,_a,_s,Ss){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:va,segments:_a,phiStart:_s,phiLength:Ss},_a=Math.floor(_a)||12,_s=_s||0,Ss=Ss||Math.PI*2,Ss=MathUtils.clamp(Ss,0,Math.PI*2);var Ms=[],Cs=[],Ts=[],Bs,Ps=1/_a,Ls=new Vector3,Rs=new Vector2,$s,Fs;for($s=0;$s<=_a;$s++){var Os=_s+$s*Ps*Ss,Gs=Math.sin(Os),Ns=Math.cos(Os);for(Fs=0;Fs<=va.length-1;Fs++)Ls.x=va[Fs].x*Gs,Ls.y=va[Fs].y,Ls.z=va[Fs].x*Ns,Cs.push(Ls.x,Ls.y,Ls.z),Rs.x=$s/_a,Rs.y=Fs/(va.length-1),Ts.push(Rs.x,Rs.y)}for($s=0;$s<_a;$s++)for(Fs=0;Fs<va.length-1;Fs++){Bs=Fs+$s*va.length;var Vs=Bs,Ds=Bs+va.length,ks=Bs+va.length+1,Us=Bs+1;Ms.push(Vs,Ds,Us),Ms.push(Ds,ks,Us)}if(this.setIndex(Ms),this.setAttribute("position",new Float32BufferAttribute(Cs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ts,2)),this.computeVertexNormals(),Ss===Math.PI*2){var zs=this.attributes.normal.array,Ws=new Vector3,qs=new Vector3,Zs=new Vector3;for(Bs=_a*va.length*3,$s=0,Fs=0;$s<va.length;$s++,Fs+=3)Ws.x=zs[Fs+0],Ws.y=zs[Fs+1],Ws.z=zs[Fs+2],qs.x=zs[Bs+Fs+0],qs.y=zs[Bs+Fs+1],qs.z=zs[Bs+Fs+2],Zs.addVectors(Ws,qs).normalize(),zs[Fs+0]=zs[Bs+Fs+0]=Zs.x,zs[Fs+1]=zs[Bs+Fs+1]=Zs.y,zs[Fs+2]=zs[Bs+Fs+2]=Zs.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(va,_a){Geometry.call(this),this.type="ShapeGeometry",typeof _a=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),_a=_a.curveSegments),this.parameters={shapes:va,curveSegments:_a},this.fromBufferGeometry(new ShapeBufferGeometry(va,_a)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var va=Geometry.prototype.toJSON.call(this),_a=this.parameters.shapes;return toJSON$1(_a,va)};function ShapeBufferGeometry(va,_a){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:va,curveSegments:_a},_a=_a||12;var _s=[],Ss=[],Ms=[],Cs=[],Ts=0,Bs=0;if(Array.isArray(va)===!1)Ls(va);else for(var Ps=0;Ps<va.length;Ps++)Ls(va[Ps]),this.addGroup(Ts,Bs,Ps),Ts+=Bs,Bs=0;this.setIndex(_s),this.setAttribute("position",new Float32BufferAttribute(Ss,3)),this.setAttribute("normal",new Float32BufferAttribute(Ms,3)),this.setAttribute("uv",new Float32BufferAttribute(Cs,2));function Ls(Rs){var $s,Fs,Os,Gs=Ss.length/3,Ns=Rs.extractPoints(_a),Vs=Ns.shape,Ds=Ns.holes;for(ShapeUtils.isClockWise(Vs)===!1&&(Vs=Vs.reverse()),$s=0,Fs=Ds.length;$s<Fs;$s++)Os=Ds[$s],ShapeUtils.isClockWise(Os)===!0&&(Ds[$s]=Os.reverse());var ks=ShapeUtils.triangulateShape(Vs,Ds);for($s=0,Fs=Ds.length;$s<Fs;$s++)Os=Ds[$s],Vs=Vs.concat(Os);for($s=0,Fs=Vs.length;$s<Fs;$s++){var Us=Vs[$s];Ss.push(Us.x,Us.y,0),Ms.push(0,0,1),Cs.push(Us.x,Us.y)}for($s=0,Fs=ks.length;$s<Fs;$s++){var zs=ks[$s],Ws=zs[0]+Gs,qs=zs[1]+Gs,Zs=zs[2]+Gs;_s.push(Ws,qs,Zs),Bs+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var va=BufferGeometry.prototype.toJSON.call(this),_a=this.parameters.shapes;return toJSON$1(_a,va)};function toJSON$1(va,_a){if(_a.shapes=[],Array.isArray(va))for(var _s=0,Ss=va.length;_s<Ss;_s++){var Ms=va[_s];_a.shapes.push(Ms.uuid)}else _a.shapes.push(va.uuid);return _a}function EdgesGeometry(va,_a){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:_a},_a=_a!==void 0?_a:1;var _s=[],Ss=Math.cos(MathUtils.DEG2RAD*_a),Ms=[0,0],Cs={},Ts,Bs,Ps,Ls=["a","b","c"],Rs;va.isBufferGeometry?(Rs=new Geometry,Rs.fromBufferGeometry(va)):Rs=va.clone(),Rs.mergeVertices(),Rs.computeFaceNormals();for(var $s=Rs.vertices,Fs=Rs.faces,Os=0,Gs=Fs.length;Os<Gs;Os++)for(var Ns=Fs[Os],Vs=0;Vs<3;Vs++)Ts=Ns[Ls[Vs]],Bs=Ns[Ls[(Vs+1)%3]],Ms[0]=Math.min(Ts,Bs),Ms[1]=Math.max(Ts,Bs),Ps=Ms[0]+","+Ms[1],Cs[Ps]===void 0?Cs[Ps]={index1:Ms[0],index2:Ms[1],face1:Os,face2:void 0}:Cs[Ps].face2=Os;for(Ps in Cs){var Ds=Cs[Ps];if(Ds.face2===void 0||Fs[Ds.face1].normal.dot(Fs[Ds.face2].normal)<=Ss){var ks=$s[Ds.index1];_s.push(ks.x,ks.y,ks.z),ks=$s[Ds.index2],_s.push(ks.x,ks.y,ks.z)}}this.setAttribute("position",new Float32BufferAttribute(_s,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(va,_a,_s,Ss,Ms,Cs,Ts,Bs){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:va,radiusBottom:_a,height:_s,radialSegments:Ss,heightSegments:Ms,openEnded:Cs,thetaStart:Ts,thetaLength:Bs},this.fromBufferGeometry(new CylinderBufferGeometry(va,_a,_s,Ss,Ms,Cs,Ts,Bs)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(va,_a,_s,Ss,Ms,Cs,Ts,Bs){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:va,radiusBottom:_a,height:_s,radialSegments:Ss,heightSegments:Ms,openEnded:Cs,thetaStart:Ts,thetaLength:Bs};var Ps=this;va=va!==void 0?va:1,_a=_a!==void 0?_a:1,_s=_s||1,Ss=Math.floor(Ss)||8,Ms=Math.floor(Ms)||1,Cs=Cs!==void 0?Cs:!1,Ts=Ts!==void 0?Ts:0,Bs=Bs!==void 0?Bs:Math.PI*2;var Ls=[],Rs=[],$s=[],Fs=[],Os=0,Gs=[],Ns=_s/2,Vs=0;Ds(),Cs===!1&&(va>0&&ks(!0),_a>0&&ks(!1)),this.setIndex(Ls),this.setAttribute("position",new Float32BufferAttribute(Rs,3)),this.setAttribute("normal",new Float32BufferAttribute($s,3)),this.setAttribute("uv",new Float32BufferAttribute(Fs,2));function Ds(){var Us,zs,Ws=new Vector3,qs=new Vector3,Zs=0,el=(_a-va)/_s;for(zs=0;zs<=Ms;zs++){var Js=[],Hs=zs/Ms,Qs=Hs*(_a-va)+va;for(Us=0;Us<=Ss;Us++){var js=Us/Ss,Ks=js*Bs+Ts,Xs=Math.sin(Ks),Ys=Math.cos(Ks);qs.x=Qs*Xs,qs.y=-Hs*_s+Ns,qs.z=Qs*Ys,Rs.push(qs.x,qs.y,qs.z),Ws.set(Xs,el,Ys).normalize(),$s.push(Ws.x,Ws.y,Ws.z),Fs.push(js,1-Hs),Js.push(Os++)}Gs.push(Js)}for(Us=0;Us<Ss;Us++)for(zs=0;zs<Ms;zs++){var rl=Gs[zs][Us],tl=Gs[zs+1][Us],il=Gs[zs+1][Us+1],ll=Gs[zs][Us+1];Ls.push(rl,tl,ll),Ls.push(tl,il,ll),Zs+=6}Ps.addGroup(Vs,Zs,0),Vs+=Zs}function ks(Us){var zs,Ws,qs,Zs=new Vector2,el=new Vector3,Js=0,Hs=Us===!0?va:_a,Qs=Us===!0?1:-1;for(Ws=Os,zs=1;zs<=Ss;zs++)Rs.push(0,Ns*Qs,0),$s.push(0,Qs,0),Fs.push(.5,.5),Os++;for(qs=Os,zs=0;zs<=Ss;zs++){var js=zs/Ss,Ks=js*Bs+Ts,Xs=Math.cos(Ks),Ys=Math.sin(Ks);el.x=Hs*Ys,el.y=Ns*Qs,el.z=Hs*Xs,Rs.push(el.x,el.y,el.z),$s.push(0,Qs,0),Zs.x=Xs*.5+.5,Zs.y=Ys*.5*Qs+.5,Fs.push(Zs.x,Zs.y),Os++}for(zs=0;zs<Ss;zs++){var rl=Ws+zs,tl=qs+zs;Us===!0?Ls.push(tl,tl+1,rl):Ls.push(tl+1,tl,rl),Js+=3}Ps.addGroup(Vs,Js,Us===!0?1:2),Vs+=Js}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(va,_a,_s,Ss,Ms,Cs,Ts){CylinderGeometry.call(this,0,va,_a,_s,Ss,Ms,Cs,Ts),this.type="ConeGeometry",this.parameters={radius:va,height:_a,radialSegments:_s,heightSegments:Ss,openEnded:Ms,thetaStart:Cs,thetaLength:Ts}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(va,_a,_s,Ss,Ms,Cs,Ts){CylinderBufferGeometry.call(this,0,va,_a,_s,Ss,Ms,Cs,Ts),this.type="ConeBufferGeometry",this.parameters={radius:va,height:_a,radialSegments:_s,heightSegments:Ss,openEnded:Ms,thetaStart:Cs,thetaLength:Ts}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(va,_a,_s,Ss){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:va,segments:_a,thetaStart:_s,thetaLength:Ss},this.fromBufferGeometry(new CircleBufferGeometry(va,_a,_s,Ss)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(va,_a,_s,Ss){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:va,segments:_a,thetaStart:_s,thetaLength:Ss},va=va||1,_a=_a!==void 0?Math.max(3,_a):8,_s=_s!==void 0?_s:0,Ss=Ss!==void 0?Ss:Math.PI*2;var Ms=[],Cs=[],Ts=[],Bs=[],Ps,Ls,Rs=new Vector3,$s=new Vector2;for(Cs.push(0,0,0),Ts.push(0,0,1),Bs.push(.5,.5),Ls=0,Ps=3;Ls<=_a;Ls++,Ps+=3){var Fs=_s+Ls/_a*Ss;Rs.x=va*Math.cos(Fs),Rs.y=va*Math.sin(Fs),Cs.push(Rs.x,Rs.y,Rs.z),Ts.push(0,0,1),$s.x=(Cs[Ps]/va+1)/2,$s.y=(Cs[Ps+1]/va+1)/2,Bs.push($s.x,$s.y)}for(Ps=1;Ps<=_a;Ps++)Ms.push(Ps,Ps+1,0);this.setIndex(Ms),this.setAttribute("position",new Float32BufferAttribute(Cs,3)),this.setAttribute("normal",new Float32BufferAttribute(Ts,3)),this.setAttribute("uv",new Float32BufferAttribute(Bs,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(va){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(va)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this};function RawShaderMaterial(va){ShaderMaterial.call(this,va),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(va){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(va)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.defines={STANDARD:""},this.color.copy(va.color),this.roughness=va.roughness,this.metalness=va.metalness,this.map=va.map,this.lightMap=va.lightMap,this.lightMapIntensity=va.lightMapIntensity,this.aoMap=va.aoMap,this.aoMapIntensity=va.aoMapIntensity,this.emissive.copy(va.emissive),this.emissiveMap=va.emissiveMap,this.emissiveIntensity=va.emissiveIntensity,this.bumpMap=va.bumpMap,this.bumpScale=va.bumpScale,this.normalMap=va.normalMap,this.normalMapType=va.normalMapType,this.normalScale.copy(va.normalScale),this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.roughnessMap=va.roughnessMap,this.metalnessMap=va.metalnessMap,this.alphaMap=va.alphaMap,this.envMap=va.envMap,this.envMapIntensity=va.envMapIntensity,this.refractionRatio=va.refractionRatio,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.wireframeLinecap=va.wireframeLinecap,this.wireframeLinejoin=va.wireframeLinejoin,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this.vertexTangents=va.vertexTangents,this};function MeshPhysicalMaterial(va){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(va)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(va){return MeshStandardMaterial.prototype.copy.call(this,va),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=va.clearcoat,this.clearcoatMap=va.clearcoatMap,this.clearcoatRoughness=va.clearcoatRoughness,this.clearcoatRoughnessMap=va.clearcoatRoughnessMap,this.clearcoatNormalMap=va.clearcoatNormalMap,this.clearcoatNormalScale.copy(va.clearcoatNormalScale),this.reflectivity=va.reflectivity,va.sheen?this.sheen=(this.sheen||new Color).copy(va.sheen):this.sheen=null,this.transparency=va.transparency,this};function MeshPhongMaterial(va){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(va)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.specular.copy(va.specular),this.shininess=va.shininess,this.map=va.map,this.lightMap=va.lightMap,this.lightMapIntensity=va.lightMapIntensity,this.aoMap=va.aoMap,this.aoMapIntensity=va.aoMapIntensity,this.emissive.copy(va.emissive),this.emissiveMap=va.emissiveMap,this.emissiveIntensity=va.emissiveIntensity,this.bumpMap=va.bumpMap,this.bumpScale=va.bumpScale,this.normalMap=va.normalMap,this.normalMapType=va.normalMapType,this.normalScale.copy(va.normalScale),this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.specularMap=va.specularMap,this.alphaMap=va.alphaMap,this.envMap=va.envMap,this.combine=va.combine,this.reflectivity=va.reflectivity,this.refractionRatio=va.refractionRatio,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.wireframeLinecap=va.wireframeLinecap,this.wireframeLinejoin=va.wireframeLinejoin,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this};function MeshToonMaterial(va){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(va)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.specular.copy(va.specular),this.shininess=va.shininess,this.map=va.map,this.gradientMap=va.gradientMap,this.lightMap=va.lightMap,this.lightMapIntensity=va.lightMapIntensity,this.aoMap=va.aoMap,this.aoMapIntensity=va.aoMapIntensity,this.emissive.copy(va.emissive),this.emissiveMap=va.emissiveMap,this.emissiveIntensity=va.emissiveIntensity,this.bumpMap=va.bumpMap,this.bumpScale=va.bumpScale,this.normalMap=va.normalMap,this.normalMapType=va.normalMapType,this.normalScale.copy(va.normalScale),this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.specularMap=va.specularMap,this.alphaMap=va.alphaMap,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.wireframeLinecap=va.wireframeLinecap,this.wireframeLinejoin=va.wireframeLinejoin,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this};function MeshNormalMaterial(va){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(va)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.bumpMap=va.bumpMap,this.bumpScale=va.bumpScale,this.normalMap=va.normalMap,this.normalMapType=va.normalMapType,this.normalScale.copy(va.normalScale),this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this};function MeshLambertMaterial(va){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(va)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.map=va.map,this.lightMap=va.lightMap,this.lightMapIntensity=va.lightMapIntensity,this.aoMap=va.aoMap,this.aoMapIntensity=va.aoMapIntensity,this.emissive.copy(va.emissive),this.emissiveMap=va.emissiveMap,this.emissiveIntensity=va.emissiveIntensity,this.specularMap=va.specularMap,this.alphaMap=va.alphaMap,this.envMap=va.envMap,this.combine=va.combine,this.reflectivity=va.reflectivity,this.refractionRatio=va.refractionRatio,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.wireframeLinecap=va.wireframeLinecap,this.wireframeLinejoin=va.wireframeLinejoin,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this};function MeshMatcapMaterial(va){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(va)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.defines={MATCAP:""},this.color.copy(va.color),this.matcap=va.matcap,this.map=va.map,this.bumpMap=va.bumpMap,this.bumpScale=va.bumpScale,this.normalMap=va.normalMap,this.normalMapType=va.normalMapType,this.normalScale.copy(va.normalScale),this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.alphaMap=va.alphaMap,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this};function LineDashedMaterial(va){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(va)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(va){return LineBasicMaterial.prototype.copy.call(this,va),this.scale=va.scale,this.dashSize=va.dashSize,this.gapSize=va.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(va,_a,_s){return AnimationUtils.isTypedArray(va)?new va.constructor(va.subarray(_a,_s!==void 0?_s:va.length)):va.slice(_a,_s)},convertArray:function(va,_a,_s){return!va||!_s&&va.constructor===_a?va:typeof _a.BYTES_PER_ELEMENT=="number"?new _a(va):Array.prototype.slice.call(va)},isTypedArray:function(va){return ArrayBuffer.isView(va)&&!(va instanceof DataView)},getKeyframeOrder:function(va){function _a(Cs,Ts){return va[Cs]-va[Ts]}for(var _s=va.length,Ss=new Array(_s),Ms=0;Ms!==_s;++Ms)Ss[Ms]=Ms;return Ss.sort(_a),Ss},sortedArray:function(va,_a,_s){for(var Ss=va.length,Ms=new va.constructor(Ss),Cs=0,Ts=0;Ts!==Ss;++Cs)for(var Bs=_s[Cs]*_a,Ps=0;Ps!==_a;++Ps)Ms[Ts++]=va[Bs+Ps];return Ms},flattenJSON:function(va,_a,_s,Ss){for(var Ms=1,Cs=va[0];Cs!==void 0&&Cs[Ss]===void 0;)Cs=va[Ms++];if(Cs!==void 0){var Ts=Cs[Ss];if(Ts!==void 0)if(Array.isArray(Ts))do Ts=Cs[Ss],Ts!==void 0&&(_a.push(Cs.time),_s.push.apply(_s,Ts)),Cs=va[Ms++];while(Cs!==void 0);else if(Ts.toArray!==void 0)do Ts=Cs[Ss],Ts!==void 0&&(_a.push(Cs.time),Ts.toArray(_s,_s.length)),Cs=va[Ms++];while(Cs!==void 0);else do Ts=Cs[Ss],Ts!==void 0&&(_a.push(Cs.time),_s.push(Ts)),Cs=va[Ms++];while(Cs!==void 0)}},subclip:function(va,_a,_s,Ss,Ms){Ms=Ms||30;var Cs=va.clone();Cs.name=_a;for(var Ts=[],Bs=0;Bs<Cs.tracks.length;++Bs){for(var Ps=Cs.tracks[Bs],Ls=Ps.getValueSize(),Rs=[],$s=[],Fs=0;Fs<Ps.times.length;++Fs){var Os=Ps.times[Fs]*Ms;if(!(Os<_s||Os>=Ss)){Rs.push(Ps.times[Fs]);for(var Gs=0;Gs<Ls;++Gs)$s.push(Ps.values[Fs*Ls+Gs])}}Rs.length!==0&&(Ps.times=AnimationUtils.convertArray(Rs,Ps.times.constructor),Ps.values=AnimationUtils.convertArray($s,Ps.values.constructor),Ts.push(Ps))}Cs.tracks=Ts;for(var Ns=1/0,Bs=0;Bs<Cs.tracks.length;++Bs)Ns>Cs.tracks[Bs].times[0]&&(Ns=Cs.tracks[Bs].times[0]);for(var Bs=0;Bs<Cs.tracks.length;++Bs)Cs.tracks[Bs].shift(-1*Ns);return Cs.resetDuration(),Cs},makeClipAdditive:function(va,_a,_s,Ss){_a===void 0&&(_a=0),_s===void 0&&(_s=va),(Ss===void 0||Ss<=0)&&(Ss=30);for(var Ms=va.tracks.length,Cs=_a/Ss,Ts=0;Ts<Ms;++Ts){var Bs=_s.tracks[Ts],Ps=Bs.ValueTypeName;if(!(Ps==="bool"||Ps==="string")){var Ls=va.tracks.find(function(zs){return zs.name===Bs.name&&zs.ValueTypeName===Ps});if(Ls!==void 0){var Rs=Bs.getValueSize(),$s=Bs.times.length-1,Fs;if(Cs<=Bs.times[0])Fs=AnimationUtils.arraySlice(Bs.values,0,Bs.valueSize);else if(Cs>=Bs.times[$s]){var Os=$s*Rs;Fs=AnimationUtils.arraySlice(Bs.values,Os)}else{var Gs=Bs.createInterpolant();Gs.evaluate(Cs),Fs=Gs.resultBuffer}if(Ps==="quaternion"){var Ns=new Quaternion(Fs[0],Fs[1],Fs[2],Fs[3]).normalize().conjugate();Ns.toArray(Fs)}for(var Vs=Ls.times.length,Ds=0;Ds<Vs;++Ds){var ks=Ds*Rs;if(Ps==="quaternion")Quaternion.multiplyQuaternionsFlat(Ls.values,ks,Fs,0,Ls.values,ks);else for(var Us=0;Us<Rs;++Us)Ls.values[ks+Us]-=Fs[Us]}}}}return va.blendMode=AdditiveAnimationBlendMode,va}};function Interpolant(va,_a,_s,Ss){this.parameterPositions=va,this._cachedIndex=0,this.resultBuffer=Ss!==void 0?Ss:new _a.constructor(_s),this.sampleValues=_a,this.valueSize=_s}Object.assign(Interpolant.prototype,{evaluate:function(va){var _a=this.parameterPositions,_s=this._cachedIndex,Ss=_a[_s],Ms=_a[_s-1];e:{t:{var Cs;r:{n:if(!(va<Ss)){for(var Ts=_s+2;;){if(Ss===void 0){if(va<Ms)break n;return _s=_a.length,this._cachedIndex=_s,this.afterEnd_(_s-1,va,Ms)}if(_s===Ts)break;if(Ms=Ss,Ss=_a[++_s],va<Ss)break t}Cs=_a.length;break r}if(!(va>=Ms)){var Bs=_a[1];va<Bs&&(_s=2,Ms=Bs);for(var Ts=_s-2;;){if(Ms===void 0)return this._cachedIndex=0,this.beforeStart_(0,va,Ss);if(_s===Ts)break;if(Ss=Ms,Ms=_a[--_s-1],va>=Ms)break t}Cs=_s,_s=0;break r}break e}for(;_s<Cs;){var Ps=_s+Cs>>>1;va<_a[Ps]?Cs=Ps:_s=Ps+1}if(Ss=_a[_s],Ms=_a[_s-1],Ms===void 0)return this._cachedIndex=0,this.beforeStart_(0,va,Ss);if(Ss===void 0)return _s=_a.length,this._cachedIndex=_s,this.afterEnd_(_s-1,Ms,va)}this._cachedIndex=_s,this.intervalChanged_(_s,Ms,Ss)}return this.interpolate_(_s,Ms,va,Ss)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(va){for(var _a=this.resultBuffer,_s=this.sampleValues,Ss=this.valueSize,Ms=va*Ss,Cs=0;Cs!==Ss;++Cs)_a[Cs]=_s[Ms+Cs];return _a},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(va,_a,_s,Ss){Interpolant.call(this,va,_a,_s,Ss),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(va,_a,_s){var Ss=this.parameterPositions,Ms=va-2,Cs=va+1,Ts=Ss[Ms],Bs=Ss[Cs];if(Ts===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Ms=va,Ts=2*_a-_s;break;case WrapAroundEnding:Ms=Ss.length-2,Ts=_a+Ss[Ms]-Ss[Ms+1];break;default:Ms=va,Ts=_s}if(Bs===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Cs=va,Bs=2*_s-_a;break;case WrapAroundEnding:Cs=1,Bs=_s+Ss[1]-Ss[0];break;default:Cs=va-1,Bs=_a}var Ps=(_s-_a)*.5,Ls=this.valueSize;this._weightPrev=Ps/(_a-Ts),this._weightNext=Ps/(Bs-_s),this._offsetPrev=Ms*Ls,this._offsetNext=Cs*Ls},interpolate_:function(va,_a,_s,Ss){for(var Ms=this.resultBuffer,Cs=this.sampleValues,Ts=this.valueSize,Bs=va*Ts,Ps=Bs-Ts,Ls=this._offsetPrev,Rs=this._offsetNext,$s=this._weightPrev,Fs=this._weightNext,Os=(_s-_a)/(Ss-_a),Gs=Os*Os,Ns=Gs*Os,Vs=-$s*Ns+2*$s*Gs-$s*Os,Ds=(1+$s)*Ns+(-1.5-2*$s)*Gs+(-.5+$s)*Os+1,ks=(-1-Fs)*Ns+(1.5+Fs)*Gs+.5*Os,Us=Fs*Ns-Fs*Gs,zs=0;zs!==Ts;++zs)Ms[zs]=Vs*Cs[Ls+zs]+Ds*Cs[Ps+zs]+ks*Cs[Bs+zs]+Us*Cs[Rs+zs];return Ms}});function LinearInterpolant(va,_a,_s,Ss){Interpolant.call(this,va,_a,_s,Ss)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(va,_a,_s,Ss){for(var Ms=this.resultBuffer,Cs=this.sampleValues,Ts=this.valueSize,Bs=va*Ts,Ps=Bs-Ts,Ls=(_s-_a)/(Ss-_a),Rs=1-Ls,$s=0;$s!==Ts;++$s)Ms[$s]=Cs[Ps+$s]*Rs+Cs[Bs+$s]*Ls;return Ms}});function DiscreteInterpolant(va,_a,_s,Ss){Interpolant.call(this,va,_a,_s,Ss)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(va){return this.copySampleValue_(va-1)}});function KeyframeTrack(va,_a,_s,Ss){if(va===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(_a===void 0||_a.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+va);this.name=va,this.times=AnimationUtils.convertArray(_a,this.TimeBufferType),this.values=AnimationUtils.convertArray(_s,this.ValueBufferType),this.setInterpolation(Ss||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(va){var _a=va.constructor,_s;if(_a.toJSON!==void 0)_s=_a.toJSON(va);else{_s={name:va.name,times:AnimationUtils.convertArray(va.times,Array),values:AnimationUtils.convertArray(va.values,Array)};var Ss=va.getInterpolation();Ss!==va.DefaultInterpolation&&(_s.interpolation=Ss)}return _s.type=va.ValueTypeName,_s}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(va){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),va)},InterpolantFactoryMethodLinear:function(va){return new LinearInterpolant(this.times,this.values,this.getValueSize(),va)},InterpolantFactoryMethodSmooth:function(va){return new CubicInterpolant(this.times,this.values,this.getValueSize(),va)},setInterpolation:function(va){var _a;switch(va){case InterpolateDiscrete:_a=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:_a=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:_a=this.InterpolantFactoryMethodSmooth;break}if(_a===void 0){var _s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(va!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(_s);return console.warn("THREE.KeyframeTrack:",_s),this}return this.createInterpolant=_a,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(va){if(va!==0)for(var _a=this.times,_s=0,Ss=_a.length;_s!==Ss;++_s)_a[_s]+=va;return this},scale:function(va){if(va!==1)for(var _a=this.times,_s=0,Ss=_a.length;_s!==Ss;++_s)_a[_s]*=va;return this},trim:function(va,_a){for(var _s=this.times,Ss=_s.length,Ms=0,Cs=Ss-1;Ms!==Ss&&_s[Ms]<va;)++Ms;for(;Cs!==-1&&_s[Cs]>_a;)--Cs;if(++Cs,Ms!==0||Cs!==Ss){Ms>=Cs&&(Cs=Math.max(Cs,1),Ms=Cs-1);var Ts=this.getValueSize();this.times=AnimationUtils.arraySlice(_s,Ms,Cs),this.values=AnimationUtils.arraySlice(this.values,Ms*Ts,Cs*Ts)}return this},validate:function(){var va=!0,_a=this.getValueSize();_a-Math.floor(_a)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),va=!1);var _s=this.times,Ss=this.values,Ms=_s.length;Ms===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),va=!1);for(var Cs=null,Ts=0;Ts!==Ms;Ts++){var Bs=_s[Ts];if(typeof Bs=="number"&&isNaN(Bs)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Ts,Bs),va=!1;break}if(Cs!==null&&Cs>Bs){console.error("THREE.KeyframeTrack: Out of order keys.",this,Ts,Bs,Cs),va=!1;break}Cs=Bs}if(Ss!==void 0&&AnimationUtils.isTypedArray(Ss))for(var Ts=0,Ps=Ss.length;Ts!==Ps;++Ts){var Ls=Ss[Ts];if(isNaN(Ls)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Ts,Ls),va=!1;break}}return va},optimize:function(){for(var va=AnimationUtils.arraySlice(this.times),_a=AnimationUtils.arraySlice(this.values),_s=this.getValueSize(),Ss=this.getInterpolation()===InterpolateSmooth,Ms=1,Cs=va.length-1,Ts=1;Ts<Cs;++Ts){var Bs=!1,Ps=va[Ts],Ls=va[Ts+1];if(Ps!==Ls&&(Ts!==1||Ps!==Ps[0]))if(Ss)Bs=!0;else for(var Rs=Ts*_s,$s=Rs-_s,Fs=Rs+_s,Os=0;Os!==_s;++Os){var Gs=_a[Rs+Os];if(Gs!==_a[$s+Os]||Gs!==_a[Fs+Os]){Bs=!0;break}}if(Bs){if(Ts!==Ms){va[Ms]=va[Ts];for(var Ns=Ts*_s,Vs=Ms*_s,Os=0;Os!==_s;++Os)_a[Vs+Os]=_a[Ns+Os]}++Ms}}if(Cs>0){va[Ms]=va[Cs];for(var Ns=Cs*_s,Vs=Ms*_s,Os=0;Os!==_s;++Os)_a[Vs+Os]=_a[Ns+Os];++Ms}return Ms!==va.length?(this.times=AnimationUtils.arraySlice(va,0,Ms),this.values=AnimationUtils.arraySlice(_a,0,Ms*_s)):(this.times=va,this.values=_a),this},clone:function(){var va=AnimationUtils.arraySlice(this.times,0),_a=AnimationUtils.arraySlice(this.values,0),_s=this.constructor,Ss=new _s(this.name,va,_a);return Ss.createInterpolant=this.createInterpolant,Ss}});function BooleanKeyframeTrack(va,_a,_s){KeyframeTrack.call(this,va,_a,_s)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(va,_a,_s,Ss){KeyframeTrack.call(this,va,_a,_s,Ss)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(va,_a,_s,Ss){KeyframeTrack.call(this,va,_a,_s,Ss)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(va,_a,_s,Ss){Interpolant.call(this,va,_a,_s,Ss)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(va,_a,_s,Ss){for(var Ms=this.resultBuffer,Cs=this.sampleValues,Ts=this.valueSize,Bs=va*Ts,Ps=(_s-_a)/(Ss-_a),Ls=Bs+Ts;Bs!==Ls;Bs+=4)Quaternion.slerpFlat(Ms,0,Cs,Bs-Ts,Cs,Bs,Ps);return Ms}});function QuaternionKeyframeTrack(va,_a,_s,Ss){KeyframeTrack.call(this,va,_a,_s,Ss)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(va){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),va)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(va,_a,_s,Ss){KeyframeTrack.call(this,va,_a,_s,Ss)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(va,_a,_s,Ss){KeyframeTrack.call(this,va,_a,_s,Ss)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(va,_a,_s,Ss){this.name=va,this.tracks=_s,this.duration=_a!==void 0?_a:-1,this.blendMode=Ss!==void 0?Ss:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(va){switch(va.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+va)}function parseKeyframeTrack(va){if(va.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var _a=getTrackTypeForValueTypeName(va.type);if(va.times===void 0){var _s=[],Ss=[];AnimationUtils.flattenJSON(va.keys,_s,Ss,"value"),va.times=_s,va.values=Ss}return _a.parse!==void 0?_a.parse(va):new _a(va.name,va.times,va.values,va.interpolation)}Object.assign(AnimationClip,{parse:function(va){for(var _a=[],_s=va.tracks,Ss=1/(va.fps||1),Ms=0,Cs=_s.length;Ms!==Cs;++Ms)_a.push(parseKeyframeTrack(_s[Ms]).scale(Ss));return new AnimationClip(va.name,va.duration,_a,va.blendMode)},toJSON:function(va){for(var _a=[],_s=va.tracks,Ss={name:va.name,duration:va.duration,tracks:_a,uuid:va.uuid,blendMode:va.blendMode},Ms=0,Cs=_s.length;Ms!==Cs;++Ms)_a.push(KeyframeTrack.toJSON(_s[Ms]));return Ss},CreateFromMorphTargetSequence:function(va,_a,_s,Ss){for(var Ms=_a.length,Cs=[],Ts=0;Ts<Ms;Ts++){var Bs=[],Ps=[];Bs.push((Ts+Ms-1)%Ms,Ts,(Ts+1)%Ms),Ps.push(0,1,0);var Ls=AnimationUtils.getKeyframeOrder(Bs);Bs=AnimationUtils.sortedArray(Bs,1,Ls),Ps=AnimationUtils.sortedArray(Ps,1,Ls),!Ss&&Bs[0]===0&&(Bs.push(Ms),Ps.push(Ps[0])),Cs.push(new NumberKeyframeTrack(".morphTargetInfluences["+_a[Ts].name+"]",Bs,Ps).scale(1/_s))}return new AnimationClip(va,-1,Cs)},findByName:function(va,_a){var _s=va;if(!Array.isArray(va)){var Ss=va;_s=Ss.geometry&&Ss.geometry.animations||Ss.animations}for(var Ms=0;Ms<_s.length;Ms++)if(_s[Ms].name===_a)return _s[Ms];return null},CreateClipsFromMorphTargetSequences:function(va,_a,_s){for(var Ss={},Ms=/^([\w-]*?)([\d]+)$/,Cs=0,Ts=va.length;Cs<Ts;Cs++){var Bs=va[Cs],Ps=Bs.name.match(Ms);if(Ps&&Ps.length>1){var Ls=Ps[1],Rs=Ss[Ls];Rs||(Ss[Ls]=Rs=[]),Rs.push(Bs)}}var $s=[];for(var Ls in Ss)$s.push(AnimationClip.CreateFromMorphTargetSequence(Ls,Ss[Ls],_a,_s));return $s},parseAnimation:function(va,_a){if(!va)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var _s=function(zs,Ws,qs,Zs,el){if(qs.length!==0){var Js=[],Hs=[];AnimationUtils.flattenJSON(qs,Js,Hs,Zs),Js.length!==0&&el.push(new zs(Ws,Js,Hs))}},Ss=[],Ms=va.name||"default",Cs=va.length||-1,Ts=va.fps||30,Bs=va.blendMode,Ps=va.hierarchy||[],Ls=0;Ls<Ps.length;Ls++){var Rs=Ps[Ls].keys;if(!(!Rs||Rs.length===0))if(Rs[0].morphTargets){for(var $s={},Fs=0;Fs<Rs.length;Fs++)if(Rs[Fs].morphTargets)for(var Os=0;Os<Rs[Fs].morphTargets.length;Os++)$s[Rs[Fs].morphTargets[Os]]=-1;for(var Gs in $s){for(var Ns=[],Vs=[],Os=0;Os!==Rs[Fs].morphTargets.length;++Os){var Ds=Rs[Fs];Ns.push(Ds.time),Vs.push(Ds.morphTarget===Gs?1:0)}Ss.push(new NumberKeyframeTrack(".morphTargetInfluence["+Gs+"]",Ns,Vs))}Cs=$s.length*(Ts||1)}else{var ks=".bones["+_a[Ls].name+"]";_s(VectorKeyframeTrack,ks+".position",Rs,"pos",Ss),_s(QuaternionKeyframeTrack,ks+".quaternion",Rs,"rot",Ss),_s(VectorKeyframeTrack,ks+".scale",Rs,"scl",Ss)}}if(Ss.length===0)return null;var Us=new AnimationClip(Ms,Cs,Ss,Bs);return Us}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var va=this.tracks,_a=0,_s=0,Ss=va.length;_s!==Ss;++_s){var Ms=this.tracks[_s];_a=Math.max(_a,Ms.times[Ms.times.length-1])}return this.duration=_a,this},trim:function(){for(var va=0;va<this.tracks.length;va++)this.tracks[va].trim(0,this.duration);return this},validate:function(){for(var va=!0,_a=0;_a<this.tracks.length;_a++)va=va&&this.tracks[_a].validate();return va},optimize:function(){for(var va=0;va<this.tracks.length;va++)this.tracks[va].optimize();return this},clone:function(){for(var va=[],_a=0;_a<this.tracks.length;_a++)va.push(this.tracks[_a].clone());return new AnimationClip(this.name,this.duration,va,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(va,_a){this.enabled!==!1&&(this.files[va]=_a)},get:function(va){if(this.enabled!==!1)return this.files[va]},remove:function(va){delete this.files[va]},clear:function(){this.files={}}};function LoadingManager(va,_a,_s){var Ss=this,Ms=!1,Cs=0,Ts=0,Bs=void 0,Ps=[];this.onStart=void 0,this.onLoad=va,this.onProgress=_a,this.onError=_s,this.itemStart=function(Ls){Ts++,Ms===!1&&Ss.onStart!==void 0&&Ss.onStart(Ls,Cs,Ts),Ms=!0},this.itemEnd=function(Ls){Cs++,Ss.onProgress!==void 0&&Ss.onProgress(Ls,Cs,Ts),Cs===Ts&&(Ms=!1,Ss.onLoad!==void 0&&Ss.onLoad())},this.itemError=function(Ls){Ss.onError!==void 0&&Ss.onError(Ls)},this.resolveURL=function(Ls){return Bs?Bs(Ls):Ls},this.setURLModifier=function(Ls){return Bs=Ls,this},this.addHandler=function(Ls,Rs){return Ps.push(Ls,Rs),this},this.removeHandler=function(Ls){var Rs=Ps.indexOf(Ls);return Rs!==-1&&Ps.splice(Rs,2),this},this.getHandler=function(Ls){for(var Rs=0,$s=Ps.length;Rs<$s;Rs+=2){var Fs=Ps[Rs],Os=Ps[Rs+1];if(Fs.global&&(Fs.lastIndex=0),Fs.test(Ls))return Os}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(va){this.manager=va!==void 0?va:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(va,_a){var _s=this;return new Promise(function(Ss,Ms){_s.load(va,Ss,_a,Ms)})},parse:function(){},setCrossOrigin:function(va){return this.crossOrigin=va,this},setPath:function(va){return this.path=va,this},setResourcePath:function(va){return this.resourcePath=va,this},setRequestHeader:function(va){return this.requestHeader=va,this}});var loading={};function FileLoader(va){Loader.call(this,va)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(va,_a,_s,Ss){va===void 0&&(va=""),this.path!==void 0&&(va=this.path+va),va=this.manager.resolveURL(va);var Ms=this,Cs=Cache.get(va);if(Cs!==void 0)return Ms.manager.itemStart(va),setTimeout(function(){_a&&_a(Cs),Ms.manager.itemEnd(va)},0),Cs;if(loading[va]!==void 0){loading[va].push({onLoad:_a,onProgress:_s,onError:Ss});return}var Ts=/^data:(.*?)(;base64)?,(.*)$/,Bs=va.match(Ts);if(Bs){var Ps=Bs[1],Ls=!!Bs[2],Rs=Bs[3];Rs=decodeURIComponent(Rs),Ls&&(Rs=atob(Rs));try{var $s,Fs=(this.responseType||"").toLowerCase();switch(Fs){case"arraybuffer":case"blob":for(var Os=new Uint8Array(Rs.length),Gs=0;Gs<Rs.length;Gs++)Os[Gs]=Rs.charCodeAt(Gs);Fs==="blob"?$s=new Blob([Os.buffer],{type:Ps}):$s=Os.buffer;break;case"document":var Ns=new DOMParser;$s=Ns.parseFromString(Rs,Ps);break;case"json":$s=JSON.parse(Rs);break;default:$s=Rs;break}setTimeout(function(){_a&&_a($s),Ms.manager.itemEnd(va)},0)}catch(ks){setTimeout(function(){Ss&&Ss(ks),Ms.manager.itemError(va),Ms.manager.itemEnd(va)},0)}}else{loading[va]=[],loading[va].push({onLoad:_a,onProgress:_s,onError:Ss});var Vs=new XMLHttpRequest;Vs.open("GET",va,!0),Vs.addEventListener("load",function(ks){var Us=this.response,zs=loading[va];if(delete loading[va],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(va,Us);for(var Ws=0,qs=zs.length;Ws<qs;Ws++){var Zs=zs[Ws];Zs.onLoad&&Zs.onLoad(Us)}Ms.manager.itemEnd(va)}else{for(var Ws=0,qs=zs.length;Ws<qs;Ws++){var Zs=zs[Ws];Zs.onError&&Zs.onError(ks)}Ms.manager.itemError(va),Ms.manager.itemEnd(va)}},!1),Vs.addEventListener("progress",function(ks){for(var Us=loading[va],zs=0,Ws=Us.length;zs<Ws;zs++){var qs=Us[zs];qs.onProgress&&qs.onProgress(ks)}},!1),Vs.addEventListener("error",function(ks){var Us=loading[va];delete loading[va];for(var zs=0,Ws=Us.length;zs<Ws;zs++){var qs=Us[zs];qs.onError&&qs.onError(ks)}Ms.manager.itemError(va),Ms.manager.itemEnd(va)},!1),Vs.addEventListener("abort",function(ks){var Us=loading[va];delete loading[va];for(var zs=0,Ws=Us.length;zs<Ws;zs++){var qs=Us[zs];qs.onError&&qs.onError(ks)}Ms.manager.itemError(va),Ms.manager.itemEnd(va)},!1),this.responseType!==void 0&&(Vs.responseType=this.responseType),this.withCredentials!==void 0&&(Vs.withCredentials=this.withCredentials),Vs.overrideMimeType&&Vs.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var Ds in this.requestHeader)Vs.setRequestHeader(Ds,this.requestHeader[Ds]);Vs.send(null)}return Ms.manager.itemStart(va),Vs},setResponseType:function(va){return this.responseType=va,this},setWithCredentials:function(va){return this.withCredentials=va,this},setMimeType:function(va){return this.mimeType=va,this}});function AnimationLoader(va){Loader.call(this,va)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(va,_a,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setPath(Ms.path),Cs.load(va,function(Ts){try{_a(Ms.parse(JSON.parse(Ts)))}catch(Bs){Ss?Ss(Bs):console.error(Bs),Ms.manager.itemError(va)}},_s,Ss)},parse:function(va){for(var _a=[],_s=0;_s<va.length;_s++){var Ss=AnimationClip.parse(va[_s]);_a.push(Ss)}return _a}});function CompressedTextureLoader(va){Loader.call(this,va)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(va,_a,_s,Ss){var Ms=this,Cs=[],Ts=new CompressedTexture;Ts.image=Cs;var Bs=new FileLoader(this.manager);Bs.setPath(this.path),Bs.setResponseType("arraybuffer");function Ps(Fs){Bs.load(va[Fs],function(Os){var Gs=Ms.parse(Os,!0);Cs[Fs]={width:Gs.width,height:Gs.height,format:Gs.format,mipmaps:Gs.mipmaps},Ls+=1,Ls===6&&(Gs.mipmapCount===1&&(Ts.minFilter=LinearFilter),Ts.format=Gs.format,Ts.needsUpdate=!0,_a&&_a(Ts))},_s,Ss)}if(Array.isArray(va))for(var Ls=0,Rs=0,$s=va.length;Rs<$s;++Rs)Ps(Rs);else Bs.load(va,function(Fs){var Os=Ms.parse(Fs,!0);if(Os.isCubemap)for(var Gs=Os.mipmaps.length/Os.mipmapCount,Ns=0;Ns<Gs;Ns++){Cs[Ns]={mipmaps:[]};for(var Vs=0;Vs<Os.mipmapCount;Vs++)Cs[Ns].mipmaps.push(Os.mipmaps[Ns*Os.mipmapCount+Vs]),Cs[Ns].format=Os.format,Cs[Ns].width=Os.width,Cs[Ns].height=Os.height}else Ts.image.width=Os.width,Ts.image.height=Os.height,Ts.mipmaps=Os.mipmaps;Os.mipmapCount===1&&(Ts.minFilter=LinearFilter),Ts.format=Os.format,Ts.needsUpdate=!0,_a&&_a(Ts)},_s,Ss);return Ts}});function DataTextureLoader(va){Loader.call(this,va)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(va,_a,_s,Ss){var Ms=this,Cs=new DataTexture,Ts=new FileLoader(this.manager);return Ts.setResponseType("arraybuffer"),Ts.setPath(this.path),Ts.load(va,function(Bs){var Ps=Ms.parse(Bs);!Ps||(Ps.image!==void 0?Cs.image=Ps.image:Ps.data!==void 0&&(Cs.image.width=Ps.width,Cs.image.height=Ps.height,Cs.image.data=Ps.data),Cs.wrapS=Ps.wrapS!==void 0?Ps.wrapS:ClampToEdgeWrapping,Cs.wrapT=Ps.wrapT!==void 0?Ps.wrapT:ClampToEdgeWrapping,Cs.magFilter=Ps.magFilter!==void 0?Ps.magFilter:LinearFilter,Cs.minFilter=Ps.minFilter!==void 0?Ps.minFilter:LinearFilter,Cs.anisotropy=Ps.anisotropy!==void 0?Ps.anisotropy:1,Ps.format!==void 0&&(Cs.format=Ps.format),Ps.type!==void 0&&(Cs.type=Ps.type),Ps.mipmaps!==void 0&&(Cs.mipmaps=Ps.mipmaps,Cs.minFilter=LinearMipmapLinearFilter),Ps.mipmapCount===1&&(Cs.minFilter=LinearFilter),Cs.needsUpdate=!0,_a&&_a(Cs,Ps))},_s,Ss),Cs}});function ImageLoader(va){Loader.call(this,va)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(va,_a,_s,Ss){this.path!==void 0&&(va=this.path+va),va=this.manager.resolveURL(va);var Ms=this,Cs=Cache.get(va);if(Cs!==void 0)return Ms.manager.itemStart(va),setTimeout(function(){_a&&_a(Cs),Ms.manager.itemEnd(va)},0),Cs;var Ts=document.createElementNS("http://www.w3.org/1999/xhtml","img");function Bs(){Ts.removeEventListener("load",Bs,!1),Ts.removeEventListener("error",Ps,!1),Cache.add(va,this),_a&&_a(this),Ms.manager.itemEnd(va)}function Ps(Ls){Ts.removeEventListener("load",Bs,!1),Ts.removeEventListener("error",Ps,!1),Ss&&Ss(Ls),Ms.manager.itemError(va),Ms.manager.itemEnd(va)}return Ts.addEventListener("load",Bs,!1),Ts.addEventListener("error",Ps,!1),va.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Ts.crossOrigin=this.crossOrigin),Ms.manager.itemStart(va),Ts.src=va,Ts}});function CubeTextureLoader(va){Loader.call(this,va)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(va,_a,_s,Ss){var Ms=new CubeTexture,Cs=new ImageLoader(this.manager);Cs.setCrossOrigin(this.crossOrigin),Cs.setPath(this.path);var Ts=0;function Bs(Ls){Cs.load(va[Ls],function(Rs){Ms.images[Ls]=Rs,Ts++,Ts===6&&(Ms.needsUpdate=!0,_a&&_a(Ms))},void 0,Ss)}for(var Ps=0;Ps<va.length;++Ps)Bs(Ps);return Ms}});function TextureLoader(va){Loader.call(this,va)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(va,_a,_s,Ss){var Ms=new Texture,Cs=new ImageLoader(this.manager);return Cs.setCrossOrigin(this.crossOrigin),Cs.setPath(this.path),Cs.load(va,function(Ts){Ms.image=Ts;var Bs=va.search(/\.jpe?g($|\?)/i)>0||va.search(/^data\:image\/jpeg/)===0;Ms.format=Bs?RGBFormat:RGBAFormat,Ms.needsUpdate=!0,_a!==void 0&&_a(Ms)},_s,Ss),Ms}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(va,_a){var _s=this.getUtoTmapping(va);return this.getPoint(_s,_a)},getPoints:function(va){va===void 0&&(va=5);for(var _a=[],_s=0;_s<=va;_s++)_a.push(this.getPoint(_s/va));return _a},getSpacedPoints:function(va){va===void 0&&(va=5);for(var _a=[],_s=0;_s<=va;_s++)_a.push(this.getPointAt(_s/va));return _a},getLength:function(){var va=this.getLengths();return va[va.length-1]},getLengths:function(va){if(va===void 0&&(va=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===va+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var _a=[],_s,Ss=this.getPoint(0),Ms,Cs=0;for(_a.push(0),Ms=1;Ms<=va;Ms++)_s=this.getPoint(Ms/va),Cs+=_s.distanceTo(Ss),_a.push(Cs),Ss=_s;return this.cacheArcLengths=_a,_a},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(va,_a){var _s=this.getLengths(),Ss=0,Ms=_s.length,Cs;_a?Cs=_a:Cs=va*_s[Ms-1];for(var Ts=0,Bs=Ms-1,Ps;Ts<=Bs;)if(Ss=Math.floor(Ts+(Bs-Ts)/2),Ps=_s[Ss]-Cs,Ps<0)Ts=Ss+1;else if(Ps>0)Bs=Ss-1;else{Bs=Ss;break}if(Ss=Bs,_s[Ss]===Cs)return Ss/(Ms-1);var Ls=_s[Ss],Rs=_s[Ss+1],$s=Rs-Ls,Fs=(Cs-Ls)/$s,Os=(Ss+Fs)/(Ms-1);return Os},getTangent:function(va,_a){var _s=1e-4,Ss=va-_s,Ms=va+_s;Ss<0&&(Ss=0),Ms>1&&(Ms=1);var Cs=this.getPoint(Ss),Ts=this.getPoint(Ms),Bs=_a||(Cs.isVector2?new Vector2:new Vector3);return Bs.copy(Ts).sub(Cs).normalize(),Bs},getTangentAt:function(va,_a){var _s=this.getUtoTmapping(va);return this.getTangent(_s,_a)},computeFrenetFrames:function(va,_a){var _s=new Vector3,Ss=[],Ms=[],Cs=[],Ts=new Vector3,Bs=new Matrix4,Ps,Ls,Rs;for(Ps=0;Ps<=va;Ps++)Ls=Ps/va,Ss[Ps]=this.getTangentAt(Ls,new Vector3),Ss[Ps].normalize();Ms[0]=new Vector3,Cs[0]=new Vector3;var $s=Number.MAX_VALUE,Fs=Math.abs(Ss[0].x),Os=Math.abs(Ss[0].y),Gs=Math.abs(Ss[0].z);for(Fs<=$s&&($s=Fs,_s.set(1,0,0)),Os<=$s&&($s=Os,_s.set(0,1,0)),Gs<=$s&&_s.set(0,0,1),Ts.crossVectors(Ss[0],_s).normalize(),Ms[0].crossVectors(Ss[0],Ts),Cs[0].crossVectors(Ss[0],Ms[0]),Ps=1;Ps<=va;Ps++)Ms[Ps]=Ms[Ps-1].clone(),Cs[Ps]=Cs[Ps-1].clone(),Ts.crossVectors(Ss[Ps-1],Ss[Ps]),Ts.length()>Number.EPSILON&&(Ts.normalize(),Rs=Math.acos(MathUtils.clamp(Ss[Ps-1].dot(Ss[Ps]),-1,1)),Ms[Ps].applyMatrix4(Bs.makeRotationAxis(Ts,Rs))),Cs[Ps].crossVectors(Ss[Ps],Ms[Ps]);if(_a===!0)for(Rs=Math.acos(MathUtils.clamp(Ms[0].dot(Ms[va]),-1,1)),Rs/=va,Ss[0].dot(Ts.crossVectors(Ms[0],Ms[va]))>0&&(Rs=-Rs),Ps=1;Ps<=va;Ps++)Ms[Ps].applyMatrix4(Bs.makeRotationAxis(Ss[Ps],Rs*Ps)),Cs[Ps].crossVectors(Ss[Ps],Ms[Ps]);return{tangents:Ss,normals:Ms,binormals:Cs}},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.arcLengthDivisions=va.arcLengthDivisions,this},toJSON:function(){var va={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return va.arcLengthDivisions=this.arcLengthDivisions,va.type=this.type,va},fromJSON:function(va){return this.arcLengthDivisions=va.arcLengthDivisions,this}});function EllipseCurve(va,_a,_s,Ss,Ms,Cs,Ts,Bs){Curve.call(this),this.type="EllipseCurve",this.aX=va||0,this.aY=_a||0,this.xRadius=_s||1,this.yRadius=Ss||1,this.aStartAngle=Ms||0,this.aEndAngle=Cs||2*Math.PI,this.aClockwise=Ts||!1,this.aRotation=Bs||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(va,_a){for(var _s=_a||new Vector2,Ss=Math.PI*2,Ms=this.aEndAngle-this.aStartAngle,Cs=Math.abs(Ms)<Number.EPSILON;Ms<0;)Ms+=Ss;for(;Ms>Ss;)Ms-=Ss;Ms<Number.EPSILON&&(Cs?Ms=0:Ms=Ss),this.aClockwise===!0&&!Cs&&(Ms===Ss?Ms=-Ss:Ms=Ms-Ss);var Ts=this.aStartAngle+va*Ms,Bs=this.aX+this.xRadius*Math.cos(Ts),Ps=this.aY+this.yRadius*Math.sin(Ts);if(this.aRotation!==0){var Ls=Math.cos(this.aRotation),Rs=Math.sin(this.aRotation),$s=Bs-this.aX,Fs=Ps-this.aY;Bs=$s*Ls-Fs*Rs+this.aX,Ps=$s*Rs+Fs*Ls+this.aY}return _s.set(Bs,Ps)};EllipseCurve.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.aX=va.aX,this.aY=va.aY,this.xRadius=va.xRadius,this.yRadius=va.yRadius,this.aStartAngle=va.aStartAngle,this.aEndAngle=va.aEndAngle,this.aClockwise=va.aClockwise,this.aRotation=va.aRotation,this};EllipseCurve.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.aX=this.aX,va.aY=this.aY,va.xRadius=this.xRadius,va.yRadius=this.yRadius,va.aStartAngle=this.aStartAngle,va.aEndAngle=this.aEndAngle,va.aClockwise=this.aClockwise,va.aRotation=this.aRotation,va};EllipseCurve.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.aX=va.aX,this.aY=va.aY,this.xRadius=va.xRadius,this.yRadius=va.yRadius,this.aStartAngle=va.aStartAngle,this.aEndAngle=va.aEndAngle,this.aClockwise=va.aClockwise,this.aRotation=va.aRotation,this};function ArcCurve(va,_a,_s,Ss,Ms,Cs){EllipseCurve.call(this,va,_a,_s,_s,Ss,Ms,Cs),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var va=0,_a=0,_s=0,Ss=0;function Ms(Cs,Ts,Bs,Ps){va=Cs,_a=Bs,_s=-3*Cs+3*Ts-2*Bs-Ps,Ss=2*Cs-2*Ts+Bs+Ps}return{initCatmullRom:function(Cs,Ts,Bs,Ps,Ls){Ms(Ts,Bs,Ls*(Bs-Cs),Ls*(Ps-Ts))},initNonuniformCatmullRom:function(Cs,Ts,Bs,Ps,Ls,Rs,$s){var Fs=(Ts-Cs)/Ls-(Bs-Cs)/(Ls+Rs)+(Bs-Ts)/Rs,Os=(Bs-Ts)/Rs-(Ps-Ts)/(Rs+$s)+(Ps-Bs)/$s;Fs*=Rs,Os*=Rs,Ms(Ts,Bs,Fs,Os)},calc:function(Cs){var Ts=Cs*Cs,Bs=Ts*Cs;return va+_a*Cs+_s*Ts+Ss*Bs}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(va,_a,_s,Ss){Curve.call(this),this.type="CatmullRomCurve3",this.points=va||[],this.closed=_a||!1,this.curveType=_s||"centripetal",this.tension=Ss||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(va,_a){var _s=_a||new Vector3,Ss=this.points,Ms=Ss.length,Cs=(Ms-(this.closed?0:1))*va,Ts=Math.floor(Cs),Bs=Cs-Ts;this.closed?Ts+=Ts>0?0:(Math.floor(Math.abs(Ts)/Ms)+1)*Ms:Bs===0&&Ts===Ms-1&&(Ts=Ms-2,Bs=1);var Ps,Ls,Rs,$s;if(this.closed||Ts>0?Ps=Ss[(Ts-1)%Ms]:(tmp.subVectors(Ss[0],Ss[1]).add(Ss[0]),Ps=tmp),Ls=Ss[Ts%Ms],Rs=Ss[(Ts+1)%Ms],this.closed||Ts+2<Ms?$s=Ss[(Ts+2)%Ms]:(tmp.subVectors(Ss[Ms-1],Ss[Ms-2]).add(Ss[Ms-1]),$s=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var Fs=this.curveType==="chordal"?.5:.25,Os=Math.pow(Ps.distanceToSquared(Ls),Fs),Gs=Math.pow(Ls.distanceToSquared(Rs),Fs),Ns=Math.pow(Rs.distanceToSquared($s),Fs);Gs<1e-4&&(Gs=1),Os<1e-4&&(Os=Gs),Ns<1e-4&&(Ns=Gs),px.initNonuniformCatmullRom(Ps.x,Ls.x,Rs.x,$s.x,Os,Gs,Ns),py.initNonuniformCatmullRom(Ps.y,Ls.y,Rs.y,$s.y,Os,Gs,Ns),pz.initNonuniformCatmullRom(Ps.z,Ls.z,Rs.z,$s.z,Os,Gs,Ns)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Ps.x,Ls.x,Rs.x,$s.x,this.tension),py.initCatmullRom(Ps.y,Ls.y,Rs.y,$s.y,this.tension),pz.initCatmullRom(Ps.z,Ls.z,Rs.z,$s.z,this.tension));return _s.set(px.calc(Bs),py.calc(Bs),pz.calc(Bs)),_s};CatmullRomCurve3.prototype.copy=function(va){Curve.prototype.copy.call(this,va),this.points=[];for(var _a=0,_s=va.points.length;_a<_s;_a++){var Ss=va.points[_a];this.points.push(Ss.clone())}return this.closed=va.closed,this.curveType=va.curveType,this.tension=va.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);va.points=[];for(var _a=0,_s=this.points.length;_a<_s;_a++){var Ss=this.points[_a];va.points.push(Ss.toArray())}return va.closed=this.closed,va.curveType=this.curveType,va.tension=this.tension,va};CatmullRomCurve3.prototype.fromJSON=function(va){Curve.prototype.fromJSON.call(this,va),this.points=[];for(var _a=0,_s=va.points.length;_a<_s;_a++){var Ss=va.points[_a];this.points.push(new Vector3().fromArray(Ss))}return this.closed=va.closed,this.curveType=va.curveType,this.tension=va.tension,this};function CatmullRom(va,_a,_s,Ss,Ms){var Cs=(Ss-_a)*.5,Ts=(Ms-_s)*.5,Bs=va*va,Ps=va*Bs;return(2*_s-2*Ss+Cs+Ts)*Ps+(-3*_s+3*Ss-2*Cs-Ts)*Bs+Cs*va+_s}function QuadraticBezierP0(va,_a){var _s=1-va;return _s*_s*_a}function QuadraticBezierP1(va,_a){return 2*(1-va)*va*_a}function QuadraticBezierP2(va,_a){return va*va*_a}function QuadraticBezier(va,_a,_s,Ss){return QuadraticBezierP0(va,_a)+QuadraticBezierP1(va,_s)+QuadraticBezierP2(va,Ss)}function CubicBezierP0(va,_a){var _s=1-va;return _s*_s*_s*_a}function CubicBezierP1(va,_a){var _s=1-va;return 3*_s*_s*va*_a}function CubicBezierP2(va,_a){return 3*(1-va)*va*va*_a}function CubicBezierP3(va,_a){return va*va*va*_a}function CubicBezier(va,_a,_s,Ss,Ms){return CubicBezierP0(va,_a)+CubicBezierP1(va,_s)+CubicBezierP2(va,Ss)+CubicBezierP3(va,Ms)}function CubicBezierCurve(va,_a,_s,Ss){Curve.call(this),this.type="CubicBezierCurve",this.v0=va||new Vector2,this.v1=_a||new Vector2,this.v2=_s||new Vector2,this.v3=Ss||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(va,_a){var _s=_a||new Vector2,Ss=this.v0,Ms=this.v1,Cs=this.v2,Ts=this.v3;return _s.set(CubicBezier(va,Ss.x,Ms.x,Cs.x,Ts.x),CubicBezier(va,Ss.y,Ms.y,Cs.y,Ts.y)),_s};CubicBezierCurve.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v0.copy(va.v0),this.v1.copy(va.v1),this.v2.copy(va.v2),this.v3.copy(va.v3),this};CubicBezierCurve.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v0=this.v0.toArray(),va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va.v3=this.v3.toArray(),va};CubicBezierCurve.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v0.fromArray(va.v0),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this.v3.fromArray(va.v3),this};function CubicBezierCurve3(va,_a,_s,Ss){Curve.call(this),this.type="CubicBezierCurve3",this.v0=va||new Vector3,this.v1=_a||new Vector3,this.v2=_s||new Vector3,this.v3=Ss||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(va,_a){var _s=_a||new Vector3,Ss=this.v0,Ms=this.v1,Cs=this.v2,Ts=this.v3;return _s.set(CubicBezier(va,Ss.x,Ms.x,Cs.x,Ts.x),CubicBezier(va,Ss.y,Ms.y,Cs.y,Ts.y),CubicBezier(va,Ss.z,Ms.z,Cs.z,Ts.z)),_s};CubicBezierCurve3.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v0.copy(va.v0),this.v1.copy(va.v1),this.v2.copy(va.v2),this.v3.copy(va.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v0=this.v0.toArray(),va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va.v3=this.v3.toArray(),va};CubicBezierCurve3.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v0.fromArray(va.v0),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this.v3.fromArray(va.v3),this};function LineCurve(va,_a){Curve.call(this),this.type="LineCurve",this.v1=va||new Vector2,this.v2=_a||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(va,_a){var _s=_a||new Vector2;return va===1?_s.copy(this.v2):(_s.copy(this.v2).sub(this.v1),_s.multiplyScalar(va).add(this.v1)),_s};LineCurve.prototype.getPointAt=function(va,_a){return this.getPoint(va,_a)};LineCurve.prototype.getTangent=function(va,_a){var _s=_a||new Vector2,_s=_s.copy(this.v2).sub(this.v1).normalize();return _s};LineCurve.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v1.copy(va.v1),this.v2.copy(va.v2),this};LineCurve.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va};LineCurve.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this};function LineCurve3(va,_a){Curve.call(this),this.type="LineCurve3",this.v1=va||new Vector3,this.v2=_a||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(va,_a){var _s=_a||new Vector3;return va===1?_s.copy(this.v2):(_s.copy(this.v2).sub(this.v1),_s.multiplyScalar(va).add(this.v1)),_s};LineCurve3.prototype.getPointAt=function(va,_a){return this.getPoint(va,_a)};LineCurve3.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v1.copy(va.v1),this.v2.copy(va.v2),this};LineCurve3.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va};LineCurve3.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this};function QuadraticBezierCurve(va,_a,_s){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=va||new Vector2,this.v1=_a||new Vector2,this.v2=_s||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(va,_a){var _s=_a||new Vector2,Ss=this.v0,Ms=this.v1,Cs=this.v2;return _s.set(QuadraticBezier(va,Ss.x,Ms.x,Cs.x),QuadraticBezier(va,Ss.y,Ms.y,Cs.y)),_s};QuadraticBezierCurve.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v0.copy(va.v0),this.v1.copy(va.v1),this.v2.copy(va.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v0=this.v0.toArray(),va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va};QuadraticBezierCurve.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v0.fromArray(va.v0),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this};function QuadraticBezierCurve3(va,_a,_s){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=va||new Vector3,this.v1=_a||new Vector3,this.v2=_s||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(va,_a){var _s=_a||new Vector3,Ss=this.v0,Ms=this.v1,Cs=this.v2;return _s.set(QuadraticBezier(va,Ss.x,Ms.x,Cs.x),QuadraticBezier(va,Ss.y,Ms.y,Cs.y),QuadraticBezier(va,Ss.z,Ms.z,Cs.z)),_s};QuadraticBezierCurve3.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v0.copy(va.v0),this.v1.copy(va.v1),this.v2.copy(va.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v0=this.v0.toArray(),va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va};QuadraticBezierCurve3.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v0.fromArray(va.v0),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this};function SplineCurve(va){Curve.call(this),this.type="SplineCurve",this.points=va||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(va,_a){var _s=_a||new Vector2,Ss=this.points,Ms=(Ss.length-1)*va,Cs=Math.floor(Ms),Ts=Ms-Cs,Bs=Ss[Cs===0?Cs:Cs-1],Ps=Ss[Cs],Ls=Ss[Cs>Ss.length-2?Ss.length-1:Cs+1],Rs=Ss[Cs>Ss.length-3?Ss.length-1:Cs+2];return _s.set(CatmullRom(Ts,Bs.x,Ps.x,Ls.x,Rs.x),CatmullRom(Ts,Bs.y,Ps.y,Ls.y,Rs.y)),_s};SplineCurve.prototype.copy=function(va){Curve.prototype.copy.call(this,va),this.points=[];for(var _a=0,_s=va.points.length;_a<_s;_a++){var Ss=va.points[_a];this.points.push(Ss.clone())}return this};SplineCurve.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);va.points=[];for(var _a=0,_s=this.points.length;_a<_s;_a++){var Ss=this.points[_a];va.points.push(Ss.toArray())}return va};SplineCurve.prototype.fromJSON=function(va){Curve.prototype.fromJSON.call(this,va),this.points=[];for(var _a=0,_s=va.points.length;_a<_s;_a++){var Ss=va.points[_a];this.points.push(new Vector2().fromArray(Ss))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(va){this.curves.push(va)},closePath:function(){var va=this.curves[0].getPoint(0),_a=this.curves[this.curves.length-1].getPoint(1);va.equals(_a)||this.curves.push(new LineCurve(_a,va))},getPoint:function(va){for(var _a=va*this.getLength(),_s=this.getCurveLengths(),Ss=0;Ss<_s.length;){if(_s[Ss]>=_a){var Ms=_s[Ss]-_a,Cs=this.curves[Ss],Ts=Cs.getLength(),Bs=Ts===0?0:1-Ms/Ts;return Cs.getPointAt(Bs)}Ss++}return null},getLength:function(){var va=this.getCurveLengths();return va[va.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var va=[],_a=0,_s=0,Ss=this.curves.length;_s<Ss;_s++)_a+=this.curves[_s].getLength(),va.push(_a);return this.cacheLengths=va,va},getSpacedPoints:function(va){va===void 0&&(va=40);for(var _a=[],_s=0;_s<=va;_s++)_a.push(this.getPoint(_s/va));return this.autoClose&&_a.push(_a[0]),_a},getPoints:function(va){va=va||12;for(var _a=[],_s,Ss=0,Ms=this.curves;Ss<Ms.length;Ss++)for(var Cs=Ms[Ss],Ts=Cs&&Cs.isEllipseCurve?va*2:Cs&&(Cs.isLineCurve||Cs.isLineCurve3)?1:Cs&&Cs.isSplineCurve?va*Cs.points.length:va,Bs=Cs.getPoints(Ts),Ps=0;Ps<Bs.length;Ps++){var Ls=Bs[Ps];_s&&_s.equals(Ls)||(_a.push(Ls),_s=Ls)}return this.autoClose&&_a.length>1&&!_a[_a.length-1].equals(_a[0])&&_a.push(_a[0]),_a},copy:function(va){Curve.prototype.copy.call(this,va),this.curves=[];for(var _a=0,_s=va.curves.length;_a<_s;_a++){var Ss=va.curves[_a];this.curves.push(Ss.clone())}return this.autoClose=va.autoClose,this},toJSON:function(){var va=Curve.prototype.toJSON.call(this);va.autoClose=this.autoClose,va.curves=[];for(var _a=0,_s=this.curves.length;_a<_s;_a++){var Ss=this.curves[_a];va.curves.push(Ss.toJSON())}return va},fromJSON:function(va){Curve.prototype.fromJSON.call(this,va),this.autoClose=va.autoClose,this.curves=[];for(var _a=0,_s=va.curves.length;_a<_s;_a++){var Ss=va.curves[_a];this.curves.push(new Curves[Ss.type]().fromJSON(Ss))}return this}});function Path(va){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,va&&this.setFromPoints(va)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(va){this.moveTo(va[0].x,va[0].y);for(var _a=1,_s=va.length;_a<_s;_a++)this.lineTo(va[_a].x,va[_a].y);return this},moveTo:function(va,_a){return this.currentPoint.set(va,_a),this},lineTo:function(va,_a){var _s=new LineCurve(this.currentPoint.clone(),new Vector2(va,_a));return this.curves.push(_s),this.currentPoint.set(va,_a),this},quadraticCurveTo:function(va,_a,_s,Ss){var Ms=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(va,_a),new Vector2(_s,Ss));return this.curves.push(Ms),this.currentPoint.set(_s,Ss),this},bezierCurveTo:function(va,_a,_s,Ss,Ms,Cs){var Ts=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(va,_a),new Vector2(_s,Ss),new Vector2(Ms,Cs));return this.curves.push(Ts),this.currentPoint.set(Ms,Cs),this},splineThru:function(va){var _a=[this.currentPoint.clone()].concat(va),_s=new SplineCurve(_a);return this.curves.push(_s),this.currentPoint.copy(va[va.length-1]),this},arc:function(va,_a,_s,Ss,Ms,Cs){var Ts=this.currentPoint.x,Bs=this.currentPoint.y;return this.absarc(va+Ts,_a+Bs,_s,Ss,Ms,Cs),this},absarc:function(va,_a,_s,Ss,Ms,Cs){return this.absellipse(va,_a,_s,_s,Ss,Ms,Cs),this},ellipse:function(va,_a,_s,Ss,Ms,Cs,Ts,Bs){var Ps=this.currentPoint.x,Ls=this.currentPoint.y;return this.absellipse(va+Ps,_a+Ls,_s,Ss,Ms,Cs,Ts,Bs),this},absellipse:function(va,_a,_s,Ss,Ms,Cs,Ts,Bs){var Ps=new EllipseCurve(va,_a,_s,Ss,Ms,Cs,Ts,Bs);if(this.curves.length>0){var Ls=Ps.getPoint(0);Ls.equals(this.currentPoint)||this.lineTo(Ls.x,Ls.y)}this.curves.push(Ps);var Rs=Ps.getPoint(1);return this.currentPoint.copy(Rs),this},copy:function(va){return CurvePath.prototype.copy.call(this,va),this.currentPoint.copy(va.currentPoint),this},toJSON:function(){var va=CurvePath.prototype.toJSON.call(this);return va.currentPoint=this.currentPoint.toArray(),va},fromJSON:function(va){return CurvePath.prototype.fromJSON.call(this,va),this.currentPoint.fromArray(va.currentPoint),this}});function Shape(va){Path.call(this,va),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(va){for(var _a=[],_s=0,Ss=this.holes.length;_s<Ss;_s++)_a[_s]=this.holes[_s].getPoints(va);return _a},extractPoints:function(va){return{shape:this.getPoints(va),holes:this.getPointsHoles(va)}},copy:function(va){Path.prototype.copy.call(this,va),this.holes=[];for(var _a=0,_s=va.holes.length;_a<_s;_a++){var Ss=va.holes[_a];this.holes.push(Ss.clone())}return this},toJSON:function(){var va=Path.prototype.toJSON.call(this);va.uuid=this.uuid,va.holes=[];for(var _a=0,_s=this.holes.length;_a<_s;_a++){var Ss=this.holes[_a];va.holes.push(Ss.toJSON())}return va},fromJSON:function(va){Path.prototype.fromJSON.call(this,va),this.uuid=va.uuid,this.holes=[];for(var _a=0,_s=va.holes.length;_a<_s;_a++){var Ss=va.holes[_a];this.holes.push(new Path().fromJSON(Ss))}return this}});function Light(va,_a){Object3D.call(this),this.type="Light",this.color=new Color(va),this.intensity=_a!==void 0?_a:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(va){return Object3D.prototype.copy.call(this,va),this.color.copy(va.color),this.intensity=va.intensity,this},toJSON:function(va){var _a=Object3D.prototype.toJSON.call(this,va);return _a.object.color=this.color.getHex(),_a.object.intensity=this.intensity,this.groundColor!==void 0&&(_a.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(_a.object.distance=this.distance),this.angle!==void 0&&(_a.object.angle=this.angle),this.decay!==void 0&&(_a.object.decay=this.decay),this.penumbra!==void 0&&(_a.object.penumbra=this.penumbra),this.shadow!==void 0&&(_a.object.shadow=this.shadow.toJSON()),_a}});function HemisphereLight(va,_a,_s){Light.call(this,va,_s),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(_a)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.groundColor.copy(va.groundColor),this}});function LightShadow(va){this.camera=va,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(va){var _a=this.camera,_s=this.matrix,Ss=this._projScreenMatrix,Ms=this._lookTarget,Cs=this._lightPositionWorld;Cs.setFromMatrixPosition(va.matrixWorld),_a.position.copy(Cs),Ms.setFromMatrixPosition(va.target.matrixWorld),_a.lookAt(Ms),_a.updateMatrixWorld(),Ss.multiplyMatrices(_a.projectionMatrix,_a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ss),_s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),_s.multiply(_a.projectionMatrix),_s.multiply(_a.matrixWorldInverse)},getViewport:function(va){return this._viewports[va]},getFrameExtents:function(){return this._frameExtents},copy:function(va){return this.camera=va.camera.clone(),this.bias=va.bias,this.radius=va.radius,this.mapSize.copy(va.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var va={};return this.bias!==0&&(va.bias=this.bias),this.radius!==1&&(va.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(va.mapSize=this.mapSize.toArray()),va.camera=this.camera.toJSON(!1).object,delete va.camera.matrix,va}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(va){var _a=this.camera,_s=MathUtils.RAD2DEG*2*va.angle,Ss=this.mapSize.width/this.mapSize.height,Ms=va.distance||_a.far;(_s!==_a.fov||Ss!==_a.aspect||Ms!==_a.far)&&(_a.fov=_s,_a.aspect=Ss,_a.far=Ms,_a.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,va)}});function SpotLight(va,_a,_s,Ss,Ms,Cs){Light.call(this,va,_a),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Ts){this.intensity=Ts/Math.PI}}),this.distance=_s!==void 0?_s:0,this.angle=Ss!==void 0?Ss:Math.PI/3,this.penumbra=Ms!==void 0?Ms:0,this.decay=Cs!==void 0?Cs:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.distance=va.distance,this.angle=va.angle,this.penumbra=va.penumbra,this.decay=va.decay,this.target=va.target.clone(),this.shadow=va.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(va,_a){_a===void 0&&(_a=0);var _s=this.camera,Ss=this.matrix,Ms=this._lightPositionWorld,Cs=this._lookTarget,Ts=this._projScreenMatrix;Ms.setFromMatrixPosition(va.matrixWorld),_s.position.copy(Ms),Cs.copy(_s.position),Cs.add(this._cubeDirections[_a]),_s.up.copy(this._cubeUps[_a]),_s.lookAt(Cs),_s.updateMatrixWorld(),Ss.makeTranslation(-Ms.x,-Ms.y,-Ms.z),Ts.multiplyMatrices(_s.projectionMatrix,_s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ts)}});function PointLight(va,_a,_s,Ss){Light.call(this,va,_a),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(Ms){this.intensity=Ms/(4*Math.PI)}}),this.distance=_s!==void 0?_s:0,this.decay=Ss!==void 0?Ss:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.distance=va.distance,this.decay=va.decay,this.shadow=va.shadow.clone(),this}});function OrthographicCamera(va,_a,_s,Ss,Ms,Cs){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=va!==void 0?va:-1,this.right=_a!==void 0?_a:1,this.top=_s!==void 0?_s:1,this.bottom=Ss!==void 0?Ss:-1,this.near=Ms!==void 0?Ms:.1,this.far=Cs!==void 0?Cs:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(va,_a){return Camera.prototype.copy.call(this,va,_a),this.left=va.left,this.right=va.right,this.top=va.top,this.bottom=va.bottom,this.near=va.near,this.far=va.far,this.zoom=va.zoom,this.view=va.view===null?null:Object.assign({},va.view),this},setViewOffset:function(va,_a,_s,Ss,Ms,Cs){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=va,this.view.fullHeight=_a,this.view.offsetX=_s,this.view.offsetY=Ss,this.view.width=Ms,this.view.height=Cs,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var va=(this.right-this.left)/(2*this.zoom),_a=(this.top-this.bottom)/(2*this.zoom),_s=(this.right+this.left)/2,Ss=(this.top+this.bottom)/2,Ms=_s-va,Cs=_s+va,Ts=Ss+_a,Bs=Ss-_a;if(this.view!==null&&this.view.enabled){var Ps=(this.right-this.left)/this.view.fullWidth/this.zoom,Ls=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Ms+=Ps*this.view.offsetX,Cs=Ms+Ps*this.view.width,Ts-=Ls*this.view.offsetY,Bs=Ts-Ls*this.view.height}this.projectionMatrix.makeOrthographic(Ms,Cs,Ts,Bs,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(va){var _a=Object3D.prototype.toJSON.call(this,va);return _a.object.zoom=this.zoom,_a.object.left=this.left,_a.object.right=this.right,_a.object.top=this.top,_a.object.bottom=this.bottom,_a.object.near=this.near,_a.object.far=this.far,this.view!==null&&(_a.object.view=Object.assign({},this.view)),_a}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(va){LightShadow.prototype.updateMatrices.call(this,va)}});function DirectionalLight(va,_a){Light.call(this,va,_a),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.target=va.target.clone(),this.shadow=va.shadow.clone(),this}});function AmbientLight(va,_a){Light.call(this,va,_a),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(va,_a,_s,Ss){Light.call(this,va,_a),this.type="RectAreaLight",this.width=_s!==void 0?_s:10,this.height=Ss!==void 0?Ss:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.width=va.width,this.height=va.height,this},toJSON:function(va){var _a=Light.prototype.toJSON.call(this,va);return _a.object.width=this.width,_a.object.height=this.height,_a}});function SphericalHarmonics3(){this.coefficients=[];for(var va=0;va<9;va++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(va){for(var _a=0;_a<9;_a++)this.coefficients[_a].copy(va[_a]);return this},zero:function(){for(var va=0;va<9;va++)this.coefficients[va].set(0,0,0);return this},getAt:function(va,_a){var _s=va.x,Ss=va.y,Ms=va.z,Cs=this.coefficients;return _a.copy(Cs[0]).multiplyScalar(.282095),_a.addScaledVector(Cs[1],.488603*Ss),_a.addScaledVector(Cs[2],.488603*Ms),_a.addScaledVector(Cs[3],.488603*_s),_a.addScaledVector(Cs[4],1.092548*(_s*Ss)),_a.addScaledVector(Cs[5],1.092548*(Ss*Ms)),_a.addScaledVector(Cs[6],.315392*(3*Ms*Ms-1)),_a.addScaledVector(Cs[7],1.092548*(_s*Ms)),_a.addScaledVector(Cs[8],.546274*(_s*_s-Ss*Ss)),_a},getIrradianceAt:function(va,_a){var _s=va.x,Ss=va.y,Ms=va.z,Cs=this.coefficients;return _a.copy(Cs[0]).multiplyScalar(.886227),_a.addScaledVector(Cs[1],2*.511664*Ss),_a.addScaledVector(Cs[2],2*.511664*Ms),_a.addScaledVector(Cs[3],2*.511664*_s),_a.addScaledVector(Cs[4],2*.429043*_s*Ss),_a.addScaledVector(Cs[5],2*.429043*Ss*Ms),_a.addScaledVector(Cs[6],.743125*Ms*Ms-.247708),_a.addScaledVector(Cs[7],2*.429043*_s*Ms),_a.addScaledVector(Cs[8],.429043*(_s*_s-Ss*Ss)),_a},add:function(va){for(var _a=0;_a<9;_a++)this.coefficients[_a].add(va.coefficients[_a]);return this},addScaledSH:function(va,_a){for(var _s=0;_s<9;_s++)this.coefficients[_s].addScaledVector(va.coefficients[_s],_a);return this},scale:function(va){for(var _a=0;_a<9;_a++)this.coefficients[_a].multiplyScalar(va);return this},lerp:function(va,_a){for(var _s=0;_s<9;_s++)this.coefficients[_s].lerp(va.coefficients[_s],_a);return this},equals:function(va){for(var _a=0;_a<9;_a++)if(!this.coefficients[_a].equals(va.coefficients[_a]))return!1;return!0},copy:function(va){return this.set(va.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(va,_a){_a===void 0&&(_a=0);for(var _s=this.coefficients,Ss=0;Ss<9;Ss++)_s[Ss].fromArray(va,_a+Ss*3);return this},toArray:function(va,_a){va===void 0&&(va=[]),_a===void 0&&(_a=0);for(var _s=this.coefficients,Ss=0;Ss<9;Ss++)_s[Ss].toArray(va,_a+Ss*3);return va}});Object.assign(SphericalHarmonics3,{getBasisAt:function(va,_a){var _s=va.x,Ss=va.y,Ms=va.z;_a[0]=.282095,_a[1]=.488603*Ss,_a[2]=.488603*Ms,_a[3]=.488603*_s,_a[4]=1.092548*_s*Ss,_a[5]=1.092548*Ss*Ms,_a[6]=.315392*(3*Ms*Ms-1),_a[7]=1.092548*_s*Ms,_a[8]=.546274*(_s*_s-Ss*Ss)}});function LightProbe(va,_a){Light.call(this,void 0,_a),this.type="LightProbe",this.sh=va!==void 0?va:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.sh.copy(va.sh),this},fromJSON:function(va){return this.intensity=va.intensity,this.sh.fromArray(va.sh),this},toJSON:function(va){var _a=Light.prototype.toJSON.call(this,va);return _a.object.sh=this.sh.toArray(),_a}});function MaterialLoader(va){Loader.call(this,va),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(va,_a,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setPath(Ms.path),Cs.load(va,function(Ts){try{_a(Ms.parse(JSON.parse(Ts)))}catch(Bs){Ss?Ss(Bs):console.error(Bs),Ms.manager.itemError(va)}},_s,Ss)},parse:function(va){var _a=this.textures;function _s(Ps){return _a[Ps]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Ps),_a[Ps]}var Ss=new Materials[va.type];if(va.uuid!==void 0&&(Ss.uuid=va.uuid),va.name!==void 0&&(Ss.name=va.name),va.color!==void 0&&Ss.color.setHex(va.color),va.roughness!==void 0&&(Ss.roughness=va.roughness),va.metalness!==void 0&&(Ss.metalness=va.metalness),va.sheen!==void 0&&(Ss.sheen=new Color().setHex(va.sheen)),va.emissive!==void 0&&Ss.emissive.setHex(va.emissive),va.specular!==void 0&&Ss.specular.setHex(va.specular),va.shininess!==void 0&&(Ss.shininess=va.shininess),va.clearcoat!==void 0&&(Ss.clearcoat=va.clearcoat),va.clearcoatRoughness!==void 0&&(Ss.clearcoatRoughness=va.clearcoatRoughness),va.fog!==void 0&&(Ss.fog=va.fog),va.flatShading!==void 0&&(Ss.flatShading=va.flatShading),va.blending!==void 0&&(Ss.blending=va.blending),va.combine!==void 0&&(Ss.combine=va.combine),va.side!==void 0&&(Ss.side=va.side),va.opacity!==void 0&&(Ss.opacity=va.opacity),va.transparent!==void 0&&(Ss.transparent=va.transparent),va.alphaTest!==void 0&&(Ss.alphaTest=va.alphaTest),va.depthTest!==void 0&&(Ss.depthTest=va.depthTest),va.depthWrite!==void 0&&(Ss.depthWrite=va.depthWrite),va.colorWrite!==void 0&&(Ss.colorWrite=va.colorWrite),va.stencilWrite!==void 0&&(Ss.stencilWrite=va.stencilWrite),va.stencilWriteMask!==void 0&&(Ss.stencilWriteMask=va.stencilWriteMask),va.stencilFunc!==void 0&&(Ss.stencilFunc=va.stencilFunc),va.stencilRef!==void 0&&(Ss.stencilRef=va.stencilRef),va.stencilFuncMask!==void 0&&(Ss.stencilFuncMask=va.stencilFuncMask),va.stencilFail!==void 0&&(Ss.stencilFail=va.stencilFail),va.stencilZFail!==void 0&&(Ss.stencilZFail=va.stencilZFail),va.stencilZPass!==void 0&&(Ss.stencilZPass=va.stencilZPass),va.wireframe!==void 0&&(Ss.wireframe=va.wireframe),va.wireframeLinewidth!==void 0&&(Ss.wireframeLinewidth=va.wireframeLinewidth),va.wireframeLinecap!==void 0&&(Ss.wireframeLinecap=va.wireframeLinecap),va.wireframeLinejoin!==void 0&&(Ss.wireframeLinejoin=va.wireframeLinejoin),va.rotation!==void 0&&(Ss.rotation=va.rotation),va.linewidth!==1&&(Ss.linewidth=va.linewidth),va.dashSize!==void 0&&(Ss.dashSize=va.dashSize),va.gapSize!==void 0&&(Ss.gapSize=va.gapSize),va.scale!==void 0&&(Ss.scale=va.scale),va.polygonOffset!==void 0&&(Ss.polygonOffset=va.polygonOffset),va.polygonOffsetFactor!==void 0&&(Ss.polygonOffsetFactor=va.polygonOffsetFactor),va.polygonOffsetUnits!==void 0&&(Ss.polygonOffsetUnits=va.polygonOffsetUnits),va.skinning!==void 0&&(Ss.skinning=va.skinning),va.morphTargets!==void 0&&(Ss.morphTargets=va.morphTargets),va.morphNormals!==void 0&&(Ss.morphNormals=va.morphNormals),va.dithering!==void 0&&(Ss.dithering=va.dithering),va.vertexTangents!==void 0&&(Ss.vertexTangents=va.vertexTangents),va.visible!==void 0&&(Ss.visible=va.visible),va.toneMapped!==void 0&&(Ss.toneMapped=va.toneMapped),va.userData!==void 0&&(Ss.userData=va.userData),va.vertexColors!==void 0&&(typeof va.vertexColors=="number"?Ss.vertexColors=va.vertexColors>0:Ss.vertexColors=va.vertexColors),va.uniforms!==void 0)for(var Ms in va.uniforms){var Cs=va.uniforms[Ms];switch(Ss.uniforms[Ms]={},Cs.type){case"t":Ss.uniforms[Ms].value=_s(Cs.value);break;case"c":Ss.uniforms[Ms].value=new Color().setHex(Cs.value);break;case"v2":Ss.uniforms[Ms].value=new Vector2().fromArray(Cs.value);break;case"v3":Ss.uniforms[Ms].value=new Vector3().fromArray(Cs.value);break;case"v4":Ss.uniforms[Ms].value=new Vector4().fromArray(Cs.value);break;case"m3":Ss.uniforms[Ms].value=new Matrix3().fromArray(Cs.value);case"m4":Ss.uniforms[Ms].value=new Matrix4().fromArray(Cs.value);break;default:Ss.uniforms[Ms].value=Cs.value}}if(va.defines!==void 0&&(Ss.defines=va.defines),va.vertexShader!==void 0&&(Ss.vertexShader=va.vertexShader),va.fragmentShader!==void 0&&(Ss.fragmentShader=va.fragmentShader),va.extensions!==void 0)for(var Ts in va.extensions)Ss.extensions[Ts]=va.extensions[Ts];if(va.shading!==void 0&&(Ss.flatShading=va.shading===1),va.size!==void 0&&(Ss.size=va.size),va.sizeAttenuation!==void 0&&(Ss.sizeAttenuation=va.sizeAttenuation),va.map!==void 0&&(Ss.map=_s(va.map)),va.matcap!==void 0&&(Ss.matcap=_s(va.matcap)),va.alphaMap!==void 0&&(Ss.alphaMap=_s(va.alphaMap)),va.bumpMap!==void 0&&(Ss.bumpMap=_s(va.bumpMap)),va.bumpScale!==void 0&&(Ss.bumpScale=va.bumpScale),va.normalMap!==void 0&&(Ss.normalMap=_s(va.normalMap)),va.normalMapType!==void 0&&(Ss.normalMapType=va.normalMapType),va.normalScale!==void 0){var Bs=va.normalScale;Array.isArray(Bs)===!1&&(Bs=[Bs,Bs]),Ss.normalScale=new Vector2().fromArray(Bs)}return va.displacementMap!==void 0&&(Ss.displacementMap=_s(va.displacementMap)),va.displacementScale!==void 0&&(Ss.displacementScale=va.displacementScale),va.displacementBias!==void 0&&(Ss.displacementBias=va.displacementBias),va.roughnessMap!==void 0&&(Ss.roughnessMap=_s(va.roughnessMap)),va.metalnessMap!==void 0&&(Ss.metalnessMap=_s(va.metalnessMap)),va.emissiveMap!==void 0&&(Ss.emissiveMap=_s(va.emissiveMap)),va.emissiveIntensity!==void 0&&(Ss.emissiveIntensity=va.emissiveIntensity),va.specularMap!==void 0&&(Ss.specularMap=_s(va.specularMap)),va.envMap!==void 0&&(Ss.envMap=_s(va.envMap)),va.envMapIntensity!==void 0&&(Ss.envMapIntensity=va.envMapIntensity),va.reflectivity!==void 0&&(Ss.reflectivity=va.reflectivity),va.refractionRatio!==void 0&&(Ss.refractionRatio=va.refractionRatio),va.lightMap!==void 0&&(Ss.lightMap=_s(va.lightMap)),va.lightMapIntensity!==void 0&&(Ss.lightMapIntensity=va.lightMapIntensity),va.aoMap!==void 0&&(Ss.aoMap=_s(va.aoMap)),va.aoMapIntensity!==void 0&&(Ss.aoMapIntensity=va.aoMapIntensity),va.gradientMap!==void 0&&(Ss.gradientMap=_s(va.gradientMap)),va.clearcoatMap!==void 0&&(Ss.clearcoatMap=_s(va.clearcoatMap)),va.clearcoatRoughnessMap!==void 0&&(Ss.clearcoatRoughnessMap=_s(va.clearcoatRoughnessMap)),va.clearcoatNormalMap!==void 0&&(Ss.clearcoatNormalMap=_s(va.clearcoatNormalMap)),va.clearcoatNormalScale!==void 0&&(Ss.clearcoatNormalScale=new Vector2().fromArray(va.clearcoatNormalScale)),Ss},setTextures:function(va){return this.textures=va,this}});var LoaderUtils={decodeText:function(va){if(typeof TextDecoder<"u")return new TextDecoder().decode(va);for(var _a="",_s=0,Ss=va.length;_s<Ss;_s++)_a+=String.fromCharCode(va[_s]);try{return decodeURIComponent(escape(_a))}catch{return _a}},extractUrlBase:function(va){var _a=va.lastIndexOf("/");return _a===-1?"./":va.substr(0,_a+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(va){return BufferGeometry.prototype.copy.call(this,va),this.instanceCount=va.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var va=BufferGeometry.prototype.toJSON.call(this);return va.instanceCount=this.instanceCount,va.isInstancedBufferGeometry=!0,va}});function InstancedBufferAttribute(va,_a,_s,Ss){typeof _s=="number"&&(Ss=_s,_s=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,va,_a,_s),this.meshPerAttribute=Ss||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(va){return BufferAttribute.prototype.copy.call(this,va),this.meshPerAttribute=va.meshPerAttribute,this},toJSON:function(){var va=BufferAttribute.prototype.toJSON.call(this);return va.meshPerAttribute=this.meshPerAttribute,va.isInstancedBufferAttribute=!0,va}});function BufferGeometryLoader(va){Loader.call(this,va)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(va,_a,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setPath(Ms.path),Cs.load(va,function(Ts){try{_a(Ms.parse(JSON.parse(Ts)))}catch(Bs){Ss?Ss(Bs):console.error(Bs),Ms.manager.itemError(va)}},_s,Ss)},parse:function(va){var _a=va.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,_s=va.data.index;if(_s!==void 0){var Ss=new TYPED_ARRAYS[_s.type](_s.array);_a.setIndex(new BufferAttribute(Ss,1))}var Ms=va.data.attributes;for(var Cs in Ms){var Ts=Ms[Cs],Ss=new TYPED_ARRAYS[Ts.type](Ts.array),Bs=Ts.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,Ps=new Bs(Ss,Ts.itemSize,Ts.normalized);Ts.name!==void 0&&(Ps.name=Ts.name),_a.setAttribute(Cs,Ps)}var Ls=va.data.morphAttributes;if(Ls)for(var Cs in Ls){for(var Rs=Ls[Cs],$s=[],Fs=0,Os=Rs.length;Fs<Os;Fs++){var Ts=Rs[Fs],Ss=new TYPED_ARRAYS[Ts.type](Ts.array),Ps=new BufferAttribute(Ss,Ts.itemSize,Ts.normalized);Ts.name!==void 0&&(Ps.name=Ts.name),$s.push(Ps)}_a.morphAttributes[Cs]=$s}var Gs=va.data.morphTargetsRelative;Gs&&(_a.morphTargetsRelative=!0);var Ns=va.data.groups||va.data.drawcalls||va.data.offsets;if(Ns!==void 0)for(var Fs=0,Vs=Ns.length;Fs!==Vs;++Fs){var Ds=Ns[Fs];_a.addGroup(Ds.start,Ds.count,Ds.materialIndex)}var ks=va.data.boundingSphere;if(ks!==void 0){var Us=new Vector3;ks.center!==void 0&&Us.fromArray(ks.center),_a.boundingSphere=new Sphere(Us,ks.radius)}return va.name&&(_a.name=va.name),va.userData&&(_a.userData=va.userData),_a}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(va){Loader.call(this,va)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(va,_a,_s,Ss){var Ms=this,Cs=this.path===""?LoaderUtils.extractUrlBase(va):this.path;this.resourcePath=this.resourcePath||Cs;var Ts=new FileLoader(Ms.manager);Ts.setPath(this.path),Ts.load(va,function(Bs){var Ps=null;try{Ps=JSON.parse(Bs)}catch(Rs){Ss!==void 0&&Ss(Rs),console.error("THREE:ObjectLoader: Can't parse "+va+".",Rs.message);return}var Ls=Ps.metadata;if(Ls===void 0||Ls.type===void 0||Ls.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+va);return}Ms.parse(Ps,_a)},_s,Ss)},parse:function(va,_a){var _s=this.parseShape(va.shapes),Ss=this.parseGeometries(va.geometries,_s),Ms=this.parseImages(va.images,function(){_a!==void 0&&_a(Bs)}),Cs=this.parseTextures(va.textures,Ms),Ts=this.parseMaterials(va.materials,Cs),Bs=this.parseObject(va.object,Ss,Ts);return va.animations&&(Bs.animations=this.parseAnimations(va.animations)),(va.images===void 0||va.images.length===0)&&_a!==void 0&&_a(Bs),Bs},parseShape:function(va){var _a={};if(va!==void 0)for(var _s=0,Ss=va.length;_s<Ss;_s++){var Ms=new Shape().fromJSON(va[_s]);_a[Ms.uuid]=Ms}return _a},parseGeometries:function(va,_a){var _s={};if(va!==void 0)for(var Ss=new BufferGeometryLoader,Ms=0,Cs=va.length;Ms<Cs;Ms++){var Ts,Bs=va[Ms];switch(Bs.type){case"PlaneGeometry":case"PlaneBufferGeometry":Ts=new Geometries[Bs.type](Bs.width,Bs.height,Bs.widthSegments,Bs.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Ts=new Geometries[Bs.type](Bs.width,Bs.height,Bs.depth,Bs.widthSegments,Bs.heightSegments,Bs.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.segments,Bs.thetaStart,Bs.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Ts=new Geometries[Bs.type](Bs.radiusTop,Bs.radiusBottom,Bs.height,Bs.radialSegments,Bs.heightSegments,Bs.openEnded,Bs.thetaStart,Bs.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.height,Bs.radialSegments,Bs.heightSegments,Bs.openEnded,Bs.thetaStart,Bs.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.widthSegments,Bs.heightSegments,Bs.phiStart,Bs.phiLength,Bs.thetaStart,Bs.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.detail);break;case"RingGeometry":case"RingBufferGeometry":Ts=new Geometries[Bs.type](Bs.innerRadius,Bs.outerRadius,Bs.thetaSegments,Bs.phiSegments,Bs.thetaStart,Bs.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.tube,Bs.radialSegments,Bs.tubularSegments,Bs.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.tube,Bs.tubularSegments,Bs.radialSegments,Bs.p,Bs.q);break;case"TubeGeometry":case"TubeBufferGeometry":Ts=new Geometries[Bs.type](new Curves[Bs.path.type]().fromJSON(Bs.path),Bs.tubularSegments,Bs.radius,Bs.radialSegments,Bs.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Ts=new Geometries[Bs.type](Bs.points,Bs.segments,Bs.phiStart,Bs.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Ts=new Geometries[Bs.type](Bs.vertices,Bs.indices,Bs.radius,Bs.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var $s=[],Ps=0,Ls=Bs.shapes.length;Ps<Ls;Ps++){var Rs=_a[Bs.shapes[Ps]];$s.push(Rs)}Ts=new Geometries[Bs.type]($s,Bs.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var $s=[],Ps=0,Ls=Bs.shapes.length;Ps<Ls;Ps++){var Rs=_a[Bs.shapes[Ps]];$s.push(Rs)}var Fs=Bs.options.extrudePath;Fs!==void 0&&(Bs.options.extrudePath=new Curves[Fs.type]().fromJSON(Fs)),Ts=new Geometries[Bs.type]($s,Bs.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Ts=Ss.parse(Bs);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+Bs.type+'"');continue}Ts.uuid=Bs.uuid,Bs.name!==void 0&&(Ts.name=Bs.name),Ts.isBufferGeometry===!0&&Bs.userData!==void 0&&(Ts.userData=Bs.userData),_s[Bs.uuid]=Ts}return _s},parseMaterials:function(va,_a){var _s={},Ss={};if(va!==void 0){var Ms=new MaterialLoader;Ms.setTextures(_a);for(var Cs=0,Ts=va.length;Cs<Ts;Cs++){var Bs=va[Cs];if(Bs.type==="MultiMaterial"){for(var Ps=[],Ls=0;Ls<Bs.materials.length;Ls++){var Rs=Bs.materials[Ls];_s[Rs.uuid]===void 0&&(_s[Rs.uuid]=Ms.parse(Rs)),Ps.push(_s[Rs.uuid])}Ss[Bs.uuid]=Ps}else _s[Bs.uuid]===void 0&&(_s[Bs.uuid]=Ms.parse(Bs)),Ss[Bs.uuid]=_s[Bs.uuid]}}return Ss},parseAnimations:function(va){for(var _a=[],_s=0;_s<va.length;_s++){var Ss=va[_s],Ms=AnimationClip.parse(Ss);Ss.uuid!==void 0&&(Ms.uuid=Ss.uuid),_a.push(Ms)}return _a},parseImages:function(va,_a){var _s=this,Ss={};function Ms(Ns){return _s.manager.itemStart(Ns),Ts.load(Ns,function(){_s.manager.itemEnd(Ns)},void 0,function(){_s.manager.itemError(Ns),_s.manager.itemEnd(Ns)})}if(va!==void 0&&va.length>0){var Cs=new LoadingManager(_a),Ts=new ImageLoader(Cs);Ts.setCrossOrigin(this.crossOrigin);for(var Bs=0,Ps=va.length;Bs<Ps;Bs++){var Ls=va[Bs],Rs=Ls.url;if(Array.isArray(Rs)){Ss[Ls.uuid]=[];for(var $s=0,Fs=Rs.length;$s<Fs;$s++){var Os=Rs[$s],Gs=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Os)?Os:_s.resourcePath+Os;Ss[Ls.uuid].push(Ms(Gs))}}else{var Gs=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Ls.url)?Ls.url:_s.resourcePath+Ls.url;Ss[Ls.uuid]=Ms(Gs)}}}return Ss},parseTextures:function(va,_a){function _s(Ps,Ls){return typeof Ps=="number"?Ps:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Ps),Ls[Ps])}var Ss={};if(va!==void 0)for(var Ms=0,Cs=va.length;Ms<Cs;Ms++){var Ts=va[Ms];Ts.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Ts.uuid),_a[Ts.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Ts.image);var Bs;Array.isArray(_a[Ts.image])?Bs=new CubeTexture(_a[Ts.image]):Bs=new Texture(_a[Ts.image]),Bs.needsUpdate=!0,Bs.uuid=Ts.uuid,Ts.name!==void 0&&(Bs.name=Ts.name),Ts.mapping!==void 0&&(Bs.mapping=_s(Ts.mapping,TEXTURE_MAPPING)),Ts.offset!==void 0&&Bs.offset.fromArray(Ts.offset),Ts.repeat!==void 0&&Bs.repeat.fromArray(Ts.repeat),Ts.center!==void 0&&Bs.center.fromArray(Ts.center),Ts.rotation!==void 0&&(Bs.rotation=Ts.rotation),Ts.wrap!==void 0&&(Bs.wrapS=_s(Ts.wrap[0],TEXTURE_WRAPPING),Bs.wrapT=_s(Ts.wrap[1],TEXTURE_WRAPPING)),Ts.format!==void 0&&(Bs.format=Ts.format),Ts.type!==void 0&&(Bs.type=Ts.type),Ts.encoding!==void 0&&(Bs.encoding=Ts.encoding),Ts.minFilter!==void 0&&(Bs.minFilter=_s(Ts.minFilter,TEXTURE_FILTER)),Ts.magFilter!==void 0&&(Bs.magFilter=_s(Ts.magFilter,TEXTURE_FILTER)),Ts.anisotropy!==void 0&&(Bs.anisotropy=Ts.anisotropy),Ts.flipY!==void 0&&(Bs.flipY=Ts.flipY),Ts.premultiplyAlpha!==void 0&&(Bs.premultiplyAlpha=Ts.premultiplyAlpha),Ts.unpackAlignment!==void 0&&(Bs.unpackAlignment=Ts.unpackAlignment),Ss[Ts.uuid]=Bs}return Ss},parseObject:function(va,_a,_s){var Ss;function Ms(Vs){return _a[Vs]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Vs),_a[Vs]}function Cs(Vs){if(Vs!==void 0){if(Array.isArray(Vs)){for(var Ds=[],ks=0,Us=Vs.length;ks<Us;ks++){var zs=Vs[ks];_s[zs]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",zs),Ds.push(_s[zs])}return Ds}return _s[Vs]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Vs),_s[Vs]}}switch(va.type){case"Scene":Ss=new Scene,va.background!==void 0&&Number.isInteger(va.background)&&(Ss.background=new Color(va.background)),va.fog!==void 0&&(va.fog.type==="Fog"?Ss.fog=new Fog(va.fog.color,va.fog.near,va.fog.far):va.fog.type==="FogExp2"&&(Ss.fog=new FogExp2(va.fog.color,va.fog.density)));break;case"PerspectiveCamera":Ss=new PerspectiveCamera(va.fov,va.aspect,va.near,va.far),va.focus!==void 0&&(Ss.focus=va.focus),va.zoom!==void 0&&(Ss.zoom=va.zoom),va.filmGauge!==void 0&&(Ss.filmGauge=va.filmGauge),va.filmOffset!==void 0&&(Ss.filmOffset=va.filmOffset),va.view!==void 0&&(Ss.view=Object.assign({},va.view));break;case"OrthographicCamera":Ss=new OrthographicCamera(va.left,va.right,va.top,va.bottom,va.near,va.far),va.zoom!==void 0&&(Ss.zoom=va.zoom),va.view!==void 0&&(Ss.view=Object.assign({},va.view));break;case"AmbientLight":Ss=new AmbientLight(va.color,va.intensity);break;case"DirectionalLight":Ss=new DirectionalLight(va.color,va.intensity);break;case"PointLight":Ss=new PointLight(va.color,va.intensity,va.distance,va.decay);break;case"RectAreaLight":Ss=new RectAreaLight(va.color,va.intensity,va.width,va.height);break;case"SpotLight":Ss=new SpotLight(va.color,va.intensity,va.distance,va.angle,va.penumbra,va.decay);break;case"HemisphereLight":Ss=new HemisphereLight(va.color,va.groundColor,va.intensity);break;case"LightProbe":Ss=new LightProbe().fromJSON(va);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var Ts=Ms(va.geometry),Bs=Cs(va.material);Ss=new Mesh(Ts,Bs);break;case"InstancedMesh":var Ts=Ms(va.geometry),Bs=Cs(va.material),Ps=va.count,Ls=va.instanceMatrix;Ss=new InstancedMesh(Ts,Bs,Ps),Ss.instanceMatrix=new BufferAttribute(new Float32Array(Ls.array),16);break;case"LOD":Ss=new LOD;break;case"Line":Ss=new Line$1(Ms(va.geometry),Cs(va.material),va.mode);break;case"LineLoop":Ss=new LineLoop(Ms(va.geometry),Cs(va.material));break;case"LineSegments":Ss=new LineSegments(Ms(va.geometry),Cs(va.material));break;case"PointCloud":case"Points":Ss=new Points(Ms(va.geometry),Cs(va.material));break;case"Sprite":Ss=new Sprite(Cs(va.material));break;case"Group":Ss=new Group$1;break;default:Ss=new Object3D}if(Ss.uuid=va.uuid,va.name!==void 0&&(Ss.name=va.name),va.matrix!==void 0?(Ss.matrix.fromArray(va.matrix),va.matrixAutoUpdate!==void 0&&(Ss.matrixAutoUpdate=va.matrixAutoUpdate),Ss.matrixAutoUpdate&&Ss.matrix.decompose(Ss.position,Ss.quaternion,Ss.scale)):(va.position!==void 0&&Ss.position.fromArray(va.position),va.rotation!==void 0&&Ss.rotation.fromArray(va.rotation),va.quaternion!==void 0&&Ss.quaternion.fromArray(va.quaternion),va.scale!==void 0&&Ss.scale.fromArray(va.scale)),va.castShadow!==void 0&&(Ss.castShadow=va.castShadow),va.receiveShadow!==void 0&&(Ss.receiveShadow=va.receiveShadow),va.shadow&&(va.shadow.bias!==void 0&&(Ss.shadow.bias=va.shadow.bias),va.shadow.radius!==void 0&&(Ss.shadow.radius=va.shadow.radius),va.shadow.mapSize!==void 0&&Ss.shadow.mapSize.fromArray(va.shadow.mapSize),va.shadow.camera!==void 0&&(Ss.shadow.camera=this.parseObject(va.shadow.camera))),va.visible!==void 0&&(Ss.visible=va.visible),va.frustumCulled!==void 0&&(Ss.frustumCulled=va.frustumCulled),va.renderOrder!==void 0&&(Ss.renderOrder=va.renderOrder),va.userData!==void 0&&(Ss.userData=va.userData),va.layers!==void 0&&(Ss.layers.mask=va.layers),va.children!==void 0)for(var Rs=va.children,$s=0;$s<Rs.length;$s++)Ss.add(this.parseObject(Rs[$s],_a,_s));if(va.type==="LOD"){va.autoUpdate!==void 0&&(Ss.autoUpdate=va.autoUpdate);for(var Fs=va.levels,Os=0;Os<Fs.length;Os++){var Gs=Fs[Os],Ns=Ss.getObjectByProperty("uuid",Gs.object);Ns!==void 0&&Ss.addLevel(Ns,Gs.distance)}}return Ss}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(va){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,va),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function(_a){return this.options=_a,this},load:function(va,_a,_s,Ss){va===void 0&&(va=""),this.path!==void 0&&(va=this.path+va),va=this.manager.resolveURL(va);var Ms=this,Cs=Cache.get(va);if(Cs!==void 0)return Ms.manager.itemStart(va),setTimeout(function(){_a&&_a(Cs),Ms.manager.itemEnd(va)},0),Cs;fetch(va).then(function(Ts){return Ts.blob()}).then(function(Ts){return Ms.options===void 0?createImageBitmap(Ts):createImageBitmap(Ts,Ms.options)}).then(function(Ts){Cache.add(va,Ts),_a&&_a(Ts),Ms.manager.itemEnd(va)}).catch(function(Ts){Ss&&Ss(Ts),Ms.manager.itemError(va),Ms.manager.itemEnd(va)}),Ms.manager.itemStart(va)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(va,_a){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(va,_a),this},lineTo:function(va,_a){return this.currentPath.lineTo(va,_a),this},quadraticCurveTo:function(va,_a,_s,Ss){return this.currentPath.quadraticCurveTo(va,_a,_s,Ss),this},bezierCurveTo:function(va,_a,_s,Ss,Ms,Cs){return this.currentPath.bezierCurveTo(va,_a,_s,Ss,Ms,Cs),this},splineThru:function(va){return this.currentPath.splineThru(va),this},toShapes:function(va,_a){function _s(Ys){for(var rl=[],tl=0,il=Ys.length;tl<il;tl++){var ll=Ys[tl],cl=new Shape;cl.curves=ll.curves,rl.push(cl)}return rl}function Ss(Ys,rl){for(var tl=rl.length,il=!1,ll=tl-1,cl=0;cl<tl;ll=cl++){var al=rl[ll],dl=rl[cl],yl=dl.x-al.x,xl=dl.y-al.y;if(Math.abs(xl)>Number.EPSILON){if(xl<0&&(al=rl[cl],yl=-yl,dl=rl[ll],xl=-xl),Ys.y<al.y||Ys.y>dl.y)continue;if(Ys.y===al.y){if(Ys.x===al.x)return!0}else{var wl=xl*(Ys.x-al.x)-yl*(Ys.y-al.y);if(wl===0)return!0;if(wl<0)continue;il=!il}}else{if(Ys.y!==al.y)continue;if(dl.x<=Ys.x&&Ys.x<=al.x||al.x<=Ys.x&&Ys.x<=dl.x)return!0}}return il}var Ms=ShapeUtils.isClockWise,Cs=this.subPaths;if(Cs.length===0)return[];if(_a===!0)return _s(Cs);var Ts,Bs,Ps,Ls=[];if(Cs.length===1)return Bs=Cs[0],Ps=new Shape,Ps.curves=Bs.curves,Ls.push(Ps),Ls;var Rs=!Ms(Cs[0].getPoints());Rs=va?!Rs:Rs;var $s=[],Fs=[],Os=[],Gs=0,Ns;Fs[Gs]=void 0,Os[Gs]=[];for(var Vs=0,Ds=Cs.length;Vs<Ds;Vs++)Bs=Cs[Vs],Ns=Bs.getPoints(),Ts=Ms(Ns),Ts=va?!Ts:Ts,Ts?(!Rs&&Fs[Gs]&&Gs++,Fs[Gs]={s:new Shape,p:Ns},Fs[Gs].s.curves=Bs.curves,Rs&&Gs++,Os[Gs]=[]):Os[Gs].push({h:Bs,p:Ns[0]});if(!Fs[0])return _s(Cs);if(Fs.length>1){for(var ks=!1,Us=[],zs=0,Ws=Fs.length;zs<Ws;zs++)$s[zs]=[];for(var zs=0,Ws=Fs.length;zs<Ws;zs++)for(var qs=Os[zs],Zs=0;Zs<qs.length;Zs++){for(var el=qs[Zs],Js=!0,Hs=0;Hs<Fs.length;Hs++)Ss(el.p,Fs[Hs].p)&&(zs!==Hs&&Us.push({froms:zs,tos:Hs,hole:Zs}),Js?(Js=!1,$s[Hs].push(el)):ks=!0);Js&&$s[zs].push(el)}Us.length>0&&(ks||(Os=$s))}for(var Qs,Vs=0,js=Fs.length;Vs<js;Vs++){Ps=Fs[Vs].s,Ls.push(Ps),Qs=Os[Vs];for(var Ks=0,Xs=Qs.length;Ks<Xs;Ks++)Ps.holes.push(Qs[Ks].h)}return Ls}});function Font(va){this.type="Font",this.data=va}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(va,_a){_a===void 0&&(_a=100);for(var _s=[],Ss=createPaths(va,_a,this.data),Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Array.prototype.push.apply(_s,Ss[Ms].toShapes());return _s}});function createPaths(va,_a,_s){for(var Ss=Array.from?Array.from(va):String(va).split(""),Ms=_a/_s.resolution,Cs=(_s.boundingBox.yMax-_s.boundingBox.yMin+_s.underlineThickness)*Ms,Ts=[],Bs=0,Ps=0,Ls=0;Ls<Ss.length;Ls++){var Rs=Ss[Ls];if(Rs===`
`)Bs=0,Ps-=Cs;else{var $s=createPath(Rs,Ms,Bs,Ps,_s);Bs+=$s.offsetX,Ts.push($s.path)}}return Ts}function createPath(va,_a,_s,Ss,Ms){var Cs=Ms.glyphs[va]||Ms.glyphs["?"];if(!Cs){console.error('THREE.Font: character "'+va+'" does not exists in font family '+Ms.familyName+".");return}var Ts=new ShapePath,Bs,Ps,Ls,Rs,$s,Fs,Os,Gs;if(Cs.o)for(var Ns=Cs._cachedOutline||(Cs._cachedOutline=Cs.o.split(" ")),Vs=0,Ds=Ns.length;Vs<Ds;){var ks=Ns[Vs++];switch(ks){case"m":Bs=Ns[Vs++]*_a+_s,Ps=Ns[Vs++]*_a+Ss,Ts.moveTo(Bs,Ps);break;case"l":Bs=Ns[Vs++]*_a+_s,Ps=Ns[Vs++]*_a+Ss,Ts.lineTo(Bs,Ps);break;case"q":Ls=Ns[Vs++]*_a+_s,Rs=Ns[Vs++]*_a+Ss,$s=Ns[Vs++]*_a+_s,Fs=Ns[Vs++]*_a+Ss,Ts.quadraticCurveTo($s,Fs,Ls,Rs);break;case"b":Ls=Ns[Vs++]*_a+_s,Rs=Ns[Vs++]*_a+Ss,$s=Ns[Vs++]*_a+_s,Fs=Ns[Vs++]*_a+Ss,Os=Ns[Vs++]*_a+_s,Gs=Ns[Vs++]*_a+Ss,Ts.bezierCurveTo($s,Fs,Os,Gs,Ls,Rs);break}}return{offsetX:Cs.ha*_a,path:Ts}}function FontLoader(va){Loader.call(this,va)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(va,_a,_s,Ss){var Ms=this,Cs=new FileLoader(this.manager);Cs.setPath(this.path),Cs.load(va,function(Ts){var Bs;try{Bs=JSON.parse(Ts)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Bs=JSON.parse(Ts.substring(65,Ts.length-2))}var Ps=Ms.parse(Bs);_a&&_a(Ps)},_s,Ss)},parse:function(va){return new Font(va)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(va){_context=va}};function AudioLoader(va){Loader.call(this,va)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(va,_a,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setResponseType("arraybuffer"),Cs.setPath(Ms.path),Cs.load(va,function(Ts){try{var Bs=Ts.slice(0),Ps=AudioContext.getContext();Ps.decodeAudioData(Bs,function(Ls){_a(Ls)})}catch(Ls){Ss?Ss(Ls):console.error(Ls),Ms.manager.itemError(va)}},_s,Ss)}});function HemisphereLightProbe(va,_a,_s){LightProbe.call(this,void 0,_s);var Ss=new Color().set(va),Ms=new Color().set(_a),Cs=new Vector3(Ss.r,Ss.g,Ss.b),Ts=new Vector3(Ms.r,Ms.g,Ms.b),Bs=Math.sqrt(Math.PI),Ps=Bs*Math.sqrt(.75);this.sh.coefficients[0].copy(Cs).add(Ts).multiplyScalar(Bs),this.sh.coefficients[1].copy(Cs).sub(Ts).multiplyScalar(Ps)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(va){return LightProbe.prototype.copy.call(this,va),this},toJSON:function(va){var _a=LightProbe.prototype.toJSON.call(this,va);return _a}});function AmbientLightProbe(va,_a){LightProbe.call(this,void 0,_a);var _s=new Color().set(va);this.sh.coefficients[0].set(_s.r,_s.g,_s.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(va){return LightProbe.prototype.copy.call(this,va),this},toJSON:function(va){var _a=LightProbe.prototype.toJSON.call(this,va);return _a}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(va){var _a=this._cache,_s=_a.focus!==va.focus||_a.fov!==va.fov||_a.aspect!==va.aspect*this.aspect||_a.near!==va.near||_a.far!==va.far||_a.zoom!==va.zoom||_a.eyeSep!==this.eyeSep;if(_s){_a.focus=va.focus,_a.fov=va.fov,_a.aspect=va.aspect*this.aspect,_a.near=va.near,_a.far=va.far,_a.zoom=va.zoom,_a.eyeSep=this.eyeSep;var Ss=va.projectionMatrix.clone(),Ms=_a.eyeSep/2,Cs=Ms*_a.near/_a.focus,Ts=_a.near*Math.tan(MathUtils.DEG2RAD*_a.fov*.5)/_a.zoom,Bs,Ps;_eyeLeft.elements[12]=-Ms,_eyeRight.elements[12]=Ms,Bs=-Ts*_a.aspect+Cs,Ps=Ts*_a.aspect+Cs,Ss.elements[0]=2*_a.near/(Ps-Bs),Ss.elements[8]=(Ps+Bs)/(Ps-Bs),this.cameraL.projectionMatrix.copy(Ss),Bs=-Ts*_a.aspect-Cs,Ps=Ts*_a.aspect-Cs,Ss.elements[0]=2*_a.near/(Ps-Bs),Ss.elements[8]=(Ps+Bs)/(Ps-Bs),this.cameraR.projectionMatrix.copy(Ss)}this.cameraL.matrixWorld.copy(va.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(va.matrixWorld).multiply(_eyeRight)}});function Clock(va){this.autoStart=va!==void 0?va:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var va=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var _a=(typeof performance>"u"?Date:performance).now();va=(_a-this.oldTime)/1e3,this.oldTime=_a,this.elapsedTime+=va}return va}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(va){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=va,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(va){return this.gain.gain.setTargetAtTime(va,this.context.currentTime,.01),this},updateMatrixWorld:function(va){Object3D.prototype.updateMatrixWorld.call(this,va);var _a=this.context.listener,_s=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),_a.positionX){var Ss=this.context.currentTime+this.timeDelta;_a.positionX.linearRampToValueAtTime(_position$2.x,Ss),_a.positionY.linearRampToValueAtTime(_position$2.y,Ss),_a.positionZ.linearRampToValueAtTime(_position$2.z,Ss),_a.forwardX.linearRampToValueAtTime(_orientation.x,Ss),_a.forwardY.linearRampToValueAtTime(_orientation.y,Ss),_a.forwardZ.linearRampToValueAtTime(_orientation.z,Ss),_a.upX.linearRampToValueAtTime(_s.x,Ss),_a.upY.linearRampToValueAtTime(_s.y,Ss),_a.upZ.linearRampToValueAtTime(_s.z,Ss)}else _a.setPosition(_position$2.x,_position$2.y,_position$2.z),_a.setOrientation(_orientation.x,_orientation.y,_orientation.z,_s.x,_s.y,_s.z)}});function Audio(va){Object3D.call(this),this.type="Audio",this.listener=va,this.context=va.context,this.gain=this.context.createGain(),this.gain.connect(va.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio,getOutput:function(){return this.gain},setNodeSource:function(va){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=va,this.connect(),this},setMediaElementSource:function(va){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(va),this.connect(),this},setMediaStreamSource:function(va){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(va),this.connect(),this},setBuffer:function(va){return this.buffer=va,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(va){if(va===void 0&&(va=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+va;var _a=this.context.createBufferSource();return _a.buffer=this.buffer,_a.loop=this.loop,_a.loopStart=this.loopStart,_a.loopEnd=this.loopEnd,_a.onended=this.onEnded.bind(this),_a.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=_a,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var va=1,_a=this.filters.length;va<_a;va++)this.filters[va-1].connect(this.filters[va]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var va=1,_a=this.filters.length;va<_a;va++)this.filters[va-1].disconnect(this.filters[va]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(va){return va||(va=[]),this.isPlaying===!0?(this.disconnect(),this.filters=va,this.connect()):this.filters=va,this},setDetune:function(va){if(this.detune=va,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(va){return this.setFilters(va?[va]:[])},setPlaybackRate:function(va){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=va,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(va){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=va,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(va){return this.loopStart=va,this},setLoopEnd:function(va){return this.loopEnd=va,this},getVolume:function(){return this.gain.gain.value},setVolume:function(va){return this.gain.gain.setTargetAtTime(va,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(va){Audio.call(this,va),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(va){return this.panner.refDistance=va,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(va){return this.panner.rolloffFactor=va,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(va){return this.panner.distanceModel=va,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(va){return this.panner.maxDistance=va,this},setDirectionalCone:function(va,_a,_s){return this.panner.coneInnerAngle=va,this.panner.coneOuterAngle=_a,this.panner.coneOuterGain=_s,this},updateMatrixWorld:function(va){if(Object3D.prototype.updateMatrixWorld.call(this,va),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var _a=this.panner;if(_a.positionX){var _s=this.context.currentTime+this.listener.timeDelta;_a.positionX.linearRampToValueAtTime(_position$3.x,_s),_a.positionY.linearRampToValueAtTime(_position$3.y,_s),_a.positionZ.linearRampToValueAtTime(_position$3.z,_s),_a.orientationX.linearRampToValueAtTime(_orientation$1.x,_s),_a.orientationY.linearRampToValueAtTime(_orientation$1.y,_s),_a.orientationZ.linearRampToValueAtTime(_orientation$1.z,_s)}else _a.setPosition(_position$3.x,_position$3.y,_position$3.z),_a.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(va,_a){this.analyser=va.context.createAnalyser(),this.analyser.fftSize=_a!==void 0?_a:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),va.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var va=0,_a=this.getFrequencyData(),_s=0;_s<_a.length;_s++)va+=_a[_s];return va/_a.length}});function PropertyMixer(va,_a,_s){this.binding=va,this.valueSize=_s;var Ss,Ms,Cs;switch(_a){case"quaternion":Ss=this._slerp,Ms=this._slerpAdditive,Cs=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(_s*6),this._workIndex=5;break;case"string":case"bool":Ss=this._select,Ms=this._select,Cs=this._setAdditiveIdentityOther,this.buffer=new Array(_s*5);break;default:Ss=this._lerp,Ms=this._lerpAdditive,Cs=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(_s*5)}this._mixBufferRegion=Ss,this._mixBufferRegionAdditive=Ms,this._setIdentity=Cs,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(va,_a){var _s=this.buffer,Ss=this.valueSize,Ms=va*Ss+Ss,Cs=this.cumulativeWeight;if(Cs===0){for(var Ts=0;Ts!==Ss;++Ts)_s[Ms+Ts]=_s[Ts];Cs=_a}else{Cs+=_a;var Bs=_a/Cs;this._mixBufferRegion(_s,Ms,0,Bs,Ss)}this.cumulativeWeight=Cs},accumulateAdditive:function(va){var _a=this.buffer,_s=this.valueSize,Ss=_s*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(_a,Ss,0,va,_s),this.cumulativeWeightAdditive+=va},apply:function(va){var _a=this.valueSize,_s=this.buffer,Ss=va*_a+_a,Ms=this.cumulativeWeight,Cs=this.cumulativeWeightAdditive,Ts=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Ms<1){var Bs=_a*this._origIndex;this._mixBufferRegion(_s,Ss,Bs,1-Ms,_a)}Cs>0&&this._mixBufferRegionAdditive(_s,Ss,this._addIndex*_a,1,_a);for(var Ps=_a,Ls=_a+_a;Ps!==Ls;++Ps)if(_s[Ps]!==_s[Ps+_a]){Ts.setValue(_s,Ss);break}},saveOriginalState:function(){var va=this.binding,_a=this.buffer,_s=this.valueSize,Ss=_s*this._origIndex;va.getValue(_a,Ss);for(var Ms=_s,Cs=Ss;Ms!==Cs;++Ms)_a[Ms]=_a[Ss+Ms%_s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var va=this.valueSize*3;this.binding.setValue(this.buffer,va)},_setAdditiveIdentityNumeric:function(){for(var va=this._addIndex*this.valueSize,_a=va+this.valueSize,_s=va;_s<_a;_s++)this.buffer[_s]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var va=this._origIndex*this.valueSize,_a=this._addIndex*this.valueSize,_s=0;_s<this.valueSize;_s++)this.buffer[_a+_s]=this.buffer[va+_s]},_select:function(va,_a,_s,Ss,Ms){if(Ss>=.5)for(var Cs=0;Cs!==Ms;++Cs)va[_a+Cs]=va[_s+Cs]},_slerp:function(va,_a,_s,Ss){Quaternion.slerpFlat(va,_a,va,_a,va,_s,Ss)},_slerpAdditive:function(va,_a,_s,Ss,Ms){var Cs=this._workIndex*Ms;Quaternion.multiplyQuaternionsFlat(va,Cs,va,_a,va,_s),Quaternion.slerpFlat(va,_a,va,_a,va,Cs,Ss)},_lerp:function(va,_a,_s,Ss,Ms){for(var Cs=1-Ss,Ts=0;Ts!==Ms;++Ts){var Bs=_a+Ts;va[Bs]=va[Bs]*Cs+va[_s+Ts]*Ss}},_lerpAdditive:function(va,_a,_s,Ss,Ms){for(var Cs=0;Cs!==Ms;++Cs){var Ts=_a+Cs;va[Ts]=va[Ts]+va[_s+Cs]*Ss}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(va,_a,_s){var Ss=_s||PropertyBinding.parseTrackName(_a);this._targetGroup=va,this._bindings=va.subscribe_(_a,Ss)}Object.assign(Composite.prototype,{getValue:function(va,_a){this.bind();var _s=this._targetGroup.nCachedObjects_,Ss=this._bindings[_s];Ss!==void 0&&Ss.getValue(va,_a)},setValue:function(va,_a){for(var _s=this._bindings,Ss=this._targetGroup.nCachedObjects_,Ms=_s.length;Ss!==Ms;++Ss)_s[Ss].setValue(va,_a)},bind:function(){for(var va=this._bindings,_a=this._targetGroup.nCachedObjects_,_s=va.length;_a!==_s;++_a)va[_a].bind()},unbind:function(){for(var va=this._bindings,_a=this._targetGroup.nCachedObjects_,_s=va.length;_a!==_s;++_a)va[_a].unbind()}});function PropertyBinding(va,_a,_s){this.path=_a,this.parsedPath=_s||PropertyBinding.parseTrackName(_a),this.node=PropertyBinding.findNode(va,this.parsedPath.nodeName)||va,this.rootNode=va}Object.assign(PropertyBinding,{Composite,create:function(va,_a,_s){return va&&va.isAnimationObjectGroup?new PropertyBinding.Composite(va,_a,_s):new PropertyBinding(va,_a,_s)},sanitizeNodeName:function(va){return va.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(va){var _a=_trackRe.exec(va);if(!_a)throw new Error("PropertyBinding: Cannot parse trackName: "+va);var _s={nodeName:_a[2],objectName:_a[3],objectIndex:_a[4],propertyName:_a[5],propertyIndex:_a[6]},Ss=_s.nodeName&&_s.nodeName.lastIndexOf(".");if(Ss!==void 0&&Ss!==-1){var Ms=_s.nodeName.substring(Ss+1);_supportedObjectNames.indexOf(Ms)!==-1&&(_s.nodeName=_s.nodeName.substring(0,Ss),_s.objectName=Ms)}if(_s.propertyName===null||_s.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+va);return _s},findNode:function(va,_a){if(!_a||_a===""||_a==="."||_a===-1||_a===va.name||_a===va.uuid)return va;if(va.skeleton){var _s=va.skeleton.getBoneByName(_a);if(_s!==void 0)return _s}if(va.children){var Ss=function(Cs){for(var Ts=0;Ts<Cs.length;Ts++){var Bs=Cs[Ts];if(Bs.name===_a||Bs.uuid===_a)return Bs;var Ps=Ss(Bs.children);if(Ps)return Ps}return null},Ms=Ss(va.children);if(Ms)return Ms}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(_a,_s){_a[_s]=this.node[this.propertyName]},function(_a,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)_a[_s++]=Ss[Ms]},function(_a,_s){_a[_s]=this.resolvedProperty[this.propertyIndex]},function(_a,_s){this.resolvedProperty.toArray(_a,_s)}],SetterByBindingTypeAndVersioning:[[function(_a,_s){this.targetObject[this.propertyName]=_a[_s]},function(_a,_s){this.targetObject[this.propertyName]=_a[_s],this.targetObject.needsUpdate=!0},function(_a,_s){this.targetObject[this.propertyName]=_a[_s],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(_a,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)Ss[Ms]=_a[_s++]},function(_a,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)Ss[Ms]=_a[_s++];this.targetObject.needsUpdate=!0},function(_a,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)Ss[Ms]=_a[_s++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(_a,_s){this.resolvedProperty[this.propertyIndex]=_a[_s]},function(_a,_s){this.resolvedProperty[this.propertyIndex]=_a[_s],this.targetObject.needsUpdate=!0},function(_a,_s){this.resolvedProperty[this.propertyIndex]=_a[_s],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(_a,_s){this.resolvedProperty.fromArray(_a,_s)},function(_a,_s){this.resolvedProperty.fromArray(_a,_s),this.targetObject.needsUpdate=!0},function(_a,_s){this.resolvedProperty.fromArray(_a,_s),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(_a,_s){this.bind(),this.getValue(_a,_s)},setValue:function(_a,_s){this.bind(),this.setValue(_a,_s)},bind:function(){var va=this.node,_a=this.parsedPath,_s=_a.objectName,Ss=_a.propertyName,Ms=_a.propertyIndex;if(va||(va=PropertyBinding.findNode(this.rootNode,_a.nodeName)||this.rootNode,this.node=va),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!va){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(_s){var Cs=_a.objectIndex;switch(_s){case"materials":if(!va.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!va.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}va=va.material.materials;break;case"bones":if(!va.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}va=va.skeleton.bones;for(var Ts=0;Ts<va.length;Ts++)if(va[Ts].name===Cs){Cs=Ts;break}break;default:if(va[_s]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}va=va[_s]}if(Cs!==void 0){if(va[Cs]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,va);return}va=va[Cs]}}var Bs=va[Ss];if(Bs===void 0){var Ps=_a.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Ps+"."+Ss+" but it wasn't found.",va);return}var Ls=this.Versioning.None;this.targetObject=va,va.needsUpdate!==void 0?Ls=this.Versioning.NeedsUpdate:va.matrixWorldNeedsUpdate!==void 0&&(Ls=this.Versioning.MatrixWorldNeedsUpdate);var Rs=this.BindingType.Direct;if(Ms!==void 0){if(Ss==="morphTargetInfluences"){if(!va.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(va.geometry.isBufferGeometry){if(!va.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}va.morphTargetDictionary[Ms]!==void 0&&(Ms=va.morphTargetDictionary[Ms])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}Rs=this.BindingType.ArrayElement,this.resolvedProperty=Bs,this.propertyIndex=Ms}else Bs.fromArray!==void 0&&Bs.toArray!==void 0?(Rs=this.BindingType.HasFromToArray,this.resolvedProperty=Bs):Array.isArray(Bs)?(Rs=this.BindingType.EntireArray,this.resolvedProperty=Bs):this.propertyName=Ss;this.getValue=this.GetterByBindingType[Rs],this.setValue=this.SetterByBindingTypeAndVersioning[Rs][Ls]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var va={};this._indicesByUUID=va;for(var _a=0,_s=arguments.length;_a!==_s;++_a)va[arguments[_a].uuid]=_a;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var Ss=this;this.stats={objects:{get total(){return Ss._objects.length},get inUse(){return this.total-Ss.nCachedObjects_}},get bindingsPerObject(){return Ss._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var va=this._objects,_a=va.length,_s=this.nCachedObjects_,Ss=this._indicesByUUID,Ms=this._paths,Cs=this._parsedPaths,Ts=this._bindings,Bs=Ts.length,Ps=void 0,Ls=0,Rs=arguments.length;Ls!==Rs;++Ls){var $s=arguments[Ls],Fs=$s.uuid,Os=Ss[Fs];if(Os===void 0){Os=_a++,Ss[Fs]=Os,va.push($s);for(var Gs=0,Ns=Bs;Gs!==Ns;++Gs)Ts[Gs].push(new PropertyBinding($s,Ms[Gs],Cs[Gs]))}else if(Os<_s){Ps=va[Os];var Vs=--_s,Ds=va[Vs];Ss[Ds.uuid]=Os,va[Os]=Ds,Ss[Fs]=Vs,va[Vs]=$s;for(var Gs=0,Ns=Bs;Gs!==Ns;++Gs){var ks=Ts[Gs],Us=ks[Vs],zs=ks[Os];ks[Os]=Us,zs===void 0&&(zs=new PropertyBinding($s,Ms[Gs],Cs[Gs])),ks[Vs]=zs}}else va[Os]!==Ps&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=_s},remove:function(){for(var va=this._objects,_a=this.nCachedObjects_,_s=this._indicesByUUID,Ss=this._bindings,Ms=Ss.length,Cs=0,Ts=arguments.length;Cs!==Ts;++Cs){var Bs=arguments[Cs],Ps=Bs.uuid,Ls=_s[Ps];if(Ls!==void 0&&Ls>=_a){var Rs=_a++,$s=va[Rs];_s[$s.uuid]=Ls,va[Ls]=$s,_s[Ps]=Rs,va[Rs]=Bs;for(var Fs=0,Os=Ms;Fs!==Os;++Fs){var Gs=Ss[Fs],Ns=Gs[Rs],Vs=Gs[Ls];Gs[Ls]=Ns,Gs[Rs]=Vs}}}this.nCachedObjects_=_a},uncache:function(){for(var va=this._objects,_a=va.length,_s=this.nCachedObjects_,Ss=this._indicesByUUID,Ms=this._bindings,Cs=Ms.length,Ts=0,Bs=arguments.length;Ts!==Bs;++Ts){var Ps=arguments[Ts],Ls=Ps.uuid,Rs=Ss[Ls];if(Rs!==void 0)if(delete Ss[Ls],Rs<_s){var $s=--_s,Fs=va[$s],Os=--_a,Gs=va[Os];Ss[Fs.uuid]=Rs,va[Rs]=Fs,Ss[Gs.uuid]=$s,va[$s]=Gs,va.pop();for(var Ns=0,Vs=Cs;Ns!==Vs;++Ns){var Ds=Ms[Ns],ks=Ds[$s],Us=Ds[Os];Ds[Rs]=ks,Ds[$s]=Us,Ds.pop()}}else{var Os=--_a,Gs=va[Os];Ss[Gs.uuid]=Rs,va[Rs]=Gs,va.pop();for(var Ns=0,Vs=Cs;Ns!==Vs;++Ns){var Ds=Ms[Ns];Ds[Rs]=Ds[Os],Ds.pop()}}}this.nCachedObjects_=_s},subscribe_:function(va,_a){var _s=this._bindingsIndicesByPath,Ss=_s[va],Ms=this._bindings;if(Ss!==void 0)return Ms[Ss];var Cs=this._paths,Ts=this._parsedPaths,Bs=this._objects,Ps=Bs.length,Ls=this.nCachedObjects_,Rs=new Array(Ps);Ss=Ms.length,_s[va]=Ss,Cs.push(va),Ts.push(_a),Ms.push(Rs);for(var $s=Ls,Fs=Bs.length;$s!==Fs;++$s){var Os=Bs[$s];Rs[$s]=new PropertyBinding(Os,va,_a)}return Rs},unsubscribe_:function(va){var _a=this._bindingsIndicesByPath,_s=_a[va];if(_s!==void 0){var Ss=this._paths,Ms=this._parsedPaths,Cs=this._bindings,Ts=Cs.length-1,Bs=Cs[Ts],Ps=va[Ts];_a[Ps]=_s,Cs[_s]=Bs,Cs.pop(),Ms[_s]=Ms[Ts],Ms.pop(),Ss[_s]=Ss[Ts],Ss.pop()}}});function AnimationAction(va,_a,_s,Ss){this._mixer=va,this._clip=_a,this._localRoot=_s||null,this.blendMode=Ss||_a.blendMode;for(var Ms=_a.tracks,Cs=Ms.length,Ts=new Array(Cs),Bs={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},Ps=0;Ps!==Cs;++Ps){var Ls=Ms[Ps].createInterpolant(null);Ts[Ps]=Ls,Ls.settings=Bs}this._interpolantSettings=Bs,this._interpolants=Ts,this._propertyBindings=new Array(Cs),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(va){return this._startTime=va,this},setLoop:function(va,_a){return this.loop=va,this.repetitions=_a,this},setEffectiveWeight:function(va){return this.weight=va,this._effectiveWeight=this.enabled?va:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(va){return this._scheduleFading(va,0,1)},fadeOut:function(va){return this._scheduleFading(va,1,0)},crossFadeFrom:function(va,_a,_s){if(va.fadeOut(_a),this.fadeIn(_a),_s){var Ss=this._clip.duration,Ms=va._clip.duration,Cs=Ms/Ss,Ts=Ss/Ms;va.warp(1,Cs,_a),this.warp(Ts,1,_a)}return this},crossFadeTo:function(va,_a,_s){return va.crossFadeFrom(this,_a,_s)},stopFading:function(){var va=this._weightInterpolant;return va!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(va)),this},setEffectiveTimeScale:function(va){return this.timeScale=va,this._effectiveTimeScale=this.paused?0:va,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(va){return this.timeScale=this._clip.duration/va,this.stopWarping()},syncWith:function(va){return this.time=va.time,this.timeScale=va.timeScale,this.stopWarping()},halt:function(va){return this.warp(this._effectiveTimeScale,0,va)},warp:function(va,_a,_s){var Ss=this._mixer,Ms=Ss.time,Cs=this._timeScaleInterpolant,Ts=this.timeScale;Cs===null&&(Cs=Ss._lendControlInterpolant(),this._timeScaleInterpolant=Cs);var Bs=Cs.parameterPositions,Ps=Cs.sampleValues;return Bs[0]=Ms,Bs[1]=Ms+_s,Ps[0]=va/Ts,Ps[1]=_a/Ts,this},stopWarping:function(){var va=this._timeScaleInterpolant;return va!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(va)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(va,_a,_s,Ss){if(!this.enabled){this._updateWeight(va);return}var Ms=this._startTime;if(Ms!==null){var Cs=(va-Ms)*_s;if(Cs<0||_s===0)return;this._startTime=null,_a=_s*Cs}_a*=this._updateTimeScale(va);var Ts=this._updateTime(_a),Bs=this._updateWeight(va);if(Bs>0){var Ps=this._interpolants,Ls=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var Rs=0,$s=Ps.length;Rs!==$s;++Rs)Ps[Rs].evaluate(Ts),Ls[Rs].accumulateAdditive(Bs);break;case NormalAnimationBlendMode:default:for(var Rs=0,$s=Ps.length;Rs!==$s;++Rs)Ps[Rs].evaluate(Ts),Ls[Rs].accumulate(Ss,Bs)}}},_updateWeight:function(va){var _a=0;if(this.enabled){_a=this.weight;var _s=this._weightInterpolant;if(_s!==null){var Ss=_s.evaluate(va)[0];_a*=Ss,va>_s.parameterPositions[1]&&(this.stopFading(),Ss===0&&(this.enabled=!1))}}return this._effectiveWeight=_a,_a},_updateTimeScale:function(va){var _a=0;if(!this.paused){_a=this.timeScale;var _s=this._timeScaleInterpolant;if(_s!==null){var Ss=_s.evaluate(va)[0];_a*=Ss,va>_s.parameterPositions[1]&&(this.stopWarping(),_a===0?this.paused=!0:this.timeScale=_a)}}return this._effectiveTimeScale=_a,_a},_updateTime:function(va){var _a=this.time+va,_s=this._clip.duration,Ss=this.loop,Ms=this._loopCount,Cs=Ss===LoopPingPong;if(va===0)return Ms===-1?_a:Cs&&(Ms&1)===1?_s-_a:_a;if(Ss===LoopOnce){Ms===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(_a>=_s)_a=_s;else if(_a<0)_a=0;else{this.time=_a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=_a,this._mixer.dispatchEvent({type:"finished",action:this,direction:va<0?-1:1})}}else{if(Ms===-1&&(va>=0?(Ms=0,this._setEndings(!0,this.repetitions===0,Cs)):this._setEndings(this.repetitions===0,!0,Cs)),_a>=_s||_a<0){var Ts=Math.floor(_a/_s);_a-=_s*Ts,Ms+=Math.abs(Ts);var Bs=this.repetitions-Ms;if(Bs<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,_a=va>0?_s:0,this.time=_a,this._mixer.dispatchEvent({type:"finished",action:this,direction:va>0?1:-1});else{if(Bs===1){var Ps=va<0;this._setEndings(Ps,!Ps,Cs)}else this._setEndings(!1,!1,Cs);this._loopCount=Ms,this.time=_a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Ts})}}else this.time=_a;if(Cs&&(Ms&1)===1)return _s-_a}return _a},_setEndings:function(va,_a,_s){var Ss=this._interpolantSettings;_s?(Ss.endingStart=ZeroSlopeEnding,Ss.endingEnd=ZeroSlopeEnding):(va?Ss.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Ss.endingStart=WrapAroundEnding,_a?Ss.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Ss.endingEnd=WrapAroundEnding)},_scheduleFading:function(va,_a,_s){var Ss=this._mixer,Ms=Ss.time,Cs=this._weightInterpolant;Cs===null&&(Cs=Ss._lendControlInterpolant(),this._weightInterpolant=Cs);var Ts=Cs.parameterPositions,Bs=Cs.sampleValues;return Ts[0]=Ms,Bs[0]=_a,Ts[1]=Ms+va,Bs[1]=_s,this}});function AnimationMixer(va){this._root=va,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(va,_a){var _s=va._localRoot||this._root,Ss=va._clip.tracks,Ms=Ss.length,Cs=va._propertyBindings,Ts=va._interpolants,Bs=_s.uuid,Ps=this._bindingsByRootAndName,Ls=Ps[Bs];Ls===void 0&&(Ls={},Ps[Bs]=Ls);for(var Rs=0;Rs!==Ms;++Rs){var $s=Ss[Rs],Fs=$s.name,Os=Ls[Fs];if(Os!==void 0)Cs[Rs]=Os;else{if(Os=Cs[Rs],Os!==void 0){Os._cacheIndex===null&&(++Os.referenceCount,this._addInactiveBinding(Os,Bs,Fs));continue}var Gs=_a&&_a._propertyBindings[Rs].binding.parsedPath;Os=new PropertyMixer(PropertyBinding.create(_s,Fs,Gs),$s.ValueTypeName,$s.getValueSize()),++Os.referenceCount,this._addInactiveBinding(Os,Bs,Fs),Cs[Rs]=Os}Ts[Rs].resultBuffer=Os.buffer}},_activateAction:function(va){if(!this._isActiveAction(va)){if(va._cacheIndex===null){var _a=(va._localRoot||this._root).uuid,_s=va._clip.uuid,Ss=this._actionsByClip[_s];this._bindAction(va,Ss&&Ss.knownActions[0]),this._addInactiveAction(va,_s,_a)}for(var Ms=va._propertyBindings,Cs=0,Ts=Ms.length;Cs!==Ts;++Cs){var Bs=Ms[Cs];Bs.useCount++===0&&(this._lendBinding(Bs),Bs.saveOriginalState())}this._lendAction(va)}},_deactivateAction:function(va){if(this._isActiveAction(va)){for(var _a=va._propertyBindings,_s=0,Ss=_a.length;_s!==Ss;++_s){var Ms=_a[_s];--Ms.useCount===0&&(Ms.restoreOriginalState(),this._takeBackBinding(Ms))}this._takeBackAction(va)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var va=this;this.stats={actions:{get total(){return va._actions.length},get inUse(){return va._nActiveActions}},bindings:{get total(){return va._bindings.length},get inUse(){return va._nActiveBindings}},controlInterpolants:{get total(){return va._controlInterpolants.length},get inUse(){return va._nActiveControlInterpolants}}}},_isActiveAction:function(va){var _a=va._cacheIndex;return _a!==null&&_a<this._nActiveActions},_addInactiveAction:function(va,_a,_s){var Ss=this._actions,Ms=this._actionsByClip,Cs=Ms[_a];if(Cs===void 0)Cs={knownActions:[va],actionByRoot:{}},va._byClipCacheIndex=0,Ms[_a]=Cs;else{var Ts=Cs.knownActions;va._byClipCacheIndex=Ts.length,Ts.push(va)}va._cacheIndex=Ss.length,Ss.push(va),Cs.actionByRoot[_s]=va},_removeInactiveAction:function(va){var _a=this._actions,_s=_a[_a.length-1],Ss=va._cacheIndex;_s._cacheIndex=Ss,_a[Ss]=_s,_a.pop(),va._cacheIndex=null;var Ms=va._clip.uuid,Cs=this._actionsByClip,Ts=Cs[Ms],Bs=Ts.knownActions,Ps=Bs[Bs.length-1],Ls=va._byClipCacheIndex;Ps._byClipCacheIndex=Ls,Bs[Ls]=Ps,Bs.pop(),va._byClipCacheIndex=null;var Rs=Ts.actionByRoot,$s=(va._localRoot||this._root).uuid;delete Rs[$s],Bs.length===0&&delete Cs[Ms],this._removeInactiveBindingsForAction(va)},_removeInactiveBindingsForAction:function(va){for(var _a=va._propertyBindings,_s=0,Ss=_a.length;_s!==Ss;++_s){var Ms=_a[_s];--Ms.referenceCount===0&&this._removeInactiveBinding(Ms)}},_lendAction:function(va){var _a=this._actions,_s=va._cacheIndex,Ss=this._nActiveActions++,Ms=_a[Ss];va._cacheIndex=Ss,_a[Ss]=va,Ms._cacheIndex=_s,_a[_s]=Ms},_takeBackAction:function(va){var _a=this._actions,_s=va._cacheIndex,Ss=--this._nActiveActions,Ms=_a[Ss];va._cacheIndex=Ss,_a[Ss]=va,Ms._cacheIndex=_s,_a[_s]=Ms},_addInactiveBinding:function(va,_a,_s){var Ss=this._bindingsByRootAndName,Ms=Ss[_a],Cs=this._bindings;Ms===void 0&&(Ms={},Ss[_a]=Ms),Ms[_s]=va,va._cacheIndex=Cs.length,Cs.push(va)},_removeInactiveBinding:function(va){var _a=this._bindings,_s=va.binding,Ss=_s.rootNode.uuid,Ms=_s.path,Cs=this._bindingsByRootAndName,Ts=Cs[Ss],Bs=_a[_a.length-1],Ps=va._cacheIndex;Bs._cacheIndex=Ps,_a[Ps]=Bs,_a.pop(),delete Ts[Ms],Object.keys(Ts).length===0&&delete Cs[Ss]},_lendBinding:function(va){var _a=this._bindings,_s=va._cacheIndex,Ss=this._nActiveBindings++,Ms=_a[Ss];va._cacheIndex=Ss,_a[Ss]=va,Ms._cacheIndex=_s,_a[_s]=Ms},_takeBackBinding:function(va){var _a=this._bindings,_s=va._cacheIndex,Ss=--this._nActiveBindings,Ms=_a[Ss];va._cacheIndex=Ss,_a[Ss]=va,Ms._cacheIndex=_s,_a[_s]=Ms},_lendControlInterpolant:function(){var va=this._controlInterpolants,_a=this._nActiveControlInterpolants++,_s=va[_a];return _s===void 0&&(_s=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),_s.__cacheIndex=_a,va[_a]=_s),_s},_takeBackControlInterpolant:function(va){var _a=this._controlInterpolants,_s=va.__cacheIndex,Ss=--this._nActiveControlInterpolants,Ms=_a[Ss];va.__cacheIndex=Ss,_a[Ss]=va,Ms.__cacheIndex=_s,_a[_s]=Ms},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(va,_a,_s){var Ss=_a||this._root,Ms=Ss.uuid,Cs=typeof va=="string"?AnimationClip.findByName(Ss,va):va,Ts=Cs!==null?Cs.uuid:va,Bs=this._actionsByClip[Ts],Ps=null;if(_s===void 0&&(Cs!==null?_s=Cs.blendMode:_s=NormalAnimationBlendMode),Bs!==void 0){var Ls=Bs.actionByRoot[Ms];if(Ls!==void 0&&Ls.blendMode===_s)return Ls;Ps=Bs.knownActions[0],Cs===null&&(Cs=Ps._clip)}if(Cs===null)return null;var Rs=new AnimationAction(this,Cs,_a,_s);return this._bindAction(Rs,Ps),this._addInactiveAction(Rs,Ts,Ms),Rs},existingAction:function(va,_a){var _s=_a||this._root,Ss=_s.uuid,Ms=typeof va=="string"?AnimationClip.findByName(_s,va):va,Cs=Ms?Ms.uuid:va,Ts=this._actionsByClip[Cs];return Ts!==void 0&&Ts.actionByRoot[Ss]||null},stopAllAction:function(){for(var va=this._actions,_a=this._nActiveActions,_s=_a-1;_s>=0;--_s)va[_s].stop();return this},update:function(va){va*=this.timeScale;for(var _a=this._actions,_s=this._nActiveActions,Ss=this.time+=va,Ms=Math.sign(va),Cs=this._accuIndex^=1,Ts=0;Ts!==_s;++Ts){var Bs=_a[Ts];Bs._update(Ss,va,Ms,Cs)}for(var Ps=this._bindings,Ls=this._nActiveBindings,Ts=0;Ts!==Ls;++Ts)Ps[Ts].apply(Cs);return this},setTime:function(va){this.time=0;for(var _a=0;_a<this._actions.length;_a++)this._actions[_a].time=0;return this.update(va)},getRoot:function(){return this._root},uncacheClip:function(va){var _a=this._actions,_s=va.uuid,Ss=this._actionsByClip,Ms=Ss[_s];if(Ms!==void 0){for(var Cs=Ms.knownActions,Ts=0,Bs=Cs.length;Ts!==Bs;++Ts){var Ps=Cs[Ts];this._deactivateAction(Ps);var Ls=Ps._cacheIndex,Rs=_a[_a.length-1];Ps._cacheIndex=null,Ps._byClipCacheIndex=null,Rs._cacheIndex=Ls,_a[Ls]=Rs,_a.pop(),this._removeInactiveBindingsForAction(Ps)}delete Ss[_s]}},uncacheRoot:function(va){var _a=va.uuid,_s=this._actionsByClip;for(var Ss in _s){var Ms=_s[Ss].actionByRoot,Cs=Ms[_a];Cs!==void 0&&(this._deactivateAction(Cs),this._removeInactiveAction(Cs))}var Ts=this._bindingsByRootAndName,Bs=Ts[_a];if(Bs!==void 0)for(var Ps in Bs){var Ls=Bs[Ps];Ls.restoreOriginalState(),this._removeInactiveBinding(Ls)}},uncacheAction:function(va,_a){var _s=this.existingAction(va,_a);_s!==null&&(this._deactivateAction(_s),this._removeInactiveAction(_s))}});function Uniform(va){typeof va=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),va=arguments[1]),this.value=va}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(va,_a,_s){InterleavedBuffer.call(this,va,_a),this.meshPerAttribute=_s||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(va){return InterleavedBuffer.prototype.copy.call(this,va),this.meshPerAttribute=va.meshPerAttribute,this}});function Raycaster(va,_a,_s,Ss){this.ray=new Ray(va,_a),this.near=_s||0,this.far=Ss||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(va,_a){return va.distance-_a.distance}function intersectObject(va,_a,_s,Ss){if(va.layers.test(_a.layers)&&va.raycast(_a,_s),Ss===!0)for(var Ms=va.children,Cs=0,Ts=Ms.length;Cs<Ts;Cs++)intersectObject(Ms[Cs],_a,_s,!0)}Object.assign(Raycaster.prototype,{set:function(va,_a){this.ray.set(va,_a)},setFromCamera:function(va,_a){_a&&_a.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(_a.matrixWorld),this.ray.direction.set(va.x,va.y,.5).unproject(_a).sub(this.ray.origin).normalize(),this.camera=_a):_a&&_a.isOrthographicCamera?(this.ray.origin.set(va.x,va.y,(_a.near+_a.far)/(_a.near-_a.far)).unproject(_a),this.ray.direction.set(0,0,-1).transformDirection(_a.matrixWorld),this.camera=_a):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(va,_a,_s){var Ss=_s||[];return intersectObject(va,this,Ss,_a),Ss.sort(ascSort),Ss},intersectObjects:function(va,_a,_s){var Ss=_s||[];if(Array.isArray(va)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Ss;for(var Ms=0,Cs=va.length;Ms<Cs;Ms++)intersectObject(va[Ms],this,Ss,_a);return Ss.sort(ascSort),Ss}});function Spherical(va,_a,_s){return this.radius=va!==void 0?va:1,this.phi=_a!==void 0?_a:0,this.theta=_s!==void 0?_s:0,this}Object.assign(Spherical.prototype,{set:function(va,_a,_s){return this.radius=va,this.phi=_a,this.theta=_s,this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.radius=va.radius,this.phi=va.phi,this.theta=va.theta,this},makeSafe:function(){var va=1e-6;return this.phi=Math.max(va,Math.min(Math.PI-va,this.phi)),this},setFromVector3:function(va){return this.setFromCartesianCoords(va.x,va.y,va.z)},setFromCartesianCoords:function(va,_a,_s){return this.radius=Math.sqrt(va*va+_a*_a+_s*_s),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(va,_s),this.phi=Math.acos(MathUtils.clamp(_a/this.radius,-1,1))),this}});function Cylindrical(va,_a,_s){return this.radius=va!==void 0?va:1,this.theta=_a!==void 0?_a:0,this.y=_s!==void 0?_s:0,this}Object.assign(Cylindrical.prototype,{set:function(va,_a,_s){return this.radius=va,this.theta=_a,this.y=_s,this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.radius=va.radius,this.theta=va.theta,this.y=va.y,this},setFromVector3:function(va){return this.setFromCartesianCoords(va.x,va.y,va.z)},setFromCartesianCoords:function(va,_a,_s){return this.radius=Math.sqrt(va*va+_s*_s),this.theta=Math.atan2(va,_s),this.y=_a,this}});var _vector$7=new Vector2;function Box2(va,_a){this.min=va!==void 0?va:new Vector2(1/0,1/0),this.max=_a!==void 0?_a:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(va,_a){return this.min.copy(va),this.max.copy(_a),this},setFromPoints:function(va){this.makeEmpty();for(var _a=0,_s=va.length;_a<_s;_a++)this.expandByPoint(va[_a]);return this},setFromCenterAndSize:function(va,_a){var _s=_vector$7.copy(_a).multiplyScalar(.5);return this.min.copy(va).sub(_s),this.max.copy(va).add(_s),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.min.copy(va.min),this.max.copy(va.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(va){return va===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),va=new Vector2),this.isEmpty()?va.set(0,0):va.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(va){return va===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),va=new Vector2),this.isEmpty()?va.set(0,0):va.subVectors(this.max,this.min)},expandByPoint:function(va){return this.min.min(va),this.max.max(va),this},expandByVector:function(va){return this.min.sub(va),this.max.add(va),this},expandByScalar:function(va){return this.min.addScalar(-va),this.max.addScalar(va),this},containsPoint:function(va){return!(va.x<this.min.x||va.x>this.max.x||va.y<this.min.y||va.y>this.max.y)},containsBox:function(va){return this.min.x<=va.min.x&&va.max.x<=this.max.x&&this.min.y<=va.min.y&&va.max.y<=this.max.y},getParameter:function(va,_a){return _a===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),_a=new Vector2),_a.set((va.x-this.min.x)/(this.max.x-this.min.x),(va.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(va){return!(va.max.x<this.min.x||va.min.x>this.max.x||va.max.y<this.min.y||va.min.y>this.max.y)},clampPoint:function(va,_a){return _a===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),_a=new Vector2),_a.copy(va).clamp(this.min,this.max)},distanceToPoint:function(va){var _a=_vector$7.copy(va).clamp(this.min,this.max);return _a.sub(va).length()},intersect:function(va){return this.min.max(va.min),this.max.min(va.max),this},union:function(va){return this.min.min(va.min),this.max.max(va.max),this},translate:function(va){return this.min.add(va),this.max.add(va),this},equals:function(va){return va.min.equals(this.min)&&va.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(va,_a){this.start=va!==void 0?va:new Vector3,this.end=_a!==void 0?_a:new Vector3}Object.assign(Line3.prototype,{set:function(va,_a){return this.start.copy(va),this.end.copy(_a),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.start.copy(va.start),this.end.copy(va.end),this},getCenter:function(va){return va===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),va=new Vector3),va.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(va){return va===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),va=new Vector3),va.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(va,_a){return _a===void 0&&(console.warn("THREE.Line3: .at() target is now required"),_a=new Vector3),this.delta(_a).multiplyScalar(va).add(this.start)},closestPointToPointParameter:function(va,_a){_startP.subVectors(va,this.start),_startEnd.subVectors(this.end,this.start);var _s=_startEnd.dot(_startEnd),Ss=_startEnd.dot(_startP),Ms=Ss/_s;return _a&&(Ms=MathUtils.clamp(Ms,0,1)),Ms},closestPointToPoint:function(va,_a,_s){var Ss=this.closestPointToPointParameter(va,_a);return _s===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),_s=new Vector3),this.delta(_s).multiplyScalar(Ss).add(this.start)},applyMatrix4:function(va){return this.start.applyMatrix4(va),this.end.applyMatrix4(va),this},equals:function(va){return va.start.equals(this.start)&&va.end.equals(this.end)}});function ImmediateRenderObject(va){Object3D.call(this),this.material=va,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(va,_a){Object3D.call(this),this.light=va,this.light.updateMatrixWorld(),this.matrix=va.matrixWorld,this.matrixAutoUpdate=!1,this.color=_a;for(var _s=new BufferGeometry,Ss=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Ms=0,Cs=1,Ts=32;Ms<Ts;Ms++,Cs++){var Bs=Ms/Ts*Math.PI*2,Ps=Cs/Ts*Math.PI*2;Ss.push(Math.cos(Bs),Math.sin(Bs),1,Math.cos(Ps),Math.sin(Ps),1)}_s.setAttribute("position",new Float32BufferAttribute(Ss,3));var Ls=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(_s,Ls),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var va=this.light.distance?this.light.distance:1e3,_a=va*Math.tan(this.light.angle);this.cone.scale.set(_a,_a,va),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(va){var _a=[];va&&va.isBone&&_a.push(va);for(var _s=0;_s<va.children.length;_s++)_a.push.apply(_a,getBoneList(va.children[_s]));return _a}function SkeletonHelper(va){for(var _a=getBoneList(va),_s=new BufferGeometry,Ss=[],Ms=[],Cs=new Color(0,0,1),Ts=new Color(0,1,0),Bs=0;Bs<_a.length;Bs++){var Ps=_a[Bs];Ps.parent&&Ps.parent.isBone&&(Ss.push(0,0,0),Ss.push(0,0,0),Ms.push(Cs.r,Cs.g,Cs.b),Ms.push(Ts.r,Ts.g,Ts.b))}_s.setAttribute("position",new Float32BufferAttribute(Ss,3)),_s.setAttribute("color",new Float32BufferAttribute(Ms,3));var Ls=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,_s,Ls),this.type="SkeletonHelper",this.root=va,this.bones=_a,this.matrix=va.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(va){var _a=this.bones,_s=this.geometry,Ss=_s.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var Ms=0,Cs=0;Ms<_a.length;Ms++){var Ts=_a[Ms];Ts.parent&&Ts.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Ts.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Ss.setXYZ(Cs,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Ts.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Ss.setXYZ(Cs+1,_vector$9.x,_vector$9.y,_vector$9.z),Cs+=2)}_s.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,va)};function PointLightHelper(va,_a,_s){this.light=va,this.light.updateMatrixWorld(),this.color=_s;var Ss=new SphereBufferGeometry(_a,4,2),Ms=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,Ss,Ms),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(va,_a,_s){Object3D.call(this),this.light=va,this.light.updateMatrixWorld(),this.matrix=va.matrixWorld,this.matrixAutoUpdate=!1,this.color=_s;var Ss=new OctahedronBufferGeometry(_a);Ss.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var Ms=Ss.getAttribute("position"),Cs=new Float32Array(Ms.count*3);Ss.setAttribute("color",new BufferAttribute(Cs,3)),this.add(new Mesh(Ss,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var va=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var _a=va.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var _s=0,Ss=_a.count;_s<Ss;_s++){var Ms=_s<Ss/2?_color1:_color2;_a.setXYZ(_s,Ms.r,Ms.g,Ms.b)}_a.needsUpdate=!0}va.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(va,_a,_s,Ss){va=va||10,_a=_a||10,_s=new Color(_s!==void 0?_s:4473924),Ss=new Color(Ss!==void 0?Ss:8947848);for(var Ms=_a/2,Cs=va/_a,Ts=va/2,Bs=[],Ps=[],Ls=0,Rs=0,$s=-Ts;Ls<=_a;Ls++,$s+=Cs){Bs.push(-Ts,0,$s,Ts,0,$s),Bs.push($s,0,-Ts,$s,0,Ts);var Fs=Ls===Ms?_s:Ss;Fs.toArray(Ps,Rs),Rs+=3,Fs.toArray(Ps,Rs),Rs+=3,Fs.toArray(Ps,Rs),Rs+=3,Fs.toArray(Ps,Rs),Rs+=3}var Os=new BufferGeometry;Os.setAttribute("position",new Float32BufferAttribute(Bs,3)),Os.setAttribute("color",new Float32BufferAttribute(Ps,3));var Gs=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Os,Gs),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(va){return LineSegments.prototype.copy.call(this,va),this.geometry.copy(va.geometry),this.material.copy(va.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(va,_a,_s,Ss,Ms,Cs){va=va||10,_a=_a||16,_s=_s||8,Ss=Ss||64,Ms=new Color(Ms!==void 0?Ms:4473924),Cs=new Color(Cs!==void 0?Cs:8947848);var Ts=[],Bs=[],Ps,Ls,Rs,$s,Fs,Os,Gs;for($s=0;$s<=_a;$s++)Rs=$s/_a*(Math.PI*2),Ps=Math.sin(Rs)*va,Ls=Math.cos(Rs)*va,Ts.push(0,0,0),Ts.push(Ps,0,Ls),Gs=$s&1?Ms:Cs,Bs.push(Gs.r,Gs.g,Gs.b),Bs.push(Gs.r,Gs.g,Gs.b);for($s=0;$s<=_s;$s++)for(Gs=$s&1?Ms:Cs,Os=va-va/_s*$s,Fs=0;Fs<Ss;Fs++)Rs=Fs/Ss*(Math.PI*2),Ps=Math.sin(Rs)*Os,Ls=Math.cos(Rs)*Os,Ts.push(Ps,0,Ls),Bs.push(Gs.r,Gs.g,Gs.b),Rs=(Fs+1)/Ss*(Math.PI*2),Ps=Math.sin(Rs)*Os,Ls=Math.cos(Rs)*Os,Ts.push(Ps,0,Ls),Bs.push(Gs.r,Gs.g,Gs.b);var Ns=new BufferGeometry;Ns.setAttribute("position",new Float32BufferAttribute(Ts,3)),Ns.setAttribute("color",new Float32BufferAttribute(Bs,3));var Vs=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Ns,Vs),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(va,_a,_s){Object3D.call(this),this.light=va,this.light.updateMatrixWorld(),this.matrix=va.matrixWorld,this.matrixAutoUpdate=!1,this.color=_s,_a===void 0&&(_a=1);var Ss=new BufferGeometry;Ss.setAttribute("position",new Float32BufferAttribute([-_a,_a,0,_a,_a,0,_a,-_a,0,-_a,-_a,0,-_a,_a,0],3));var Ms=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$1(Ss,Ms),this.add(this.lightPlane),Ss=new BufferGeometry,Ss.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$1(Ss,Ms),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(va){var _a=new BufferGeometry,_s=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Ss=[],Ms=[],Cs={},Ts=new Color(16755200),Bs=new Color(16711680),Ps=new Color(43775),Ls=new Color(16777215),Rs=new Color(3355443);$s("n1","n2",Ts),$s("n2","n4",Ts),$s("n4","n3",Ts),$s("n3","n1",Ts),$s("f1","f2",Ts),$s("f2","f4",Ts),$s("f4","f3",Ts),$s("f3","f1",Ts),$s("n1","f1",Ts),$s("n2","f2",Ts),$s("n3","f3",Ts),$s("n4","f4",Ts),$s("p","n1",Bs),$s("p","n2",Bs),$s("p","n3",Bs),$s("p","n4",Bs),$s("u1","u2",Ps),$s("u2","u3",Ps),$s("u3","u1",Ps),$s("c","t",Ls),$s("p","c",Rs),$s("cn1","cn2",Rs),$s("cn3","cn4",Rs),$s("cf1","cf2",Rs),$s("cf3","cf4",Rs);function $s(Os,Gs,Ns){Fs(Os,Ns),Fs(Gs,Ns)}function Fs(Os,Gs){Ss.push(0,0,0),Ms.push(Gs.r,Gs.g,Gs.b),Cs[Os]===void 0&&(Cs[Os]=[]),Cs[Os].push(Ss.length/3-1)}_a.setAttribute("position",new Float32BufferAttribute(Ss,3)),_a.setAttribute("color",new Float32BufferAttribute(Ms,3)),LineSegments.call(this,_a,_s),this.type="CameraHelper",this.camera=va,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=va.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Cs,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var va=this.geometry,_a=this.pointMap,_s=1,Ss=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",_a,va,_camera,0,0,-1),setPoint("t",_a,va,_camera,0,0,1),setPoint("n1",_a,va,_camera,-_s,-Ss,-1),setPoint("n2",_a,va,_camera,_s,-Ss,-1),setPoint("n3",_a,va,_camera,-_s,Ss,-1),setPoint("n4",_a,va,_camera,_s,Ss,-1),setPoint("f1",_a,va,_camera,-_s,-Ss,1),setPoint("f2",_a,va,_camera,_s,-Ss,1),setPoint("f3",_a,va,_camera,-_s,Ss,1),setPoint("f4",_a,va,_camera,_s,Ss,1),setPoint("u1",_a,va,_camera,_s*.7,Ss*1.1,-1),setPoint("u2",_a,va,_camera,-_s*.7,Ss*1.1,-1),setPoint("u3",_a,va,_camera,0,Ss*2,-1),setPoint("cf1",_a,va,_camera,-_s,0,1),setPoint("cf2",_a,va,_camera,_s,0,1),setPoint("cf3",_a,va,_camera,0,-Ss,1),setPoint("cf4",_a,va,_camera,0,Ss,1),setPoint("cn1",_a,va,_camera,-_s,0,-1),setPoint("cn2",_a,va,_camera,_s,0,-1),setPoint("cn3",_a,va,_camera,0,-Ss,-1),setPoint("cn4",_a,va,_camera,0,Ss,-1),va.getAttribute("position").needsUpdate=!0};function setPoint(va,_a,_s,Ss,Ms,Cs,Ts){_vector$b.set(Ms,Cs,Ts).unproject(Ss);var Bs=_a[va];if(Bs!==void 0)for(var Ps=_s.getAttribute("position"),Ls=0,Rs=Bs.length;Ls<Rs;Ls++)Ps.setXYZ(Bs[Ls],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(va,_a){this.object=va,_a===void 0&&(_a=16776960);var _s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Ss=new Float32Array(8*3),Ms=new BufferGeometry;Ms.setIndex(new BufferAttribute(_s,1)),Ms.setAttribute("position",new BufferAttribute(Ss,3)),LineSegments.call(this,Ms,new LineBasicMaterial({color:_a,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(va){if(va!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var _a=_box$3.min,_s=_box$3.max,Ss=this.geometry.attributes.position,Ms=Ss.array;Ms[0]=_s.x,Ms[1]=_s.y,Ms[2]=_s.z,Ms[3]=_a.x,Ms[4]=_s.y,Ms[5]=_s.z,Ms[6]=_a.x,Ms[7]=_a.y,Ms[8]=_s.z,Ms[9]=_s.x,Ms[10]=_a.y,Ms[11]=_s.z,Ms[12]=_s.x,Ms[13]=_s.y,Ms[14]=_a.z,Ms[15]=_a.x,Ms[16]=_s.y,Ms[17]=_a.z,Ms[18]=_a.x,Ms[19]=_a.y,Ms[20]=_a.z,Ms[21]=_s.x,Ms[22]=_a.y,Ms[23]=_a.z,Ss.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(va){return this.object=va,this.update(),this};BoxHelper.prototype.copy=function(va){return LineSegments.prototype.copy.call(this,va),this.object=va.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(va,_a){this.type="Box3Helper",this.box=va,_a=_a||16776960;var _s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Ss=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Ms=new BufferGeometry;Ms.setIndex(new BufferAttribute(_s,1)),Ms.setAttribute("position",new Float32BufferAttribute(Ss,3)),LineSegments.call(this,Ms,new LineBasicMaterial({color:_a,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(va){var _a=this.box;_a.isEmpty()||(_a.getCenter(this.position),_a.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,va))};function PlaneHelper(va,_a,_s){this.plane=va,this.size=_a===void 0?1:_a;var Ss=_s!==void 0?_s:16776960,Ms=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Cs=new BufferGeometry;Cs.setAttribute("position",new Float32BufferAttribute(Ms,3)),Cs.computeBoundingSphere(),Line$1.call(this,Cs,new LineBasicMaterial({color:Ss,toneMapped:!1})),this.type="PlaneHelper";var Ts=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],Bs=new BufferGeometry;Bs.setAttribute("position",new Float32BufferAttribute(Ts,3)),Bs.computeBoundingSphere(),this.add(new Mesh(Bs,new MeshBasicMaterial({color:Ss,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line$1.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(va){var _a=-this.plane.constant;Math.abs(_a)<1e-8&&(_a=1e-8),this.scale.set(.5*this.size,.5*this.size,_a),this.children[0].material.side=_a<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,va)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(va,_a,_s,Ss,Ms,Cs){Object3D.call(this),this.type="ArrowHelper",va===void 0&&(va=new Vector3(0,0,1)),_a===void 0&&(_a=new Vector3(0,0,0)),_s===void 0&&(_s=1),Ss===void 0&&(Ss=16776960),Ms===void 0&&(Ms=.2*_s),Cs===void 0&&(Cs=.2*Ms),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(_a),this.line=new Line$1(_lineGeometry,new LineBasicMaterial({color:Ss,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Ss,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(va),this.setLength(_s,Ms,Cs)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(va){if(va.y>.99999)this.quaternion.set(0,0,0,1);else if(va.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(va.z,0,-va.x).normalize();var _a=Math.acos(va.y);this.quaternion.setFromAxisAngle(_axis,_a)}};ArrowHelper.prototype.setLength=function(va,_a,_s){_a===void 0&&(_a=.2*va),_s===void 0&&(_s=.2*_a),this.line.scale.set(1,Math.max(1e-4,va-_a),1),this.line.updateMatrix(),this.cone.scale.set(_s,_a,_s),this.cone.position.y=va,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(va){this.line.material.color.set(va),this.cone.material.color.set(va)};ArrowHelper.prototype.copy=function(va){return Object3D.prototype.copy.call(this,va,!1),this.line.copy(va.line),this.cone.copy(va.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(va){va=va||1;var _a=[0,0,0,va,0,0,0,0,0,0,va,0,0,0,0,0,0,va],_s=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Ss=new BufferGeometry;Ss.setAttribute("position",new Float32BufferAttribute(_a,3)),Ss.setAttribute("color",new Float32BufferAttribute(_s,3));var Ms=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Ss,Ms),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(va){this._renderer=va,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(va,_a=0,_s=.1,Ss=100){_oldTarget=this._renderer.getRenderTarget();var Ms=this._allocateTargets();return this._sceneToCubeUV(va,_s,Ss,Ms),_a>0&&this._blur(Ms,0,0,_a),this._applyPMREM(Ms),this._cleanup(Ms),Ms},fromEquirectangular:function(va){return va.magFilter=NearestFilter,va.minFilter=NearestFilter,va.generateMipmaps=!1,this.fromCubemap(va)},fromCubemap:function(va){_oldTarget=this._renderer.getRenderTarget();var _a=this._allocateTargets(va);return this._textureToCubeUV(va,_a),this._applyPMREM(_a),this._cleanup(_a),_a},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var va=0;va<_lodPlanes.length;va++)_lodPlanes[va].dispose()},_cleanup:function(va){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),va.scissorTest=!1,va.setSize(va.width,va.height)},_allocateTargets:function(va){var _a={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(va)?va.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},_s=_createRenderTarget(_a);return _s.depthBuffer=!va,this._pingPongRenderTarget=_createRenderTarget(_a),_s},_compileMaterial:function(va){var _a=new Mesh(_lodPlanes[0],va);this._renderer.compile(_a,_flatCamera)},_sceneToCubeUV:function(va,_a,_s,Ss){var Ms=90,Cs=1,Ts=new PerspectiveCamera(Ms,Cs,_a,_s),Bs=[1,-1,1,1,1,1],Ps=[1,1,1,-1,-1,-1],Ls=this._renderer,Rs=Ls.outputEncoding,$s=Ls.toneMapping,Fs=Ls.toneMappingExposure,Os=Ls.getClearColor(),Gs=Ls.getClearAlpha();Ls.toneMapping=LinearToneMapping,Ls.toneMappingExposure=1,Ls.outputEncoding=LinearEncoding;var Ns=va.background;if(Ns&&Ns.isColor){Ns.convertSRGBToLinear();var Vs=Math.max(Ns.r,Ns.g,Ns.b),Ds=Math.min(Math.max(Math.ceil(Math.log2(Vs)),-128),127);Ns=Ns.multiplyScalar(Math.pow(2,-Ds));var ks=(Ds+128)/255;Ls.setClearColor(Ns,ks),va.background=null}for(var Us=0;Us<6;Us++){var zs=Us%3;zs==0?(Ts.up.set(0,Bs[Us],0),Ts.lookAt(Ps[Us],0,0)):zs==1?(Ts.up.set(0,0,Bs[Us]),Ts.lookAt(0,Ps[Us],0)):(Ts.up.set(0,Bs[Us],0),Ts.lookAt(0,0,Ps[Us])),_setViewport(Ss,zs*SIZE_MAX,Us>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),Ls.setRenderTarget(Ss),Ls.render(va,Ts)}Ls.toneMapping=$s,Ls.toneMappingExposure=Fs,Ls.outputEncoding=Rs,Ls.setClearColor(Os,Gs)},_textureToCubeUV:function(va,_a){var _s=this._renderer;va.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var Ss=va.isCubeTexture?this._cubemapShader:this._equirectShader,Ms=new Mesh(_lodPlanes[0],Ss),Cs=Ss.uniforms;Cs.envMap.value=va,va.isCubeTexture||Cs.texelSize.value.set(1/va.image.width,1/va.image.height),Cs.inputEncoding.value=ENCODINGS[va.encoding],Cs.outputEncoding.value=ENCODINGS[_a.texture.encoding],_setViewport(_a,0,0,3*SIZE_MAX,2*SIZE_MAX),_s.setRenderTarget(_a),_s.render(Ms,_flatCamera)},_applyPMREM:function(va){var _a=this._renderer,_s=_a.autoClear;_a.autoClear=!1;for(var Ss=1;Ss<TOTAL_LODS;Ss++){var Ms=Math.sqrt(_sigmas[Ss]*_sigmas[Ss]-_sigmas[Ss-1]*_sigmas[Ss-1]),Cs=_axisDirections[(Ss-1)%_axisDirections.length];this._blur(va,Ss-1,Ss,Ms,Cs)}_a.autoClear=_s},_blur:function(va,_a,_s,Ss,Ms){var Cs=this._pingPongRenderTarget;this._halfBlur(va,Cs,_a,_s,Ss,"latitudinal",Ms),this._halfBlur(Cs,va,_s,_s,Ss,"longitudinal",Ms)},_halfBlur:function(va,_a,_s,Ss,Ms,Cs,Ts){var Bs=this._renderer,Ps=this._blurMaterial;Cs!=="latitudinal"&&Cs!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var Ls=3,Rs=new Mesh(_lodPlanes[Ss],Ps),$s=Ps.uniforms,Fs=_sizeLods[_s]-1,Os=isFinite(Ms)?Math.PI/(2*Fs):2*Math.PI/(2*MAX_SAMPLES-1),Gs=Ms/Os,Ns=isFinite(Ms)?1+Math.floor(Ls*Gs):MAX_SAMPLES;Ns>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Ms}, is too large and will clip, as it requested ${Ns} samples when the maximum is set to ${MAX_SAMPLES}`);for(var Vs=[],Ds=0,ks=0;ks<MAX_SAMPLES;++ks){var Ws=ks/Gs,Us=Math.exp(-Ws*Ws/2);Vs.push(Us),ks==0?Ds+=Us:ks<Ns&&(Ds+=2*Us)}for(var ks=0;ks<Vs.length;ks++)Vs[ks]=Vs[ks]/Ds;$s.envMap.value=va.texture,$s.samples.value=Ns,$s.weights.value=Vs,$s.latitudinal.value=Cs==="latitudinal",Ts&&($s.poleAxis.value=Ts),$s.dTheta.value=Os,$s.mipInt.value=LOD_MAX-_s,$s.inputEncoding.value=ENCODINGS[va.texture.encoding],$s.outputEncoding.value=ENCODINGS[va.texture.encoding];var zs=_sizeLods[Ss],Ws=3*Math.max(0,SIZE_MAX-2*zs),qs=(Ss===0?0:2*SIZE_MAX)+2*zs*(Ss>LOD_MAX-LOD_MIN?Ss-LOD_MAX+LOD_MIN:0);_setViewport(_a,Ws,qs,3*zs,2*zs),Bs.setRenderTarget(_a),Bs.render(Rs,_flatCamera)}};function _isLDR(va){return va===void 0||va.type!==UnsignedByteType?!1:va.encoding===LinearEncoding||va.encoding===sRGBEncoding||va.encoding===GammaEncoding}function _createPlanes(){for(var va=[],_a=[],_s=[],Ss=LOD_MAX,Ms=0;Ms<TOTAL_LODS;Ms++){var Cs=Math.pow(2,Ss);_a.push(Cs);var Ts=1/Cs;Ms>LOD_MAX-LOD_MIN?Ts=EXTRA_LOD_SIGMA[Ms-LOD_MAX+LOD_MIN-1]:Ms==0&&(Ts=0),_s.push(Ts);for(var Bs=1/(Cs-1),Ps=-Bs/2,Ls=1+Bs/2,Rs=[Ps,Ps,Ls,Ps,Ls,Ls,Ps,Ps,Ls,Ls,Ps,Ls],$s=6,Fs=6,Os=3,Gs=2,Ns=1,Vs=new Float32Array(Os*Fs*$s),Ds=new Float32Array(Gs*Fs*$s),ks=new Float32Array(Ns*Fs*$s),Us=0;Us<$s;Us++){var zs=Us%3*2/3-1,Ws=Us>2?0:-1,qs=[zs,Ws,0,zs+2/3,Ws,0,zs+2/3,Ws+1,0,zs,Ws,0,zs+2/3,Ws+1,0,zs,Ws+1,0];Vs.set(qs,Os*Fs*Us),Ds.set(Rs,Gs*Fs*Us);var Zs=[Us,Us,Us,Us,Us,Us];ks.set(Zs,Ns*Fs*Us)}var el=new BufferGeometry;el.setAttribute("position",new BufferAttribute(Vs,Os)),el.setAttribute("uv",new BufferAttribute(Ds,Gs)),el.setAttribute("faceIndex",new BufferAttribute(ks,Ns)),va.push(el),Ss>LOD_MIN&&Ss--}return{_lodPlanes:va,_sizeLods:_a,_sigmas:_s}}function _createRenderTarget(va){var _a=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,va);return _a.texture.mapping=CubeUVReflectionMapping,_a.texture.name="PMREM.cubeUv",_a.scissorTest=!0,_a}function _setViewport(va,_a,_s,Ss,Ms){va.viewport.set(_a,_s,Ss,Ms),va.scissor.set(_a,_s,Ss,Ms)}function _getBlurShader(va){var _a=new Float32Array(va),_s=new Vector3(0,1,0),Ss=new RawShaderMaterial({defines:{n:va},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:_a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:_s},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Ss.type="SphericalGaussianBlur",Ss}function _getEquirectShader(){var va=new Vector2(1,1),_a=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:va},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return _a.type="EquirectangularToCubeUV",_a}function _getCubemapShader(){var va=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return va.type="CubemapToCubeUV",va}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(va,_a,_s,Ss,Ms,Cs,Ts){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(va,_a,_s,Ms,Cs,Ts)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(va){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),va}function MultiMaterial(va){return va===void 0&&(va=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),va.isMultiMaterial=!0,va.materials=va,va.clone=function(){return va.slice()},va}function PointCloud(va,_a){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(va,_a)}function Particle(va){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(va)}function ParticleSystem(va,_a){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(va,_a)}function PointCloudMaterial(va){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(va)}function ParticleBasicMaterial(va){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(va)}function ParticleSystemMaterial(va){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(va)}function Vertex(va,_a,_s){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(va,_a,_s)}function DynamicBufferAttribute(va,_a){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(va,_a).setUsage(DynamicDrawUsage)}function Int8Attribute(va,_a){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(va,_a)}function Uint8Attribute(va,_a){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(va,_a)}function Uint8ClampedAttribute(va,_a){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(va,_a)}function Int16Attribute(va,_a){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(va,_a)}function Uint16Attribute(va,_a){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(va,_a)}function Int32Attribute(va,_a){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(va,_a)}function Uint32Attribute(va,_a){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(va,_a)}function Float32Attribute(va,_a){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(va,_a)}function Float64Attribute(va,_a){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(va,_a)}Curve.create=function(va,_a){return console.log("THREE.Curve.create() has been deprecated"),va.prototype=Object.create(Curve.prototype),va.prototype.constructor=va,va.prototype.getPoint=_a,va};Object.assign(CurvePath.prototype,{createPointsGeometry:function(va){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var _a=this.getPoints(va);return this.createGeometry(_a)},createSpacedPointsGeometry:function(va){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var _a=this.getSpacedPoints(va);return this.createGeometry(_a)},createGeometry:function(va){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var _a=new Geometry,_s=0,Ss=va.length;_s<Ss;_s++){var Ms=va[_s];_a.vertices.push(new Vector3(Ms.x,Ms.y,Ms.z||0))}return _a}});Object.assign(Path.prototype,{fromPoints:function(va){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(va)}});function ClosedSplineCurve3(va){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,va),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(va){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,va),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(va){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,va),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(va){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(va)}function BoundingBoxHelper(va,_a){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(va,_a)}function EdgesHelper(va,_a){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(va.geometry),new LineBasicMaterial({color:_a!==void 0?_a:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(va,_a){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(va.geometry),new LineBasicMaterial({color:_a!==void 0?_a:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(va){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(va)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(va){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(va)}function BinaryTextureLoader(va){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(va)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(va){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(va)}});Object.assign(Box2.prototype,{center:function(va){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(va)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(va){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(va)},size:function(va){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(va)}});Object.assign(Box3.prototype,{center:function(va){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(va)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(va){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(va)},isIntersectionSphere:function(va){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(va)},size:function(va){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(va)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(va){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(va)};Line3.prototype.center=function(va){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(va)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(va){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(va)},nextPowerOfTwo:function(va){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(va)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(va,_a){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(va,_a)},multiplyVector3:function(va){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),va.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(va){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),va.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(va){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(va)},flattenToArrayOffset:function(va,_a){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(va,_a)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(va){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(va)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(va){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),va.applyMatrix4(this)},multiplyVector4:function(va){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),va.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(va){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),va.transformDirection(this)},crossVector:function(va){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),va.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(va){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),va.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(va,_a,_s,Ss,Ms,Cs){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(va,_a,Ss,_s,Ms,Cs)}});Plane.prototype.isIntersectionLine=function(va){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(va)};Quaternion.prototype.multiplyVector3=function(va){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),va.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(va){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(va)},isIntersectionPlane:function(va){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(va)},isIntersectionSphere:function(va){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(va)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(va,_a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(va,_a)},midpoint:function(va){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(va)},normal:function(va){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(va)},plane:function(va){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(va)}});Object.assign(Triangle,{barycoordFromPoint:function(va,_a,_s,Ss,Ms){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(va,_a,_s,Ss,Ms)},normal:function(va,_a,_s,Ss){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(va,_a,_s,Ss)}});Object.assign(Shape.prototype,{extractAllPoints:function(va){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(va)},extrude:function(va){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,va)},makeGeometry:function(va){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,va)}});Object.assign(Vector2.prototype,{fromAttribute:function(va,_a,_s){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(va,_a,_s)},distanceToManhattan:function(va){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(va)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(va){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(va)},getScaleFromMatrix:function(va){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(va)},getColumnFromMatrix:function(va,_a){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(_a,va)},applyProjection:function(va){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(va)},fromAttribute:function(va,_a,_s){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(va,_a,_s)},distanceToManhattan:function(va){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(va)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(va,_a,_s){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(va,_a,_s)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(va){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(va)}});Object.assign(Object3D.prototype,{getChildByName:function(va){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(va)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(va,_a){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(_a,va)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(va){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(va)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(va){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=va}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(va){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=va}});PerspectiveCamera.prototype.setLens=function(va,_a){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),_a!==void 0&&(this.filmGauge=_a),this.setFocalLength(va)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(va){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=va}},shadowCameraLeft:{set:function(va){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=va}},shadowCameraRight:{set:function(va){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=va}},shadowCameraTop:{set:function(va){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=va}},shadowCameraBottom:{set:function(va){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=va}},shadowCameraNear:{set:function(va){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=va}},shadowCameraFar:{set:function(va){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=va}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(va){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=va}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(va){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=va}},shadowMapHeight:{set:function(va){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=va}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(va){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(va===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(va){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(va)},addAttribute:function(va,_a){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(_a&&_a.isBufferAttribute)&&!(_a&&_a.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(va,new BufferAttribute(arguments[1],arguments[2]))):va==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(_a),this):this.setAttribute(va,_a)},addDrawCall:function(va,_a,_s){_s!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(va,_a)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(va){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(va)},applyMatrix:function(va){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(va)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(va){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=va}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(va){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=va}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(va){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(va)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(va){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(va===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(va){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=va===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(va){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=va}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(va){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=va}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(va,_a,_s,Ss){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(va),this.clear(_a,_s,Ss)},animate:function(va){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(va)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(va){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(va)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(va){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=va}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(va){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=va}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(va){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=va===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(va,_a,_s){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(va,_s)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(va){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=va}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(va){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=va}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(va){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=va}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(va){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=va}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(va){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=va}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(va){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=va}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(va){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=va}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(va){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=va}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(va){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=va}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(va){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=va}}});Object.defineProperties(Audio.prototype,{load:{value:function(va){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var _a=this,_s=new AudioLoader;return _s.load(va,function(Ss){_a.setBuffer(Ss)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(va,_a){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(va,_a)};var GeometryUtils={merge:function(va,_a,_s){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var Ss;_a.isMesh&&(_a.matrixAutoUpdate&&_a.updateMatrix(),Ss=_a.matrix,_a=_a.geometry),va.merge(_a,Ss,_s)},center:function(va){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),va.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(va,_a,_s,Ss){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var Ms=new TextureLoader;Ms.setCrossOrigin(this.crossOrigin);var Cs=Ms.load(va,_s,void 0,Ss);return _a&&(Cs.mapping=_a),Cs};ImageUtils.loadTextureCube=function(va,_a,_s,Ss){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var Ms=new CubeTextureLoader;Ms.setCrossOrigin(this.crossOrigin);var Cs=Ms.load(va,_s,void 0,Ss);return _a&&(Cs.mapping=_a),Cs};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var three_module=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group:Group$1,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line:Line$1,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding},Symbol.toStringTag,{value:"Module"})),CSS3DObject=function(va){Object3D.call(this),this.element=va,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(_a){_a.element instanceof Element&&_a.element.parentNode!==null&&_a.element.parentNode.removeChild(_a.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype);CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(va){CSS3DObject.call(this,va)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype);CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var va=this,_a,_s,Ss,Ms,Cs=new Matrix4,Ts={camera:{fov:0,style:""},objects:new WeakMap},Bs=document.createElement("div");Bs.style.overflow="hidden",this.domElement=Bs;var Ps=document.createElement("div");Ps.style.WebkitTransformStyle="preserve-3d",Ps.style.transformStyle="preserve-3d",Ps.style.pointerEvents="none",Bs.appendChild(Ps);var Ls=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:_a,height:_s}},this.setSize=function(Ds,ks){_a=Ds,_s=ks,Ss=_a/2,Ms=_s/2,Bs.style.width=Ds+"px",Bs.style.height=ks+"px",Ps.style.width=Ds+"px",Ps.style.height=ks+"px"};function Rs(Ds){return Math.abs(Ds)<1e-10?0:Ds}function $s(Ds){var ks=Ds.elements;return"matrix3d("+Rs(ks[0])+","+Rs(-ks[1])+","+Rs(ks[2])+","+Rs(ks[3])+","+Rs(ks[4])+","+Rs(-ks[5])+","+Rs(ks[6])+","+Rs(ks[7])+","+Rs(ks[8])+","+Rs(-ks[9])+","+Rs(ks[10])+","+Rs(ks[11])+","+Rs(ks[12])+","+Rs(-ks[13])+","+Rs(ks[14])+","+Rs(ks[15])+")"}function Fs(Ds,ks){var Us=Ds.elements,zs="matrix3d("+Rs(Us[0])+","+Rs(Us[1])+","+Rs(Us[2])+","+Rs(Us[3])+","+Rs(-Us[4])+","+Rs(-Us[5])+","+Rs(-Us[6])+","+Rs(-Us[7])+","+Rs(Us[8])+","+Rs(Us[9])+","+Rs(Us[10])+","+Rs(Us[11])+","+Rs(Us[12])+","+Rs(Us[13])+","+Rs(Us[14])+","+Rs(Us[15])+")";return Ls?"translate(-50%,-50%)translate("+Ss+"px,"+Ms+"px)"+ks+zs:"translate(-50%,-50%)"+zs}function Os(Ds,ks,Us,zs){if(Ds instanceof CSS3DObject){Ds.onBeforeRender(va,ks,Us);var Ws;Ds instanceof CSS3DSprite?(Cs.copy(Us.matrixWorldInverse),Cs.transpose(),Cs.copyPosition(Ds.matrixWorld),Cs.scale(Ds.scale),Cs.elements[3]=0,Cs.elements[7]=0,Cs.elements[11]=0,Cs.elements[15]=1,Ws=Fs(Cs,zs)):Ws=Fs(Ds.matrixWorld,zs);var qs=Ds.element,Zs=Ts.objects.get(Ds);if(Zs===void 0||Zs.style!==Ws){qs.style.WebkitTransform=Ws,qs.style.transform=Ws;var el={style:Ws};Ls&&(el.distanceToCameraSquared=Gs(Us,Ds)),Ts.objects.set(Ds,el)}qs.style.display=Ds.visible?"":"none",qs.parentNode!==Ps&&Ps.appendChild(qs),Ds.onAfterRender(va,ks,Us)}for(var Js=0,Hs=Ds.children.length;Js<Hs;Js++)Os(Ds.children[Js],ks,Us,zs)}var Gs=function(){var Ds=new Vector3,ks=new Vector3;return function(Us,zs){return Ds.setFromMatrixPosition(Us.matrixWorld),ks.setFromMatrixPosition(zs.matrixWorld),Ds.distanceToSquared(ks)}}();function Ns(Ds){var ks=[];return Ds.traverse(function(Us){Us instanceof CSS3DObject&&ks.push(Us)}),ks}function Vs(Ds){for(var ks=Ns(Ds).sort(function(qs,Zs){var el=Ts.objects.get(qs).distanceToCameraSquared,Js=Ts.objects.get(Zs).distanceToCameraSquared;return el-Js}),Us=ks.length,zs=0,Ws=ks.length;zs<Ws;zs++)ks[zs].element.style.zIndex=Us-zs}this.render=function(Ds,ks){var Us=ks.projectionMatrix.elements[5]*Ms;if(Ts.camera.fov!==Us&&(ks.isPerspectiveCamera?(Bs.style.WebkitPerspective=Us+"px",Bs.style.perspective=Us+"px"):(Bs.style.WebkitPerspective="",Bs.style.perspective=""),Ts.camera.fov=Us),Ds.autoUpdate===!0&&Ds.updateMatrixWorld(),ks.parent===null&&ks.updateMatrixWorld(),ks.isOrthographicCamera)var zs=-(ks.right+ks.left)/2,Ws=(ks.top+ks.bottom)/2;var qs=ks.isOrthographicCamera?"scale("+Us+")translate("+Rs(zs)+"px,"+Rs(Ws)+"px)"+$s(ks.matrixWorldInverse):"translateZ("+Us+"px)"+$s(ks.matrixWorldInverse),Zs=qs+"translate("+Ss+"px,"+Ms+"px)";Ts.camera.style!==Zs&&!Ls&&(Ps.style.WebkitTransform=Zs,Ps.style.transform=Zs,Ts.camera.style=Zs),Os(Ds,Ds,ks,qs),Ls&&Vs(Ds)}},line$1={},tslib={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(va){var _a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s,Fs,Os,Gs,Ns,Vs,Ds,ks,Us,zs,Ws,qs,Zs,el;(function(Js){var Hs=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};Js(Qs(Hs,Qs(va.exports)));function Qs(js,Ks){return js!==Hs&&(typeof Object.create=="function"?Object.defineProperty(js,"__esModule",{value:!0}):js.__esModule=!0),function(Xs,Ys){return js[Xs]=Ks?Ks(Xs,Ys):Ys}}})(function(Js){var Hs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(js,Ks){js.__proto__=Ks}||function(js,Ks){for(var Xs in Ks)Object.prototype.hasOwnProperty.call(Ks,Xs)&&(js[Xs]=Ks[Xs])};_a=function(js,Ks){if(typeof Ks!="function"&&Ks!==null)throw new TypeError("Class extends value "+String(Ks)+" is not a constructor or null");Hs(js,Ks);function Xs(){this.constructor=js}js.prototype=Ks===null?Object.create(Ks):(Xs.prototype=Ks.prototype,new Xs)},_s=Object.assign||function(js){for(var Ks,Xs=1,Ys=arguments.length;Xs<Ys;Xs++){Ks=arguments[Xs];for(var rl in Ks)Object.prototype.hasOwnProperty.call(Ks,rl)&&(js[rl]=Ks[rl])}return js},Ss=function(js,Ks){var Xs={};for(var Ys in js)Object.prototype.hasOwnProperty.call(js,Ys)&&Ks.indexOf(Ys)<0&&(Xs[Ys]=js[Ys]);if(js!=null&&typeof Object.getOwnPropertySymbols=="function")for(var rl=0,Ys=Object.getOwnPropertySymbols(js);rl<Ys.length;rl++)Ks.indexOf(Ys[rl])<0&&Object.prototype.propertyIsEnumerable.call(js,Ys[rl])&&(Xs[Ys[rl]]=js[Ys[rl]]);return Xs},Ms=function(js,Ks,Xs,Ys){var rl=arguments.length,tl=rl<3?Ks:Ys===null?Ys=Object.getOwnPropertyDescriptor(Ks,Xs):Ys,il;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")tl=Reflect.decorate(js,Ks,Xs,Ys);else for(var ll=js.length-1;ll>=0;ll--)(il=js[ll])&&(tl=(rl<3?il(tl):rl>3?il(Ks,Xs,tl):il(Ks,Xs))||tl);return rl>3&&tl&&Object.defineProperty(Ks,Xs,tl),tl},Cs=function(js,Ks){return function(Xs,Ys){Ks(Xs,Ys,js)}},Ts=function(js,Ks){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(js,Ks)},Bs=function(js,Ks,Xs,Ys){function rl(tl){return tl instanceof Xs?tl:new Xs(function(il){il(tl)})}return new(Xs||(Xs=Promise))(function(tl,il){function ll(dl){try{al(Ys.next(dl))}catch(yl){il(yl)}}function cl(dl){try{al(Ys.throw(dl))}catch(yl){il(yl)}}function al(dl){dl.done?tl(dl.value):rl(dl.value).then(ll,cl)}al((Ys=Ys.apply(js,Ks||[])).next())})},Ps=function(js,Ks){var Xs={label:0,sent:function(){if(tl[0]&1)throw tl[1];return tl[1]},trys:[],ops:[]},Ys,rl,tl,il;return il={next:ll(0),throw:ll(1),return:ll(2)},typeof Symbol=="function"&&(il[Symbol.iterator]=function(){return this}),il;function ll(al){return function(dl){return cl([al,dl])}}function cl(al){if(Ys)throw new TypeError("Generator is already executing.");for(;Xs;)try{if(Ys=1,rl&&(tl=al[0]&2?rl.return:al[0]?rl.throw||((tl=rl.return)&&tl.call(rl),0):rl.next)&&!(tl=tl.call(rl,al[1])).done)return tl;switch(rl=0,tl&&(al=[al[0]&2,tl.value]),al[0]){case 0:case 1:tl=al;break;case 4:return Xs.label++,{value:al[1],done:!1};case 5:Xs.label++,rl=al[1],al=[0];continue;case 7:al=Xs.ops.pop(),Xs.trys.pop();continue;default:if(tl=Xs.trys,!(tl=tl.length>0&&tl[tl.length-1])&&(al[0]===6||al[0]===2)){Xs=0;continue}if(al[0]===3&&(!tl||al[1]>tl[0]&&al[1]<tl[3])){Xs.label=al[1];break}if(al[0]===6&&Xs.label<tl[1]){Xs.label=tl[1],tl=al;break}if(tl&&Xs.label<tl[2]){Xs.label=tl[2],Xs.ops.push(al);break}tl[2]&&Xs.ops.pop(),Xs.trys.pop();continue}al=Ks.call(js,Xs)}catch(dl){al=[6,dl],rl=0}finally{Ys=tl=0}if(al[0]&5)throw al[1];return{value:al[0]?al[1]:void 0,done:!0}}},Ls=function(js,Ks){for(var Xs in js)Xs!=="default"&&!Object.prototype.hasOwnProperty.call(Ks,Xs)&&el(Ks,js,Xs)},el=Object.create?function(js,Ks,Xs,Ys){Ys===void 0&&(Ys=Xs),Object.defineProperty(js,Ys,{enumerable:!0,get:function(){return Ks[Xs]}})}:function(js,Ks,Xs,Ys){Ys===void 0&&(Ys=Xs),js[Ys]=Ks[Xs]},Rs=function(js){var Ks=typeof Symbol=="function"&&Symbol.iterator,Xs=Ks&&js[Ks],Ys=0;if(Xs)return Xs.call(js);if(js&&typeof js.length=="number")return{next:function(){return js&&Ys>=js.length&&(js=void 0),{value:js&&js[Ys++],done:!js}}};throw new TypeError(Ks?"Object is not iterable.":"Symbol.iterator is not defined.")},$s=function(js,Ks){var Xs=typeof Symbol=="function"&&js[Symbol.iterator];if(!Xs)return js;var Ys=Xs.call(js),rl,tl=[],il;try{for(;(Ks===void 0||Ks-- >0)&&!(rl=Ys.next()).done;)tl.push(rl.value)}catch(ll){il={error:ll}}finally{try{rl&&!rl.done&&(Xs=Ys.return)&&Xs.call(Ys)}finally{if(il)throw il.error}}return tl},Fs=function(){for(var js=[],Ks=0;Ks<arguments.length;Ks++)js=js.concat($s(arguments[Ks]));return js},Os=function(){for(var js=0,Ks=0,Xs=arguments.length;Ks<Xs;Ks++)js+=arguments[Ks].length;for(var Ys=Array(js),rl=0,Ks=0;Ks<Xs;Ks++)for(var tl=arguments[Ks],il=0,ll=tl.length;il<ll;il++,rl++)Ys[rl]=tl[il];return Ys},Gs=function(js,Ks,Xs){if(Xs||arguments.length===2)for(var Ys=0,rl=Ks.length,tl;Ys<rl;Ys++)(tl||!(Ys in Ks))&&(tl||(tl=Array.prototype.slice.call(Ks,0,Ys)),tl[Ys]=Ks[Ys]);return js.concat(tl||Array.prototype.slice.call(Ks))},Ns=function(js){return this instanceof Ns?(this.v=js,this):new Ns(js)},Vs=function(js,Ks,Xs){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ys=Xs.apply(js,Ks||[]),rl,tl=[];return rl={},il("next"),il("throw"),il("return"),rl[Symbol.asyncIterator]=function(){return this},rl;function il(xl){Ys[xl]&&(rl[xl]=function(wl){return new Promise(function(Al,bl){tl.push([xl,wl,Al,bl])>1||ll(xl,wl)})})}function ll(xl,wl){try{cl(Ys[xl](wl))}catch(Al){yl(tl[0][3],Al)}}function cl(xl){xl.value instanceof Ns?Promise.resolve(xl.value.v).then(al,dl):yl(tl[0][2],xl)}function al(xl){ll("next",xl)}function dl(xl){ll("throw",xl)}function yl(xl,wl){xl(wl),tl.shift(),tl.length&&ll(tl[0][0],tl[0][1])}},Ds=function(js){var Ks,Xs;return Ks={},Ys("next"),Ys("throw",function(rl){throw rl}),Ys("return"),Ks[Symbol.iterator]=function(){return this},Ks;function Ys(rl,tl){Ks[rl]=js[rl]?function(il){return(Xs=!Xs)?{value:Ns(js[rl](il)),done:rl==="return"}:tl?tl(il):il}:tl}},ks=function(js){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ks=js[Symbol.asyncIterator],Xs;return Ks?Ks.call(js):(js=typeof Rs=="function"?Rs(js):js[Symbol.iterator](),Xs={},Ys("next"),Ys("throw"),Ys("return"),Xs[Symbol.asyncIterator]=function(){return this},Xs);function Ys(tl){Xs[tl]=js[tl]&&function(il){return new Promise(function(ll,cl){il=js[tl](il),rl(ll,cl,il.done,il.value)})}}function rl(tl,il,ll,cl){Promise.resolve(cl).then(function(al){tl({value:al,done:ll})},il)}},Us=function(js,Ks){return Object.defineProperty?Object.defineProperty(js,"raw",{value:Ks}):js.raw=Ks,js};var Qs=Object.create?function(js,Ks){Object.defineProperty(js,"default",{enumerable:!0,value:Ks})}:function(js,Ks){js.default=Ks};zs=function(js){if(js&&js.__esModule)return js;var Ks={};if(js!=null)for(var Xs in js)Xs!=="default"&&Object.prototype.hasOwnProperty.call(js,Xs)&&el(Ks,js,Xs);return Qs(Ks,js),Ks},Ws=function(js){return js&&js.__esModule?js:{default:js}},qs=function(js,Ks,Xs,Ys){if(Xs==="a"&&!Ys)throw new TypeError("Private accessor was defined without a getter");if(typeof Ks=="function"?js!==Ks||!Ys:!Ks.has(js))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Xs==="m"?Ys:Xs==="a"?Ys.call(js):Ys?Ys.value:Ks.get(js)},Zs=function(js,Ks,Xs,Ys,rl){if(Ys==="m")throw new TypeError("Private method is not writable");if(Ys==="a"&&!rl)throw new TypeError("Private accessor was defined without a setter");if(typeof Ks=="function"?js!==Ks||!rl:!Ks.has(js))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Ys==="a"?rl.call(js,Xs):rl?rl.value=Xs:Ks.set(js,Xs),Xs},Js("__extends",_a),Js("__assign",_s),Js("__rest",Ss),Js("__decorate",Ms),Js("__param",Cs),Js("__metadata",Ts),Js("__awaiter",Bs),Js("__generator",Ps),Js("__exportStar",Ls),Js("__createBinding",el),Js("__values",Rs),Js("__read",$s),Js("__spread",Fs),Js("__spreadArrays",Os),Js("__spreadArray",Gs),Js("__await",Ns),Js("__asyncGenerator",Vs),Js("__asyncDelegator",Ds),Js("__asyncValues",ks),Js("__makeTemplateObject",Us),Js("__importStar",zs),Js("__importDefault",Ws),Js("__classPrivateFieldGet",qs),Js("__classPrivateFieldSet",Zs)})})(tslib);var require$$2$1=getAugmentedNamespace(three_module),Line;Object.defineProperty(line$1,"__esModule",{value:!0});var t$4=tslib.exports;function e$4(va){if(va&&va.__esModule)return va;var _a=Object.create(null);return va&&Object.keys(va).forEach(function(_s){if(_s!=="default"){var Ss=Object.getOwnPropertyDescriptor(va,_s);Object.defineProperty(_a,_s,Ss.get?Ss:{enumerable:!0,get:function(){return va[_s]}})}}),_a.default=va,Object.freeze(_a)}var n$5=e$4(require$$2$1),i$2=function(va){function _a(){var _s=va.call(this)||this;return _s.type="LineSegmentsGeometry",_s.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),_s.setAttribute("position",new n$5.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),_s.setAttribute("uv",new n$5.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),_s}return t$4.__extends(_a,va),_a.prototype.applyMatrix4=function(_s){var Ss=this.attributes.instanceStart,Ms=this.attributes.instanceEnd;return Ss!==void 0&&(Ss.applyMatrix4(_s),Ms.applyMatrix4(_s),Ss.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},_a.prototype.setPositions=function(_s){var Ss;Ss=_s instanceof Float32Array?_s:Array.isArray(_s)?new Float32Array(_s):new Float32Array;var Ms=new n$5.InstancedInterleavedBuffer(Ss,6,1);return this.setAttribute("instanceStart",new n$5.InterleavedBufferAttribute(Ms,3,0)),this.setAttribute("instanceEnd",new n$5.InterleavedBufferAttribute(Ms,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},_a.prototype.setColors=function(_s){var Ss;Ss=_s instanceof Float32Array?_s:Array.isArray(_s)?new Float32Array(_s):new Float32Array;var Ms=new n$5.InstancedInterleavedBuffer(Ss,6,1);return this.setAttribute("instanceColorStart",new n$5.InterleavedBufferAttribute(Ms,3,0)),this.setAttribute("instanceColorEnd",new n$5.InterleavedBufferAttribute(Ms,3,3)),this},_a.prototype.fromWireframeGeometry=function(_s){return this.setPositions(_s.attributes.position.array),this},_a.prototype.fromEdgesGeometry=function(_s){return this.setPositions(_s.attributes.position.array),this},_a.prototype.fromMesh=function(_s){return this.fromWireframeGeometry(new n$5.WireframeGeometry(_s.geometry)),this},_a.prototype.fromLineSegments=function(_s){var Ss=_s.geometry;if(Ss instanceof n$5.Geometry){var Ms=new n$5.BufferGeometry().fromGeometry(Ss);this.setPositions(Ms.attributes.position.array)}else Ss instanceof n$5.BufferGeometry&&this.setPositions(Ss.attributes.position.array);return this},_a.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new n$5.Box3);var _s=this.attributes.instanceStart,Ss=this.attributes.instanceEnd;if(_s!==void 0&&Ss!==void 0){var Ms=new n$5.Box3;this.boundingBox.setFromBufferAttribute(_s),Ms.setFromBufferAttribute(Ss),this.boundingBox.union(Ms)}},_a.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new n$5.Sphere),this.boundingBox===null&&this.computeBoundingBox();var _s=this.attributes.instanceStart,Ss=this.attributes.instanceEnd;if(_s!==void 0&&Ss!==void 0){var Ms=this.boundingSphere.center;this.boundingBox.getCenter(Ms);for(var Cs=0,Ts=new n$5.Vector3,Bs=0,Ps=_s.count;Bs<Ps;Bs++)Ts.fromBufferAttribute(_s,Bs),Cs=Math.max(Cs,Ms.distanceToSquared(Ts)),Ts.fromBufferAttribute(Ss,Bs),Cs=Math.max(Cs,Ms.distanceToSquared(Ts));this.boundingSphere.radius=Math.sqrt(Cs),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},_a.prototype.toJSON=function(){},_a}(n$5.InstancedBufferGeometry);Object.assign(i$2.prototype,{isLineSegmentsGeometry:!0});var r$5={uniforms:n$5.UniformsUtils.merge([n$5.UniformsLib.common,n$5.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n$5.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},o$2=function(va){function _a(_s){var Ss=va.call(this,{uniforms:n$5.UniformsUtils.clone(r$5.uniforms),vertexShader:r$5.vertexShader,fragmentShader:r$5.fragmentShader,clipping:!0})||this;return Ss.type="LineMaterial",Ss.dashed=!1,Object.defineProperties(Ss,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(Ms){this.uniforms.diffuse.value=Ms}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(Ms){this.uniforms.linewidth.value=Ms}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(Ms){this.uniforms.dashScale.value=Ms}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(Ms){this.uniforms.dashSize.value=Ms}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(Ms){this.uniforms.gapSize.value=Ms}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Ms){this.uniforms.opacity.value=Ms}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(Ms){this.uniforms.resolution.value.copy(Ms)}}}),Ss.setValues(_s),Ss}return t$4.__extends(_a,va),_a}(n$5.ShaderMaterial);Object.assign(o$2.prototype,{isLineMaterial:!0});var a$2=function(va){function _a(_s,Ss){var Ms=va.call(this)||this;return Ms.type="LineSegments2",Ms.geometry=_s!==void 0?_s:new i$2,Ms.material=Ss!==void 0?Ss:new o$2({color:16777215*Math.random()}),Ms}return t$4.__extends(_a,va),_a.prototype.computeLineDistances=function(){for(var _s=this.geometry,Ss=_s.attributes.instanceStart,Ms=_s.attributes.instanceEnd,Cs=new Float32Array(2*Ss.count),Ts=new n$5.Vector3,Bs=new n$5.Vector3,Ps=0,Ls=0,Rs=Ss.count;Ps<Rs;Ps++,Ls+=2)Ts.fromBufferAttribute(Ss,Ps),Bs.fromBufferAttribute(Ms,Ps),Cs[Ls]=Ls===0?0:Cs[Ls-1],Cs[Ls+1]=Cs[Ls]+Ts.distanceTo(Bs);var $s=new n$5.InstancedInterleavedBuffer(Cs,2,1);return _s.setAttribute("instanceDistanceStart",new n$5.InterleavedBufferAttribute($s,1,0)),_s.setAttribute("instanceDistanceEnd",new n$5.InterleavedBufferAttribute($s,1,1)),this},_a.prototype.raycast=function(_s,Ss){_s.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var Ms=_s.ray,Cs=_s.camera,Ts=Cs.projectionMatrix,Bs=this.geometry,Ps=this.material,Ls=Ps.resolution,Rs=Ps.linewidth,$s=Bs.attributes.instanceStart,Fs=Bs.attributes.instanceEnd,Os=new n$5.Vector4,Gs=new n$5.Vector4,Ns=new n$5.Vector4,Vs=new n$5.Vector3,Ds=new n$5.Matrix4,ks=new n$5.Line3,Us=new n$5.Vector3;Ms.at(1,Ns),Ns.w=1,Ns.applyMatrix4(Cs.matrixWorldInverse),Ns.applyMatrix4(Ts),Ns.multiplyScalar(1/Ns.w),Ns.x*=Ls.x/2,Ns.y*=Ls.y/2,Ns.z=0,Vs.copy(Ns);var zs=this.matrixWorld;Ds.multiplyMatrices(Cs.matrixWorldInverse,zs);for(var Ws=0,qs=$s.count;Ws<qs;Ws++){Os.fromBufferAttribute($s,Ws),Gs.fromBufferAttribute(Fs,Ws),Os.w=1,Gs.w=1,Os.applyMatrix4(Ds),Gs.applyMatrix4(Ds),Os.applyMatrix4(Ts),Gs.applyMatrix4(Ts),Os.multiplyScalar(1/Os.w),Gs.multiplyScalar(1/Gs.w);var Zs=Os.z<-1&&Gs.z<-1,el=Os.z>1&&Gs.z>1;if(!Zs&&!el){Os.x*=Ls.x/2,Os.y*=Ls.y/2,Gs.x*=Ls.x/2,Gs.y*=Ls.y/2,ks.start.copy(Os),ks.start.z=0,ks.end.copy(Gs),ks.end.z=0;var Js=ks.closestPointToPointParameter(Vs,!0);ks.at(Js,Us);var Hs=n$5.MathUtils.lerp(Os.z,Gs.z,Js),Qs=Hs>=-1&&Hs<=1,js=Vs.distanceTo(Us)<.5*Rs;if(Qs&&js){ks.start.fromBufferAttribute($s,Ws),ks.end.fromBufferAttribute(Fs,Ws),ks.start.applyMatrix4(zs),ks.end.applyMatrix4(zs);var Ks=new n$5.Vector3,Xs=new n$5.Vector3;Ms.distanceSqToSegment(ks.start,ks.end,Xs,Ks),Ss.push({point:Xs,pointOnLine:Ks,distance:Ms.origin.distanceTo(Xs),object:this,faceIndex:Ws})}}}},_a}(n$5.Mesh);Object.assign(a$2.prototype,{isLineSegments2:!0});var s$2=function(va){function _a(_s,Ss){var Ms=va.call(this,_s,Ss)||this;return Ms.type="Line2",Ms}return t$4.__extends(_a,va),_a}(a$2);Object.assign(s$2.prototype,{isLine2:!0});var u$3=function(va){function _a(){var _s=va.call(this)||this;return _s.type="LineGeometry",_s}return t$4.__extends(_a,va),_a.prototype.setPositions=function(_s){for(var Ss=_s.length-3,Ms=new Float32Array(2*Ss),Cs=0;Cs<Ss;Cs+=3)Ms[2*Cs]=_s[Cs],Ms[2*Cs+1]=_s[Cs+1],Ms[2*Cs+2]=_s[Cs+2],Ms[2*Cs+3]=_s[Cs+3],Ms[2*Cs+4]=_s[Cs+4],Ms[2*Cs+5]=_s[Cs+5];return va.prototype.setPositions.call(this,Ms),this},_a.prototype.setColors=function(_s){for(var Ss=_s.length-3,Ms=new Float32Array(2*Ss),Cs=0;Cs<Ss;Cs+=3)Ms[2*Cs]=_s[Cs],Ms[2*Cs+1]=_s[Cs+1],Ms[2*Cs+2]=_s[Cs+2],Ms[2*Cs+3]=_s[Cs+3],Ms[2*Cs+4]=_s[Cs+4],Ms[2*Cs+5]=_s[Cs+5];return va.prototype.setColors.call(this,Ms),this},_a.prototype.fromLine=function(_s){var Ss=_s.geometry;if(Ss instanceof n$5.Geometry){var Ms=new n$5.BufferGeometry().fromGeometry(Ss);this.setPositions(Ms.attributes.position.array)}else Ss instanceof n$5.BufferGeometry&&this.setPositions(Ss.attributes.position.array);return this},_a.prototype.copy=function(){return this},_a}(i$2);Object.assign(u$3.prototype,{isLineGeometry:!0});var c$4=null,l$5=function(va){function _a(_s,Ss){_s===void 0&&(_s=new n$5.Vector3),Ss===void 0&&(Ss=new n$5.Vector3);var Ms=va.call(this)||this;Ms.type="FiveLine",Ms.needsRender=!0;var Cs=new u$3,Ts=new o$2({color:14467195,linewidth:2,dashScale:20,dashed:!1});Ms.line=new s$2(Cs,Ts);var Bs=new n$5.BufferGeometry,Ps=new n$5.PointsMaterial({color:14467195,size:8,map:c$4||(c$4=new n$5.TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return Ms.points=new n$5.Points(Bs,Ps),Ms.points.renderOrder=11,Ms.points.frustumCulled=!1,Ms.setPoints(_s,Ss),Ms.add(Ms.line,Ms.points),Ms}return t$4.__extends(_a,va),_a.prototype.setPoints=function(_s,Ss){var Ms=[].concat(_s.toArray(),Ss.toArray());this.points.geometry.setAttribute("position",new n$5.BufferAttribute(new Float32Array(Ms),3)),this.line.geometry.setPositions(Ms),this.line.computeLineDistances(),this.needsRender=!0},_a.prototype.getPoints=function(){var _s=this.points.geometry.attributes.position.array;return[new n$5.Vector3(_s[0],_s[1],_s[2]),new n$5.Vector3(_s[3],_s[4],_s[5])]},_a.prototype.setMaterial=function(_s){var Ss=this.line.material;for(var Ms in _s)if(_s.hasOwnProperty(Ms)){var Cs=_s[Ms];Ms==="dashed"?(Ss.dashed=Cs,Cs?Ss.defines.USE_DASH="":delete Ss.defines.USE_DASH,Ss.needsUpdate=!0):Ss[Ms]=_s[Ms]}this.needsRender=!0},_a.prototype.setResolution=function(_s,Ss){var Ms=this.line.material.resolution;Ms.x===_s&&Ms.y===Ss||(Ms.set(_s,Ss),this.needsRender=!0)},_a}(n$5.Object3D);Object.assign(l$5.prototype,{isFiveLine:!0}),Line=line$1.Line=l$5,line$1.LineGeometry=u$3,line$1.LineMaterial=o$2,line$1.LineSegmentsGeometry=i$2,line$1.THREE_Line2=s$2,line$1.THREE_LineSegments2=a$2;function noop$1(){}const identity=va=>va;function assign$1(va,_a){for(const _s in _a)va[_s]=_a[_s];return va}function run(va){return va()}function blank_object(){return Object.create(null)}function run_all(va){va.forEach(run)}function is_function(va){return typeof va=="function"}function safe_not_equal(va,_a){return va!=va?_a==_a:va!==_a||va&&typeof va=="object"||typeof va=="function"}let src_url_equal_anchor;function src_url_equal(va,_a){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=_a,va===src_url_equal_anchor.href}function is_empty(va){return Object.keys(va).length===0}const is_client=typeof window<"u";let now$2=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?va=>requestAnimationFrame(va):noop$1;const tasks=new Set;function run_tasks(va){tasks.forEach(_a=>{_a.c(va)||(tasks.delete(_a),_a.f())}),tasks.size!==0&&raf(run_tasks)}function loop(va){let _a;return tasks.size===0&&raf(run_tasks),{promise:new Promise(_s=>{tasks.add(_a={c:va,f:_s})}),abort(){tasks.delete(_a)}}}function append$1(va,_a){va.appendChild(_a)}function append_styles(va,_a,_s){const Ss=get_root_for_style(va);if(!Ss.getElementById(_a)){const Ms=element("style");Ms.id=_a,Ms.textContent=_s,append_stylesheet(Ss,Ms)}}function get_root_for_style(va){if(!va)return document;const _a=va.getRootNode?va.getRootNode():va.ownerDocument;return _a&&_a.host?_a:va.ownerDocument}function append_empty_stylesheet(va){const _a=element("style");return append_stylesheet(get_root_for_style(va),_a),_a.sheet}function append_stylesheet(va,_a){append$1(va.head||va,_a)}function insert(va,_a,_s){va.insertBefore(_a,_s||null)}function detach(va){va.parentNode.removeChild(va)}function destroy_each(va,_a){for(let _s=0;_s<va.length;_s+=1)va[_s]&&va[_s].d(_a)}function element(va){return document.createElement(va)}function svg_element(va){return document.createElementNS("http://www.w3.org/2000/svg",va)}function text(va){return document.createTextNode(va)}function space(){return text(" ")}function empty(){return text("")}function listen(va,_a,_s,Ss){return va.addEventListener(_a,_s,Ss),()=>va.removeEventListener(_a,_s,Ss)}function attr(va,_a,_s){_s==null?va.removeAttribute(_a):va.getAttribute(_a)!==_s&&va.setAttribute(_a,_s)}function children(va){return Array.from(va.childNodes)}function set_data(va,_a){_a=""+_a,va.wholeText!==_a&&(va.data=_a)}function set_style(va,_a,_s,Ss){_s===null?va.style.removeProperty(_a):va.style.setProperty(_a,_s,Ss?"important":"")}let crossorigin;function is_crossorigin(){if(crossorigin===void 0){crossorigin=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{crossorigin=!0}}return crossorigin}function add_resize_listener(va,_a){getComputedStyle(va).position==="static"&&(va.style.position="relative");const Ss=element("iframe");Ss.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),Ss.setAttribute("aria-hidden","true"),Ss.tabIndex=-1;const Ms=is_crossorigin();let Cs;return Ms?(Ss.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",Cs=listen(window,"message",Ts=>{Ts.source===Ss.contentWindow&&_a()})):(Ss.src="about:blank",Ss.onload=()=>{Cs=listen(Ss.contentWindow,"resize",_a)}),append$1(va,Ss),()=>{(Ms||Cs&&Ss.contentWindow)&&Cs(),detach(Ss)}}function toggle_class(va,_a,_s){va.classList[_s?"add":"remove"](_a)}function custom_event(va,_a,_s=!1){const Ss=document.createEvent("CustomEvent");return Ss.initCustomEvent(va,_s,!1,_a),Ss}class HtmlTag{constructor(){this.e=this.n=null}c(_a){this.h(_a)}m(_a,_s,Ss=null){this.e||(this.e=element(_s.nodeName),this.t=_s,this.c(_a)),this.i(Ss)}h(_a){this.e.innerHTML=_a,this.n=Array.from(this.e.childNodes)}i(_a){for(let _s=0;_s<this.n.length;_s+=1)insert(this.t,this.n[_s],_a)}p(_a){this.d(),this.h(_a),this.i(this.a)}d(){this.n.forEach(detach)}}const managed_styles=new Map;let active=0;function hash$1(va){let _a=5381,_s=va.length;for(;_s--;)_a=(_a<<5)-_a^va.charCodeAt(_s);return _a>>>0}function create_style_information(va,_a){const _s={stylesheet:append_empty_stylesheet(_a),rules:{}};return managed_styles.set(va,_s),_s}function create_rule(va,_a,_s,Ss,Ms,Cs,Ts,Bs=0){const Ps=16.666/Ss;let Ls=`{
`;for(let Vs=0;Vs<=1;Vs+=Ps){const Ds=_a+(_s-_a)*Cs(Vs);Ls+=Vs*100+`%{${Ts(Ds,1-Ds)}}
`}const Rs=Ls+`100% {${Ts(_s,1-_s)}}
}`,$s=`__svelte_${hash$1(Rs)}_${Bs}`,Fs=get_root_for_style(va),{stylesheet:Os,rules:Gs}=managed_styles.get(Fs)||create_style_information(Fs,va);Gs[$s]||(Gs[$s]=!0,Os.insertRule(`@keyframes ${$s} ${Rs}`,Os.cssRules.length));const Ns=va.style.animation||"";return va.style.animation=`${Ns?`${Ns}, `:""}${$s} ${Ss}ms linear ${Ms}ms 1 both`,active+=1,$s}function delete_rule(va,_a){const _s=(va.style.animation||"").split(", "),Ss=_s.filter(_a?Cs=>Cs.indexOf(_a)<0:Cs=>Cs.indexOf("__svelte")===-1),Ms=_s.length-Ss.length;Ms&&(va.style.animation=Ss.join(", "),active-=Ms,active||clear_rules())}function clear_rules(){raf(()=>{active||(managed_styles.forEach(va=>{const{stylesheet:_a}=va;let _s=_a.cssRules.length;for(;_s--;)_a.deleteRule(_s);va.rules={}}),managed_styles.clear())})}let current_component;function set_current_component(va){current_component=va}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(va){get_current_component().$$.on_mount.push(va)}function afterUpdate(va){get_current_component().$$.after_update.push(va)}function onDestroy(va){get_current_component().$$.on_destroy.push(va)}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(va){render_callbacks.push(va)}const seen_callbacks=new Set;let flushidx=0;function flush(){const va=current_component;do{for(;flushidx<dirty_components.length;){const _a=dirty_components[flushidx];flushidx++,set_current_component(_a),update$1(_a.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let _a=0;_a<render_callbacks.length;_a+=1){const _s=render_callbacks[_a];seen_callbacks.has(_s)||(seen_callbacks.add(_s),_s())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(va)}function update$1(va){if(va.fragment!==null){va.update(),run_all(va.before_update);const _a=va.dirty;va.dirty=[-1],va.fragment&&va.fragment.p(va.ctx,_a),va.after_update.forEach(add_render_callback)}}let promise;function wait(){return promise||(promise=Promise.resolve(),promise.then(()=>{promise=null})),promise}function dispatch(va,_a,_s){va.dispatchEvent(custom_event(`${_a?"intro":"outro"}${_s}`))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(va,_a){va&&va.i&&(outroing.delete(va),va.i(_a))}function transition_out(va,_a,_s,Ss){if(va&&va.o){if(outroing.has(va))return;outroing.add(va),outros.c.push(()=>{outroing.delete(va),Ss&&(_s&&va.d(1),Ss())}),va.o(_a)}}const null_transition={duration:0};function create_in_transition(va,_a,_s){let Ss=_a(va,_s),Ms=!1,Cs,Ts,Bs=0;function Ps(){Cs&&delete_rule(va,Cs)}function Ls(){const{delay:$s=0,duration:Fs=300,easing:Os=identity,tick:Gs=noop$1,css:Ns}=Ss||null_transition;Ns&&(Cs=create_rule(va,0,1,Fs,$s,Os,Ns,Bs++)),Gs(0,1);const Vs=now$2()+$s,Ds=Vs+Fs;Ts&&Ts.abort(),Ms=!0,add_render_callback(()=>dispatch(va,!0,"start")),Ts=loop(ks=>{if(Ms){if(ks>=Ds)return Gs(1,0),dispatch(va,!0,"end"),Ps(),Ms=!1;if(ks>=Vs){const Us=Os((ks-Vs)/Fs);Gs(Us,1-Us)}}return Ms})}let Rs=!1;return{start(){Rs||(Rs=!0,delete_rule(va),is_function(Ss)?(Ss=Ss(),wait().then(Ls)):Ls())},invalidate(){Rs=!1},end(){Ms&&(Ps(),Ms=!1)}}}function destroy_block(va,_a){va.d(1),_a.delete(va.key)}function outro_and_destroy_block(va,_a){transition_out(va,1,1,()=>{_a.delete(va.key)})}function update_keyed_each(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s){let Fs=va.length,Os=Cs.length,Gs=Fs;const Ns={};for(;Gs--;)Ns[va[Gs].key]=Gs;const Vs=[],Ds=new Map,ks=new Map;for(Gs=Os;Gs--;){const qs=$s(Ms,Cs,Gs),Zs=_s(qs);let el=Ts.get(Zs);el?Ss&&el.p(qs,_a):(el=Ls(Zs,qs),el.c()),Ds.set(Zs,Vs[Gs]=el),Zs in Ns&&ks.set(Zs,Math.abs(Gs-Ns[Zs]))}const Us=new Set,zs=new Set;function Ws(qs){transition_in(qs,1),qs.m(Bs,Rs),Ts.set(qs.key,qs),Rs=qs.first,Os--}for(;Fs&&Os;){const qs=Vs[Os-1],Zs=va[Fs-1],el=qs.key,Js=Zs.key;qs===Zs?(Rs=qs.first,Fs--,Os--):Ds.has(Js)?!Ts.has(el)||Us.has(el)?Ws(qs):zs.has(Js)?Fs--:ks.get(el)>ks.get(Js)?(zs.add(el),Ws(qs)):(Us.add(Js),Fs--):(Ps(Zs,Ts),Fs--)}for(;Fs--;){const qs=va[Fs];Ds.has(qs.key)||Ps(qs,Ts)}for(;Os;)Ws(Vs[Os-1]);return Vs}function get_spread_update(va,_a){const _s={},Ss={},Ms={$$scope:1};let Cs=va.length;for(;Cs--;){const Ts=va[Cs],Bs=_a[Cs];if(Bs){for(const Ps in Ts)Ps in Bs||(Ss[Ps]=1);for(const Ps in Bs)Ms[Ps]||(_s[Ps]=Bs[Ps],Ms[Ps]=1);va[Cs]=Bs}else for(const Ps in Ts)Ms[Ps]=1}for(const Ts in Ss)Ts in _s||(_s[Ts]=void 0);return _s}function create_component(va){va&&va.c()}function mount_component(va,_a,_s,Ss){const{fragment:Ms,on_mount:Cs,on_destroy:Ts,after_update:Bs}=va.$$;Ms&&Ms.m(_a,_s),Ss||add_render_callback(()=>{const Ps=Cs.map(run).filter(is_function);Ts?Ts.push(...Ps):run_all(Ps),va.$$.on_mount=[]}),Bs.forEach(add_render_callback)}function destroy_component(va,_a){const _s=va.$$;_s.fragment!==null&&(run_all(_s.on_destroy),_s.fragment&&_s.fragment.d(_a),_s.on_destroy=_s.fragment=null,_s.ctx=[])}function make_dirty(va,_a){va.$$.dirty[0]===-1&&(dirty_components.push(va),schedule_update(),va.$$.dirty.fill(0)),va.$$.dirty[_a/31|0]|=1<<_a%31}function init(va,_a,_s,Ss,Ms,Cs,Ts,Bs=[-1]){const Ps=current_component;set_current_component(va);const Ls=va.$$={fragment:null,ctx:null,props:Cs,update:noop$1,not_equal:Ms,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(_a.context||(Ps?Ps.$$.context:[])),callbacks:blank_object(),dirty:Bs,skip_bound:!1,root:_a.target||Ps.$$.root};Ts&&Ts(Ls.root);let Rs=!1;if(Ls.ctx=_s?_s(va,_a.props||{},($s,Fs,...Os)=>{const Gs=Os.length?Os[0]:Fs;return Ls.ctx&&Ms(Ls.ctx[$s],Ls.ctx[$s]=Gs)&&(!Ls.skip_bound&&Ls.bound[$s]&&Ls.bound[$s](Gs),Rs&&make_dirty(va,$s)),Fs}):[],Ls.update(),Rs=!0,run_all(Ls.before_update),Ls.fragment=Ss?Ss(Ls.ctx):!1,_a.target){if(_a.hydrate){const $s=children(_a.target);Ls.fragment&&Ls.fragment.l($s),$s.forEach(detach)}else Ls.fragment&&Ls.fragment.c();_a.intro&&transition_in(va.$$.fragment),mount_component(va,_a.target,_a.anchor,_a.customElement),flush()}set_current_component(Ps)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop$1}$on(_a,_s){const Ss=this.$$.callbacks[_a]||(this.$$.callbacks[_a]=[]);return Ss.push(_s),()=>{const Ms=Ss.indexOf(_s);Ms!==-1&&Ss.splice(Ms,1)}}$set(_a){this.$$set&&!is_empty(_a)&&(this.$$.skip_bound=!0,this.$$set(_a),this.$$.skip_bound=!1)}}function fade(va,{delay:_a=0,duration:_s=400,easing:Ss=identity}={}){const Ms=+getComputedStyle(va).opacity;return{delay:_a,duration:_s,easing:Ss,css:Cs=>`opacity: ${Cs*Ms}`}}var five={},indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(va,_a){for(var _s=new Array(arguments.length-1),Ss=0,Ms=2,Cs=!0;Ms<arguments.length;)_s[Ss++]=arguments[Ms++];return new Promise(function(Bs,Ps){_s[Ss]=function(Rs){if(Cs)if(Cs=!1,Rs)Ps(Rs);else{for(var $s=new Array(arguments.length-1),Fs=0;Fs<$s.length;)$s[Fs++]=arguments[Fs];Bs.apply(null,$s)}};try{va.apply(_a||null,_s)}catch(Ls){Cs&&(Cs=!1,Ps(Ls))}})}var base64$1={};(function(va){var _a=va;_a.length=function(Bs){var Ps=Bs.length;if(!Ps)return 0;for(var Ls=0;--Ps%4>1&&Bs.charAt(Ps)==="=";)++Ls;return Math.ceil(Bs.length*3)/4-Ls};for(var _s=new Array(64),Ss=new Array(123),Ms=0;Ms<64;)Ss[_s[Ms]=Ms<26?Ms+65:Ms<52?Ms+71:Ms<62?Ms-4:Ms-59|43]=Ms++;_a.encode=function(Bs,Ps,Ls){for(var Rs=null,$s=[],Fs=0,Os=0,Gs;Ps<Ls;){var Ns=Bs[Ps++];switch(Os){case 0:$s[Fs++]=_s[Ns>>2],Gs=(Ns&3)<<4,Os=1;break;case 1:$s[Fs++]=_s[Gs|Ns>>4],Gs=(Ns&15)<<2,Os=2;break;case 2:$s[Fs++]=_s[Gs|Ns>>6],$s[Fs++]=_s[Ns&63],Os=0;break}Fs>8191&&((Rs||(Rs=[])).push(String.fromCharCode.apply(String,$s)),Fs=0)}return Os&&($s[Fs++]=_s[Gs],$s[Fs++]=61,Os===1&&($s[Fs++]=61)),Rs?(Fs&&Rs.push(String.fromCharCode.apply(String,$s.slice(0,Fs))),Rs.join("")):String.fromCharCode.apply(String,$s.slice(0,Fs))};var Cs="invalid encoding";_a.decode=function(Bs,Ps,Ls){for(var Rs=Ls,$s=0,Fs,Os=0;Os<Bs.length;){var Gs=Bs.charCodeAt(Os++);if(Gs===61&&$s>1)break;if((Gs=Ss[Gs])===void 0)throw Error(Cs);switch($s){case 0:Fs=Gs,$s=1;break;case 1:Ps[Ls++]=Fs<<2|(Gs&48)>>4,Fs=Gs,$s=2;break;case 2:Ps[Ls++]=(Fs&15)<<4|(Gs&60)>>2,Fs=Gs,$s=3;break;case 3:Ps[Ls++]=(Fs&3)<<6|Gs,$s=0;break}}if($s===1)throw Error(Cs);return Ls-Rs},_a.test=function(Bs){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Bs)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(_a,_s,Ss){return(this._listeners[_a]||(this._listeners[_a]=[])).push({fn:_s,ctx:Ss||this}),this};EventEmitter.prototype.off=function(_a,_s){if(_a===void 0)this._listeners={};else if(_s===void 0)this._listeners[_a]=[];else for(var Ss=this._listeners[_a],Ms=0;Ms<Ss.length;)Ss[Ms].fn===_s?Ss.splice(Ms,1):++Ms;return this};EventEmitter.prototype.emit=function(_a){var _s=this._listeners[_a];if(_s){for(var Ss=[],Ms=1;Ms<arguments.length;)Ss.push(arguments[Ms++]);for(Ms=0;Ms<_s.length;)_s[Ms].fn.apply(_s[Ms++].ctx,Ss)}return this};var float=factory(factory);function factory(va){return typeof Float32Array<"u"?function(){var _a=new Float32Array([-0]),_s=new Uint8Array(_a.buffer),Ss=_s[3]===128;function Ms(Ps,Ls,Rs){_a[0]=Ps,Ls[Rs]=_s[0],Ls[Rs+1]=_s[1],Ls[Rs+2]=_s[2],Ls[Rs+3]=_s[3]}function Cs(Ps,Ls,Rs){_a[0]=Ps,Ls[Rs]=_s[3],Ls[Rs+1]=_s[2],Ls[Rs+2]=_s[1],Ls[Rs+3]=_s[0]}va.writeFloatLE=Ss?Ms:Cs,va.writeFloatBE=Ss?Cs:Ms;function Ts(Ps,Ls){return _s[0]=Ps[Ls],_s[1]=Ps[Ls+1],_s[2]=Ps[Ls+2],_s[3]=Ps[Ls+3],_a[0]}function Bs(Ps,Ls){return _s[3]=Ps[Ls],_s[2]=Ps[Ls+1],_s[1]=Ps[Ls+2],_s[0]=Ps[Ls+3],_a[0]}va.readFloatLE=Ss?Ts:Bs,va.readFloatBE=Ss?Bs:Ts}():function(){function _a(Ss,Ms,Cs,Ts){var Bs=Ms<0?1:0;if(Bs&&(Ms=-Ms),Ms===0)Ss(1/Ms>0?0:2147483648,Cs,Ts);else if(isNaN(Ms))Ss(2143289344,Cs,Ts);else if(Ms>34028234663852886e22)Ss((Bs<<31|2139095040)>>>0,Cs,Ts);else if(Ms<11754943508222875e-54)Ss((Bs<<31|Math.round(Ms/1401298464324817e-60))>>>0,Cs,Ts);else{var Ps=Math.floor(Math.log(Ms)/Math.LN2),Ls=Math.round(Ms*Math.pow(2,-Ps)*8388608)&8388607;Ss((Bs<<31|Ps+127<<23|Ls)>>>0,Cs,Ts)}}va.writeFloatLE=_a.bind(null,writeUintLE),va.writeFloatBE=_a.bind(null,writeUintBE);function _s(Ss,Ms,Cs){var Ts=Ss(Ms,Cs),Bs=(Ts>>31)*2+1,Ps=Ts>>>23&255,Ls=Ts&8388607;return Ps===255?Ls?NaN:Bs*(1/0):Ps===0?Bs*1401298464324817e-60*Ls:Bs*Math.pow(2,Ps-150)*(Ls+8388608)}va.readFloatLE=_s.bind(null,readUintLE),va.readFloatBE=_s.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var _a=new Float64Array([-0]),_s=new Uint8Array(_a.buffer),Ss=_s[7]===128;function Ms(Ps,Ls,Rs){_a[0]=Ps,Ls[Rs]=_s[0],Ls[Rs+1]=_s[1],Ls[Rs+2]=_s[2],Ls[Rs+3]=_s[3],Ls[Rs+4]=_s[4],Ls[Rs+5]=_s[5],Ls[Rs+6]=_s[6],Ls[Rs+7]=_s[7]}function Cs(Ps,Ls,Rs){_a[0]=Ps,Ls[Rs]=_s[7],Ls[Rs+1]=_s[6],Ls[Rs+2]=_s[5],Ls[Rs+3]=_s[4],Ls[Rs+4]=_s[3],Ls[Rs+5]=_s[2],Ls[Rs+6]=_s[1],Ls[Rs+7]=_s[0]}va.writeDoubleLE=Ss?Ms:Cs,va.writeDoubleBE=Ss?Cs:Ms;function Ts(Ps,Ls){return _s[0]=Ps[Ls],_s[1]=Ps[Ls+1],_s[2]=Ps[Ls+2],_s[3]=Ps[Ls+3],_s[4]=Ps[Ls+4],_s[5]=Ps[Ls+5],_s[6]=Ps[Ls+6],_s[7]=Ps[Ls+7],_a[0]}function Bs(Ps,Ls){return _s[7]=Ps[Ls],_s[6]=Ps[Ls+1],_s[5]=Ps[Ls+2],_s[4]=Ps[Ls+3],_s[3]=Ps[Ls+4],_s[2]=Ps[Ls+5],_s[1]=Ps[Ls+6],_s[0]=Ps[Ls+7],_a[0]}va.readDoubleLE=Ss?Ts:Bs,va.readDoubleBE=Ss?Bs:Ts}():function(){function _a(Ss,Ms,Cs,Ts,Bs,Ps){var Ls=Ts<0?1:0;if(Ls&&(Ts=-Ts),Ts===0)Ss(0,Bs,Ps+Ms),Ss(1/Ts>0?0:2147483648,Bs,Ps+Cs);else if(isNaN(Ts))Ss(0,Bs,Ps+Ms),Ss(2146959360,Bs,Ps+Cs);else if(Ts>17976931348623157e292)Ss(0,Bs,Ps+Ms),Ss((Ls<<31|2146435072)>>>0,Bs,Ps+Cs);else{var Rs;if(Ts<22250738585072014e-324)Rs=Ts/5e-324,Ss(Rs>>>0,Bs,Ps+Ms),Ss((Ls<<31|Rs/4294967296)>>>0,Bs,Ps+Cs);else{var $s=Math.floor(Math.log(Ts)/Math.LN2);$s===1024&&($s=1023),Rs=Ts*Math.pow(2,-$s),Ss(Rs*4503599627370496>>>0,Bs,Ps+Ms),Ss((Ls<<31|$s+1023<<20|Rs*1048576&1048575)>>>0,Bs,Ps+Cs)}}}va.writeDoubleLE=_a.bind(null,writeUintLE,0,4),va.writeDoubleBE=_a.bind(null,writeUintBE,4,0);function _s(Ss,Ms,Cs,Ts,Bs){var Ps=Ss(Ts,Bs+Ms),Ls=Ss(Ts,Bs+Cs),Rs=(Ls>>31)*2+1,$s=Ls>>>20&2047,Fs=4294967296*(Ls&1048575)+Ps;return $s===2047?Fs?NaN:Rs*(1/0):$s===0?Rs*5e-324*Fs:Rs*Math.pow(2,$s-1075)*(Fs+4503599627370496)}va.readDoubleLE=_s.bind(null,readUintLE,0,4),va.readDoubleBE=_s.bind(null,readUintBE,4,0)}(),va}function writeUintLE(va,_a,_s){_a[_s]=va&255,_a[_s+1]=va>>>8&255,_a[_s+2]=va>>>16&255,_a[_s+3]=va>>>24}function writeUintBE(va,_a,_s){_a[_s]=va>>>24,_a[_s+1]=va>>>16&255,_a[_s+2]=va>>>8&255,_a[_s+3]=va&255}function readUintLE(va,_a){return(va[_a]|va[_a+1]<<8|va[_a+2]<<16|va[_a+3]<<24)>>>0}function readUintBE(va,_a){return(va[_a]<<24|va[_a+1]<<16|va[_a+2]<<8|va[_a+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(va){}return null}var utf8$2={};(function(va){var _a=va;_a.length=function(Ss){for(var Ms=0,Cs=0,Ts=0;Ts<Ss.length;++Ts)Cs=Ss.charCodeAt(Ts),Cs<128?Ms+=1:Cs<2048?Ms+=2:(Cs&64512)===55296&&(Ss.charCodeAt(Ts+1)&64512)===56320?(++Ts,Ms+=4):Ms+=3;return Ms},_a.read=function(Ss,Ms,Cs){var Ts=Cs-Ms;if(Ts<1)return"";for(var Bs=null,Ps=[],Ls=0,Rs;Ms<Cs;)Rs=Ss[Ms++],Rs<128?Ps[Ls++]=Rs:Rs>191&&Rs<224?Ps[Ls++]=(Rs&31)<<6|Ss[Ms++]&63:Rs>239&&Rs<365?(Rs=((Rs&7)<<18|(Ss[Ms++]&63)<<12|(Ss[Ms++]&63)<<6|Ss[Ms++]&63)-65536,Ps[Ls++]=55296+(Rs>>10),Ps[Ls++]=56320+(Rs&1023)):Ps[Ls++]=(Rs&15)<<12|(Ss[Ms++]&63)<<6|Ss[Ms++]&63,Ls>8191&&((Bs||(Bs=[])).push(String.fromCharCode.apply(String,Ps)),Ls=0);return Bs?(Ls&&Bs.push(String.fromCharCode.apply(String,Ps.slice(0,Ls))),Bs.join("")):String.fromCharCode.apply(String,Ps.slice(0,Ls))},_a.write=function(Ss,Ms,Cs){for(var Ts=Cs,Bs,Ps,Ls=0;Ls<Ss.length;++Ls)Bs=Ss.charCodeAt(Ls),Bs<128?Ms[Cs++]=Bs:Bs<2048?(Ms[Cs++]=Bs>>6|192,Ms[Cs++]=Bs&63|128):(Bs&64512)===55296&&((Ps=Ss.charCodeAt(Ls+1))&64512)===56320?(Bs=65536+((Bs&1023)<<10)+(Ps&1023),++Ls,Ms[Cs++]=Bs>>18|240,Ms[Cs++]=Bs>>12&63|128,Ms[Cs++]=Bs>>6&63|128,Ms[Cs++]=Bs&63|128):(Ms[Cs++]=Bs>>12|224,Ms[Cs++]=Bs>>6&63|128,Ms[Cs++]=Bs&63|128);return Cs-Ts}})(utf8$2);var pool_1=pool;function pool(va,_a,_s){var Ss=_s||8192,Ms=Ss>>>1,Cs=null,Ts=Ss;return function(Ps){if(Ps<1||Ps>Ms)return va(Ps);Ts+Ps>Ss&&(Cs=va(Ss),Ts=0);var Ls=_a.call(Cs,Ts,Ts+=Ps);return Ts&7&&(Ts=(Ts|7)+1),Ls}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(va,_a){this.lo=va>>>0,this.hi=_a>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function va(_a){if(_a===0)return zero;var _s=_a<0;_s&&(_a=-_a);var Ss=_a>>>0,Ms=(_a-Ss)/4294967296>>>0;return _s&&(Ms=~Ms>>>0,Ss=~Ss>>>0,++Ss>4294967295&&(Ss=0,++Ms>4294967295&&(Ms=0))),new LongBits$2(Ss,Ms)};LongBits$2.from=function va(_a){if(typeof _a=="number")return LongBits$2.fromNumber(_a);if(util$5.isString(_a))if(util$5.Long)_a=util$5.Long.fromString(_a);else return LongBits$2.fromNumber(parseInt(_a,10));return _a.low||_a.high?new LongBits$2(_a.low>>>0,_a.high>>>0):zero};LongBits$2.prototype.toNumber=function va(_a){if(!_a&&this.hi>>>31){var _s=~this.lo+1>>>0,Ss=~this.hi>>>0;return _s||(Ss=Ss+1>>>0),-(_s+Ss*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function va(_a){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(_a)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(_a)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function va(_a){return _a===zeroHash?zero:new LongBits$2((charCodeAt.call(_a,0)|charCodeAt.call(_a,1)<<8|charCodeAt.call(_a,2)<<16|charCodeAt.call(_a,3)<<24)>>>0,(charCodeAt.call(_a,4)|charCodeAt.call(_a,5)<<8|charCodeAt.call(_a,6)<<16|charCodeAt.call(_a,7)<<24)>>>0)};LongBits$2.prototype.toHash=function va(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function va(){var _a=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^_a)>>>0,this.lo=(this.lo<<1^_a)>>>0,this};LongBits$2.prototype.zzDecode=function va(){var _a=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^_a)>>>0,this.hi=(this.hi>>>1^_a)>>>0,this};LongBits$2.prototype.length=function va(){var _a=this.lo,_s=(this.lo>>>28|this.hi<<4)>>>0,Ss=this.hi>>>24;return Ss===0?_s===0?_a<16384?_a<128?1:2:_a<2097152?3:4:_s<16384?_s<128?5:6:_s<2097152?7:8:Ss<128?9:10};(function(va){var _a=va;_a.asPromise=aspromise,_a.base64=base64$1,_a.EventEmitter=eventemitter,_a.float=float,_a.inquire=inquire_1,_a.utf8=utf8$2,_a.pool=pool_1,_a.LongBits=longbits,_a.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),_a.global=_a.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,_a.emptyArray=Object.freeze?Object.freeze([]):[],_a.emptyObject=Object.freeze?Object.freeze({}):{},_a.isInteger=Number.isInteger||function(Cs){return typeof Cs=="number"&&isFinite(Cs)&&Math.floor(Cs)===Cs},_a.isString=function(Cs){return typeof Cs=="string"||Cs instanceof String},_a.isObject=function(Cs){return Cs&&typeof Cs=="object"},_a.isset=_a.isSet=function(Cs,Ts){var Bs=Cs[Ts];return Bs!=null&&Cs.hasOwnProperty(Ts)?typeof Bs!="object"||(Array.isArray(Bs)?Bs.length:Object.keys(Bs).length)>0:!1},_a.Buffer=function(){try{var Ms=_a.inquire("buffer").Buffer;return Ms.prototype.utf8Write?Ms:null}catch{return null}}(),_a._Buffer_from=null,_a._Buffer_allocUnsafe=null,_a.newBuffer=function(Cs){return typeof Cs=="number"?_a.Buffer?_a._Buffer_allocUnsafe(Cs):new _a.Array(Cs):_a.Buffer?_a._Buffer_from(Cs):typeof Uint8Array>"u"?Cs:new Uint8Array(Cs)},_a.Array=typeof Uint8Array<"u"?Uint8Array:Array,_a.Long=_a.global.dcodeIO&&_a.global.dcodeIO.Long||_a.global.Long||_a.inquire("long"),_a.key2Re=/^true|false|0|1$/,_a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,_a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,_a.longToHash=function(Cs){return Cs?_a.LongBits.from(Cs).toHash():_a.LongBits.zeroHash},_a.longFromHash=function(Cs,Ts){var Bs=_a.LongBits.fromHash(Cs);return _a.Long?_a.Long.fromBits(Bs.lo,Bs.hi,Ts):Bs.toNumber(Boolean(Ts))};function _s(Ms,Cs,Ts){for(var Bs=Object.keys(Cs),Ps=0;Ps<Bs.length;++Ps)(Ms[Bs[Ps]]===void 0||!Ts)&&(Ms[Bs[Ps]]=Cs[Bs[Ps]]);return Ms}_a.merge=_s,_a.lcFirst=function(Cs){return Cs.charAt(0).toLowerCase()+Cs.substring(1)};function Ss(Ms){function Cs(Ts,Bs){if(!(this instanceof Cs))return new Cs(Ts,Bs);Object.defineProperty(this,"message",{get:function(){return Ts}}),Error.captureStackTrace?Error.captureStackTrace(this,Cs):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Bs&&_s(this,Bs)}return(Cs.prototype=Object.create(Error.prototype)).constructor=Cs,Object.defineProperty(Cs.prototype,"name",{get:function(){return Ms}}),Cs.prototype.toString=function(){return this.name+": "+this.message},Cs}_a.newError=Ss,_a.ProtocolError=Ss("ProtocolError"),_a.oneOfGetter=function(Cs){for(var Ts={},Bs=0;Bs<Cs.length;++Bs)Ts[Cs[Bs]]=1;return function(){for(var Ps=Object.keys(this),Ls=Ps.length-1;Ls>-1;--Ls)if(Ts[Ps[Ls]]===1&&this[Ps[Ls]]!==void 0&&this[Ps[Ls]]!==null)return Ps[Ls]}},_a.oneOfSetter=function(Cs){return function(Ts){for(var Bs=0;Bs<Cs.length;++Bs)Cs[Bs]!==Ts&&delete this[Cs[Bs]]}},_a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},_a._configure=function(){var Ms=_a.Buffer;if(!Ms){_a._Buffer_from=_a._Buffer_allocUnsafe=null;return}_a._Buffer_from=Ms.from!==Uint8Array.from&&Ms.from||function(Ts,Bs){return new Ms(Ts,Bs)},_a._Buffer_allocUnsafe=Ms.allocUnsafe||function(Ts){return new Ms(Ts)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(va,_a,_s){this.fn=va,this.len=_a,this.next=void 0,this.val=_s}function noop(){}function State(va){this.head=va.head,this.tail=va.tail,this.len=va.len,this.next=va.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function va(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function va(_a){return new util$4.Array(_a)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function va(_a,_s,Ss){return this.tail=this.tail.next=new Op(_a,_s,Ss),this.len+=_s,this};function writeByte(va,_a,_s){_a[_s]=va&255}function writeVarint32(va,_a,_s){for(;va>127;)_a[_s++]=va&127|128,va>>>=7;_a[_s]=va}function VarintOp(va,_a){this.len=va,this.next=void 0,this.val=_a}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function va(_a){return this.len+=(this.tail=this.tail.next=new VarintOp((_a=_a>>>0)<128?1:_a<16384?2:_a<2097152?3:_a<268435456?4:5,_a)).len,this};Writer$1.prototype.int32=function va(_a){return _a<0?this._push(writeVarint64,10,LongBits$1.fromNumber(_a)):this.uint32(_a)};Writer$1.prototype.sint32=function va(_a){return this.uint32((_a<<1^_a>>31)>>>0)};function writeVarint64(va,_a,_s){for(;va.hi;)_a[_s++]=va.lo&127|128,va.lo=(va.lo>>>7|va.hi<<25)>>>0,va.hi>>>=7;for(;va.lo>127;)_a[_s++]=va.lo&127|128,va.lo=va.lo>>>7;_a[_s++]=va.lo}Writer$1.prototype.uint64=function va(_a){var _s=LongBits$1.from(_a);return this._push(writeVarint64,_s.length(),_s)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function va(_a){var _s=LongBits$1.from(_a).zzEncode();return this._push(writeVarint64,_s.length(),_s)};Writer$1.prototype.bool=function va(_a){return this._push(writeByte,1,_a?1:0)};function writeFixed32(va,_a,_s){_a[_s]=va&255,_a[_s+1]=va>>>8&255,_a[_s+2]=va>>>16&255,_a[_s+3]=va>>>24}Writer$1.prototype.fixed32=function va(_a){return this._push(writeFixed32,4,_a>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function va(_a){var _s=LongBits$1.from(_a);return this._push(writeFixed32,4,_s.lo)._push(writeFixed32,4,_s.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function va(_a){return this._push(util$4.float.writeFloatLE,4,_a)};Writer$1.prototype.double=function va(_a){return this._push(util$4.float.writeDoubleLE,8,_a)};var writeBytes=util$4.Array.prototype.set?function va(_a,_s,Ss){_s.set(_a,Ss)}:function va(_a,_s,Ss){for(var Ms=0;Ms<_a.length;++Ms)_s[Ss+Ms]=_a[Ms]};Writer$1.prototype.bytes=function va(_a){var _s=_a.length>>>0;if(!_s)return this._push(writeByte,1,0);if(util$4.isString(_a)){var Ss=Writer$1.alloc(_s=base64.length(_a));base64.decode(_a,Ss,0),_a=Ss}return this.uint32(_s)._push(writeBytes,_s,_a)};Writer$1.prototype.string=function va(_a){var _s=utf8$1.length(_a);return _s?this.uint32(_s)._push(utf8$1.write,_s,_a):this._push(writeByte,1,0)};Writer$1.prototype.fork=function va(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function va(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function va(){var _a=this.head,_s=this.tail,Ss=this.len;return this.reset().uint32(Ss),Ss&&(this.tail.next=_a.next,this.tail=_s,this.len+=Ss),this};Writer$1.prototype.finish=function va(){for(var _a=this.head.next,_s=this.constructor.alloc(this.len),Ss=0;_a;)_a.fn(_a.val,_s,Ss),Ss+=_a.len,_a=_a.next;return _s};Writer$1._configure=function(va){BufferWriter$1=va,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(_a,_s,Ss){_s.set(_a,Ss)}:function(_a,_s,Ss){if(_a.copy)_a.copy(_s,Ss,0,_a.length);else for(var Ms=0;Ms<_a.length;)_s[Ss++]=_a[Ms++]}};BufferWriter.prototype.bytes=function va(_a){util$3.isString(_a)&&(_a=util$3._Buffer_from(_a,"base64"));var _s=_a.length>>>0;return this.uint32(_s),_s&&this._push(BufferWriter.writeBytesBuffer,_s,_a),this};function writeStringBuffer(va,_a,_s){va.length<40?util$3.utf8.write(va,_a,_s):_a.utf8Write?_a.utf8Write(va,_s):_a.write(va,_s)}BufferWriter.prototype.string=function va(_a){var _s=util$3.Buffer.byteLength(_a);return this.uint32(_s),_s&&this._push(writeStringBuffer,_s,_a),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(va,_a){return RangeError("index out of range: "+va.pos+" + "+(_a||1)+" > "+va.len)}function Reader$1(va){this.buf=va,this.pos=0,this.len=va.length}var create_array=typeof Uint8Array<"u"?function va(_a){if(_a instanceof Uint8Array||Array.isArray(_a))return new Reader$1(_a);throw Error("illegal buffer")}:function va(_a){if(Array.isArray(_a))return new Reader$1(_a);throw Error("illegal buffer")},create=function va(){return util$2.Buffer?function(_s){return(Reader$1.create=function(Ms){return util$2.Buffer.isBuffer(Ms)?new BufferReader$1(Ms):create_array(Ms)})(_s)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function va(){var _a=4294967295;return function(){if(_a=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(_a=(_a|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(_a=(_a|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(_a=(_a|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(_a=(_a|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return _a;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return _a}}();Reader$1.prototype.int32=function va(){return this.uint32()|0};Reader$1.prototype.sint32=function va(){var _a=this.uint32();return _a>>>1^-(_a&1)|0};function readLongVarint(){var va=new LongBits(0,0),_a=0;if(this.len-this.pos>4){for(;_a<4;++_a)if(va.lo=(va.lo|(this.buf[this.pos]&127)<<_a*7)>>>0,this.buf[this.pos++]<128)return va;if(va.lo=(va.lo|(this.buf[this.pos]&127)<<28)>>>0,va.hi=(va.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return va;_a=0}else{for(;_a<3;++_a){if(this.pos>=this.len)throw indexOutOfRange(this);if(va.lo=(va.lo|(this.buf[this.pos]&127)<<_a*7)>>>0,this.buf[this.pos++]<128)return va}return va.lo=(va.lo|(this.buf[this.pos++]&127)<<_a*7)>>>0,va}if(this.len-this.pos>4){for(;_a<5;++_a)if(va.hi=(va.hi|(this.buf[this.pos]&127)<<_a*7+3)>>>0,this.buf[this.pos++]<128)return va}else for(;_a<5;++_a){if(this.pos>=this.len)throw indexOutOfRange(this);if(va.hi=(va.hi|(this.buf[this.pos]&127)<<_a*7+3)>>>0,this.buf[this.pos++]<128)return va}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function va(){return this.uint32()!==0};function readFixed32_end(va,_a){return(va[_a-4]|va[_a-3]<<8|va[_a-2]<<16|va[_a-1]<<24)>>>0}Reader$1.prototype.fixed32=function va(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function va(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function va(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var _a=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,_a};Reader$1.prototype.double=function va(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var _a=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,_a};Reader$1.prototype.bytes=function va(){var _a=this.uint32(),_s=this.pos,Ss=this.pos+_a;if(Ss>this.len)throw indexOutOfRange(this,_a);return this.pos+=_a,Array.isArray(this.buf)?this.buf.slice(_s,Ss):_s===Ss?new this.buf.constructor(0):this._slice.call(this.buf,_s,Ss)};Reader$1.prototype.string=function va(){var _a=this.bytes();return utf8.read(_a,0,_a.length)};Reader$1.prototype.skip=function va(_a){if(typeof _a=="number"){if(this.pos+_a>this.len)throw indexOutOfRange(this,_a);this.pos+=_a}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(va){switch(va){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(va=this.uint32()&7)!==4;)this.skipType(va);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+va+" at offset "+this.pos)}return this};Reader$1._configure=function(va){BufferReader$1=va,Reader$1.create=create(),BufferReader$1._configure();var _a=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[_a](!1)},uint64:function(){return readLongVarint.call(this)[_a](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[_a](!1)},fixed64:function(){return readFixed64.call(this)[_a](!0)},sfixed64:function(){return readFixed64.call(this)[_a](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(va){Reader.call(this,va)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function va(){var _a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+_a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+_a,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(va,_a,_s){if(typeof va!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=va,this.requestDelimited=Boolean(_a),this.responseDelimited=Boolean(_s)}Service.prototype.rpcCall=function va(_a,_s,Ss,Ms,Cs){if(!Ms)throw TypeError("request must be specified");var Ts=this;if(!Cs)return util.asPromise(va,Ts,_a,_s,Ss,Ms);if(!Ts.rpcImpl){setTimeout(function(){Cs(Error("already ended"))},0);return}try{return Ts.rpcImpl(_a,_s[Ts.requestDelimited?"encodeDelimited":"encode"](Ms).finish(),function(Ps,Ls){if(Ps)return Ts.emit("error",Ps,_a),Cs(Ps);if(Ls===null){Ts.end(!0);return}if(!(Ls instanceof Ss))try{Ls=Ss[Ts.responseDelimited?"decodeDelimited":"decode"](Ls)}catch(Rs){return Ts.emit("error",Rs,_a),Cs(Rs)}return Ts.emit("data",Ls,_a),Cs(null,Ls)})}catch(Bs){Ts.emit("error",Bs,_a),setTimeout(function(){Cs(Bs)},0);return}};Service.prototype.end=function va(_a){return this.rpcImpl&&(_a||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(va){var _a=va;_a.Service=service})(rpc);var roots={};(function(va){var _a=va;_a.build="minimal",_a.Writer=writer,_a.BufferWriter=writer_buffer,_a.Reader=reader,_a.BufferReader=reader_buffer,_a.util=minimal$1,_a.rpc=rpc,_a.roots=roots,_a.configure=_s;function _s(){_a.util._configure(),_a.Writer._configure(_a.BufferWriter),_a.Reader._configure(_a.BufferReader)}_s()})(indexMinimal);var minimal=indexMinimal,parseWork,Subscribe,Five;Object.defineProperty(five,"__esModule",{value:!0});var t$3=require$$2$1,e$3=tslib.exports,i$1=minimal;function n$4(va){if(va&&va.__esModule)return va;var _a=Object.create(null);return va&&Object.keys(va).forEach(function(_s){if(_s!=="default"){var Ss=Object.getOwnPropertyDescriptor(va,_s);Object.defineProperty(_a,_s,Ss.get?Ss:{enumerable:!0,get:function(){return va[_s]}})}}),_a.default=va,Object.freeze(_a)}var r$4=n$4(t$3),o$1=n$4(i$1),s$1=Number(r$4.REVISION);if(s$1<115||s$1>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$1,u$2={},l$4={},h$4=h$4||function(va,_a){var _s={},Ss=_s.lib={},Ms=Ss.Base=function(){function Fs(){}return{extend:function(Os){Fs.prototype=this;var Gs=new Fs;return Os&&Gs.mixIn(Os),Gs.hasOwnProperty("init")||(Gs.init=function(){Gs.$super.init.apply(this,arguments)}),Gs.init.prototype=Gs,Gs.$super=this,Gs},create:function(){var Os=this.extend();return Os.init.apply(Os,arguments),Os},init:function(){},mixIn:function(Os){for(var Gs in Os)Os.hasOwnProperty(Gs)&&(this[Gs]=Os[Gs]);Os.hasOwnProperty("toString")&&(this.toString=Os.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Cs=Ss.WordArray=Ms.extend({init:function(Fs,Os){Fs=this.words=Fs||[],this.sigBytes=Os??4*Fs.length},toString:function(Fs){return(Fs||Bs).stringify(this)},concat:function(Fs){var Os=this.words,Gs=Fs.words,Ns=this.sigBytes,Vs=Fs.sigBytes;if(this.clamp(),Ns%4)for(var Ds=0;Ds<Vs;Ds++){var ks=Gs[Ds>>>2]>>>24-Ds%4*8&255;Os[Ns+Ds>>>2]|=ks<<24-(Ns+Ds)%4*8}else for(Ds=0;Ds<Vs;Ds+=4)Os[Ns+Ds>>>2]=Gs[Ds>>>2];return this.sigBytes+=Vs,this},clamp:function(){var Fs=this.words,Os=this.sigBytes;Fs[Os>>>2]&=4294967295<<32-Os%4*8,Fs.length=va.ceil(Os/4)},clone:function(){var Fs=Ms.clone.call(this);return Fs.words=this.words.slice(0),Fs},random:function(Fs){for(var Os=[],Gs=0;Gs<Fs;Gs+=4)Os.push(4294967296*va.random()|0);return new Cs.init(Os,Fs)}}),Ts=_s.enc={},Bs=Ts.Hex={stringify:function(Fs){for(var Os=Fs.words,Gs=Fs.sigBytes,Ns=[],Vs=0;Vs<Gs;Vs++){var Ds=Os[Vs>>>2]>>>24-Vs%4*8&255;Ns.push((Ds>>>4).toString(16)),Ns.push((15&Ds).toString(16))}return Ns.join("")},parse:function(Fs){for(var Os=Fs.length,Gs=[],Ns=0;Ns<Os;Ns+=2)Gs[Ns>>>3]|=parseInt(Fs.substr(Ns,2),16)<<24-Ns%8*4;return new Cs.init(Gs,Os/2)}},Ps=Ts.Latin1={stringify:function(Fs){for(var Os=Fs.words,Gs=Fs.sigBytes,Ns=[],Vs=0;Vs<Gs;Vs++){var Ds=Os[Vs>>>2]>>>24-Vs%4*8&255;Ns.push(String.fromCharCode(Ds))}return Ns.join("")},parse:function(Fs){for(var Os=Fs.length,Gs=[],Ns=0;Ns<Os;Ns++)Gs[Ns>>>2]|=(255&Fs.charCodeAt(Ns))<<24-Ns%4*8;return new Cs.init(Gs,Os)}},Ls=Ts.Utf8={stringify:function(Fs){try{return decodeURIComponent(escape(Ps.stringify(Fs)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Fs){return Ps.parse(unescape(encodeURIComponent(Fs)))}},Rs=Ss.BufferedBlockAlgorithm=Ms.extend({reset:function(){this._data=new Cs.init,this._nDataBytes=0},_append:function(Fs){typeof Fs=="string"&&(Fs=Ls.parse(Fs)),this._data.concat(Fs),this._nDataBytes+=Fs.sigBytes},_process:function(Fs){var Os=this._data,Gs=Os.words,Ns=Os.sigBytes,Vs=this.blockSize,Ds=Ns/(4*Vs),ks=(Ds=Fs?va.ceil(Ds):va.max((0|Ds)-this._minBufferSize,0))*Vs,Us=va.min(4*ks,Ns);if(ks){for(var zs=0;zs<ks;zs+=Vs)this._doProcessBlock(Gs,zs);var Ws=Gs.splice(0,ks);Os.sigBytes-=Us}return new Cs.init(Ws,Us)},clone:function(){var Fs=Ms.clone.call(this);return Fs._data=this._data.clone(),Fs},_minBufferSize:0});Ss.Hasher=Rs.extend({cfg:Ms.extend(),init:function(Fs){this.cfg=this.cfg.extend(Fs),this.reset()},reset:function(){Rs.reset.call(this),this._doReset()},update:function(Fs){return this._append(Fs),this._process(),this},finalize:function(Fs){return Fs&&this._append(Fs),this._doFinalize()},blockSize:16,_createHelper:function(Fs){return function(Os,Gs){return new Fs.init(Gs).finalize(Os)}},_createHmacHelper:function(Fs){return function(Os,Gs){return new $s.HMAC.init(Fs,Gs).finalize(Os)}}});var $s=_s.algo={};return _s}(Math);function c$3(va,_a,_s){va!=null&&(typeof va=="number"?this.fromNumber(va,_a,_s):_a==null&&typeof va!="string"?this.fromString(va,256):this.fromString(va,_a))}function d$3(){return new c$3(null)}(function(va){for(var _a=h$4,_s=(Ms=_a.lib).WordArray,Ss=Ms.Hasher,Ms=_a.algo,Cs=[],Ts=[],Bs=function(Gs){return 4294967296*(Gs-(0|Gs))|0},Ps=2,Ls=0;64>Ls;){var Rs;e:{Rs=Ps;for(var $s=va.sqrt(Rs),Fs=2;Fs<=$s;Fs++)if(!(Rs%Fs)){Rs=!1;break e}Rs=!0}Rs&&(8>Ls&&(Cs[Ls]=Bs(va.pow(Ps,.5))),Ts[Ls]=Bs(va.pow(Ps,1/3)),Ls++),Ps++}var Os=[];Ms=Ms.SHA256=Ss.extend({_doReset:function(){this._hash=new _s.init(Cs.slice(0))},_doProcessBlock:function(Gs,Ns){for(var Vs=this._hash.words,Ds=Vs[0],ks=Vs[1],Us=Vs[2],zs=Vs[3],Ws=Vs[4],qs=Vs[5],Zs=Vs[6],el=Vs[7],Js=0;64>Js;Js++){if(16>Js)Os[Js]=0|Gs[Ns+Js];else{var Hs=Os[Js-15],Qs=Os[Js-2];Os[Js]=((Hs<<25|Hs>>>7)^(Hs<<14|Hs>>>18)^Hs>>>3)+Os[Js-7]+((Qs<<15|Qs>>>17)^(Qs<<13|Qs>>>19)^Qs>>>10)+Os[Js-16]}Hs=el+((Ws<<26|Ws>>>6)^(Ws<<21|Ws>>>11)^(Ws<<7|Ws>>>25))+(Ws&qs^~Ws&Zs)+Ts[Js]+Os[Js],Qs=((Ds<<30|Ds>>>2)^(Ds<<19|Ds>>>13)^(Ds<<10|Ds>>>22))+(Ds&ks^Ds&Us^ks&Us),el=Zs,Zs=qs,qs=Ws,Ws=zs+Hs|0,zs=Us,Us=ks,ks=Ds,Ds=Hs+Qs|0}Vs[0]=Vs[0]+Ds|0,Vs[1]=Vs[1]+ks|0,Vs[2]=Vs[2]+Us|0,Vs[3]=Vs[3]+zs|0,Vs[4]=Vs[4]+Ws|0,Vs[5]=Vs[5]+qs|0,Vs[6]=Vs[6]+Zs|0,Vs[7]=Vs[7]+el|0},_doFinalize:function(){var Gs=this._data,Ns=Gs.words,Vs=8*this._nDataBytes,Ds=8*Gs.sigBytes;return Ns[Ds>>>5]|=128<<24-Ds%32,Ns[14+(Ds+64>>>9<<4)]=va.floor(Vs/4294967296),Ns[15+(Ds+64>>>9<<4)]=Vs,Gs.sigBytes=4*Ns.length,this._process(),this._hash},clone:function(){var Gs=Ss.clone.call(this);return Gs._hash=this._hash.clone(),Gs}}),_a.SHA256=Ss._createHelper(Ms),_a.HmacSHA256=Ss._createHmacHelper(Ms)})(Math),h$4.lib.Cipher||function(va){var _a=(Os=h$4).lib,_s=_a.Base,Ss=_a.WordArray,Ms=_a.BufferedBlockAlgorithm,Cs=Os.enc.Base64,Ts=Os.algo.EvpKDF,Bs=_a.Cipher=Ms.extend({cfg:_s.extend(),createEncryptor:function(Ns,Vs){return this.create(this._ENC_XFORM_MODE,Ns,Vs)},createDecryptor:function(Ns,Vs){return this.create(this._DEC_XFORM_MODE,Ns,Vs)},init:function(Ns,Vs,Ds){this.cfg=this.cfg.extend(Ds),this._xformMode=Ns,this._key=Vs,this.reset()},reset:function(){Ms.reset.call(this),this._doReset()},process:function(Ns){return this._append(Ns),this._process()},finalize:function(Ns){return Ns&&this._append(Ns),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(Ns){return{encrypt:function(Vs,Ds,ks){return(typeof Ds=="string"?Gs:Fs).encrypt(Ns,Vs,Ds,ks)},decrypt:function(Vs,Ds,ks){return(typeof Ds=="string"?Gs:Fs).decrypt(Ns,Vs,Ds,ks)}}}});_a.StreamCipher=Bs.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var Ps=Os.mode={},Ls=function(Ns,Vs,Ds){var ks=this._iv;ks?this._iv=void 0:ks=this._prevBlock;for(var Us=0;Us<Ds;Us++)Ns[Vs+Us]^=ks[Us]},Rs=(_a.BlockCipherMode=_s.extend({createEncryptor:function(Ns,Vs){return this.Encryptor.create(Ns,Vs)},createDecryptor:function(Ns,Vs){return this.Decryptor.create(Ns,Vs)},init:function(Ns,Vs){this._cipher=Ns,this._iv=Vs}})).extend();Rs.Encryptor=Rs.extend({processBlock:function(Ns,Vs){var Ds=this._cipher,ks=Ds.blockSize;Ls.call(this,Ns,Vs,ks),Ds.encryptBlock(Ns,Vs),this._prevBlock=Ns.slice(Vs,Vs+ks)}}),Rs.Decryptor=Rs.extend({processBlock:function(Ns,Vs){var Ds=this._cipher,ks=Ds.blockSize,Us=Ns.slice(Vs,Vs+ks);Ds.decryptBlock(Ns,Vs),Ls.call(this,Ns,Vs,ks),this._prevBlock=Us}}),Ps=Ps.CBC=Rs,Rs=(Os.pad={}).Pkcs7={pad:function(Ns,Vs){for(var Ds,ks=(Ds=(Ds=4*Vs)-Ns.sigBytes%Ds)<<24|Ds<<16|Ds<<8|Ds,Us=[],zs=0;zs<Ds;zs+=4)Us.push(ks);Ds=Ss.create(Us,Ds),Ns.concat(Ds)},unpad:function(Ns){Ns.sigBytes-=255&Ns.words[Ns.sigBytes-1>>>2]}},_a.BlockCipher=Bs.extend({cfg:Bs.cfg.extend({mode:Ps,padding:Rs}),reset:function(){Bs.reset.call(this);var Ns=(Vs=this.cfg).iv,Vs=Vs.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Ds=Vs.createEncryptor;else Ds=Vs.createDecryptor,this._minBufferSize=1;this._mode=Ds.call(Vs,this,Ns&&Ns.words)},_doProcessBlock:function(Ns,Vs){this._mode.processBlock(Ns,Vs)},_doFinalize:function(){var Ns=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){Ns.pad(this._data,this.blockSize);var Vs=this._process(!0)}else Vs=this._process(!0),Ns.unpad(Vs);return Vs},blockSize:4});var $s=_a.CipherParams=_s.extend({init:function(Ns){this.mixIn(Ns)},toString:function(Ns){return(Ns||this.formatter).stringify(this)}}),Fs=(Ps=(Os.format={}).OpenSSL={stringify:function(Ns){var Vs=Ns.ciphertext;return((Ns=Ns.salt)?Ss.create([1398893684,1701076831]).concat(Ns).concat(Vs):Vs).toString(Cs)},parse:function(Ns){var Vs=(Ns=Cs.parse(Ns)).words;if(Vs[0]==1398893684&&Vs[1]==1701076831){var Ds=Ss.create(Vs.slice(2,4));Vs.splice(0,4),Ns.sigBytes-=16}return $s.create({ciphertext:Ns,salt:Ds})}},_a.SerializableCipher=_s.extend({cfg:_s.extend({format:Ps}),encrypt:function(Ns,Vs,Ds,ks){ks=this.cfg.extend(ks);var Us=Ns.createEncryptor(Ds,ks);return Vs=Us.finalize(Vs),Us=Us.cfg,$s.create({ciphertext:Vs,key:Ds,iv:Us.iv,algorithm:Ns,mode:Us.mode,padding:Us.padding,blockSize:Ns.blockSize,formatter:ks.format})},decrypt:function(Ns,Vs,Ds,ks){return ks=this.cfg.extend(ks),Vs=this._parse(Vs,ks.format),Ns.createDecryptor(Ds,ks).finalize(Vs.ciphertext)},_parse:function(Ns,Vs){return typeof Ns=="string"?Vs.parse(Ns,this):Ns}})),Os=(Os.kdf={}).OpenSSL={execute:function(Ns,Vs,Ds,ks){return ks||(ks=Ss.random(8)),Ns=Ts.create({keySize:Vs+Ds}).compute(Ns,ks),Ds=Ss.create(Ns.words.slice(Vs),4*Ds),Ns.sigBytes=4*Vs,$s.create({key:Ns,iv:Ds,salt:ks})}},Gs=_a.PasswordBasedCipher=Fs.extend({cfg:Fs.cfg.extend({kdf:Os}),encrypt:function(Ns,Vs,Ds,ks){return Ds=(ks=this.cfg.extend(ks)).kdf.execute(Ds,Ns.keySize,Ns.ivSize),ks.iv=Ds.iv,(Ns=Fs.encrypt.call(this,Ns,Vs,Ds.key,ks)).mixIn(Ds),Ns},decrypt:function(Ns,Vs,Ds,ks){return ks=this.cfg.extend(ks),Vs=this._parse(Vs,ks.format),Ds=ks.kdf.execute(Ds,Ns.keySize,Ns.ivSize,Vs.salt),ks.iv=Ds.iv,Fs.decrypt.call(this,Ns,Vs,Ds.key,ks)}})}(),function(){for(var va=h$4,_a=va.lib.BlockCipher,_s=va.algo,Ss=[],Ms=[],Cs=[],Ts=[],Bs=[],Ps=[],Ls=[],Rs=[],$s=[],Fs=[],Os=[],Gs=0;256>Gs;Gs++)Os[Gs]=128>Gs?Gs<<1:Gs<<1^283;var Ns=0,Vs=0;for(Gs=0;256>Gs;Gs++){var Ds=(Ds=Vs^Vs<<1^Vs<<2^Vs<<3^Vs<<4)>>>8^255&Ds^99;Ss[Ns]=Ds,Ms[Ds]=Ns;var ks=Os[Ns],Us=Os[ks],zs=Os[Us],Ws=257*Os[Ds]^16843008*Ds;Cs[Ns]=Ws<<24|Ws>>>8,Ts[Ns]=Ws<<16|Ws>>>16,Bs[Ns]=Ws<<8|Ws>>>24,Ps[Ns]=Ws,Ws=16843009*zs^65537*Us^257*ks^16843008*Ns,Ls[Ds]=Ws<<24|Ws>>>8,Rs[Ds]=Ws<<16|Ws>>>16,$s[Ds]=Ws<<8|Ws>>>24,Fs[Ds]=Ws,Ns?(Ns=ks^Os[Os[Os[zs^ks]]],Vs^=Os[Os[Vs]]):Ns=Vs=1}var qs=[0,1,2,4,8,16,32,64,128,27,54];_s=_s.AES=_a.extend({_doReset:function(){for(var Zs=(Js=this._key).words,el=Js.sigBytes/4,Js=4*((this._nRounds=el+6)+1),Hs=this._keySchedule=[],Qs=0;Qs<Js;Qs++)if(Qs<el)Hs[Qs]=Zs[Qs];else{var js=Hs[Qs-1];Qs%el?6<el&&Qs%el==4&&(js=Ss[js>>>24]<<24|Ss[js>>>16&255]<<16|Ss[js>>>8&255]<<8|Ss[255&js]):(js=Ss[(js=js<<8|js>>>24)>>>24]<<24|Ss[js>>>16&255]<<16|Ss[js>>>8&255]<<8|Ss[255&js],js^=qs[Qs/el|0]<<24),Hs[Qs]=Hs[Qs-el]^js}for(Zs=this._invKeySchedule=[],el=0;el<Js;el++)Qs=Js-el,js=el%4?Hs[Qs]:Hs[Qs-4],Zs[el]=4>el||4>=Qs?js:Ls[Ss[js>>>24]]^Rs[Ss[js>>>16&255]]^$s[Ss[js>>>8&255]]^Fs[Ss[255&js]]},encryptBlock:function(Zs,el){this._doCryptBlock(Zs,el,this._keySchedule,Cs,Ts,Bs,Ps,Ss)},decryptBlock:function(Zs,el){var Js=Zs[el+1];Zs[el+1]=Zs[el+3],Zs[el+3]=Js,this._doCryptBlock(Zs,el,this._invKeySchedule,Ls,Rs,$s,Fs,Ms),Js=Zs[el+1],Zs[el+1]=Zs[el+3],Zs[el+3]=Js},_doCryptBlock:function(Zs,el,Js,Hs,Qs,js,Ks,Xs){for(var Ys=this._nRounds,rl=Zs[el]^Js[0],tl=Zs[el+1]^Js[1],il=Zs[el+2]^Js[2],ll=Zs[el+3]^Js[3],cl=4,al=1;al<Ys;al++){var dl=Hs[rl>>>24]^Qs[tl>>>16&255]^js[il>>>8&255]^Ks[255&ll]^Js[cl++],yl=Hs[tl>>>24]^Qs[il>>>16&255]^js[ll>>>8&255]^Ks[255&rl]^Js[cl++],xl=Hs[il>>>24]^Qs[ll>>>16&255]^js[rl>>>8&255]^Ks[255&tl]^Js[cl++];ll=Hs[ll>>>24]^Qs[rl>>>16&255]^js[tl>>>8&255]^Ks[255&il]^Js[cl++],rl=dl,tl=yl,il=xl}dl=(Xs[rl>>>24]<<24|Xs[tl>>>16&255]<<16|Xs[il>>>8&255]<<8|Xs[255&ll])^Js[cl++],yl=(Xs[tl>>>24]<<24|Xs[il>>>16&255]<<16|Xs[ll>>>8&255]<<8|Xs[255&rl])^Js[cl++],xl=(Xs[il>>>24]<<24|Xs[ll>>>16&255]<<16|Xs[rl>>>8&255]<<8|Xs[255&tl])^Js[cl++],ll=(Xs[ll>>>24]<<24|Xs[rl>>>16&255]<<16|Xs[tl>>>8&255]<<8|Xs[255&il])^Js[cl++],Zs[el]=dl,Zs[el+1]=yl,Zs[el+2]=xl,Zs[el+3]=ll},keySize:8}),va.AES=_a._createHelper(_s)}(),l$4.lang={extend:function(va,_a,_s){if(!_a||!va)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var Ss=function(){};if(Ss.prototype=_a.prototype,va.prototype=new Ss,va.prototype.constructor=va,va.superclass=_a.prototype,_a.prototype.constructor==Object.prototype.constructor&&(_a.prototype.constructor=_a),_s){var Ms;for(Ms in _s)va.prototype[Ms]=_s[Ms];var Cs=function(){},Ts=["toString","valueOf"];try{/MSIE/.test(typeof navigator<"u"?navigator.userAgent:"node")&&(Cs=function(Bs,Ps){for(Ms=0;Ms<Ts.length;Ms+=1){var Ls=Ts[Ms],Rs=Ps[Ls];typeof Rs=="function"&&Rs!=Object.prototype[Ls]&&(Bs[Ls]=Rs)}})}catch{}Cs(va.prototype,_s)}}},typeof navigator<"u"&&navigator.appName=="Microsoft Internet Explorer"?(c$3.prototype.am=function(va,_a,_s,Ss,Ms,Cs){for(var Ts=32767&_a,Bs=_a>>15;--Cs>=0;){var Ps=32767&this[va],Ls=this[va++]>>15,Rs=Bs*Ps+Ls*Ts;Ms=((Ps=Ts*Ps+((32767&Rs)<<15)+_s[Ss]+(1073741823&Ms))>>>30)+(Rs>>>15)+Bs*Ls+(Ms>>>30),_s[Ss++]=1073741823&Ps}return Ms},a$1=30):typeof navigator<"u"&&navigator.appName!="Netscape"?(c$3.prototype.am=function(va,_a,_s,Ss,Ms,Cs){for(;--Cs>=0;){var Ts=_a*this[va++]+_s[Ss]+Ms;Ms=Math.floor(Ts/67108864),_s[Ss++]=67108863&Ts}return Ms},a$1=26):(c$3.prototype.am=function(va,_a,_s,Ss,Ms,Cs){for(var Ts=16383&_a,Bs=_a>>14;--Cs>=0;){var Ps=16383&this[va],Ls=this[va++]>>14,Rs=Bs*Ps+Ls*Ts;Ms=((Ps=Ts*Ps+((16383&Rs)<<14)+_s[Ss]+Ms)>>28)+(Rs>>14)+Bs*Ls,_s[Ss++]=268435455&Ps}return Ms},a$1=28),c$3.prototype.DB=a$1,c$3.prototype.DM=(1<<a$1)-1,c$3.prototype.DV=1<<a$1;c$3.prototype.FV=Math.pow(2,52),c$3.prototype.F1=52-a$1,c$3.prototype.F2=2*a$1-52;var p$4,A$4,f$4=new Array;for(p$4="0".charCodeAt(0),A$4=0;A$4<=9;++A$4)f$4[p$4++]=A$4;for(p$4="a".charCodeAt(0),A$4=10;A$4<36;++A$4)f$4[p$4++]=A$4;for(p$4="A".charCodeAt(0),A$4=10;A$4<36;++A$4)f$4[p$4++]=A$4;function g$4(va){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(va)}function v$4(va,_a){var _s=f$4[va.charCodeAt(_a)];return _s??-1}function m$4(va){var _a=d$3();return _a.fromInt(va),_a}function y$4(va){var _a,_s=1;return(_a=va>>>16)!=0&&(va=_a,_s+=16),(_a=va>>8)!=0&&(va=_a,_s+=8),(_a=va>>4)!=0&&(va=_a,_s+=4),(_a=va>>2)!=0&&(va=_a,_s+=2),(_a=va>>1)!=0&&(va=_a,_s+=1),_s}function b$3(va){this.m=va}function w$4(va){this.m=va,this.mp=va.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<va.DB-15)-1,this.mt2=2*va.t}function x$3(va,_a){return va&_a}function E$3(va,_a){return va|_a}function I$2(va,_a){return va^_a}function C$3(va,_a){return va&~_a}function S$1(va){if(va==0)return-1;var _a=0;return(65535&va)==0&&(va>>=16,_a+=16),(255&va)==0&&(va>>=8,_a+=8),(15&va)==0&&(va>>=4,_a+=4),(3&va)==0&&(va>>=2,_a+=2),(1&va)==0&&++_a,_a}function B$2(va){for(var _a=0;va!=0;)va&=va-1,++_a;return _a}function M$1(){}function P$2(va){return va}function T(va){this.r2=d$3(),this.q3=d$3(),c$3.ONE.dlShiftTo(2*va.t,this.r2),this.mu=this.r2.divide(va),this.m=va}b$3.prototype.convert=function(va){return va.s<0||va.compareTo(this.m)>=0?va.mod(this.m):va},b$3.prototype.revert=function(va){return va},b$3.prototype.reduce=function(va){va.divRemTo(this.m,null,va)},b$3.prototype.mulTo=function(va,_a,_s){va.multiplyTo(_a,_s),this.reduce(_s)},b$3.prototype.sqrTo=function(va,_a){va.squareTo(_a),this.reduce(_a)},w$4.prototype.convert=function(va){var _a=d$3();return va.abs().dlShiftTo(this.m.t,_a),_a.divRemTo(this.m,null,_a),va.s<0&&_a.compareTo(c$3.ZERO)>0&&this.m.subTo(_a,_a),_a},w$4.prototype.revert=function(va){var _a=d$3();return va.copyTo(_a),this.reduce(_a),_a},w$4.prototype.reduce=function(va){for(;va.t<=this.mt2;)va[va.t++]=0;for(var _a=0;_a<this.m.t;++_a){var _s=32767&va[_a],Ss=_s*this.mpl+((_s*this.mph+(va[_a]>>15)*this.mpl&this.um)<<15)&va.DM;for(va[_s=_a+this.m.t]+=this.m.am(0,Ss,va,_a,0,this.m.t);va[_s]>=va.DV;)va[_s]-=va.DV,va[++_s]++}va.clamp(),va.drShiftTo(this.m.t,va),va.compareTo(this.m)>=0&&va.subTo(this.m,va)},w$4.prototype.mulTo=function(va,_a,_s){va.multiplyTo(_a,_s),this.reduce(_s)},w$4.prototype.sqrTo=function(va,_a){va.squareTo(_a),this.reduce(_a)},c$3.prototype.copyTo=function(va){for(var _a=this.t-1;_a>=0;--_a)va[_a]=this[_a];va.t=this.t,va.s=this.s},c$3.prototype.fromInt=function(va){this.t=1,this.s=va<0?-1:0,va>0?this[0]=va:va<-1?this[0]=va+this.DV:this.t=0},c$3.prototype.fromString=function(va,_a){var _s;if(_a==16)_s=4;else if(_a==8)_s=3;else if(_a==256)_s=8;else if(_a==2)_s=1;else if(_a==32)_s=5;else{if(_a!=4)return void this.fromRadix(va,_a);_s=2}this.t=0,this.s=0;for(var Ss=va.length,Ms=!1,Cs=0;--Ss>=0;){var Ts=_s==8?255&va[Ss]:v$4(va,Ss);Ts<0?va.charAt(Ss)=="-"&&(Ms=!0):(Ms=!1,Cs==0?this[this.t++]=Ts:Cs+_s>this.DB?(this[this.t-1]|=(Ts&(1<<this.DB-Cs)-1)<<Cs,this[this.t++]=Ts>>this.DB-Cs):this[this.t-1]|=Ts<<Cs,(Cs+=_s)>=this.DB&&(Cs-=this.DB))}_s==8&&(128&va[0])!=0&&(this.s=-1,Cs>0&&(this[this.t-1]|=(1<<this.DB-Cs)-1<<Cs)),this.clamp(),Ms&&c$3.ZERO.subTo(this,this)},c$3.prototype.clamp=function(){for(var va=this.s&this.DM;this.t>0&&this[this.t-1]==va;)--this.t},c$3.prototype.dlShiftTo=function(va,_a){var _s;for(_s=this.t-1;_s>=0;--_s)_a[_s+va]=this[_s];for(_s=va-1;_s>=0;--_s)_a[_s]=0;_a.t=this.t+va,_a.s=this.s},c$3.prototype.drShiftTo=function(va,_a){for(var _s=va;_s<this.t;++_s)_a[_s-va]=this[_s];_a.t=Math.max(this.t-va,0),_a.s=this.s},c$3.prototype.lShiftTo=function(va,_a){var _s,Ss=va%this.DB,Ms=this.DB-Ss,Cs=(1<<Ms)-1,Ts=Math.floor(va/this.DB),Bs=this.s<<Ss&this.DM;for(_s=this.t-1;_s>=0;--_s)_a[_s+Ts+1]=this[_s]>>Ms|Bs,Bs=(this[_s]&Cs)<<Ss;for(_s=Ts-1;_s>=0;--_s)_a[_s]=0;_a[Ts]=Bs,_a.t=this.t+Ts+1,_a.s=this.s,_a.clamp()},c$3.prototype.rShiftTo=function(va,_a){_a.s=this.s;var _s=Math.floor(va/this.DB);if(_s>=this.t)_a.t=0;else{var Ss=va%this.DB,Ms=this.DB-Ss,Cs=(1<<Ss)-1;_a[0]=this[_s]>>Ss;for(var Ts=_s+1;Ts<this.t;++Ts)_a[Ts-_s-1]|=(this[Ts]&Cs)<<Ms,_a[Ts-_s]=this[Ts]>>Ss;Ss>0&&(_a[this.t-_s-1]|=(this.s&Cs)<<Ms),_a.t=this.t-_s,_a.clamp()}},c$3.prototype.subTo=function(va,_a){for(var _s=0,Ss=0,Ms=Math.min(va.t,this.t);_s<Ms;)Ss+=this[_s]-va[_s],_a[_s++]=Ss&this.DM,Ss>>=this.DB;if(va.t<this.t){for(Ss-=va.s;_s<this.t;)Ss+=this[_s],_a[_s++]=Ss&this.DM,Ss>>=this.DB;Ss+=this.s}else{for(Ss+=this.s;_s<va.t;)Ss-=va[_s],_a[_s++]=Ss&this.DM,Ss>>=this.DB;Ss-=va.s}_a.s=Ss<0?-1:0,Ss<-1?_a[_s++]=this.DV+Ss:Ss>0&&(_a[_s++]=Ss),_a.t=_s,_a.clamp()},c$3.prototype.multiplyTo=function(va,_a){var _s=this.abs(),Ss=va.abs(),Ms=_s.t;for(_a.t=Ms+Ss.t;--Ms>=0;)_a[Ms]=0;for(Ms=0;Ms<Ss.t;++Ms)_a[Ms+_s.t]=_s.am(0,Ss[Ms],_a,Ms,0,_s.t);_a.s=0,_a.clamp(),this.s!=va.s&&c$3.ZERO.subTo(_a,_a)},c$3.prototype.squareTo=function(va){for(var _a=this.abs(),_s=va.t=2*_a.t;--_s>=0;)va[_s]=0;for(_s=0;_s<_a.t-1;++_s){var Ss=_a.am(_s,_a[_s],va,2*_s,0,1);(va[_s+_a.t]+=_a.am(_s+1,2*_a[_s],va,2*_s+1,Ss,_a.t-_s-1))>=_a.DV&&(va[_s+_a.t]-=_a.DV,va[_s+_a.t+1]=1)}va.t>0&&(va[va.t-1]+=_a.am(_s,_a[_s],va,2*_s,0,1)),va.s=0,va.clamp()},c$3.prototype.divRemTo=function(va,_a,_s){var Ss=va.abs();if(!(Ss.t<=0)){var Ms=this.abs();if(Ms.t<Ss.t)return _a?.fromInt(0),void(_s!=null&&this.copyTo(_s));_s==null&&(_s=d$3());var Cs=d$3(),Ts=this.s,Bs=va.s,Ps=this.DB-y$4(Ss[Ss.t-1]);Ps>0?(Ss.lShiftTo(Ps,Cs),Ms.lShiftTo(Ps,_s)):(Ss.copyTo(Cs),Ms.copyTo(_s));var Ls=Cs.t,Rs=Cs[Ls-1];if(Rs!=0){var $s=Rs*(1<<this.F1)+(Ls>1?Cs[Ls-2]>>this.F2:0),Fs=this.FV/$s,Os=(1<<this.F1)/$s,Gs=1<<this.F2,Ns=_s.t,Vs=Ns-Ls,Ds=_a??d$3();for(Cs.dlShiftTo(Vs,Ds),_s.compareTo(Ds)>=0&&(_s[_s.t++]=1,_s.subTo(Ds,_s)),c$3.ONE.dlShiftTo(Ls,Ds),Ds.subTo(Cs,Cs);Cs.t<Ls;)Cs[Cs.t++]=0;for(;--Vs>=0;){var ks=_s[--Ns]==Rs?this.DM:Math.floor(_s[Ns]*Fs+(_s[Ns-1]+Gs)*Os);if((_s[Ns]+=Cs.am(0,ks,_s,Vs,0,Ls))<ks)for(Cs.dlShiftTo(Vs,Ds),_s.subTo(Ds,_s);_s[Ns]<--ks;)_s.subTo(Ds,_s)}_a!=null&&(_s.drShiftTo(Ls,_a),Ts!=Bs&&c$3.ZERO.subTo(_a,_a)),_s.t=Ls,_s.clamp(),Ps>0&&_s.rShiftTo(Ps,_s),Ts<0&&c$3.ZERO.subTo(_s,_s)}}},c$3.prototype.invDigit=function(){if(this.t<1)return 0;var va=this[0];if((1&va)==0)return 0;var _a=3&va;return(_a=(_a=(_a=(_a=_a*(2-(15&va)*_a)&15)*(2-(255&va)*_a)&255)*(2-((65535&va)*_a&65535))&65535)*(2-va*_a%this.DV)%this.DV)>0?this.DV-_a:-_a},c$3.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},c$3.prototype.exp=function(va,_a){if(va>4294967295||va<1)return c$3.ONE;var _s=d$3(),Ss=d$3(),Ms=_a.convert(this),Cs=y$4(va)-1;for(Ms.copyTo(_s);--Cs>=0;)if(_a.sqrTo(_s,Ss),(va&1<<Cs)>0)_a.mulTo(Ss,Ms,_s);else{var Ts=_s;_s=Ss,Ss=Ts}return _a.revert(_s)},c$3.prototype.toString=function(va){if(this.s<0)return"-"+this.negate().toString(va);var _a;if(va==16)_a=4;else if(va==8)_a=3;else if(va==2)_a=1;else if(va==32)_a=5;else{if(va!=4)return this.toRadix(va);_a=2}var _s,Ss=(1<<_a)-1,Ms=!1,Cs="",Ts=this.t,Bs=this.DB-Ts*this.DB%_a;if(Ts-- >0)for(Bs<this.DB&&(_s=this[Ts]>>Bs)>0&&(Ms=!0,Cs=g$4(_s));Ts>=0;)Bs<_a?(_s=(this[Ts]&(1<<Bs)-1)<<_a-Bs,_s|=this[--Ts]>>(Bs+=this.DB-_a)):(_s=this[Ts]>>(Bs-=_a)&Ss,Bs<=0&&(Bs+=this.DB,--Ts)),_s>0&&(Ms=!0),Ms&&(Cs+=g$4(_s));return Ms?Cs:"0"},c$3.prototype.negate=function(){var va=d$3();return c$3.ZERO.subTo(this,va),va},c$3.prototype.abs=function(){return this.s<0?this.negate():this},c$3.prototype.compareTo=function(va){var _a=this.s-va.s;if(_a!=0)return _a;var _s=this.t;if((_a=_s-va.t)!=0)return this.s<0?-_a:_a;for(;--_s>=0;)if((_a=this[_s]-va[_s])!=0)return _a;return 0},c$3.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y$4(this[this.t-1]^this.s&this.DM)},c$3.prototype.mod=function(va){var _a=d$3();return this.abs().divRemTo(va,null,_a),this.s<0&&_a.compareTo(c$3.ZERO)>0&&va.subTo(_a,_a),_a},c$3.prototype.modPowInt=function(va,_a){var _s;return _s=va<256||_a.isEven()?new b$3(_a):new w$4(_a),this.exp(va,_s)},c$3.ZERO=m$4(0),c$3.ONE=m$4(1),M$1.prototype.convert=P$2,M$1.prototype.revert=P$2,M$1.prototype.mulTo=function(va,_a,_s){va.multiplyTo(_a,_s)},M$1.prototype.sqrTo=function(va,_a){va.squareTo(_a)},T.prototype.convert=function(va){if(va.s<0||va.t>2*this.m.t)return va.mod(this.m);if(va.compareTo(this.m)<0)return va;var _a=d$3();return va.copyTo(_a),this.reduce(_a),_a},T.prototype.revert=function(va){return va},T.prototype.reduce=function(va){for(va.drShiftTo(this.m.t-1,this.r2),va.t>this.m.t+1&&(va.t=this.m.t+1,va.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);va.compareTo(this.r2)<0;)va.dAddOffset(1,this.m.t+1);for(va.subTo(this.r2,va);va.compareTo(this.m)>=0;)va.subTo(this.m,va)},T.prototype.mulTo=function(va,_a,_s){va.multiplyTo(_a,_s),this.reduce(_s)},T.prototype.sqrTo=function(va,_a){va.squareTo(_a),this.reduce(_a)};var Q$1=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R$2=(1<<26)/Q$1[Q$1.length-1];c$3.prototype.chunkSize=function(va){return Math.floor(Math.LN2*this.DB/Math.log(va))},c$3.prototype.toRadix=function(va){if(va==null&&(va=10),this.signum()==0||va<2||va>36)return"0";var _a=this.chunkSize(va),_s=Math.pow(va,_a),Ss=m$4(_s),Ms=d$3(),Cs=d$3(),Ts="";for(this.divRemTo(Ss,Ms,Cs);Ms.signum()>0;)Ts=(_s+Cs.intValue()).toString(va).substr(1)+Ts,Ms.divRemTo(Ss,Ms,Cs);return Cs.intValue().toString(va)+Ts},c$3.prototype.fromRadix=function(va,_a){this.fromInt(0),_a==null&&(_a=10);for(var _s=this.chunkSize(_a),Ss=Math.pow(_a,_s),Ms=!1,Cs=0,Ts=0,Bs=0;Bs<va.length;++Bs){var Ps=v$4(va,Bs);Ps<0?va.charAt(Bs)=="-"&&this.signum()==0&&(Ms=!0):(Ts=_a*Ts+Ps,++Cs>=_s&&(this.dMultiply(Ss),this.dAddOffset(Ts,0),Cs=0,Ts=0))}Cs>0&&(this.dMultiply(Math.pow(_a,Cs)),this.dAddOffset(Ts,0)),Ms&&c$3.ZERO.subTo(this,this)},c$3.prototype.fromNumber=function(va,_a,_s){if(typeof _a=="number")if(va<2)this.fromInt(1);else for(this.fromNumber(va,_s),this.testBit(va-1)||this.bitwiseTo(c$3.ONE.shiftLeft(va-1),E$3,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(_a);)this.dAddOffset(2,0),this.bitLength()>va&&this.subTo(c$3.ONE.shiftLeft(va-1),this);else{var Ss=new Array,Ms=7&va;Ss.length=1+(va>>3),_a.nextBytes(Ss),Ms>0?Ss[0]&=(1<<Ms)-1:Ss[0]=0,this.fromString(Ss,256)}},c$3.prototype.bitwiseTo=function(va,_a,_s){var Ss,Ms,Cs=Math.min(va.t,this.t);for(Ss=0;Ss<Cs;++Ss)_s[Ss]=_a(this[Ss],va[Ss]);if(va.t<this.t){for(Ms=va.s&this.DM,Ss=Cs;Ss<this.t;++Ss)_s[Ss]=_a(this[Ss],Ms);_s.t=this.t}else{for(Ms=this.s&this.DM,Ss=Cs;Ss<va.t;++Ss)_s[Ss]=_a(Ms,va[Ss]);_s.t=va.t}_s.s=_a(this.s,va.s),_s.clamp()},c$3.prototype.changeBit=function(va,_a){var _s=c$3.ONE.shiftLeft(va);return this.bitwiseTo(_s,_a,_s),_s},c$3.prototype.addTo=function(va,_a){for(var _s=0,Ss=0,Ms=Math.min(va.t,this.t);_s<Ms;)Ss+=this[_s]+va[_s],_a[_s++]=Ss&this.DM,Ss>>=this.DB;if(va.t<this.t){for(Ss+=va.s;_s<this.t;)Ss+=this[_s],_a[_s++]=Ss&this.DM,Ss>>=this.DB;Ss+=this.s}else{for(Ss+=this.s;_s<va.t;)Ss+=va[_s],_a[_s++]=Ss&this.DM,Ss>>=this.DB;Ss+=va.s}_a.s=Ss<0?-1:0,Ss>0?_a[_s++]=Ss:Ss<-1&&(_a[_s++]=this.DV+Ss),_a.t=_s,_a.clamp()},c$3.prototype.dMultiply=function(va){this[this.t]=this.am(0,va-1,this,0,0,this.t),++this.t,this.clamp()},c$3.prototype.dAddOffset=function(va,_a){if(va!=0){for(;this.t<=_a;)this[this.t++]=0;for(this[_a]+=va;this[_a]>=this.DV;)this[_a]-=this.DV,++_a>=this.t&&(this[this.t++]=0),++this[_a]}},c$3.prototype.multiplyLowerTo=function(va,_a,_s){var Ss,Ms=Math.min(this.t+va.t,_a);for(_s.s=0,_s.t=Ms;Ms>0;)_s[--Ms]=0;for(Ss=_s.t-this.t;Ms<Ss;++Ms)_s[Ms+this.t]=this.am(0,va[Ms],_s,Ms,0,this.t);for(Ss=Math.min(va.t,_a);Ms<Ss;++Ms)this.am(0,va[Ms],_s,Ms,0,_a-Ms);_s.clamp()},c$3.prototype.multiplyUpperTo=function(va,_a,_s){--_a;var Ss=_s.t=this.t+va.t-_a;for(_s.s=0;--Ss>=0;)_s[Ss]=0;for(Ss=Math.max(_a-this.t,0);Ss<va.t;++Ss)_s[this.t+Ss-_a]=this.am(_a-Ss,va[Ss],_s,0,0,this.t+Ss-_a);_s.clamp(),_s.drShiftTo(1,_s)},c$3.prototype.modInt=function(va){if(va<=0)return 0;var _a=this.DV%va,_s=this.s<0?va-1:0;if(this.t>0)if(_a==0)_s=this[0]%va;else for(var Ss=this.t-1;Ss>=0;--Ss)_s=(_a*_s+this[Ss])%va;return _s},c$3.prototype.millerRabin=function(va){var _a=this.subtract(c$3.ONE),_s=_a.getLowestSetBit();if(_s<=0)return!1;var Ss=_a.shiftRight(_s);(va=va+1>>1)>Q$1.length&&(va=Q$1.length);for(var Ms=d$3(),Cs=0;Cs<va;++Cs){Ms.fromInt(Q$1[Math.floor(Math.random()*Q$1.length)]);var Ts=Ms.modPow(Ss,this);if(Ts.compareTo(c$3.ONE)!=0&&Ts.compareTo(_a)!=0){for(var Bs=1;Bs++<_s&&Ts.compareTo(_a)!=0;)if((Ts=Ts.modPowInt(2,this)).compareTo(c$3.ONE)==0)return!1;if(Ts.compareTo(_a)!=0)return!1}}return!0},c$3.prototype.clone=function(){var va=d$3();return this.copyTo(va),va},c$3.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},c$3.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},c$3.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},c$3.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},c$3.prototype.toByteArray=function(){var va=this.t,_a=new Array;_a[0]=this.s;var _s,Ss=this.DB-va*this.DB%8,Ms=0;if(va-- >0)for(Ss<this.DB&&(_s=this[va]>>Ss)!=(this.s&this.DM)>>Ss&&(_a[Ms++]=_s|this.s<<this.DB-Ss);va>=0;)Ss<8?(_s=(this[va]&(1<<Ss)-1)<<8-Ss,_s|=this[--va]>>(Ss+=this.DB-8)):(_s=this[va]>>(Ss-=8)&255,Ss<=0&&(Ss+=this.DB,--va)),(128&_s)!=0&&(_s|=-256),Ms==0&&(128&this.s)!=(128&_s)&&++Ms,(Ms>0||_s!=this.s)&&(_a[Ms++]=_s);return _a},c$3.prototype.equals=function(va){return this.compareTo(va)==0},c$3.prototype.min=function(va){return this.compareTo(va)<0?this:va},c$3.prototype.max=function(va){return this.compareTo(va)>0?this:va},c$3.prototype.and=function(va){var _a=d$3();return this.bitwiseTo(va,x$3,_a),_a},c$3.prototype.or=function(va){var _a=d$3();return this.bitwiseTo(va,E$3,_a),_a},c$3.prototype.xor=function(va){var _a=d$3();return this.bitwiseTo(va,I$2,_a),_a},c$3.prototype.andNot=function(va){var _a=d$3();return this.bitwiseTo(va,C$3,_a),_a},c$3.prototype.not=function(){for(var va=d$3(),_a=0;_a<this.t;++_a)va[_a]=this.DM&~this[_a];return va.t=this.t,va.s=~this.s,va},c$3.prototype.shiftLeft=function(va){var _a=d$3();return va<0?this.rShiftTo(-va,_a):this.lShiftTo(va,_a),_a},c$3.prototype.shiftRight=function(va){var _a=d$3();return va<0?this.lShiftTo(-va,_a):this.rShiftTo(va,_a),_a},c$3.prototype.getLowestSetBit=function(){for(var va=0;va<this.t;++va)if(this[va]!=0)return va*this.DB+S$1(this[va]);return this.s<0?this.t*this.DB:-1},c$3.prototype.bitCount=function(){for(var va=0,_a=this.s&this.DM,_s=0;_s<this.t;++_s)va+=B$2(this[_s]^_a);return va},c$3.prototype.testBit=function(va){var _a=Math.floor(va/this.DB);return _a>=this.t?this.s!=0:(this[_a]&1<<va%this.DB)!=0},c$3.prototype.setBit=function(va){return this.changeBit(va,E$3)},c$3.prototype.clearBit=function(va){return this.changeBit(va,C$3)},c$3.prototype.flipBit=function(va){return this.changeBit(va,I$2)},c$3.prototype.add=function(va){var _a=d$3();return this.addTo(va,_a),_a},c$3.prototype.subtract=function(va){var _a=d$3();return this.subTo(va,_a),_a},c$3.prototype.multiply=function(va){var _a=d$3();return this.multiplyTo(va,_a),_a},c$3.prototype.divide=function(va){var _a=d$3();return this.divRemTo(va,_a,null),_a},c$3.prototype.remainder=function(va){var _a=d$3();return this.divRemTo(va,null,_a),_a},c$3.prototype.divideAndRemainder=function(va){var _a=d$3(),_s=d$3();return this.divRemTo(va,_a,_s),new Array(_a,_s)},c$3.prototype.modPow=function(va,_a){var _s,Ss,Ms=va.bitLength(),Cs=m$4(1);if(Ms<=0)return Cs;_s=Ms<18?1:Ms<48?3:Ms<144?4:Ms<768?5:6,Ss=Ms<8?new b$3(_a):_a.isEven()?new T(_a):new w$4(_a);var Ts=new Array,Bs=3,Ps=_s-1,Ls=(1<<_s)-1;if(Ts[1]=Ss.convert(this),_s>1){var Rs=d$3();for(Ss.sqrTo(Ts[1],Rs);Bs<=Ls;)Ts[Bs]=d$3(),Ss.mulTo(Rs,Ts[Bs-2],Ts[Bs]),Bs+=2}var $s,Fs,Os=va.t-1,Gs=!0,Ns=d$3();for(Ms=y$4(va[Os])-1;Os>=0;){for(Ms>=Ps?$s=va[Os]>>Ms-Ps&Ls:($s=(va[Os]&(1<<Ms+1)-1)<<Ps-Ms,Os>0&&($s|=va[Os-1]>>this.DB+Ms-Ps)),Bs=_s;(1&$s)==0;)$s>>=1,--Bs;if((Ms-=Bs)<0&&(Ms+=this.DB,--Os),Gs)Ts[$s].copyTo(Cs),Gs=!1;else{for(;Bs>1;)Ss.sqrTo(Cs,Ns),Ss.sqrTo(Ns,Cs),Bs-=2;Bs>0?Ss.sqrTo(Cs,Ns):(Fs=Cs,Cs=Ns,Ns=Fs),Ss.mulTo(Ns,Ts[$s],Cs)}for(;Os>=0&&(va[Os]&1<<Ms)==0;)Ss.sqrTo(Cs,Ns),Fs=Cs,Cs=Ns,Ns=Fs,--Ms<0&&(Ms=this.DB-1,--Os)}return Ss.revert(Cs)},c$3.prototype.modInverse=function(va){var _a=va.isEven();if(this.isEven()&&_a||va.signum()==0)return c$3.ZERO;for(var _s=va.clone(),Ss=this.clone(),Ms=m$4(1),Cs=m$4(0),Ts=m$4(0),Bs=m$4(1);_s.signum()!=0;){for(;_s.isEven();)_s.rShiftTo(1,_s),_a?(Ms.isEven()&&Cs.isEven()||(Ms.addTo(this,Ms),Cs.subTo(va,Cs)),Ms.rShiftTo(1,Ms)):Cs.isEven()||Cs.subTo(va,Cs),Cs.rShiftTo(1,Cs);for(;Ss.isEven();)Ss.rShiftTo(1,Ss),_a?(Ts.isEven()&&Bs.isEven()||(Ts.addTo(this,Ts),Bs.subTo(va,Bs)),Ts.rShiftTo(1,Ts)):Bs.isEven()||Bs.subTo(va,Bs),Bs.rShiftTo(1,Bs);_s.compareTo(Ss)>=0?(_s.subTo(Ss,_s),_a&&Ms.subTo(Ts,Ms),Cs.subTo(Bs,Cs)):(Ss.subTo(_s,Ss),_a&&Ts.subTo(Ms,Ts),Bs.subTo(Cs,Bs))}return Ss.compareTo(c$3.ONE)!=0?c$3.ZERO:Bs.compareTo(va)>=0?Bs.subtract(va):Bs.signum()<0?(Bs.addTo(va,Bs),Bs.signum()<0?Bs.add(va):Bs):Bs},c$3.prototype.pow=function(va){return this.exp(va,new M$1)},c$3.prototype.gcd=function(va){var _a=this.s<0?this.negate():this.clone(),_s=va.s<0?va.negate():va.clone();if(_a.compareTo(_s)<0){var Ss=_a;_a=_s,_s=Ss}var Ms=_a.getLowestSetBit(),Cs=_s.getLowestSetBit();if(Cs<0)return _a;for(Ms<Cs&&(Cs=Ms),Cs>0&&(_a.rShiftTo(Cs,_a),_s.rShiftTo(Cs,_s));_a.signum()>0;)(Ms=_a.getLowestSetBit())>0&&_a.rShiftTo(Ms,_a),(Ms=_s.getLowestSetBit())>0&&_s.rShiftTo(Ms,_s),_a.compareTo(_s)>=0?(_a.subTo(_s,_a),_a.rShiftTo(1,_a)):(_s.subTo(_a,_s),_s.rShiftTo(1,_s));return Cs>0&&_s.lShiftTo(Cs,_s),_s},c$3.prototype.isProbablePrime=function(va){var _a,_s=this.abs();if(_s.t==1&&_s[0]<=Q$1[Q$1.length-1]){for(_a=0;_a<Q$1.length;++_a)if(_s[0]==Q$1[_a])return!0;return!1}if(_s.isEven())return!1;for(_a=1;_a<Q$1.length;){for(var Ss=Q$1[_a],Ms=_a+1;Ms<Q$1.length&&Ss<R$2;)Ss*=Q$1[Ms++];for(Ss=_s.modInt(Ss);_a<Ms;)if(Ss%Q$1[_a++]==0)return!1}return _s.millerRabin(va)},c$3.prototype.square=function(){var va=d$3();return this.squareTo(va),va};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var D$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function k$3(va){var _a,_s,Ss="";for(_a=0;_a+3<=va.length;_a+=3)_s=parseInt(va.substring(_a,_a+3),16),Ss+=D$2.charAt(_s>>6)+D$2.charAt(63&_s);for(_a+1==va.length?(_s=parseInt(va.substring(_a,_a+1),16),Ss+=D$2.charAt(_s<<2)):_a+2==va.length&&(_s=parseInt(va.substring(_a,_a+2),16),Ss+=D$2.charAt(_s>>2)+D$2.charAt((3&_s)<<4));(3&Ss.length)>0;)Ss+="=";return Ss}function N$2(va){var _a,_s,Ss,Ms="",Cs=0;for(_a=0;_a<va.length&&va.charAt(_a)!="=";++_a)(Ss=D$2.indexOf(va.charAt(_a)))<0||(Cs==0?(Ms+=g$4(Ss>>2),_s=3&Ss,Cs=1):Cs==1?(Ms+=g$4(_s<<2|Ss>>4),_s=15&Ss,Cs=2):Cs==2?(Ms+=g$4(_s),Ms+=g$4(Ss>>2),_s=3&Ss,Cs=3):(Ms+=g$4(_s<<2|Ss>>4),Ms+=g$4(15&Ss),Cs=0));return Cs==1&&(Ms+=g$4(_s<<2)),Ms}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function F$2(){this.i=0,this.j=0,this.S=new Array}F$2.prototype.init=function(va){var _a,_s,Ss;for(_a=0;_a<256;++_a)this.S[_a]=_a;for(_s=0,_a=0;_a<256;++_a)_s=_s+this.S[_a]+va[_a%va.length]&255,Ss=this.S[_a],this.S[_a]=this.S[_s],this.S[_s]=Ss;this.i=0,this.j=0},F$2.prototype.next=function(){var va;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,va=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=va,this.S[va+this.S[this.i]&255]};var O$2,L$2,V$1;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function H$2(){var va;va=new Date().getTime(),L$2[V$1++]^=255&va,L$2[V$1++]^=va>>8&255,L$2[V$1++]^=va>>16&255,L$2[V$1++]^=va>>24&255,V$1>=256&&(V$1-=256)}if(L$2==null){var K$1;if(L$2=new Array,V$1=0,typeof window<"u"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var z$2=window.crypto||window.msCrypto;if(z$2.getRandomValues){var q$3=new Uint8Array(32);for(z$2.getRandomValues(q$3),K$1=0;K$1<32;++K$1)L$2[V$1++]=q$3[K$1]}else if(typeof navigator<"u"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var _$2=window.crypto.random(32);for(K$1=0;K$1<_$2.length;++K$1)L$2[V$1++]=255&_$2.charCodeAt(K$1)}}for(;V$1<256;)K$1=Math.floor(65536*Math.random()),L$2[V$1++]=K$1>>>8,L$2[V$1++]=255&K$1;V$1=0,H$2()}function j$1(){if(O$2==null){for(H$2(),(O$2=new F$2).init(L$2),V$1=0;V$1<L$2.length;++V$1)L$2[V$1]=0;V$1=0}return O$2.next()}function U(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function G$2(va,_a){return new c$3(va,_a)}function W$2(va,_a,_s){for(var Ss="",Ms=0;Ss.length<_a;)Ss+=_s(String.fromCharCode.apply(String,va.concat([(4278190080&Ms)>>24,(16711680&Ms)>>16,(65280&Ms)>>8,255&Ms]))),Ms+=1;return Ss}function X$1(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Y$1(va,_a,_s){for(var Ss="",Ms=0;Ss.length<_a;)Ss+=_s(va+String.fromCharCode.apply(String,[(4278190080&Ms)>>24,(16711680&Ms)>>16,(65280&Ms)>>8,255&Ms])),Ms+=1;return Ss}function Z$1(va){for(var _a="",_s=0;_s<va.length;_s++){var Ss=va[_s].toString(16);Ss.length==1&&(Ss="0"+Ss),_a+=Ss}return _a}function J$1(va){return Z$1(function(_a){for(var _s=new Array,Ss=0;Ss<_a.length;Ss++)_s[Ss]=_a.charCodeAt(Ss);return _s}(va))}function $$1(va){return va.length%4==2?va+="==":va.length%4==3&&(va+="="),va=(va=va.replace(/-/g,"+")).replace(/_/g,"/")}function tt(va){return va.length%2==1&&(va="0"+va),function(_a){return(_a=(_a=_a.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(k$3(va))}function et(va){return N$2($$1(va))}function it(va){return function(_a){return _a.replace(/%/g,"")}(function(_a){for(var _s=encodeURIComponent(_a),Ss="",Ms=0;Ms<_s.length;Ms++)_s[Ms]=="%"?(Ss+=_s.substr(Ms,3),Ms+=2):Ss=Ss+"%"+J$1(_s[Ms]);return Ss}(va))}function nt(va){return decodeURIComponent(function(_a){return _a.replace(/(..)/g,"%$1")}(va))}function rt(va){for(var _a="",_s=0;_s<va.length-1;_s+=2)_a+=String.fromCharCode(parseInt(va.substr(_s,2),16));return _a}function ot(va){for(var _a="",_s=0;_s<va.length;_s++)_a+=("0"+va.charCodeAt(_s).toString(16)).slice(-2);return _a}function st(va){var _a=function(_s){return k$3(_s)}(va).replace(/(.{64})/g,`$1\r
`);return _a=_a.replace(/\r\n$/,"")}function at(va,_a){return"-----BEGIN "+_a+`-----\r
`+st(va)+`\r
-----END `+_a+`-----\r
`}function ut(va,_a){if(va.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+_a;return function(_s){return N$2(_s.replace(/[^0-9A-Za-z\/+=]*/g,""))}(va=_a!==void 0?(va=va.replace(new RegExp("^[^]*-----BEGIN "+_a+"-----"),"")).replace(new RegExp("-----END "+_a+"-----[^]*$"),""):(va=va.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function lt(va){var _a="malformed hex value";if(!va.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw _a;if(va.length!=8)return va.length==32?function(_s){if(!_s.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var Ss=(_s=_s.toLowerCase()).match(/.{1,4}/g),Ms=0;Ms<8;Ms++)Ss[Ms]=Ss[Ms].replace(/^0+/,""),Ss[Ms]==""&&(Ss[Ms]="0");var Cs=(_s=":"+Ss.join(":")+":").match(/:(0:){2,}/g);if(Cs===null)return _s.slice(1,-1);var Ts="";for(Ms=0;Ms<Cs.length;Ms++)Cs[Ms].length>Ts.length&&(Ts=Cs[Ms]);return(_s=_s.replace(Ts,"::")).slice(1,-1)}(va):va;try{return parseInt(va.substr(0,2),16)+"."+parseInt(va.substr(2,2),16)+"."+parseInt(va.substr(4,2),16)+"."+parseInt(va.substr(6,2),16)}catch{throw _a}}function ht(va){return va.match(/.{4}/g).map(function(_a){var _s=parseInt(_a.substr(0,2),16),Ss=parseInt(_a.substr(2),16);if(_s==0&Ss<128)return String.fromCharCode(Ss);if(_s<8){var Ms=128|63&Ss;return nt((192|(7&_s)<<3|(192&Ss)>>6).toString(16)+Ms.toString(16))}Ms=128|(15&_s)<<2|(192&Ss)>>6;var Cs=128|63&Ss;return nt((224|(240&_s)>>4).toString(16)+Ms.toString(16)+Cs.toString(16))}).join("")}function ct(va){return!(va.length%2!=0||!va.match(/^[0-9a-f]+$/)&&!va.match(/^[0-9A-F]+$/))}function dt(va){return va.length%2==1?"0"+va:va.substr(0,1)>"7"?"00"+va:va}U.prototype.nextBytes=function(va){var _a;for(_a=0;_a<va.length;++_a)va[_a]=j$1()},X$1.prototype.doPublic=function(va){return va.modPowInt(this.e,this.n)},X$1.prototype.setPublic=function(va,_a){if(this.isPublic=!0,this.isPrivate=!1,typeof va!="string")this.n=va,this.e=_a;else{if(!(va!=null&&_a!=null&&va.length>0&&_a.length>0))throw"Invalid RSA public key";this.n=G$2(va,16),this.e=parseInt(_a,16)}},X$1.prototype.encrypt=function(va){var _a=function(Ms,Cs){if(Cs<Ms.length+11)throw"Message too long for RSA";for(var Ts=new Array,Bs=Ms.length-1;Bs>=0&&Cs>0;){var Ps=Ms.charCodeAt(Bs--);Ps<128?Ts[--Cs]=Ps:Ps>127&&Ps<2048?(Ts[--Cs]=63&Ps|128,Ts[--Cs]=Ps>>6|192):(Ts[--Cs]=63&Ps|128,Ts[--Cs]=Ps>>6&63|128,Ts[--Cs]=Ps>>12|224)}Ts[--Cs]=0;for(var Ls=new U,Rs=new Array;Cs>2;){for(Rs[0]=0;Rs[0]==0;)Ls.nextBytes(Rs);Ts[--Cs]=Rs[0]}return Ts[--Cs]=2,Ts[--Cs]=0,new c$3(Ts)}(va,this.n.bitLength()+7>>3);if(_a==null)return null;var _s=this.doPublic(_a);if(_s==null)return null;var Ss=_s.toString(16);return(1&Ss.length)==0?Ss:"0"+Ss},X$1.prototype.encryptOAEP=function(va,_a,_s){var Ss=function(Ts,Bs,Ps,Ls){var Rs=u$2.crypto.MessageDigest,$s=u$2.crypto.Util,Fs=null;if(Ps||(Ps="sha1"),typeof Ps=="string"&&(Fs=Rs.getCanonicalAlgName(Ps),Ls=Rs.getHashLength(Fs),Ps=function(Ws){return rt($s.hashHex(ot(Ws),Fs))}),Ts.length+2*Ls+2>Bs)throw"Message too long for RSA";var Os,Gs="";for(Os=0;Os<Bs-Ts.length-2*Ls-2;Os+=1)Gs+="\0";var Ns=Ps("")+Gs+""+Ts,Vs=new Array(Ls);new U().nextBytes(Vs);var Ds=W$2(Vs,Ns.length,Ps),ks=[];for(Os=0;Os<Ns.length;Os+=1)ks[Os]=Ns.charCodeAt(Os)^Ds.charCodeAt(Os);var Us=W$2(ks,Vs.length,Ps),zs=[0];for(Os=0;Os<Vs.length;Os+=1)zs[Os+1]=Vs[Os]^Us.charCodeAt(Os);return new c$3(zs.concat(ks))}(va,this.n.bitLength()+7>>3,_a,_s);if(Ss==null)return null;var Ms=this.doPublic(Ss);if(Ms==null)return null;var Cs=Ms.toString(16);return(1&Cs.length)==0?Cs:"0"+Cs},X$1.prototype.type="RSA",X$1.prototype.doPrivate=function(va){if(this.p==null||this.q==null)return va.modPow(this.d,this.n);for(var _a=va.mod(this.p).modPow(this.dmp1,this.p),_s=va.mod(this.q).modPow(this.dmq1,this.q);_a.compareTo(_s)<0;)_a=_a.add(this.p);return _a.subtract(_s).multiply(this.coeff).mod(this.p).multiply(this.q).add(_s)},X$1.prototype.setPrivate=function(va,_a,_s){if(this.isPrivate=!0,typeof va!="string")this.n=va,this.e=_a,this.d=_s;else{if(!(va!=null&&_a!=null&&va.length>0&&_a.length>0))throw"Invalid RSA private key";this.n=G$2(va,16),this.e=parseInt(_a,16),this.d=G$2(_s,16)}},X$1.prototype.setPrivateEx=function(va,_a,_s,Ss,Ms,Cs,Ts,Bs){if(this.isPrivate=!0,this.isPublic=!1,va==null)throw"RSASetPrivateEx N == null";if(_a==null)throw"RSASetPrivateEx E == null";if(va.length==0)throw"RSASetPrivateEx N.length == 0";if(_a.length==0)throw"RSASetPrivateEx E.length == 0";if(!(va!=null&&_a!=null&&va.length>0&&_a.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=G$2(va,16),this.e=parseInt(_a,16),this.d=G$2(_s,16),this.p=G$2(Ss,16),this.q=G$2(Ms,16),this.dmp1=G$2(Cs,16),this.dmq1=G$2(Ts,16),this.coeff=G$2(Bs,16)},X$1.prototype.generate=function(va,_a){var _s=new U,Ss=va>>1;this.e=parseInt(_a,16);for(var Ms=new c$3(_a,16);;){for(;this.p=new c$3(va-Ss,1,_s),this.p.subtract(c$3.ONE).gcd(Ms).compareTo(c$3.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new c$3(Ss,1,_s),this.q.subtract(c$3.ONE).gcd(Ms).compareTo(c$3.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var Cs=this.p;this.p=this.q,this.q=Cs}var Ts=this.p.subtract(c$3.ONE),Bs=this.q.subtract(c$3.ONE),Ps=Ts.multiply(Bs);if(Ps.gcd(Ms).compareTo(c$3.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==va)){this.d=Ms.modInverse(Ps),this.dmp1=this.d.mod(Ts),this.dmq1=this.d.mod(Bs),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},X$1.prototype.decrypt=function(va){if(va.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var _a=G$2(va,16),_s=this.doPrivate(_a);return _s==null?null:function(Ss,Ms){for(var Cs=Ss.toByteArray(),Ts=0;Ts<Cs.length&&Cs[Ts]==0;)++Ts;if(Cs.length-Ts!=Ms-1||Cs[Ts]!=2)return null;for(++Ts;Cs[Ts]!=0;)if(++Ts>=Cs.length)return null;for(var Bs="";++Ts<Cs.length;){var Ps=255&Cs[Ts];Ps<128?Bs+=String.fromCharCode(Ps):Ps>191&&Ps<224?(Bs+=String.fromCharCode((31&Ps)<<6|63&Cs[Ts+1]),++Ts):(Bs+=String.fromCharCode((15&Ps)<<12|(63&Cs[Ts+1])<<6|63&Cs[Ts+2]),Ts+=2)}return Bs}(_s,this.n.bitLength()+7>>3)},X$1.prototype.decryptOAEP=function(va,_a,_s){if(va.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Ss=G$2(va,16),Ms=this.doPrivate(Ss);return Ms==null?null:function(Cs,Ts,Bs,Ps){var Ls=u$2.crypto.MessageDigest,Rs=u$2.crypto.Util,$s=null;for(Bs||(Bs="sha1"),typeof Bs=="string"&&($s=Ls.getCanonicalAlgName(Bs),Ps=Ls.getHashLength($s),Bs=function(zs){return rt(Rs.hashHex(ot(zs),$s))}),Cs=Cs.toByteArray(),Fs=0;Fs<Cs.length;Fs+=1)Cs[Fs]&=255;for(;Cs.length<Ts;)Cs.unshift(0);if((Cs=String.fromCharCode.apply(String,Cs)).length<2*Ps+2)throw"Cipher too short";var Fs,Os=Cs.substr(1,Ps),Gs=Cs.substr(Ps+1),Ns=Y$1(Gs,Ps,Bs),Vs=[];for(Fs=0;Fs<Os.length;Fs+=1)Vs[Fs]=Os.charCodeAt(Fs)^Ns.charCodeAt(Fs);var Ds=Y$1(String.fromCharCode.apply(String,Vs),Cs.length-Ps,Bs),ks=[];for(Fs=0;Fs<Gs.length;Fs+=1)ks[Fs]=Gs.charCodeAt(Fs)^Ds.charCodeAt(Fs);if((ks=String.fromCharCode.apply(String,ks)).substr(0,Ps)!==Bs(""))throw"Hash mismatch";var Us=(ks=ks.substr(Ps)).indexOf("");if((Us!=-1?ks.substr(0,Us).lastIndexOf("\0"):-1)+1!=Us)throw"Malformed data";return ks.substr(Us+1)}(Ms,this.n.bitLength()+7>>3,_a,_s)},u$2.lang!==void 0&&u$2.lang||(u$2.lang={}),u$2.lang.String=function(){},u$2.lang.String.isInteger=function(va){return!!va.match(/^[0-9]+$/)||!!va.match(/^-[0-9]+$/)},u$2.lang.String.isHex=function(va){return ct(va)},u$2.lang.String.isBase64=function(va){return!(!(va=va.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||va.length%4!=0)},u$2.lang.String.isBase64URL=function(va){return!va.match(/[+/=]/)&&(va=$$1(va),u$2.lang.String.isBase64(va))},u$2.lang.String.isIntegerArray=function(va){return!!(va=va.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},u$2.lang.String.isPrintable=function(va){return va.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},u$2.lang.String.isIA5=function(va){return va.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},u$2.lang.String.isMail=function(va){return va.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pt=function(va,_a,_s){return _s==null&&(_s="0"),va.length>=_a?va:new Array(_a-va.length+1).join(_s)+va};function At(va,_a){var _s=function(){};_s.prototype=_a.prototype,va.prototype=new _s,va.prototype.constructor=va,va.superclass=_a.prototype,_a.prototype.constructor==Object.prototype.constructor&&(_a.prototype.constructor=_a)}u$2.crypto!==void 0&&u$2.crypto||(u$2.crypto={}),u$2.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:h$4.algo.MD5,sha1:h$4.algo.SHA1,sha224:h$4.algo.SHA224,sha256:h$4.algo.SHA256,sha384:h$4.algo.SHA384,sha512:h$4.algo.SHA512,ripemd160:h$4.algo.RIPEMD160},this.getDigestInfoHex=function(va,_a){if(this.DIGESTINFOHEAD[_a]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+_a;return this.DIGESTINFOHEAD[_a]+va},this.getPaddedDigestInfoHex=function(va,_a,_s){var Ss=this.getDigestInfoHex(va,_a),Ms=_s/4;if(Ss.length+22>Ms)throw"key is too short for SigAlg: keylen="+_s+","+_a;for(var Cs="0001",Ts="00"+Ss,Bs="",Ps=Ms-Cs.length-Ts.length,Ls=0;Ls<Ps;Ls+=2)Bs+="ff";return Cs+Bs+Ts},this.hashString=function(va,_a){return new u$2.crypto.MessageDigest({alg:_a}).digestString(va)},this.hashHex=function(va,_a){return new u$2.crypto.MessageDigest({alg:_a}).digestHex(va)},this.sha1=function(va){return this.hashString(va,"sha1")},this.sha256=function(va){return this.hashString(va,"sha256")},this.sha256Hex=function(va){return this.hashHex(va,"sha256")},this.sha512=function(va){return this.hashString(va,"sha512")},this.sha512Hex=function(va){return this.hashHex(va,"sha512")},this.isKey=function(va){return va instanceof X$1||va instanceof u$2.crypto.DSA||va instanceof u$2.crypto.ECDSA}},u$2.crypto.Util.md5=function(va){return new u$2.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(va)},u$2.crypto.Util.ripemd160=function(va){return new u$2.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(va)},u$2.crypto.Util.SECURERANDOMGEN=new U,u$2.crypto.Util.getRandomHexOfNbytes=function(va){var _a=new Array(va);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(_a),Z$1(_a)},u$2.crypto.Util.getRandomBigIntegerOfNbytes=function(va){return new c$3(u$2.crypto.Util.getRandomHexOfNbytes(va),16)},u$2.crypto.Util.getRandomHexOfNbits=function(va){var _a=va%8,_s=new Array((va-_a)/8+1);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(_s),_s[0]=(255<<_a&255^255)&_s[0],Z$1(_s)},u$2.crypto.Util.getRandomBigIntegerOfNbits=function(va){return new c$3(u$2.crypto.Util.getRandomHexOfNbits(va),16)},u$2.crypto.Util.getRandomBigIntegerZeroToMax=function(va){for(var _a=va.bitLength();;){var _s=u$2.crypto.Util.getRandomBigIntegerOfNbits(_a);if(va.compareTo(_s)!=-1)return _s}},u$2.crypto.Util.getRandomBigIntegerMinToMax=function(va,_a){var _s=va.compareTo(_a);if(_s==1)throw"biMin is greater than biMax";if(_s==0)return va;var Ss=_a.subtract(va);return u$2.crypto.Util.getRandomBigIntegerZeroToMax(Ss).add(va)},u$2.crypto.MessageDigest=function(va){this.setAlgAndProvider=function(_a,_s){if((_a=u$2.crypto.MessageDigest.getCanonicalAlgName(_a))!==null&&_s===void 0&&(_s=u$2.crypto.Util.DEFAULTPROVIDER[_a]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(_a)!=-1&&_s=="cryptojs"){try{this.md=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[_a].create()}catch(Ss){throw"setAlgAndProvider hash alg set fail alg="+_a+"/"+Ss}this.updateString=function(Ss){this.md.update(Ss)},this.updateHex=function(Ss){var Ms=h$4.enc.Hex.parse(Ss);this.md.update(Ms)},this.digest=function(){return this.md.finalize().toString(h$4.enc.Hex)},this.digestString=function(Ss){return this.updateString(Ss),this.digest()},this.digestHex=function(Ss){return this.updateHex(Ss),this.digest()}}if(":sha256:".indexOf(_a)!=-1&&_s=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(Ss){throw"setAlgAndProvider hash alg set fail alg="+_a+"/"+Ss}this.updateString=function(Ss){this.md.update(Ss)},this.updateHex=function(Ss){var Ms=sjcl.codec.hex.toBits(Ss);this.md.update(Ms)},this.digest=function(){var Ss=this.md.finalize();return sjcl.codec.hex.fromBits(Ss)},this.digestString=function(Ss){return this.updateString(Ss),this.digest()},this.digestHex=function(Ss){return this.updateHex(Ss),this.digest()}}},this.updateString=function(_a){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(_a){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(_a){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(_a){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},va!==void 0&&va.alg!==void 0&&(this.algName=va.alg,va.prov===void 0&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},u$2.crypto.MessageDigest.getCanonicalAlgName=function(va){return typeof va=="string"&&(va=(va=va.toLowerCase()).replace(/-/,"")),va},u$2.crypto.MessageDigest.getHashLength=function(va){var _a=u$2.crypto.MessageDigest,_s=_a.getCanonicalAlgName(va);if(_a.HASHLENGTH[_s]===void 0)throw"not supported algorithm: "+va;return _a.HASHLENGTH[_s]},u$2.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},u$2.crypto.Mac=function(va){this.setAlgAndProvider=function(_a,_s){if((_a=_a.toLowerCase())==null&&(_a="hmacsha1"),(_a=_a.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+_a;_s===void 0&&(_s=u$2.crypto.Util.DEFAULTPROVIDER[_a]),this.algProv=_a+"/"+_s;var Ss=_a.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(Ss)!=-1&&_s=="cryptojs"){try{var Ms=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[Ss];this.mac=h$4.algo.HMAC.create(Ms,this.pass)}catch(Cs){throw"setAlgAndProvider hash alg set fail hashAlg="+Ss+"/"+Cs}this.updateString=function(Cs){this.mac.update(Cs)},this.updateHex=function(Cs){var Ts=h$4.enc.Hex.parse(Cs);this.mac.update(Ts)},this.doFinal=function(){return this.mac.finalize().toString(h$4.enc.Hex)},this.doFinalString=function(Cs){return this.updateString(Cs),this.doFinal()},this.doFinalHex=function(Cs){return this.updateHex(Cs),this.doFinal()}}},this.updateString=function(_a){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(_a){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(_a){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(_a){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(_a){if(typeof _a=="string"){var _s=_a;return _a.length%2!=1&&_a.match(/^[0-9A-Fa-f]+$/)||(_s=ot(_a)),void(this.pass=h$4.enc.Hex.parse(_s))}if(typeof _a!="object")throw"KJUR.crypto.Mac unsupported password type: "+_a;if(_s=null,_a.hex!==void 0){if(_a.hex.length%2!=0||!_a.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+_a.hex;_s=_a.hex}if(_a.utf8!==void 0&&(_s=it(_a.utf8)),_a.rstr!==void 0&&(_s=ot(_a.rstr)),_a.b64!==void 0&&(_s=N$2(_a.b64)),_a.b64u!==void 0&&(_s=et(_a.b64u)),_s==null)throw"KJUR.crypto.Mac unsupported password type: "+_a;this.pass=h$4.enc.Hex.parse(_s)},va!==void 0&&(va.pass!==void 0&&this.setPassword(va.pass),va.alg!==void 0&&(this.algName=va.alg,va.prov===void 0&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},u$2.crypto.Signature=function(va){var _a=null;if(this._setAlgNames=function(){var _s=this.algName.match(/^(.+)with(.+)$/);_s&&(this.mdAlgName=_s[1].toLowerCase(),this.pubkeyAlgName=_s[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(_s,Ss){for(var Ms="",Cs=Ss/4-_s.length,Ts=0;Ts<Cs;Ts++)Ms+="0";return Ms+_s},this.setAlgAndProvider=function(_s,Ss){if(this._setAlgNames(),Ss!="cryptojs/jsrsa")throw new Error("provider not supported: "+Ss);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new u$2.crypto.MessageDigest({alg:this.mdAlgName})}catch(Ms){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Ms)}this.init=function(Ms,Cs){var Ts=null;try{Ts=Cs===void 0?Et.getKey(Ms):Et.getKey(Ms,Cs)}catch(Bs){throw"init failed:"+Bs}if(Ts.isPrivate===!0)this.prvKey=Ts,this.state="SIGN";else{if(Ts.isPublic!==!0)throw"init failed.:"+Ts;this.pubKey=Ts,this.state="VERIFY"}},this.updateString=function(Ms){this.md.updateString(Ms)},this.updateHex=function(Ms){this.md.updateHex(Ms)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&u$2.crypto.ECDSA!==void 0&&(this.prvKey=new u$2.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof X$1&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof X$1&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof u$2.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof u$2.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Ms){return this.updateString(Ms),this.sign()},this.signHex=function(Ms){return this.updateHex(Ms),this.sign()},this.verify=function(Ms){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&u$2.crypto.ECDSA!==void 0&&(this.pubKey=new u$2.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof X$1&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Ms,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof X$1&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Ms);if(u$2.crypto.ECDSA!==void 0&&this.pubKey instanceof u$2.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Ms);if(u$2.crypto.DSA!==void 0&&this.pubKey instanceof u$2.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Ms);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(_s,Ss){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(_s){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(_s){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(_s){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(_s){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(_s){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=va,va!==void 0&&(va.alg!==void 0&&(this.algName=va.alg,va.prov===void 0?this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=va.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),va.psssaltlen!==void 0&&(this.pssSaltLen=va.psssaltlen),va.prvkeypem!==void 0)){if(va.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{_a=Et.getKey(va.prvkeypem),this.init(_a)}catch(_s){throw"fatal error to load pem private key: "+_s}}},u$2.crypto.Cipher=function(va){},u$2.crypto.Cipher.encrypt=function(va,_a,_s){if(_a instanceof X$1&&_a.isPublic){var Ss=u$2.crypto.Cipher.getAlgByKeyAndName(_a,_s);if(Ss==="RSA")return _a.encrypt(va);if(Ss==="RSAOAEP")return _a.encryptOAEP(va,"sha1");var Ms=Ss.match(/^RSAOAEP(\d+)$/);if(Ms!==null)return _a.encryptOAEP(va,"sha"+Ms[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+_s}throw"Cipher.encrypt: unsupported key or algorithm"},u$2.crypto.Cipher.decrypt=function(va,_a,_s){if(_a instanceof X$1&&_a.isPrivate){var Ss=u$2.crypto.Cipher.getAlgByKeyAndName(_a,_s);if(Ss==="RSA")return _a.decrypt(va);if(Ss==="RSAOAEP")return _a.decryptOAEP(va,"sha1");var Ms=Ss.match(/^RSAOAEP(\d+)$/);if(Ms!==null)return _a.decryptOAEP(va,"sha"+Ms[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+_s}throw"Cipher.decrypt: unsupported key or algorithm"},u$2.crypto.Cipher.getAlgByKeyAndName=function(va,_a){if(va instanceof X$1){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(_a)!=-1)return _a;if(_a==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+_a}throw"getAlgByKeyAndName: not supported algorithm name: "+_a},u$2.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var ft,gt,vt,mt,yt,bt,wt,xt,Et=(ft=function(va,_a,_s){return gt(h$4.AES,va,_a,_s)},gt=function(va,_a,_s,Ss){var Ms=h$4.enc.Hex.parse(_a),Cs=h$4.enc.Hex.parse(_s),Ts=h$4.enc.Hex.parse(Ss),Bs={};Bs.key=Cs,Bs.iv=Ts,Bs.ciphertext=Ms;var Ps=va.decrypt(Bs,Cs,{iv:Ts});return h$4.enc.Hex.stringify(Ps)},vt=function(va,_a,_s){return mt(h$4.AES,va,_a,_s)},mt=function(va,_a,_s,Ss){var Ms=h$4.enc.Hex.parse(_a),Cs=h$4.enc.Hex.parse(_s),Ts=h$4.enc.Hex.parse(Ss),Bs=va.encrypt(Ms,Cs,{iv:Ts}),Ps=h$4.enc.Hex.parse(Bs.toString());return h$4.enc.Base64.stringify(Ps)},yt={"AES-256-CBC":{proc:ft,eproc:vt,keylen:32,ivlen:16},"AES-192-CBC":{proc:ft,eproc:vt,keylen:24,ivlen:16},"AES-128-CBC":{proc:ft,eproc:vt,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(va,_a,_s){return gt(h$4.TripleDES,va,_a,_s)},eproc:function(va,_a,_s){return mt(h$4.TripleDES,va,_a,_s)},keylen:24,ivlen:8},"DES-CBC":{proc:function(va,_a,_s){return gt(h$4.DES,va,_a,_s)},eproc:function(va,_a,_s){return mt(h$4.DES,va,_a,_s)},keylen:8,ivlen:8}},bt=function(va){var _a={},_s=va.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));_s&&(_a.cipher=_s[1],_a.ivsalt=_s[2]);var Ss=va.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Ss&&(_a.type=Ss[1]);var Ms=-1,Cs=0;va.indexOf(`\r
\r
`)!=-1&&(Ms=va.indexOf(`\r
\r
`),Cs=2),va.indexOf(`

`)!=-1&&(Ms=va.indexOf(`

`),Cs=1);var Ts=va.indexOf("-----END");if(Ms!=-1&&Ts!=-1){var Bs=va.substring(Ms+2*Cs,Ts-Cs);Bs=Bs.replace(/\s+/g,""),_a.data=Bs}return _a},wt=function(va,_a,_s){for(var Ss=_s.substring(0,16),Ms=h$4.enc.Hex.parse(Ss),Cs=h$4.enc.Utf8.parse(_a),Ts=yt[va].keylen+yt[va].ivlen,Bs="",Ps=null;;){var Ls=h$4.algo.MD5.create();if(Ps!=null&&Ls.update(Ps),Ls.update(Cs),Ls.update(Ms),Ps=Ls.finalize(),(Bs+=h$4.enc.Hex.stringify(Ps)).length>=2*Ts)break}var Rs={};return Rs.keyhex=Bs.substr(0,2*yt[va].keylen),Rs.ivhex=Bs.substr(2*yt[va].keylen,2*yt[va].ivlen),Rs},xt=function(va,_a,_s,Ss){var Ms=h$4.enc.Base64.parse(va),Cs=h$4.enc.Hex.stringify(Ms);return(0,yt[_a].proc)(Cs,_s,Ss)},{version:"1.0.0",parsePKCS5PEM:function(va){return bt(va)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(va,_a,_s){return wt(va,_a,_s)},decryptKeyB64:function(va,_a,_s,Ss){return xt(va,_a,_s,Ss)},getDecryptedKeyHex:function(va,_a){var _s=bt(va),Ss=_s.cipher,Ms=_s.ivsalt,Cs=_s.data,Ts=wt(Ss,_a,Ms).keyhex;return xt(Cs,Ss,Ts,Ms)},getEncryptedPKCS5PEMFromPrvKeyHex:function(va,_a,_s,Ss,Ms){var Cs="";if(Ss!==void 0&&Ss!=null||(Ss="AES-256-CBC"),yt[Ss]===void 0)throw"KEYUTIL unsupported algorithm: "+Ss;Ms!==void 0&&Ms!=null||(Ms=function(Bs){var Ps=h$4.lib.WordArray.random(Bs);return h$4.enc.Hex.stringify(Ps)}(yt[Ss].ivlen).toUpperCase());var Ts=function(Bs,Ps,Ls,Rs){return(0,yt[Ps].eproc)(Bs,Ls,Rs)}(_a,Ss,wt(Ss,_s,Ms).keyhex,Ms);return Cs="-----BEGIN "+va+` PRIVATE KEY-----\r
`,Cs+=`Proc-Type: 4,ENCRYPTED\r
`,Cs+="DEK-Info: "+Ss+","+Ms+`\r
`,Cs+=`\r
`,Cs+=Ts.replace(/(.{64})/g,`$1\r
`),Cs+=`\r
-----END `+va+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(va){var _a=It,_s=_a.getChildIdx,Ss=_a.getV,Ms={},Cs=_s(va,0);if(Cs.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+Cs.length;Ms.ciphertext=Ss(va,Cs[1]);var Ts=_s(va,Cs[0]);if(Ts.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+Ts.length;if(Ss(va,Ts[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var Bs=_s(va,Ts[1]);if(Ts.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+Bs.length;var Ps=_s(va,Bs[1]);if(Ps.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+Ps.length;if(Ss(va,Ps[0])!="2a864886f70d0307")throw"this only supports TripleDES";Ms.encryptionSchemeAlg="TripleDES",Ms.encryptionSchemeIV=Ss(va,Ps[1]);var Ls=_s(va,Bs[0]);if(Ls.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Ls.length;if(Ss(va,Ls[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var Rs=_s(va,Ls[1]);if(Rs.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Rs.length;Ms.pbkdf2Salt=Ss(va,Rs[0]);var $s=Ss(va,Rs[1]);try{Ms.pbkdf2Iter=parseInt($s,16)}catch{throw"malformed format pbkdf2Iter: "+$s}return Ms},getPBKDF2KeyHexFromParam:function(va,_a){var _s=h$4.enc.Hex.parse(va.pbkdf2Salt),Ss=va.pbkdf2Iter,Ms=h$4.PBKDF2(_a,_s,{keySize:6,iterations:Ss});return h$4.enc.Hex.stringify(Ms)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(va,_a){var _s=ut(va,"ENCRYPTED PRIVATE KEY"),Ss=this.parseHexOfEncryptedPKCS8(_s),Ms=Et.getPBKDF2KeyHexFromParam(Ss,_a),Cs={};Cs.ciphertext=h$4.enc.Hex.parse(Ss.ciphertext);var Ts=h$4.enc.Hex.parse(Ms),Bs=h$4.enc.Hex.parse(Ss.encryptionSchemeIV),Ps=h$4.TripleDES.decrypt(Cs,Ts,{iv:Bs});return h$4.enc.Hex.stringify(Ps)},getKeyFromEncryptedPKCS8PEM:function(va,_a){var _s=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(va,_a);return this.getKeyFromPlainPrivatePKCS8Hex(_s)},parsePlainPrivatePKCS8Hex:function(va){var _a=It,_s=_a.getChildIdx,Ss=_a.getV,Ms={algparam:null};if(va.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Cs=_s(va,0);if(Cs.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(va.substr(Cs[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Ts=_s(va,Cs[1]);if(Ts.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(va.substr(Ts[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Ms.algoid=Ss(va,Ts[0]),va.substr(Ts[1],2)=="06"&&(Ms.algparam=Ss(va,Ts[1])),va.substr(Cs[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Ms.keyidx=_a.getVidx(va,Cs[2]),Ms},getKeyFromPlainPrivatePKCS8PEM:function(va){var _a=ut(va,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(_a)},getKeyFromPlainPrivatePKCS8Hex:function(va){var _a,_s=this.parsePlainPrivatePKCS8Hex(va);if(_s.algoid=="2a864886f70d010101")_a=new X$1;else if(_s.algoid=="2a8648ce380401")_a=new u$2.crypto.DSA;else{if(_s.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";_a=new u$2.crypto.ECDSA}return _a.readPKCS8PrvKeyHex(va),_a},_getKeyFromPublicPKCS8Hex:function(va){var _a,_s=It.getVbyList(va,0,[0,0],"06");if(_s==="2a864886f70d010101")_a=new X$1;else if(_s==="2a8648ce380401")_a=new u$2.crypto.DSA;else{if(_s!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";_a=new u$2.crypto.ECDSA}return _a.readPKCS8PubKeyHex(va),_a},parsePublicRawRSAKeyHex:function(va){var _a=It,_s=_a.getChildIdx,Ss=_a.getV,Ms={};if(va.substr(0,2)!="30")throw"malformed RSA key(code:001)";var Cs=_s(va,0);if(Cs.length!=2)throw"malformed RSA key(code:002)";if(va.substr(Cs[0],2)!="02")throw"malformed RSA key(code:003)";if(Ms.n=Ss(va,Cs[0]),va.substr(Cs[1],2)!="02")throw"malformed RSA key(code:004)";return Ms.e=Ss(va,Cs[1]),Ms},parsePublicPKCS8Hex:function(va){var _a=It,_s=_a.getChildIdx,Ss=_a.getV,Ms={algparam:null},Cs=_s(va,0);if(Cs.length!=2)throw"outer DERSequence shall have 2 elements: "+Cs.length;var Ts=Cs[0];if(va.substr(Ts,2)!="30")throw"malformed PKCS8 public key(code:001)";var Bs=_s(va,Ts);if(Bs.length!=2)throw"malformed PKCS8 public key(code:002)";if(va.substr(Bs[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(Ms.algoid=Ss(va,Bs[0]),va.substr(Bs[1],2)=="06"?Ms.algparam=Ss(va,Bs[1]):va.substr(Bs[1],2)=="30"&&(Ms.algparam={},Ms.algparam.p=_a.getVbyList(va,Bs[1],[0],"02"),Ms.algparam.q=_a.getVbyList(va,Bs[1],[1],"02"),Ms.algparam.g=_a.getVbyList(va,Bs[1],[2],"02")),va.substr(Cs[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return Ms.key=Ss(va,Cs[1]).substr(2),Ms}});Et.getKey=function(va,_a,_s){var Ss=(Vs=It).getChildIdx;Vs.getV;var Ms=Vs.getVbyList,Cs=u$2.crypto,Ts=Cs.ECDSA,Bs=Cs.DSA,Ps=X$1,Ls=ut,Rs=Et;if(Ps!==void 0&&va instanceof Ps||Ts!==void 0&&va instanceof Ts||Bs!==void 0&&va instanceof Bs)return va;if(va.curve!==void 0&&va.xy!==void 0&&va.d===void 0)return new Ts({pub:va.xy,curve:va.curve});if(va.curve!==void 0&&va.d!==void 0)return new Ts({prv:va.d,curve:va.curve});if(va.kty===void 0&&va.n!==void 0&&va.e!==void 0&&va.d===void 0)return(Qs=new Ps).setPublic(va.n,va.e),Qs;if(va.kty===void 0&&va.n!==void 0&&va.e!==void 0&&va.d!==void 0&&va.p!==void 0&&va.q!==void 0&&va.dp!==void 0&&va.dq!==void 0&&va.co!==void 0&&va.qi===void 0)return(Qs=new Ps).setPrivateEx(va.n,va.e,va.d,va.p,va.q,va.dp,va.dq,va.co),Qs;if(va.kty===void 0&&va.n!==void 0&&va.e!==void 0&&va.d!==void 0&&va.p===void 0)return(Qs=new Ps).setPrivate(va.n,va.e,va.d),Qs;if(va.p!==void 0&&va.q!==void 0&&va.g!==void 0&&va.y!==void 0&&va.x===void 0)return(Qs=new Bs).setPublic(va.p,va.q,va.g,va.y),Qs;if(va.p!==void 0&&va.q!==void 0&&va.g!==void 0&&va.y!==void 0&&va.x!==void 0)return(Qs=new Bs).setPrivate(va.p,va.q,va.g,va.y,va.x),Qs;if(va.kty==="RSA"&&va.n!==void 0&&va.e!==void 0&&va.d===void 0)return(Qs=new Ps).setPublic(et(va.n),et(va.e)),Qs;if(va.kty==="RSA"&&va.n!==void 0&&va.e!==void 0&&va.d!==void 0&&va.p!==void 0&&va.q!==void 0&&va.dp!==void 0&&va.dq!==void 0&&va.qi!==void 0)return(Qs=new Ps).setPrivateEx(et(va.n),et(va.e),et(va.d),et(va.p),et(va.q),et(va.dp),et(va.dq),et(va.qi)),Qs;if(va.kty==="RSA"&&va.n!==void 0&&va.e!==void 0&&va.d!==void 0)return(Qs=new Ps).setPrivate(et(va.n),et(va.e),et(va.d)),Qs;if(va.kty==="EC"&&va.crv!==void 0&&va.x!==void 0&&va.y!==void 0&&va.d===void 0){var $s=(Hs=new Ts({curve:va.crv})).ecparams.keylen/4,Fs="04"+("0000000000"+et(va.x)).slice(-$s)+("0000000000"+et(va.y)).slice(-$s);return Hs.setPublicKeyHex(Fs),Hs}if(va.kty==="EC"&&va.crv!==void 0&&va.x!==void 0&&va.y!==void 0&&va.d!==void 0){$s=(Hs=new Ts({curve:va.crv})).ecparams.keylen/4,Fs="04"+("0000000000"+et(va.x)).slice(-$s)+("0000000000"+et(va.y)).slice(-$s);var Os=("0000000000"+et(va.d)).slice(-$s);return Hs.setPublicKeyHex(Fs),Hs.setPrivateKeyHex(Os),Hs}if(_s==="pkcs5prv"){var Gs,Ns=va,Vs=It;if((Gs=Ss(Ns,0)).length===9)(Qs=new Ps).readPKCS5PrvKeyHex(Ns);else if(Gs.length===6)(Qs=new Bs).readPKCS5PrvKeyHex(Ns);else{if(!(Gs.length>2&&Ns.substr(Gs[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(Qs=new Ts).readPKCS5PrvKeyHex(Ns)}return Qs}if(_s==="pkcs8prv")return Qs=Rs.getKeyFromPlainPrivatePKCS8Hex(va);if(_s==="pkcs8pub")return Rs._getKeyFromPublicPKCS8Hex(va);if(_s==="x509pub")return Mt.getPublicKeyFromCertHex(va);if(va.indexOf("-END CERTIFICATE-",0)!=-1||va.indexOf("-END X509 CERTIFICATE-",0)!=-1||va.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Mt.getPublicKeyFromCertPEM(va);if(va.indexOf("-END PUBLIC KEY-")!=-1){var Ds=ut(va,"PUBLIC KEY");return Rs._getKeyFromPublicPKCS8Hex(Ds)}if(va.indexOf("-END RSA PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")==-1){var ks=Ls(va,"RSA PRIVATE KEY");return Rs.getKey(ks,null,"pkcs5prv")}if(va.indexOf("-END DSA PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")==-1){var Us=Ms(Xs=Ls(va,"DSA PRIVATE KEY"),0,[1],"02"),zs=Ms(Xs,0,[2],"02"),Ws=Ms(Xs,0,[3],"02"),qs=Ms(Xs,0,[4],"02"),Zs=Ms(Xs,0,[5],"02");return(Qs=new Bs).setPrivate(new c$3(Us,16),new c$3(zs,16),new c$3(Ws,16),new c$3(qs,16),new c$3(Zs,16)),Qs}if(va.indexOf("-END EC PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")==-1)return ks=Ls(va,"EC PRIVATE KEY"),Rs.getKey(ks,null,"pkcs5prv");if(va.indexOf("-END PRIVATE KEY-")!=-1)return Rs.getKeyFromPlainPrivatePKCS8PEM(va);if(va.indexOf("-END RSA PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")!=-1){var el=Rs.getDecryptedKeyHex(va,_a),Js=new X$1;return Js.readPKCS5PrvKeyHex(el),Js}if(va.indexOf("-END EC PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")!=-1){var Hs,Qs=Ms(Xs=Rs.getDecryptedKeyHex(va,_a),0,[1],"04"),js=Ms(Xs,0,[2,0],"06"),Ks=Ms(Xs,0,[3,0],"03").substr(2);if(u$2.crypto.OID.oidhex2name[js]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+js;return(Hs=new Ts({curve:u$2.crypto.OID.oidhex2name[js]})).setPublicKeyHex(Ks),Hs.setPrivateKeyHex(Qs),Hs.isPublic=!1,Hs}if(va.indexOf("-END DSA PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")!=-1){var Xs;return Us=Ms(Xs=Rs.getDecryptedKeyHex(va,_a),0,[1],"02"),zs=Ms(Xs,0,[2],"02"),Ws=Ms(Xs,0,[3],"02"),qs=Ms(Xs,0,[4],"02"),Zs=Ms(Xs,0,[5],"02"),(Qs=new Bs).setPrivate(new c$3(Us,16),new c$3(zs,16),new c$3(Ws,16),new c$3(qs,16),new c$3(Zs,16)),Qs}if(va.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Rs.getKeyFromEncryptedPKCS8PEM(va,_a);throw new Error("not supported argument")},Et.generateKeypair=function(va,_a){if(va=="RSA"){var _s=_a;(Ts=new X$1).generate(_s,"10001"),Ts.isPrivate=!0,Ts.isPublic=!0;var Ss=new X$1,Ms=Ts.n.toString(16),Cs=Ts.e.toString(16);return Ss.setPublic(Ms,Cs),Ss.isPrivate=!1,Ss.isPublic=!0,(Bs={}).prvKeyObj=Ts,Bs.pubKeyObj=Ss,Bs}if(va=="EC"){var Ts,Bs,Ps=_a,Ls=new u$2.crypto.ECDSA({curve:Ps}).generateKeyPairHex();return(Ts=new u$2.crypto.ECDSA({curve:Ps})).setPublicKeyHex(Ls.ecpubhex),Ts.setPrivateKeyHex(Ls.ecprvhex),Ts.isPrivate=!0,Ts.isPublic=!1,(Ss=new u$2.crypto.ECDSA({curve:Ps})).setPublicKeyHex(Ls.ecpubhex),Ss.isPrivate=!1,Ss.isPublic=!0,(Bs={}).prvKeyObj=Ts,Bs.pubKeyObj=Ss,Bs}throw"unknown algorithm: "+va},Et.getPEM=function(va,_a,_s,Ss,Ms,Cs){var Ts=u$2,Bs=Ts.asn1,Ps=Bs.DERObjectIdentifier,Ls=Bs.DERInteger,Rs=Bs.ASN1Util.newObject,$s=Bs.x509.SubjectPublicKeyInfo,Fs=Ts.crypto,Os=Fs.DSA,Gs=Fs.ECDSA,Ns=X$1;function Vs(Hs){return Rs({seq:[{int:0},{int:{bigint:Hs.n}},{int:Hs.e},{int:{bigint:Hs.d}},{int:{bigint:Hs.p}},{int:{bigint:Hs.q}},{int:{bigint:Hs.dmp1}},{int:{bigint:Hs.dmq1}},{int:{bigint:Hs.coeff}}]})}function Ds(Hs){return Rs({seq:[{int:1},{octstr:{hex:Hs.prvKeyHex}},{tag:["a0",!0,{oid:{name:Hs.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Hs.pubKeyHex}}]}]})}function ks(Hs){return Rs({seq:[{int:0},{int:{bigint:Hs.p}},{int:{bigint:Hs.q}},{int:{bigint:Hs.g}},{int:{bigint:Hs.y}},{int:{bigint:Hs.x}}]})}if((Ns!==void 0&&va instanceof Ns||Os!==void 0&&va instanceof Os||Gs!==void 0&&va instanceof Gs)&&va.isPublic==1&&(_a===void 0||_a=="PKCS8PUB"))return at(qs=new $s(va).getEncodedHex(),"PUBLIC KEY");if(_a=="PKCS1PRV"&&Ns!==void 0&&va instanceof Ns&&(_s===void 0||_s==null)&&va.isPrivate==1)return at(qs=Vs(va).getEncodedHex(),"RSA PRIVATE KEY");if(_a=="PKCS1PRV"&&Gs!==void 0&&va instanceof Gs&&(_s===void 0||_s==null)&&va.isPrivate==1){var Us=new Ps({name:va.curveName}).getEncodedHex(),zs=Ds(va).getEncodedHex(),Ws="";return Ws+=at(Us,"EC PARAMETERS"),Ws+=at(zs,"EC PRIVATE KEY")}if(_a=="PKCS1PRV"&&Os!==void 0&&va instanceof Os&&(_s===void 0||_s==null)&&va.isPrivate==1)return at(qs=ks(va).getEncodedHex(),"DSA PRIVATE KEY");if(_a=="PKCS5PRV"&&Ns!==void 0&&va instanceof Ns&&_s!==void 0&&_s!=null&&va.isPrivate==1){var qs=Vs(va).getEncodedHex();return Ss===void 0&&(Ss="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",qs,_s,Ss,Cs)}if(_a=="PKCS5PRV"&&Gs!==void 0&&va instanceof Gs&&_s!==void 0&&_s!=null&&va.isPrivate==1)return qs=Ds(va).getEncodedHex(),Ss===void 0&&(Ss="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",qs,_s,Ss,Cs);if(_a=="PKCS5PRV"&&Os!==void 0&&va instanceof Os&&_s!==void 0&&_s!=null&&va.isPrivate==1)return qs=ks(va).getEncodedHex(),Ss===void 0&&(Ss="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",qs,_s,Ss,Cs);var Zs=function(Hs,Qs){var js=el(Hs,Qs);return new Rs({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:js.pbkdf2Salt}},{int:js.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:js.encryptionSchemeIV}}]}]}]},{octstr:{hex:js.ciphertext}}]}).getEncodedHex()},el=function(Hs,Qs){var js=h$4.lib.WordArray.random(8),Ks=h$4.lib.WordArray.random(8),Xs=h$4.PBKDF2(Qs,js,{keySize:6,iterations:100}),Ys=h$4.enc.Hex.parse(Hs),rl=h$4.TripleDES.encrypt(Ys,Xs,{iv:Ks})+"",tl={};return tl.ciphertext=rl,tl.pbkdf2Salt=h$4.enc.Hex.stringify(js),tl.pbkdf2Iter=100,tl.encryptionSchemeAlg="DES-EDE3-CBC",tl.encryptionSchemeIV=h$4.enc.Hex.stringify(Ks),tl};if(_a=="PKCS8PRV"&&Ns!=null&&va instanceof Ns&&va.isPrivate==1){var Js=Vs(va).getEncodedHex();return qs=Rs({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Js}}]}).getEncodedHex(),_s===void 0||_s==null?at(qs,"PRIVATE KEY"):at(zs=Zs(qs,_s),"ENCRYPTED PRIVATE KEY")}if(_a=="PKCS8PRV"&&Gs!==void 0&&va instanceof Gs&&va.isPrivate==1)return Js=new Rs({seq:[{int:1},{octstr:{hex:va.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+va.pubKeyHex}}]}]}).getEncodedHex(),qs=Rs({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:va.curveName}}]},{octstr:{hex:Js}}]}).getEncodedHex(),_s===void 0||_s==null?at(qs,"PRIVATE KEY"):at(zs=Zs(qs,_s),"ENCRYPTED PRIVATE KEY");if(_a=="PKCS8PRV"&&Os!==void 0&&va instanceof Os&&va.isPrivate==1)return Js=new Ls({bigint:va.x}).getEncodedHex(),qs=Rs({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:va.p}},{int:{bigint:va.q}},{int:{bigint:va.g}}]}]},{octstr:{hex:Js}}]}).getEncodedHex(),_s===void 0||_s==null?at(qs,"PRIVATE KEY"):at(zs=Zs(qs,_s),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Et.getKeyFromCSRPEM=function(va){var _a=ut(va,"CERTIFICATE REQUEST");return Et.getKeyFromCSRHex(_a)},Et.getKeyFromCSRHex=function(va){var _a=Et.parseCSRHex(va);return Et.getKey(_a.p8pubkeyhex,null,"pkcs8pub")},Et.parseCSRHex=function(va){var _a=It,_s=_a.getChildIdx,Ss=_a.getTLV,Ms={},Cs=va;if(Cs.substr(0,2)!="30")throw"malformed CSR(code:001)";var Ts=_s(Cs,0);if(Ts.length<1)throw"malformed CSR(code:002)";if(Cs.substr(Ts[0],2)!="30")throw"malformed CSR(code:003)";var Bs=_s(Cs,Ts[0]);if(Bs.length<3)throw"malformed CSR(code:004)";return Ms.p8pubkeyhex=Ss(Cs,Bs[2]),Ms},Et.getKeyID=function(va){var _a=Et,_s=It;typeof va=="string"&&va.indexOf("BEGIN ")!=-1&&(va=_a.getKey(va));var Ss=ut(_a.getPEM(va)),Ms=_s.getIdxbyList(Ss,0,[1]),Cs=_s.getV(Ss,Ms).substring(2);return u$2.crypto.Util.hashHex(Cs,"sha1")},Et.getJWKFromKey=function(va){var _a={};if(va instanceof X$1&&va.isPrivate)return _a.kty="RSA",_a.n=tt(va.n.toString(16)),_a.e=tt(va.e.toString(16)),_a.d=tt(va.d.toString(16)),_a.p=tt(va.p.toString(16)),_a.q=tt(va.q.toString(16)),_a.dp=tt(va.dmp1.toString(16)),_a.dq=tt(va.dmq1.toString(16)),_a.qi=tt(va.coeff.toString(16)),_a;if(va instanceof X$1&&va.isPublic)return _a.kty="RSA",_a.n=tt(va.n.toString(16)),_a.e=tt(va.e.toString(16)),_a;if(va instanceof u$2.crypto.ECDSA&&va.isPrivate){if((Ss=va.getShortNISTPCurveName())!=="P-256"&&Ss!=="P-384")throw"unsupported curve name for JWT: "+Ss;var _s=va.getPublicKeyXYHex();return _a.kty="EC",_a.crv=Ss,_a.x=tt(_s.x),_a.y=tt(_s.y),_a.d=tt(va.prvKeyHex),_a}if(va instanceof u$2.crypto.ECDSA&&va.isPublic){var Ss;if((Ss=va.getShortNISTPCurveName())!=="P-256"&&Ss!=="P-384")throw"unsupported curve name for JWT: "+Ss;return _s=va.getPublicKeyXYHex(),_a.kty="EC",_a.crv=Ss,_a.x=tt(_s.x),_a.y=tt(_s.y),_a}throw"not supported key object"},u$2.asn1!==void 0&&u$2.asn1||(u$2.asn1={}),u$2.asn1.ASN1Util=new function(){this.integerToByteHex=function(va){var _a=va.toString(16);return _a.length%2==1&&(_a="0"+_a),_a},this.bigIntToMinTwosComplementsHex=function(va){var _a=va.toString(16);if(_a.substr(0,1)!="-")_a.length%2==1?_a="0"+_a:_a.match(/^[0-7]/)||(_a="00"+_a);else{var _s=_a.substr(1).length;_s%2==1?_s+=1:_a.match(/^[0-7]/)||(_s+=2);for(var Ss="",Ms=0;Ms<_s;Ms++)Ss+="f";_a=new c$3(Ss,16).xor(va).add(c$3.ONE).toString(16).replace(/^-/,"")}return _a},this.getPEMStringFromHex=function(va,_a){return at(va,_a)},this.newObject=function(va){var _a=u$2.asn1,_s=_a.ASN1Object,Ss=_a.DERBoolean,Ms=_a.DERInteger,Cs=_a.DERBitString,Ts=_a.DEROctetString,Bs=_a.DERNull,Ps=_a.DERObjectIdentifier,Ls=_a.DEREnumerated,Rs=_a.DERUTF8String,$s=_a.DERNumericString,Fs=_a.DERPrintableString,Os=_a.DERTeletexString,Gs=_a.DERIA5String,Ns=_a.DERUTCTime,Vs=_a.DERGeneralizedTime,Ds=_a.DERVisibleString,ks=_a.DERBMPString,Us=_a.DERSequence,zs=_a.DERSet,Ws=_a.DERTaggedObject,qs=_a.ASN1Util.newObject;if(va instanceof _a.ASN1Object)return va;var Zs=Object.keys(va);if(Zs.length!=1)throw new Error("key of param shall be only one.");var el=Zs[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+el+":")==-1)throw new Error("undefined key: "+el);if(el=="bool")return new Ss(va[el]);if(el=="int")return new Ms(va[el]);if(el=="bitstr")return new Cs(va[el]);if(el=="octstr")return new Ts(va[el]);if(el=="null")return new Bs(va[el]);if(el=="oid")return new Ps(va[el]);if(el=="enum")return new Ls(va[el]);if(el=="utf8str")return new Rs(va[el]);if(el=="numstr")return new $s(va[el]);if(el=="prnstr")return new Fs(va[el]);if(el=="telstr")return new Os(va[el]);if(el=="ia5str")return new Gs(va[el]);if(el=="utctime")return new Ns(va[el]);if(el=="gentime")return new Vs(va[el]);if(el=="visstr")return new Ds(va[el]);if(el=="bmpstr")return new ks(va[el]);if(el=="asn1")return new _s(va[el]);if(el=="seq"){for(var Js=va[el],Hs=[],Qs=0;Qs<Js.length;Qs++){var js=qs(Js[Qs]);Hs.push(js)}return new Us({array:Hs})}if(el=="set"){for(Js=va[el],Hs=[],Qs=0;Qs<Js.length;Qs++)js=qs(Js[Qs]),Hs.push(js);return new zs({array:Hs})}if(el=="tag"){var Ks=va[el];if(Object.prototype.toString.call(Ks)==="[object Array]"&&Ks.length==3){var Xs=qs(Ks[2]);return new Ws({tag:Ks[0],explicit:Ks[1],obj:Xs})}return new Ws(Ks)}},this.jsonToASN1HEX=function(va){return this.newObject(va).getEncodedHex()}},u$2.asn1.ASN1Util.oidHexToInt=function(va){for(var _a="",_s=parseInt(va.substr(0,2),16),Ss=(_a=Math.floor(_s/40)+"."+_s%40,""),Ms=2;Ms<va.length;Ms+=2){var Cs=("00000000"+parseInt(va.substr(Ms,2),16).toString(2)).slice(-8);Ss+=Cs.substr(1,7),Cs.substr(0,1)=="0"&&(_a=_a+"."+new c$3(Ss,2).toString(10),Ss="")}return _a},u$2.asn1.ASN1Util.oidIntToHex=function(va){var _a=function(Bs){var Ps=Bs.toString(16);return Ps.length==1&&(Ps="0"+Ps),Ps},_s=function(Bs){var Ps="",Ls=new c$3(Bs,10).toString(2),Rs=7-Ls.length%7;Rs==7&&(Rs=0);for(var $s="",Fs=0;Fs<Rs;Fs++)$s+="0";for(Ls=$s+Ls,Fs=0;Fs<Ls.length-1;Fs+=7){var Os=Ls.substr(Fs,7);Fs!=Ls.length-7&&(Os="1"+Os),Ps+=_a(parseInt(Os,2))}return Ps};if(!va.match(/^[0-9.]+$/))throw"malformed oid string: "+va;var Ss="",Ms=va.split("."),Cs=40*parseInt(Ms[0])+parseInt(Ms[1]);Ss+=_a(Cs),Ms.splice(0,2);for(var Ts=0;Ts<Ms.length;Ts++)Ss+=_s(Ms[Ts]);return Ss},u$2.asn1.ASN1Object=function(va){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var _a=this.hV.length/2,_s=_a.toString(16);if(_s.length%2==1&&(_s="0"+_s),_a<128)return _s;var Ss=_s.length/2;if(Ss>15)throw"ASN.1 length too long to represent by 8x: n = "+_a.toString(16);return(128+Ss).toString(16)+_s},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(_a){this.params=_a},va!=null&&va.tlv!=null&&(this.hTLV=va.tlv,this.isModified=!1)},u$2.asn1.DERAbstractString=function(va){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(_a){this.hTLV=null,this.isModified=!0,this.s=_a,this.hV=it(this.s).toLowerCase()},this.setStringHex=function(_a){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_a},this.getFreshValueHex=function(){return this.hV},va!==void 0&&(typeof va=="string"?this.setString(va):va.str!==void 0?this.setString(va.str):va.hex!==void 0&&this.setStringHex(va.hex))},l$4.lang.extend(u$2.asn1.DERAbstractString,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractTime=function(va){u$2.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(_a){var _s=_a.getTime()+6e4*_a.getTimezoneOffset();return new Date(_s)},this.formatDate=function(_a,_s,Ss){var Ms=this.zeroPadding,Cs=this.localDateToUTC(_a),Ts=String(Cs.getFullYear());_s=="utc"&&(Ts=Ts.substr(2,2));var Bs=Ts+Ms(String(Cs.getMonth()+1),2)+Ms(String(Cs.getDate()),2)+Ms(String(Cs.getHours()),2)+Ms(String(Cs.getMinutes()),2)+Ms(String(Cs.getSeconds()),2);if(Ss===!0){var Ps=Cs.getMilliseconds();if(Ps!=0){var Ls=Ms(String(Ps),3);Bs=Bs+"."+(Ls=Ls.replace(/[0]+$/,""))}}return Bs+"Z"},this.zeroPadding=function(_a,_s){return _a.length>=_s?_a:new Array(_s-_a.length+1).join("0")+_a},this.getString=function(){return this.s},this.setString=function(_a){this.hTLV=null,this.isModified=!0,this.s=_a,this.hV=J$1(_a)},this.setByDateValue=function(_a,_s,Ss,Ms,Cs,Ts){var Bs=new Date(Date.UTC(_a,_s-1,Ss,Ms,Cs,Ts,0));this.setByDate(Bs)},this.getFreshValueHex=function(){return this.hV}},l$4.lang.extend(u$2.asn1.DERAbstractTime,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractStructured=function(va){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(_a){this.hTLV=null,this.isModified=!0,this.asn1Array=_a},this.appendASN1Object=function(_a){this.hTLV=null,this.isModified=!0,this.asn1Array.push(_a)},this.asn1Array=new Array,va!==void 0&&va.array!==void 0&&(this.asn1Array=va.array)},l$4.lang.extend(u$2.asn1.DERAbstractStructured,u$2.asn1.ASN1Object),u$2.asn1.DERBoolean=function(va){u$2.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=va==0?"010100":"0101ff"},l$4.lang.extend(u$2.asn1.DERBoolean,u$2.asn1.ASN1Object),u$2.asn1.DERInteger=function(va){u$2.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(_a){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(_a)},this.setByInteger=function(_a){var _s=new c$3(String(_a),10);this.setByBigInteger(_s)},this.setValueHex=function(_a){this.hV=_a},this.getFreshValueHex=function(){return this.hV},va!==void 0&&(va.bigint!==void 0?this.setByBigInteger(va.bigint):va.int!==void 0?this.setByInteger(va.int):typeof va=="number"?this.setByInteger(va):va.hex!==void 0&&this.setValueHex(va.hex))},l$4.lang.extend(u$2.asn1.DERInteger,u$2.asn1.ASN1Object),u$2.asn1.DERBitString=function(va){if(va!==void 0&&va.obj!==void 0){var _a=u$2.asn1.ASN1Util.newObject(va.obj);va.hex="00"+_a.getEncodedHex()}u$2.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(_s){this.hTLV=null,this.isModified=!0,this.hV=_s},this.setUnusedBitsAndHexValue=function(_s,Ss){if(_s<0||7<_s)throw"unused bits shall be from 0 to 7: u = "+_s;var Ms="0"+_s;this.hTLV=null,this.isModified=!0,this.hV=Ms+Ss},this.setByBinaryString=function(_s){var Ss=8-(_s=_s.replace(/0+$/,"")).length%8;Ss==8&&(Ss=0);for(var Ms=0;Ms<=Ss;Ms++)_s+="0";var Cs="";for(Ms=0;Ms<_s.length-1;Ms+=8){var Ts=_s.substr(Ms,8),Bs=parseInt(Ts,2).toString(16);Bs.length==1&&(Bs="0"+Bs),Cs+=Bs}this.hTLV=null,this.isModified=!0,this.hV="0"+Ss+Cs},this.setByBooleanArray=function(_s){for(var Ss="",Ms=0;Ms<_s.length;Ms++)_s[Ms]==1?Ss+="1":Ss+="0";this.setByBinaryString(Ss)},this.newFalseArray=function(_s){for(var Ss=new Array(_s),Ms=0;Ms<_s;Ms++)Ss[Ms]=!1;return Ss},this.getFreshValueHex=function(){return this.hV},va!==void 0&&(typeof va=="string"&&va.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(va):va.hex!==void 0?this.setHexValueIncludingUnusedBits(va.hex):va.bin!==void 0?this.setByBinaryString(va.bin):va.array!==void 0&&this.setByBooleanArray(va.array))},l$4.lang.extend(u$2.asn1.DERBitString,u$2.asn1.ASN1Object),u$2.asn1.DEROctetString=function(va){if(va!==void 0&&va.obj!==void 0){var _a=u$2.asn1.ASN1Util.newObject(va.obj);va.hex=_a.getEncodedHex()}u$2.asn1.DEROctetString.superclass.constructor.call(this,va),this.hT="04"},l$4.lang.extend(u$2.asn1.DEROctetString,u$2.asn1.DERAbstractString),u$2.asn1.DERNull=function(){u$2.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},l$4.lang.extend(u$2.asn1.DERNull,u$2.asn1.ASN1Object),u$2.asn1.DERObjectIdentifier=function(va){u$2.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(_a){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_a},this.setValueOidString=function(_a){var _s=function(Ss){var Ms=function(Rs){var $s=Rs.toString(16);return $s.length==1&&($s="0"+$s),$s},Cs=function(Rs){var $s="",Fs=parseInt(Rs,10).toString(2),Os=7-Fs.length%7;Os==7&&(Os=0);for(var Gs="",Ns=0;Ns<Os;Ns++)Gs+="0";for(Fs=Gs+Fs,Ns=0;Ns<Fs.length-1;Ns+=7){var Vs=Fs.substr(Ns,7);Ns!=Fs.length-7&&(Vs="1"+Vs),$s+=Ms(parseInt(Vs,2))}return $s};try{if(!Ss.match(/^[0-9.]+$/))return null;var Ts="",Bs=Ss.split("."),Ps=40*parseInt(Bs[0],10)+parseInt(Bs[1],10);Ts+=Ms(Ps),Bs.splice(0,2);for(var Ls=0;Ls<Bs.length;Ls++)Ts+=Cs(Bs[Ls]);return Ts}catch{return null}}(_a);if(_s==null)throw new Error("malformed oid string: "+_a);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_s},this.setValueName=function(_a){var _s=u$2.asn1.x509.OID.name2oid(_a);if(_s==="")throw new Error("DERObjectIdentifier oidName undefined: "+_a);this.setValueOidString(_s)},this.setValueNameOrOid=function(_a){_a.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(_a):this.setValueName(_a)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(_a){typeof _a=="string"?this.setValueNameOrOid(_a):_a.oid!==void 0?this.setValueNameOrOid(_a.oid):_a.name!==void 0?this.setValueNameOrOid(_a.name):_a.hex!==void 0&&this.setValueHex(_a.hex)},va!==void 0&&this.setByParam(va)},l$4.lang.extend(u$2.asn1.DERObjectIdentifier,u$2.asn1.ASN1Object),u$2.asn1.DEREnumerated=function(va){u$2.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(_a){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(_a)},this.setByInteger=function(_a){var _s=new c$3(String(_a),10);this.setByBigInteger(_s)},this.setValueHex=function(_a){this.hV=_a},this.getFreshValueHex=function(){return this.hV},va!==void 0&&(va.int!==void 0?this.setByInteger(va.int):typeof va=="number"?this.setByInteger(va):va.hex!==void 0&&this.setValueHex(va.hex))},l$4.lang.extend(u$2.asn1.DEREnumerated,u$2.asn1.ASN1Object),u$2.asn1.DERUTF8String=function(va){u$2.asn1.DERUTF8String.superclass.constructor.call(this,va),this.hT="0c"},l$4.lang.extend(u$2.asn1.DERUTF8String,u$2.asn1.DERAbstractString),u$2.asn1.DERNumericString=function(va){u$2.asn1.DERNumericString.superclass.constructor.call(this,va),this.hT="12"},l$4.lang.extend(u$2.asn1.DERNumericString,u$2.asn1.DERAbstractString),u$2.asn1.DERPrintableString=function(va){u$2.asn1.DERPrintableString.superclass.constructor.call(this,va),this.hT="13"},l$4.lang.extend(u$2.asn1.DERPrintableString,u$2.asn1.DERAbstractString),u$2.asn1.DERTeletexString=function(va){u$2.asn1.DERTeletexString.superclass.constructor.call(this,va),this.hT="14"},l$4.lang.extend(u$2.asn1.DERTeletexString,u$2.asn1.DERAbstractString),u$2.asn1.DERIA5String=function(va){u$2.asn1.DERIA5String.superclass.constructor.call(this,va),this.hT="16"},l$4.lang.extend(u$2.asn1.DERIA5String,u$2.asn1.DERAbstractString),u$2.asn1.DERVisibleString=function(va){u$2.asn1.DERIA5String.superclass.constructor.call(this,va),this.hT="1a"},l$4.lang.extend(u$2.asn1.DERVisibleString,u$2.asn1.DERAbstractString),u$2.asn1.DERBMPString=function(va){u$2.asn1.DERBMPString.superclass.constructor.call(this,va),this.hT="1e"},l$4.lang.extend(u$2.asn1.DERBMPString,u$2.asn1.DERAbstractString),u$2.asn1.DERUTCTime=function(va){u$2.asn1.DERUTCTime.superclass.constructor.call(this,va),this.hT="17",this.setByDate=function(_a){this.hTLV=null,this.isModified=!0,this.date=_a,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)),this.hV},va!==void 0&&(va.str!==void 0?this.setString(va.str):typeof va=="string"&&va.match(/^[0-9]{12}Z$/)?this.setString(va):va.hex!==void 0?this.setStringHex(va.hex):va.date!==void 0&&this.setByDate(va.date))},l$4.lang.extend(u$2.asn1.DERUTCTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERGeneralizedTime=function(va){u$2.asn1.DERGeneralizedTime.superclass.constructor.call(this,va),this.hT="18",this.withMillis=!1,this.setByDate=function(_a){this.hTLV=null,this.isModified=!0,this.date=_a,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)),this.hV},va!==void 0&&(va.str!==void 0?this.setString(va.str):typeof va=="string"&&va.match(/^[0-9]{14}Z$/)?this.setString(va):va.hex!==void 0?this.setStringHex(va.hex):va.date!==void 0&&this.setByDate(va.date),va.millis===!0&&(this.withMillis=!0))},l$4.lang.extend(u$2.asn1.DERGeneralizedTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERSequence=function(va){u$2.asn1.DERSequence.superclass.constructor.call(this,va),this.hT="30",this.getFreshValueHex=function(){for(var _a="",_s=0;_s<this.asn1Array.length;_s++)_a+=this.asn1Array[_s].getEncodedHex();return this.hV=_a,this.hV}},l$4.lang.extend(u$2.asn1.DERSequence,u$2.asn1.DERAbstractStructured),u$2.asn1.DERSet=function(va){u$2.asn1.DERSet.superclass.constructor.call(this,va),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var _a=new Array,_s=0;_s<this.asn1Array.length;_s++){var Ss=this.asn1Array[_s];_a.push(Ss.getEncodedHex())}return this.sortFlag==1&&_a.sort(),this.hV=_a.join(""),this.hV},va!==void 0&&va.sortflag!==void 0&&va.sortflag==0&&(this.sortFlag=!1)},l$4.lang.extend(u$2.asn1.DERSet,u$2.asn1.DERAbstractStructured),u$2.asn1.DERTaggedObject=function(va){u$2.asn1.DERTaggedObject.superclass.constructor.call(this);var _a=u$2.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(_s,Ss,Ms){this.hT=Ss,this.isExplicit=_s,this.asn1Object=Ms,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Ms.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,Ss),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(_s){_s.tag!=null&&(this.hT=_s.tag),_s.explicit!=null&&(this.isExplicit=_s.explicit),_s.tage!=null&&(this.hT=_s.tage,this.isExplicit=!0),_s.tagi!=null&&(this.hT=_s.tagi,this.isExplicit=!1),_s.obj!=null&&(_s.obj instanceof _a.ASN1Object?(this.asn1Object=_s.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof _s.obj=="object"&&(this.asn1Object=_a.ASN1Util.newObject(_s.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},va!=null&&this.setByParam(va)},l$4.lang.extend(u$2.asn1.DERTaggedObject,u$2.asn1.ASN1Object);var It=new function(){};function Ct(va,_a){for(var _s="",Ss=_a/4-va.length,Ms=0;Ms<Ss;Ms++)_s+="0";return _s+va}function St(va,_a,_s){for(var Ss="",Ms=0;Ss.length<_a;)Ss+=rt(_s(ot(va+String.fromCharCode.apply(String,[(4278190080&Ms)>>24,(16711680&Ms)>>16,(65280&Ms)>>8,255&Ms])))),Ms+=1;return Ss}function Bt(va){for(var _a in u$2.crypto.Util.DIGESTINFOHEAD){var _s=u$2.crypto.Util.DIGESTINFOHEAD[_a],Ss=_s.length;if(va.substring(0,Ss)==_s)return[_a,va.substring(Ss)]}return[]}function Mt(va){var _a,_s=It,Ss=_s.getChildIdx,Ms=_s.getV,Cs=_s.getTLV,Ts=_s.getVbyList,Bs=_s.getVbyListEx,Ps=_s.getTLVbyList,Ls=_s.getTLVbyListEx,Rs=_s.getIdxbyList,$s=_s.getIdxbyListEx,Fs=_s.getVidx,Os=_s.getInt,Gs=_s.oidname,Ns=_s.hextooidstr,Vs=ut;try{_a=u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var Ds=Ps(this.hex,0,[0,0]);if(Ds.substr(0,2)=="a0"){var ks=Ps(Ds,0,[0]),Us=Os(ks,0);if(Us<0||2<Us)throw new Error("malformed version field");return this.version=Us+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return Bs(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Ds=Ls(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Ds)},this.getAlgorithmIdentifierName=function(Ds){for(var ks in _a)if(Ds===_a[ks])return ks;return Gs(Bs(Ds,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Ps(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Ps(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Ds=Ts(this.hex,0,[0,4+this.foffset,0]);return Ds=Ds.replace(/(..)/g,"%$1"),Ds=decodeURIComponent(Ds)},this.getNotAfter=function(){var Ds=Ts(this.hex,0,[0,4+this.foffset,1]);return Ds=Ds.replace(/(..)/g,"%$1"),Ds=decodeURIComponent(Ds)},this.getPublicKeyHex=function(){return _s.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Rs(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Ds=this.getPublicKeyIdx();return Rs(this.hex,Ds,[1,0],"30")},this.getPublicKey=function(){return Et.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Ds=Ps(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Ds)},this.getSignatureValueHex=function(){return Ts(this.hex,0,[2],"03",!0)},this.verifySignature=function(Ds){var ks=this.getSignatureAlgorithmField(),Us=this.getSignatureValueHex(),zs=Ps(this.hex,0,[0],"30"),Ws=new u$2.crypto.Signature({alg:ks});return Ws.init(Ds),Ws.updateHex(zs),Ws.verify(Us)},this.parseExt=function(Ds){var ks,Us,zs;if(Ds===void 0){if(zs=this.hex,this.version!==3)return-1;ks=Rs(zs,0,[0,7,0],"30"),Us=Ss(zs,ks)}else{zs=ut(Ds);var Ws=Rs(zs,0,[0,3,0,0],"06");if(Ms(zs,Ws)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);ks=Rs(zs,0,[0,3,0,1,0],"30"),Us=Ss(zs,ks),this.hex=zs}this.aExtInfo=new Array;for(var qs=0;qs<Us.length;qs++){var Zs={critical:!1},el=0;Ss(zs,Us[qs]).length===3&&(Zs.critical=!0,el=1),Zs.oid=_s.hextooidstr(Ts(zs,Us[qs],[0],"06"));var Js=Rs(zs,Us[qs],[1+el]);Zs.vidx=Fs(zs,Js),this.aExtInfo.push(Zs)}},this.getExtInfo=function(Ds){var ks=this.aExtInfo,Us=Ds;if(Ds.match(/^[0-9.]+$/)||(Us=u$2.asn1.x509.OID.name2oid(Ds)),Us!==""){for(var zs=0;zs<ks.length;zs++)if(ks[zs].oid===Us)return ks[zs]}},this.getExtBasicConstraints=function(Ds,ks){if(Ds===void 0&&ks===void 0){var Us=this.getExtInfo("basicConstraints");if(Us===void 0)return;Ds=Cs(this.hex,Us.vidx),ks=Us.critical}var zs={extname:"basicConstraints"};if(ks&&(zs.critical=!0),Ds==="3000")return zs;if(Ds==="30030101ff")return zs.cA=!0,zs;if(Ds.substr(0,12)==="30060101ff02"){var Ws=Ms(Ds,10),qs=parseInt(Ws,16);return zs.cA=!0,zs.pathLen=qs,zs}throw new Error("hExtV parse error: "+Ds)},this.getExtKeyUsage=function(Ds,ks){if(Ds===void 0&&ks===void 0){var Us=this.getExtInfo("keyUsage");if(Us===void 0)return;Ds=Cs(this.hex,Us.vidx),ks=Us.critical}var zs={extname:"keyUsage"};return ks&&(zs.critical=!0),zs.names=this.getExtKeyUsageString(Ds).split(","),zs},this.getExtKeyUsageBin=function(Ds){if(Ds===void 0){var ks=this.getExtInfo("keyUsage");if(ks===void 0)return"";Ds=Cs(this.hex,ks.vidx)}if(Ds.length!=8&&Ds.length!=10)throw new Error("malformed key usage value: "+Ds);var Us="000000000000000"+parseInt(Ds.substr(6),16).toString(2);return Ds.length==8&&(Us=Us.slice(-8)),Ds.length==10&&(Us=Us.slice(-16)),(Us=Us.replace(/0+$/,""))==""&&(Us="0"),Us},this.getExtKeyUsageString=function(Ds){for(var ks=this.getExtKeyUsageBin(Ds),Us=new Array,zs=0;zs<ks.length;zs++)ks.substr(zs,1)=="1"&&Us.push(Mt.KEYUSAGE_NAME[zs]);return Us.join(",")},this.getExtSubjectKeyIdentifier=function(Ds,ks){if(Ds===void 0&&ks===void 0){var Us=this.getExtInfo("subjectKeyIdentifier");if(Us===void 0)return;Ds=Cs(this.hex,Us.vidx),ks=Us.critical}var zs={extname:"subjectKeyIdentifier"};ks&&(zs.critical=!0);var Ws=Ms(Ds,0);return zs.kid={hex:Ws},zs},this.getExtAuthorityKeyIdentifier=function(Ds,ks){if(Ds===void 0&&ks===void 0){var Us=this.getExtInfo("authorityKeyIdentifier");if(Us===void 0)return;Ds=Cs(this.hex,Us.vidx),ks=Us.critical}var zs={extname:"authorityKeyIdentifier"};ks&&(zs.critical=!0);for(var Ws=Ss(Ds,0),qs=0;qs<Ws.length;qs++){var Zs=Ds.substr(Ws[qs],2);if(Zs==="80"&&(zs.kid={hex:Ms(Ds,Ws[qs])}),Zs==="a1"){var el=Cs(Ds,Ws[qs]),Js=this.getGeneralNames(el);zs.issuer=Js[0].dn}Zs==="82"&&(zs.sn={hex:Ms(Ds,Ws[qs])})}return zs},this.getExtExtKeyUsage=function(Ds,ks){if(Ds===void 0&&ks===void 0){var Us=this.getExtInfo("extKeyUsage");if(Us===void 0)return;Ds=Cs(this.hex,Us.vidx),ks=Us.critical}var zs={extname:"extKeyUsage",array:[]};ks&&(zs.critical=!0);for(var Ws=Ss(Ds,0),qs=0;qs<Ws.length;qs++)zs.array.push(Gs(Ms(Ds,Ws[qs])));return zs},this.getExtExtKeyUsageName=function(){var Ds=this.getExtInfo("extKeyUsage");if(Ds===void 0)return Ds;var ks=new Array,Us=Cs(this.hex,Ds.vidx);if(Us==="")return ks;for(var zs=Ss(Us,0),Ws=0;Ws<zs.length;Ws++)ks.push(Gs(Ms(Us,zs[Ws])));return ks},this.getExtSubjectAltName=function(Ds,ks){if(Ds===void 0&&ks===void 0){var Us=this.getExtInfo("subjectAltName");if(Us===void 0)return;Ds=Cs(this.hex,Us.vidx),ks=Us.critical}var zs={extname:"subjectAltName",array:[]};return ks&&(zs.critical=!0),zs.array=this.getGeneralNames(Ds),zs},this.getExtIssuerAltName=function(Ds,ks){if(Ds===void 0&&ks===void 0){var Us=this.getExtInfo("issuerAltName");if(Us===void 0)return;Ds=Cs(this.hex,Us.vidx),ks=Us.critical}var zs={extname:"issuerAltName",array:[]};return ks&&(zs.critical=!0),zs.array=this.getGeneralNames(Ds),zs},this.getGeneralNames=function(Ds){for(var ks=Ss(Ds,0),Us=[],zs=0;zs<ks.length;zs++){var Ws=this.getGeneralName(Cs(Ds,ks[zs]));Ws!==void 0&&Us.push(Ws)}return Us},this.getGeneralName=function(Ds){var ks=Ds.substr(0,2),Us=Ms(Ds,0),zs=rt(Us);return ks=="81"?{rfc822:zs}:ks=="82"?{dns:zs}:ks=="86"?{uri:zs}:ks=="87"?{ip:lt(Us)}:ks=="a4"?{dn:this.getX500Name(Us)}:void 0},this.getExtSubjectAltName2=function(){var Ds,ks,Us,zs=this.getExtInfo("subjectAltName");if(zs===void 0)return zs;for(var Ws=new Array,qs=Cs(this.hex,zs.vidx),Zs=Ss(qs,0),el=0;el<Zs.length;el++)Us=qs.substr(Zs[el],2),Ds=Ms(qs,Zs[el]),Us==="81"&&(ks=nt(Ds),Ws.push(["MAIL",ks])),Us==="82"&&(ks=nt(Ds),Ws.push(["DNS",ks])),Us==="84"&&(ks=Mt.hex2dn(Ds,0),Ws.push(["DN",ks])),Us==="86"&&(ks=nt(Ds),Ws.push(["URI",ks])),Us==="87"&&(ks=lt(Ds),Ws.push(["IP",ks]));return Ws},this.getExtCRLDistributionPoints=function(Ds,ks){if(Ds===void 0&&ks===void 0){var Us=this.getExtInfo("cRLDistributionPoints");if(Us===void 0)return;Ds=Cs(this.hex,Us.vidx),ks=Us.critical}var zs={extname:"cRLDistributionPoints",array:[]};ks&&(zs.critical=!0);for(var Ws=Ss(Ds,0),qs=0;qs<Ws.length;qs++){var Zs=Cs(Ds,Ws[qs]);zs.array.push(this.getDistributionPoint(Zs))}return zs},this.getDistributionPoint=function(Ds){for(var ks={},Us=Ss(Ds,0),zs=0;zs<Us.length;zs++){var Ws=Ds.substr(Us[zs],2),qs=Cs(Ds,Us[zs]);Ws=="a0"&&(ks.dpname=this.getDistributionPointName(qs))}return ks},this.getDistributionPointName=function(Ds){for(var ks={},Us=Ss(Ds,0),zs=0;zs<Us.length;zs++){var Ws=Ds.substr(Us[zs],2),qs=Cs(Ds,Us[zs]);Ws=="a0"&&(ks.full=this.getGeneralNames(qs))}return ks},this.getExtCRLDistributionPointsURI=function(){var Ds=this.getExtInfo("cRLDistributionPoints");if(Ds===void 0)return Ds;for(var ks=new Array,Us=Ss(this.hex,Ds.vidx),zs=0;zs<Us.length;zs++)try{var Ws=nt(Ts(this.hex,Us[zs],[0,0,0],"86"));ks.push(Ws)}catch{}return ks},this.getExtAIAInfo=function(){var Ds=this.getExtInfo("authorityInfoAccess");if(Ds===void 0)return Ds;for(var ks={ocsp:[],caissuer:[]},Us=Ss(this.hex,Ds.vidx),zs=0;zs<Us.length;zs++){var Ws=Ts(this.hex,Us[zs],[0],"06"),qs=Ts(this.hex,Us[zs],[1],"86");Ws==="2b06010505073001"&&ks.ocsp.push(nt(qs)),Ws==="2b06010505073002"&&ks.caissuer.push(nt(qs))}return ks},this.getExtAuthorityInfoAccess=function(Ds,ks){if(Ds===void 0&&ks===void 0){var Us=this.getExtInfo("authorityInfoAccess");if(Us===void 0)return;Ds=Cs(this.hex,Us.vidx),ks=Us.critical}var zs={extname:"authorityInfoAccess",array:[]};ks&&(zs.critical=!0);for(var Ws=Ss(Ds,0),qs=0;qs<Ws.length;qs++){var Zs=Bs(Ds,Ws[qs],[0],"06"),el=nt(Ts(Ds,Ws[qs],[1],"86"));if(Zs=="2b06010505073001")zs.array.push({ocsp:el});else{if(Zs!="2b06010505073002")throw new Error("unknown method: "+Zs);zs.array.push({caissuer:el})}}return zs},this.getExtCertificatePolicies=function(Ds,ks){if(Ds===void 0&&ks===void 0){var Us=this.getExtInfo("certificatePolicies");if(Us===void 0)return;Ds=Cs(this.hex,Us.vidx),ks=Us.critical}var zs={extname:"certificatePolicies",array:[]};ks&&(zs.critical=!0);for(var Ws=Ss(Ds,0),qs=0;qs<Ws.length;qs++){var Zs=Cs(Ds,Ws[qs]),el=this.getPolicyInformation(Zs);zs.array.push(el)}return zs},this.getPolicyInformation=function(Ds){var ks={},Us=Ts(Ds,0,[0],"06");ks.policyoid=Gs(Us);var zs=$s(Ds,0,[1],"30");if(zs!=-1){ks.array=[];for(var Ws=Ss(Ds,zs),qs=0;qs<Ws.length;qs++){var Zs=Cs(Ds,Ws[qs]),el=this.getPolicyQualifierInfo(Zs);ks.array.push(el)}}return ks},this.getPolicyQualifierInfo=function(Ds){var ks={},Us=Ts(Ds,0,[0],"06");if(Us==="2b06010505070201"){var zs=Bs(Ds,0,[1],"16");ks.cps=rt(zs)}else if(Us==="2b06010505070202"){var Ws=Ps(Ds,0,[1],"30");ks.unotice=this.getUserNotice(Ws)}return ks},this.getUserNotice=function(Ds){for(var ks={},Us=Ss(Ds,0),zs=0;zs<Us.length;zs++){var Ws=Cs(Ds,Us[zs]);Ws.substr(0,2)!="30"&&(ks.exptext=this.getDisplayText(Ws))}return ks},this.getDisplayText=function(Ds){var ks={};return ks.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Ds.substr(0,2)],ks.str=rt(Ms(Ds,0)),ks},this.getExtCRLNumber=function(Ds,ks){var Us={extname:"cRLNumber"};if(ks&&(Us.critical=!0),Ds.substr(0,2)=="02")return Us.num={hex:Ms(Ds,0)},Us;throw new Error("hExtV parse error: "+Ds)},this.getExtCRLReason=function(Ds,ks){var Us={extname:"cRLReason"};if(ks&&(Us.critical=!0),Ds.substr(0,2)=="0a")return Us.code=parseInt(Ms(Ds,0),16),Us;throw new Error("hExtV parse error: "+Ds)},this.getExtOcspNonce=function(Ds,ks){var Us={extname:"ocspNonce"};ks&&(Us.critical=!0);var zs=Ms(Ds,0);return Us.hex=zs,Us},this.getExtOcspNoCheck=function(Ds,ks){var Us={extname:"ocspNoCheck"};return ks&&(Us.critical=!0),Us},this.getExtAdobeTimeStamp=function(Ds,ks){if(Ds===void 0&&ks===void 0){var Us=this.getExtInfo("adobeTimeStamp");if(Us===void 0)return;Ds=Cs(this.hex,Us.vidx),ks=Us.critical}var zs={extname:"adobeTimeStamp"};ks&&(zs.critical=!0);var Ws=Ss(Ds,0);if(Ws.length>1){var qs=Cs(Ds,Ws[1]),Zs=this.getGeneralName(qs);Zs.uri!=null&&(zs.uri=Zs.uri)}if(Ws.length>2){var el=Cs(Ds,Ws[2]);el=="0101ff"&&(zs.reqauth=!0),el=="010100"&&(zs.reqauth=!1)}return zs},this.getX500NameRule=function(Ds){for(var ks=null,Us=[],zs=0;zs<Ds.length;zs++)for(var Ws=Ds[zs],qs=0;qs<Ws.length;qs++)Us.push(Ws[qs]);for(zs=0;zs<Us.length;zs++){var Zs=Us[zs],el=Zs.ds,Js=Zs.value,Hs=Zs.type;if(el!="prn"&&el!="utf8"&&el!="ia5")return"mixed";if(el=="ia5"){if(Hs!="CN")return"mixed";if(u$2.lang.String.isMail(Js))continue;return"mixed"}if(Hs=="C"){if(el=="prn")continue;return"mixed"}if(ks==null)ks=el;else if(ks!==el)return"mixed"}return ks??"prn"},this.getX500Name=function(Ds){var ks=this.getX500NameArray(Ds);return{array:ks,str:this.dnarraytostr(ks)}},this.getX500NameArray=function(Ds){for(var ks=[],Us=Ss(Ds,0),zs=0;zs<Us.length;zs++)ks.push(this.getRDN(Cs(Ds,Us[zs])));return ks},this.getRDN=function(Ds){for(var ks=[],Us=Ss(Ds,0),zs=0;zs<Us.length;zs++)ks.push(this.getAttrTypeAndValue(Cs(Ds,Us[zs])));return ks},this.getAttrTypeAndValue=function(Ds){var ks={type:null,value:null,ds:null},Us=Ss(Ds,0),zs=Ts(Ds,Us[0],[],"06"),Ws=Ts(Ds,Us[1],[]),qs=u$2.asn1.ASN1Util.oidHexToInt(zs);return ks.type=u$2.asn1.x509.OID.oid2atype(qs),ks.ds=this.HEX2STAG[Ds.substr(Us[1],2)],ks.ds!="bmp"?ks.value=nt(Ws):ks.value=ht(Ws),ks},this.readCertPEM=function(Ds){this.readCertHex(Vs(Ds))},this.readCertHex=function(Ds){this.hex=Ds,this.getVersion();try{Rs(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Ds={};return Ds.version=this.getVersion(),Ds.serial={hex:this.getSerialNumberHex()},Ds.sigalg=this.getSignatureAlgorithmField(),Ds.issuer=this.getIssuer(),Ds.notbefore=this.getNotBefore(),Ds.notafter=this.getNotAfter(),Ds.subject=this.getSubject(),Ds.sbjpubkey=at(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Ds.ext=this.getExtParamArray()),Ds.sighex=this.getSignatureValueHex(),Ds},this.getExtParamArray=function(Ds){Ds==null&&$s(this.hex,0,[0,"[3]"])!=-1&&(Ds=Ls(this.hex,0,[0,"[3]",0],"30"));for(var ks=[],Us=Ss(Ds,0),zs=0;zs<Us.length;zs++){var Ws=Cs(Ds,Us[zs]),qs=this.getExtParam(Ws);qs!=null&&ks.push(qs)}return ks},this.getExtParam=function(Ds){var ks=Ss(Ds,0).length;if(ks!=2&&ks!=3)throw new Error("wrong number elements in Extension: "+ks+" "+Ds);var Us=Ns(Ts(Ds,0,[0],"06")),zs=!1;ks==3&&Ps(Ds,0,[1])=="0101ff"&&(zs=!0);var Ws=Ps(Ds,0,[ks-1,0]),qs=void 0;if(Us=="2.5.29.14"?qs=this.getExtSubjectKeyIdentifier(Ws,zs):Us=="2.5.29.15"?qs=this.getExtKeyUsage(Ws,zs):Us=="2.5.29.17"?qs=this.getExtSubjectAltName(Ws,zs):Us=="2.5.29.18"?qs=this.getExtIssuerAltName(Ws,zs):Us=="2.5.29.19"?qs=this.getExtBasicConstraints(Ws,zs):Us=="2.5.29.31"?qs=this.getExtCRLDistributionPoints(Ws,zs):Us=="2.5.29.32"?qs=this.getExtCertificatePolicies(Ws,zs):Us=="2.5.29.35"?qs=this.getExtAuthorityKeyIdentifier(Ws,zs):Us=="2.5.29.37"?qs=this.getExtExtKeyUsage(Ws,zs):Us=="1.3.6.1.5.5.7.1.1"?qs=this.getExtAuthorityInfoAccess(Ws,zs):Us=="2.5.29.20"?qs=this.getExtCRLNumber(Ws,zs):Us=="2.5.29.21"?qs=this.getExtCRLReason(Ws,zs):Us=="1.3.6.1.5.5.7.48.1.2"?qs=this.getExtOcspNonce(Ws,zs):Us=="1.3.6.1.5.5.7.48.1.5"?qs=this.getExtOcspNoCheck(Ws,zs):Us=="1.2.840.113583.1.1.9.1"&&(qs=this.getExtAdobeTimeStamp(Ws,zs)),qs!=null)return qs;var Zs={extname:Us,extn:Ws};return zs&&(Zs.critical=!0),Zs},this.findExt=function(Ds,ks){for(var Us=0;Us<Ds.length;Us++)if(Ds[Us].extname==ks)return Ds[Us];return null},this.updateExtCDPFullURI=function(Ds,ks){var Us=this.findExt(Ds,"cRLDistributionPoints");if(Us!=null&&Us.array!=null){for(var zs=Us.array,Ws=0;Ws<zs.length;Ws++)if(zs[Ws].dpname!=null&&zs[Ws].dpname.full!=null)for(var qs=zs[Ws].dpname.full,Zs=0;Zs<qs.length;Zs++){var el=qs[Ws];el.uri!=null&&(el.uri=ks)}}},this.updateExtAIAOCSP=function(Ds,ks){var Us=this.findExt(Ds,"authorityInfoAccess");if(Us!=null&&Us.array!=null)for(var zs=Us.array,Ws=0;Ws<zs.length;Ws++)zs[Ws].ocsp!=null&&(zs[Ws].ocsp=ks)},this.updateExtAIACAIssuer=function(Ds,ks){var Us=this.findExt(Ds,"authorityInfoAccess");if(Us!=null&&Us.array!=null)for(var zs=Us.array,Ws=0;Ws<zs.length;Ws++)zs[Ws].caissuer!=null&&(zs[Ws].caissuer=ks)},this.dnarraytostr=function(Ds){return"/"+Ds.map(function(ks){return function(Us){return Us.map(function(zs){return function(Ws){return Ws.type+"="+Ws.value}(zs).replace(/\+/,"\\+")}).join("+")}(ks).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var Ds,ks,Us,zs,Ws=function(Xs){for(var Ys="",rl=Xs.array,tl=0;tl<rl.length;tl++){var il=rl[tl];if(Ys+="    policy oid: "+il.policyoid+`
`,il.array!==void 0)for(var ll=0;ll<il.array.length;ll++){var cl=il.array[ll];cl.cps!==void 0&&(Ys+="    cps: "+cl.cps+`
`)}}return Ys},qs=function(Xs){for(var Ys="",rl=Xs.array,tl=0;tl<rl.length;tl++){var il=rl[tl];try{il.dpname.full[0].uri!==void 0&&(Ys+="    "+il.dpname.full[0].uri+`
`)}catch{}try{il.dname.full[0].dn.hex!==void 0&&(Ys+="    "+Mt.hex2dn(il.dpname.full[0].dn.hex)+`
`)}catch{}}return Ys},Zs=function(Xs){for(var Ys="",rl=Xs.array,tl=0;tl<rl.length;tl++){var il=rl[tl];il.caissuer!==void 0&&(Ys+="    caissuer: "+il.caissuer+`
`),il.ocsp!==void 0&&(Ys+="    ocsp: "+il.ocsp+`
`)}return Ys};if(Ds=`Basic Fields
`,Ds+="  serial number: "+this.getSerialNumberHex()+`
`,Ds+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Ds+="  issuer: "+this.getIssuerString()+`
`,Ds+="  notBefore: "+this.getNotBefore()+`
`,Ds+="  notAfter: "+this.getNotAfter()+`
`,Ds+="  subject: "+this.getSubjectString()+`
`,Ds+=`  subject public key info: 
`,Ds+="    key algorithm: "+(ks=this.getPublicKey()).type+`
`,ks.type==="RSA"&&(Ds+="    n="+dt(ks.n.toString(16)).substr(0,16)+`...
`,Ds+="    e="+dt(ks.e.toString(16))+`
`),(Us=this.aExtInfo)!=null){Ds+=`X509v3 Extensions:
`;for(var el=0;el<Us.length;el++){var Js=Us[el],Hs=u$2.asn1.x509.OID.oid2name(Js.oid);Hs===""&&(Hs=Js.oid);var Qs="";if(Js.critical===!0&&(Qs="CRITICAL"),Ds+="  "+Hs+" "+Qs+`:
`,Hs==="basicConstraints"){var js=this.getExtBasicConstraints();js.cA===void 0?Ds+=`    {}
`:(Ds+="    cA=true",js.pathLen!==void 0&&(Ds+=", pathLen="+js.pathLen),Ds+=`
`)}else if(Hs==="keyUsage")Ds+="    "+this.getExtKeyUsageString()+`
`;else if(Hs==="subjectKeyIdentifier")Ds+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Hs==="authorityKeyIdentifier"){var Ks=this.getExtAuthorityKeyIdentifier();Ks.kid!==void 0&&(Ds+="    kid="+Ks.kid.hex+`
`)}else Hs==="extKeyUsage"?Ds+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:Hs==="subjectAltName"?Ds+="    "+(zs=this.getExtSubjectAltName(),JSON.stringify(zs.array).replace(/[\[\]\{\}\"]/g,""))+`
`:Hs==="cRLDistributionPoints"?Ds+=qs(this.getExtCRLDistributionPoints()):Hs==="authorityInfoAccess"?Ds+=Zs(this.getExtAuthorityInfoAccess()):Hs==="certificatePolicies"&&(Ds+=Ws(this.getExtCertificatePolicies()))}}return Ds+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Ds+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof va=="string"&&(va.indexOf("-----BEGIN")!=-1?this.readCertPEM(va):u$2.lang.String.isHex(va)&&this.readCertHex(va))}function Pt(va){return h$4.SHA256(va).toString()}It.getLblen=function(va,_a){if(va.substr(_a+2,1)!="8")return 1;var _s=parseInt(va.substr(_a+3,1));return _s==0?-1:0<_s&&_s<10?_s+1:-2},It.getL=function(va,_a){var _s=It.getLblen(va,_a);return _s<1?"":va.substr(_a+2,2*_s)},It.getVblen=function(va,_a){var _s;return(_s=It.getL(va,_a))==""?-1:(_s.substr(0,1)==="8"?new c$3(_s.substr(2),16):new c$3(_s,16)).intValue()},It.getVidx=function(va,_a){var _s=It.getLblen(va,_a);return _s<0?_s:_a+2*(_s+1)},It.getV=function(va,_a){var _s=It.getVidx(va,_a),Ss=It.getVblen(va,_a);return va.substr(_s,2*Ss)},It.getTLV=function(va,_a){return va.substr(_a,2)+It.getL(va,_a)+It.getV(va,_a)},It.getTLVblen=function(va,_a){return 2+2*It.getLblen(va,_a)+2*It.getVblen(va,_a)},It.getNextSiblingIdx=function(va,_a){return It.getVidx(va,_a)+2*It.getVblen(va,_a)},It.getChildIdx=function(va,_a){var _s,Ss,Ms,Cs=It,Ts=[];_s=Cs.getVidx(va,_a),Ss=2*Cs.getVblen(va,_a),va.substr(_a,2)=="03"&&(_s+=2,Ss-=2),Ms=0;for(var Bs=_s;Ms<=Ss;){var Ps=Cs.getTLVblen(va,Bs);if((Ms+=Ps)<=Ss&&Ts.push(Bs),Bs+=Ps,Ms>=Ss)break}return Ts},It.getNthChildIdx=function(va,_a,_s){return It.getChildIdx(va,_a)[_s]},It.getIdxbyList=function(va,_a,_s,Ss){var Ms,Cs,Ts=It;return _s.length==0?Ss!==void 0&&va.substr(_a,2)!==Ss?-1:_a:(Ms=_s.shift())>=(Cs=Ts.getChildIdx(va,_a)).length?-1:Ts.getIdxbyList(va,Cs[Ms],_s,Ss)},It.getIdxbyListEx=function(va,_a,_s,Ss){var Ms,Cs,Ts=It;if(_s.length==0)return Ss!==void 0&&va.substr(_a,2)!==Ss?-1:_a;Ms=_s.shift(),Cs=Ts.getChildIdx(va,_a);for(var Bs=0,Ps=0;Ps<Cs.length;Ps++){var Ls=va.substr(Cs[Ps],2);if(typeof Ms=="number"&&!Ts.isContextTag(Ls)&&Bs==Ms||typeof Ms=="string"&&Ts.isContextTag(Ls,Ms))return Ts.getIdxbyListEx(va,Cs[Ps],_s,Ss);Ts.isContextTag(Ls)||Bs++}return-1},It.getTLVbyList=function(va,_a,_s,Ss){var Ms=It,Cs=Ms.getIdxbyList(va,_a,_s,Ss);return Cs==-1||Cs>=va.length?null:Ms.getTLV(va,Cs)},It.getTLVbyListEx=function(va,_a,_s,Ss){var Ms=It,Cs=Ms.getIdxbyListEx(va,_a,_s,Ss);return Cs==-1?null:Ms.getTLV(va,Cs)},It.getVbyList=function(va,_a,_s,Ss,Ms){var Cs,Ts,Bs=It;return(Cs=Bs.getIdxbyList(va,_a,_s,Ss))==-1||Cs>=va.length?null:(Ts=Bs.getV(va,Cs),Ms===!0&&(Ts=Ts.substr(2)),Ts)},It.getVbyListEx=function(va,_a,_s,Ss,Ms){var Cs,Ts,Bs=It;return(Cs=Bs.getIdxbyListEx(va,_a,_s,Ss))==-1?null:(Ts=Bs.getV(va,Cs),va.substr(Cs,2)=="03"&&Ms!==!1&&(Ts=Ts.substr(2)),Ts)},It.getInt=function(va,_a,_s){_s==null&&(_s=-1);try{var Ss=va.substr(_a,2);if(Ss!="02"&&Ss!="03")return _s;var Ms=It.getV(va,_a);return Ss=="02"?parseInt(Ms,16):function(Cs){try{var Ts=Cs.substr(0,2);if(Ts=="00")return parseInt(Cs.substr(2),16);var Bs=parseInt(Ts,16),Ps=Cs.substr(2),Ls=parseInt(Ps,16).toString(2);return Ls=="0"&&(Ls="00000000"),Ls=Ls.slice(0,0-Bs),parseInt(Ls,2)}catch{return-1}}(Ms)}catch{return _s}},It.getOID=function(va,_a,_s){_s==null&&(_s=null);try{return va.substr(_a,2)!="06"?_s:function(Ss){if(!ct(Ss))return null;try{var Ms=[],Cs=Ss.substr(0,2),Ts=parseInt(Cs,16);Ms[0]=new String(Math.floor(Ts/40)),Ms[1]=new String(Ts%40);for(var Bs=Ss.substr(2),Ps=[],Ls=0;Ls<Bs.length/2;Ls++)Ps.push(parseInt(Bs.substr(2*Ls,2),16));var Rs=[],$s="";for(Ls=0;Ls<Ps.length;Ls++)128&Ps[Ls]?$s+=pt((127&Ps[Ls]).toString(2),7):($s+=pt((127&Ps[Ls]).toString(2),7),Rs.push(new String(parseInt($s,2))),$s="");var Fs=Ms.join(".");return Rs.length>0&&(Fs=Fs+"."+Rs.join(".")),Fs}catch{return null}}(It.getV(va,_a))}catch{return _s}},It.getOIDName=function(va,_a,_s){_s==null&&(_s=null);try{var Ss=It.getOID(va,_a,_s);if(Ss==_s)return _s;var Ms=u$2.asn1.x509.OID.oid2name(Ss);return Ms==""?Ss:Ms}catch{return _s}},It.getString=function(va,_a,_s){_s==null&&(_s=null);try{return rt(It.getV(va,_a))}catch{return _s}},It.hextooidstr=function(va){var _a=function($s,Fs){return $s.length>=Fs?$s:new Array(Fs-$s.length+1).join("0")+$s},_s=[],Ss=va.substr(0,2),Ms=parseInt(Ss,16);_s[0]=new String(Math.floor(Ms/40)),_s[1]=new String(Ms%40);for(var Cs=va.substr(2),Ts=[],Bs=0;Bs<Cs.length/2;Bs++)Ts.push(parseInt(Cs.substr(2*Bs,2),16));var Ps=[],Ls="";for(Bs=0;Bs<Ts.length;Bs++)128&Ts[Bs]?Ls+=_a((127&Ts[Bs]).toString(2),7):(Ls+=_a((127&Ts[Bs]).toString(2),7),Ps.push(new String(parseInt(Ls,2))),Ls="");var Rs=_s.join(".");return Ps.length>0&&(Rs=Rs+"."+Ps.join(".")),Rs},It.dump=function(va,_a,_s,Ss){var Ms=It,Cs=Ms.getV,Ts=Ms.dump,Bs=Ms.getChildIdx,Ps=va;va instanceof u$2.asn1.ASN1Object&&(Ps=va.getEncodedHex());var Ls=function(Zs,el){return Zs.length<=2*el?Zs:Zs.substr(0,el)+"..(total "+Zs.length/2+"bytes).."+Zs.substr(Zs.length-el,el)};_a===void 0&&(_a={ommit_long_octet:32}),_s===void 0&&(_s=0),Ss===void 0&&(Ss="");var Rs,$s=_a.ommit_long_octet;if((Rs=Ps.substr(_s,2))=="01")return(Fs=Cs(Ps,_s))=="00"?Ss+`BOOLEAN FALSE
`:Ss+`BOOLEAN TRUE
`;if(Rs=="02")return Ss+"INTEGER "+Ls(Fs=Cs(Ps,_s),$s)+`
`;if(Rs=="03"){var Fs=Cs(Ps,_s);if(Ms.isASN1HEX(Fs.substr(2))){var Os=Ss+`BITSTRING, encapsulates
`;return Os+=Ts(Fs.substr(2),_a,0,Ss+"  ")}return Ss+"BITSTRING "+Ls(Fs,$s)+`
`}if(Rs=="04")return Fs=Cs(Ps,_s),Ms.isASN1HEX(Fs)?(Os=Ss+`OCTETSTRING, encapsulates
`,Os+=Ts(Fs,_a,0,Ss+"  ")):Ss+"OCTETSTRING "+Ls(Fs,$s)+`
`;if(Rs=="05")return Ss+`NULL
`;if(Rs=="06"){var Gs=Cs(Ps,_s),Ns=u$2.asn1.ASN1Util.oidHexToInt(Gs),Vs=u$2.asn1.x509.OID.oid2name(Ns),Ds=Ns.replace(/\./g," ");return Vs!=""?Ss+"ObjectIdentifier "+Vs+" ("+Ds+`)
`:Ss+"ObjectIdentifier ("+Ds+`)
`}if(Rs=="0a")return Ss+"ENUMERATED "+parseInt(Cs(Ps,_s))+`
`;if(Rs=="0c")return Ss+"UTF8String '"+nt(Cs(Ps,_s))+`'
`;if(Rs=="13")return Ss+"PrintableString '"+nt(Cs(Ps,_s))+`'
`;if(Rs=="14")return Ss+"TeletexString '"+nt(Cs(Ps,_s))+`'
`;if(Rs=="16")return Ss+"IA5String '"+nt(Cs(Ps,_s))+`'
`;if(Rs=="17")return Ss+"UTCTime "+nt(Cs(Ps,_s))+`
`;if(Rs=="18")return Ss+"GeneralizedTime "+nt(Cs(Ps,_s))+`
`;if(Rs=="1a")return Ss+"VisualString '"+nt(Cs(Ps,_s))+`'
`;if(Rs=="1e")return Ss+"BMPString '"+ht(Cs(Ps,_s))+`'
`;if(Rs=="30"){if(Ps.substr(_s,4)=="3000")return Ss+`SEQUENCE {}
`;Os=Ss+`SEQUENCE
`;var ks=_a;if(((Ws=Bs(Ps,_s)).length==2||Ws.length==3)&&Ps.substr(Ws[0],2)=="06"&&Ps.substr(Ws[Ws.length-1],2)=="04"){Vs=Ms.oidname(Cs(Ps,Ws[0]));var Us=JSON.parse(JSON.stringify(_a));Us.x509ExtName=Vs,ks=Us}for(var zs=0;zs<Ws.length;zs++)Os+=Ts(Ps,ks,Ws[zs],Ss+"  ");return Os}if(Rs=="31"){Os=Ss+`SET
`;var Ws=Bs(Ps,_s);for(zs=0;zs<Ws.length;zs++)Os+=Ts(Ps,_a,Ws[zs],Ss+"  ");return Os}if((128&(Rs=parseInt(Rs,16)))!=0){var qs=31&Rs;if((32&Rs)!=0){for(Os=Ss+"["+qs+`]
`,Ws=Bs(Ps,_s),zs=0;zs<Ws.length;zs++)Os+=Ts(Ps,_a,Ws[zs],Ss+"  ");return Os}if(Fs=Cs(Ps,_s),It.isASN1HEX(Fs)){var Os=Ss+"["+qs+`]
`;return Os+=Ts(Fs,_a,0,Ss+"  ")}return(Fs.substr(0,8)=="68747470"||_a.x509ExtName==="subjectAltName"&&qs==2)&&(Fs=nt(Fs)),Os=Ss+"["+qs+"] "+Fs+`
`}return Ss+"UNKNOWN("+Rs+") "+Cs(Ps,_s)+`
`},It.isContextTag=function(va,_a){var _s,Ss;va=va.toLowerCase();try{_s=parseInt(va,16)}catch{return-1}if(_a===void 0)return(192&_s)==128;try{return _a.match(/^\[[0-9]+\]$/)!=null&&!((Ss=parseInt(_a.substr(1,_a.length-1),10))>31)&&(192&_s)==128&&(31&_s)==Ss}catch{return!1}},It.isASN1HEX=function(va){var _a=It;if(va.length%2==1)return!1;var _s=_a.getVblen(va,0),Ss=va.substr(0,2),Ms=_a.getL(va,0);return va.length-Ss.length-Ms.length==2*_s},It.checkStrictDER=function(va,_a,_s,Ss,Ms){var Cs=It;if(_s===void 0){if(typeof va!="string")throw new Error("not hex string");if(va=va.toLowerCase(),!u$2.lang.String.isHex(va))throw new Error("not hex string");_s=va.length,Ms=(Ss=va.length/2)<128?1:Math.ceil(Ss.toString(16))+1}if(Cs.getL(va,_a).length>2*Ms)throw new Error("L of TLV too long: idx="+_a);var Ts=Cs.getVblen(va,_a);if(Ts>Ss)throw new Error("value of L too long than hex: idx="+_a);var Bs=Cs.getTLV(va,_a),Ps=Bs.length-2-Cs.getL(va,_a).length;if(Ps!==2*Ts)throw new Error("V string length and L's value not the same:"+Ps+"/"+2*Ts);if(_a===0&&va.length!=Bs.length)throw new Error("total length and TLV length unmatch:"+va.length+"!="+Bs.length);var Ls=va.substr(_a,2);if(Ls==="02"){var Rs=Cs.getVidx(va,_a);if(va.substr(Rs,2)=="00"&&va.charCodeAt(Rs+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Ls,16)){for(var $s=Cs.getVblen(va,_a),Fs=0,Os=Cs.getChildIdx(va,_a),Gs=0;Gs<Os.length;Gs++)Fs+=Cs.getTLV(va,Os[Gs]).length,Cs.checkStrictDER(va,Os[Gs],_s,Ss,Ms);if(2*$s!=Fs)throw new Error("sum of children's TLV length and L unmatch: "+2*$s+"!="+Fs)}},It.oidname=function(va){var _a=u$2.asn1;u$2.lang.String.isHex(va)&&(va=_a.ASN1Util.oidHexToInt(va));var _s=_a.x509.OID.oid2name(va);return _s===""&&(_s=va),_s},u$2.asn1!==void 0&&u$2.asn1||(u$2.asn1={}),u$2.asn1.x509!==void 0&&u$2.asn1.x509||(u$2.asn1.x509={}),u$2.asn1.x509.Certificate=function(va){u$2.asn1.x509.Certificate.superclass.constructor.call(this);var _a=u$2.asn1,_s=_a.DERBitString,Ss=_a.DERSequence,Ms=_a.x509,Cs=Ms.TBSCertificate,Ts=Ms.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(Bs){this.params=Bs},this.sign=function(){var Bs=this.params,Ps=Bs.sigalg;Bs.sigalg.name!=null&&(Ps=Bs.sigalg.name);var Ls=Bs.tbsobj.getEncodedHex(),Rs=new u$2.crypto.Signature({alg:Ps});Rs.init(Bs.cakey),Rs.updateHex(Ls),Bs.sighex=Rs.sign()},this.getPEM=function(){return at(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var Bs=this.params;if(Bs.tbsobj!=null&&Bs.tbsobj!=null||(Bs.tbsobj=new Cs(Bs)),Bs.sighex==null&&Bs.cakey!=null&&this.sign(),Bs.sighex==null)throw new Error("sighex or cakey parameter not defined");var Ps=[];return Ps.push(Bs.tbsobj),Ps.push(new Ts({name:Bs.sigalg})),Ps.push(new _s({hex:"00"+Bs.sighex})),new Ss({array:Ps}).getEncodedHex()},va!=null&&(this.params=va)},At(u$2.asn1.x509.Certificate,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertificate=function(va){u$2.asn1.x509.TBSCertificate.superclass.constructor.call(this);var _a=u$2.asn1,_s=_a.x509,Ss=_a.DERTaggedObject,Ms=_a.DERInteger,Cs=_a.DERSequence,Ts=_s.AlgorithmIdentifier,Bs=_s.Time,Ps=_s.X500Name,Ls=_s.Extensions,Rs=_s.SubjectPublicKeyInfo;this.params=null,this.setByParam=function($s){this.params=$s},this.getEncodedHex=function(){var $s=[],Fs=this.params;if(Fs.version!=null||Fs.version!=1){var Os=2;Fs.version!=null&&(Os=Fs.version-1);var Gs=new Ss({obj:new Ms({int:Os})});$s.push(Gs)}return $s.push(new Ms(Fs.serial)),$s.push(new Ts({name:Fs.sigalg})),$s.push(new Ps(Fs.issuer)),$s.push(new Cs({array:[new Bs(Fs.notbefore),new Bs(Fs.notafter)]})),$s.push(new Ps(Fs.subject)),$s.push(new Rs(Et.getKey(Fs.sbjpubkey))),Fs.ext!==void 0&&Fs.ext.length>0&&$s.push(new Ss({tag:"a3",obj:new Ls(Fs.ext)})),new u$2.asn1.DERSequence({array:$s}).getEncodedHex()},va!==void 0&&this.setByParam(va)},At(u$2.asn1.x509.TBSCertificate,u$2.asn1.ASN1Object),u$2.asn1.x509.Extensions=function(va){u$2.asn1.x509.Extensions.superclass.constructor.call(this);var _a=u$2.asn1,_s=_a.DERSequence,Ss=_a.x509;this.aParam=[],this.setByParam=function(Ms){this.aParam=Ms},this.getEncodedHex=function(){for(var Ms=[],Cs=0;Cs<this.aParam.length;Cs++){var Ts=this.aParam[Cs],Bs=Ts.extname,Ps=null;if(Ts.extn!=null)Ps=new Ss.PrivateExtension(Ts);else if(Bs=="subjectKeyIdentifier")Ps=new Ss.SubjectKeyIdentifier(Ts);else if(Bs=="keyUsage")Ps=new Ss.KeyUsage(Ts);else if(Bs=="subjectAltName")Ps=new Ss.SubjectAltName(Ts);else if(Bs=="issuerAltName")Ps=new Ss.IssuerAltName(Ts);else if(Bs=="basicConstraints")Ps=new Ss.BasicConstraints(Ts);else if(Bs=="cRLDistributionPoints")Ps=new Ss.CRLDistributionPoints(Ts);else if(Bs=="certificatePolicies")Ps=new Ss.CertificatePolicies(Ts);else if(Bs=="authorityKeyIdentifier")Ps=new Ss.AuthorityKeyIdentifier(Ts);else if(Bs=="extKeyUsage")Ps=new Ss.ExtKeyUsage(Ts);else if(Bs=="authorityInfoAccess")Ps=new Ss.AuthorityInfoAccess(Ts);else if(Bs=="cRLNumber")Ps=new Ss.CRLNumber(Ts);else if(Bs=="cRLReason")Ps=new Ss.CRLReason(Ts);else if(Bs=="ocspNonce")Ps=new Ss.OCSPNonce(Ts);else if(Bs=="ocspNoCheck")Ps=new Ss.OCSPNoCheck(Ts);else if(Bs=="adobeTimeStamp")Ps=new Ss.AdobeTimeStamp(Ts);else{if(Bs!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(Ts));Ps=new Ss.SubjectDirectoryAttributes(Ts)}Ps!=null&&Ms.push(Ps)}return new _s({array:Ms}).getEncodedHex()},va!=null&&this.setByParam(va)},At(u$2.asn1.x509.Extensions,u$2.asn1.ASN1Object),u$2.asn1.x509.Extension=function(va){u$2.asn1.x509.Extension.superclass.constructor.call(this);var _a=u$2.asn1,_s=_a.DERObjectIdentifier,Ss=_a.DEROctetString;_a.DERBitString;var Ms=_a.DERBoolean,Cs=_a.DERSequence;this.getEncodedHex=function(){var Ts=new _s({oid:this.oid}),Bs=new Ss({hex:this.getExtnValueHex()}),Ps=new Array;return Ps.push(Ts),this.critical&&Ps.push(new Ms),Ps.push(Bs),new Cs({array:Ps}).getEncodedHex()},this.critical=!1,va!==void 0&&va.critical!==void 0&&(this.critical=va.critical)},At(u$2.asn1.x509.Extension,u$2.asn1.ASN1Object),u$2.asn1.x509.KeyUsage=function(va){u$2.asn1.x509.KeyUsage.superclass.constructor.call(this,va);var _a=Mt.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",va!==void 0&&(va.bin!==void 0&&(this.asn1ExtnValue=new u$2.asn1.DERBitString(va)),va.names!==void 0&&va.names.length!==void 0)){for(var _s=va.names,Ss="000000000",Ms=0;Ms<_s.length;Ms++)for(var Cs=0;Cs<_a.length;Cs++)_s[Ms]===_a[Cs]&&(Ss=Ss.substring(0,Cs)+"1"+Ss.substring(Cs+1,Ss.length));this.asn1ExtnValue=new u$2.asn1.DERBitString({bin:Ss})}},At(u$2.asn1.x509.KeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.BasicConstraints=function(va){u$2.asn1.x509.BasicConstraints.superclass.constructor.call(this,va);var _a=u$2.asn1,_s=_a.DERBoolean,Ss=_a.DERInteger,Ms=_a.DERSequence;this.getExtnValueHex=function(){var Cs=new Array;this.cA&&Cs.push(new _s),this.pathLen>-1&&Cs.push(new Ss({int:this.pathLen}));var Ts=new Ms({array:Cs});return this.asn1ExtnValue=Ts,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,va!==void 0&&(va.cA!==void 0&&(this.cA=va.cA),va.pathLen!==void 0&&(this.pathLen=va.pathLen))},At(u$2.asn1.x509.BasicConstraints,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLDistributionPoints=function(va){u$2.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,va);var _a=u$2.asn1,_s=_a.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(Ss){for(var Ms=[],Cs=0;Cs<Ss.length;Cs++)if(Ss[Cs]instanceof u$2.asn1.ASN1Object)Ms.push(Ss[Cs]);else{var Ts=new _s.DistributionPoint(Ss[Cs]);Ms.push(Ts)}this.asn1ExtnValue=new _a.DERSequence({array:Ms})},this.setByOneURI=function(Ss){var Ms=new _s.DistributionPoint({fulluri:Ss});this.setByDPArray([Ms])},this.oid="2.5.29.31",va!==void 0&&(va.array!==void 0?this.setByDPArray(va.array):va.uri!==void 0&&this.setByOneURI(va.uri))},At(u$2.asn1.x509.CRLDistributionPoints,u$2.asn1.x509.Extension),u$2.asn1.x509.DistributionPoint=function(va){u$2.asn1.x509.DistributionPoint.superclass.constructor.call(this);var _a=u$2.asn1,_s=_a.x509.DistributionPointName;this.getEncodedHex=function(){var Ss=new _a.DERSequence;if(this.asn1DP!=null){var Ms=new _a.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});Ss.appendASN1Object(Ms)}return this.hTLV=Ss.getEncodedHex(),this.hTLV},va!==void 0&&(va.dpobj!==void 0?this.asn1DP=va.dpobj:va.dpname!==void 0?this.asn1DP=new _s(va.dpname):va.fulluri!==void 0&&(this.asn1DP=new _s({full:[{uri:va.fulluri}]})))},At(u$2.asn1.x509.DistributionPoint,u$2.asn1.ASN1Object),u$2.asn1.x509.DistributionPointName=function(va){u$2.asn1.x509.DistributionPointName.superclass.constructor.call(this);var _a=u$2.asn1,_s=_a.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new _s({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},va!==void 0)if(_a.x509.GeneralNames.prototype.isPrototypeOf(va))this.type="full",this.tag="a0",this.asn1V=va;else{if(va.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new _a.x509.GeneralNames(va.full)}},At(u$2.asn1.x509.DistributionPointName,u$2.asn1.ASN1Object),u$2.asn1.x509.CertificatePolicies=function(va){u$2.asn1.x509.CertificatePolicies.superclass.constructor.call(this,va);var _a=u$2.asn1,_s=_a.x509,Ss=_a.DERSequence,Ms=_s.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var Cs=[],Ts=0;Ts<this.params.array.length;Ts++)Cs.push(new Ms(this.params.array[Ts]));var Bs=new Ss({array:Cs});return this.asn1ExtnValue=Bs,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",va!==void 0&&(this.params=va)},At(u$2.asn1.x509.CertificatePolicies,u$2.asn1.x509.Extension),u$2.asn1.x509.PolicyInformation=function(va){u$2.asn1.x509.PolicyInformation.superclass.constructor.call(this,va);var _a=u$2.asn1,_s=_a.DERSequence,Ss=_a.DERObjectIdentifier,Ms=_a.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var Cs=[new Ss(this.params.policyoid)];if(this.params.array!==void 0){for(var Ts=[],Bs=0;Bs<this.params.array.length;Bs++)Ts.push(new Ms(this.params.array[Bs]));Ts.length>0&&Cs.push(new _s({array:Ts}))}return new _s({array:Cs}).getEncodedHex()},va!==void 0&&(this.params=va)},At(u$2.asn1.x509.PolicyInformation,u$2.asn1.ASN1Object),u$2.asn1.x509.PolicyQualifierInfo=function(va){u$2.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,va);var _a=u$2.asn1,_s=_a.DERSequence,Ss=_a.DERIA5String,Ms=_a.DERObjectIdentifier,Cs=_a.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new _s({array:[new Ms({oid:"1.3.6.1.5.5.7.2.1"}),new Ss({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new _s({array:[new Ms({oid:"1.3.6.1.5.5.7.2.2"}),new Cs(this.params.unotice)]}).getEncodedHex():void 0},va!==void 0&&(this.params=va)},At(u$2.asn1.x509.PolicyQualifierInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.UserNotice=function(va){u$2.asn1.x509.UserNotice.superclass.constructor.call(this,va);var _a=u$2.asn1.DERSequence;u$2.asn1.DERInteger;var _s=u$2.asn1.x509.DisplayText,Ss=u$2.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var Ms=[];return this.params.noticeref!==void 0&&Ms.push(new Ss(this.params.noticeref)),this.params.exptext!==void 0&&Ms.push(new _s(this.params.exptext)),new _a({array:Ms}).getEncodedHex()},va!==void 0&&(this.params=va)},At(u$2.asn1.x509.UserNotice,u$2.asn1.ASN1Object),u$2.asn1.x509.NoticeReference=function(va){u$2.asn1.x509.NoticeReference.superclass.constructor.call(this,va);var _a=u$2.asn1.DERSequence,_s=u$2.asn1.DERInteger,Ss=u$2.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var Ms=[];if(this.params.org!==void 0&&Ms.push(new Ss(this.params.org)),this.params.noticenum!==void 0){for(var Cs=[],Ts=this.params.noticenum,Bs=0;Bs<Ts.length;Bs++)Cs.push(new _s(Ts[Bs]));Ms.push(new _a({array:Cs}))}if(Ms.length==0)throw new Error("parameter is empty");return new _a({array:Ms}).getEncodedHex()},va!==void 0&&(this.params=va)},At(u$2.asn1.x509.NoticeReference,u$2.asn1.ASN1Object),u$2.asn1.x509.DisplayText=function(va){u$2.asn1.x509.DisplayText.superclass.constructor.call(this,va),this.hT="0c",va!==void 0&&(va.type==="ia5"?this.hT="16":va.type==="vis"?this.hT="1a":va.type==="bmp"&&(this.hT="1e"))},At(u$2.asn1.x509.DisplayText,u$2.asn1.DERAbstractString),u$2.asn1.x509.ExtKeyUsage=function(va){u$2.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,va);var _a=u$2.asn1;this.setPurposeArray=function(_s){this.asn1ExtnValue=new _a.DERSequence;for(var Ss=0;Ss<_s.length;Ss++){var Ms=new _a.DERObjectIdentifier(_s[Ss]);this.asn1ExtnValue.appendASN1Object(Ms)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",va!==void 0&&va.array!==void 0&&this.setPurposeArray(va.array)},At(u$2.asn1.x509.ExtKeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityKeyIdentifier=function(va){u$2.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,va);var _a=u$2,_s=_a.asn1,Ss=_s.DERTaggedObject,Ms=_s.x509.GeneralNames;_a.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var Cs=new Array;this.asn1KID&&Cs.push(new Ss({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&Cs.push(new Ss({explicit:!1,tag:"a1",obj:new Ms([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&Cs.push(new Ss({explicit:!1,tag:"82",obj:this.asn1CertSN}));var Ts=new _s.DERSequence({array:Cs});return this.asn1ExtnValue=Ts,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Cs){if(Cs.str!==void 0||Cs.hex!==void 0)this.asn1KID=new u$2.asn1.DEROctetString(Cs);else if(typeof Cs=="object"&&u$2.crypto.Util.isKey(Cs)||typeof Cs=="string"&&Cs.indexOf("BEGIN ")!=-1){var Ts=Cs;typeof Cs=="string"&&(Ts=Et.getKey(Cs));var Bs=Et.getKeyID(Ts);this.asn1KID=new u$2.asn1.DEROctetString({hex:Bs})}},this.setCertIssuerByParam=function(Cs){Cs.str!==void 0||Cs.ldapstr!==void 0||Cs.hex!==void 0||Cs.certsubject!==void 0||Cs.certissuer!==void 0?this.asn1CertIssuer=new u$2.asn1.x509.X500Name(Cs):typeof Cs=="string"&&Cs.indexOf("BEGIN ")!=-1&&Cs.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new u$2.asn1.x509.X500Name({certissuer:Cs}))},this.setCertSNByParam=function(Cs){if(Cs.str!==void 0||Cs.bigint!==void 0||Cs.hex!==void 0)this.asn1CertSN=new u$2.asn1.DERInteger(Cs);else if(typeof Cs=="string"&&Cs.indexOf("BEGIN ")!=-1&&Cs.indexOf("CERTIFICATE")){var Ts=new Mt;Ts.readCertPEM(Cs);var Bs=Ts.getSerialNumberHex();this.asn1CertSN=new u$2.asn1.DERInteger({hex:Bs})}},this.oid="2.5.29.35",va!==void 0&&(va.kid!==void 0&&this.setKIDByParam(va.kid),va.issuer!==void 0&&this.setCertIssuerByParam(va.issuer),va.sn!==void 0&&this.setCertSNByParam(va.sn),va.issuersn!==void 0&&typeof va.issuersn=="string"&&va.issuersn.indexOf("BEGIN ")!=-1&&va.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(va.issuersn),this.setCertIssuerByParam(va.issuersn)))},At(u$2.asn1.x509.AuthorityKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectKeyIdentifier=function(va){u$2.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,va);var _a=u$2.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(_s){if(_s.str!==void 0||_s.hex!==void 0)this.asn1KID=new _a(_s);else if(typeof _s=="object"&&u$2.crypto.Util.isKey(_s)||typeof _s=="string"&&_s.indexOf("BEGIN")!=-1){var Ss=_s;typeof _s=="string"&&(Ss=Et.getKey(_s));var Ms=Et.getKeyID(Ss);this.asn1KID=new u$2.asn1.DEROctetString({hex:Ms})}},this.oid="2.5.29.14",va!==void 0&&va.kid!==void 0&&this.setKIDByParam(va.kid)},At(u$2.asn1.x509.SubjectKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityInfoAccess=function(va){u$2.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,va),this.setAccessDescriptionArray=function(_a){for(var _s=new Array,Ss=u$2.asn1,Ms=Ss.DERSequence,Cs=Ss.DERObjectIdentifier,Ts=Ss.x509.GeneralName,Bs=0;Bs<_a.length;Bs++){var Ps,Ls=_a[Bs];if(Ls.ocsp!==void 0)Ps=new Ms({array:[new Cs({oid:"1.3.6.1.5.5.7.48.1"}),new Ts({uri:Ls.ocsp})]});else{if(Ls.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(Ls));Ps=new Ms({array:[new Cs({oid:"1.3.6.1.5.5.7.48.2"}),new Ts({uri:Ls.caissuer})]})}_s.push(Ps)}this.asn1ExtnValue=new Ms({array:_s})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",va!==void 0&&va.array!==void 0&&this.setAccessDescriptionArray(va.array)},At(u$2.asn1.x509.AuthorityInfoAccess,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectAltName=function(va){u$2.asn1.x509.SubjectAltName.superclass.constructor.call(this,va),this.setNameArray=function(_a){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(_a)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",va!==void 0&&va.array!==void 0&&this.setNameArray(va.array)},At(u$2.asn1.x509.SubjectAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.IssuerAltName=function(va){u$2.asn1.x509.IssuerAltName.superclass.constructor.call(this,va),this.setNameArray=function(_a){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(_a)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",va!==void 0&&va.array!==void 0&&this.setNameArray(va.array)},At(u$2.asn1.x509.IssuerAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectDirectoryAttributes=function(va){u$2.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,va);var _a=u$2.asn1,_s=_a.DERSequence,Ss=_a.ASN1Util.newObject,Ms=_a.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var Cs=[],Ts=0;Ts<this.params.array.length;Ts++){var Bs=this.params.array[Ts],Ps={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(Bs.attr=="dateOfBirth")Ps.seq[0].oid=Ms(Bs.attr),Ps.seq[1].set[0]={gentime:Bs.str};else if(Bs.attr=="placeOfBirth")Ps.seq[0].oid=Ms(Bs.attr),Ps.seq[1].set[0]={utf8str:Bs.str};else if(Bs.attr=="gender")Ps.seq[0].oid=Ms(Bs.attr),Ps.seq[1].set[0]={prnstr:Bs.str};else if(Bs.attr=="countryOfCitizenship")Ps.seq[0].oid=Ms(Bs.attr),Ps.seq[1].set[0]={prnstr:Bs.str};else{if(Bs.attr!="countryOfResidence")throw new Error("unsupported attribute: "+Bs.attr);Ps.seq[0].oid=Ms(Bs.attr),Ps.seq[1].set[0]={prnstr:Bs.str}}Cs.push(new Ss(Ps))}var Ls=new _s({array:Cs});return this.asn1ExtnValue=Ls,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",va!==void 0&&(this.params=va)},At(u$2.asn1.x509.SubjectDirectoryAttributes,u$2.asn1.x509.Extension),u$2.asn1.x509.PrivateExtension=function(va){u$2.asn1.x509.PrivateExtension.superclass.constructor.call(this,va);var _a=u$2,_s=_a.lang.String.isHex,Ss=_a.asn1,Ms=Ss.x509.OID.name2oid,Cs=Ss.ASN1Util.newObject;this.params=null,this.setByParam=function(Ts){this.oid=Ms(Ts.extname),this.params=Ts},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var Ts=this.params.extn;if(typeof Ts=="string"&&_s(Ts))return Ts;if(typeof Ts=="object")try{return Cs(Ts).getEncodedHex()}catch{}throw new Error("unsupported extn value")},va!=null&&this.setByParam(va)},At(u$2.asn1.x509.PrivateExtension,u$2.asn1.x509.Extension),u$2.asn1.x509.CRL=function(va){u$2.asn1.x509.CRL.superclass.constructor.call(this);var _a=u$2.asn1,_s=_a.DERSequence,Ss=_a.DERBitString,Ms=_a.x509,Cs=Ms.AlgorithmIdentifier,Ts=Ms.TBSCertList;this.params=void 0,this.setByParam=function(Bs){this.params=Bs},this.sign=function(){var Bs=new Ts(this.params).getEncodedHex(),Ps=new u$2.crypto.Signature({alg:this.params.sigalg});Ps.init(this.params.cakey),Ps.updateHex(Bs);var Ls=Ps.sign();this.params.sighex=Ls},this.getPEM=function(){return at(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var Bs=this.params;if(Bs.tbsobj==null&&(Bs.tbsobj=new Ts(Bs)),Bs.sighex==null&&Bs.cakey!=null&&this.sign(),Bs.sighex==null)throw new Error("sighex or cakey parameter not defined");var Ps=[];return Ps.push(Bs.tbsobj),Ps.push(new Cs({name:Bs.sigalg})),Ps.push(new Ss({hex:"00"+Bs.sighex})),new _s({array:Ps}).getEncodedHex()},va!=null&&(this.params=va)},At(u$2.asn1.x509.CRL,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertList=function(va){u$2.asn1.x509.TBSCertList.superclass.constructor.call(this);var _a=u$2.asn1,_s=_a.DERInteger,Ss=_a.DERSequence,Ms=_a.DERTaggedObject;_a.DERObjectIdentifier;var Cs=_a.x509,Ts=Cs.AlgorithmIdentifier,Bs=Cs.Time,Ps=Cs.Extensions,Ls=Cs.X500Name;this.params=null,this.setByParam=function(Rs){this.params=Rs},this.getRevCertSequence=function(){for(var Rs=[],$s=this.params.revcert,Fs=0;Fs<$s.length;Fs++){var Os=[new _s($s[Fs].sn),new Bs($s[Fs].date)];$s[Fs].ext!=null&&Os.push(new Ps($s[Fs].ext)),Rs.push(new Ss({array:Os}))}return new Ss({array:Rs})},this.getEncodedHex=function(){var Rs=[],$s=this.params;if($s.version!=null){var Fs=$s.version-1,Os=new _s({int:Fs});Rs.push(Os)}if(Rs.push(new Ts({name:$s.sigalg})),Rs.push(new Ls($s.issuer)),Rs.push(new Bs($s.thisupdate)),$s.nextupdate!=null&&Rs.push(new Bs($s.nextupdate)),$s.revcert!=null&&Rs.push(this.getRevCertSequence()),$s.ext!=null){var Gs=new Ps($s.ext);Rs.push(new Ms({tag:"a0",explicit:!0,obj:Gs}))}return new Ss({array:Rs}).getEncodedHex()},va!==void 0&&this.setByParam(va)},At(u$2.asn1.x509.TBSCertList,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLEntry=function(va){u$2.asn1.x509.CRLEntry.superclass.constructor.call(this);var _a=u$2.asn1;this.setCertSerial=function(_s){this.sn=new _a.DERInteger(_s)},this.setRevocationDate=function(_s){this.time=new _a.x509.Time(_s)},this.getEncodedHex=function(){var _s=new _a.DERSequence({array:[this.sn,this.time]});return this.TLV=_s.getEncodedHex(),this.TLV},va!==void 0&&(va.time!==void 0&&this.setRevocationDate(va.time),va.sn!==void 0&&this.setCertSerial(va.sn))},At(u$2.asn1.x509.CRLEntry,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLNumber=function(va){u$2.asn1.x509.CRLNumber.superclass.constructor.call(this,va),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",va!=null&&(this.params=va)},At(u$2.asn1.x509.CRLNumber,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLReason=function(va){u$2.asn1.x509.CRLReason.superclass.constructor.call(this,va),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",va!=null&&(this.params=va)},At(u$2.asn1.x509.CRLReason,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNonce=function(va){u$2.asn1.x509.OCSPNonce.superclass.constructor.call(this,va),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",va!=null&&(this.params=va)},At(u$2.asn1.x509.OCSPNonce,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNoCheck=function(va){u$2.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,va),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",va!=null&&(this.params=va)},At(u$2.asn1.x509.OCSPNoCheck,u$2.asn1.x509.Extension),u$2.asn1.x509.AdobeTimeStamp=function(va){u$2.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,va);var _a=u$2.asn1,_s=_a.DERInteger,Ss=_a.DERBoolean,Ms=_a.DERSequence,Cs=_a.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var Ts=this.params,Bs=[new _s(1)];return Bs.push(new Cs({uri:Ts.uri})),Ts.reqauth!=null&&Bs.push(new Ss(Ts.reqauth)),this.asn1ExtnValue=new Ms({array:Bs}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",va!==void 0&&this.setByParam(va)},At(u$2.asn1.x509.AdobeTimeStamp,u$2.asn1.x509.Extension),u$2.asn1.x509.X500Name=function(va){u$2.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var _a=u$2.asn1,_s=_a.x509,Ss=_s.RDN;this.setByString=function(Ms,Cs){Cs!==void 0&&(this.sRule=Cs);var Ts=Ms.split("/");Ts.shift();for(var Bs=[],Ps=0;Ps<Ts.length;Ps++)if(Ts[Ps].match(/^[^=]+=.+$/))Bs.push(Ts[Ps]);else{var Ls=Bs.length-1;Bs[Ls]=Bs[Ls]+"/"+Ts[Ps]}for(Ps=0;Ps<Bs.length;Ps++)this.asn1Array.push(new Ss({str:Bs[Ps],rule:this.sRule}))},this.setByLdapString=function(Ms,Cs){Cs!==void 0&&(this.sRule=Cs);var Ts=_s.X500Name.ldapToCompat(Ms);this.setByString(Ts,Cs)},this.setByObject=function(Ms,Cs){for(var Ts in Cs!==void 0&&(this.sRule=Cs),Ms)if(Ms.hasOwnProperty(Ts)){var Bs=new Ss({str:Ts+"="+Ms[Ts],rule:this.sRule});this.asn1Array?this.asn1Array.push(Bs):this.asn1Array=[Bs]}},this.setByParam=function(Ms){var Cs;Ms.rule!==void 0&&(this.sRule=Ms.rule),Ms.array!==void 0?this.paramArray=Ms.array:Ms.str!==void 0?this.setByString(Ms.str):Ms.ldapstr!==void 0?this.setByLdapString(Ms.ldapstr):Ms.hex!==void 0?this.hTLV=Ms.hex:Ms.certissuer!==void 0?((Cs=new Mt).readCertPEM(Ms.certissuer),this.hTLV=Cs.getIssuerHex()):Ms.certsubject!==void 0?((Cs=new Mt).readCertPEM(Ms.certsubject),this.hTLV=Cs.getSubjectHex()):typeof Ms=="object"&&Ms.certsubject===void 0&&Ms.certissuer===void 0&&this.setByObject(Ms)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Ms=0;Ms<this.paramArray.length;Ms++){var Cs={array:this.paramArray[Ms]};this.sRule!="utf8"&&(Cs.rule=this.sRule);var Ts=new Ss(Cs);this.asn1Array.push(Ts)}var Bs=new _a.DERSequence({array:this.asn1Array});return this.hTLV=Bs.getEncodedHex(),this.hTLV},va!==void 0&&this.setByParam(va)},At(u$2.asn1.x509.X500Name,u$2.asn1.ASN1Object),u$2.asn1.x509.X500Name.compatToLDAP=function(va){if(va.substr(0,1)!=="/")throw"malformed input";var _a=(va=va.substr(1)).split("/");return _a.reverse(),(_a=_a.map(function(_s){return _s.replace(/,/,"\\,")})).join(",")},u$2.asn1.x509.X500Name.onelineToLDAP=function(va){return u$2.asn1.x509.X500Name.compatToLDAP(va)},u$2.asn1.x509.X500Name.ldapToCompat=function(va){for(var _a=va.split(","),_s=!1,Ss=[],Ms=0;_a.length>0;Ms++){var Cs=_a.shift();if(_s===!0){var Ts=(Ss.pop()+","+Cs).replace(/\\,/g,",");Ss.push(Ts),_s=!1}else Ss.push(Cs);Cs.substr(-1,1)==="\\"&&(_s=!0)}return(Ss=Ss.map(function(Bs){return Bs.replace("/","\\/")})).reverse(),"/"+Ss.join("/")},u$2.asn1.x509.X500Name.ldapToOneline=function(va){return u$2.asn1.x509.X500Name.ldapToCompat(va)},u$2.asn1.x509.RDN=function(va){u$2.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var _a=u$2.asn1.x509.AttributeTypeAndValue;this.setByParam=function(_s){_s.rule!==void 0&&(this.sRule=_s.rule),_s.str!==void 0&&this.addByMultiValuedString(_s.str),_s.array!==void 0&&(this.paramArray=_s.array)},this.addByString=function(_s){this.asn1Array.push(new u$2.asn1.x509.AttributeTypeAndValue({str:_s,rule:this.sRule}))},this.addByMultiValuedString=function(_s){for(var Ss=u$2.asn1.x509.RDN.parseString(_s),Ms=0;Ms<Ss.length;Ms++)this.addByString(Ss[Ms])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var _s=0;_s<this.paramArray.length;_s++){var Ss=this.paramArray[_s];Ss.rule!==void 0&&this.sRule!="utf8"&&(Ss.rule=this.sRule);var Ms=new _a(Ss);this.asn1Array.push(Ms)}var Cs=new u$2.asn1.DERSet({array:this.asn1Array});return this.TLV=Cs.getEncodedHex(),this.TLV},va!==void 0&&this.setByParam(va)},At(u$2.asn1.x509.RDN,u$2.asn1.ASN1Object),u$2.asn1.x509.RDN.parseString=function(va){for(var _a=va.split(/\+/),_s=!1,Ss=[],Ms=0;_a.length>0;Ms++){var Cs=_a.shift();if(_s===!0){var Ts=(Ss.pop()+"+"+Cs).replace(/\\\+/g,"+");Ss.push(Ts),_s=!1}else Ss.push(Cs);Cs.substr(-1,1)==="\\"&&(_s=!0)}var Bs=!1,Ps=[];for(Ms=0;Ss.length>0;Ms++){if(Cs=Ss.shift(),Bs===!0){var Ls=Ps.pop();Cs.match(/"$/)?(Ts=(Ls+"+"+Cs).replace(/^([^=]+)="(.*)"$/,"$1=$2"),Ps.push(Ts),Bs=!1):Ps.push(Ls+"+"+Cs)}else Ps.push(Cs);Cs.match(/^[^=]+="/)&&(Bs=!0)}return Ps},u$2.asn1.x509.AttributeTypeAndValue=function(va){u$2.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var _a=u$2,_s=_a.asn1,Ss=_s.DERSequence,Ms=_s.DERUTF8String,Cs=_s.DERPrintableString,Ts=_s.DERTeletexString,Bs=_s.DERIA5String,Ps=_s.DERVisibleString,Ls=_s.DERBMPString,Rs=_a.lang.String.isMail,$s=_a.lang.String.isPrintable;this.setByParam=function(Fs){if(Fs.rule!==void 0&&(this.sRule=Fs.rule),Fs.ds!==void 0&&(this.dsType=Fs.ds),Fs.value===void 0&&Fs.str!==void 0){var Os=Fs.str.match(/^([^=]+)=(.+)$/);if(!Os)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=Os[1],this.sValue=Os[2]}else this.sType=Fs.type,this.sValue=Fs.value},this.setByString=function(Fs,Os){Os!==void 0&&(this.sRule=Os);var Gs=Fs.match(/^([^=]+)=(.+)$/);if(!Gs)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(Gs[1],Gs[2])},this._getDsType=function(){var Fs=this.sType,Os=this.sValue,Gs=this.sRule;return Gs==="prn"?Fs=="CN"&&Rs(Os)?"ia5":$s(Os)?"prn":"utf8":Gs==="utf8"?Fs=="CN"&&Rs(Os)?"ia5":Fs=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(Fs,Os,Gs){Gs!==void 0&&(this.sRule=Gs),this.sType=Fs,this.sValue=Os},this.getValueObj=function(Fs,Os){if(Fs=="utf8")return new Ms({str:Os});if(Fs=="prn")return new Cs({str:Os});if(Fs=="tel")return new Ts({str:Os});if(Fs=="ia5")return new Bs({str:Os});if(Fs=="vis")return new Ps({str:Os});if(Fs=="bmp")return new Ls({str:Os});throw new Error("unsupported directory string type: type="+Fs+" value="+Os)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var Fs=u$2.asn1.x509.OID.atype2obj(this.sType),Os=this.getValueObj(this.dsType,this.sValue),Gs=new Ss({array:[Fs,Os]});return this.TLV=Gs.getEncodedHex(),this.TLV},va!==void 0&&this.setByParam(va)},At(u$2.asn1.x509.AttributeTypeAndValue,u$2.asn1.ASN1Object),u$2.asn1.x509.SubjectPublicKeyInfo=function(va){u$2.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var _a=u$2,_s=_a.asn1,Ss=_s.DERInteger,Ms=_s.DERBitString,Cs=_s.DERObjectIdentifier,Ts=_s.DERSequence,Bs=_s.ASN1Util.newObject,Ps=_s.x509.AlgorithmIdentifier,Ls=_a.crypto;Ls.ECDSA,Ls.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new Ts({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var Rs=this.getASN1Object();return this.hTLV=Rs.getEncodedHex(),this.hTLV},this.setPubKey=function(Rs){try{if(Rs instanceof X$1){var $s=Bs({seq:[{int:{bigint:Rs.n}},{int:{int:Rs.e}}]}).getEncodedHex();this.asn1AlgId=new Ps({name:"rsaEncryption"}),this.asn1SubjPKey=new Ms({hex:"00"+$s})}}catch{}try{if(Rs instanceof u$2.crypto.ECDSA){var Fs=new Cs({name:Rs.curveName});this.asn1AlgId=new Ps({name:"ecPublicKey",asn1params:Fs}),this.asn1SubjPKey=new Ms({hex:"00"+Rs.pubKeyHex})}}catch{}try{if(Rs instanceof u$2.crypto.DSA){Fs=new Bs({seq:[{int:{bigint:Rs.p}},{int:{bigint:Rs.q}},{int:{bigint:Rs.g}}]}),this.asn1AlgId=new Ps({name:"dsa",asn1params:Fs});var Os=new Ss({bigint:Rs.y});this.asn1SubjPKey=new Ms({hex:"00"+Os.getEncodedHex()})}}catch{}},va!==void 0&&this.setPubKey(va)},At(u$2.asn1.x509.SubjectPublicKeyInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.Time=function(va){u$2.asn1.x509.Time.superclass.constructor.call(this);var _a=u$2.asn1,_s=_a.DERUTCTime,Ss=_a.DERGeneralizedTime;this.setTimeParams=function(Ms){this.timeParams=Ms},this.getEncodedHex=function(){var Ms=null;return Ms=this.timeParams!=null?this.type=="utc"?new _s(this.timeParams):new Ss(this.timeParams):this.type=="utc"?new _s:new Ss,this.TLV=Ms.getEncodedHex(),this.TLV},this.type="utc",va!==void 0&&(va.type!==void 0?this.type=va.type:va.str!==void 0&&(va.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),va.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=va)},At(u$2.asn1.x509.Time,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier=function(va){u$2.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var _a=u$2.asn1,_s=_a.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var Ms=null;for(var Cs in _s)Cs===this.nameAlg&&(Ms=_s[Cs]);if(Ms!==null)return this.hTLV=Ms,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=_a.x509.OID.name2obj(this.nameAlg));var Ts=[this.asn1Alg];this.asn1Params!==null&&Ts.push(this.asn1Params);var Bs=new _a.DERSequence({array:Ts});return this.hTLV=Bs.getEncodedHex(),this.hTLV},va!==void 0&&(va.name!==void 0&&(this.nameAlg=va.name),va.asn1params!==void 0&&(this.asn1Params=va.asn1params),va.paramempty!==void 0&&(this.paramEmpty=va.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var Ss=this.nameAlg.toLowerCase();Ss.substr(-7,7)!=="withdsa"&&Ss.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new _a.DERNull)}},At(u$2.asn1.x509.AlgorithmIdentifier,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},u$2.asn1.x509.GeneralName=function(va){u$2.asn1.x509.GeneralName.superclass.constructor.call(this);var _a={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},_s=u$2.asn1;_s.DERSequence;var Ss=_s.DEROctetString,Ms=_s.DERIA5String,Cs=_s.DERTaggedObject,Ts=_s.ASN1Object,Bs=_s.x509.X500Name,Ps=ut;this.explicit=!1,this.setByParam=function(Ls){var Rs=null;if(Ls!==void 0){if(Ls.rfc822!==void 0&&(this.type="rfc822",Rs=new Ms({str:Ls[this.type]})),Ls.dns!==void 0&&(this.type="dns",Rs=new Ms({str:Ls[this.type]})),Ls.uri!==void 0&&(this.type="uri",Rs=new Ms({str:Ls[this.type]})),Ls.dn!==void 0&&(this.type="dn",this.explicit=!0,Rs=typeof Ls.dn=="string"?new Bs({str:Ls.dn}):Ls.dn instanceof u$2.asn1.x509.X500Name?Ls.dn:new Bs(Ls.dn)),Ls.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,Rs=new Bs({ldapstr:Ls.ldapdn})),Ls.certissuer!==void 0){this.type="dn",this.explicit=!0;var $s=null;if((Os=Ls.certissuer).match(/^[0-9A-Fa-f]+$/),Os.indexOf("-----BEGIN ")!=-1&&($s=Ps(Os)),$s==null)throw"certissuer param not cert";(Gs=new Mt).hex=$s;var Fs=Gs.getIssuerHex();(Rs=new Ts).hTLV=Fs}if(Ls.certsubj!==void 0){this.type="dn",this.explicit=!0;var Os,Gs;if($s=null,(Os=Ls.certsubj).match(/^[0-9A-Fa-f]+$/),Os.indexOf("-----BEGIN ")!=-1&&($s=Ps(Os)),$s==null)throw"certsubj param not cert";(Gs=new Mt).hex=$s,Fs=Gs.getSubjectHex(),(Rs=new Ts).hTLV=Fs}if(Ls.ip!==void 0){this.type="ip",this.explicit=!1;var Ns,Vs=Ls.ip,Ds="malformed IP address";if(Vs.match(/^[0-9.]+[.][0-9.]+$/)){if((Ns=function(ks){ks=(ks=(ks=ks.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return ks.split(/,/).map(function(Us,zs,Ws){var qs=parseInt(Us);if(qs<0||255<qs)throw"integer not in range 0-255";return("00"+qs.toString(16)).slice(-2)}).join("")}catch(Us){throw"malformed integer array string: "+Us}}("["+Vs.split(".").join(",")+"]")).length!==8)throw Ds}else if(Vs.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))Ns=function(ks){var Us="malformed IPv6 address";if(!ks.match(/^[0-9A-Fa-f:]+$/))throw Us;var zs=(ks=ks.toLowerCase()).split(":").length-1;if(zs<2)throw Us;var Ws=":".repeat(7-zs+2),qs=(ks=ks.replace("::",Ws)).split(":");if(qs.length!=8)throw Us;for(var Zs=0;Zs<8;Zs++)qs[Zs]=("0000"+qs[Zs]).slice(-4);return qs.join("")}(Vs);else{if(!Vs.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Ds;Ns=Vs}Rs=new Ss({hex:Ns})}if(this.type==null)throw"unsupported type in params="+Ls;this.asn1Obj=new Cs({explicit:this.explicit,tag:_a[this.type],obj:Rs})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},va!==void 0&&this.setByParam(va)},At(u$2.asn1.x509.GeneralName,u$2.asn1.ASN1Object),u$2.asn1.x509.GeneralNames=function(va){u$2.asn1.x509.GeneralNames.superclass.constructor.call(this);var _a=u$2.asn1;this.setByParamArray=function(_s){for(var Ss=0;Ss<_s.length;Ss++){var Ms=new _a.x509.GeneralName(_s[Ss]);this.asn1Array.push(Ms)}},this.getEncodedHex=function(){return new _a.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,va!==void 0&&this.setByParamArray(va)},At(u$2.asn1.x509.GeneralNames,u$2.asn1.ASN1Object),u$2.asn1.x509.OID=new function(va){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function(_a){if(this.objCache[_a]!==void 0)return this.objCache[_a];if(this.name2oidList[_a]===void 0)throw"Name of ObjectIdentifier not defined: "+_a;var _s=this.name2oidList[_a],Ss=new u$2.asn1.DERObjectIdentifier({oid:_s});return this.objCache[_a]=Ss,Ss},this.atype2obj=function(_a){if(this.objCache[_a]!==void 0)return this.objCache[_a];var _s;if(_a.match(/^\d+\.\d+\.[0-9.]+$/))_s=_a;else if(this.atype2oidList[_a]!==void 0)_s=this.atype2oidList[_a];else{if(this.name2oidList[_a]===void 0)throw"AttributeType name undefined: "+_a;_s=this.name2oidList[_a]}var Ss=new u$2.asn1.DERObjectIdentifier({oid:_s});return this.objCache[_a]=Ss,Ss}},u$2.asn1.x509.OID.oid2name=function(va){var _a=u$2.asn1.x509.OID.name2oidList;for(var _s in _a)if(_a[_s]==va)return _s;return""},u$2.asn1.x509.OID.oid2atype=function(va){var _a=u$2.asn1.x509.OID.atype2oidList;for(var _s in _a)if(_a[_s]==va)return _s;return va},u$2.asn1.x509.OID.name2oid=function(va){if(va.match(/^[0-9.]+$/))return va;var _a=u$2.asn1.x509.OID.name2oidList;return _a[va]===void 0?"":_a[va]},u$2.asn1.x509.X509Util={},u$2.asn1.x509.X509Util.newCertPEM=function(va){var _a=u$2.asn1.x509;return _a.TBSCertificate,new _a.Certificate(va).getPEM()},X$1.getPosArrayOfChildrenFromHex=function(va){return It.getChildIdx(va,0)},X$1.getHexValueArrayOfChildrenFromHex=function(va){var _a,_s=It.getV,Ss=_s(va,(_a=X$1.getPosArrayOfChildrenFromHex(va))[0]),Ms=_s(va,_a[1]),Cs=_s(va,_a[2]),Ts=_s(va,_a[3]),Bs=_s(va,_a[4]),Ps=_s(va,_a[5]),Ls=_s(va,_a[6]),Rs=_s(va,_a[7]),$s=_s(va,_a[8]);return(_a=new Array).push(Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s),_a},X$1.prototype.readPrivateKeyFromPEMString=function(va){var _a=ut(va),_s=X$1.getHexValueArrayOfChildrenFromHex(_a);this.setPrivateEx(_s[1],_s[2],_s[3],_s[4],_s[5],_s[6],_s[7],_s[8])},X$1.prototype.readPKCS5PrvKeyHex=function(va){var _a=X$1.getHexValueArrayOfChildrenFromHex(va);this.setPrivateEx(_a[1],_a[2],_a[3],_a[4],_a[5],_a[6],_a[7],_a[8])},X$1.prototype.readPKCS8PrvKeyHex=function(va){var _a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls=It,Rs=Ls.getVbyListEx;if(Ls.isASN1HEX(va)===!1)throw new Error("not ASN.1 hex string");try{_a=Rs(va,0,[2,0,1],"02"),_s=Rs(va,0,[2,0,2],"02"),Ss=Rs(va,0,[2,0,3],"02"),Ms=Rs(va,0,[2,0,4],"02"),Cs=Rs(va,0,[2,0,5],"02"),Ts=Rs(va,0,[2,0,6],"02"),Bs=Rs(va,0,[2,0,7],"02"),Ps=Rs(va,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(_a,_s,Ss,Ms,Cs,Ts,Bs,Ps)},X$1.prototype.readPKCS5PubKeyHex=function(va){var _a=It,_s=_a.getV;if(_a.isASN1HEX(va)===!1)throw new Error("keyHex is not ASN.1 hex string");var Ss=_a.getChildIdx(va,0);if(Ss.length!==2||va.substr(Ss[0],2)!=="02"||va.substr(Ss[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var Ms=_s(va,Ss[0]),Cs=_s(va,Ss[1]);this.setPublic(Ms,Cs)},X$1.prototype.readPKCS8PubKeyHex=function(va){var _a=It;if(_a.isASN1HEX(va)===!1)throw new Error("not ASN.1 hex string");if(_a.getTLVbyListEx(va,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var _s=_a.getTLVbyListEx(va,0,[1,0]);this.readPKCS5PubKeyHex(_s)},X$1.prototype.readCertPubKeyHex=function(va,_a){var _s,Ss;(_s=new Mt).readCertHex(va),Ss=_s.getPublicKeyHex(),this.readPKCS8PubKeyHex(Ss)},X$1.prototype.sign=function(va,_a){var _s,Ss=(_s=va,u$2.crypto.Util.hashString(_s,_a));return this.signWithMessageHash(Ss,_a)},X$1.prototype.signWithMessageHash=function(va,_a){var _s=G$2(u$2.crypto.Util.getPaddedDigestInfoHex(va,_a,this.n.bitLength()),16);return Ct(this.doPrivate(_s).toString(16),this.n.bitLength())},X$1.prototype.signPSS=function(va,_a,_s){var Ss,Ms=(Ss=ot(va),u$2.crypto.Util.hashHex(Ss,_a));return _s===void 0&&(_s=-1),this.signWithMessageHashPSS(Ms,_a,_s)},X$1.prototype.signWithMessageHashPSS=function(va,_a,_s){var Ss,Ms=rt(va),Cs=Ms.length,Ts=this.n.bitLength()-1,Bs=Math.ceil(Ts/8),Ps=function(Vs){return u$2.crypto.Util.hashHex(Vs,_a)};if(_s===-1||_s===void 0)_s=Cs;else if(_s===-2)_s=Bs-Cs-2;else if(_s<-2)throw new Error("invalid salt length");if(Bs<Cs+_s+2)throw new Error("data too long");var Ls="";_s>0&&(Ls=new Array(_s),new U().nextBytes(Ls),Ls=String.fromCharCode.apply(String,Ls));var Rs=rt(Ps(ot("\0\0\0\0\0\0\0\0"+Ms+Ls))),$s=[];for(Ss=0;Ss<Bs-_s-Cs-2;Ss+=1)$s[Ss]=0;var Fs=String.fromCharCode.apply(String,$s)+""+Ls,Os=St(Rs,Fs.length,Ps),Gs=[];for(Ss=0;Ss<Fs.length;Ss+=1)Gs[Ss]=Fs.charCodeAt(Ss)^Os.charCodeAt(Ss);var Ns=65280>>8*Bs-Ts&255;for(Gs[0]&=~Ns,Ss=0;Ss<Cs;Ss++)Gs.push(Rs.charCodeAt(Ss));return Gs.push(188),Ct(this.doPrivate(new c$3(Gs)).toString(16),this.n.bitLength())},X$1.prototype.verify=function(va,_a){if((_a=_a.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var _s=G$2(_a,16),Ss=this.n.bitLength();if(_s.bitLength()>Ss)return!1;var Ms=this.doPublic(_s).toString(16);if(Ms.length+3!=Ss/4)return!1;var Cs=Bt(Ms.replace(/^1f+00/,""));if(Cs.length==0)return!1;var Ts,Bs=Cs[0];return Cs[1]==(Ts=va,u$2.crypto.Util.hashString(Ts,Bs))},X$1.prototype.verifyWithMessageHash=function(va,_a){if(_a.length!=Math.ceil(this.n.bitLength()/4))return!1;var _s=G$2(_a,16);if(_s.bitLength()>this.n.bitLength())return 0;var Ss=Bt(this.doPublic(_s).toString(16).replace(/^1f+00/,""));return Ss.length!=0&&(Ss[0],Ss[1]==va)},X$1.prototype.verifyPSS=function(va,_a,_s,Ss){var Ms=function(Cs){return u$2.crypto.Util.hashHex(Cs,_s)}(ot(va));return Ss===void 0&&(Ss=-1),this.verifyWithMessageHashPSS(Ms,_a,_s,Ss)},X$1.prototype.verifyWithMessageHashPSS=function(va,_a,_s,Ss){if(_a.length!=Math.ceil(this.n.bitLength()/4))return!1;var Ms,Cs=new c$3(_a,16),Ts=function(ks){return u$2.crypto.Util.hashHex(ks,_s)},Bs=rt(va),Ps=Bs.length,Ls=this.n.bitLength()-1,Rs=Math.ceil(Ls/8);if(Ss===-1||Ss===void 0)Ss=Ps;else if(Ss===-2)Ss=Rs-Ps-2;else if(Ss<-2)throw new Error("invalid salt length");if(Rs<Ps+Ss+2)throw new Error("data too long");var $s=this.doPublic(Cs).toByteArray();for(Ms=0;Ms<$s.length;Ms+=1)$s[Ms]&=255;for(;$s.length<Rs;)$s.unshift(0);if($s[Rs-1]!==188)throw new Error("encoded message does not end in 0xbc");var Fs=($s=String.fromCharCode.apply(String,$s)).substr(0,Rs-Ps-1),Os=$s.substr(Fs.length,Ps),Gs=65280>>8*Rs-Ls&255;if((Fs.charCodeAt(0)&Gs)!=0)throw new Error("bits beyond keysize not zero");var Ns=St(Os,Fs.length,Ts),Vs=[];for(Ms=0;Ms<Fs.length;Ms+=1)Vs[Ms]=Fs.charCodeAt(Ms)^Ns.charCodeAt(Ms);Vs[0]&=~Gs;var Ds=Rs-Ps-Ss-2;for(Ms=0;Ms<Ds;Ms+=1)if(Vs[Ms]!==0)throw new Error("leftmost octets not zero");if(Vs[Ds]!==1)throw new Error("0x01 marker not found");return Os===rt(Ts(ot("\0\0\0\0\0\0\0\0"+Bs+String.fromCharCode.apply(String,Vs.slice(-Ss)))))},X$1.SALT_LEN_HLEN=-1,X$1.SALT_LEN_MAX=-2,X$1.SALT_LEN_RECOVER=-2,Mt.hex2dn=function(va,_a){_a===void 0&&(_a=0);var _s=new Mt;return It.getTLV(va,_a),_s.getX500Name(va).str},Mt.hex2rdn=function(va,_a){if(_a===void 0&&(_a=0),va.substr(_a,2)!=="31")throw new Error("malformed RDN");for(var _s=new Array,Ss=It.getChildIdx(va,_a),Ms=0;Ms<Ss.length;Ms++)_s.push(Mt.hex2attrTypeValue(va,Ss[Ms]));return(_s=_s.map(function(Cs){return Cs.replace("+","\\+")})).join("+")},Mt.hex2attrTypeValue=function(va,_a){var _s=It,Ss=_s.getV;if(_a===void 0&&(_a=0),va.substr(_a,2)!=="30")throw new Error("malformed attribute type and value");var Ms=_s.getChildIdx(va,_a);Ms.length!==2||va.substr(Ms[0],2);var Cs=Ss(va,Ms[0]),Ts=u$2.asn1.ASN1Util.oidHexToInt(Cs);return u$2.asn1.x509.OID.oid2atype(Ts)+"="+rt(Ss(va,Ms[1]))},Mt.getPublicKeyFromCertHex=function(va){var _a=new Mt;return _a.readCertHex(va),_a.getPublicKey()},Mt.getPublicKeyFromCertPEM=function(va){var _a=new Mt;return _a.readCertPEM(va),_a.getPublicKey()},Mt.getPublicKeyInfoPropOfCertPEM=function(va){var _a,_s,Ss=It.getVbyList,Ms={};return Ms.algparam=null,(_a=new Mt).readCertPEM(va),_s=_a.getPublicKeyHex(),Ms.keyhex=Ss(_s,0,[1],"03").substr(2),Ms.algoid=Ss(_s,0,[0,0],"06"),Ms.algoid==="2a8648ce3d0201"&&(Ms.algparam=Ss(_s,0,[0,1],"06")),Ms},Mt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Tt,Qt=[(Tt=new Mt,Tt.readCertPEM(function(){for(var va=[],_a=0;_a<arguments.length;_a++)va[_a]=arguments[_a];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),Tt)];function Rt(va,_a){var _s=va.getIssuerHex();if(_s===va.getSubjectHex())return va.verifySignature(va.getPublicKey());var Ss=function(Ms,Cs){for(var Ts=0,Bs=Cs;Ts<Bs.length;Ts++){var Ps=Bs[Ts];if(Ps.getSubjectHex()===Ms)return Ps}}(_s,_a);return!!Ss&&va.verifySignature(Ss.getPublicKey())!==!1&&Rt(Ss,_a)}function Dt(va){return va.getIssuerHex()!==va.getSubjectHex()&&Rt(va,Qt)}(function(va){var _a=new Mt;typeof va=="string"?_a.readCertPEM(va):_a.readCertHex(va.hex),Dt(_a),Qt.push(_a)})(function(){for(var va=[],_a=0;_a<arguments.length;_a++)va[_a]=arguments[_a];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var kt,Nt=(kt="$$FIVE_EVENT$$",typeof Symbol>"u"?"$Symbol<".concat(kt,">$"):Symbol(kt));function Ft(va){return va[Nt]||(va[Nt]={}),va[Nt]}var Ot=function(){function va(){}return va.prototype.hasListener=function(_a){var _s=Ft(this);return _s&&_s[_a]&&_s[_a].length>0},va.prototype.on=function(_a,_s,Ss){var Ms=this,Cs=Ft(this);return Cs[_a]||(Cs[_a]=[]),Cs[_a].push([_s,Ss||!1]),function(){return Ms.off(_a,_s)}},va.prototype.once=function(_a,_s){return this.on(_a,_s,!0)},va.prototype.off=function(_a,_s){if(_a!==void 0){var Ss,Ms=Ft(this);if(Ms[_a]||(Ms[_a]=[]),_s!==void 0){for(var Cs=0;Cs<Ms[_a].length&&Ms[_a][Cs][0]!==_s;Cs++);Cs<Ms[_a].length&&Ms[_a].splice(Cs,1)}else Ms[_a].length=0}else(Ss=this)[Nt]||delete Ss[Nt]},va.prototype.emit=function(_a){for(var _s=[],Ss=1;Ss<arguments.length;Ss++)_s[Ss-1]=arguments[Ss];for(var Ms=!1,Cs=Ft(this),Ts=Cs[_a]||[],Bs=0,Ps=Ts.slice();Bs<Ps.length;Bs++){var Ls=Ps[Bs],Rs=Ls[0],$s=Ls[1],Fs=$s!==void 0&&$s,Os=Rs.apply(void 0,_s);Fs&&this.off(_a,Rs),Os===!1&&(Ms=!0)}return Ms},va}();function Lt(){for(var va=[],_a=0;_a<arguments.length;_a++)va[_a]=arguments[_a]}var Vt=typeof performance<"u"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),Ht=typeof performance<"u"?function(){return Vt+performance.now()}:function(){return Date.now()};function Kt(va){Object.freeze(va);var _a=typeof va=="function",_s=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(va).forEach(function(Ss){!_s.call(va,Ss)||_a&&(Ss==="caller"||Ss==="callee"||Ss==="arguments")||va[Ss]===null||typeof va[Ss]!="object"&&typeof va[Ss]!="function"||Object.isFrozen(va[Ss])||Kt(va[Ss])}),va}var zt=/^([^.]+)(\.([^.]+))*$/;function qt(va){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(va)}function _t$1(va,_a){return zt.test(va)&&zt.test(_a)&&function(_s,Ss){if(_s==="*")return!0;var Ms=_s.split(".").reverse(),Cs=Ss.split(".").reverse();if(Ms.length<=1)return _s===Ss;for(var Ts=0;Ts<Ms.length;Ts++)if(Ms[Ts]!==Cs[Ts])return!1;return!0}(va,_a)}var jt=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],Ut=Kt(JSON.parse(function(){for(var va=[],_a=0;_a<arguments.length;_a++)va[_a]=arguments[_a];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}("h-/y|pnyu|/9-/xr;p|z/9-/yvn{wvn;p|z/9-/rnyrr;p|z/9-/rnyrr;p{/9-/uv;p|z/9-/uv;p{/9-/ywpq{;p|z/9-/pnyp{|qr;vr/9-/rnyrr;w}/9-/rnyrr:pq{;p|z/-j"))),Gt=function(va){function _a(_s,Ss,Ms){return va.call(this,"[NETWORK]: response error(type: ".concat(Ss,", reason: ").concat(Ms,"): ").concat(_s))||this}return e$3.__extends(_a,va),_a}(Error),Wt=function(va){function _a(_s,Ss,Ms){var Cs=va.call(this,"[NETWORK]: response error(type: ".concat(Ss,", status: ").concat(Ms,"): ").concat(_s))||this;return Cs.httpStatus=Ms,Cs}return e$3.__extends(_a,va),_a}(Error);(function(va){function _a(_s,Ss){return va.call(this,"[NETWORK]: request abort(type: ".concat(Ss,"): ").concat(_s))||this}e$3.__extends(_a,va)})(Error);var Xt=function(va){function _a(_s,Ss,Ms){return va.call(this,"[NETWORK]: request timeout(type: ".concat(Ss,", timeout: ").concat(Ms,"ms): ").concat(_s))||this}return e$3.__extends(_a,va),_a}(Error);function Yt(va){for(var _a=0,_s=jt;_a<_s.length;_a++){var Ss=_s[_a],Ms=va.match(Ss);if(Ms)return"jsonp_"+Ms[1]}return null}function Zt(va){return Yt(va)!==null}function Jt(va){return jt.reduce(function(_a,_s){return _a.replace(_s,"")},va)}function $t(va){var _a=va.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/);return _a?_a[2]:location.hostname}(function(va){function _a(_s,Ss,Ms){return va.call(this,"[NETWORK]: request forbidden(type: ".concat(Ss,", reason: ").concat(Ms,"): ").concat(_s))||this}e$3.__extends(_a,va)})(Error);var te=function(va){function _a(){return va!==null&&va.apply(this,arguments)||this}return e$3.__extends(_a,va),_a}(Ot);function ee(va,_a,_s,Ss,Ms){return _a===void 0&&(_a={}),_s===void 0&&(_s=Lt),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),new Promise(function(Cs,Ts){var Bs,Ps=_a.allowHosts?Ut.concat(_a.allowHosts):Ut.slice(),Ls=$t(va),Rs=Yt(va);if(location.hostname.length!==0&&!qt(location.hostname)&&Ut.filter(function(Hs){return _t$1(Hs,location.hostname)}).length===0&&!qt(Ls)&&Ps.filter(function(Hs){return _t$1(Hs,Ls)}).length===0){var $s=Rs?"Script":"XMLHttpRequest",Fs=new Gt(va,$s,"request host(".concat(Ls,") is not allowed"));return Ss(Fs),Ts(Fs),void((Bs=_a.networkSubscribe)===null||Bs===void 0||Bs.emit("network",va,$s,"forbidden",Fs.message))}if(Rs){var Os=window,Gs=null,Ns=!1,Vs=Ht(),Ds=document.createElement("script");Os[Rs]=function(Hs){var Qs,js,Ks=Ht(),Xs=Ks-Vs;if(delete Os[Rs],Ds.parentNode&&Ds.parentNode.removeChild(Ds),Gs!==null&&(window.clearTimeout(Gs),Gs=null),Ns!==!0){if(Hs.indexOf("data:")!==0){var Ys=new Wt(va,"Script",500);return Ss(Ys),Ts(Ys),void((Qs=_a.networkSubscribe)===null||Qs===void 0||Qs.emit("network",va,"Script","error",Ys.message))}var rl=Hs.split(","),tl=(rl[0].match(/:(.*?);/)||[])[1],il=rl[1];if(_a.responseType==="arraybuffer"||_a.responseType==="blob"){for(var ll=atob(rl[1]),cl=ll.length,al=new Uint8Array(cl),dl=0;dl<cl;dl++)al[dl]=ll.charCodeAt(dl);il=_a.responseType==="arraybuffer"?al.buffer:new Blob([al],{type:tl})}var yl={body:il,meta:{source:va,requestTime:Vs,responseTime:Ks,costs:Xs,headers:{}}};_s(yl),Cs(yl),(js=_a.networkSubscribe)===null||js===void 0||js.emit("network",va,"Script","ok",JSON.stringify(yl.meta)),Ns=!0}},Ds.src=va,document.body.appendChild(Ds),typeof _a.timeout=="number"&&(Gs=window.setTimeout(function(){var Hs;if(Gs=null,Ns!==!0){Ns=!0;var Qs=new Xt(va,"Script",_a.timeout||NaN);Ss(Qs),Ts(Qs),(Hs=_a.networkSubscribe)===null||Hs===void 0||Hs.emit("network",va,"Script","timeout",Qs.message)}},_a.timeout))}else{var ks=Ht(),Us=!1,zs=new XMLHttpRequest,Ws=function(){zs&&(zs.removeEventListener("timeout",qs,!1),zs.removeEventListener("progress",Zs,!1),zs.removeEventListener("load",el,!1),zs.removeEventListener("error",Js,!1)),zs=null,Ws=Lt},qs=function(){var Hs;if(Us!==!0){Us=!0,Ws();var Qs=new Xt(va,"XMLHttpRequest",_a.timeout||NaN);Ss(Qs),Ts(Qs),(Hs=_a.networkSubscribe)===null||Hs===void 0||Hs.emit("network",va,"XMLHttpRequest","timeout",Qs.message)}},Zs=function(Hs){Us!==!0&&Hs.lengthComputable&&(Hs.total<=0||Ms(Hs.loaded/Hs.total))},el=function(Hs){var Qs;if(Us!==!0){var js=this.status;if(js===0||js>=200&&js<400){Us=!0,Ws();var Ks=Ht(),Xs=Ks-ks,Ys=function(il){if(!il)return{};for(var ll={},cl=il.trim().split(`
`),al=0;al<cl.length;al++){var dl=cl[al],yl=dl.indexOf(":"),xl=dl.slice(0,yl).trim().toLowerCase(),wl=dl.slice(yl+1).trim();wl&&(ll[xl]?ll[xl]+=", "+wl:ll[xl]=wl)}return ll}(this.getAllResponseHeaders()),rl=Hs.total,tl={body:this.response,meta:{source:va,requestTime:ks,responseTime:Ks,costs:Xs,headers:Ys,size:rl}};_s(tl),Cs(tl),(Qs=_a.networkSubscribe)===null||Qs===void 0||Qs.emit("network",va,"XMLHttpRequest","ok",JSON.stringify(tl.meta))}else Js.call(this)}},Js=function(){var Hs;if(Us!==!0){Us=!0,Ws();var Qs=new Wt(va,"XMLHttpRequest",this.status);Ss(Qs),Ts(Qs),(Hs=_a.networkSubscribe)===null||Hs===void 0||Hs.emit("network",va,"XMLHttpRequest","error",Qs.message)}};zs.addEventListener("timeout",qs,!1),zs.addEventListener("progress",Zs,!1),zs.addEventListener("load",el,!1),zs.addEventListener("error",Js,!1),_a.responseType&&(zs.responseType=_a.responseType),typeof _a.timeout=="number"&&(zs.timeout=_a.timeout),zs.open("GET",va,!0),zs.send(null)}})}var ie={};function ne(va,_a,_s,Ss,Ms,Cs){return _a===void 0&&(_a={}),_s===void 0&&(_s=Lt),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),new Promise(function(Ts,Bs){var Ps,Ls=_a.allowHosts?Ut.concat(_a.allowHosts):Ut.slice(),Rs=$t(va);if(location.hostname.length!==0&&!qt(location.hostname)&&Ut.filter(function(Vs){return _t$1(Vs,location.hostname)}).length===0&&!qt(Rs)&&Ls.filter(function(Vs){return _t$1(Vs,Rs)}).length===0){var $s=new Gt(va,"Image","request host(".concat(Rs,") is not allowed"));return Ss($s),Bs($s),void((Ps=_a.networkSubscribe)===null||Ps===void 0||Ps.emit("network",va,"Image","forbidden",$s.message))}var Fs=Cs??new Image,Os=Ht(),Gs=!1,Ns=null;typeof _a.timeout=="number"&&(Ns=window.setTimeout(function(){var Vs;if(Fs.onload=Lt,Fs.onerror=Lt,Ns=null,Gs!==!0){Gs=!0;var Ds=new Xt(va,"Image",_a.timeout);Ss(Ds),Bs(Ds),(Vs=_a.networkSubscribe)===null||Vs===void 0||Vs.emit("network",va,"Image","timeout",Ds.message)}},_a.timeout)),Fs.onload=function(){var Vs;if(Fs.onload=Lt,Fs.onerror=Lt,Ns!==null&&(clearTimeout(Ns),Ns=null),Gs!==!0){var Ds=Ht();Gs=!0;var ks={body:Fs,meta:{headers:{},source:va,requestTime:Os,responseTime:Ds,costs:Ds-Os}};Ms(1),_s(ks),Ts(ks),(Vs=_a.networkSubscribe)===null||Vs===void 0||Vs.emit("network",va,"Image","ok",JSON.stringify(ks.meta))}},Fs.onerror=function(){var Vs;if(Fs.onload=Lt,Fs.onerror=Lt,Ns!==null&&(clearTimeout(Ns),Ns=null),Gs!==!0){Gs=!0;var Ds=new Wt(va,"Image",0);Ss(Ds),Bs(Ds),(Vs=_a.networkSubscribe)===null||Vs===void 0||Vs.emit("network",va,"Image","ok",Ds.message)}},Ms(0),Fs.src=va})}var re=function(){if(typeof window<"u"){var va=window;return va.requestAnimationFrame||va.mozRequestAnimationFrame||va.webkitRequestAnimationFrame||va.msRequestAnimationFrame||function(_a){return setTimeout(_a,16)}}return function(_a){return setTimeout(_a,16)}}(),oe=16,se=function(){function va(){this.frames=[],this.stoped=!1,this.time=Ht(),this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(va,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new va),this.sharedInstance},enumerable:!1,configurable:!0}),va.getFrameTime=function(){return oe},va.prototype.loop=function(){if(!this.stoped){var _a=Ht(),_s=_a-this.time;this.time=_a;var Ss=[];oe=_s;for(var Ms=0,Cs=this.frames;Ms<Cs.length;Ms++){var Ts=Cs[Ms];if(Ts.delay>0)Ts.delay=Ts.delay-1;else{try{Ts.callback(_a,_s)}catch(Bs){console.error(Bs)}Ts.once&&Ss.push(Ts)}}Ss.length>0&&(this.frames=this.frames.filter(function(Bs){return Ss.indexOf(Bs)===-1})),re(this.loop)}},va.prototype.remove=function(_a){var _s=this.frames.indexOf(_a);_s>=0&&this.frames.splice(_s,1)},va.prototype.add=function(_a,_s,Ss,Ms){var Cs=this;_s===void 0&&(_s=!1),Ss===void 0&&(Ss=0),Ms===void 0&&(Ms=5);var Ts={callback:_a,once:_s,delay:Ss,order:Ms};return this.frames.push(Ts),this.frames.sort(function(Bs,Ps){return Bs.order-Ps.order}),function(){return Cs.remove(Ts)}},va.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},va}(),ae="//vrlab-public.ljcdn.com/",ue="//vrlab-image[1-4].ljcdn.com/",le="//global-public.realsee-cdn.com/",he="//global-image-[1-4].realsee-cdn.com/";function ce(va,_a){var _s,Ss=va.split("?")[0],Ms=Ss.split(".").pop();if(Ms==="jpeg"&&(Ms="jpg"),Ms!=="png"&&Ms!=="jpg")return va;var Cs="";if(_a.format!==void 0&&_a.format!==Ms&&(Cs+="/format/".concat(_a.format)),_a.cut!==void 0&&(Cs+="/cut/".concat(_a.cut[2],"x").concat(_a.cut[3],"x").concat(_a.cut[0],"x").concat(_a.cut[1])),_a.quality!==void 0){var Ts=(_s=_a.format)!==null&&_s!==void 0?_s:Ms;Ts&&["jpg","webp","tpg","heif","avif"].indexOf(Ts)>=0&&(Cs+="/quality/".concat(_a.quality))}if(_a.size!==void 0){var Bs=va.match(/\/cube_(\d+)\//);(Bs?Number(Bs[1]):NaN)!==Number(_a.size)&&(Cs+="/thumbnail/".concat(_a.size,"x"))}return _a.sharpen!==void 0&&(Cs+="/sharpen/".concat(_a.sharpen)),Cs.length&&(Cs="?imageMogr2"+Cs),Ss+Cs}function de(va,_a){return va.indexOf(ae)>=0?(/\.basis(\?|$)/.test(va)&&_a.basisLoaderInitialized!==!0&&(va=va.replace(/\.basis(\?|$)/,".jpg$1")),ce(function(Ss,Ms){var Cs=Ms.split("."),Ts=Cs[0],Bs=Cs.slice(1);if(Ts==="texture")return Ss.replace(ae,ue.replace("[1-4]","3"));if(Ts==="pano"||Ts==="pano_luminance")switch(Bs[0],Bs[1]){case"front":case"left":case"up":return Ss.replace(ae,ue.replace("[1-4]","1"));case"down":case"right":case"back":return Ss.replace(ae,ue.replace("[1-4]","2"))}else if(Ts==="pano_tile"||Ts==="pano_tile_luminance"){Bs[0],Bs[1];var Ps=Bs[2],Ls=Bs[3],Rs=Bs[4],$s=Math.pow(2,Number(Ps))*Number(Ls)+Number(Rs);if(!isNaN($s))return Ss.replace(ae,"//vr-tile-[1-2].realsee-cdn.com/".replace("[1-2]",String($s%2+1)))}return Ss.replace(ae,ue.replace("[1-4]","3"))}(va,_a.key),_a)):va.indexOf(le)>=0?(/\.basis(\?|$)/.test(va)&&_a.basisLoaderInitialized!==!0&&(va=va.replace(/\.basis(\?|$)/,".jpg$1")),ce(function(Ss,Ms){var Cs=Ms.split("."),Ts=Cs[0],Bs=Cs.slice(1);if(Ts==="texture")return Ss.replace(le,he.replace("[1-4]","3"));if(Ts==="pano"||Ts==="pano_luminance")switch(Bs[0],Bs[1]){case"front":case"left":case"up":return Ss.replace(le,he.replace("[1-4]","1"));case"down":case"right":case"back":return Ss.replace(le,he.replace("[1-4]","2"))}else if(Ts==="pano_tile"||Ts==="pano_tile_luminance"){Bs[0],Bs[1];var Ps=Bs[2],Ls=Bs[3],Rs=Bs[4],$s=Math.pow(2,Number(Ps))*Number(Ls)+Number(Rs);if(!isNaN($s))return Ss.replace(le,"//global-tile-[1-2].realsee-cdn.com/".replace("[1-2]",String($s%2+1)))}return Ss.replace(le,he.replace("[1-4]","3"))}(va,_a.key),_a)):va.indexOf("//test-vr-public.realsee-cdn.com/")>=0?(/\.basis(\?|$)/.test(va)&&_a.basisLoaderInitialized!==!0&&(va=va.replace(/\.basis(\?|$)/,".jpg$1")),ce((_s=va,_a.key,_s.replace("//test-vr-public.realsee-cdn.com/","//test-vr-image.realsee-cdn.com/")),_a)):va;var _s}var pe=function(va){function _a(){var _s=va!==null&&va.apply(this,arguments)||this;return _s.floorIndex=0,_s.needsRender=!0,_s}return e$3.__extends(_a,va),_a}(r$4.Mesh),Ae=function(va){function _a(){var _s=va!==null&&va.apply(this,arguments)||this;return _s.needsRender=!0,_s.enableTransparent=!0,_s}return e$3.__extends(_a,va),_a.prototype.getTransparent=function(){return this.enableTransparent},_a.prototype.setTransparent=function(_s){this.enableTransparent=_s,this.traverse(function(Ss){Ss instanceof pe&&Ss.material.forEach(function(Ms){Ms.transparent=_s})})},_a.prototype.getMaterial=function(){var _s=null;return this.traverse(function(Ss){if(_s===null&&Ss instanceof pe){var Ms=Ss.material[0];_s={pano0:Ms.pano0,pano1:Ms.pano1,modelAlpha:Ms.modelAlpha,progress:Ms.progress,useBlackTransition:Ms.useBlackTransition,perspToOrtho:Ms.perspToOrtho,opacity:Ms.opacity}}}),_s},_a.prototype.setMaterial=function(_s){this.traverse(function(Ss){Ss instanceof pe&&Ss.material.forEach(function(Ms){_s.pano0!==void 0&&(Ms.pano0=_s.pano0),_s.pano1!==void 0&&(Ms.pano1=_s.pano1),_s.modelAlpha!==void 0&&(Ms.modelAlpha=_s.modelAlpha),_s.progress!==void 0&&(Ms.progress=_s.progress),_s.useBlackTransition!==void 0&&(Ms.useBlackTransition=_s.useBlackTransition),_s.perspToOrtho!==void 0&&(Ms.perspToOrtho=_s.perspToOrtho),_s.opacity!==void 0&&(Ms.opacity=_s.opacity)})})},_a.prototype.disposeMaterial=function(){this.traverse(function(_s){if(_s instanceof pe){var Ss=[];_s.material.forEach(function(Ms){var Cs=Ms.uniforms;Object.keys(Cs).map(function(Ts){if(/^pano\d\_/.test(Ts))Cs[Ts].value=null;else{var Bs=Cs[Ts].value;Bs&&typeof Bs.dispose=="function"&&Ss.indexOf(Bs)===-1&&(Cs[Ts].value=null,Ss.push(Bs))}}),Ms.dispose()}),Ss.forEach(function(Ms){return Ms.dispose()})}})},_a.prototype.disposeGeometry=function(){this.traverse(function(_s){_s instanceof pe&&_s.geometry.dispose()})},_a}(r$4.Group),fe=function(va){function _a(){var _s=va!==null&&va.apply(this,arguments)||this;return _s.floorIndex=0,_s}return e$3.__extends(_a,va),_a}(Ae),ge=function(){for(var va=[],_a=0;_a<arguments.length;_a++)va[_a]=arguments[_a];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rp@-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-5z|qryZnv\x07-7-n{s|zrq6;\x07\b	H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;=>9-q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{66H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H\f`),ve=function(){for(var va=[],_a=0;_a<arguments.length;_a++)va[_a]=arguments[_a];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv	rH{vs|z-znA-}n{|cvqr|lznv\x07H{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvsn\bv{t-rp@-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{-:-}n{|=lznv\x07h@j;\x07\b	6-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{-:-}n{|>lznv\x07h@j;\x07\b	6-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6-<-aNb-7-?;=H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-pynz}5oynpx]|tr-7-@;=9-=;=9->;=66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-pynz}5oynpx]|tr-7-@;=-:-?;=9-=;=9->;=66H--0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|lznv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|lv	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|lv	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function me(){return typeof document>"u"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var ye=me();ye.width=ye.height=8;var be=new r$4.Texture(ye);be.name="EMPTY_TEXTURE";var we=new r$4.CubeTexture([ye,ye,ye,ye,ye,ye]);we.name="EMPTY_CUBE_TEXTURE",be.dispose=we.dispose=function(){};var xe=Object.assign({modelAlpha:new r$4.Uniform(0),progress:new r$4.Uniform(0),pano0_map:new r$4.Uniform(we),pano0_luminanceMap:new r$4.Uniform(null),pano0_matrix:new r$4.Uniform(new r$4.Matrix4),pano1_map:new r$4.Uniform(we),pano1_luminanceMap:new r$4.Uniform(null),pano1_matrix:new r$4.Uniform(new r$4.Matrix4),modelCenter:new r$4.Uniform(new r$4.Vector3),perspToOrtho:new r$4.Uniform(0)},{exposure:new r$4.Uniform(1),emissive:new r$4.Uniform(new r$4.Color(0)),emissiveMap:new r$4.Uniform(null),specular:new r$4.Uniform(new r$4.Color(1118481)),specularMap:new r$4.Uniform(null),normalMap:new r$4.Uniform(null),bumpMap:new r$4.Uniform(null),shininess:new r$4.Uniform(30)},r$4.UniformsLib.common,r$4.UniformsLib.lights),Ee=function(va){function _a(_s){_s===void 0&&(_s={});var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs=this;return Rs=va.call(this,{vertexShader:ge,fragmentShader:ve,uniforms:r$4.UniformsUtils.clone(xe),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1},blending:r$4.NoBlending,lights:!0})||this,Object.defineProperties(Rs,{pano0:{get:function(){return this.uniforms.pano0_map.value===we?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function($s){$s===null?(this.uniforms.pano0_map.value=we,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=$s.map,this.uniforms.pano0_luminanceMap.value=$s.luminanceMap,this.uniforms.pano0_matrix.value.copy($s.matrix));var Fs=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Fs&&(this.defines.USE_LUMINANCE=Fs,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===we?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function($s){$s===null?(this.uniforms.pano1_map.value=we,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=$s.map,this.uniforms.pano1_luminanceMap.value=$s.luminanceMap,this.uniforms.pano1_matrix.value.copy($s.matrix));var Fs=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Fs&&(this.defines.USE_LUMINANCE=Fs,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function($s){this.uniforms.modelAlpha.value=$s}},progress:{get:function(){return this.uniforms.progress.value},set:function($s){this.uniforms.progress.value=$s}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function($s){this.defines.USE_BLACK_TRANSITION!==$s&&(this.defines.USE_BLACK_TRANSITION=$s,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function($s){this.uniforms.opacity.value=$s;var Fs=$s<1?r$4.NormalBlending:r$4.NoBlending;Fs!==this.blending&&(this.blending=Fs,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function($s){this.uniforms.perspToOrtho.value=$s}}}),Rs.pano0=(Ss=_s.pano0)!==null&&Ss!==void 0?Ss:null,Rs.pano1=(Ms=_s.pano1)!==null&&Ms!==void 0?Ms:null,Rs.modelAlpha=(Cs=_s.modelAlpha)!==null&&Cs!==void 0?Cs:1,Rs.progress=(Ts=_s.progress)!==null&&Ts!==void 0?Ts:0,Rs.useBlackTransition=(Bs=_s.useBlackTransition)!==null&&Bs!==void 0&&Bs,Rs.perspToOrtho=(Ps=_s.perspToOrtho)!==null&&Ps!==void 0?Ps:0,Rs.opacity=(Ls=_s.opacity)!==null&&Ls!==void 0?Ls:1,Rs.originOpacity=1,Rs}return e$3.__extends(_a,va),_a}(r$4.ShaderMaterial),Ie=function(va){function _a(_s){var Ss=_s.preserveDrawingBuffer,Ms=Ss===void 0||Ss,Cs=_s.backgroundColor,Ts=Cs===void 0?1579548:Cs,Bs=_s.backgroundAlpha,Ps=Bs===void 0?1:Bs,Ls=_s.pixelRatio,Rs=Ls===void 0?1:Ls,$s=_s.antialias,Fs=$s!==void 0&&$s,Os=va.call(this,{antialias:Fs,preserveDrawingBuffer:Ms,alpha:Ps<1})||this;return Os.setPixelRatio(Rs),Os.setClearColor(Ts,Ps),Os.outputEncoding=r$4.sRGBEncoding,Os.autoClear=!0,Os}return e$3.__extends(_a,va),_a}(r$4.WebGLRenderer),Ce=function(va){function _a(){return va!==null&&va.apply(this,arguments)||this}return e$3.__extends(_a,va),_a.prototype.add=function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.prototype.add.apply(this,_s)},_a.prototype.remove=function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.prototype.remove.apply(this,_s)},_a}(r$4.Scene),Se=2*Math.PI,Be=Math.PI/2;function Me(va){return va>0&&va<=Se?va:(va%Se+Se)%Se}var Pe,Te,Qe,Re,De=function(va){function _a(_s){var Ss=va.call(this,_s,1,.1,1e3)||this;return Ss.pose={longitude:0,latitude:0,fov:_s,distance:0,offset:new r$4.Vector3},Ss.computePose(),Ss}return e$3.__extends(_a,va),_a.prototype.computePose=function(){var _s=this.getWorldDirection(new r$4.Vector3);return this.pose.longitude=Me(-Math.atan2(_s.x,-_s.z)),this.pose.latitude=-Math.asin(_s.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},_a.prototype.setFromPose=function(_s){var Ss,Ms,Cs,Ts,Bs,Ps=Me((Ss=_s.longitude)!==null&&Ss!==void 0?Ss:this.pose.longitude),Ls=Math.max(1e-4-Be,Math.min(Be-1e-4,(Ms=_s.latitude)!==null&&Ms!==void 0?Ms:this.pose.latitude)),Rs=(Cs=_s.fov)!==null&&Cs!==void 0?Cs:this.pose.fov,$s=(Ts=_s.distance)!==null&&Ts!==void 0?Ts:this.pose.distance,Fs=(Bs=_s.offset)!==null&&Bs!==void 0?Bs:this.pose.offset,Os=function(Gs){var Ns=Math.abs(Math.cos(Gs.latitude));return new r$4.Vector3(-Math.sin(Gs.longitude)*Ns,-Math.sin(Gs.latitude),-Math.cos(Gs.longitude)*Ns)}({longitude:Ps,latitude:Ls}).normalize();return this.position.set(0,0,0),this.lookAt(Os),this.position.add(Fs).sub(Os.clone().setLength($s)),this.fov!==Rs&&(this.fov=Rs,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=Ps,this.pose.latitude=Ls,this.pose.fov=Rs,this.pose.distance=$s,this.pose.offset.copy(Fs),this},_a.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},_a}(r$4.PerspectiveCamera),ke=function(){function va(_a,_s,Ss){this.x=_a,this.y=_s,this.z=Ss}return va.prototype.copy=function(_a){return this.x=_a.x,this.y=_a.y,this.z=_a.z,this},va.prototype.set=function(_a,_s,Ss){return this.x=_a,this.y=_s,this.z=Ss,this},va.prototype.fromArray=function(_a,_s){return _s===void 0&&(_s=0),this.x=_a[_s],this.y=_a[_s+1],this.z=_a[_s+2],this},va.prototype.add=function(_a){return this.x+=_a.x,this.y+=_a.y,this.z+=_a.z,this},va.prototype.multiplyScalar=function(_a){return this.x*=_a,this.y*=_a,this.z*=_a,this},va.prototype.subVectors=function(_a,_s){return this.x=_a.x-_s.x,this.y=_a.y-_s.y,this.z=_a.z-_s.z,this},va.prototype.dot=function(_a){return this.x*_a.x+this.y*_a.y+this.z*_a.z},va.prototype.cross=function(_a){var _s=this.x,Ss=this.y,Ms=this.z;return this.x=Ss*_a.z-Ms*_a.y,this.y=Ms*_a.x-_s*_a.z,this.z=_s*_a.y-Ss*_a.x,this},va.prototype.crossVectors=function(_a,_s){var Ss=_a.x,Ms=_a.y,Cs=_a.z,Ts=_s.x,Bs=_s.y,Ps=_s.z;return this.x=Ms*Ps-Cs*Bs,this.y=Cs*Ts-Ss*Ps,this.z=Ss*Bs-Ms*Ts,this},va.prototype.clone=function(){return new va(this.x,this.y,this.z)},va}(),Ne=function(va,_a,_s){this.extents=va,this.startIndex=_a,this.endIndex=_s},Fe=function(va,_a){this.triangle=va,this.intersectionPoint=_a},Oe=(Pe=new ke(0,0,0),Te=new ke(0,0,0),Qe=new ke(0,0,0),Re=new ke(0,0,0),function(va,_a,_s,Ss,Ms,Cs){Te.subVectors(_a,va),Qe.subVectors(_s,va),Re.crossVectors(Te,Qe);var Ts,Bs=Ms.dot(Re);if(Bs>0){if(Cs)return null;Ts=1}else{if(!(Bs<0))return null;Ts=-1,Bs=-Bs}Pe.subVectors(Ss,va);var Ps=Ts*Ms.dot(Qe.crossVectors(Pe,Qe));if(Ps<0)return null;var Ls=Ts*Ms.dot(Te.cross(Pe));if(Ls<0||Ps+Ls>Bs)return null;var Rs=-Ts*Pe.dot(Re);if(Rs<0)return null;var $s=Rs/Bs;return new ke(0,0,0).copy(Ms).multiplyScalar($s).add(Ss)}),Le=function(va,_a){this.min=va,this.max=_a};function Ve(va,_a,_s){var Ss=new Le(0,0);_a.x>=0?(Ss.min=(_s.extents[0]-va.x)*_a.x,Ss.max=(_s.extents[3]-va.x)*_a.x):(Ss.min=(_s.extents[3]-va.x)*_a.x,Ss.max=(_s.extents[0]-va.x)*_a.x);var Ms=new Le(0,0);if(_a.y>=0?(Ms.min=(_s.extents[1]-va.y)*_a.y,Ms.max=(_s.extents[4]-va.y)*_a.y):(Ms.min=(_s.extents[4]-va.y)*_a.y,Ms.max=(_s.extents[1]-va.y)*_a.y),Ss.min>Ms.max||Ms.min>Ss.max)return!1;Ms.min>Ss.min&&(Ss.min=Ms.min),Ms.max<Ss.max&&(Ss.max=Ms.max);var Cs=new Le(0,0);return _a.z>=0?(Cs.min=(_s.extents[2]-va.z)*_a.z,Cs.max=(_s.extents[5]-va.z)*_a.z):(Cs.min=(_s.extents[5]-va.z)*_a.z,Cs.max=(_s.extents[2]-va.z)*_a.z),!(Ss.min>Cs.max||Cs.min>Ss.max)&&(Cs.min>Ss.min&&(Ss.min=Cs.min),Cs.max<Ss.max&&(Ss.max=Cs.max),!(Ss.max<0))}function He(va,_a,_s,Ss,Ms){if(_s>=Ss)return[0,0,0,0,0,0];for(var Cs=1/0,Ts=1/0,Bs=1/0,Ps=-1/0,Ls=-1/0,Rs=-1/0,$s=_s,Fs=void 0,Os=void 0;$s<Ss;$s++)(Os=_a[Fs=6*va[$s]])<Cs&&(Cs=Os),(Os=_a[Fs+1])<Ts&&(Ts=Os),(Os=_a[Fs+2])<Bs&&(Bs=Os),(Os=_a[Fs+3])>Ps&&(Ps=Os),(Os=_a[Fs+4])>Ls&&(Ls=Os),(Os=_a[Fs+5])>Rs&&(Rs=Os);return[Cs-Ms,Ts-Ms,Bs-Ms,Ps+Ms,Ls+Ms,Rs+Ms]}var Ke=function(){function va(){}return va.prototype.create=function(_a){return this.trianglesArray=_a,this},va.prototype.splitNode=function(_a){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");for(var _s=this.trianglesArray,Ss=_s.length/9,Ms=new Uint32Array(Ss),Cs=new Float32Array(6*Ss),Ts=[],Bs=1/0,Ps=1/0,Ls=1/0,Rs=-1/0,$s=-1/0,Fs=-1/0,Os=0,Gs=0,Ns=0,Vs=void 0,Ds=void 0,ks=void 0,Us=void 0,zs=void 0,Ws=void 0,qs=void 0;Os<Ss;Os++,Gs+=6,Ns+=9)Ms[Os]=Os,Vs=Us=_s[Ns],(qs=_s[Ns+3])<Vs&&(Vs=qs),qs>Us&&(Us=qs),(qs=_s[Ns+6])<Vs&&(Vs=qs),qs>Us&&(Us=qs),Ds=zs=_s[Ns+1],(qs=_s[Ns+4])<Ds&&(Ds=qs),qs>zs&&(zs=qs),(qs=_s[Ns+7])<Ds&&(Ds=qs),qs>zs&&(zs=qs),ks=Ws=_s[Ns+2],(qs=_s[Ns+5])<ks&&(ks=qs),qs>Ws&&(Ws=qs),(qs=_s[Ns+8])<ks&&(ks=qs),qs>Ws&&(Ws=qs),Vs<Bs&&(Bs=Vs),Us>Rs&&(Rs=Us),Ds<Ps&&(Ps=Ds),zs>$s&&($s=zs),ks<Ls&&(Ls=ks),Ws>Fs&&(Fs=Ws),Cs[Gs]=Vs,Cs[Gs+1]=Ds,Cs[Gs+2]=ks,Cs[Gs+3]=Us,Cs[Gs+4]=zs,Cs[Gs+5]=Ws;var Zs,el=new Ne([Bs,Ps,Ls,Rs,$s,Fs],0,Ss);function Js(Hs){for(var Qs=Hs.startIndex,js=Hs.endIndex,Ks=Hs.extents,Xs=[Ks[3]-Ks[0],Ks[4]-Ks[1],Ks[5]-Ks[2]],Ys=[0,1,2].sort(function(wl,Al){return Xs[Al]-Xs[wl]}),rl=0;rl<3;rl++){for(var tl=Ys[rl],il=Ks[tl]+Ks[tl+3],ll=Qs,cl=js-1,al=-1,dl=void 0;ll<=cl;)al===-1?(dl=Ms[ll],Cs[6*dl+tl]+Cs[6*dl+tl+3]<il?ll++:al=dl):(dl=Ms[cl],Cs[6*dl+tl]+Cs[6*dl+tl+3]>=il||(Ms[ll]=dl,Ms[cl]=al,al=-1,ll++),cl--);if(ll>Qs&&ll<js){var yl=new Ne(He(Ms,Cs,Qs,ll,1e-6),Qs,ll);yl.endIndex-yl.startIndex>_a&&Ts.push(yl);var xl=new Ne(He(Ms,Cs,ll,js,1e-6),ll,js);xl.endIndex-xl.startIndex>_a&&Ts.push(xl),Hs.node0=yl,Hs.node1=xl,Hs.startIndex=0,Hs.endIndex=0;break}}}for(Ts.push(el);Zs=Ts.pop();)Js(Zs);return this.offsetArray=Ms,this.rootNode=el,this},va.prototype.intersectRay=function(_a,_s,Ss){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");if(!this.rootNode||!this.offsetArray)throw new Error("bvh-tree never perpared. call `splitNode` to perpare.");for(var Ms,Cs=this.trianglesArray,Ts=this.offsetArray,Bs=this.rootNode,Ps=[],Ls=[],Rs=new ke(1/_s.x,1/_s.y,1/_s.z),$s=[Bs];Ms=$s.pop();)if(Ve(_a,Rs,Ms)){Ms.node0&&$s.push(Ms.node0),Ms.node1&&$s.push(Ms.node1);for(var Fs=Ms.startIndex;Fs<Ms.endIndex;Fs++)Ps.push(Ts[Fs])}for(var Os=new ke(0,0,0),Gs=new ke(0,0,0),Ns=new ke(0,0,0),Vs=new ke(_a.x,_a.y,_a.z),Ds=new ke(_s.x,_s.y,_s.z),ks=(Fs=0,void 0),Us=Ps.length;Fs<Us;Fs++){ks=9*Ps[Fs],Os.x=Cs[ks],Os.y=Cs[ks+1],Os.z=Cs[ks+2],Gs.x=Cs[ks+3],Gs.y=Cs[ks+3+1],Gs.z=Cs[ks+3+2],Ns.x=Cs[ks+6],Ns.y=Cs[ks+6+1],Ns.z=Cs[ks+6+2];var zs=Oe(Os,Gs,Ns,Vs,Ds,Ss);zs&&Ls.push(new Fe([Os.clone(),Gs.clone(),Ns.clone()],zs))}return Ls},va.prototype.dispose=function(){delete this.offsetArray,delete this.rootNode},va}(),ze=null,qe=!1,_e=[];function je(va){if(va===void 0&&(va=!1),va||!qe)if(ze)qe=!1;else{qe=!0;var _a=_e.shift();if(_a){try{_a()}catch{}se.shared.add(function(){return je(!0)},!0,2)}else qe=!1}}function Ue(){ze=null,je()}function Ge(va){return new Promise(function(_a,_s){_e.push(function(){try{_a(va())}catch(Ss){_s(Ss)}}),je()})}function We(){var va={OutWindow:function(){this._windowSize=0}};return va.OutWindow.prototype.create=function(_a){this._buffer&&this._windowSize===_a||(this._buffer=[]),this._windowSize=_a,this._pos=0,this._streamPos=0},va.OutWindow.prototype.flush=function(){var _a=this._pos-this._streamPos;if(_a!==0){for(;_a--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},va.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},va.OutWindow.prototype.setStream=function(_a){this.releaseStream(),this._stream=_a},va.OutWindow.prototype.init=function(_a){_a||(this._streamPos=0,this._pos=0)},va.OutWindow.prototype.copyBlock=function(_a,_s){var Ss=this._pos-_a-1;for(Ss<0&&(Ss+=this._windowSize);_s--;)Ss>=this._windowSize&&(Ss=0),this._buffer[this._pos++]=this._buffer[Ss++],this._pos>=this._windowSize&&this.flush()},va.OutWindow.prototype.putByte=function(_a){this._buffer[this._pos++]=_a,this._pos>=this._windowSize&&this.flush()},va.OutWindow.prototype.getByte=function(_a){var _s=this._pos-_a-1;return _s<0&&(_s+=this._windowSize),this._buffer[_s]},va.RangeDecoder=function(){},va.RangeDecoder.prototype.setStream=function(_a){this._stream=_a},va.RangeDecoder.prototype.releaseStream=function(){this._stream=null},va.RangeDecoder.prototype.init=function(){var _a=5;for(this._code=0,this._range=-1;_a--;)this._code=this._code<<8|this._stream.readByte()},va.RangeDecoder.prototype.decodeDirectBits=function(_a){for(var _s,Ss=0,Ms=_a;Ms--;)this._range>>>=1,_s=this._code-this._range>>>31,this._code-=this._range&_s-1,Ss=Ss<<1|1-_s,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return Ss},va.RangeDecoder.prototype.decodeBit=function(_a,_s){var Ss=_a[_s],Ms=(this._range>>>11)*Ss;return(2147483648^this._code)<(2147483648^Ms)?(this._range=Ms,_a[_s]+=2048-Ss>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=Ms,this._code-=Ms,_a[_s]-=Ss>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},va.initBitModels=function(_a,_s){for(;_s--;)_a[_s]=1024},va.BitTreeDecoder=function(_a){this._models=[],this._numBitLevels=_a},va.BitTreeDecoder.prototype.init=function(){va.initBitModels(this._models,1<<this._numBitLevels)},va.BitTreeDecoder.prototype.decode=function(_a){for(var _s=1,Ss=this._numBitLevels;Ss--;)_s=_s<<1|_a.decodeBit(this._models,_s);return _s-(1<<this._numBitLevels)},va.BitTreeDecoder.prototype.reverseDecode=function(_a){for(var _s,Ss=1,Ms=0,Cs=0;Cs<this._numBitLevels;++Cs)Ss=Ss<<1|(_s=_a.decodeBit(this._models,Ss)),Ms|=_s<<Cs;return Ms},va.reverseDecode2=function(_a,_s,Ss,Ms){for(var Cs,Ts=1,Bs=0,Ps=0;Ps<Ms;++Ps)Ts=Ts<<1|(Cs=Ss.decodeBit(_a,_s+Ts)),Bs|=Cs<<Ps;return Bs},va.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new va.BitTreeDecoder(8),this._numPosStates=0},va.LenDecoder.prototype.create=function(_a){for(;this._numPosStates<_a;++this._numPosStates)this._lowCoder[this._numPosStates]=new va.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new va.BitTreeDecoder(3)},va.LenDecoder.prototype.init=function(){var _a=this._numPosStates;for(va.initBitModels(this._choice,2);_a--;)this._lowCoder[_a].init(),this._midCoder[_a].init();this._highCoder.init()},va.LenDecoder.prototype.decode=function(_a,_s){return _a.decodeBit(this._choice,0)===0?this._lowCoder[_s].decode(_a):_a.decodeBit(this._choice,1)===0?8+this._midCoder[_s].decode(_a):16+this._highCoder.decode(_a)},va.Decoder2=function(){this._decoders=[]},va.Decoder2.prototype.init=function(){va.initBitModels(this._decoders,768)},va.Decoder2.prototype.decodeNormal=function(_a){var _s=1;do _s=_s<<1|_a.decodeBit(this._decoders,_s);while(_s<256);return 255&_s},va.Decoder2.prototype.decodeWithMatchByte=function(_a,_s){var Ss,Ms,Cs=1;do if(Ss=_s>>7&1,_s<<=1,Cs=Cs<<1|(Ms=_a.decodeBit(this._decoders,(1+Ss<<8)+Cs)),Ss!==Ms){for(;Cs<256;)Cs=Cs<<1|_a.decodeBit(this._decoders,Cs);break}while(Cs<256);return 255&Cs},va.LiteralDecoder=function(){},va.LiteralDecoder.prototype.create=function(_a,_s){var Ss;if(!this._coders||this._numPrevBits!==_s||this._numPosBits!==_a)for(this._numPosBits=_a,this._posMask=(1<<_a)-1,this._numPrevBits=_s,this._coders=[],Ss=1<<this._numPrevBits+this._numPosBits;Ss--;)this._coders[Ss]=new va.Decoder2},va.LiteralDecoder.prototype.init=function(){for(var _a=1<<this._numPrevBits+this._numPosBits;_a--;)this._coders[_a].init()},va.LiteralDecoder.prototype.getDecoder=function(_a,_s){return this._coders[((_a&this._posMask)<<this._numPrevBits)+((255&_s)>>>8-this._numPrevBits)]},va.Decoder=function(){this._outWindow=new va.OutWindow,this._rangeDecoder=new va.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new va.BitTreeDecoder(4),this._lenDecoder=new va.LenDecoder,this._repLenDecoder=new va.LenDecoder,this._literalDecoder=new va.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new va.BitTreeDecoder(6),this._posSlotDecoder[1]=new va.BitTreeDecoder(6),this._posSlotDecoder[2]=new va.BitTreeDecoder(6),this._posSlotDecoder[3]=new va.BitTreeDecoder(6)},va.Decoder.prototype.setDictionarySize=function(_a){return!(_a<0)&&(this._dictionarySize!==_a&&(this._dictionarySize=_a,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},va.Decoder.prototype.setLcLpPb=function(_a,_s,Ss){var Ms=1<<Ss;return!(_a>8||_s>4||Ss>4)&&(this._literalDecoder.create(_s,_a),this._lenDecoder.create(Ms),this._repLenDecoder.create(Ms),this._posStateMask=Ms-1,!0)},va.Decoder.prototype.init=function(){var _a=4;for(this._outWindow.init(!1),va.initBitModels(this._isMatchDecoders,192),va.initBitModels(this._isRep0LongDecoders,192),va.initBitModels(this._isRepDecoders,12),va.initBitModels(this._isRepG0Decoders,12),va.initBitModels(this._isRepG1Decoders,12),va.initBitModels(this._isRepG2Decoders,12),va.initBitModels(this._posDecoders,114),this._literalDecoder.init();_a--;)this._posSlotDecoder[_a].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},va.Decoder.prototype.decode=function(_a,_s,Ss){var Ms,Cs,Ts,Bs,Ps,Ls,Rs=0,$s=0,Fs=0,Os=0,Gs=0,Ns=0,Vs=0;for(this._rangeDecoder.setStream(_a),this._outWindow.setStream(_s),this.init();Ss<0||Ns<Ss;)if(Ms=Ns&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(Rs<<4)+Ms)===0)Cs=this._literalDecoder.getDecoder(Ns++,Vs),Vs=Rs>=7?Cs.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte($s)):Cs.decodeNormal(this._rangeDecoder),this._outWindow.putByte(Vs),Rs=Rs<4?0:Rs-(Rs<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,Rs)===1)Ts=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,Rs)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(Rs<<4)+Ms)===0&&(Rs=Rs<7?9:11,Ts=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,Rs)===0?Bs=Fs:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,Rs)===0?Bs=Os:(Bs=Gs,Gs=Os),Os=Fs),Fs=$s,$s=Bs),Ts===0&&(Ts=2+this._repLenDecoder.decode(this._rangeDecoder,Ms),Rs=Rs<7?8:11);else if(Gs=Os,Os=Fs,Fs=$s,Ts=2+this._lenDecoder.decode(this._rangeDecoder,Ms),Rs=Rs<7?7:10,(Ps=this._posSlotDecoder[Ts<=5?Ts-2:3].decode(this._rangeDecoder))>=4){if($s=(2|1&Ps)<<(Ls=(Ps>>1)-1),Ps<14)$s+=va.reverseDecode2(this._posDecoders,$s-Ps-1,this._rangeDecoder,Ls);else if($s+=this._rangeDecoder.decodeDirectBits(Ls-4)<<4,($s+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if($s===-1)break;return!1}}else $s=Ps;if($s>=Ns||$s>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock($s,Ts),Ns+=Ts,Vs=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},va.Decoder.prototype.setDecoderProperties=function(_a){var _s,Ss,Ms,Cs,Ts;return!(_a.size<5)&&(Ss=(_s=_a.readByte())%9,Ms=(_s=~~(_s/9))%5,Cs=~~(_s/5),!!this.setLcLpPb(Ss,Ms,Cs)&&(Ts=_a.readByte(),Ts|=_a.readByte()<<8,Ts|=_a.readByte()<<16,Ts+=16777216*_a.readByte(),this.setDictionarySize(Ts)))},va.decompress=function(_a,_s,Ss,Ms){var Cs=new va.Decoder;if(!Cs.setDecoderProperties(_a))throw"Incorrect stream properties";if(!Cs.decode(_s,Ss,Ms))throw"Error in data stream";return!0},va.decompressFile=function(_a,_s){var Ss,Ms=new va.Decoder;if(!Ms.setDecoderProperties(_a))throw"Incorrect stream properties";if(Ss=_a.readByte(),Ss|=_a.readByte()<<8,Ss|=_a.readByte()<<16,Ss+=16777216*_a.readByte(),_a.readByte(),_a.readByte(),_a.readByte(),_a.readByte(),!Ms.decode(_a,_s,Ss))throw"Error in data stream";return!0},va}var Xe=We(),Ye=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(We.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(va,_a,_s){try{var Ss={data:_a,offset:0,readByte:function(){return this.data[this.offset++]}},Ms=Ss.data.length,Cs={data:[],offset:0,writeByte:function(Ps){var Ls=Math.floor(this.offset/Ms);this.data[Ls]||(this.data[Ls]=new Uint8Array(Ms)),this.data[Ls][this.offset%Ms]=Ps,this.offset++}};va.decompressFile(Ss,Cs);for(var Ts=new Uint8Array(Cs.offset),Bs=0;Bs<Cs.offset;Bs++)Ts[Bs]=Cs.data[Math.floor(Bs/Ms)][Bs%Ms];_s(null,Ts)}catch(Ps){_s(Ps)}}.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(function(){return function(va){for(var _a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_s=new Uint8Array(256),Ss=0;Ss<_a.length;Ss++)_s[_a.charCodeAt(Ss)]=Ss;var Ms,Cs,Ts,Bs,Ps,Ls=.75*va.length,Rs=va.length,$s=0;va[va.length-1]==="="&&(Ls--,va[va.length-2]==="="&&Ls--);var Fs=new ArrayBuffer(Ls),Os=new Uint8Array(Fs);for(Ms=0;Ms<Rs;Ms+=4)Cs=_s[va.charCodeAt(Ms)],Ts=_s[va.charCodeAt(Ms+1)],Bs=_s[va.charCodeAt(Ms+2)],Ps=_s[va.charCodeAt(Ms+3)],Os[$s++]=Cs<<2|Ts>>4,Os[$s++]=(15&Ts)<<4|Bs>>2,Os[$s++]=(3&Bs)<<6|63&Ps;return Fs}("AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=")}.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(va,_a,_s){try{var Ss=new WebAssembly.Memory({initial:16}),Ms=new WebAssembly.Module(va),Cs=new WebAssembly.Instance(Ms,{env:{memory:Ss,abort:function(){_s(new Error("webAssembly abort"))}}}).exports,Ts=Cs.newU8Array(_a.length);new Uint8Array(Ss.buffer,Ts+24,_a.length).set(_a);var Bs=Cs.decode(Ts),Ps=new Uint32Array(Ss.buffer,Bs,4),Ls=Ps[0],Rs=Ps[2],$s=Ps[3];Ls?_s(null,new Uint8Array(Ss.buffer,$s+24,Rs).slice(0,Rs)):_s(new Error("lzma deocder error"))}catch(Fs){_s(Fs)}}.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),Ze=typeof Worker<"u"&&typeof Blob<"u",Je="";if(Ze)try{var $e=new Blob([Ye],{type:"text/javascript"});Je=URL.createObjectURL($e)}catch(va){}var ti=function(){function va(){var _a=this;if(!Ze)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var _s=this.worker=new Worker(Je);_s.onmessage=function(Ss){var Ms=Ss.data,Cs=Ms.id,Ts=Ms.result,Bs=Ms.error,Ps=_a.getKey(Cs);_a.requests[Ps]&&(Bs?_a.requests[Ps](new Error(Bs)):_a.requests[Ps](null,Ts),delete _a.requests[Ps])},_s.onerror=function(Ss){return console.error(Ss)}}return va.prototype.getKey=function(_a){return"key_"+String(_a)},va.prototype.decompress=function(_a,_s){var Ss=++this.callCounter;this.requests[this.getKey(Ss)]=_s,this.worker.postMessage({type:"decompress",id:Ss,data:_a},[_a.buffer])},va.prototype.terminate=function(){this.worker.terminate()},va.support=Ze,va}();function ei(va){return Array.prototype.reduce.call(va,function(_a,_s,Ss){return _a|_s<<8*Ss},0)}function ii(va){var _a=new Uint8Array(va),_s=ei(_a.slice(0,4));if(_s>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var Ss=[],Ms=[],Cs=4+4*_s,Ts=0;Ts<_s;Ts++)Ms[Ts]=ei(_a.slice(4+4*Ts,8+4*Ts)),Ss[Ts]=Ts===_s-1?_a.subarray(Cs,Cs+Ms[Ts]):_a.slice(Cs,Cs+Ms[Ts]),Cs+=Ms[Ts];return ti.support?function(Bs){for(var Ps=[],Ls=Bs.length,Rs=function(Fs){Ps.push(new Promise(function(Os,Gs){var Ns=new ti;Ns.decompress(Bs[Fs],function(Vs,Ds){if(Ns.terminate(),Vs)return Gs(Vs);Os(Ds)})}))},$s=0;$s<Ls;$s++)Rs($s);return Promise.all(Ps)}(Ss):Promise.resolve(function(Bs){for(var Ps,Ls=[],Rs=Bs.length,$s=function(Os){var Gs={data:Bs[Os],offset:0,readByte:function(){return this.data[this.offset++]}},Ns=Gs.data.length,Vs={data:[],offset:0,writeByte:function(ks){var Us=Math.floor(this.offset/Ns);this.data[Us]||(this.data[Us]=new Uint8Array(Ns)),this.data[Us][this.offset%Ns]=ks,this.offset++}};Xe.decompressFile(Gs,Vs),Ps=new Uint8Array(Vs.offset);for(var Ds=0;Ds<Vs.offset;Ds++)Ps[Ds]=Vs.data[Math.floor(Ds/Ns)][Ds%Ns];Ls.push(Ps)},Fs=0;Fs<Rs;Fs++)$s(Fs);return Ls}(Ss))}function ni(va,_a){for(var _s={},Ss=0,Ms=_a;Ss<Ms.length;Ss++){var Cs=Ms[Ss];Cs in va&&(_s[Cs]=va[Cs])}return _s}var ri=!1;try{ri=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(va){}var oi=[];function si(){var va=this.src;this.onerror=this.onload=Lt,this.removeAttribute("src"),/^blob\:/.test(va)&&URL.revokeObjectURL(va),this.close=Lt}function ai(){oi.push(this)}function ui(){return Object.assign(new Image,{crossOrigin:"",close:si})}function li(va){return new Promise(function(_a,_s){var Ss=ui();Ss.onload=function(){Ss.onload=Ss.onerror=Lt,setTimeout(function(){return _a(Ss)},30)},Ss.onerror=function(){var Ms=Ss.src;Ss.onload=Ss.onerror=Lt,Ss.close(),_s(new Error("image load error: ".concat(Ms)))},Ss.src=URL.createObjectURL(va)})}function hi(va,_a){if(_a&&(va.width>_a.width||va.height>_a.height)){var _s=function(Ps,Ls){var Rs=oi.shift();if(Rs)return Rs.width=Ps,Rs.height=Ls,Rs;if(ri){var $s=new OffscreenCanvas(Ps,Ls);return Object.assign($s,{close:ai})}return $s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign($s,{close:ai})}(Math.min(va.width,_a.width),Math.min(va.height,_a.height)),Ss=_s.getContext("2d");Ss.clearRect(0,0,_s.width,_s.height),Ss.drawImage(va,0,0,_s.width,_s.height),va.close();var Ms=new r$4.Texture(_s);Ms.needsUpdate=!0,Ms.flipY=!0;var Cs=Ms.dispose;return Ms.dispose=function(){_s.close(),Cs.call(Ms),delete Ms.dispose},Ms}var Ts=new r$4.Texture(va);Ts.needsUpdate=!0,Ts.minFilter=r$4.LinearFilter,Ts.magFilter=r$4.LinearFilter,Ts.flipY=!0;var Bs=Ts.dispose;return Ts.dispose=function(){va.close(),Bs.call(Ts),delete Ts.dispose},Ts}var ci=new r$4.WebGLRenderTarget(1,1),di=new r$4.OrthographicCamera(-1,1,1,-1,0,1),pi=new r$4.BufferGeometry;pi.setAttribute("position",new r$4.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),pi.setAttribute("uv",new r$4.Float32BufferAttribute([0,2,0,0,2,0],2));var Ai=new r$4.Mesh(pi),fi=new r$4.Scene;fi.add(Ai);var gi,vi=new r$4.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),mi=new r$4.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function yi(va,_a,_s){return _a.flipY!==void 0&&(va.flipY=_a.flipY),_a.format!==void 0&&(va.format=_a.format),_a.encoding!==void 0&&(va.encoding=_a.encoding),_a.minFilter!==void 0&&(va.minFilter=_a.minFilter),_a.magFilter!==void 0&&(va.magFilter=_a.magFilter),_s?new Promise(function(Ss){se.shared.add(function(){try{var Ms=_s.getRenderTarget();_s.setRenderTarget(ci),va instanceof r$4.CubeTexture?(Ai.material=mi,mi.uniforms.map.value=va,_s.render(fi,di),mi.uniforms.map.value=null):(Ai.material=vi,vi.uniforms.map.value=va,_s.render(fi,di),mi.uniforms.map.value=null),_s.setRenderTarget(Ms),Ss(va)}catch{Ss(va)}},!0,1)}):Promise.resolve(va)}var bi=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,wi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},xi={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},Ei=((gi={})[wi.cTFBC1]=xi.COMPRESSED_RGB_S3TC_DXT1_EXT,gi[wi.cTFBC3]=xi.COMPRESSED_RGBA_S3TC_DXT5_EXT,gi),Ii=function(){function va(){}return va.setTranscoderPath=function(_a){return this.transcoderPath=_a,this},va.setWorkerLimit=function(_a){return this.workerLimit=_a,this},va.isInitialized=function(){return this.workerPool.filter(function(_a){return _a._initialized}).length!==0},va.detectSupport=function(_a){var _s=this.workerConfig;if(_s.astcSupported=!!_a.extensions.get("WEBGL_compressed_texture_astc"),_s.bptcSupported=!!_a.extensions.get("EXT_texture_compression_bptc"),_s.etcSupported=!!_a.extensions.get("WEBGL_compressed_texture_etc1"),_s.dxtSupported=!!_a.extensions.get("WEBGL_compressed_texture_s3tc"),_s.pvrtcSupported=!!_a.extensions.get("WEBGL_compressed_texture_pvrtc")||!!_a.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),_s.astcSupported)_s.format=va.BASIS_FORMAT.cTFASTC_4x4;else if(_s.bptcSupported)_s.format=va.BASIS_FORMAT.cTFBC7_M5;else if(_s.dxtSupported)_s.format=va.BASIS_FORMAT.cTFBC3;else if(_s.pvrtcSupported)_s.format=va.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!_s.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");_s.format=va.BASIS_FORMAT.cTFETC1}return this},va.createTexture=function(_a){var _s,Ss,Ms=this,Cs=_a.byteLength,Ts=this._allocateWorker(Cs).then(function(Bs){return _s=Bs,Ss=Ms.workerNextTaskID++,new Promise(function(Ps,Ls){_s._callbacks[Ss]={resolve:Ps,reject:Ls},_s.postMessage({type:"transcode",id:Ss,buffer:_a},[_a])})}).then(function(Bs){var Ps,Ls=Ms.workerConfig,Rs=Bs.width,$s=Bs.height,Fs=Bs.mipmaps;switch(Bs.format){case wi.cTFASTC_4x4:Ps=new r$4.CompressedTexture(Fs,Rs,$s,r$4.RGBA_ASTC_4x4_Format);break;case wi.cTFBC1:case wi.cTFBC3:Ps=new r$4.CompressedTexture(Fs,Rs,$s,Ei[Ls.format],r$4.UnsignedByteType);break;case wi.cTFETC1:Ps=new r$4.CompressedTexture(Fs,Rs,$s,r$4.RGB_ETC1_Format);break;case wi.cTFPVRTC1_4_RGB:Ps=new r$4.CompressedTexture(Fs,Rs,$s,r$4.RGB_PVRTC_4BPPV1_Format);break;case wi.cTFPVRTC1_4_RGBA:Ps=new r$4.CompressedTexture(Fs,Rs,$s,r$4.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return Ps.minFilter=Fs.length===1?r$4.LinearFilter:r$4.LinearMipmapLinearFilter,Ps.magFilter=r$4.LinearFilter,Ps.generateMipmaps=!1,Ps.needsUpdate=!0,Ps});return Ts.catch(function(){return!0}).then(function(){_s&&Ss&&(_s._taskLoad-=Cs,delete _s._callbacks[Ss])}),Ts},va._initTranscoder=function(){var _a=this;if(!this.transcoderPending){var _s=new r$4.FileLoader;_s.setPath(this.transcoderPath);var Ss=new Promise(function(Ts,Bs){_s.load("basis_transcoder.js",Ts,void 0,Bs)}),Ms=new r$4.FileLoader;Ms.setPath(this.transcoderPath),Ms.setResponseType("arraybuffer");var Cs=new Promise(function(Ts,Bs){Ms.load("basis_transcoder.wasm",Ts,void 0,Bs)});this.transcoderPending=Promise.all([Ss,Cs]).then(function(Ts){var Bs=Ts[0],Ps=Ts[1],Ls=["/* basis_transcoder.js */",Bs,"/* worker */",bi].join(`
`);_a.workerSourceURL=URL.createObjectURL(new Blob([Ls])),_a.transcoderBinary=Ps})}return this.transcoderPending},va._allocateWorker=function(_a){var _s=this;return this._initTranscoder().then(function(){if(_s.workerPool.length<_s.workerLimit){var Ss=function(Cs){var Ts=new Worker(Cs);return Object.assign(Ts,{_callbacks:{},_initialized:!1,_taskLoad:0})}(_s.workerSourceURL);Ss._callbacks={},Ss._initialized=!1,Ss._taskLoad=0,Ss.postMessage({type:"init",config:_s.workerConfig,transcoderBinary:_s.transcoderBinary}),Ss.onmessage=function(Cs){var Ts=Cs.data;switch(Ts.type){case"initialized":Ss._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":Ss._callbacks[Ts.id].resolve(Ts);break;case"error":Ss._callbacks[Ts.id].reject(Ts);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(Ts.type,'"'))}},_s.workerPool.push(Ss)}else _s.workerPool.sort(function(Cs,Ts){return Cs._taskLoad>Ts._taskLoad?-1:1});var Ms=_s.workerPool[_s.workerPool.length-1];return Ms._taskLoad+=_a,Ms})},va.prototype.dispose=function(){for(var _a=0;_a<va.workerPool.length;_a++)va.workerPool[_a].terminate();return va.workerPool.length=0,this},va.BASIS_FORMAT=wi,va.DXT_FORMAT=xi,va.DXT_FORMAT_MAP=Ei,va.transcoderPath="https://vrlab-public.ljcdn.com/release/static/image/release/five/basis/",va.transcoderBinary=null,va.transcoderPending=null,va.workerLimit=1,va.workerPool=[],va.workerNextTaskID=1,va.workerSourceURL="",va.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},va}();function Ci(va){var _a=va.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return _a?_a[1]:location.protocol}var Si=function(){function va(_a){this.timeout=_a.timeout,this.allowHosts=_a.allowHosts,this.networkSubscribe=_a.networkSubscribe}return va.prototype.setAllowHosts=function(_a){this.allowHosts=_a},va.prototype.setNetworkSubscribe=function(_a){this.networkSubscribe=_a},va.prototype.load=function(_a,_s,Ss,Ms,Cs,Ts){var Bs;_s===void 0&&(_s={}),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),Cs===void 0&&(Cs=Lt);var Ps=Ci(_a),Ls={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},Rs=(Bs=_s.viaAjax)!==null&&Bs!==void 0&&Bs,$s=Zt(_a),Fs=/^https?:$/.test(Ps),Os=/\.basis$/.test(Jt(_a).split("?")[0]);if($s?Rs=!0:Fs||(Rs=!1),Rs){if(Os){var Gs=null,Ns="arraybuffer";return _s.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):ee(_a,e$3.__assign(e$3.__assign({},Ls),{responseType:Ns}),void 0,void 0,Cs).then(function(Us){return Gs=Us.meta,Ii.createTexture(Us.body)}).then(function(Us){return _s.preInit!==!1?yi(Us,e$3.__assign({flipY:!1,encoding:r$4.sRGBEncoding},ni(_s,["wrapS","wrapT"])),Ts):Us}).then(function(Us){var zs={meta:Gs,body:Us};return Ss(zs),zs}).catch(function(Us){return Ms(Us),Promise.reject(Us)})}return Ns="blob",ee(_a,e$3.__assign(e$3.__assign({},Ls),{responseType:Ns}),void 0,void 0,Cs).then(function(Us){return li(Us.body)}).then(function(Us){return hi(Us,_s.maxSize)}).then(function(Us){return _s.preInit!==!1?yi(Us,e$3.__assign({flipY:!0,encoding:r$4.sRGBEncoding},_s),Ts):Us}).then(function(Us){var zs={meta:null,body:Us};return Ss(zs),zs}).catch(function(Us){return Ms(Us),Promise.reject(Us)})}if(Os){var Vs=new Error("cannot load basis texture via image");return Ms(Vs),Promise.reject(Vs)}var Ds=null,ks=ui();return ne(_a,Ls,void 0,void 0,Cs,ks).then(function(Us){return Ds=Us.meta,hi(Us.body,_s.maxSize)}).then(function(Us){return _s.preInit!==!1?yi(Us,e$3.__assign({flipY:!0,encoding:r$4.sRGBEncoding},_s),Ts):Us}).then(function(Us){var zs={meta:Ds,body:Us};return Ss(zs),zs}).catch(function(Us){return ks.close(),Ms(Us),Promise.reject(Us)})},va.prototype.loadCube=function(_a,_s,Ss,Ms,Cs,Ts){var Bs;_s===void 0&&(_s={}),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),Cs===void 0&&(Cs=Lt),Array.isArray(_a)||(_a=[_a.right,_a.left,_a.up,_a.down,_a.front,_a.back]);for(var Ps={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},Ls=[],Rs=[0,0,0,0,0,0],$s=[],Fs=function(Ns){var Vs=_a[Ns],Ds=Ci(Vs),ks=function(Qs){Rs[Ns]=Qs,Cs(Rs.reduce(function(js,Ks){return js+Ks},0)/6)},Us=(Bs=_s.viaAjax)!==null&&Bs!==void 0&&Bs,zs=/^https?:$/.test(Ds),Ws=Zt(Vs),qs=/\.basis$/.test(Jt(Vs).split("?")[0]);if(Ws?Us=!0:zs||(Us=!1),Us)if(qs){var Zs="arraybuffer",el=ee(Vs,e$3.__assign(e$3.__assign({},Ps),{responseType:Zs}),void 0,void 0,ks).then(function(Qs){return $s[Ns]=Qs.meta,Ii.createTexture(Qs.body)});Ls.push(el)}else Zs="blob",el=ee(Vs,e$3.__assign(e$3.__assign({},Ps),{responseType:Zs}),void 0,void 0,ks).then(function(Qs){return $s[Ns]=Qs.meta,li(Qs.body)}),Ls.push(el);else{if(qs){var Js=new Error("cannot load basis texture via image");return Ms(Js),{value:Promise.reject(Js)}}var Hs=ui();el=ne(Vs,Ps,void 0,void 0,ks,Hs).then(function(Qs){return $s[Ns]=Qs.meta,Qs.body}).catch(function(Qs){return Hs.close(),Promise.reject(Qs)}),Ls.push(el)}},Os=0;Os<6;Os++){var Gs=Fs(Os);if(typeof Gs=="object")return Gs.value}return Promise.all(Ls).then(function(Ns){return Ns[0]instanceof r$4.CompressedTexture?function(Vs){var Ds=new r$4.CubeTexture(Vs);Ds.needsUpdate=!0;var ks=Ds.dispose;return Ds.dispose=function(){for(var Us=0,zs=Vs;Us<zs.length;Us++)zs[Us].dispose();ks.call(Ds),delete Ds.dispose},Ds.isCompressedTexture=!0,Ds.format=Vs[0].format,Ds.minFilter=Vs[0].minFilter,Ds.magFilter=Vs[0].magFilter,Ds}(Ns):function(Vs){var Ds=new r$4.CubeTexture(Vs);Ds.needsUpdate=!0,Ds.minFilter=r$4.LinearFilter,Ds.magFilter=r$4.LinearFilter,Ds.flipY=!1;var ks=Ds.dispose;return Ds.dispose=function(){for(var Us=0,zs=Vs;Us<zs.length;Us++)zs[Us].close();ks.call(Ds),delete Ds.dispose},Ds}(Ns)}).then(function(Ns){return _s.preInit!==!1?Ns.isCompressedTexture?yi(Ns,e$3.__assign({flipY:!1,encoding:r$4.sRGBEncoding},ni(_s,["wrapS","wrapT"])),Ts):yi(Ns,e$3.__assign({flipY:!1,encoding:r$4.sRGBEncoding},_s),Ts):Ns}).then(function(Ns){var Vs={body:Ns,meta:$s};return Ss(Vs),Vs}).catch(function(Ns){for(var Vs=0,Ds=Ls;Vs<Ds.length;Vs++)Ds[Vs].then(function(ks){ks instanceof r$4.Texture?ks.dispose():ks.close()}).catch(Lt);return Ms(Ns),Promise.reject(Ns)})},va}();const Bi=o$1.Reader,Mi=o$1.util,Pi=o$1.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]||(o$1.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]={}),Ti=Pi.Model=(()=>{function va(_a){if(this.chunks=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.chunks=Mi.emptyArray,va.decode=function(_a,_s){_a instanceof Bi||(_a=Bi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Pi.Model;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:Ms.chunks&&Ms.chunks.length||(Ms.chunks=[]),Ms.chunks.push(Pi.Chunk.decode(_a,_a.uint32()));break;default:_a.skipType(7&Cs)}}return Ms},va})();function Qi(va){var _a,_s,Ss=new r$4.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);function Ms(Hl){var Dl=Hl.match(/(group|floor)-?(\d+)/);return Dl?parseInt(Dl[2],10):0}function Cs(Hl){var Dl=Hl.match(/(chunk)-?(\d+)/);return Dl?parseInt(Dl[2],10):0}function Ts(Hl){return 1e6*Ms(Hl.name)+1e3*Cs(Hl.name)+function(Dl){var gl=Dl.match(/(sub)-?(\d+)/);return gl?parseInt(gl[2],10):0}(Hl.name)}for(var Bs=[],Ps=0,Ls=((_a=va.chunks)!==null&&_a!==void 0?_a:[]).sort(function(Hl,Dl){return Ts(Hl)-Ts(Dl)});Ps<Ls.length;Ps++){var Rs=Ms((Ys=Ls[Ps]).name);Bs[Rs]||(Bs[Rs]=[]),Bs[Rs].push(Ys)}for(var $s=[],Fs=0;Fs<Bs.length;Fs++){var Os=Bs[Fs];if(Os){for(var Gs=0,Ns=0,Vs=0;Vs<Os.length;Vs++)Ns+=(Ys=Os[Vs]).vertices.xyz.length/3,Gs+=Ys.faces.indices.length;for(var Ds=3*Ns,ks=2*Ns,Us=3*Ns,zs=Gs,Ws=new ArrayBuffer(4*Ds+4*ks+4*Us+4*zs),qs=new Float32Array(Ws,0,Ds),Zs=new Float32Array(Ws,4*Ds,ks),el=new Float32Array(Ws,4*Ds+4*ks,Us),Js=new Uint32Array(Ws,4*Ds+4*ks+4*Us,zs),Hs=[],Qs=[1/0,1/0,1/0,-1/0,-1/0,-1/0],js=0,Ks=0,Xs=0;Xs<Os.length;Xs++){var Ys,rl=(Ys=Os[Xs]).vertices.xyz,tl=Ys.vertices.uvs,il=Ys.faces.indices,ll=rl.length/3,cl=il.length,al=[1/0,1/0,1/0,-1/0,-1/0,-1/0];for(Vs=0;Vs<ll;Vs++){var dl=rl[3*Vs],yl=rl[3*Vs+1],xl=rl[3*Vs+2],wl=Ss.elements,Al=1/(wl[3]*dl+wl[7]*yl+wl[11]*xl+wl[15]),bl=(wl[0]*dl+wl[4]*yl+wl[8]*xl+wl[12])*Al,Bl=(wl[1]*dl+wl[5]*yl+wl[9]*xl+wl[13])*Al,Cl=(wl[2]*dl+wl[6]*yl+wl[10]*xl+wl[14])*Al;qs[3*Ks+3*Vs]=bl,qs[3*Ks+3*Vs+1]=Bl,qs[3*Ks+3*Vs+2]=Cl,Zs[2*Ks+2*Vs]=tl[2*Vs],Zs[2*Ks+2*Vs+1]=tl[2*Vs+1],bl<al[0]&&(al[0]=bl),Bl<al[1]&&(al[1]=Bl),Cl<al[2]&&(al[2]=Cl),bl>al[3]&&(al[3]=bl),Bl>al[4]&&(al[4]=Bl),Cl>al[5]&&(al[5]=Cl)}for(al[0]<Qs[0]&&(Qs[0]=al[0]),al[1]<Qs[1]&&(Qs[1]=al[1]),al[2]<Qs[2]&&(Qs[2]=al[2]),al[3]>Qs[3]&&(Qs[3]=al[3]),al[4]>Qs[4]&&(Qs[4]=al[4]),al[5]>Qs[5]&&(Qs[5]=al[5]),Vs=0;Vs<cl;Vs++)Js[js+Vs]=Ks+il[Vs];Hs.push({materialIndex:Xs,name:Ys.name,chunkName:Cs(Ys.name),start:js,count:Ys.faces.indices.length,texture:(_s=Ys.texture)!==null&&_s!==void 0?_s:void 0}),Ks+=ll,js+=cl}for(Vs=0;Vs<Gs;Vs+=3){var Sl,El,Rl,Fl,jl,Vl,Wl,ul,pl,kl,$l,Ql,zl,Nl,su,ru,nu,Ul,Yl;Sl=3*Js[Vs],El=3*Js[Vs+1],Rl=3*Js[Vs+2],Fl=qs[Sl],jl=qs[Sl+1],Vl=qs[Sl+2],Wl=qs[El],ul=qs[El+1],pl=qs[El+2],kl=qs[Rl],nu=(Ql=qs[Rl+1]-ul)*(ru=Vl-pl)-(zl=qs[Rl+2]-pl)*(su=jl-ul),Ul=zl*(Nl=Fl-Wl)-($l=kl-Wl)*ru,Yl=$l*su-Ql*Nl,el[Sl]+=nu,el[Sl+1]+=Ul,el[Sl+2]+=Yl,el[El]+=nu,el[El+1]+=Ul,el[El+2]+=Yl,el[Rl]+=nu,el[Rl+1]+=Ul,el[Rl+2]+=Yl}$s.push({floorIndex:Fs,vertices:qs,uvs:Zs,indices:Js,normals:el,groups:Hs,extents:Qs})}}return $s}function Ri(va,_a,_s,Ss){var Ms=e$3.__assign({key:"texture.pbm",basisLoaderInitialized:Ii.isInitialized()},ni(_a,["format","quality","size","sharpen"]));return va=_a.transform?_a.transform(va,Ms):de(va,Ms),new Si({allowHosts:_s,networkSubscribe:Ss}).load(va,{wrapS:r$4.ClampToEdgeWrapping,wrapT:r$4.ClampToEdgeWrapping,minFilter:r$4.LinearFilter,maxSize:typeof Ms.size=="number"?new r$4.Vector2(Ms.size,Ms.size):void 0,preInit:!0}).then(function(Cs){var Ts=Cs.body;return Ts.needsUpdate=!0,Ts})}function Di(va,_a,_s,Ss,Ms,Cs,Ts){Ms===void 0&&(Ms={});for(var Bs=[],Ps=0,Ls=Qi(va);Ps<Ls.length;Ps++){var Rs=Ls[Ps],$s=Rs.floorIndex,Fs=Rs.vertices,Os=Rs.uvs,Gs=Rs.indices,Ns=Rs.normals,Vs=Rs.groups,Ds=Rs.extents,ks=new r$4.Box3;ks.min.x=Ds[0],ks.min.y=Ds[1],ks.min.z=Ds[2],ks.max.x=Ds[3],ks.max.y=Ds[4],ks.max.z=Ds[5];var Us=new r$4.BufferGeometry;Us.setAttribute("position",new r$4.BufferAttribute(Fs,3)),Us.setAttribute("uv",new r$4.BufferAttribute(Os,2)),Us.setAttribute("normal",new r$4.BufferAttribute(Ns,3)),Us.setIndex(new r$4.BufferAttribute(Gs,1)),Us.boundingBox=ks,Us.boundingSphere=ks.getBoundingSphere(new r$4.Sphere);for(var zs=0,Ws=Vs;zs<Ws.length;zs++){var qs=Ws[zs];Us.addGroup(qs.start,qs.count,qs.materialIndex)}for(var Zs=[],el=function(js){var Ks=_s[js.chunkName]||(js.texture?_a+js.texture:void 0),Xs=new Ee;if(Zs.push(Xs),Ks){var Ys=void 0;Ks in Ms?Ys=Ms[Ks]:(Ys=Ri(Ks,Ss,Cs,Ts),Ms[Ks]=Ys),Ys.then(function(rl){Xs.uniforms.map.value=rl,Xs.uniforms.exposure.value=3.3},function(){Xs.defines.USE_MAP=!1,Xs.uniforms.color.value=new r$4.Color(16777215)})}else Xs.defines.USE_MAP=!1,Xs.uniforms.color.value=new r$4.Color(16777215)},Js=0,Hs=Vs;Js<Hs.length;Js++)el(qs=Hs[Js]);var Qs=new pe(Us,Zs);Qs.name="model_floor_"+$s,Qs.floorIndex=$s,Bs.push(Qs)}return{objects:Bs,texturePromise:Promise.all(Object.keys(Ms).map(function(js){return Ms[js].catch(Lt)})).then(Lt)}}function ki(va,_a){return(va=Object.assign({},va)).autoResize!==!1&&(va.size=_a>96?Math.min(va.size||1/0,100):_a>48?Math.min(va.size||1/0,200):_a>24?Math.min(va.size||1/0,400):_a>12?Math.min(va.size||1/0,800):Math.min(va.size||1/0,1024)),va}function Ni(va){return va.indexOf("//")===0||/^[0-9a-z]+\:\/\//i.test(va)}Pi.Chunk=(()=>{function va(_a){if(_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.vertices=null,va.prototype.faces=null,va.prototype.name="",va.prototype.texture="",va.decode=function(_a,_s){_a instanceof Bi||(_a=Bi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Pi.Chunk;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:Ms.vertices=Pi.Vertices.decode(_a,_a.uint32());break;case 2:Ms.faces=Pi.Faces.decode(_a,_a.uint32());break;case 3:Ms.name=_a.string();break;case 4:Ms.texture=_a.string();break;default:_a.skipType(7&Cs)}}if(!Ms.hasOwnProperty("vertices"))throw Mi.ProtocolError("missing required 'vertices'",{instance:Ms});if(!Ms.hasOwnProperty("faces"))throw Mi.ProtocolError("missing required 'faces'",{instance:Ms});if(!Ms.hasOwnProperty("name"))throw Mi.ProtocolError("missing required 'name'",{instance:Ms});return Ms},va})(),Pi.Vertices=(()=>{function va(_a){if(this.xyz=[],this.uvs=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.xyz=Mi.emptyArray,va.prototype.uvs=Mi.emptyArray,va.decode=function(_a,_s){_a instanceof Bi||(_a=Bi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Pi.Vertices;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:if(Ms.xyz&&Ms.xyz.length||(Ms.xyz=[]),(7&Cs)==2){let Ts=_a.uint32()+_a.pos;for(;_a.pos<Ts;)Ms.xyz.push(_a.float())}else Ms.xyz.push(_a.float());break;case 2:if(Ms.uvs&&Ms.uvs.length||(Ms.uvs=[]),(7&Cs)==2){let Ts=_a.uint32()+_a.pos;for(;_a.pos<Ts;)Ms.uvs.push(_a.float())}else Ms.uvs.push(_a.float());break;default:_a.skipType(7&Cs)}}return Ms},va})(),Pi.Faces=(()=>{function va(_a){if(this.indices=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.indices=Mi.emptyArray,va.decode=function(_a,_s){_a instanceof Bi||(_a=Bi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Pi.Faces;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:if(Ms.indices&&Ms.indices.length||(Ms.indices=[]),(7&Cs)==2){let Ts=_a.uint32()+_a.pos;for(;_a.pos<Ts;)Ms.indices.push(_a.uint32())}else Ms.indices.push(_a.uint32());break;default:_a.skipType(7&Cs)}}return Ms},va})();const Fi=o$1.Reader,Oi=o$1.util,Li=o$1.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]||(o$1.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]={}),Vi=Li.Model=(()=>{function va(_a){if(this.meshes=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.meshes=Oi.emptyArray,va.decode=function(_a,_s){_a instanceof Fi||(_a=Fi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Li.Model;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:Ms.meshes&&Ms.meshes.length||(Ms.meshes=[]),Ms.meshes.push(Li.Mesh.decode(_a,_a.uint32()));break;default:_a.skipType(7&Cs)}}return Ms},va})();function Hi(va){for(var _a=[0,0,0],_s=0;_s<va.attributes.normal.array.length/9;_s++)_a[0]=va.attributes.normal.array[9*_s],_a[1]=va.attributes.normal.array[9*_s+1],_a[2]=va.attributes.normal.array[9*_s+2],va.attributes.normal.array[9*_s]=va.attributes.normal.array[9*_s+6],va.attributes.normal.array[9*_s+1]=va.attributes.normal.array[9*_s+7],va.attributes.normal.array[9*_s+2]=va.attributes.normal.array[9*_s+8],va.attributes.normal.array[9*_s+6]=_a[0],va.attributes.normal.array[9*_s+7]=_a[1],va.attributes.normal.array[9*_s+8]=_a[2];for(_s=0;_s<va.attributes.position.array.length/9;_s++)_a[0]=va.attributes.position.array[9*_s],_a[1]=va.attributes.position.array[9*_s+1],_a[2]=va.attributes.position.array[9*_s+2],va.attributes.position.array[9*_s]=va.attributes.position.array[9*_s+6],va.attributes.position.array[9*_s+1]=va.attributes.position.array[9*_s+7],va.attributes.position.array[9*_s+2]=va.attributes.position.array[9*_s+8],va.attributes.position.array[9*_s+6]=_a[0],va.attributes.position.array[9*_s+7]=_a[1],va.attributes.position.array[9*_s+8]=_a[2];for(_s=0;_s<va.attributes.uv.array.length/6;_s++)_a[0]=va.attributes.uv.array[6*_s],_a[1]=va.attributes.uv.array[6*_s+1],va.attributes.uv.array[6*_s]=va.attributes.uv.array[6*_s+4],va.attributes.uv.array[6*_s+1]=va.attributes.uv.array[6*_s+5],va.attributes.uv.array[6*_s+4]=_a[0],va.attributes.uv.array[6*_s+5]=_a[1];va.attributes.normal.needsUpdate=!0,va.attributes.position.needsUpdate=!0,va.attributes.uv.needsUpdate=!0}function Ki(va){var _a=va.position,_s=va.normal,Ss=va.uv,Ms=va.uv2,Cs=va.groups,Ts=new r$4.BufferGeometry;Ts.setAttribute("position",new r$4.BufferAttribute(new Float32Array(_a.array),3)),_s&&Ts.setAttribute("normal",new r$4.BufferAttribute(new Float32Array(_s.array),3)),Ss&&Ts.setAttribute("uv",new r$4.BufferAttribute(new Float32Array(Ss.array),2)),Ms&&Ts.setAttribute("uv2",new r$4.BufferAttribute(new Float32Array(Ms.array),2));for(var Bs=0,Ps=Cs;Bs<Ps.length;Bs++){var Ls=Ps[Bs];Ts.addGroup(Ls.start,Ls.count,Ls.materialIndex)}return Ts}function zi(va,_a,_s,Ss,Ms,Cs){if(Cs.hasOwnProperty(va))return Cs[va];Ni(va=va.split("?")[0])||(va=_a+va),(va=va.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")===0&&(va="https:"+va);var Ts=e$3.__assign({key:"texture.dome",size:64,basisLoaderInitialized:Ii.isInitialized()},ni(_s,["quality","format","sharpen"]));return Cs[va=_s.transform?_s.transform(va,Ts):de(va,Ts)]=Ms.load(va,{wrapS:r$4.RepeatWrapping,wrapT:r$4.RepeatWrapping}).then(function(Bs){var Ps=Bs.body;return Ss&&Ps.repeat.copy(Ss),Ps.needsUpdate=!0,Ps.updateMatrix(),Ps})}function qi(va,_a,_s,Ss,Ms){var Cs=[],Ts=new Ee,Bs=Ts.uniforms;Bs.exposure.value=4.3;var Ps=Ts.defines;if(Ps.USE_MAP=!1,Ps.USE_UV=!1,va.kd&&(Bs.diffuse.value=new r$4.Color().fromArray(va.kd.rgb)),va.mapkd){var Ls=null;if(va.mapkdrepeat){var Rs=va.mapkdrepeat.split(/\s+/).map(function(Gs){return Number(Gs)}),$s=Rs[0],Fs=Rs[1];Ls=new r$4.Vector2($s,Fs)}Cs.push(zi(va.mapkd,_a,_s,Ls,Ss,Ms).then(function(Gs){Ps.USE_MAP=!0,Ps.USE_UV=!0,Bs.map.value=Gs,Bs.uvTransform.value=Gs.matrix,Ts.needsUpdate=!0}).catch(Lt))}if(va.ks&&(Bs.specular.value=new r$4.Color().fromArray(va.ks.rgb)),va.mapks&&Cs.push(zi(va.mapks,_a,_s,null,Ss,Ms).then(function(Gs){Bs.specularMap.value=Gs}).catch(Lt)),va.ke&&(Bs.emissive.value=new r$4.Color().fromArray(va.ke.rgb)),va.mapke&&Cs.push(zi(va.mapke,_a,_s,null,Ss,Ms).then(function(Gs){Bs.emissiveMap.value=Gs}).catch(Lt)),va.norm&&Cs.push(zi(va.norm,_a,_s,null,Ss,Ms).then(function(Gs){Bs.normalMap.value=Gs}).catch(Lt)),va.mapbump&&Cs.push(zi(va.mapbump,_a,_s,null,Ss,Ms).then(function(Gs){Bs.bumpMap.value=Gs}).catch(Lt)),va.bump&&Cs.push(zi(va.bump,_a,_s,null,Ss,Ms).then(function(Gs){Bs.bumpMap.value=Gs}).catch(Lt)),typeof va.ns=="number"&&(Bs.shininess.value=va.ns),typeof va.d=="number"){var Os=va.d;Os>0&&Os<1&&(Ts.originOpacity=Os,Ts.opacity=Os)}return{material:Ts,textureReady:Promise.all(Cs).then(Lt)}}function _i(va,_a,_s,Ss,Ms){for(var Cs,Ts=[],Bs=[],Ps=(Cs=va,Vi.decode(Cs).meshes),Ls=new Si({allowHosts:Ss,networkSubscribe:Ms}),Rs=new r$4.Matrix4,$s=new r$4.Vector3,Fs=new r$4.Quaternion,Os=new r$4.Vector3,Gs={},Ns=0,Vs=Ps;Ns<Vs.length;Ns++){var Ds=Vs[Ns],ks=Ds.name,Us=Ds.chunks,zs=Ds.matrix;if(ks!=="Ceiling"&&ks!=="CeilingDrop")for(var Ws=0,qs=zs;Ws<qs.length;Ws++){var Zs=qs[Ws];Rs.elements=Zs.elements;var el=new fe;el.renderOrder=-3;for(var Js=0;Js<Us.length;Js++){var Hs=Ki(Us[Js].geometry);Hs.applyMatrix4(Rs),Rs.decompose($s,Fs,Os),Os.x*Os.y*Os.z<0&&Hs.attributes.normal&&Hs.attributes.position&&Hs.attributes.uv&&Hi(Hs);for(var Qs=[],js=0,Ks=Us[Js].material;js<Ks.length;js++){var Xs=qi(Ks[js],_a,_s,Ls,Gs),Ys=Xs.material,rl=Xs.textureReady;Bs.push(rl),Qs.push(Ys)}var tl=new pe(Hs,Qs);tl.name="chunk_"+Js,el.add(tl)}el.floorIndex=0,el.name=ks,Ts.push(el)}}return{objects:Ts,texturePromise:Promise.all(Bs).catch(Lt)}}function ji(va){return va==null}Li.Mesh=(()=>{function va(_a){if(this.chunks=[],this.matrix=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.name="",va.prototype.chunks=Oi.emptyArray,va.prototype.matrix=Oi.emptyArray,va.decode=function(_a,_s){_a instanceof Fi||(_a=Fi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Li.Mesh;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:Ms.name=_a.string();break;case 2:Ms.chunks&&Ms.chunks.length||(Ms.chunks=[]),Ms.chunks.push(Li.Chunk.decode(_a,_a.uint32()));break;case 3:Ms.matrix&&Ms.matrix.length||(Ms.matrix=[]),Ms.matrix.push(Li.Matrix.decode(_a,_a.uint32()));break;default:_a.skipType(7&Cs)}}if(!Ms.hasOwnProperty("name"))throw Oi.ProtocolError("missing required 'name'",{instance:Ms});return Ms},va})(),Li.Matrix=(()=>{function va(_a){if(this.elements=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.elements=Oi.emptyArray,va.decode=function(_a,_s){_a instanceof Fi||(_a=Fi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Li.Matrix;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:if(Ms.elements&&Ms.elements.length||(Ms.elements=[]),(7&Cs)==2){let Ts=_a.uint32()+_a.pos;for(;_a.pos<Ts;)Ms.elements.push(_a.float())}else Ms.elements.push(_a.float());break;default:_a.skipType(7&Cs)}}return Ms},va})(),Li.Chunk=(()=>{function va(_a){if(this.material=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.geometry=null,va.prototype.material=Oi.emptyArray,va.decode=function(_a,_s){_a instanceof Fi||(_a=Fi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Li.Chunk;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 2:Ms.geometry=Li.Geometry.decode(_a,_a.uint32());break;case 3:Ms.material&&Ms.material.length||(Ms.material=[]),Ms.material.push(Li.Material.decode(_a,_a.uint32()));break;default:_a.skipType(7&Cs)}}if(!Ms.hasOwnProperty("geometry"))throw Oi.ProtocolError("missing required 'geometry'",{instance:Ms});return Ms},va})(),Li.Geometry=(()=>{function va(_a){if(this.groups=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.position=null,va.prototype.uv=null,va.prototype.uv2=null,va.prototype.normal=null,va.prototype.groups=Oi.emptyArray,va.decode=function(_a,_s){_a instanceof Fi||(_a=Fi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Li.Geometry;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:Ms.position=Li.Position.decode(_a,_a.uint32());break;case 2:Ms.uv=Li.UV.decode(_a,_a.uint32());break;case 3:Ms.uv2=Li.UV.decode(_a,_a.uint32());break;case 4:Ms.normal=Li.Normal.decode(_a,_a.uint32());break;case 5:Ms.groups&&Ms.groups.length||(Ms.groups=[]),Ms.groups.push(Li.Group.decode(_a,_a.uint32()));break;default:_a.skipType(7&Cs)}}if(!Ms.hasOwnProperty("position"))throw Oi.ProtocolError("missing required 'position'",{instance:Ms});if(!Ms.hasOwnProperty("normal"))throw Oi.ProtocolError("missing required 'normal'",{instance:Ms});return Ms},va})(),Li.Position=(()=>{function va(_a){if(this.array=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.array=Oi.emptyArray,va.decode=function(_a,_s){_a instanceof Fi||(_a=Fi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Li.Position;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:if(Ms.array&&Ms.array.length||(Ms.array=[]),(7&Cs)==2){let Ts=_a.uint32()+_a.pos;for(;_a.pos<Ts;)Ms.array.push(_a.float())}else Ms.array.push(_a.float());break;default:_a.skipType(7&Cs)}}return Ms},va})(),Li.UV=(()=>{function va(_a){if(this.array=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.array=Oi.emptyArray,va.decode=function(_a,_s){_a instanceof Fi||(_a=Fi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Li.UV;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:if(Ms.array&&Ms.array.length||(Ms.array=[]),(7&Cs)==2){let Ts=_a.uint32()+_a.pos;for(;_a.pos<Ts;)Ms.array.push(_a.float())}else Ms.array.push(_a.float());break;default:_a.skipType(7&Cs)}}return Ms},va})(),Li.Normal=(()=>{function va(_a){if(this.array=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.array=Oi.emptyArray,va.decode=function(_a,_s){_a instanceof Fi||(_a=Fi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Li.Normal;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:if(Ms.array&&Ms.array.length||(Ms.array=[]),(7&Cs)==2){let Ts=_a.uint32()+_a.pos;for(;_a.pos<Ts;)Ms.array.push(_a.float())}else Ms.array.push(_a.float());break;default:_a.skipType(7&Cs)}}return Ms},va})(),Li.Group=(()=>{function va(_a){if(_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.start=0,va.prototype.count=0,va.prototype.materialIndex=0,va.decode=function(_a,_s){_a instanceof Fi||(_a=Fi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Li.Group;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:Ms.start=_a.uint32();break;case 2:Ms.count=_a.uint32();break;case 3:Ms.materialIndex=_a.uint32();break;default:_a.skipType(7&Cs)}}if(!Ms.hasOwnProperty("start"))throw Oi.ProtocolError("missing required 'start'",{instance:Ms});if(!Ms.hasOwnProperty("count"))throw Oi.ProtocolError("missing required 'count'",{instance:Ms});if(!Ms.hasOwnProperty("materialIndex"))throw Oi.ProtocolError("missing required 'materialIndex'",{instance:Ms});return Ms},va})(),Li.Material=(()=>{function va(_a){if(_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.kd=null,va.prototype.ks=null,va.prototype.ke=null,va.prototype.mapkd="",va.prototype.mapks="",va.prototype.mapke="",va.prototype.norm="",va.prototype.mapbump="",va.prototype.bump="",va.prototype.mapd="",va.prototype.ns=0,va.prototype.d=0,va.prototype.tr=0,va.prototype.mapkdrepeat="",va.decode=function(_a,_s){_a instanceof Fi||(_a=Fi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Li.Material;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:Ms.kd=Li.Color.decode(_a,_a.uint32());break;case 2:Ms.ks=Li.Color.decode(_a,_a.uint32());break;case 3:Ms.ke=Li.Color.decode(_a,_a.uint32());break;case 4:Ms.mapkd=_a.string();break;case 5:Ms.mapks=_a.string();break;case 6:Ms.mapke=_a.string();break;case 7:Ms.norm=_a.string();break;case 8:Ms.mapbump=_a.string();break;case 9:Ms.bump=_a.string();break;case 10:Ms.mapd=_a.string();break;case 11:Ms.ns=_a.float();break;case 12:Ms.d=_a.float();break;case 13:Ms.tr=_a.float();break;case 14:Ms.mapkdrepeat=_a.string();break;default:_a.skipType(7&Cs)}}return Ms},va})(),Li.Color=(()=>{function va(_a){if(this.rgb=[],_a)for(let _s=Object.keys(_a),Ss=0;Ss<_s.length;++Ss)_a[_s[Ss]]!=null&&(this[_s[Ss]]=_a[_s[Ss]])}return va.prototype.rgb=Oi.emptyArray,va.decode=function(_a,_s){_a instanceof Fi||(_a=Fi.create(_a));let Ss=_s===void 0?_a.len:_a.pos+_s,Ms=new Li.Color;for(;_a.pos<Ss;){let Cs=_a.uint32();switch(Cs>>>3){case 1:if(Ms.rgb&&Ms.rgb.length||(Ms.rgb=[]),(7&Cs)==2){let Ts=_a.uint32()+_a.pos;for(;_a.pos<Ts;)Ms.rgb.push(_a.float())}else Ms.rgb.push(_a.float());break;default:_a.skipType(7&Cs)}}return Ms},va})();var Ui=function(va,_a){_a===void 0&&(_a=1e-4),_a=Math.max(_a,Number.EPSILON);for(var _s={},Ss=va.getIndex(),Ms=va.getAttribute("position"),Cs=Ss?Ss.count:Ms.count,Ts=0,Bs=Object.keys(va.attributes),Ps={},Ls={},Rs=[],$s=["getX","getY","getZ","getW"],Fs=0,Os=Bs.length;Fs<Os;Fs++)Ps[Us=Bs[Fs]]=[],(Zs=va.morphAttributes[Us])&&(Ls[Us]=new Array(Zs.length).fill().map(function(){return[]}));var Gs=Math.log10(1/_a),Ns=Math.pow(10,Gs);for(Fs=0;Fs<Cs;Fs++){var Vs=Ss?Ss.getX(Fs):Fs,Ds="",ks=0;for(Os=Bs.length;ks<Os;ks++)for(var Us=Bs[ks],zs=(qs=va.getAttribute(Us)).itemSize,Ws=0;Ws<zs;Ws++)Ds+="".concat(~~(qs[$s[Ws]](Vs)*Ns),",");if(Ds in _s)Rs.push(_s[Ds]);else{for(ks=0,Os=Bs.length;ks<Os;ks++){Us=Bs[ks];var qs=va.getAttribute(Us),Zs=va.morphAttributes[Us],el=(zs=qs.itemSize,Ps[Us]),Js=Ls[Us];for(Ws=0;Ws<zs;Ws++){var Hs=$s[Ws];if(el.push(qs[Hs](Vs)),Zs)for(var Qs=0,js=Zs.length;Qs<js;Qs++)Js[Qs].push(Zs[Qs][Hs](Vs))}}_s[Ds]=Ts,Rs.push(Ts),Ts++}}var Ks=va.clone();for(Fs=0,Os=Bs.length;Fs<Os;Fs++){Us=Bs[Fs];var Xs=va.getAttribute(Us),Ys=new Xs.array.constructor(Ps[Us]);if(qs=new r$4.BufferAttribute(Ys,Xs.itemSize,Xs.normalized),Ks.setAttribute(Us,qs),Us in Ls)for(ks=0;ks<Ls[Us].length;ks++){var rl=va.morphAttributes[Us][ks],tl=(Ys=new rl.array.constructor(Ls[Us][ks]),new r$4.BufferAttribute(Ys,rl.itemSize,rl.normalized));Ks.morphAttributes[Us][ks]=tl}}return Ks.setIndex(Rs),Ks};function Gi(va){var _a;return new((_a=r$4.Triangle).bind.apply(_a,e$3.__spreadArray([void 0],va.map(function(_s){return new r$4.Vector3(_s.x,_s.y,_s.z)}),!1)))}var Wi={at3d:function(va,_a){for(var _s=ki(_a.textureOptions,va.textures.length),Ss={},Ms=0,Cs=va.textures;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss[Ts]=Ri(Ts,_s,_a.allowHosts,_a.networkSubscribe)}return Promise.resolve().then(function(){return ee(va.file,{responseType:"arraybuffer",allowHosts:_a.allowHosts,networkSubscribe:_a.networkSubscribe})}).then(function(Bs){return ii(Bs.body)}).then(function(Bs){return Ge(function(){for(var Ps,Ls={chunks:[]},Rs=0,$s=Bs;Rs<$s.length;Rs++){var Fs=$s[Rs],Os=Ti.decode(Fs);Os.chunks.length&&(Ps=Ls.chunks).push.apply(Ps,Os.chunks)}return Ls})}).then(function(Bs){return Ge(function(){return Di(Bs,va.textureBase,va.textures.slice(),_s,Ss,_a.allowHosts,_a.networkSubscribe)})})},pbm:function(va,_a){for(var _s=ki(_a.textureOptions,va.textures.length),Ss={},Ms=0,Cs=va.textures;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss[Ts]=Ri(Ts,_s,_a.allowHosts,_a.networkSubscribe)}return Promise.resolve().then(function(){return ee(va.file,{responseType:"arraybuffer",allowHosts:_a.allowHosts,networkSubscribe:_a.networkSubscribe})}).then(function(Bs){return Ge(function(){var Ps=new Uint8Array(Bs.body);return Ti.decode(Ps)})}).then(function(Bs){return Ge(function(){return Di(Bs,va.textureBase,va.textures.slice(),_s,Ss,_a.allowHosts,_a.networkSubscribe)})})},dome:function(va,_a){return Promise.resolve().then(function(){return ee(va.file,{responseType:"arraybuffer",allowHosts:_a.allowHosts,networkSubscribe:_a.networkSubscribe})}).then(function(_s){return _i(new Uint8Array(_s.body),va.textureBase,_a.textureOptions,_a.allowHosts,_a.networkSubscribe)})},domez:function(va,_a){return Promise.resolve().then(function(){return ee(va.file,{responseType:"arraybuffer",allowHosts:_a.allowHosts,networkSubscribe:_a.networkSubscribe})}).then(function(_s){return ii(_s.body)}).then(function(_s){var Ss=_s.reduce(function(Ts,Bs){return Ts+Bs.length},0),Ms=new Uint8Array(Ss),Cs=0;return _s.forEach(function(Ts){Ms.set(Ts,Cs),Cs+=Ts.length}),Ms}).then(function(_s){return _i(_s,va.textureBase,_a.textureOptions,_a.allowHosts,_a.networkSubscribe)})}},Xi=function(va){function _a(_s){_s===void 0&&(_s={});var Ss=va.call(this)||this;return Ss.empty=!0,Ss.name="model",Ss.loaded=!1,Ss.bvhs=Object.assign([],{loaded:!1}),Ss.bounding=new r$4.Box3,Ss.shownFloor=null,Ss.floorLength=0,Ss.networkSubscribe=_s.networkSubscribe,Ss.allowHosts=_s.allowHosts,Ss.renderOrder=-3,Ss}return e$3.__extends(_a,va),Object.defineProperty(_a.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),_a.prototype.getEdges=function(_s){var Ss;_s===void 0&&(_s=30/180*Math.PI);for(var Ms=Math.cos(_s),Cs=[],Ts=0,Bs=this.children;Ts<Bs.length;Ts++){var Ps=Bs[Ts];if(Ps instanceof pe){for(var Ls={},Rs=["a","b","c"],$s=Ui(Ps.geometry),Fs=$s.getAttribute("position").array,Os=((Ss=$s.getIndex())===null||Ss===void 0?void 0:Ss.array)||[],Gs=[],Ns=[],Vs=0,Ds=Fs.length;Vs<Ds;Vs+=3)Gs.push(new r$4.Vector3(Fs[Vs],Fs[Vs+1],Fs[Vs+2]));for(Vs=0,Ds=Os.length;Vs<Ds;Vs+=3){var ks=Os[Vs],Us=Os[Vs+1],zs=Os[Vs+2],Ws=new r$4.Vector3().crossVectors(Gs[Us].clone().sub(Gs[ks]),Gs[zs].clone().sub(Gs[ks])).normalize();Ns.push({a:ks,b:Us,c:zs,normal:Ws})}for(Vs=0,Ds=Ns.length;Vs<Ds;Vs++)for(var qs=Ns[Vs],Zs=0;Zs<3;Zs++){var el=qs[Rs[Zs]],Js=qs[Rs[(Zs+1)%3]],Hs=[Math.min(el,Js),Math.max(el,Js)];Ls[Qs=Hs[0]+"-"+Hs[1]]===void 0?Ls[Qs]={index1:Hs[0],index2:Hs[1],face1:Vs}:Ls[Qs].face2=Vs}for(var Qs in Ls){var js=Ls[Qs];if(js.face2===void 0||Ns[js.face1].normal.dot(Ns[js.face2].normal)<=Ms){var Ks=Gs[js.index1],Xs=Gs[js.index2];Cs.push(new r$4.Line3(Ks,Xs))}}$s.dispose(),Gs.length=0,Ns.length=0}}return Cs},_a.prototype.hasFloors=function(){return this.hasFloors_()},_a.prototype.hasFloors_=function(){var _s=[];return this.traverse(function(Ss){Ss instanceof pe&&(_s[Ss.floorIndex]=!0)}),_s.length},_a.prototype.show=function(){for(var _s,Ss=[],Ms=0;Ms<arguments.length;Ms++)Ss[Ms]=arguments[Ms];var Cs=this.shownFloor,Ts=null,Bs=1,Ps=(_s=Ss[1])!==null&&_s!==void 0?_s:.1,Ls=Ss.length!==0;this.shownFloor=Ts=Ls?Ss[0]:null,this.traverse(function(Rs){Rs instanceof pe&&Rs.material.forEach(function($s){Ts===null||Ts===Rs.floorIndex?$s.opacity=$s.originOpacity*Bs:$s.opacity=$s.originOpacity*Ps})}),Cs!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},_a.prototype.intersectRaycaster=function(_s,Ss){var Ms=_s.ray,Cs=Ms.origin,Ts=Ms.direction;if(ji(Ss))if(ji(this.shownFloor)){var Bs=this.floorLength;Ss=[];for(var Ps=-1;Ps<Bs;Ps++)Ss.push(Ps)}else Ss=[this.shownFloor];var Ls=[],Rs=[];Array.isArray(Ss)?Rs.push.apply(Rs,Ss):Rs.push(Ss);for(var $s=function(Ns){var Vs=Fs.bvhs&&Fs.bvhs[Ns];if(Vs){var Ds=new ke(Cs.x,Cs.y,Cs.z),ks=new ke(Ts.x,Ts.y,Ts.z);(Us=Vs.intersectRay(Ds,ks,!0).map(function(Ws){var qs=Ws.intersectionPoint,Zs=Ws.triangle,el=new r$4.Vector3(qs.x,qs.y,qs.z);return{point:el,face:{normal:Gi(Zs).getNormal(new r$4.Vector3)},distance:Cs.distanceTo(el)}})).length&&Ls.push.apply(Ls,Us)}else{var Us,zs=[];Fs.traverse(function(Ws){Ws instanceof pe&&Ws.floorIndex===Ns&&zs.push(Ws)}),(Us=_s.intersectObjects(zs).map(function(Ws){return{face:Ws.face?{normal:Ws.face.normal}:void 0,point:Ws.point,distance:Ws.distance}})).length&&Ls.push.apply(Ls,Us)}},Fs=this,Os=0,Gs=Rs;Os<Gs.length;Os++)$s(Gs[Os]);return Ls.filter(function(Ns){var Vs=Ns.distance;return Vs<=_s.far&&Vs>=_s.near}).sort(function(Ns,Vs){return Ns.distance-Vs.distance})},_a.prototype.buildBVH=function(){if(!this.bvhs.loaded){var _s=[];this.traverse(function(qs){qs instanceof pe&&(_s[qs.floorIndex]=_s[qs.floorIndex]||[],_s[qs.floorIndex].push(qs.geometry))}),this.bvhs.length=0;for(var Ss=0,Ms=_s;Ss<Ms.length;Ss++){for(var Cs=Ms[Ss],Ts=0,Bs=0,Ps=Cs;Bs<Ps.length;Bs++){var Ls=0;Ls=(Gs=Ps[Bs]).index?Gs.index.array.length:Gs.attributes.position.array.length/3,Ts+=3*Math.floor(Ls/3)}for(var Rs=new Float32Array(3*Ts),$s=0,Fs=0,Os=Cs;Fs<Os.length;Fs++){var Gs,Ns=(Gs=Os[Fs]).attributes.position.array,Vs=Gs.index?Gs.index.array:null;if(Vs){for(var Ds=3*Math.floor(Vs.length/3),ks=0,Us=void 0,zs=void 0;ks<Ds;ks++)Us=3*($s+ks),zs=3*Vs[ks],Rs[Us]=Ns[zs],Rs[Us+1]=Ns[zs+1],Rs[Us+2]=Ns[zs+2];$s+=Ds}else{for(Ds=3*Math.floor(Ns.length/3/3),ks=0,Us=void 0,zs=void 0;ks<Ds;ks++)zs=3*ks,Rs[Us=3*($s+ks)]=Ns[zs],Rs[Us+1]=Ns[zs+1],Rs[Us+2]=Ns[zs+2];$s+=Ds}}var Ws=new Ke().create(Rs).splitNode(50);this.bvhs.push(Ws)}this.bvhs.loaded=!0,this.emit("bvhLoaded")}},_a.prototype.load=function(_s,Ss){var Ms=this;if(Ss===void 0&&(Ss={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var Cs=function(Bs,Ps){Ps===void 0&&(Ps=[]);var Ls=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(Bs);if(!Ls)return"";for(var Rs=0,$s=String(Ls[1]).trim().split(".").slice(1).reverse();Rs<$s.length;Rs++){var Fs=$s[Rs],Os=Ps.indexOf(Fs);if(Os>=0)return Ps[Os]}return""}(_s.file,Object.keys(Wi)),Ts=Wi[Cs];if(!Ts)throw new Error("[MODEL LOAD ERROR]: file type(".concat(Cs,") does not support."));return this.name=_s.file,Ts(_s,{textureOptions:Ss,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}).then(function(Bs){var Ps=Bs.objects,Ls=Bs.texturePromise;Ms.bounding.makeEmpty();for(var Rs=0,$s=Ps;Rs<$s.length;Rs++)(Ns=$s[Rs]).traverse(function(Vs){if(Vs instanceof pe){var Ds=Vs.geometry;Ds.boundingBox||Ds.computeBoundingBox(),Ds.boundingSphere||Ds.computeBoundingSphere(),Ms.bounding.union(Ds.boundingBox)}}),Ms.add(Ns);for(var Fs=Ms.bounding.getCenter(new r$4.Vector3),Os=0,Gs=Ps;Os<Gs.length;Os++){var Ns;(Ns=Gs[Os]).traverse(function(Vs){if(Vs instanceof pe)for(var Ds=0,ks=Vs.material;Ds<ks.length;Ds++)ks[Ds].uniforms.modelCenter.value=Fs})}Ms.floorLength=Ms.hasFloors_(),Ms.empty=!1,Ms.loaded=!0,Ge(function(){Ms.emit("geometryLoaded"),Ls.then(function(){Ms.emit("materialLoaded"),Ms.emit("loaded")})})}).catch(function(Bs){return Ms.name="",Ms.emit("error",Bs),Promise.reject(Bs)})},_a.prototype.dispose=function(){for(this.off(),this.disposeGeometry(),this.disposeMaterial();this.children.length;)this.remove(this.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},_a}(Ae);Object.assign(Xi.prototype,{on:Ot.prototype.on,once:Ot.prototype.once,off:Ot.prototype.off,emit:Ot.prototype.emit,hasListener:Ot.prototype.hasListener});function Yi(){for(var va=[],_a=0;_a<arguments.length;_a++)va[_a]=arguments[_a];var _s=[];va=va.map(function(Bs){return Bs.trim()}).filter(function(Bs){return Bs.length>0&&!/^\/+$/.test(Bs)});for(var Ss=0;Ss<va.length;Ss++){var Ms=Ss===0,Cs=Ss===va.length-1,Ts=va[Ss];Ms||(Ts=Ts.replace(/^\/+/,"")),Cs||(Ts=Ts.replace(/\/+$/,"")),_s.push(Ts)}return _s.join("/")}function Zi(va,_a){if(va===_a)return!0;if(va&&_a&&typeof va=="object"&&typeof _a=="object"){if(va.constructor!==_a.constructor)return!1;var _s,Ss,Ms;if(Array.isArray(va)){if((_s=va.length)!=_a.length)return!1;for(Ss=_s;Ss--!=0;)if(!Zi(va[Ss],_a[Ss]))return!1;return!0}if(va.constructor===RegExp)return va.source===_a.source&&va.flags===_a.flags;if(va.valueOf!==Object.prototype.valueOf)return va.valueOf()===_a.valueOf();if(va.toString!==Object.prototype.toString)return va.toString()===_a.toString();if((_s=(Ms=Object.keys(va)).length)!==Object.keys(_a).length)return!1;for(Ss=_s;Ss--!=0;)if(!Object.prototype.hasOwnProperty.call(_a,Ms[Ss]))return!1;for(Ss=_s;Ss--!=0;){var Cs=Ms[Ss];if(!Zi(va[Cs],_a[Cs]))return!1}return!0}return va!=va&&_a!=_a}function Ji(va){return typeof va=="number"}function $i(va){return(va&va-1)==0&&va!==0}var tn=function(){return new Error("Invalid input.")},en=function(){return new Error("Invalid certificate.")},nn=function(){return new Error("Invalid signature.")};function rn(va,_a){_a===void 0&&(_a=!1);var _s=typeof va;if(_s==="string")return JSON.stringify(va);if(va===!0)return"true";if(va===!1)return"false";if(va===null)return"null";if(va instanceof Array){for(var Ss="[",Ms=va.length-1,Cs=0;Cs<Ms;Cs++)Ss+=rn(va[Cs],!1)+",";return Ms>-1&&(Ss+=rn(va[Cs],!1)),Ss+"]"}if(va instanceof Object){if(typeof va.toJSON=="function")return rn(va.toJSON(),_a);var Ts=Object.keys(va).sort(),Bs=Ts.length;for(Ss="",Cs=0;Cs<Bs;){var Ps=Ts[Cs],Ls=rn(va[Ps],!0);Ls!==void 0&&(Cs&&Ss!==""&&(Ss+=","),Ss+=JSON.stringify(Ps)+":"+Ls),Cs++}return"{"+Ss+"}"}switch(_s){case"function":case"undefined":return _a?void 0:null;case"number":return 0;default:return isFinite(va)?va:null}}function on(va){return String(rn(va,!1))}function sn(va){var _a,_s,Ss;if(Array.isArray(va)){var Ms,Cs,Ts=void 0;if(va.length<=0)return tn();for(var Bs=function(zs){var Ws=sn(va[zs]);if(Ws instanceof Error)return{value:Ws};if(Ts){if(Ts!==Ws.issuer)return{value:en()}}else Ts=Ws.issuer;Ms?Ws.expire.getTime()<Ms.getTime()&&(Ms=Ws.expire):Ms=Ws.expire,Cs=Cs?Cs.filter(function(qs){return Ws.allowHosts.indexOf(qs)!==-1}):Ws.allowHosts},Ps=0;Ps<va.length;Ps++){var Ls=Bs(Ps);if(typeof Ls=="object")return Ls.value}return Kt({issuer:Ts,expire:Ms,allowHosts:Cs})}var Rs=JSON.parse(va),$s=typeof location<"u"?location.hostname:"",Fs=Date.now();if(typeof Rs!="object")return tn();var Os=new Date(typeof Rs.expire_at=="string"&&/^\d+$/.test(Rs.expire_at)?Number(Rs.expire_at):Rs.expire_at),Gs=Array.isArray(Rs.allow_hosts)?Rs.allow_hosts:[];if($s.length===0||qt($s)||Ut.filter(function(zs){return _t$1(zs,$s)}).length>0){var Ns=String((_a=Rs.certificate)!==null&&_a!==void 0?_a:"");if(Ns){var Vs=new Mt;return Vs.readCertPEM(Ns),Kt({issuer:Vs.getSubjectString(),expire:Os,allowHosts:Gs})}return Kt({issuer:"none",expire:Os,allowHosts:Gs})}var Ds=String((_s=Rs.certificate)!==null&&_s!==void 0?_s:"");if(!Ds)return en();var ks=new Mt;ks.readCertPEM(Ds);var Us=String((Ss=Rs._signature)!==null&&Ss!==void 0?Ss:"");return Us?function(zs,Ws,qs){var Zs=new Mt;if(typeof qs=="string"?Zs.readCertPEM(qs):Zs.readCertHex(qs.hex),Dt(Zs)===!1)return!1;var el=new X$1;return el.readCertPubKeyHex(Zs.hex,6),!!el.verify(zs,N$2(Ws))}(on(function(zs,Ws){for(var qs={},Zs=0,el=Object.keys(zs);Zs<el.length;Zs++){var Js=el[Zs];Ws.indexOf(Js)===-1&&(qs[Js]=zs[Js])}return qs}(Rs,["_signature"])),Us,ks)===!1?nn():Fs<Os.getTime()?Gs.filter(function(zs){return _t$1(zs,$s)}).length===0?function(zs){return new Error("host(".concat(JSON.stringify(zs),") is not allowed."))}($s):Kt({issuer:ks.getSubjectString(),expire:Os,allowHosts:Gs}):function(zs){return new Error("date(".concat(zs.toString(),") expired."))}(Os):nn()}var an=new WeakMap,un=function(){function va(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={works:[""],options:""}}return va.prototype.toJSON=function(){return this.raw.works},va.parse=dn,va}();function ln(va){return va==null?"null":Array.isArray(va)?"array":typeof va=="object"?"dict":"value"}function hn(va,_a){var _s=ln(va),Ss=ln(_a);if(Ss==="null")return va;if(Ss==="value")return _a;if(Ss!==_s)return JSON.parse(JSON.stringify(_a));if(Ss==="array")for(var Ms=0;Ms<_a.length;Ms++)va[Ms]=hn(va[Ms],_a[Ms]);else if(Ss==="dict")for(var Cs in _a)va[Cs]=hn(va[Cs],_a[Cs]);return va}function cn(va,_a,_s){for(var Ss,Ms=JSON.stringify(_a),Cs=[],Ts=0,Bs=[].concat(va);Ts<Bs.length;Ts++){var Ps=Bs[Ts];Ps instanceof un?Cs.push.apply(Cs,Ps.raw.works):typeof Ps=="string"?Cs.push(Ps):Cs.push(JSON.stringify(Ps))}var Ls=sn(Cs);if(Ls instanceof Error)return Ls;_a=JSON.parse(Ms),va=Cs.map(function(Vl){return JSON.parse(Vl)}).reduce(function(Vl,Wl){return hn(Vl,Wl)});var Rs=new un;if(Ls instanceof Error)return Ls;Rs.issuer=Ls.issuer,Rs.expire=Ls.expire,Rs.allowHosts=Ls.allowHosts,Rs.raw={works:Cs,options:Ms};var $s=(Ss=va.base_url)!==null&&Ss!==void 0?Ss:"";$s&&$s[$s.length-1]!=="/"&&($s+="/");var Fs=function(Vl,Wl){return Vl.indexOf(Wl)===0},Os=function(Vl,Wl){var ul,pl=Vl;if(_a.jsonp===!0){pl=Vl.replace(/([\?\#].*)?$/i,"");var kl=Pt("".concat(pl)).slice(0,7);pl="".concat(pl,".").concat(kl,".jsonp")}if(_a.shortPath===!0){var $l=pl.replace($s,"").split("."),Ql=(ul=$l.shift())!==null&&ul!==void 0?ul:"",zl=$l.join(".");pl=Yi($s,Pt(Ql))+(zl?"."+zl:"")}var Nl=pl.replace($s,"");return _a.baseURL&&(pl=Yi(_a.baseURL,Nl)),_s&&_s(Vl,pl,Nl,Wl),pl},Gs=function(Vl,Wl){var ul,pl,kl,$l,Ql,zl,Nl=Vl;if(!Ni(Vl)){var su=(zl=($l=(pl=(ul=va.panorama)===null||ul===void 0?void 0:ul.pano_high_cube_base_url)!==null&&pl!==void 0?pl:(kl=va.panorama)===null||kl===void 0?void 0:kl.pano_cube_base_url)!==null&&$l!==void 0?$l:(Ql=va.panorama)===null||Ql===void 0?void 0:Ql.base_url)!==null&&zl!==void 0?zl:"";su&&(su=Yi(su,String(Wl))),Nl=Yi(su,Nl)}return Ni(Nl)||(Nl=Yi($s,Nl)),Fs(Nl,$s)||console.warn("".concat(Nl," is not start with base_url(").concat($s,").")),Os(Nl,"panorama")},Ns=function(Vl){var Wl=Vl;return Ni(Wl)||(Wl=Yi($s,Vl)),Fs(Wl,$s)||console.warn("".concat(Wl," is not start with base_url(").concat($s,").")),Os(Wl,"model")},Vs=function(Vl,Wl){Wl===void 0&&(Wl="");var ul=Vl;return Ni(ul)||(ul=Yi(Wl,ul)),Ni(ul)||(ul=Yi($s,ul)),Fs(ul,$s)||console.warn("".concat(ul," is not start with base_url(").concat($s,").")),Os(ul,"texture")};if(Ls instanceof Error||(Rs.workCode=String(va.work_code||va.code||va.vr_code||va.workCode),Rs.name=String(va.name),Ls instanceof Error)||(va.initial&&(va.initial.mode!=="Floorplan"&&va.initial.mode!=="Topview"&&va.initial.mode!=="Panorama"&&va.initial.mode!=="VRPanorama"&&va.initial.mode!=="Model"&&va.initial.mode!=="DepthPanorama"||(Rs.initial.mode=va.initial.mode),Ji(va.initial.latitude)&&(Rs.initial.latitude=va.initial.latitude),Ji(va.initial.longitude)?Rs.initial.longitude=va.initial.longitude:Ji(va.initial.heading)&&(Rs.initial.longitude=-(360*(va.initial.heading-.25)+90)/180*Math.PI),Ji(va.initial.fov)&&(Rs.initial.fov=va.initial.fov),Ji(va.initial.panoIndex)?Rs.initial.panoIndex=va.initial.panoIndex:Ji(va.initial.pano_index)?Rs.initial.panoIndex=va.initial.pano_index:Ji(va.initial.pano)&&(Rs.initial.panoIndex=va.initial.pano)),Ls instanceof Error))return Ls;if(va.model){var Ds={bvh:!0,async:!1,textureBase:"",textures:[]};typeof _a.modelBvh=="boolean"?Ds.bvh=_a.modelBvh:typeof va.model.bvh=="boolean"?Ds.bvh=va.model.bvh:typeof va.bvh=="boolean"&&(Ds.bvh=va.bvh),va.model.file?Ds.file=Ns(va.model.file):va.model.file_url&&(Ds.file=Ns(va.model.file_url)),va.model.textureBase?Ds.textureBase=va.model.textureBase:va.model.material_base_url&&(Ds.textureBase=va.model.material_base_url),Array.isArray(va.model.textures)?Ds.textures=va.model.textures.map(function(Vl){return Vs(Vl,Ds.textureBase)}):Array.isArray(va.model.material_textures)&&(Ds.textures=va.model.material_textures.map(function(Vl){return Vs(Vl,Ds.textureBase)})),Ds.file&&(Rs.model=Ds)}if(Ls instanceof Error)return Ls;if(va.observers&&Array.isArray(va.observers)){var ks=[];va.panorama&&(Array.isArray(va.panorama)?ks=va.panorama:Array.isArray(va.panorama.list)?ks=va.panorama.list:Array.isArray(va.panorama.info)&&(ks=va.panorama.info));for(var Us=0;Us<va.observers.length;Us++){var zs={},Ws=va.observers[Us];if(!Ws)break;var qs=ks[Us];if(!qs)break;Ws=Object.assign({},Ws,qs,{active:Ws.active!==!1&&qs.active!==!1}),zs.panoIndex=Us,zs.active=Ws.active!==!1,zs.loadable=Ws.loadable===!0,zs.images={up:Gs(Ws.images?Ws.images.up:Ws.up,Us),down:Gs(Ws.images?Ws.images.down:Ws.down,Us),right:Gs(Ws.images?Ws.images.right:Ws.right,Us),left:Gs(Ws.images?Ws.images.left:Ws.left,Us),front:Gs(Ws.images?Ws.images.front:Ws.front,Us),back:Gs(Ws.images?Ws.images.back:Ws.back,Us)};var Zs=Ws.images?Ws.images.depth:Ws.depth;Zs&&(zs.images.depth=Gs(Zs,Us));var el=Ws.images?Ws.images.luminance:Ws.luminance;el&&(zs.images.luminance={up:Gs(el.up,Us),down:Gs(el.down,Us),right:Gs(el.right,Us),left:Gs(el.left,Us),front:Gs(el.front,Us),back:Gs(el.back,Us)});var Js=Ws.images?Ws.images.tiles:Ws.tiles;if(Js){for(var Hs=[],Qs=function(Vl){var Wl=Vl.match(/\/cube_(\d+)\//);if(Wl){var ul=Number(Wl[1]);if($i(ul))return ul}return!1},js=function(Vl,Wl){return Vl.replace(/\/cube_(\d+)\//,function(){return"/cube_".concat(Wl,"/")})},Ks=0,Xs=Js;Ks<Xs.length;Ks++){var Ys=Xs[Ks];if(typeof Ys=="number"){var rl=Ys,tl=Qs(zs.images.front);if(tl===!1)continue;if((xl=Math.max(tl,512*Math.pow(2,rl)))>2048){var il=js(zs.images.up,xl),ll=js(zs.images.down,xl),cl=js(zs.images.right,xl),al=js(zs.images.left,xl),dl=js(zs.images.front,xl),yl=js(zs.images.back,xl);Hs.push({level:rl,size:xl,up:il,down:ll,right:cl,left:al,front:dl,back:yl})}else il=zs.images.up,ll=zs.images.down,cl=zs.images.right,al=zs.images.left,dl=zs.images.front,yl=zs.images.back,Hs.push({level:rl,size:xl,up:il,down:ll,right:cl,left:al,front:dl,back:yl})}else{var xl;if(typeof(rl=Ys.level)!="number"||typeof(xl=Ys.size)!="number")continue;il=Gs(Ys.up,Us),ll=Gs(Ys.down,Us),cl=Gs(Ys.right,Us),al=Gs(Ys.left,Us),dl=Gs(Ys.front,Us),yl=Gs(Ys.back,Us),Hs.push({level:rl,size:xl,up:il,down:ll,right:cl,left:al,front:dl,back:yl})}}Hs.sort(function(Vl,Wl){return Vl.level-Wl.level}),zs.images.tiles=Hs}if(Ws.position instanceof r$4.Vector3)zs.position=Ws.position.clone();else{if(!Array.isArray(Ws.position))break;zs.position=new r$4.Vector3().fromArray(Ws.position)}if(Ws.standingPosition instanceof r$4.Vector3)zs.standingPosition=Ws.standingPosition.clone();else if(Array.isArray(Ws.standingPosition))zs.standingPosition=new r$4.Vector3().fromArray(Ws.standingPosition);else if(Ws.standing_position instanceof r$4.Vector3)zs.standingPosition=Ws.standing_position.clone();else{if(!Array.isArray(Ws.standing_position))break;zs.standingPosition=new r$4.Vector3().fromArray(Ws.standing_position)}if(Ws.quaternion instanceof r$4.Quaternion)zs.quaternion=Ws.quaternion.clone();else if(Array.isArray(Ws.quaternion))zs.quaternion=new r$4.Quaternion().fromArray(Ws.quaternion);else{if(!Ws.quaternion)break;var wl=Ws.quaternion,Al=wl.x,bl=wl.y,Bl=wl.z,Cl=wl.w;zs.quaternion=new r$4.Quaternion(Al,bl,Bl,Cl)}if(Array.isArray(Ws.accessibleNodes)?zs.accessibleNodes=Ws.accessibleNodes.slice():Array.isArray(Ws.accessible_nodes)&&(zs.accessibleNodes=Ws.accessible_nodes.slice()),Array.isArray(Ws.visibleNodes)?zs.visibleNodes=Ws.visibleNodes.slice():Array.isArray(Ws.visible_nodes)&&(zs.visibleNodes=Ws.visible_nodes.slice()),Ji(Ws.floorIndex)?zs.floorIndex=Ws.floorIndex:Ji(Ws.floor_index)?zs.floorIndex=Ws.floor_index:zs.floorIndex=0,Ws.video){var Sl={};typeof Ws.video.source=="string"&&(Sl.source=Ws.video.source),Ws.video.matrix instanceof r$4.Matrix4?Sl.matrix=Ws.video.matrix.clone():Array.isArray(Ws.video.matrix)&&(Sl.matrix=new r$4.Matrix4().fromArray(Ws.video.matrix)),Ws.video.size instanceof r$4.Vector2?Sl.size=Ws.video.size.clone():Array.isArray(Ws.video.size)&&(Sl.size=new r$4.Vector2().fromArray(Ws.video.size)),Sl.source&&Sl.matrix&&Sl.size&&(zs.video=Sl)}Rs.observers[Us]=zs}}if(Ls instanceof Error)return Ls;for(var El=0,Rl=Rs.observers;El<Rl.length;El++){if(!(zs=Rl[El]).accessibleNodes){zs.accessibleNodes=[];for(var Fl=0;Fl<Rs.observers.length;Fl++)Rs.observers[Fl]!==zs&&zs.accessibleNodes.push(Fl)}if(!zs.visibleNodes)for(zs.visibleNodes=[],Fl=0;Fl<Rs.observers.length;Fl++)Rs.observers[Fl]!==zs&&zs.visibleNodes.push(Fl)}if(Ls instanceof Error)return Ls;var jl=Kt(Rs);return an.set(jl,{works:Cs,options:Ms}),jl}function dn(va,_a,_s){typeof va=="string"&&va.trim()[0]==="{"&&(va=JSON.parse(va));var Ss=an.get(va);if(Ss){if(_a&&!Zi(JSON.parse(Ss.options),_a))throw new Error("[PARSE FAILED]: work is parsed with different options.");return va}var Ms=cn(va,_a??{},_s);if(Ms instanceof Error)throw new Error("[PARSE FAILED]: "+Ms.message);return Ms}function pn(va,_a,_s){return va<_a?_a:va>_s?_s:va}function An(va,_a,_s){return va+(_a-va)*_s}function fn(va,_a){var _s=_a[1]-_a[0];return va<_a[0]?fn(va+_s,_a):va>=_a[1]?fn(va-_s,_a):va}function gn(va,_a,_s,Ss){return Ss?function(Ms,Cs,Ts,Bs){var Ps=Bs[1]-Bs[0];return Ms=fn(Ms,Bs),An((Cs=fn(Cs,Bs))-Ms>Ps/2?Ms+Ps:Ms-Cs>Ps/2?Ms-Ps:Ms,Cs,Ts)}(va,_a,_s,Ss):An(va,_a,_s)}var vn=function(){function va(_a){for(var _s in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=Ht(),this.startVelocity=0,this.duration=0,this.keyframes=[],_a){var Ss=_a[_s];typeof Ss=="number"?(this.value[_s]=Ss,this.config[_s]={circle:!1}):(this.value[_s]=Ss.value,this.config[_s]={circle:Ss.circle})}this.keyframes=[{progress:0,value:e$3.__assign({},this.value)},{progress:1,value:e$3.__assign({},this.value)}]}return va.prototype.getProgress=function(_a){var _s=_a-this.startTime;return _s<0?0:_s>=this.duration?1:1-function(Ss,Ms,Cs,Ts){var Bs=(Ms*Cs+2*Ss)/Math.pow(Cs,3),Ps=-(2*Ms*Cs+3*Ss)/Math.pow(Cs,2),Ls=Ms,Rs=Ss;return Bs*Math.pow(Ts,3)+Ps*Math.pow(Ts,2)+Ls*Ts+Rs}(1,this.startVelocity,this.duration,_s)},va.prototype.getValue=function(_a){for(var _s=1;_s<this.keyframes.length;_s++)if(this.keyframes[_s].progress>_a){var Ss=this.keyframes[_s-1],Ms=this.keyframes[_s],Cs={};for(var Ts in this.config){var Bs=(_a-Ss.progress)/(Ms.progress-Ss.progress);Cs[Ts]=gn(Ss.value[Ts],Ms.value[Ts],Bs,this.config[Ts].circle)}return Cs}return e$3.__assign({},this.keyframes[this.keyframes.length-1].value)},va.prototype.getProgressVelocity=function(_a){var _s=_a-this.startTime;return _s>=this.duration?0:function(Ss,Ms,Cs,Ts){var Bs=(Ms*Cs+2*Ss)/Math.pow(Cs,3),Ps=-(2*Ms*Cs+3*Ss)/Math.pow(Cs,2),Ls=Ms;return 3*Bs*Math.pow(Ts,2)+2*Ps*Ts+Ls}(1,this.startVelocity,this.duration,_s)},va.prototype.update=function(_a){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress(_a))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},va.prototype.getKeyFrameSegment=function(_a){for(var _s=this.getProgress(_a),Ss=1;Ss<this.keyframes.length;Ss++)if(this.keyframes[Ss].progress>_s)return[this.keyframes[Ss-1],this.keyframes[Ss]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},va.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},va.prototype.set=function(_a,_s,Ss,Ms){var Cs;Ss===void 0&&(Ss=0),isNaN(_s)&&(_s=0),isNaN(Ss)&&(Ss=0),Ms=Ms??Ht();var Ts=this.getProgress(Ms),Bs=this.getValue(Ts),Ps={};for(var Ls in this.config)Ps[Ls]=(Cs=_a[Ls])!==null&&Cs!==void 0?Cs:Bs[Ls];var Rs=[{progress:0,value:Bs},{progress:1,value:Ps}];return this.setKeyframes(Rs,_s,Ss,Ms)},va.prototype.setKeyframes=function(_a,_s,Ss,Ms){var Cs=this;if(Ss===void 0&&(Ss=0),_a.length<2)throw new Error("keyframes invalid.");return isNaN(_s)&&(_s=0),isNaN(Ss)&&(Ss=0),this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(Ts,Bs){Ms=Ms??Ht(),Cs.progress=0,Cs.ended=!1,Cs.startTime=Ms,Cs.startVelocity=Ss,Cs.keyframes=_a,Cs.duration=_s,_s===0?(Cs.progress=1,Cs.value=e$3.__assign({},_a[_a.length-1].value)):Cs.value=e$3.__assign({},_a[0].value),Cs.callbacks=[Ts,Bs]})},va.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},va}(),mn=me(),yn=new r$4.Texture(mn);mn.onload=function(){return yn.needsUpdate=!0},mn.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var bn=new r$4.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),wn=new r$4.MeshBasicMaterial({map:yn,transparent:!0}),xn=new r$4.SphereBufferGeometry(.12,16,16),En=new r$4.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0});function In(){if(typeof document>"u"){var va=new r$4.Texture;return Object.assign(va,{draw:function(Rs){},retain:!1,pool:!1})}var _a=document.createElement("canvas"),_s=512,Ss=256,Ms=190;_a.setAttribute("width",String(_s)),_a.setAttribute("height",String(_s));var Cs=new r$4.Texture(_a),Ts=_a.getContext("2d");if(!Ts)throw Error("cannot create canvas context");var Bs=Ts.createRadialGradient(Ss,Ss,150,Ss,Ss,0);function Ps(){var Rs=Math.PI/12,$s=2*Math.PI/3;Ts&&(Ts.beginPath(),Ts.arc(Ss,Ss,Ms,0*$s,1*$s-Rs),Ts.stroke(),Ts.beginPath(),Ts.arc(Ss,Ss,Ms,1*$s,2*$s-Rs),Ts.stroke(),Ts.beginPath(),Ts.arc(Ss,Ss,Ms,2*$s,3*$s-Rs),Ts.stroke())}function Ls(Rs){Ts&&(Ts.clearRect(0,0,_s,_s),Ts.lineWidth=20,Rs!==-1&&(Ts.globalCompositeOperation="source-over",Ts.strokeStyle="rgba(255, 255, 255, 1)",Ps(),Ts.globalCompositeOperation="source-in",Ts.beginPath(),Ts.arc(Ss,Ss,Ms,0,2*Math.PI*Rs),Ts.strokeStyle="rgba(255, 255, 255, 1)",Ts.stroke(),Ts.globalCompositeOperation="source-over",Ts.strokeStyle="rgba(255, 255, 255, "+(Rs?.5:1)+")",Ps()),Ts.beginPath(),Ts.arc(Ss,Ss,150,0,2*Math.PI),Ts.closePath(),Ts.fillStyle=Bs,Ts.fill(),Ts.fillStyle="rgba(255, 255, 255, 0.01)",Ts.fillRect(0,0,_s,_s),Cs.needsUpdate=!0)}return Bs.addColorStop(0,"rgba(255, 255, 255, 1)"),Bs.addColorStop(.15,"rgba(255, 255, 255, 1)"),Bs.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),Bs.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),Bs.addColorStop(1,"rgba(255, 255, 255, 0.0)"),Ls(0),Object.assign(Cs,{draw:Ls,retain:!1,pool:!1})}var Cn=[],Sn=In();Sn.draw(0);var Bn=In();Bn.draw(1);var Mn=In();Mn.draw(-1);var Pn=new r$4.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function Tn(){return new r$4.Mesh(Pn,new r$4.MeshBasicMaterial({map:Sn,transparent:!0}))}function Qn(va,_a){var _s=va.map;_a===0||_a===1?(_s.pool===!0&&(_s.retain=!1),_a===0&&(va.map=Sn),_a===1&&(va.map=Bn)):(_s.pool!==!0&&(va.map=function(){for(var Ss=0,Ms=Cn;Ss<Ms.length;Ss++){var Cs=Ms[Ss];if(Cs.retain===!1)return Cs}var Ts=In();return Ts.pool=!0,Ts.retain=!0,Cn.push(Ts),Ts}()),va.map.draw(_a))}var Rn=function(va){function _a(){var _s=va.call(this)||this;return _s.loading=!1,_s.disabled=!1,_s.current=!1,_s.progress=0,_s.opacity=0,_s.hitTestMesh=new r$4.Mesh(xn,En),_s.add(_s.hitTestMesh),_s.centerMesh=Tn(),_s.centerMesh.position.y+=.01,_s.add(_s.centerMesh),_s.loadingMesh=new r$4.Mesh(bn,wn),_s.loadingMesh.position.y+=.011,_s.progressMotion=new vn({progress:_s.progress}),_s.opacityMotion=new vn({opacity:_s.opacity}),_s.needsRender=!0,_s.renderOrder=-2,_s}return e$3.__extends(_a,va),_a.prototype.setLoading=function(_s){var Ss=this;this.loading=_s,this.stopInterval&&this.stopInterval(),_s?(this.add(this.loadingMesh),this.stopInterval=se.shared.add(function(){Ss.loadingMesh.rotateOnAxis(new r$4.Vector3(0,1,0),.1),Ss.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},_a.prototype.setDisabled=function(_s){this.disabled=_s,function(Ss,Ms){var Cs=Ss.map;Cs.pool===!0&&(Cs.retain=!1),Ss.map=Ms?Mn:Sn}(this.centerMesh.material,_s),this.needsRender=!0},_a.prototype.setProgress=function(_s){this.setLoading(!1),this.setDisabled(!1),this.progress=_s=pn(_s,0,1),_s!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:_s},120).catch(Lt)},_a.prototype.setOpacity=function(_s){this.opacity=_s=pn(_s,0,1),this.current&&(_s=1),_s!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:_s},500).catch(Lt)},_a.prototype.setCurrent=function(_s){this.current!==_s&&(this.current=_s,this.setOpacity(this.opacity))},_a.prototype.updateTime=function(_s,Ss){this.opacityMotion.ended||(this.opacityMotion.update(_s),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(_s),Qn(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},_a.prototype.dispose=function(){this.setLoading(!1),this.remove(this.hitTestMesh),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},_a}(r$4.Object3D),Dn=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),kn=new Float32Array([0,1,1,1,0,0,1,0]),Nn=new Uint8Array([0,2,1,2,3,1]),Fn=new r$4.BufferGeometry;Fn.setAttribute("position",new r$4.BufferAttribute(Dn,3)),Fn.setAttribute("uv",new r$4.BufferAttribute(kn,2)),Fn.setIndex(new r$4.BufferAttribute(Nn,1));var On,Ln,Vn=(On=me(),Ln=new r$4.Texture,On.onload=function(){if(typeof document<"u"){var va=256,_a=document.createElement("canvas");_a.setAttribute("width",String(va)),_a.setAttribute("height",String(va));var _s=_a.getContext("2d");if(_s){_s.drawImage(On,0,0,va,va),_s.globalCompositeOperation="source-out";var Ss=128;_s.beginPath(),_s.lineWidth=29.952,_s.arc(Ss,Ss,84.48,0,2*Math.PI),_s.strokeStyle="rgba(255, 255, 255, 0.5)",_s.closePath(),_s.stroke(),Ln.image=_a,Ln.needsUpdate=!0}}},On.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Ln),Hn=function(){if(typeof document<"u"){var va=document.createElement("canvas");va.setAttribute("width",String(512)),va.setAttribute("height",String(512));var _a=va.getContext("2d");if(_a){var _s=256,Ss=199.68;return _a.beginPath(),_a.arc(_s,_s,Ss,0,2*Math.PI),_a.fillStyle="rgba(255, 255, 255, 0.1)",_a.closePath(),_a.fill(),_a.save(),_a.beginPath(),_a.arc(_s,_s,Ss,0,2*Math.PI),_a.strokeStyle="rgba(255, 255, 255, 0.5)",_a.lineWidth=10.24,_a.closePath(),_a.stroke(),new r$4.CanvasTexture(va)}}return null}(),Kn=function(){if(typeof document<"u"){var va=document.createElement("canvas");va.setAttribute("width",String(512)),va.setAttribute("height",String(512));var _a=va.getContext("2d");if(_a){var _s=256,Ss=138.24,Ms=_a.createLinearGradient(_s-Math.cos(Math.PI/4)*Ss,_s-Math.sin(Math.PI/4)*Ss,_s+Math.cos(Math.PI/4)*Ss,_s+Math.sin(Math.PI/4)*Ss);return Ms.addColorStop(0,"rgba(255, 255, 255, 1)"),Ms.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Ms.addColorStop(1,"rgba(255, 255, 255, 1)"),_a.beginPath(),_a.lineWidth=33.28,_a.arc(_s,_s,Ss,0,2*Math.PI),_a.strokeStyle=Ms,_a.shadowBlur=38.4,_a.shadowColor="rgba(0, 0, 0, 0.3)",_a.closePath(),_a.stroke(),new r$4.CanvasTexture(va)}}return null}(),zn=function(){if(typeof document<"u"){var va=document.createElement("canvas");va.setAttribute("width",String(512)),va.setAttribute("height",String(512));var _a=va.getContext("2d");if(_a){var _s=256,Ss=199.68,Ms=_a.createLinearGradient(_s+Math.cos(Math.PI/4)*Ss,_s-Math.sin(Math.PI/4)*Ss,_s-Math.cos(Math.PI/4)*Ss,_s+Math.sin(Math.PI/4)*Ss);return Ms.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Ms.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Ms.addColorStop(1,"rgba(255, 255, 255, 0.5)"),_a.beginPath(),_a.lineWidth=15.36,_a.arc(_s,_s,Ss,0,2*Math.PI),_a.strokeStyle=Ms,_a.shadowBlur=25.6,_a.shadowColor="rgba(0, 0, 0, 0.5)",_a.closePath(),_a.stroke(),new r$4.CanvasTexture(va)}}return null}(),qn=function(va,_a){var _s=128;va.clearRect(0,0,256,256),va.beginPath(),va.lineWidth=29.44,va.arc(_s,_s,84.48,0,2*Math.PI*_a),va.strokeStyle="rgba(255, 255, 255, 0.2)",va.stroke()},_n=function(){if(typeof document<"u"){var va=document.createElement("canvas");va.setAttribute("width",String(256)),va.setAttribute("height",String(256));var _a=va.getContext("2d");_a&&qn(_a,2*Math.PI);var _s=new r$4.CanvasTexture(va);return Object.assign(_s,{setProgress:function(Ss){_a&&(qn(_a,Ss),_s.needsUpdate=!0)}})}return null},jn=[],Un=_n(),Gn=function(va){function _a(){var _s=va.call(this)||this;_s.progress=0,_s.opacity=0,_s.loading=!1,_s.current=!1,_s.disabled=!1,_s.ringRotateMotion=new vn({angle:0}),_s.tapMotion=new vn({scale:1,opacity:1}),_s.progressMotion=new vn({progress:0}),_s.progressOpacityMotion=new vn({opacity:0}),_s.opacityMotion=new vn({opacity:0});var Ss={blending:r$4.CustomBlending,blendSrc:r$4.SrcAlphaFactor,blendDst:r$4.OneMinusSrcAlphaFactor,blendSrcAlpha:r$4.OneFactor,blendDstAlpha:r$4.OneMinusSrcAlphaFactor,depthWrite:!1};return _s.centerMesh=new r$4.Mesh(Fn,new r$4.MeshBasicMaterial(e$3.__assign(e$3.__assign({},Ss),{map:Kn,opacity:0}))),_s.ringMesh=new r$4.Mesh(Fn,new r$4.MeshBasicMaterial(e$3.__assign(e$3.__assign({},Ss),{map:zn,opacity:0}))),_s.loadingMesh=new r$4.Mesh(Fn,new r$4.MeshBasicMaterial(e$3.__assign(e$3.__assign({},Ss),{map:Vn,opacity:.5}))),_s.disableMesh=new r$4.Mesh(Fn,new r$4.MeshBasicMaterial(e$3.__assign(e$3.__assign({},Ss),{map:Hn,opacity:0}))),_s.progressMesh=new r$4.Mesh(Fn,new r$4.MeshBasicMaterial(e$3.__assign(e$3.__assign({},Ss),{map:Un,opacity:0}))),_s.loadingMesh.visible=!1,_s.disableMesh.visible=!1,_s.ringMesh.position.y=.003,_s.disableMesh.position.y=.002,_s.centerMesh.position.y=.002,_s.loadingMesh.position.y=.005,_s.progressMesh.position.y=.004,_s.centerMesh.frustumCulled=!1,_s.ringMesh.frustumCulled=!1,_s.progressMesh.frustumCulled=!1,_s.loadingMesh.frustumCulled=!1,_s.disableMesh.frustumCulled=!1,_s.renderOrder=-2,_s.add(_s.centerMesh),_s.add(_s.ringMesh),_s.add(_s.progressMesh),_s.add(_s.loadingMesh),_s.add(_s.disableMesh),_s.needsRender=!0,_s}return e$3.__extends(_a,va),_a.prototype.setProgress=function(_s){this.setDisabled(!1),this.setLoading(!1),this.progress!==_s&&(_s=pn(_s,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Lt),_s===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Lt),this.progressMotion.set({progress:pn(1.2*_s,0,1)},0).catch(Lt)):this.progressMotion.set({progress:pn(1.2*_s,0,1)},100).catch(Lt)),this.progress=_s)},_a.prototype.setOpacity=function(_s){this.opacity!==_s&&(this.opacity=_s=pn(_s,0,1),this.opacityMotion.set({opacity:_s},500).catch(Lt))},_a.prototype.setCurrent=function(_s){if(this.current!==_s){if(_s===!0&&this.ringRotateMotion.ended){var Ss=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Ss,5e3).catch(Lt)}this.current=_s}},_a.prototype.setLoading=function(_s){this.loading!==_s&&(this.loading=_s,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=_s,this.needsRender=!0)},_a.prototype.setDisabled=function(_s){this.disabled!==_s&&(this.disabled=_s,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=_s,this.ringMesh.visible=!_s,this.centerMesh.visible=!_s,this.needsRender=!0)},_a.prototype.tap=function(){var _s=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Lt),this.progressMotion.set({progress:0},0).catch(Lt),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){_s.progressOpacityMotion.set({opacity:_s.progress>0?1:0},300).catch(Lt),_s.progressMotion.set({progress:_s.progress},120).catch(Lt)}).catch(Lt)):Promise.resolve()},_a.prototype.updateTime=function(_s,Ss){var Ms;if(!this.progressMotion.ended){this.progressMotion.update(_s);var Cs=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Cs===0)this.progressMesh.material.map!==Un&&(jn.push(this.progressMesh.material.map),this.progressMesh.material.map=Un);else if(Cs===1)this.progressMesh.material.map!==Un&&(jn.push(this.progressMesh.material.map),this.progressMesh.material.map=Un);else{if(this.progressMesh.material.map===Un){var Ts=jn.pop()||_n();this.progressMesh.material.map=Ts}(Ms=this.progressMesh.material.map)===null||Ms===void 0||Ms.setProgress(Cs)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(_s);var Bs=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Bs,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(_s),Bs=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Bs,this.ringMesh.material.opacity=Bs,this.disableMesh.material.opacity=Bs,this.loadingMesh.material.opacity=Bs,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Ss/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(_s);var Ps=this.tapMotion.value.scale;this.centerMesh.scale.set(Ps,Ps,Ps),this.ringMesh.scale.set(Ps,Ps,Ps),this.progressMesh.scale.set(Ps,Ps,Ps),Bs=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Bs,this.ringMesh.material.opacity=Bs,this.disableMesh.material.opacity=Bs,this.loadingMesh.material.opacity=Bs,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(_s),this.ringMesh.quaternion.setFromEuler(new r$4.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},_a.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==Un&&(jn.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},_a}(r$4.Object3D),Wn=new r$4.CircleBufferGeometry(.1,16),Xn=function(){if(typeof document<"u"){var va=512,_a=document.createElement("canvas");_a.setAttribute("width",String(va)),_a.setAttribute("height",String(va));var _s=_a.getContext("2d");if(_s){var Ss=256,Ms=192,Cs=76.8;_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI),_s.strokeStyle="rgba(147, 162, 255, 0.3)",_s.shadowBlur=12.8,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.stroke(),_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI);var Ts=_s.createRadialGradient(Ss,Ss,153.6,Ss,Ss,230.4);Ts.addColorStop(0,"rgba(255, 255, 255, 0.3)"),Ts.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(1,"rgba(255, 255, 255, 0.3)"),_s.strokeStyle=Ts,_s.stroke(),_s.beginPath(),_s.lineWidth=4.8,_s.arc(Ss,Ss,228,0,2*Math.PI);var Bs=_s.createLinearGradient(0,0,va,0);return Bs.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Bs.addColorStop(.08,"rgba(255, 255, 255, 0.0)"),Bs.addColorStop(.92,"rgba(255, 255, 255, 0.0)"),Bs.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Bs,_s.stroke(),new r$4.CanvasTexture(_a)}}return null}(),Yn=new r$4.MeshBasicMaterial({map:Xn,transparent:!0}),Zn=function(va){function _a(){var _s=va.call(this)||this;return _s.ringMesh=new r$4.Mesh(Wn,Yn),_s.ringMesh.renderOrder=-3,_s.add(_s.ringMesh),_s}return e$3.__extends(_a,va),_a.prototype.dispose=function(){this.remove(this.ringMesh)},_a}(r$4.Object3D);function Jn(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function $n(){return(Jn()+Jn()+"-"+Jn()+"-4"+Jn().substr(0,3)+"-"+Jn()+"-"+Jn()+Jn()+Jn()).toLowerCase()}function tr(va,_a,_s){var Ss=Math.abs(va-_a);return Ss<.001||_s!==void 0&&Math.abs(_s-Ss)<.001}function er(va,_a,_s){return!tr(va,_a,_s)}function ir(va,_a){return va.distanceTo(_a)<.001}function nr(va,_a){return!ir(va,_a)}var rr=new r$4.Vector3(0,0,0),or=function(va){function _a(_s,Ss){Ss===void 0&&(Ss=rr);var Ms=va.call(this)||this,Cs=new r$4.BoxBufferGeometry(_s.max.x-_s.min.x+2*Ss.x,_s.max.y-_s.min.y+2*Ss.y,_s.max.z-_s.min.z+2*Ss.z,1,1);Cs.groups.length=0,Cs.groups.push({start:0,count:36,materialIndex:0}),Cs.applyMatrix4(new r$4.Matrix4().makeScale(-1,1,1));var Ts=new Ee;Ts.defines.USE_MAP=!1,Ts.defines.USE_UV=!1,Ts.uniforms.diffuse.value=new r$4.Color(16777215);var Bs=new pe(Cs,[Ts]);return Bs.floorIndex=-1,Bs.position.copy(_s.getCenter(new r$4.Vector3)),Bs.frustumCulled=!1,Ms.renderOrder=-3,Ms.add(Bs),Ms.boundingBox=new r$4.Box3,Ms.computeBoundingBox(),Ms}return e$3.__extends(_a,va),_a.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},_a.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},_a}(fe);function sr(va,_a){return _a===void 0&&(_a=rr),new or(va,_a)}var ar=2*Math.PI;function ur(va){return va>=0&&va<ar?va:(va%ar+ar)%ar}var lr=Math.PI,hr=2*lr;function cr(va,_a,_s){if(va===_a)return _a;var Ss=_a-va;return Math.abs(Ss)<=_s?_a:va+(Ss>0?1:-1)*_s}(function(){try{var va=document.createElement("canvas");!window.WebGLRenderingContext||!va.getContext("webgl")&&va.getContext("experimental-webgl")}catch{return!1}})();var dr=function(){var va=typeof navigator<"u"?navigator.userAgent.toLowerCase():"node";return/android/i.test(va)||/webos/i.test(va)||/ipad|iphone|ipod/i.test(va)||/iemobile/i.test(va)||/opera mini/i.test(va)||/blackberry/i.test(va)||/windows phone/i.test(va)};function pr(va,_a){va.mode=_a.mode,va.panoIndex=_a.panoIndex,va.longitude=_a.longitude,va.latitude=_a.latitude,va.fov=_a.fov,va.offset.copy(_a.offset)}function Ar(va,_a){return va.panoIndex===_a.panoIndex&&va.mode===_a.mode&&tr(va.longitude,_a.longitude,2*Math.PI)&&tr(va.latitude,_a.latitude)&&tr(va.fov,_a.fov)&&ir(va.offset,_a.offset)}var fr=function(va){return Number(va)};function gr(va,_a,_s){var Ss;_a===void 0&&(_a=fr),_s===void 0&&(_s=!1);for(var Ms,Cs=1/0,Ts=0,Bs=va;Ts<Bs.length;Ts++){var Ps=Bs[Ts],Ls=_a(Ps);Ls<=Cs&&(Ms=(Ss=[Ps,Ls])[0],Cs=Ss[1])}return _s?[Ms,Cs]:Ms}function vr(va){for(var _a in va)return!1;return!0}function mr(va){return{longitude:va.longitude,latitude:va.latitude,fov:va.fov,offset:va.offset.clone()}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var yr=function(va,_a,_s,Ss){var Ms,Cs=["","webkit","Moz","MS","ms","o"],Ts=_a.createElement?_a.createElement("div"):Ss,Bs=Math.round,Ps=Math.abs,Ls=Date.now;function Rs(nl,fl,ml){return setTimeout(Ds(nl,ml),fl)}function $s(nl,fl,ml){return!!Array.isArray(nl)&&(Fs(nl,ml[fl],ml),!0)}function Fs(nl,fl,ml){var _l;if(nl)if(nl.forEach)nl.forEach(fl,ml);else if(nl.length!==Ss)for(_l=0;_l<nl.length;)fl.call(ml,nl[_l],_l,nl),_l++;else for(_l in nl)nl.hasOwnProperty(_l)&&fl.call(ml,nl[_l],_l,nl)}function Os(nl,fl,ml){var _l="DEPRECATED METHOD: "+fl+`
`+ml+` AT 
`;return function(){var Ll=new Error("get-stack-trace"),tu=Ll&&Ll.stack?Ll.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ou=va.console&&(va.console.warn||va.console.log);return ou&&ou.call(va.console,_l,tu),nl.apply(this,arguments)}}Ms=typeof Object.assign!="function"?function(nl){if(nl===Ss||nl===null)throw new TypeError("Cannot convert undefined or null to object");for(var fl=Object(nl),ml=1;ml<arguments.length;ml++){var _l=arguments[ml];if(_l!==Ss&&_l!==null)for(var Ll in _l)_l.hasOwnProperty(Ll)&&(fl[Ll]=_l[Ll])}return fl}:Object.assign;var Gs=Os(function(nl,fl,ml){for(var _l=Object.keys(fl),Ll=0;Ll<_l.length;)(!ml||ml&&nl[_l[Ll]]===Ss)&&(nl[_l[Ll]]=fl[_l[Ll]]),Ll++;return nl},"extend","Use `assign`."),Ns=Os(function(nl,fl){return Gs(nl,fl,!0)},"merge","Use `assign`.");function Vs(nl,fl,ml){var _l,Ll=fl.prototype;(_l=nl.prototype=Object.create(Ll)).constructor=nl,_l._super=Ll,ml&&Ms(_l,ml)}function Ds(nl,fl){return function(){return nl.apply(fl,arguments)}}function ks(nl,fl){return typeof nl=="function"?nl.apply(fl&&fl[0]||Ss,fl):nl}function Us(nl,fl){return nl===Ss?fl:nl}function zs(nl,fl,ml){Fs(el(fl),function(_l){nl.addEventListener(_l,ml,!1)})}function Ws(nl,fl,ml){Fs(el(fl),function(_l){nl.removeEventListener(_l,ml,!1)})}function qs(nl,fl){for(;nl;){if(nl==fl)return!0;nl=nl.parentNode}return!1}function Zs(nl,fl){return nl.indexOf(fl)>-1}function el(nl){return nl.trim().split(/\s+/g)}function Js(nl,fl,ml){if(nl.indexOf&&!ml)return nl.indexOf(fl);for(var _l=0;_l<nl.length;){if(ml&&nl[_l][ml]==fl||!ml&&nl[_l]===fl)return _l;_l++}return-1}function Hs(nl){return Array.prototype.slice.call(nl,0)}function Qs(nl,fl,ml){for(var _l=[],Ll=[],tu=0;tu<nl.length;){var ou=fl?nl[tu][fl]:nl[tu];Js(Ll,ou)<0&&_l.push(nl[tu]),Ll[tu]=ou,tu++}return ml&&(_l=fl?_l.sort(function(yu,Jl){return yu[fl]>Jl[fl]}):_l.sort()),_l}function js(nl,fl){for(var ml,_l,Ll=fl[0].toUpperCase()+fl.slice(1),tu=0;tu<Cs.length;){if((_l=(ml=Cs[tu])?ml+Ll:fl)in nl)return _l;tu++}return Ss}var Ks=1;function Xs(nl){var fl=nl.ownerDocument||nl;return fl.defaultView||fl.parentWindow||va}var Ys="ontouchstart"in va,rl=js(va,"PointerEvent")!==Ss,tl=Ys&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),il="touch",ll="mouse",cl=24,al=["x","y"],dl=["clientX","clientY"];function yl(nl,fl){var ml=this;this.manager=nl,this.callback=fl,this.element=nl.element,this.target=nl.options.inputTarget,this.domHandler=function(_l){ks(nl.options.enable,[nl])&&ml.handler(_l)},this.init()}function xl(nl,fl,ml){var _l=ml.pointers.length,Ll=ml.changedPointers.length,tu=1&fl&&_l-Ll==0,ou=12&fl&&_l-Ll==0;ml.isFirst=!!tu,ml.isFinal=!!ou,tu&&(nl.session={}),ml.eventType=fl,function(yu,Jl){var Au=yu.session,Bu=Jl.pointers,Wu=Bu.length;Au.firstInput||(Au.firstInput=wl(Jl)),Wu>1&&!Au.firstMultiple?Au.firstMultiple=wl(Jl):Wu===1&&(Au.firstMultiple=!1);var Qu=Au.firstInput,Fu=Au.firstMultiple,Pu=Fu?Fu.center:Qu.center,zu=Jl.center=Al(Bu);Jl.timeStamp=Ls(),Jl.deltaTime=Jl.timeStamp-Qu.timeStamp,Jl.angle=Sl(Pu,zu),Jl.distance=Cl(Pu,zu),function(Su,pu){var Mu=pu.center,Ou=Su.offsetDelta||{},ku=Su.prevDelta||{},Du=Su.prevInput||{};pu.eventType!==1&&Du.eventType!==4||(ku=Su.prevDelta={x:Du.deltaX||0,y:Du.deltaY||0},Ou=Su.offsetDelta={x:Mu.x,y:Mu.y}),pu.deltaX=ku.x+(Mu.x-Ou.x),pu.deltaY=ku.y+(Mu.y-Ou.y)}(Au,Jl),Jl.offsetDirection=Bl(Jl.deltaX,Jl.deltaY);var Lu=bl(Jl.deltaTime,Jl.deltaX,Jl.deltaY);Jl.overallVelocityX=Lu.x,Jl.overallVelocityY=Lu.y,Jl.overallVelocity=Ps(Lu.x)>Ps(Lu.y)?Lu.x:Lu.y,Jl.scale=Fu?function(Su,pu){return Cl(pu[0],pu[1],dl)/Cl(Su[0],Su[1],dl)}(Fu.pointers,Bu):1,Jl.rotation=Fu?function(Su,pu){return Sl(pu[1],pu[0],dl)+Sl(Su[1],Su[0],dl)}(Fu.pointers,Bu):0,Jl.maxPointers=Au.prevInput?Jl.pointers.length>Au.prevInput.maxPointers?Jl.pointers.length:Au.prevInput.maxPointers:Jl.pointers.length,function(Su,pu){var Mu,Ou,ku,Du,Eu=Su.lastInterval||pu,ju=pu.timeStamp-Eu.timeStamp;if(pu.eventType!=8&&(ju>25||Eu.velocity===Ss)){var qu=pu.deltaX-Eu.deltaX,Ku=pu.deltaY-Eu.deltaY,Nu=bl(ju,qu,Ku);Ou=Nu.x,ku=Nu.y,Mu=Ps(Nu.x)>Ps(Nu.y)?Nu.x:Nu.y,Du=Bl(qu,Ku),Su.lastInterval=pu}else Mu=Eu.velocity,Ou=Eu.velocityX,ku=Eu.velocityY,Du=Eu.direction;pu.velocity=Mu,pu.velocityX=Ou,pu.velocityY=ku,pu.direction=Du}(Au,Jl);var $u=yu.element;qs(Jl.srcEvent.target,$u)&&($u=Jl.srcEvent.target),Jl.target=$u}(nl,ml),nl.emit("hammer.input",ml),nl.recognize(ml),nl.session.prevInput=ml}function wl(nl){for(var fl=[],ml=0;ml<nl.pointers.length;)fl[ml]={clientX:Bs(nl.pointers[ml].clientX),clientY:Bs(nl.pointers[ml].clientY)},ml++;return{timeStamp:Ls(),pointers:fl,center:Al(fl),deltaX:nl.deltaX,deltaY:nl.deltaY}}function Al(nl){var fl=nl.length;if(fl===1)return{x:Bs(nl[0].clientX),y:Bs(nl[0].clientY)};for(var ml=0,_l=0,Ll=0;Ll<fl;)ml+=nl[Ll].clientX,_l+=nl[Ll].clientY,Ll++;return{x:Bs(ml/fl),y:Bs(_l/fl)}}function bl(nl,fl,ml){return{x:fl/nl||0,y:ml/nl||0}}function Bl(nl,fl){return nl===fl?1:Ps(nl)>=Ps(fl)?nl<0?2:4:fl<0?8:16}function Cl(nl,fl,ml){ml||(ml=al);var _l=fl[ml[0]]-nl[ml[0]],Ll=fl[ml[1]]-nl[ml[1]];return Math.sqrt(_l*_l+Ll*Ll)}function Sl(nl,fl,ml){ml||(ml=al);var _l=fl[ml[0]]-nl[ml[0]],Ll=fl[ml[1]]-nl[ml[1]];return 180*Math.atan2(Ll,_l)/Math.PI}yl.prototype={handler:function(){},init:function(){this.evEl&&zs(this.element,this.evEl,this.domHandler),this.evTarget&&zs(this.target,this.evTarget,this.domHandler),this.evWin&&zs(Xs(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ws(this.element,this.evEl,this.domHandler),this.evTarget&&Ws(this.target,this.evTarget,this.domHandler),this.evWin&&Ws(Xs(this.element),this.evWin,this.domHandler)}};var El={mousedown:1,mousemove:2,mouseup:4},Rl="mousedown",Fl="mousemove mouseup";function jl(){this.evEl=Rl,this.evWin=Fl,this.pressed=!1,yl.apply(this,arguments)}Vs(jl,yl,{handler:function(nl){var fl=El[nl.type];1&fl&&nl.button===0&&(this.pressed=!0),2&fl&&nl.which!==1&&(fl=4),this.pressed&&(4&fl&&(this.pressed=!1),this.callback(this.manager,fl,{pointers:[nl],changedPointers:[nl],pointerType:ll,srcEvent:nl}))}});var Vl={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Wl={2:il,3:"pen",4:ll,5:"kinect"},ul="pointerdown",pl="pointermove pointerup pointercancel";function kl(){this.evEl=ul,this.evWin=pl,yl.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}va.MSPointerEvent&&!va.PointerEvent&&(ul="MSPointerDown",pl="MSPointerMove MSPointerUp MSPointerCancel"),Vs(kl,yl,{handler:function(nl){var fl=this.store,ml=!1,_l=nl.type.toLowerCase().replace("ms",""),Ll=Vl[_l],tu=Wl[nl.pointerType]||nl.pointerType,ou=tu==il,yu=Js(fl,nl.pointerId,"pointerId");1&Ll&&(nl.button===0||ou)?yu<0&&(fl.push(nl),yu=fl.length-1):12&Ll&&(ml=!0),yu<0||(fl[yu]=nl,this.callback(this.manager,Ll,{pointers:fl,changedPointers:[nl],pointerType:tu,srcEvent:nl}),ml&&fl.splice(yu,1))}});var $l={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ql="touchstart",zl="touchstart touchmove touchend touchcancel";function Nl(){this.evTarget=Ql,this.evWin=zl,this.started=!1,yl.apply(this,arguments)}function su(nl,fl){var ml=Hs(nl.touches),_l=Hs(nl.changedTouches);return 12&fl&&(ml=Qs(ml.concat(_l),"identifier",!0)),[ml,_l]}Vs(Nl,yl,{handler:function(nl){var fl=$l[nl.type];if(fl===1&&(this.started=!0),this.started){var ml=su.call(this,nl,fl);12&fl&&ml[0].length-ml[1].length==0&&(this.started=!1),this.callback(this.manager,fl,{pointers:ml[0],changedPointers:ml[1],pointerType:il,srcEvent:nl})}}});var ru={touchstart:1,touchmove:2,touchend:4,touchcancel:8},nu="touchstart touchmove touchend touchcancel";function Ul(){this.evTarget=nu,this.targetIds={},yl.apply(this,arguments)}function Yl(nl,fl){var ml=Hs(nl.touches),_l=this.targetIds;if(3&fl&&ml.length===1)return _l[ml[0].identifier]=!0,[ml,ml];var Ll,tu,ou=Hs(nl.changedTouches),yu=[],Jl=this.target;if(tu=ml.filter(function(Au){return qs(Au.target,Jl)}),fl===1)for(Ll=0;Ll<tu.length;)_l[tu[Ll].identifier]=!0,Ll++;for(Ll=0;Ll<ou.length;)_l[ou[Ll].identifier]&&yu.push(ou[Ll]),12&fl&&delete _l[ou[Ll].identifier],Ll++;return yu.length?[Qs(tu.concat(yu),"identifier",!0),yu]:void 0}Vs(Ul,yl,{handler:function(nl){var fl=ru[nl.type],ml=Yl.call(this,nl,fl);ml&&this.callback(this.manager,fl,{pointers:ml[0],changedPointers:ml[1],pointerType:il,srcEvent:nl})}});function Hl(){yl.apply(this,arguments);var nl=Ds(this.handler,this);this.touch=new Ul(this.manager,nl),this.mouse=new jl(this.manager,nl),this.primaryTouch=null,this.lastTouches=[]}function Dl(nl,fl){1&nl?(this.primaryTouch=fl.changedPointers[0].identifier,gl.call(this,fl)):12&nl&&gl.call(this,fl)}function gl(nl){var fl=nl.changedPointers[0];if(fl.identifier===this.primaryTouch){var ml={x:fl.clientX,y:fl.clientY};this.lastTouches.push(ml);var _l=this.lastTouches;setTimeout(function(){var Ll=_l.indexOf(ml);Ll>-1&&_l.splice(Ll,1)},2500)}}function ql(nl){for(var fl=nl.srcEvent.clientX,ml=nl.srcEvent.clientY,_l=0;_l<this.lastTouches.length;_l++){var Ll=this.lastTouches[_l],tu=Math.abs(fl-Ll.x),ou=Math.abs(ml-Ll.y);if(tu<=25&&ou<=25)return!0}return!1}Vs(Hl,yl,{handler:function(nl,fl,ml){var _l=ml.pointerType==il,Ll=ml.pointerType==ll;if(!(Ll&&ml.sourceCapabilities&&ml.sourceCapabilities.firesTouchEvents)){if(_l)Dl.call(this,fl,ml);else if(Ll&&ql.call(this,ml))return;this.callback(nl,fl,ml)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Xl=Ts?js(Ts.style,"touchAction"):Ss,uu=Xl!==Ss,Zl="compute",hu="auto",vu="manipulation",mu="none",bu="pan-x",du="pan-y",_u=function(){if(!uu)return!1;var nl={},fl=va.CSS&&va.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(ml){nl[ml]=!fl||va.CSS.supports("touch-action",ml)}),nl}();function wu(nl,fl){this.manager=nl,this.set(fl)}wu.prototype={set:function(nl){nl==Zl&&(nl=this.compute()),uu&&this.manager.element.style&&_u[nl]&&(this.manager.element.style[Xl]=nl),this.actions=nl.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var nl=[];return Fs(this.manager.recognizers,function(fl){ks(fl.options.enable,[fl])&&(nl=nl.concat(fl.getTouchAction()))}),function(fl){if(Zs(fl,mu))return mu;var ml=Zs(fl,bu),_l=Zs(fl,du);return ml&&_l?mu:ml||_l?ml?bu:du:Zs(fl,vu)?vu:hu}(nl.join(" "))},preventDefaults:function(nl){var fl=nl.srcEvent,ml=nl.offsetDirection;if(this.manager.session.prevented)fl.preventDefault();else{var _l=this.actions,Ll=Zs(_l,mu)&&!_u.none,tu=Zs(_l,du)&&!_u["pan-y"],ou=Zs(_l,bu)&&!_u["pan-x"];if(Ll){var yu=nl.pointers.length===1,Jl=nl.distance<2,Au=nl.deltaTime<250;if(yu&&Jl&&Au)return}if(!ou||!tu)return Ll||tu&&6&ml||ou&&ml&cl?this.preventSrc(fl):void 0}},preventSrc:function(nl){this.manager.session.prevented=!0,nl.preventDefault()}};var xu=32;function Iu(nl){this.options=Ms({},this.defaults,nl||{}),this.id=Ks++,this.manager=null,this.options.enable=Us(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Gu(nl){return 16&nl?"cancel":8&nl?"end":4&nl?"move":2&nl?"start":""}function Uu(nl){return nl==16?"down":nl==8?"up":nl==2?"left":nl==4?"right":""}function hl(nl,fl){var ml=fl.manager;return ml?ml.get(nl):nl}function Il(){Iu.apply(this,arguments)}function Tl(){Il.apply(this,arguments),this.pX=null,this.pY=null}function Pl(){Il.apply(this,arguments)}function Gl(){Iu.apply(this,arguments),this._timer=null,this._input=null}function lu(){Il.apply(this,arguments)}function au(){Il.apply(this,arguments)}function eu(){Iu.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function iu(nl,fl){return(fl=fl||{}).recognizers=Us(fl.recognizers,iu.defaults.preset),new cu(nl,fl)}Iu.prototype={defaults:{},set:function(nl){return Ms(this.options,nl),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(nl){if($s(nl,"recognizeWith",this))return this;var fl=this.simultaneous;return fl[(nl=hl(nl,this)).id]||(fl[nl.id]=nl,nl.recognizeWith(this)),this},dropRecognizeWith:function(nl){return $s(nl,"dropRecognizeWith",this)||(nl=hl(nl,this),delete this.simultaneous[nl.id]),this},requireFailure:function(nl){if($s(nl,"requireFailure",this))return this;var fl=this.requireFail;return Js(fl,nl=hl(nl,this))===-1&&(fl.push(nl),nl.requireFailure(this)),this},dropRequireFailure:function(nl){if($s(nl,"dropRequireFailure",this))return this;nl=hl(nl,this);var fl=Js(this.requireFail,nl);return fl>-1&&this.requireFail.splice(fl,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(nl){return!!this.simultaneous[nl.id]},emit:function(nl){var fl=this,ml=this.state;function _l(Ll){fl.manager.emit(Ll,nl)}ml<8&&_l(fl.options.event+Gu(ml)),_l(fl.options.event),nl.additionalEvent&&_l(nl.additionalEvent),ml>=8&&_l(fl.options.event+Gu(ml))},tryEmit:function(nl){if(this.canEmit())return this.emit(nl);this.state=xu},canEmit:function(){for(var nl=0;nl<this.requireFail.length;){if(!(33&this.requireFail[nl].state))return!1;nl++}return!0},recognize:function(nl){var fl=Ms({},nl);if(!ks(this.options.enable,[this,fl]))return this.reset(),void(this.state=xu);56&this.state&&(this.state=1),this.state=this.process(fl),30&this.state&&this.tryEmit(fl)},process:function(nl){},getTouchAction:function(){},reset:function(){}},Vs(Il,Iu,{defaults:{pointers:1},attrTest:function(nl){var fl=this.options.pointers;return fl===0||nl.pointers.length===fl},process:function(nl){var fl=this.state,ml=nl.eventType,_l=6&fl,Ll=this.attrTest(nl);return _l&&(8&ml||!Ll)?16|fl:_l||Ll?4&ml?8|fl:2&fl?4|fl:2:xu}}),Vs(Tl,Il,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var nl=this.options.direction,fl=[];return 6&nl&&fl.push(du),nl&cl&&fl.push(bu),fl},directionTest:function(nl){var fl=this.options,ml=!0,_l=nl.distance,Ll=nl.direction,tu=nl.deltaX,ou=nl.deltaY;return Ll&fl.direction||(6&fl.direction?(Ll=tu===0?1:tu<0?2:4,ml=tu!=this.pX,_l=Math.abs(nl.deltaX)):(Ll=ou===0?1:ou<0?8:16,ml=ou!=this.pY,_l=Math.abs(nl.deltaY))),nl.direction=Ll,ml&&_l>fl.threshold&&Ll&fl.direction},attrTest:function(nl){return Il.prototype.attrTest.call(this,nl)&&(2&this.state||!(2&this.state)&&this.directionTest(nl))},emit:function(nl){this.pX=nl.deltaX,this.pY=nl.deltaY;var fl=Uu(nl.direction);fl&&(nl.additionalEvent=this.options.event+fl),this._super.emit.call(this,nl)}}),Vs(Pl,Il,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[mu]},attrTest:function(nl){return this._super.attrTest.call(this,nl)&&(Math.abs(nl.scale-1)>this.options.threshold||2&this.state)},emit:function(nl){if(nl.scale!==1){var fl=nl.scale<1?"in":"out";nl.additionalEvent=this.options.event+fl}this._super.emit.call(this,nl)}}),Vs(Gl,Iu,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hu]},process:function(nl){var fl=this.options,ml=nl.pointers.length===fl.pointers,_l=nl.distance<fl.threshold,Ll=nl.deltaTime>fl.time;if(this._input=nl,!_l||!ml||12&nl.eventType&&!Ll)this.reset();else if(1&nl.eventType)this.reset(),this._timer=Rs(function(){this.state=8,this.tryEmit()},fl.time,this);else if(4&nl.eventType)return 8;return xu},reset:function(){clearTimeout(this._timer)},emit:function(nl){this.state===8&&(nl&&4&nl.eventType?this.manager.emit(this.options.event+"up",nl):(this._input.timeStamp=Ls(),this.manager.emit(this.options.event,this._input)))}}),Vs(lu,Il,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[mu]},attrTest:function(nl){return this._super.attrTest.call(this,nl)&&(Math.abs(nl.rotation)>this.options.threshold||2&this.state)}}),Vs(au,Il,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Tl.prototype.getTouchAction.call(this)},attrTest:function(nl){var fl,ml=this.options.direction;return 30&ml?fl=nl.overallVelocity:6&ml?fl=nl.overallVelocityX:ml&cl&&(fl=nl.overallVelocityY),this._super.attrTest.call(this,nl)&&ml&nl.offsetDirection&&nl.distance>this.options.threshold&&nl.maxPointers==this.options.pointers&&Ps(fl)>this.options.velocity&&4&nl.eventType},emit:function(nl){var fl=Uu(nl.offsetDirection);fl&&this.manager.emit(this.options.event+fl,nl),this.manager.emit(this.options.event,nl)}}),Vs(eu,Iu,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vu]},process:function(nl){var fl=this.options,ml=nl.pointers.length===fl.pointers,_l=nl.distance<fl.threshold,Ll=nl.deltaTime<fl.time;if(this.reset(),1&nl.eventType&&this.count===0)return this.failTimeout();if(_l&&Ll&&ml){if(nl.eventType!=4)return this.failTimeout();var tu=!this.pTime||nl.timeStamp-this.pTime<fl.interval,ou=!this.pCenter||Cl(this.pCenter,nl.center)<fl.posThreshold;if(this.pTime=nl.timeStamp,this.pCenter=nl.center,ou&&tu?this.count+=1:this.count=1,this._input=nl,this.count%fl.taps===0)return this.hasRequireFailures()?(this._timer=Rs(function(){this.state=8,this.tryEmit()},fl.interval,this),2):8}return xu},failTimeout:function(){return this._timer=Rs(function(){this.state=xu},this.options.interval,this),xu},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),iu.VERSION="2.0.7",iu.defaults={domEvents:!1,touchAction:Zl,enable:!0,inputTarget:null,inputClass:null,preset:[[lu,{enable:!1}],[Pl,{enable:!1},["rotate"]],[au,{direction:6}],[Tl,{direction:6},["swipe"]],[eu],[eu,{event:"doubletap",taps:2},["tap"]],[Gl]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function cu(nl,fl){var ml;this.options=Ms({},iu.defaults,fl||{}),this.options.inputTarget=this.options.inputTarget||nl,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=nl,this.input=new((ml=this).options.inputClass||(rl?kl:tl?Ul:Ys?Hl:jl))(ml,xl),this.touchAction=new wu(this,this.options.touchAction),gu(this,!0),Fs(this.options.recognizers,function(_l){var Ll=this.add(new _l[0](_l[1]));_l[2]&&Ll.recognizeWith(_l[2]),_l[3]&&Ll.requireFailure(_l[3])},this)}function gu(nl,fl){var ml,_l=nl.element;_l.style&&(Fs(nl.options.cssProps,function(Ll,tu){ml=js(_l.style,tu),fl?(nl.oldCssProps[ml]=_l.style[ml],_l.style[ml]=Ll):_l.style[ml]=nl.oldCssProps[ml]||""}),fl||(nl.oldCssProps={}))}return cu.prototype={set:function(nl){return Ms(this.options,nl),nl.touchAction&&this.touchAction.update(),nl.inputTarget&&(this.input.destroy(),this.input.target=nl.inputTarget,this.input.init()),this},stop:function(nl){this.session.stopped=nl?2:1},recognize:function(nl){var fl=this.session;if(!fl.stopped){var ml;this.touchAction.preventDefaults(nl);var _l=this.recognizers,Ll=fl.curRecognizer;(!Ll||Ll&&8&Ll.state)&&(Ll=fl.curRecognizer=null);for(var tu=0;tu<_l.length;)ml=_l[tu],fl.stopped===2||Ll&&ml!=Ll&&!ml.canRecognizeWith(Ll)?ml.reset():ml.recognize(nl),!Ll&&14&ml.state&&(Ll=fl.curRecognizer=ml),tu++}},get:function(nl){if(nl instanceof Iu)return nl;for(var fl=this.recognizers,ml=0;ml<fl.length;ml++)if(fl[ml].options.event==nl)return fl[ml];return null},add:function(nl){if($s(nl,"add",this))return this;var fl=this.get(nl.options.event);return fl&&this.remove(fl),this.recognizers.push(nl),nl.manager=this,this.touchAction.update(),nl},remove:function(nl){if($s(nl,"remove",this))return this;if(nl=this.get(nl)){var fl=this.recognizers,ml=Js(fl,nl);ml!==-1&&(fl.splice(ml,1),this.touchAction.update())}return this},on:function(nl,fl){if(nl!==Ss&&fl!==Ss){var ml=this.handlers;return Fs(el(nl),function(_l){ml[_l]=ml[_l]||[],ml[_l].push(fl)}),this}},off:function(nl,fl){if(nl!==Ss){var ml=this.handlers;return Fs(el(nl),function(_l){fl?ml[_l]&&ml[_l].splice(Js(ml[_l],fl),1):delete ml[_l]}),this}},emit:function(nl,fl){this.options.domEvents&&function(Ll,tu){var ou=_a.createEvent("Event");ou.initEvent(Ll,!0,!0),ou.gesture=tu,tu.target.dispatchEvent(ou)}(nl,fl);var ml=this.handlers[nl]&&this.handlers[nl].slice();if(ml&&ml.length){fl.type=nl,fl.preventDefault=function(){fl.srcEvent.preventDefault()};for(var _l=0;_l<ml.length;)ml[_l](fl),_l++}},destroy:function(){this.element&&gu(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Ms(iu,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:xu,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:cl,DIRECTION_ALL:30,Manager:cu,Input:yl,TouchAction:wu,TouchInput:Ul,MouseInput:jl,PointerEventInput:kl,TouchMouseInput:Hl,SingleTouchInput:Nl,Recognizer:Iu,AttrRecognizer:Il,Tap:eu,Pan:Tl,Swipe:au,Pinch:Pl,Rotate:lu,Press:Gl,on:zs,off:Ws,each:Fs,merge:Ns,extend:Gs,assign:Ms,inherit:Vs,bindFn:Ds,prefixed:js}),iu}(typeof window<"u"?window:{},typeof document<"u"?document:{});function br(va,_a,_s){var Ss=_a.offsetWidth,Ms=_a.offsetHeight,Cs=_a.getBoundingClientRect(),Ts=Cs.top,Bs=Cs.left;return _s&&(Bs+=Ss*_s.left,Ts+=Ms*(1-_s.bottom-_s.height),Ss*=_s.width,Ms*=_s.height),new r$4.Vector2((va.x-Bs)/Ss*2-1,-(va.y-Ts)/Ms*2+1)}var wr=new r$4.OrthographicCamera(-1,1,1,-1,0,1),xr=new r$4.BufferGeometry;xr.setAttribute("position",new r$4.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),xr.setAttribute("uv",new r$4.Float32BufferAttribute([0,2,0,0,2,0],2));var Er=new r$4.Mesh(xr),Ir=new r$4.Scene;Ir.add(Er);var Cr=function(){function va(_a,_s){var Ss;this.renderer=_a,this.material=new r$4.ShaderMaterial({vertexShader:(Ss=_s.vertex)!==null&&Ss!==void 0?Ss:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:_s.fragment,uniforms:Object.assign({inputBuffer:new r$4.Uniform(null)},_s.uniforms),defines:Object.assign({},_s.defines),blending:r$4.NoBlending,depthWrite:!1,depthTest:!1})}return va.prototype.render=function(_a,_s){var Ss=this.renderer.getRenderTarget(),Ms=Er.material;this.material.uniforms.inputBuffer.value=_a.texture,Er.material=this.material,this.renderer.setRenderTarget(_s||null),this.renderer.render(Ir,wr),this.renderer.setRenderTarget(Ss),Er.material=Ms},va.prototype.dispose=function(){this.material.dispose()},va}(),Sr=function(){function va(_a){this.renderer=_a,this.material=new r$4.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$4.Uniform(new r$4.Vector3)}),blending:r$4.NoBlending,depthWrite:!1,depthTest:!1})}return va.prototype.render=function(_a,_s){var Ss=this.renderer.getRenderTarget(),Ms=Er.material;this.material.uniforms.inputValue.value.copy(_a),Er.material=this.material,this.renderer.setRenderTarget(_s||null),this.renderer.render(Ir,wr),this.renderer.setRenderTarget(Ss),Er.material=Ms},va.prototype.dispose=function(){this.material.dispose()},va}(),Br=function(va){function _a(_s){return va.call(this,_s,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return e$3.__extends(_a,va),_a}(Cr),Mr=function(){function va(_a){this.enable=!0,this.renderer=_a,this.copyPass=new Br(this.renderer)}return va.prototype.render=function(_a,_s,Ss){this.copyPass.render(_a,_s)},va.prototype.dispose=function(){this.copyPass.dispose()},va}(),Pr=function(va){function _a(_s){var Ss,Ms=this;Ms=va.call(this)||this;var Cs=_a.parseArgs(_s);return Ms.pending=!0,Ms.userAction=Cs.initial[3],Ms.destroyed=!1,Ms.ident=Cs.ident,Ms.scene=Cs.scene,Ms.helper=Cs.helper,Ms.camera=Cs.camera,Ms.renderer=Cs.renderer,Ms.scissor=Cs.scissor,Ms.element=Cs.element,Ms.model=Cs.model,Ms.enableIOSEDR=(Ss=Cs.enableIOSEDR)!==null&&Ss!==void 0&&Ss,Ms.work=Cs.work,Ms.imageOptions=Cs.imageOptions,Ms.videoTexture=Cs.videoTexture,Ms.networkSubscribe=Cs.networkSubscribe,Ms.needsRender=!0,Ms.maxFov=120,Ms.minFov=40,Ms.maxLatitude=+Math.PI/2,Ms.minLatitude=-Math.PI/2,Ms.cameraMotion=new vn({longitude:{value:Ms.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:Ms.camera.pose.latitude,fov:Ms.camera.pose.fov}),Ms.eventUnbinds=[Cs.element].concat(Cs.extraElements||[]).map(function(Ts){return Ms.bindEvents(Ts)}),se.shared.add(function(){return Ms.initAnimation.apply(Ms,Cs.initial)},!0),Ms}return e$3.__extends(_a,va),_a.parseArgs=function(_s){return e$3.__assign({},_s)},_a.initAnimationEndState=function(_s){var Ss=this.parseArgs(_s);return{longitude:Ss.camera.pose.longitude,latitude:Ss.camera.pose.latitude,fov:Ss.camera.pose.fov,offset:Ss.camera.pose.offset.clone()}},_a.prototype.destroy=function(){var _s;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var Ss=0,Ms=this.eventUnbinds;Ss<Ms.length;Ss++)(0,Ms[Ss])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,(_s=this.pressState)===null||_s===void 0||_s.stop(),delete this.pressState},_a.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},_a.prototype.bindExtraElement=function(_s){for(var Ss=0,Ms=this.eventUnbinds;Ss<Ms.length;Ss++)if(Ms[Ss].element===_s)return;this.eventUnbinds.push(this.bindEvents(_s))},_a.prototype.unbindExtraElement=function(_s){for(var Ss=[],Ms=0,Cs=this.eventUnbinds;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ts.element===_s?Ts():Ss.push(Ts)}this.eventUnbinds=Ss},_a.prototype.updateRenderSize=function(){this.needsRender=!0},_a.prototype.updateModel=function(_s){this.model=_s,this.needsRender=!0},_a.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){return this.work=_s,this.userAction=Ts,!1},_a.prototype.updateTime=function(_s,Ss){if(!this.destroyed){var Ms={};this.cameraMotion.ended&&(this.cameraMotion.update(_s),Ms.longitude=this.cameraMotion.value.longitude,Ms.latitude=this.cameraMotion.value.latitude,Ms.fov=this.cameraMotion.value.fov),vr(Ms)&&this.setCamera(Ms)}},_a.prototype.render=function(_s){this.renderer.render(this.scene,this.camera)},_a.prototype.postProcessing=function(_s,Ss,Ms){this.destroyed||(this.effect||(this.effect=new Mr(this.renderer)),this.effect.render(_s,Ss,Ms))},_a.prototype.updateCamera=function(_s,Ss,Ms){return this.userAction=Ms,this.cameraMotion.set(_s,Ss)},_a.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:this.camera.pose.offset.clone()}},_a.prototype.moveToPano=function(_s,Ss,Ms){Ss===void 0&&(Ss={}),this.userAction=Ms;var Cs={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone()};Ss.moveStartCallback&&Ss.moveStartCallback(_s,Cs),this.emit("moveToPano",_s,this.userAction),this.emit("panoWillArrive",_s,Cs,this.userAction),this.emit("panoArrived",_s,Cs,this.userAction),Ss.moveEndCallback&&Ss.moveEndCallback(_s,Cs)},_a.prototype.initAnimation=function(_s,Ss,Ms,Cs){this.pending=!1,this.userAction=Cs},_a.prototype.setCamera=function(_s){var Ss,Ms,Cs,Ts,Bs;_s===void 0&&(_s={});var Ps=(Ss=_s.longitude)!==null&&Ss!==void 0?Ss:this.camera.pose.longitude,Ls=(Ms=_s.latitude)!==null&&Ms!==void 0?Ms:this.camera.pose.latitude,Rs=(Cs=_s.fov)!==null&&Cs!==void 0?Cs:this.camera.pose.fov,$s=(Ts=_s.distance)!==null&&Ts!==void 0?Ts:this.camera.pose.distance,Fs=(Bs=_s.offset)!==null&&Bs!==void 0?Bs:this.camera.pose.offset,Os=this.camera.position.clone(),Gs=er(Ps,this.camera.pose.longitude,2*Math.PI)||er(Ls,this.camera.pose.latitude),Ns=er(Rs,this.camera.pose.fov),Vs=er($s,this.camera.pose.distance),Ds=nr(Fs,this.camera.pose.offset);this.camera.setFromPose({longitude:Ps,latitude:Ls,fov:Rs,distance:$s,offset:Fs});var ks=nr(Os,this.camera.position);Ns&&this.emit("cameraFovUpdate",Rs,this.userAction),Gs&&this.emit("cameraDirectionUpdate",{longitude:Ps,latitude:Ls},this.userAction),ks&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(Ns||Gs||Ds||Vs)&&this.emit("cameraUpdate",{longitude:Ps,latitude:Ls,fov:Rs,offset:Fs},this.userAction),this.needsRender=!0,(ze||_e.length!==0)&&(ze&&clearTimeout(ze),ze=window.setTimeout(Ue,200))},_a.prototype.onPanGesture=function(_s){var Ss=this.panState,Ms=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Ms,x:_s.center.x,y:_s.center.y},Ss!==void 0&&Ss.pointerLength===Ms){var Cs=_s.pointers.map(function(Ts){return ni(Ts,["x","y"])});this.emit("wantsGesture","pan",Cs,_s.isFinal)||this.emit("gesture","pan",Cs,_s.isFinal)}},_a.prototype.onTapGesture=function(_s){var Ss=_s.pointers.map(function(Ms){return ni(Ms,["x","y"])});this.emit("wantsGesture","tap",Ss,!0)||this.emit("gesture","tap",Ss,!0)},_a.prototype.onPressGesture=function(_s,Ss){var Ms,Cs=[_s];if(this.emit("wantsGesture","press",Cs,Ss))return(Ms=this.pressState)===null||Ms===void 0||Ms.stop(),void delete this.pressState;this.emit("gesture","press",Cs,Ss)},_a.prototype.onPinchGesture=function(_s){var Ss=_s.pointers.map(function(Ms){return ni(Ms,["x","y"])});this.emit("wantsGesture","pinch",Ss,_s.isFinal)||this.emit("gesture","pinch",Ss,_s.isFinal)},_a.prototype.onMouseWheel=function(_s){var Ss=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Ms=[{x:_s.clientX,y:_s.clientY,delta:Ss}];this.emit("wantsGesture","mouseWheel",Ms,!1)||this.emit("gesture","mouseWheel",Ms,!1)},_a.prototype.onMouseMove=function(_s){},_a.prototype.onMouseOut=function(){},_a.prototype.relativeClientPosition=function(_s){return br(_s,this.element,this.scissor)},_a.prototype.bindEvents=function(_s){var Ss=this,Ms=function(Ns){var Vs=br(Ns,Ss.element,Ss.scissor);return!(Math.abs(Vs.x)>1||Math.abs(Vs.y)>1)},Cs=new yr.Manager(_s),Ts=function(Ns){return Ns.session.firstInput||null};Cs.add(new yr.Pan({threshold:10,pointers:0})),Cs.add(new yr.Tap({interval:410})),Cs.add(new yr.Pinch({threshold:0,pointers:2}).recognizeWith(Cs.get("pan"))),Cs.on("panstart pan",function(Ns){var Vs=Ts(Cs);Vs&&!Ms(Vs.center)||(Ss.onPanGesture(Ns),Os())}),Cs.on("tap",function(Ns){var Vs=Ts(Cs);Vs&&!Ms(Vs.center)||(Ss.onTapGesture(Ns),Os())}),Cs.on("pinchstart pinch pinchend",function(Ns){var Vs=Ts(Cs);Vs&&!Ms(Vs.center)||(Ss.onPinchGesture(Ns),Os())});var Bs=function(Ns){var Vs={x:Ns.clientX,y:Ns.clientY};Ms(Vs)&&(Ss.onMouseWheel(Ns),Os())},Ps=function(Ns){if(!dr()){var Vs={x:Ns.clientX,y:Ns.clientY};Ms(Vs)?(Ss.onMouseMove(Ns),Ss.pressState&&Math.abs(Ns.clientX-Ss.pressState.x)>10&&Math.abs(Ns.clientY-Ss.pressState.y)>10&&Os()):Ss.onMouseOut()}},Ls=function(){Ss.onMouseOut(),Os()},Rs=function(Ns,Vs){if(Ms(Ns)){Ss.pressState={x:Ns.x,y:Ns.y,time:Ss.pressState?Ss.pressState.time:Vs,stop:Lt};var Ds=Vs-Ss.pressState.time;Ss.onPressGesture({x:Ns.x,y:Ns.y,delta:Ds},!1),Ss.pressState&&(Ss.pressState.stop=se.shared.add(function(ks){return Rs({x:Ns.x,y:Ns.y},ks)},!0,1))}else Os()},$s=function(Ns){Os(),Ns.touches.length>1||Ns.changedTouches.length<=0||Rs({x:Ns.changedTouches[0].clientX,y:Ns.changedTouches[0].clientY},Ht())},Fs=function(Ns){Os(),Rs({x:Ns.clientX,y:Ns.clientY},Ht())},Os=function(){var Ns;if(Ss.pressState){var Vs=Ht()-Ss.pressState.time;Ss.onPressGesture({x:Ss.pressState.x,y:Ss.pressState.y,delta:Vs},!0),(Ns=Ss.pressState)===null||Ns===void 0||Ns.stop(),delete Ss.pressState}},Gs=function(Ns){if(Ns&&typeof Ns.preventDefault=="function"&&Ns.currentTarget===_s&&Ns.preventDefault(),typeof getSelection=="function"){var Vs=getSelection();Vs&&Vs.focusNode&&(Vs.removeAllRanges&&Vs.removeAllRanges(),Vs.empty&&Vs.empty())}};return _s.addEventListener("wheel",Bs,!1),_s.addEventListener("mousemove",Ps,!1),_s.addEventListener("mouseout",Ls,!1),_s.addEventListener("touchstart",$s,!1),_s.addEventListener("touchend",Os,!1),_s.addEventListener("touchcancel",Os,!1),_s.addEventListener("mousedown",Fs,!1),_s.addEventListener("mouseup",Os,!1),_s.addEventListener("touchstart",Gs,!1),Object.assign(function(){Cs.destroy(),_s.removeEventListener("wheel",Bs,!1),_s.removeEventListener("mousemove",Ps,!1),_s.removeEventListener("mouseout",Ls,!1),_s.removeEventListener("touchstart",$s,!1),_s.removeEventListener("touchend",Os,!1),_s.removeEventListener("touchcancel",Os,!1),_s.removeEventListener("mousedown",Fs,!1),_s.removeEventListener("mouseup",Os,!1),_s.removeEventListener("touchstart",Gs,!1)},{element:_s})},_a}(Ot),Tr=function(va){function _a(_s){var Ss,Ms,Cs,Ts,Bs=this,Ps=_a.parseArgs(_s);return(Bs=va.call(this,Ps)||this).defaultLongitude=Ps.defaultLongitude,Bs.defaultLatitude=Ps.defaultLatitude,Bs.defaultFov=Ps.defaultFov,Bs.maxFov=Ps.maxFov,Bs.minFov=Ps.minFov,Bs.maxLatitude=Ps.maxLatitude,Bs.minLatitude=Ps.minLatitude,Bs.locationMotion=new vn({x:Bs.camera.pose.offset.x,y:Bs.camera.pose.offset.y,z:Bs.camera.pose.offset.z,distance:Bs.camera.pose.distance,modelAlpha:(Ms=(Ss=Bs.model.getMaterial())===null||Ss===void 0?void 0:Ss.modelAlpha)!==null&&Ms!==void 0?Ms:0,perspToOrtho:(Ts=(Cs=Bs.model.getMaterial())===null||Cs===void 0?void 0:Cs.perspToOrtho)!==null&&Ts!==void 0?Ts:0}),Bs}return e$3.__extends(_a,va),_a.parseArgs=function(_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs=va.parseArgs.call(this,_s);return e$3.__assign(e$3.__assign({},Rs),{defaultLongitude:(Ss=_s.defaultLongitude)!==null&&Ss!==void 0?Ss:Math.PI/4,defaultLatitude:(Ms=_s.defaultLatitude)!==null&&Ms!==void 0?Ms:Math.PI/4,defaultFov:(Cs=_s.defaultFov)!==null&&Cs!==void 0?Cs:80,maxFov:(Ts=_s.maxFov)!==null&&Ts!==void 0?Ts:120,minFov:(Bs=_s.minFov)!==null&&Bs!==void 0?Bs:40,maxLatitude:(Ps=_s.maxLatitude)!==null&&Ps!==void 0?Ps:+Math.PI/2,minLatitude:(Ls=_s.minLatitude)!==null&&Ls!==void 0?Ls:-Math.PI/2})},_a.initAnimationEndPose=function(_s){var Ss,Ms,Cs,Ts=this.parseArgs(_s),Bs=_s.initial[1];return{longitude:(Ss=Bs.longitude)!==null&&Ss!==void 0?Ss:Ts.defaultLongitude,latitude:pn((Ms=Bs.latitude)!==null&&Ms!==void 0?Ms:Ts.defaultLatitude,Ts.minLatitude,Ts.maxLatitude),fov:(Cs=Bs.fov)!==null&&Cs!==void 0?Cs:Ts.defaultFov,offset:_s.model.bounding.getCenter(new r$4.Vector3)}},_a.prototype.destroy=function(){va.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},_a.prototype.isReady=function(){return this.locationMotion.ended!==!1&&va.prototype.isReady.call(this)},_a.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){return this.work=_s,!0},_a.prototype.updateModel=function(_s){va.prototype.updateModel.call(this,_s);var Ss=_s.bounding.getCenter(new r$4.Vector3),Ms=this.cameraDistance(_s);this.locationMotion.set({x:Ss.x,y:Ss.y,z:Ss.z,distance:Ms},0).catch(Lt)},_a.prototype.updateTime=function(_s,Ss){if(!this.destroyed){var Ms={},Cs={};this.locationMotion.ended||(this.locationMotion.update(_s),Ms.modelAlpha=this.locationMotion.value.modelAlpha,Ms.perspToOrtho=pn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Cs.distance=this.locationMotion.value.distance,Cs.offset=new r$4.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(_s),Cs.longitude=this.cameraMotion.value.longitude,Cs.latitude=this.cameraMotion.value.latitude,Cs.fov=this.cameraMotion.value.fov),vr(Ms)||this.model.setMaterial(Ms),vr(Cs)||this.setCamera(Cs)}},_a.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:new r$4.Vector3(Ss.value.x,Ss.value.y,Ss.value.z)}},_a.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls=this;if(!this.destroyed){this.pending=!1,this.userAction=Cs;var Rs=this.model.bounding.getCenter(new r$4.Vector3),$s={longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:pn((Bs=Ss.latitude)!==null&&Bs!==void 0?Bs:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:pn((Ps=Ss.fov)!==null&&Ps!==void 0?Ps:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$4.Vector3)},Fs=this.cameraDistance(this.model),Os=ni($s,["longitude","latitude","fov"]),Gs={x:Rs.x,y:Rs.y,z:Rs.z,distance:Fs,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",_s,$s,this.userAction),this.cameraMotion.set(Os,Ms).catch(Lt),this.locationMotion.set(Gs,Ms).then(function(){Ls.emit("initAnimationEnded",_s,$s,Ls.userAction)},function(Ns){var Vs=mr(Ls.camera.pose);Ls.emit("initAnimationEnded",_s,Vs,Ls.userAction)})}},_a.prototype.updateRenderSize=function(){this.locationMotion.set({distance:this.cameraDistance(this.model)},0)},_a.prototype.cameraDistance=function(_s){var Ss=_s.bounding,Ms=this.camera.aspect,Cs=Math.pow(Math.pow(Ss.max.x-Ss.min.x+1,2)+Math.pow(Ss.max.y-Ss.min.y+1,2)+Math.pow(Ss.max.z-Ss.min.z+1,2),.5),Ts=Cs/2/Math.tan(Math.PI*this.defaultFov/360);return Ms<1&&(Ts/=Ms),isNaN(Ts)?Cs:Ts},_a.prototype.getForwardPanoIndexOrNot=function(_s){var Ss=this.work.observers.filter(function(Bs){return Bs.active}),Ms=this.model.intersectRaycaster(_s)[0];if(!Ms)return null;var Cs=gr(Ss,function(Bs){return Bs.standingPosition.distanceTo(Ms.point)},!0),Ts=Cs[0];return Cs[1]<5?this.work.observers.indexOf(Ts):null},_a.prototype.coordinatesForOffset=function(_s){var Ss=this.renderer.getSize(new r$4.Vector2);return{longitude:2*_s.x/(Ss.x*this.scissor.width),latitude:2*_s.y/(Ss.y*this.scissor.height)}},_a.prototype.requestInteriaMovement=function(_s,Ss){var Ms=this;if(this.interiaMovement!==!1){for(var Cs=e$3.__assign({},_s),Ts={longitude:0,latitude:0},Bs=0;Bs<Ss;Bs++)Cs.longitude*=.996,Cs.latitude*=.994008,Ts.longitude+=Cs.longitude,Ts.latitude+=Cs.latitude;var Ps=ur(this.cameraMotion.value.longitude+Ts.longitude),Ls=pn(this.cameraMotion.value.latitude+Ts.latitude,this.minLatitude,this.maxLatitude),Rs={longitude:Ps,latitude:Ls,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};this.cameraMotion.set({longitude:Ps,latitude:Ls},0).catch(Lt);var $s=Cs.longitude>1e-4||Cs.longitude<-1e-4||Cs.latitude>1e-4||Cs.latitude<-1e-4;this.emit("interiaPan",Rs,!$s),$s?se.shared.add(function(Fs,Os){Ms.requestInteriaMovement(Cs,0|Os)},!0,1):this.interiaMovement=!1}},_a.prototype.onPanGesture=function(_s){var Ss=this.panState,Ms=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Ms,x:_s.center.x,y:_s.center.y},Ss!==void 0&&Ss.pointerLength===Ms){var Cs=_s.pointers.map(function(Ns){return ni(Ns,["x","y"])});if(!this.emit("wantsGesture","pan",Cs,_s.isFinal)){var Ts={x:_s.center.x-Ss.x,y:_s.center.y-Ss.y},Bs=this.relativeClientPosition(_s.center),Ps=this.camera.pose.latitude<Math.PI/6||Bs.y<0?-1:1;Ts.x*=Ps;var Ls=this.coordinatesForOffset(Ts),Rs=ur(this.cameraMotion.value.longitude+Ls.longitude),$s=pn(this.cameraMotion.value.latitude+Ls.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(_s.overallVelocityX)>.2&&Math.atan2(Math.abs(_s.overallVelocityY),Math.abs(_s.overallVelocityX))<Math.PI/6.923&&($s=this.cameraMotion.value.latitude);var Fs={longitude:Rs,latitude:$s,fov:this.camera.pose.fov,offset:this.camera.pose.offset};if(!this.emit("wantsPanGesture",Fs,_s.isFinal)&&(this.emit("gesture","pan",Cs,_s.isFinal),this.emit("panGesture",Fs,_s.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:Fs.longitude,latitude:Fs.latitude,fov:Fs.fov},0).catch(Lt),_s.isFinal&&!this.emit("wantsInteriaPan",Fs))){this.interiaMovement=!0;var Os=_s.velocityX*Ps,Gs=_s.velocityY;this.requestInteriaMovement(this.coordinatesForOffset({x:Os,y:Gs}),0)}}}},_a.prototype.onPinchGesture=function(_s){var Ss,Ms=(Ss=this.pinchState)===null||Ss===void 0?void 0:Ss.fov,Cs=!1;if(_s.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(_s.type==="pinchend"&&(Cs=!0,delete this.panState,delete this.pinchState),Ms!==void 0){var Ts=_s.pointers.map(function(Ps){return ni(Ps,["x","y"])});if(!this.emit("wantsGesture","pinch",Ts,Cs)){var Bs=pn(Ms/_s.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",_s.scale,Bs,Cs)||this.emit("wantsChangeCameraFov",Bs)||(this.emit("gesture","pinch",Ts,Cs),this.emit("pinchGesture",_s.scale,Bs,Cs),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Bs},0).catch(Lt))}}},_a.prototype.onMouseWheel=function(_s){var Ss=this,Ms=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Cs=[{x:_s.clientX,y:_s.clientY,delta:Ms}];if(!this.emit("wantsGesture","mouseWheel",Cs,!1)){var Ts=this.minFov,Bs=this.maxFov,Ps=pn(this.camera.fov-Ms,Ts,Bs);this.emit("wantsMouseWheel",Ms,Ps,!1)||this.emit("wantsChangeCameraFov",Ps)||(this.emit("gesture","mouseWheel",Cs,!1),this.emit("mouseWheel",Ms,Ps,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ps},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ss.mouseWheelState,Ss.emit("wantsGesture","mouseWheel",Cs,!0)||Ss.emit("wantsMouseWheel",Ms,Ps,!0)||(Ss.emit("gesture","mouseWheel",Cs,!0),Ss.emit("mouseWheel",0,Ps,!0))},200)})}},_a.prototype.onTapGesture=function(_s){var Ss=_s.pointers.map(function(Ps){return ni(Ps,["x","y"])});if(!this.emit("wantsGesture","tap",Ss,!0)){var Ms=this.relativeClientPosition(_s.center),Cs=new r$4.Raycaster;if(Cs.setFromCamera(Ms,this.camera),!this.emit("wantsTapGesture",Cs,Ms,!0)){this.emit("gesture","tap",Ss,!0),this.emit("tapGesture",Cs,Ms,!0),this.interiaMovement=!1;var Ts=this.getForwardPanoIndexOrNot(Cs);if(!ji(Ts)){this.emit("panoSelected",Ts);var Bs={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Ts,Bs,!0)}}}},_a.prototype.onPressGesture=function(_s,Ss){var Ms,Cs,Ts=[_s];if(this.emit("wantsGesture","press",Ts,Ss))return(Ms=this.pressState)===null||Ms===void 0||Ms.stop(),void delete this.pressState;var Bs=this.relativeClientPosition(_s),Ps=new r$4.Raycaster;if(Ps.setFromCamera(Bs,this.camera),this.emit("wantsPressGesture",Ps,Bs,_s.delta,Ss))return(Cs=this.pressState)===null||Cs===void 0||Cs.stop(),void delete this.pressState;this.emit("gesture","press",Ts,Ss),this.emit("pressGesture",Ps,Bs,_s.delta,Ss)},_a}(Pr),Qr=function(va){function _a(_s){var Ss=_a.parseArgs(_s);return va.call(this,Ss)||this}return e$3.__extends(_a,va),_a.parseArgs=function(_s){var Ss=[_s.initial[0],e$3.__assign(e$3.__assign({},_s.initial[1]),{longitude:0,latitude:Math.PI/2}),_s.initial[2],_s.initial[3]],Ms=e$3.__assign(e$3.__assign({},_s),{initial:Ss,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return va.parseArgs.call(this,Ms)},_a.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return va.initAnimationEndPose.call(this,Ss)},_a.prototype.updateModel=function(_s){this.model=_s,this.needsRender=!0;var Ss=_s.bounding.getCenter(new r$4.Vector3);this.locationMotion.set({x:Ss.x,y:Ss.y,z:Ss.z,distance:this.cameraDistance(_s)},0).catch(Lt)},_a.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Bs=this;if(!this.destroyed){this.pending=!1,this.userAction=Cs;var Ps=this.model.bounding.getCenter(new r$4.Vector3),Ls={longitude:0,latitude:Math.PI/2,fov:pn((Ts=Ss.fov)!==null&&Ts!==void 0?Ts:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$4.Vector3)},Rs=this.cameraDistance(this.model),$s=ni(Ls,["longitude","latitude","fov"]),Fs={x:Ps.x,y:Ps.y,z:Ps.z,distance:Rs,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set($s,Ms).catch(Lt),this.locationMotion.set(Fs,Ms).then(function(){Bs.emit("initAnimationEnded",_s,Ls,Bs.userAction)},function(Os){var Gs=mr(Bs.camera.pose);Bs.emit("initAnimationEnded",_s,Gs,Bs.userAction)})}},_a.prototype.getZoomOffsetFromFov=function(_s,Ss,Ms){var Cs=new r$4.Vector3(0,-1,0),Ts=Math.tan(Ms/2*Math.PI/180),Bs=Math.tan(Ss.fov/2*Math.PI/180),Ps=(Bs-Ts)/Bs,Ls=new r$4.Raycaster;Ls.setFromCamera(_s,Ss);var Rs=Ls.ray.direction,$s=Rs.angleTo(Cs),Fs=this.cameraDistance(this.model),Os=Fs*Math.tan($s),Gs=Rs.clone().setLength(Fs*Math.cos($s)).projectOnPlane(Cs),Ns=Gs.length(),Vs=Ps/Ns*Gs.x*Os,Ds=Ps/Ns*Gs.z*Os;return new r$4.Vector3(Vs,0,Ds)},_a.prototype.requestInteriaMovement=function(_s,Ss){},_a.prototype.onPanGesture=function(_s){var Ss=this.renderer.getSize(new r$4.Vector2),Ms=this.panState,Cs=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Cs,x:_s.center.x,y:_s.center.y},Ms!==void 0&&Ms.pointerLength===Cs){var Ts=_s.pointers.map(function(Vs){return ni(Vs,["x","y"])});if(!this.emit("wantsGesture","pan",Ts,_s.isFinal)){var Bs=_s.center.x-Ms.x,Ps=_s.center.y-Ms.y,Ls=new r$4.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Rs=this.camera.position.y*Math.tan(this.camera.fov/2*Math.PI/180);Ls.add(function(Vs,Ds){var ks=new r$4.Vector3;return ks.setFromMatrixColumn(Ds,0),ks.multiplyScalar(-Vs),ks}(2*Bs*Rs/Ss.y,this.camera.matrix)),Ls.add(function(Vs,Ds,ks){var Us=new r$4.Vector3;return Us.setFromMatrixColumn(ks,0),Us.crossVectors(Ds,Us),Us.multiplyScalar(Vs),Us}(2*Ps*Rs/Ss.y,this.camera.up,this.camera.matrix));var $s=this.model.bounding,Fs=$s.getCenter(new r$4.Vector3),Os=($s.max.x-$s.min.x)/this.defaultFov*this.cameraMotion.value.fov,Gs=($s.max.y,$s.min.y,this.defaultFov,this.cameraMotion.value.fov,($s.max.z-$s.min.z)/this.defaultFov*this.cameraMotion.value.fov);Ls.x=pn(Ls.x,Fs.x-Os,Fs.x+Os),Ls.z=pn(Ls.z,Fs.z-Gs,Fs.z+Gs),Ls.y=Fs.y;var Ns={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Ls};this.emit("wantsPanGesture",Ns,_s.isFinal)||(this.emit("gesture","pan",Ts,_s.isFinal),this.emit("panGesture",Ns,_s.isFinal),this.userAction=!0,this.locationMotion.set({x:Ls.x,y:Ls.y,z:Ls.z},0).catch(Lt))}}},_a.prototype.onPinchGesture=function(_s){var Ss,Ms=(Ss=this.pinchState)===null||Ss===void 0?void 0:Ss.fov,Cs=!1;if(_s.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(_s.type==="pinchend"&&(Cs=!0,delete this.panState,delete this.pinchState),Ms!==void 0){var Ts=_s.pointers.map(function($s){return ni($s,["x","y"])});if(!this.emit("wantsGesture","pinch",Ts,Cs)){var Bs=pn(Ms/_s.scale,this.minFov,this.maxFov),Ps=this.relativeClientPosition({x:_s.center.x,y:_s.center.y}),Ls=this.getZoomOffsetFromFov(Ps,this.camera,Bs),Rs=this.camera.pose.offset.clone().add(Ls);this.emit("wantsPinchGesture",_s.scale,Bs,Cs)||this.emit("wantsChangeCameraFov",Bs)||(this.emit("gesture","pinch",Ts,Cs),this.emit("pinchGesture",_s.scale,Bs,Cs),this.userAction=!0,this.locationMotion.set({x:Rs.x,y:Rs.y,z:Rs.z},0).catch(Lt),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Bs},0).catch(Lt))}}},_a.prototype.onMouseWheel=function(_s){var Ss=this,Ms=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Cs=[{x:_s.clientX,y:_s.clientY,delta:Ms}];if(!this.emit("wantsGesture","mouseWheel",Cs,!1)){var Ts=pn(this.cameraMotion.value.fov-Ms,this.minFov,this.maxFov),Bs=this.relativeClientPosition({x:_s.clientX,y:_s.clientY}),Ps=this.getZoomOffsetFromFov(Bs,this.camera,Ts),Ls=this.camera.pose.offset.clone().add(Ps);this.emit("wantsMouseWheel",Ms,Ts,!1)||this.emit("wantsChangeCameraFov",Ts)||(this.emit("gesture","mouseWheel",Cs,!1),this.emit("mouseWheel",Ms,Ts,!1),this.userAction=!0,this.locationMotion.set({x:Ls.x,y:Ls.y,z:Ls.z},0).catch(Lt),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Ts},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ss.mouseWheelState,Ss.emit("wantsGesture","mouseWheel",Cs,!0)||Ss.emit("wantsMouseWheel",Ms,Ts,!0)||Ss.emit("wantsChangeCameraFov",Ts)||(Ss.emit("gesture","mouseWheel",Cs,!0),Ss.emit("mouseWheel",0,Ts,!0))},200)})}},_a}(Tr);function Rr(va,_a){_a===void 0&&(_a=!1);var _s=typeof va;if(_s==="string")return JSON.stringify(va);if(va===!0)return"true";if(va===!1)return"false";if(va===null)return"null";if(va instanceof Array){for(var Ss="[",Ms=va.length-1,Cs=0;Cs<Ms;Cs++)Ss+=Rr(va[Cs],!1)+",";return Ms>-1&&(Ss+=Rr(va[Cs],!1)),Ss+"]"}if(va instanceof Object){if(typeof va.toJSON=="function")return Rr(va.toJSON(),_a);var Ts=Object.keys(va).sort(),Bs=Ts.length;for(Ss="",Cs=0;Cs<Bs;){var Ps=Ts[Cs],Ls=Rr(va[Ps],!0);Ls!==void 0&&(Cs&&Ss!==""&&(Ss+=","),Ss+=JSON.stringify(Ps)+":"+Ls),Cs++}return"{"+Ss+"}"}switch(_s){case"function":case"undefined":return _a?void 0:null;case"number":return va;default:return isFinite(va)?va:null}}function Dr(va){return Pt(String(Rr(va,!1)))}var kr,Nr=function(va){function _a(_s){var Ss=this,Ms=_a.parseArgs(_s);return(Ss=va.call(this,Ms)||this).defaultLongitude=Ms.defaultLongitude,Ss.defaultLatitude=Ms.defaultLongitude,Ss.defaultFov=Ms.defaultFov,Ss.maxFov=Ms.maxFov,Ss.minFov=Ms.minFov,Ss.maxLatitude=Ms.maxLatitude,Ss.minLatitude=Ms.minLatitude,Ss.moveSpeed=Ms.moveSpeed,Ss.intersectMeshCreator=Ms.intersectMeshCreator,Ss.interiaMovement=!1,Ss.intersectMesh=Ss.intersectMeshCreator(),Ss.intersectMesh.name="intersect",Ss.intersectMesh.visible=!1,Ss.helper.add(Ss.intersectMesh),Ss}return e$3.__extends(_a,va),_a.parseArgs=function(_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s,Fs=va.parseArgs.call(this,_s);return e$3.__assign(e$3.__assign({},Fs),{defaultLongitude:(Ss=_s.defaultLongitude)!==null&&Ss!==void 0?Ss:0,defaultLatitude:(Ms=_s.defaultLatitude)!==null&&Ms!==void 0?Ms:0,defaultFov:(Cs=_s.defaultFov)!==null&&Cs!==void 0?Cs:90,maxFov:(Ts=_s.maxFov)!==null&&Ts!==void 0?Ts:120,minFov:(Bs=_s.minFov)!==null&&Bs!==void 0?Bs:40,maxLatitude:(Ps=_s.maxLatitude)!==null&&Ps!==void 0?Ps:+Math.PI/2,minLatitude:(Ls=_s.minLatitude)!==null&&Ls!==void 0?Ls:-Math.PI/2,moveSpeed:(Rs=_s.moveSpeed)!==null&&Rs!==void 0?Rs:3.2,intersectMeshCreator:($s=_s.intersectMeshCreator)!==null&&$s!==void 0?$s:function(){return new Zn}})},_a.initAnimationEndPose=function(_s){var Ss,Ms,Cs,Ts=this.parseArgs(_s),Bs=_s.initial,Ps=Bs[0],Ls=Bs[1];return{longitude:(Ss=Ls.longitude)!==null&&Ss!==void 0?Ss:Ts.defaultLongitude,latitude:pn((Ms=Ls.latitude)!==null&&Ms!==void 0?Ms:Ts.defaultLatitude,Ts.minLatitude,Ts.maxLatitude),fov:pn((Cs=Ls.fov)!==null&&Cs!==void 0?Cs:Ts.defaultFov,Ts.minFov,Ts.maxFov),offset:Ts.work.observers[Ps].position.clone()}},_a.prototype.destroy=function(){va.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},_a.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&va.prototype.isReady.call(this)},_a.prototype.calculateMovingDuration=function(_s,Ss){switch(typeof _s){case"function":return _s(Ss,this.moveSpeed);case"number":return _s;case"string":return Number(_s);default:return Math.floor(Math.max(Math.min(Ss/this.moveSpeed*1e3,1500),500))}},_a.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},_a.prototype.coordinatesForOffset=function(_s){var Ss=this.cameraMotion.value.fov,Ms=this.camera.aspect,Cs=this.renderer.getSize(new r$4.Vector2);return{longitude:2*_s.x/(Cs.x*this.scissor.width)*Ss/95*Ms,latitude:-2*_s.y/(Cs.y*this.scissor.height)*Ss/95}},_a.prototype.cameraBounce=function(){var _s=this.cameraMotion.value,Ss=_s.longitude,Ms=_s.latitude,Cs=_s.fov,Ts=[{progress:0,value:{longitude:Ss,latitude:Ms,fov:Cs}},{progress:.5,value:{longitude:Ss,latitude:Ms,fov:.98*Cs}},{progress:1,value:{longitude:Ss,latitude:Ms,fov:Cs}}];this.cameraMotion.setKeyframes(Ts,500).catch(Lt)},_a.prototype.requestInteriaMovement=function(_s,Ss){var Ms=this;if(this.interiaMovement!==!1){for(var Cs=e$3.__assign({},_s),Ts={longitude:0,latitude:0},Bs=0;Bs<Ss;Bs++)Cs.longitude*=.996,Cs.latitude*=.98604,Ts.longitude+=Cs.longitude,Ts.latitude+=Cs.latitude;var Ps=ur(this.cameraMotion.value.longitude+Ts.longitude),Ls=pn(this.cameraMotion.value.latitude+Ts.latitude,this.minLatitude,this.maxLatitude),Rs={longitude:Ps,latitude:Ls,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};this.cameraMotion.set({longitude:Ps,latitude:Ls},0).catch(Lt);var $s=Cs.longitude>1e-4||Cs.longitude<-1e-4||Cs.latitude>1e-4||Cs.latitude<-1e-4;this.emit("interiaPan",Rs,!$s),$s?se.shared.add(function(Fs,Os){Ms.requestInteriaMovement(Cs,0|Os)},!0,1):this.interiaMovement=!1}},_a.prototype.onPanGesture=function(_s){var Ss=this.panState,Ms=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Ms,x:_s.center.x,y:_s.center.y},Ss!==void 0&&Ss.pointerLength===Ms){var Cs=_s.pointers.map(function(Gs){return ni(Gs,["x","y"])});if(!this.emit("wantsGesture","pan",Cs,_s.isFinal)){var Ts={x:_s.center.x-Ss.x,y:_s.center.y-Ss.y},Bs=this.coordinatesForOffset(Ts),Ps=ur(this.cameraMotion.value.longitude+Bs.longitude),Ls=pn(this.cameraMotion.value.latitude+Bs.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(_s.overallVelocityX)>.2&&Math.atan2(Math.abs(_s.overallVelocityY),Math.abs(_s.overallVelocityX))<Math.PI/6.923&&(Ls=this.cameraMotion.value.latitude);var Rs={longitude:Ps,latitude:Ls,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};if(!this.emit("wantsPanGesture",Rs,_s.isFinal)){this.emit("gesture","pan",Cs,_s.isFinal),this.emit("panGesture",Rs,_s.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var $s={longitude:Rs.longitude,latitude:Rs.latitude,fov:Rs.fov};if(this.cameraMotion.set($s,0).catch(Lt),_s.isFinal&&!this.emit("wantsInteriaPan",Rs)){this.interiaMovement=!0;var Fs=_s.velocityX,Os=.6*_s.velocityY;Math.abs(Os)>.5&&Math.abs(Fs)<.5&&(Fs=0),this.requestInteriaMovement(this.coordinatesForOffset({x:Fs,y:Os}),0)}}}}},_a.prototype.onPinchGesture=function(_s){var Ss,Ms=(Ss=this.pinchState)===null||Ss===void 0?void 0:Ss.fov,Cs=_s.scale,Ts=!1;if(_s.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(_s.type==="pinchend"&&(Ts=!0,delete this.panState,delete this.pinchState),Ms!==void 0){var Bs=_s.pointers.map(function(Ls){return ni(Ls,["x","y"])});if(!this.emit("wantsGesture","pinch",Bs,Ts)){var Ps=pn(Ms/Cs,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Cs,Ps,Ts)||this.emit("wantsChangeCameraFov",Ps)||(this.emit("gesture","pinch",Bs,Ts),this.emit("pinchGesture",Cs,Ps,Ts),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ps},0).catch(Lt))}}},_a.prototype.onMouseWheel=function(_s){var Ss=this,Ms=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Cs=[{x:_s.clientX,y:_s.clientY,delta:Ms}];if(!this.emit("wantsGesture","mouseWheel",Cs,!1)){var Ts=pn(this.cameraMotion.value.fov-Ms,this.minFov,this.maxFov);this.emit("wantsMouseWheel",Ms,Ts,!1)||this.emit("wantsChangeCameraFov",Ts)||(this.emit("gesture","mouseWheel",Cs,!1),this.emit("mouseWheel",Ms,Ts,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ts},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ss.mouseWheelState,Ss.emit("wantsGesture","mouseWheel",Cs,!0)||Ss.emit("wantsMouseWheel",Ms,Ts,!0)||Ss.emit("wantsChangeCameraFov",Ts)||(Ss.emit("gesture","mouseWheel",Cs,!0),Ss.emit("mouseWheel",0,Ts,!0))},200)})}},_a.prototype.onMouseMove=function(_s){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var Ss=this.relativeClientPosition({x:_s.clientX,y:_s.clientY}),Ms=new r$4.Raycaster;if(Ms.setFromCamera(Ss,this.camera),this.emit("wantsShowIntersectionOnModel",Ms))this.hideIntersectMesh();else{var Cs=this.model.intersectRaycaster(Ms)[0];if(Cs&&Cs.face){var Ts=Cs.face.normal,Bs=Ts.clone().multiplyScalar(.05),Ps=Cs.point.clone().add(Bs);this.intersectMesh.position.copy(Ps);var Ls=Ps.clone().add(Bs);if(this.intersectMesh.lookAt(Ls),Math.abs(Ts.y)>.99){var Rs=this.camera.position.clone().sub(Ps);this.intersectMesh.rotation.z=-Math.atan2(Rs.z,Rs.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",Cs,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:_s.clientX,clientY:_s.clientY}}}},_a.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},_a.prototype.onPressGesture=function(_s,Ss){var Ms,Cs,Ts=[_s];if(this.emit("wantsGesture","press",Ts,Ss))return(Ms=this.pressState)===null||Ms===void 0||Ms.stop(),void delete this.pressState;var Bs=this.relativeClientPosition(_s),Ps=new r$4.Raycaster;if(Ps.setFromCamera(Bs,this.camera),this.emit("wantsPressGesture",Ps,Bs,_s.delta,Ss))return(Cs=this.pressState)===null||Cs===void 0||Cs.stop(),void delete this.pressState;this.emit("gesture","press",Ts,Ss),this.emit("pressGesture",Ps,Bs,_s.delta,Ss)},_a}(Pr),Fr,Or=function(va){function _a(_s,Ss){return Ss===void 0&&(Ss=.5),va.call(this,_s,{uniforms:{inputBuffer:new r$4.Uniform(null),scale:new r$4.Uniform(Ss)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return e$3.__extends(_a,va),_a}(Cr),Lr=function(va){function _a(_s,Ss){Ss===void 0&&(Ss=.002);var Ms=va.call(this,_s,{uniforms:{targetBuffer:new r$4.Uniform(null),inputBuffer:new r$4.Uniform(null),step:new r$4.Uniform(Ss)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return Ms.material.extensions.shaderTextureLOD=!0,Ms}return e$3.__extends(_a,va),Object.defineProperty(_a.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(_s){this.material.uniforms.targetBuffer.value=_s},enumerable:!1,configurable:!0}),Object.defineProperty(_a.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(_s){this.material.uniforms.step.value=_s},enumerable:!1,configurable:!0}),_a}(Cr),Vr=function(va){function _a(_s){var Ss=va.call(this,_s,{uniforms:{inputBuffer:new r$4.Uniform(null),luminanceAdaptiveBuffer:new r$4.Uniform(null),progress:new r$4.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 1.5;
          float whitePoint = 13.0;
          float exposure = 1.4;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return Ss.material.transparent=!0,Ss}return e$3.__extends(_a,va),Object.defineProperty(_a.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(_s){this.material.uniforms.luminanceAdaptiveBuffer.value=_s},enumerable:!1,configurable:!0}),Object.defineProperty(_a.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(_s){this.material.uniforms.progress.value=_s},enumerable:!1,configurable:!0}),_a}(Cr),Hr=function(va){function _a(_s){var Ss=va.call(this,_s)||this;return Ss.enableTime=Ht(),Ss.renderer=_s,Ss.valuePass=new Sr(Ss.renderer),Ss.luminancePass=new Or(Ss.renderer,Math.sqrt(1/3)),Ss.nextStepPass=new Lr(Ss.renderer,.005),Ss.luminanceAdaptivePass=new Vr(Ss.renderer),Ss}return e$3.__extends(_a,va),_a.prototype.render=function(_s,Ss,Ms){if(!this.enable)return this.enableTime=null,void this.copyPass.render(_s);this.enableTime===null&&(this.enableTime=Ht()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$4.WebGLRenderTarget(128,128,{minFilter:r$4.LinearMipmapLinearFilter,magFilter:r$4.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$4.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(_s,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$4.WebGLRenderTarget(1,1,{minFilter:r$4.NearestFilter,magFilter:r$4.NearestFilter,type:r$4.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$4.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$4.WebGLRenderTarget(1,1,{minFilter:r$4.NearestFilter,magFilter:r$4.NearestFilter,type:r$4.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$4.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((Ht()-this.enableTime)/100,1),this.luminanceAdaptivePass.render(_s,Ss)},_a.prototype.dispose=function(){var _s,Ss,Ms;(_s=this.luminanceTargetBuffer)===null||_s===void 0||_s.dispose(),(Ss=this.luminancePrevBuffer)===null||Ss===void 0||Ss.dispose(),(Ms=this.luminanceNextBuffer)===null||Ms===void 0||Ms.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},_a}(Mr),Kr=["up","down","left","right","front","back"],zr=(Fr=Math.SQRT1_2)!==null&&Fr!==void 0?Fr:Math.sqrt(2),qr={up:new r$4.Quaternion(zr,0,0,zr),down:new r$4.Quaternion(-zr,0,0,zr),left:new r$4.Quaternion(0,zr,0,zr),right:new r$4.Quaternion(0,-zr,0,zr),front:new r$4.Quaternion(0,0,0,1),back:new r$4.Quaternion(0,1,0,0)},_r=new r$4.Quaternion().setFromAxisAngle(new r$4.Vector3(0,1,0),Math.PI),jr=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),Ur=new Float32Array([0,0,1,0,0,1,1,1]),Gr=new Uint8Array([0,1,2,1,3,2]),Wr=new r$4.BufferGeometry;Wr.setAttribute("position",new r$4.BufferAttribute(jr,3)),Wr.setAttribute("uv",new r$4.BufferAttribute(Ur,2)),Wr.setIndex(new r$4.BufferAttribute(Gr,1));var Xr=function(va){function _a(){var _s=va.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return _s.depthTest=!1,_s.depthWrite=!1,_s.blending=r$4.NoBlending,_s.map=_s.uniforms.map.value,_s.luminanceMap=_s.uniforms.luminanceMap.value,Object.defineProperties(_s,{map:{get:function(){return this.uniforms.map.value},set:function(Ss){this.uniforms.map.value=Ss}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(Ss){this.uniforms.luminanceMap.value=Ss,this.defines.USE_LUMINANCE=Ss!==null,this.needsUpdate=!0}}}),_s}return e$3.__extends(_a,va),_a}(r$4.ShaderMaterial),Yr=function(va){function _a(){var _s=va!==null&&va.apply(this,arguments)||this;return _s.level=0,_s.sideCount=0,_s.col=0,_s.row=0,_s.index=0,_s.type="up",_s}return e$3.__extends(_a,va),_a}(r$4.Box3),Zr=function(va){function _a(_s,Ss){var Ms=this,Cs=new Xr;return Cs.visible=!1,(Ms=va.call(this,Wr,Cs)||this).position.copy(_s.getCenter(new r$4.Vector3)),Ms.quaternion.copy(qr[_s.type]),Ms.scale.setScalar(1/Math.pow(2,_s.level)),Ms.level=_s.level,Ms.activeTime=-1,Ms.disposed=!1,Ms.needsRender=!1,Ms.frustumCulled=!1,Ss.then(function(Ts){var Bs=Ts[0],Ps=Ts[1];Ms.disposed?(Bs.dispose(),Ps?.dispose()):(Ms.material.map=Bs,Ms.material.luminanceMap=Ps,Ms.material.needsUpdate=!0,Ms.material.visible=!0)}).catch(Lt),Ms}return e$3.__extends(_a,va),_a.getBox=function(_s,Ss,Ms){var Cs=new Yr,Ts=Math.pow(2,_s),Bs=1/Ts,Ps=Ms%Ts,Ls=Math.floor(Ms/Ts);switch(Cs.level=_s,Cs.index=Ms,Cs.sideCount=Ts,Cs.row=Ls,Cs.col=Ps,Cs.type=Ss,Ss){case"up":Cs.min.y=.5,Cs.max.y=.5,Cs.min.x=+Ps*Bs-.5,Cs.max.x=+Ps*Bs-.5+Bs,Cs.min.z=-Ls*Bs+.5-Bs,Cs.max.z=-Ls*Bs+.5;break;case"down":Cs.min.y=-.5,Cs.max.y=-.5,Cs.min.x=+Ps*Bs-.5,Cs.max.x=+Ps*Bs-.5+Bs,Cs.min.z=+Ls*Bs-.5,Cs.max.z=+Ls*Bs-.5+Bs;break;case"left":Cs.min.x=-.5,Cs.max.x=-.5,Cs.min.z=-Ps*Bs+.5-Bs,Cs.max.z=-Ps*Bs+.5,Cs.min.y=-Ls*Bs+.5-Bs,Cs.max.y=-Ls*Bs+.5;break;case"right":Cs.min.x=.5,Cs.max.x=.5,Cs.min.z=+Ps*Bs-.5,Cs.max.z=+Ps*Bs-.5+Bs,Cs.min.y=-Ls*Bs+.5-Bs,Cs.max.y=-Ls*Bs+.5;break;case"front":Cs.min.z=-.5,Cs.max.z=-.5,Cs.min.x=+Ps*Bs-.5,Cs.max.x=+Ps*Bs-.5+Bs,Cs.min.y=-Ls*Bs+.5-Bs,Cs.max.y=-Ls*Bs+.5;break;case"back":Cs.min.z=.5,Cs.max.z=.5,Cs.min.x=-Ps*Bs+.5-Bs,Cs.max.x=-Ps*Bs+.5,Cs.min.y=-Ls*Bs+.5-Bs,Cs.max.y=-Ls*Bs+.5}return Cs},_a.prototype.updateTime=function(_s){},_a.prototype.dispose=function(){var _s;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(_s=this.material.luminanceMap)===null||_s===void 0||_s.dispose()),this.material.dispose()},_a}(r$4.Mesh),Jr=function(va){function _a(){var _s=va.call(this)||this;return _s.needsRender=!1,_s.name="tiling",_s}return e$3.__extends(_a,va),_a}(r$4.Group),$r=function(){function va(_a,_s){this.disposed=!1,this.textureLoader=new Si(_a),this.level=0,this.panoIndex=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=_s,this.object=new Jr}return va.prototype.setAllowHosts=function(_a){this.textureLoader.setAllowHosts(_a)},va.prototype.setNetworkSubscribe=function(_a){this.textureLoader.setNetworkSubscribe(_a)},va.prototype.cleanup=function(){for(var _a=0;_a<this.tiles.length;_a++)if(this.tiles[_a]){var _s=this.tiles[_a],Ss="level-group:"+_a,Ms=this.object.getObjectByName(Ss);for(var Cs in _s){var Ts=_s[Cs];Ts.dispose(),Ms.remove(Ts),delete _s[Cs],this.object.needsRender=!0}}},va.prototype.setRotation=function(_a){if(!this.disposed){var _s=new r$4.Quaternion().multiplyQuaternions(_a,_r);this.object.quaternion.equals(_s)||(this.object.quaternion.copy(_s),this.object.needsRender=!0)}},va.prototype.setPosition=function(_a){this.disposed||this.object.position.equals(_a)||(this.object.position.copy(_a),this.object.needsRender=!0)},va.prototype.setResource=function(_a){if(!this.disposed&&this.resource!==_a){this.cleanup(),this.resource=_a;for(var _s=0;_s<_a.length;_s++){var Ss=_a[_s].level;this.tiles[Ss]={};var Ms="level-group:"+Ss,Cs=this.object.getObjectByName(Ms);Cs||((Cs=new r$4.Group).name=Ms,Cs.renderOrder=-2),this.object.add(Cs)}this.object.needsRender=!0}},va.prototype.setLuminance=function(_a){this.luminance=_a},va.prototype.getTileResources=function(_a){for(var _s,Ss=(_s=this.imageOptions.size)!==null&&_s!==void 0?_s:2048,Ms=[],Cs=this.resource.length-1;Cs>=0;Cs--)this.resource[Cs].level<=_a&&512*Math.pow(2,this.resource[Cs].level)>Ss&&Ms.unshift(this.resource[Cs]);return Ms},va.prototype.update=function(_a,_s,Ss){var Ms=this;if(!this.disposed){this.level=_s;var Cs=new r$4.PerspectiveCamera().copy(_a);Cs.position.set(0,0,0),Cs.quaternion.premultiply(this.object.quaternion.clone().inverse()),Cs.updateMatrixWorld(!0),Cs.updateProjectionMatrix();for(var Ts=Cs.getWorldDirection(new r$4.Vector3),Bs=new r$4.Frustum().setFromProjectionMatrix(new r$4.Matrix4().multiplyMatrices(Cs.projectionMatrix,Cs.matrixWorldInverse)),Ps=this.getTileResources(_s),Ls=function(Vs){if(Vs){for(var Ds=[],ks=Vs.level,Us=Math.pow(2,ks),zs=Us*Us,Ws=Rs.object.getObjectByName("level-group:"+ks),qs=0,Zs=Kr;qs<Zs.length;qs++)for(var el=Zs[qs],Js=0;Js<zs;Js++){var Hs=Zr.getBox(ks,el,Js);Bs.intersectsBox(Hs)&&Ds.push(Hs)}Ds.sort(function(Vl,Wl){return Vl.getCenter(new r$4.Vector3).angleTo(Ts)-Wl.getCenter(new r$4.Vector3).angleTo(Ts)});for(var Qs=[],js=0,Ks=Ds;js<Ks.length;js++){var Xs=(Hs=Ks[js]).sideCount,Ys=Hs.row,rl=Hs.col,tl=(el=Hs.type,"tile-level:".concat(ks,"-face:").concat(el,"-row:").concat(Ys,"-col:").concat(rl));if(!Rs.tiles[ks][tl]){var il=Vs[el],ll=Vs.size,cl=ll/Xs,al=[cl*rl,cl*Ys,cl,cl],dl=e$3.__assign({key:"pano_tile.".concat(Rs.panoIndex,".").concat(el,".").concat(ks,".").concat(Ys,".").concat(rl),basisLoaderInitialized:Ii.isInitialized(),cut:al},ni(Rs.imageOptions,["format"]));ks<=1&&(dl.format==="jpg"||/\.jpg$/.test(il))?(cl!==1024&&(dl.size=1024),dl.quality=70):cl!==512&&(dl.size=512);var yl=Rs.imageOptions.transform?Rs.imageOptions.transform(il,dl):de(il,dl),xl=Rs.textureLoader.load(yl,{preInit:!0}).then(function(Vl){return Vl.body}),wl=null;if(Rs.luminance){var Al=Rs.luminance[el],bl=Al.match(/\/cube_(\d+)\//),Bl=!!bl&&Number(bl[1]);if(Bl!==!1){var Cl=ll/Bl,Sl=e$3.__assign(e$3.__assign({},dl),{size:256,cut:[al[0]/Cl,al[1]/Cl,al[2]/Cl,al[3]/Cl],key:"pano_tile_luminance.".concat(Rs.panoIndex,".").concat(el,".").concat(ks,".").concat(Ys,".").concat(rl)}),El=Rs.imageOptions.transform?Rs.imageOptions.transform(Al,Sl):de(Al,Sl);wl=Rs.textureLoader.load(El,{format:r$4.LuminanceFormat,preInit:!0}).then(function(Vl){return Vl.body}).catch(function(){return null})}}(jl=Rs.tiles[ks][tl]=new Zr(Hs,Promise.all([xl,wl]))).name=tl,jl.renderOrder=ks,Ws.add(jl)}Rs.tiles[ks][tl].activeTime=Ss,Qs.push(tl)}for(var Rl=0,Fl=Object.keys(Rs.tiles[ks]).sort(function(Vl,Wl){return Ms.tiles[ks][Wl].activeTime-Ms.tiles[ks][Vl].activeTime}).slice(Math.max(24,Qs.length));Rl<Fl.length;Rl++){tl=Fl[Rl];var jl=Rs.tiles[ks][tl];Ws.remove(jl),jl.dispose(),delete Rs.tiles[ks][tl],Rs.object.needsRender=!0}}},Rs=this,$s=0,Fs=Ps;$s<Fs.length;$s++)Ls(Fs[$s]);for(var Os=0;Os<this.tiles.length;Os++)if(this.tiles[Os]){var Gs=Ps.length>0&&Os<=Ps[Ps.length-1].level;for(var Ns in this.tiles[Os])this.tiles[Os][Ns].visible!==Gs&&(this.tiles[Os][Ns].visible=Gs,this.tiles[Os][Ns].needsRender=!0),this.tiles[Os][Ns].updateTime(Ss)}}},va.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},va}(),to=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),eo=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),io=new r$4.BufferGeometry;io.setAttribute("position",new r$4.BufferAttribute(to,3)),io.setIndex(new r$4.BufferAttribute(eo,1));var no=function(){function va(){this.material=new r$4.ShaderMaterial({vertexShader:`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,fragmentShader:`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,uniforms:{size:new r$4.Uniform(null),matrix:new r$4.Uniform(null),alpha:new r$4.Uniform(null),map:new r$4.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$4.CustomBlending,blendSrc:r$4.SrcAlphaFactor,blendDst:r$4.OneMinusSrcAlphaFactor,blendSrcAlpha:r$4.OneFactor,blendDstAlpha:r$4.OneMinusSrcAlphaFactor}),this.object=new r$4.Mesh(io,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new vn({alpha:0})}return va.prototype.setMaterial=function(_a){_a?(this.material.uniforms.size.value=_a.size,this.material.uniforms.matrix.value=_a.matrix,this.material.uniforms.map.value=_a.map,this.alphaMotion.set({alpha:_a.alpha},500).catch(Lt),this.material.uniforms.alpha.value=_a.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Lt));var _s=_a!==null;_s!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=_s,this.material.needsUpdate=!0,this.object.visible=_a!==null)},va.prototype.updateTime=function(_a){this.alphaMotion.ended||(this.alphaMotion.update(_a),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},va.prototype.dispose=function(){this.material.dispose()},va}(),ro=new r$4.Matrix4().makeRotationAxis(new r$4.Vector3(0,1,0),Math.PI),oo=new r$4.Vector3(-1,1,1),so=function(va){function _a(_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs=this,$s=_a.parseArgs(_s);(Rs=va.call(this,$s)||this).initAnimationed=!1,Rs.currentPanoIndex=$s.initial[0],Rs.maxAccessibleDistance=$s.maxAccessibleDistance,Rs.panoTapTriggerRadius=$s.panoTapTriggerRadius,Rs.panoCircleMeshCreator=$s.panoCircleMeshCreator,Rs.tileLevelForFov=$s.tileLevelForFov;var Fs=Rs.model.getMaterial()||{},Os=Fs.pano0,Gs=Fs.pano1;Os&&Gs?.map!==Os.map&&(Rs.model.setMaterial({pano0:Gs}),Os.map.dispose(),(Ss=Os.luminanceMap)===null||Ss===void 0||Ss.dispose()),Rs.boundingMesh=Rs.generateBoundingMesh(),Rs.boundingMesh.setMaterial(Rs.model.getMaterial()||{}),Rs.boundingMesh.visible=!1,Rs.scene.add(Rs.boundingMesh),Rs.panoMeshes=[],Rs.updatePanoMeshes(),Rs.locationMotion=new vn({count:0,distance:Rs.camera.pose.distance,modelAlpha:(Cs=(Ms=Rs.model.getMaterial())===null||Ms===void 0?void 0:Ms.modelAlpha)!==null&&Cs!==void 0?Cs:0,perspToOrtho:(Bs=(Ts=Rs.model.getMaterial())===null||Ts===void 0?void 0:Ts.perspToOrtho)!==null&&Bs!==void 0?Bs:0}),Rs.panoResources={},Rs.panoResources[Rs.locationMotion.keyframes[0].key=Rs.locationMotion.keyframes[1].key=$n()]={panoIndex:Rs.currentPanoIndex,workCode:Rs.work.workCode,panoPicture:(Ls=(Ps=Rs.model.getMaterial())===null||Ps===void 0?void 0:Ps.pano1)!==null&&Ls!==void 0?Ls:null,position:Rs.camera.pose.offset.clone(),effect:"fly"};var Ns={allowHosts:Rs.work.allowHosts,networkSubscribe:Rs.networkSubscribe};return Rs.textureLoader=new Si(Ns),Rs.tiling=new $r(Ns,Rs.imageOptions),Rs.scene.add(Rs.tiling.object),Rs.panoVideo=new no,Rs.scene.add(Rs.panoVideo.object),Rs}return e$3.__extends(_a,va),_a.parseArgs=function(_s){var Ss,Ms,Cs,Ts,Bs=va.parseArgs.call(this,_s);return e$3.__assign(e$3.__assign({},Bs),{maxAccessibleDistance:(Ss=_s.maxAccessibleDistance)!==null&&Ss!==void 0?Ss:5,panoTapTriggerRadius:(Ms=_s.panoTapTriggerRadius)!==null&&Ms!==void 0?Ms:.5,panoCircleMeshCreator:(Cs=_s.panoCircleMeshCreator)!==null&&Cs!==void 0?Cs:function(){return new Gn},tileLevelForFov:(Ts=_s.tileLevelForFov)!==null&&Ts!==void 0?Ts:function(Ps,Ls){var Rs=2*Math.atan(Math.tan(Ps/180*Math.PI/2)*(Ls.width/Ls.height))/Math.PI*180,$s=Math.max(Ls.width/Rs,Ls.height/Ps),Fs=Bs.imageOptions.size;if(Fs===void 0&&Bs.work.observers[0]){var Os=Bs.work.observers[0].images.up.match(/\/cube_(\d+)\//);Os&&(Fs=Number(Os[1]))}return Fs===void 0&&(Fs=2048),Fs<8192&&$s>40?4:Fs<4096&&$s>24?3:Fs<2048&&$s>10?2:Fs<1024&&$s>6?1:0}})},_a.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return va.initAnimationEndPose.call(this,Ss)},_a.prototype.destroy=function(){var _s,Ss,Ms=this;va.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Gs){Ms.helper.remove(Gs),Gs.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var Cs=this.videoTexture.image;Cs.pause(),Cs.oncanplay=function(){},Cs.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var Ts=(_s=this.model.getMaterial())!==null&&_s!==void 0?_s:{},Bs=Ts.pano0,Ps=Ts.pano1,Ls=0,Rs=Object.keys(this.panoResources);Ls<Rs.length;Ls++){var $s=Rs[Ls],Fs=this.panoResources[$s];if(Fs.panoPicture){var Os=Fs.panoPicture.map;Os&&Os!==Bs?.map&&Os!==Ps?.map&&(Os.dispose(),(Ss=Fs.panoPicture.luminanceMap)===null||Ss===void 0||Ss.dispose(),Fs.panoPicture=null)}delete this.panoResources[$s]}},_a.prototype.isReady=function(){return this.locationMotion.ended===!0&&va.prototype.isReady.call(this)},_a.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){var Bs=this;this.userAction=Ts,this.work=_s,this.currentPanoIndex=Ss,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var Ps={},Ls=!0;this.boundingMesh&&(Ps=this.boundingMesh.getMaterial()||{},Ls=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Ls,this.boundingMesh.setMaterial(Ps),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Rs=0,$s=this.panoMeshes;Rs<$s.length;Rs++)$s[Rs].visible=!1;return this.moveToPano(Ss,{effect:"fade",duration:Cs,longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov,moveEndCallback:function(){Bs.initAnimationed=!0},moveCancelCallback:function(){Bs.initAnimationed=!0}},Ts),!0},_a.prototype.updateModel=function(_s){this.model=_s;var Ss={},Ms=!0;this.boundingMesh&&(Ss=this.boundingMesh.getMaterial()||{},Ms=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=Ms,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(Ss),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},_a.prototype.updateTime=function(_s,Ss){var Ms,Cs,Ts,Bs,Ps,Ls,Rs;if(!this.destroyed){var $s={},Fs={},Os=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Gs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Ns=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(_s);var Vs=this.locationMotion.getKeyFrameSegment(_s),Ds=Vs[0],ks=Vs[1],Us=this.panoResourceFromLocationMotionKeyframe(Ds),zs=this.panoResourceFromLocationMotionKeyframe(ks),Ws=new r$4.Vector3().copy(Us.position),qs=new r$4.Vector3().copy(zs.position),Zs=this.locationMotion.value.count-ks.value.count+1;$s.progress=Zs,$s.modelAlpha=this.locationMotion.value.modelAlpha,$s.perspToOrtho=pn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),zs.panoPicture&&(Zs<1?Us.panoPicture&&($s.pano0=Us.panoPicture):$s.pano0=zs.panoPicture,$s.pano1=zs.panoPicture),Ns=$s.useBlackTransition=zs.effect==="instant"||zs.effect==="montage",zs.effect!=="fade"&&zs.effect!=="montage"||($s.pano0&&Us.panoPicture&&($s.pano0={map:$s.pano0.map,luminanceMap:$s.pano0.luminanceMap,matrix:Us.panoPicture.matrix.clone().setPosition(zs.position)}),Ws.copy(qs)),Fs.distance=this.locationMotion.value.distance,Fs.offset=new r$4.Vector3(Ws.x+(qs.x-Ws.x)*Zs,Ws.y+(qs.y-Ws.y)*Zs,Ws.z+(qs.z-Ws.z)*Zs);for(var el=[],Js=[],Hs=0,Qs=this.locationMotion.keyframes;Hs<Qs.length;Hs++){var js=Qs[Hs],Ks=js.key,Xs=js.progress;Ks!==void 0&&(el.push(Ks),Xs>=this.locationMotion.progress&&Js.push(Ks))}for(var Ys=0,rl=Object.keys(this.panoResources);Ys<rl.length;Ys++){var tl=rl[Ys];if(!(Js.indexOf(tl)>=0)){var il=this.panoResources[tl];if(il.panoPicture){var ll=il.panoPicture.map;if(ll){if(ll===((Ms=$s.pano0)===null||Ms===void 0?void 0:Ms.map)||ll===((Cs=$s.pano1)===null||Cs===void 0?void 0:Cs.map))continue;ll.dispose(),(Ts=il.panoPicture.luminanceMap)===null||Ts===void 0||Ts.dispose(),il.panoPicture=null}}el.indexOf(tl)>=0||delete this.panoResources[tl]}}Us.workCode===zs.workCode?this.currentPanoIndex=Zs<.5?Us.panoIndex:zs.panoIndex:this.currentPanoIndex=zs.panoIndex,this.emit("movingToPano",Gs.panoIndex,Os.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(_s),Fs.longitude=this.cameraMotion.value.longitude,Fs.latitude=this.cameraMotion.value.latitude,Fs.fov=this.cameraMotion.value.fov),vr($s)===!1&&(this.model.setMaterial($s),this.boundingMesh.setMaterial($s)),vr(Fs)===!1&&this.setCamera(Fs),this.camera.pose.distance>.1)for(var cl=0;cl<this.work.observers.length;cl++)(xl=this.panoMeshes[cl])&&(xl.visible=!1);else{var al=this.work.observers[this.currentPanoIndex];if(al){var dl=al.visibleNodes.concat(this.currentPanoIndex),yl=this.getForwardPanoIndexOrNot();for(cl=0;cl<this.work.observers.length;cl++){var xl,wl=this.work.observers[cl];if(xl=this.panoMeshes[cl])if(wl.loadable||wl.active)if(dl.indexOf(cl)!==-1)if(Ns)xl.visible=!1,xl.setOpacity(0);else{xl.visible=!0;var Al=xl.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);xl.setCurrent(yl===cl),xl.setOpacity(Al<.01?0:pn(1.4/Al,.5,.7)),xl.updateTime&&xl.updateTime(_s,Ss)}else xl.visible=!1,xl.setOpacity(0);else xl.visible=!1,xl.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Bs=this.boundingMesh.getMaterial())===null||Bs===void 0?void 0:Bs.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position);var bl=this.tiling.object.visible;if(this.tileLevelForFov!==!1&&this.initAnimationed){var Bl=Gs.panoIndex,Cl=this.work.observers[Bl];if(Cl)if(ir(this.camera.position,Cl.position)&&this.locationMotion.ended){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance((Ps=Cl.images.luminance)!==null&&Ps!==void 0?Ps:null),this.tiling.panoIndex!==Bl&&this.tiling.cleanup(),this.tiling.panoIndex=Bl,this.tiling.setResource((Rs=(Ls=Cl.images)===null||Ls===void 0?void 0:Ls.tiles)!==null&&Rs!==void 0?Rs:[]),this.tiling.setRotation(Cl.quaternion),this.tiling.setPosition(Cl.position);var Sl=this.renderer.getSize(new r$4.Vector2);Sl.width*=this.scissor.width,Sl.height*=this.scissor.height,this.tiling.update(this.camera,this.tileLevelForFov(this.camera.fov,Sl),_s)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;bl!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0),this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(_s)}},_a.prototype.render=function(_s){var Ss=this.work.observers[this.currentPanoIndex];Ss&&Ss.video&&(this.needsRender=!0),va.prototype.render.call(this,_s)},_a.prototype.postProcessing=function(_s,Ss,Ms){if(!this.destroyed)return this.effect||(this.effect=new Hr(this.renderer)),this.effect.render(_s,Ss,Ms)},_a.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1],Ms=this.panoResourceFromLocationMotionKeyframe(Ss),Cs=this.work.observers[Ms.panoIndex];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:Cs?Cs.position.clone():this.camera.position.clone()}},_a.prototype.moveToPano=function(_s,Ss,Ms){var Cs,Ts,Bs,Ps=this,Ls=this.work.observers[_s],Rs=e$3.__assign({key:"pano.".concat(_s),basisLoaderInitialized:Ii.isInitialized()},ni(this.imageOptions,["format","size","quality","sharpen"])),$s=(Cs=this.imageOptions.transform)!==null&&Cs!==void 0?Cs:de,Fs={right:$s(Ls.images.right,e$3.__assign(e$3.__assign({},Rs),{key:"".concat(Rs.key,".right")})),left:$s(Ls.images.left,e$3.__assign(e$3.__assign({},Rs),{key:"".concat(Rs.key,".left")})),up:$s(Ls.images.up,e$3.__assign(e$3.__assign({},Rs),{key:"".concat(Rs.key,".up")})),down:$s(Ls.images.down,e$3.__assign(e$3.__assign({},Rs),{key:"".concat(Rs.key,".down")})),front:$s(Ls.images.front,e$3.__assign(e$3.__assign({},Rs),{key:"".concat(Rs.key,".front")})),back:$s(Ls.images.back,e$3.__assign(e$3.__assign({},Rs),{key:"".concat(Rs.key,".back")}))},Os={key:"pano_luminance.".concat(_s),basisLoaderInitialized:Ii.isInitialized(),size:Rs.size?Rs.size/2:1024},Gs=this.enableIOSEDR&&Ls.images.luminance?{right:$s(Ls.images.luminance.right,e$3.__assign(e$3.__assign({},Os),{key:"".concat(Os.key,".right")})),left:$s(Ls.images.luminance.left,e$3.__assign(e$3.__assign({},Os),{key:"".concat(Os.key,".left")})),up:$s(Ls.images.luminance.up,e$3.__assign(e$3.__assign({},Os),{key:"".concat(Os.key,".up")})),down:$s(Ls.images.luminance.down,e$3.__assign(e$3.__assign({},Os),{key:"".concat(Os.key,".down")})),front:$s(Ls.images.luminance.front,e$3.__assign(e$3.__assign({},Os),{key:"".concat(Os.key,".front")})),back:$s(Ls.images.luminance.back,e$3.__assign(e$3.__assign({},Os),{key:"".concat(Os.key,".back")}))}:null,Ns="pano:"+Dr(Fs);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Ns)return;var Vs=this.pendingTextureTask.panoIndex;(Ts=this.panoMeshes[Vs])===null||Ts===void 0||Ts.setProgress(0),this.emit("textureAbort",Vs,Ls),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0;var Ds,ks=this.model.getMaterial()||{},Us=ks.pano0,zs=ks.pano1;if(Us&&Us.map.name===Ns&&Us.luminanceMap!==null===this.enableIOSEDR?Ds=Us:zs?.map.name===Ns&&zs.luminanceMap!==null===this.enableIOSEDR&&(Ds=zs),Ds){var Ws={panoIndex:_s,workCode:this.work.workCode,effect:(Bs=Ss.effect)!==null&&Bs!==void 0?Bs:"fly",panoPicture:{map:Ds.map,luminanceMap:Ds.luminanceMap,matrix:new r$4.Matrix4().compose(Ls.position,Ls.quaternion,oo)},position:Ls.position.clone()};se.shared.add(function(){Ps.pending=!1,Ps.emit("panoLoaded",_s),Ps.doMoveToPano(_s,Ws,Ss,Ms)},!0,1)}else{this.pendingTextureTask={panoIndex:_s,hash:Ns,onLoad:function(Zs,el){var Js,Hs;if(Ps.pending=!1,Ps.destroyed)Zs.body.dispose();else{Zs.body.name=Ns,Ps.emit("panoLoaded",_s);var Qs={panoIndex:_s,workCode:Ps.work.workCode,effect:(Js=Ss.effect)!==null&&Js!==void 0?Js:"fly",panoPicture:{map:Zs.body,luminanceMap:(Hs=el?.body)!==null&&Hs!==void 0?Hs:null,matrix:new r$4.Matrix4().compose(Ls.position,Ls.quaternion,oo)},position:Ls.position.clone()};Ps.doMoveToPano(_s,Qs,Ss,Ms)}},onError:function(Zs){Ps.pending=!1,Ss.moveCancelCallback&&Ss.moveCancelCallback(),Ps.emit("panoLoadError",Zs,_s),Ps.emit("moveToPanoCanceled",_s)}};var qs=this.panoMeshes[_s];qs&&qs.tap&&qs.tap(),Promise.all([this.textureLoader.loadCube(Fs,{format:r$4.RGBFormat,viaAjax:!0},void 0,void 0,function(Zs){var el,Js;Ps.emit("textureLoading",Zs,_s,Ls),((el=Ps.pendingTextureTask)===null||el===void 0?void 0:el.hash)===Ns&&((Js=Ps.panoMeshes[_s])===null||Js===void 0||Js.setProgress(Zs))},this.renderer),Gs?this.textureLoader.loadCube(Gs,{format:r$4.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(Zs){var el,Js,Hs=Zs[0],Qs=Zs[1];((el=Ps.pendingTextureTask)===null||el===void 0?void 0:el.hash)===Ns?(Ps.pendingTextureTask.onLoad(Hs,Qs),(Js=Ps.panoMeshes[_s])===null||Js===void 0||Js.setProgress(0),delete Ps.pendingTextureTask,Ps.emit("textureLoaded",_s,Ls,Hs.meta)):(Hs.body.dispose(),Qs?.body.dispose())}).catch(function(Zs){var el,Js;((el=Ps.pendingTextureTask)===null||el===void 0?void 0:el.hash)===Ns&&(Ps.pendingTextureTask.onError(Zs),(Js=Ps.panoMeshes[_s])===null||Js===void 0||Js.setProgress(0),delete Ps.pendingTextureTask,Ps.emit("textureError",Zs,_s,Ls),Ps.emit("error",Zs))}),this.emit("textureStartLoad",_s,Ls)}},_a.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls=this;if(!this.destroyed){var Rs=!1;this.pending=!1,this.userAction=Cs,this.moveToPano(_s,{longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:pn((Bs=Ss.latitude)!==null&&Bs!==void 0?Bs:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:pn((Ps=Ss.fov)!==null&&Ps!==void 0?Ps:this.defaultFov,this.minFov,this.maxFov),duration:Ms,moveStartCallback:function($s,Fs){Rs=!0,Ls.emit("initAnimationWillStart",$s,Fs,Ls.userAction)},moveEndCallback:function($s,Fs){Ls.emit("initAnimationEnded",$s,Fs,Ls.userAction),Ls.initAnimationed=!0},moveCancelCallback:function(){var $s={longitude:Ls.camera.pose.longitude,latitude:Ls.camera.pose.latitude,fov:Ls.camera.pose.fov,offset:Ls.camera.pose.offset.clone()};Rs===!1&&Ls.emit("initAnimationWillStart",Ls.currentPanoIndex,$s,Ls.userAction),Ls.emit("initAnimationEnded",Ls.currentPanoIndex,$s,Ls.userAction),Ls.initAnimationed=!0}},Cs)}},_a.prototype.panoResourceFromLocationMotionKeyframe=function(_s){return this.panoResources[_s.key]},_a.prototype.locationMotionKeyframesLength=function(_s){for(var Ss=0,Ms=1;Ms<_s.length;Ms++){var Cs=this.panoResourceFromLocationMotionKeyframe(_s[Ms-1]).position,Ts=this.panoResourceFromLocationMotionKeyframe(_s[Ms]).position;Ss+=Cs.distanceTo(Ts)*(_s[Ms].value.count-_s[Ms-1].value.count)}return Ss},_a.prototype.updatePanoMeshes=function(_s){_s===void 0&&(_s=!0);for(var Ss={},Ms=0,Cs=this.panoMeshes;Ms<Cs.length;Ms++)Ss[(Ls=Cs[Ms]).name]=Ls;this.panoMeshes.length=0;for(var Ts=0;Ts<this.work.observers.length;Ts++){var Bs="panoCircle_".concat(this.work.workCode,"_").concat(Ts),Ps=this.work.observers[Ts],Ls=void 0;if(Ss[Bs]?(Ls=Ss[Bs],delete Ss[Bs]):((Ls=this.panoCircleMeshCreator()).name=Bs,this.helper.add(Ls)),Ls.position.copy(Ps.standingPosition),_s&&this.model.loaded&&this.model.bvhs.loaded){var Rs=new r$4.Vector3(0,-1,0),$s=new r$4.Vector3(0,.1,0).add(Ls.position),Fs=new r$4.Raycaster($s,Rs,0,.2),Os=this.model.intersectRaycaster(Fs)[0];Os&&Os.point.distanceTo($s)<.1&&Ls.position.copy(Os.point)}this.panoMeshes[Ts]=Ls}for(var Gs=0,Ns=Object.keys(Ss);Gs<Ns.length;Gs++){var Vs=Ns[Gs];this.helper.remove(Ss[Vs]),Ss[Vs].dispose(),delete Ss[Vs]}},_a.prototype.generateBoundingMesh=function(_s){_s===void 0&&(_s=!1);for(var Ss=this.model.bounding.clone(),Ms=0,Cs=this.work.observers;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss.expandByPoint(Ts.standingPosition),Ss.expandByPoint(new r$4.Vector3().fromArray([Ts.position.x,2*Ts.position.y-Ts.standingPosition.y,Ts.position.z]))}_s&&Ss.expandByPoint(this.camera.position);var Bs=sr(Ss,new r$4.Vector3(1,0,1));return Bs.name="panorama_bounding",Bs},_a.prototype.doMoveToPano=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls=this;Ms===void 0&&(Ms={}),this.userAction=Cs;var Rs=Ht(),$s=$n();this.tiling.cleanup(),this.panoResources[$s]=Ss;var Fs,Os,Gs;if(this.locationMotion.ended){var Ns=this.locationMotion.getKeyFrameSegment(Rs);Ns[0];var Vs=Ns[1],Ds=this.locationMotion.value,ks=this.panoResourceFromLocationMotionKeyframe(Vs).position,Us=Ss.position;Fs=Math.max(ks.distanceTo(Us),1),Os=[{key:Vs.key,progress:0,value:e$3.__assign(e$3.__assign({},Ds),{count:0})},{key:$s,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Gs=0}else{var zs=this.locationMotion.getKeyFrameSegment(Rs),Ws=zs[0],qs=(Vs=zs[1],Ds=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(Ws).position),Zs=(ks=this.panoResourceFromLocationMotionKeyframe(Vs).position,Us=Ss.position,Vs.value.count-Ds.count),el=Math.max(qs.distanceTo(ks),1)*Zs;Fs=el+Math.max(ks.distanceTo(Us),1),Os=[{key:Ws.key,progress:0,value:e$3.__assign({},Ds)},{key:Vs.key,progress:el/Fs,value:Vs.value},{key:$s,progress:1,value:{count:Vs.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var Js=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Hs=this.locationMotionKeyframesLength(Os);Gs=Js===0||Js===0?0:this.locationMotion.getProgressVelocity(Rs)*Js/Hs}var Qs=this.calculateMovingDuration(Ms.duration,Ms.effect==="fade"||Ms.effect==="montage"?0:Fs),js={longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov},Ks={longitude:(Ts=js.longitude)!==null&&Ts!==void 0?Ts:this.camera.pose.longitude,latitude:(Bs=js.latitude)!==null&&Bs!==void 0?Bs:this.camera.pose.latitude,fov:(Ps=js.fov)!==null&&Ps!==void 0?Ps:this.camera.pose.fov,offset:Ss.position.clone()};Ms.moveStartCallback&&Ms.moveStartCallback(_s,Ks),this.emit("panoWillArrive",_s,Ks,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Lt,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(js,Qs).catch(Lt),this.locationMotion.setKeyframes(Os,Qs,Gs).then(function(){var Xs,Ys,rl,tl={longitude:Ls.camera.pose.longitude,latitude:Ls.camera.pose.latitude,fov:Ls.camera.pose.fov,offset:Ls.camera.pose.offset.clone()};Ms.moveEndCallback&&Ms.moveEndCallback(_s,tl),Ls.emit("panoArrived",_s,tl,Cs);var il=Ls.work.observers[Ls.currentPanoIndex];if(il&&il.video&&Ls.videoTexture&&Ls.videoTexture.image instanceof HTMLVideoElement){var ll=ro.clone().multiply((rl=(Ys=(Xs=Ls.model.getMaterial())===null||Xs===void 0?void 0:Xs.pano1)===null||Ys===void 0?void 0:Ys.matrix)!==null&&rl!==void 0?rl:new r$4.Matrix4).multiply(il.video.matrix),cl={map:Ls.videoTexture,size:il.video.size,matrix:ll,alpha:1},al=$n(),dl=Ls.videoTexture.image;dl.setAttribute("uuid",al),(kr||(kr=new Promise(function(yl){var xl,wl=document.createElement("video");wl.muted=!0,wl.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",wl.addEventListener("timeupdate",function Al(){wl.removeEventListener("timeupdate",Al,!1),clearTimeout(xl);var bl=document.createElement("canvas");bl.width=bl.height=1;var Bl=bl.getContext("2d");Bl?(Bl.drawImage(wl,0,0,1,1),Bl.getImageData(0,0,1,1).data[3]>10?yl(!0):yl(!1)):yl(!1)},!1),wl.addEventListener("canplay",function Al(){wl.removeEventListener("canplay",Al,!1),wl.play()},!1),xl=window.setTimeout(function(){return yl(!1)},1e3)}))).then(function(yl){yl&&il.video&&dl.getAttribute("uuid")===al&&(dl.oncanplay=function(){dl.oncanplay=Lt,dl.play()},dl.ontimeupdate=function(){dl.currentTime>.5&&(dl.ontimeupdate=Lt,Ls.panoVideo.setMaterial(cl))},dl.src=il.video.source)}).catch(function(){dl.removeAttribute("uuid")})}},function(){Ms.moveCancelCallback&&Ms.moveCancelCallback(),Ls.emit("moveToPanoCanceled",_s)})},_a.prototype.getForwardPanoIndexOrNot=function(_s){var Ss=this,Ms=this.camera.getWorldDirection(new r$4.Vector3),Cs=this.camera.position.clone(),Ts=this.work.observers[this.currentPanoIndex];if(!Ts)return null;var Bs=Ts.accessibleNodes.filter(function(Ds){if(Ds===Ss.currentPanoIndex)return!1;var ks=Ss.work.observers[Ds],Us=ks.standingPosition.clone().sub(Cs);return Us.length()!==0&&!(Us.angleTo(new r$4.Vector3(0,-1,0))<Math.PI/12)&&(ks.loadable||ks.active)}),Ps=(_s?_s.ray.direction.clone():Ms.clone()).setY(0);if(Ps.length()===0)return null;for(var Ls=Bs.slice().sort(function(Ds,ks){var Us=Ss.work.observers[Ds].position.clone().setY(Cs.y),zs=Ss.work.observers[ks].position.clone().setY(Cs.y);return Us.distanceTo(Cs)-zs.distanceTo(Cs)}),Rs=0,$s=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Rs<$s.length;Rs++)for(var Fs=$s[Rs],Os=0,Gs=Ls;Os<Gs.length;Os++){var Ns=Gs[Os],Vs=this.work.observers[Ns].position.clone().setY(Cs.y).sub(Cs);if(Vs.length()!==0&&Ps.angleTo(Vs)<Fs)return Ns}return null},_a.prototype.onTapGesture=function(_s){var Ss=this,Ms=_s.pointers.map(function(tl){return ni(tl,["x","y"])});if(!this.emit("wantsGesture","tap",Ms,!0)){var Cs=this.relativeClientPosition(_s.center),Ts=new r$4.Raycaster;if(Ts.setFromCamera(Cs,this.camera),!this.emit("wantsTapGesture",Ts,Cs,!0)){this.emit("gesture","tap",Ms,!0),this.emit("tapGesture",Ts,Cs,!0),this.interiaMovement=!1;var Bs=this.camera.getWorldDirection(new r$4.Vector3).setY(0),Ps=null,Ls=this.work.observers[this.currentPanoIndex];if(Ls){var Rs=Ls.accessibleNodes.filter(function(tl){if(tl===Ss.currentPanoIndex)return!1;var il=Ss.work.observers[tl];return!(il.position.distanceTo(Ss.camera.position)>Ss.maxAccessibleDistance)&&(il.loadable||il.active)}),$s=this.model.intersectRaycaster(Ts)[0];if($s){var Fs=gr(Rs,function(tl){var il=Ss.work.observers[tl].standingPosition.clone();return il.clone().sub(Ss.camera.position).setY(0).angleTo(Bs)>Math.PI/2?1/0:il.distanceTo($s.point)},!0),Os=Fs[0];Fs[1]<this.panoTapTriggerRadius&&(Ps=Os)}ji(Ps)&&(Ps=this.getForwardPanoIndexOrNot(Ts));for(var Gs=0,Ns=this.locationMotion.keyframes;Gs<Ns.length;Gs++){var Vs=Ns[Gs],Ds=this.panoResourceFromLocationMotionKeyframe(Vs);if(!(Vs.progress<this.locationMotion.progress)&&Ds.panoIndex===Ps){Ps=null;break}}if(this.emit("panoSelected",Ps),ji(Ps))this.locationMotion.ended===!0&&this.cameraBounce();else{var ks=this.work.observers[Ps];if(ks.active){for(var Us={},zs=Math.PI/6,Ws=Math.PI/12,qs=new r$4.Vector3(0,1,0),Zs=ks.position.clone().setY(0).sub(Ls.position.clone().setY(0)).normalize(),el=Zs.clone().applyAxisAngle(qs,zs),Js=Zs.clone().applyAxisAngle(qs,-zs),Hs=[],Qs=[],js=[],Ks=0,Xs=ks.accessibleNodes;Ks<Xs.length;Ks++)if((Os=Xs[Ks])!==this.currentPanoIndex&&Os!==Ps){var Ys=this.work.observers[Os].position.clone().sub(ks.position).setY(0);Zs.angleTo(Ys)<zs?js.push(Ys):el.angleTo(Ys)<zs?Hs.push(Ys):Js.angleTo(Ys)<zs&&Qs.push(Ys)}var rl=(js.length>0?js:e$3.__spreadArray(e$3.__spreadArray([],Hs,!0),Qs,!0)).slice().sort(function(tl,il){return tl.angleTo(Zs)-il.angleTo(Zs)})[0];rl&&rl.angleTo(Bs)>Ws&&(Us.longitude=Math.atan2(-rl.x,-rl.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Us.latitude=pn(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Us.fov=this.defaultFov),this.emit("wantsMoveToPano",Ps,Us,!0)}else this.panoMeshes[Ps]&&(this.panoMeshes[Ps].setDisabled(!1),this.panoMeshes[Ps].setLoading(!0))}}}}},_a}(Nr),ao=Math.PI/180,uo=180/Math.PI,lo=function(){var va=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.platform);return function(){return va}}(),ho=function(){var va=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return va}}(),co=function(){var va=typeof navigator<"u"&&navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return va}}(),po=function(){var va=typeof navigator<"u"?navigator.userAgent.match(/.*Chrome\/([0-9]+)/):null,_a=va?parseInt(va[1],10):null;return function(){return _a}}(),Ao=function(){var va=!1;if(po()===65){var _a=typeof navigator<"u"?navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/):null;if(_a){var _s=_a[1].split(".");_s[0],_s[1];var Ss=_s[2],Ms=_s[3];va=parseInt(Ss,10)===3325&&parseInt(Ms,10)<148}}return function(){return va}}(),fo=function(){var va=lo()&&ho()&&typeof navigator<"u"&&navigator.userAgent.indexOf("13_4")!==-1;return function(){return va}}(),go=function(){var va=typeof navigator<"u"&&navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return va}}();function vo(){var va=typeof window<"u"&&(window.orientation==90||window.orientation==-90);return go()?!va:va}var mo,yo=(mo={},function(va,_a){mo[va]===void 0&&(console.warn("cardboard: "+_a),mo[va]=!0)});function bo(va){var _a,_s=va.indexOf("://");_a=_s!==-1?_s+3:0;var Ss=va.indexOf("/",_a);return Ss===-1&&(Ss=va.length),va.substring(0,Ss)}var wo,xo=function(va,_a,_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s,Fs,Os,Gs,Ns,Vs,Ds,ks,Us,zs,Ws,qs,Zs,el,Js,Hs,Qs,js,Ks,Xs,Ys,rl,tl;(function(il,ll,cl){var al=ll?ll[0]:0,dl=ll?ll[1]:0,yl=ll?ll[2]:0,xl=ll?ll[3]:1,wl=al+al,Al=dl+dl,bl=yl+yl,Bl=al*wl,Cl=al*Al,Sl=al*bl,El=dl*Al,Rl=dl*bl,Fl=yl*bl,jl=xl*wl,Vl=xl*Al,Wl=xl*bl;il[0]=1-(El+Fl),il[1]=Cl+Wl,il[2]=Sl-Vl,il[3]=0,il[4]=Cl-Wl,il[5]=1-(Bl+Fl),il[6]=Rl+jl,il[7]=0,il[8]=Sl+Vl,il[9]=Rl-jl,il[10]=1-(Bl+El),il[11]=0,il[12]=cl?cl[0]:0,il[13]=cl?cl[1]:0,il[14]=cl?cl[2]:0,il[15]=1})(va,_a),_s&&function(il,ll,cl){var al,dl,yl,xl,wl,Al,bl,Bl,Cl,Sl,El,Rl,Fl=cl[0],jl=cl[1],Vl=cl[2];ll===il?(il[12]=ll[0]*Fl+ll[4]*jl+ll[8]*Vl+ll[12],il[13]=ll[1]*Fl+ll[5]*jl+ll[9]*Vl+ll[13],il[14]=ll[2]*Fl+ll[6]*jl+ll[10]*Vl+ll[14],il[15]=ll[3]*Fl+ll[7]*jl+ll[11]*Vl+ll[15]):(al=ll[0],dl=ll[1],yl=ll[2],xl=ll[3],wl=ll[4],Al=ll[5],bl=ll[6],Bl=ll[7],Cl=ll[8],Sl=ll[9],El=ll[10],Rl=ll[11],il[0]=al,il[1]=dl,il[2]=yl,il[3]=xl,il[4]=wl,il[5]=Al,il[6]=bl,il[7]=Bl,il[8]=Cl,il[9]=Sl,il[10]=El,il[11]=Rl,il[12]=al*Fl+wl*jl+Cl*Vl+ll[12],il[13]=dl*Fl+Al*jl+Sl*Vl+ll[13],il[14]=yl*Fl+bl*jl+El*Vl+ll[14],il[15]=xl*Fl+Bl*jl+Rl*Vl+ll[15])}(va,va,_s),Ss=va,Cs=(Ms=va)[0],Ts=Ms[1],Bs=Ms[2],Ps=Ms[3],Ls=Ms[4],Rs=Ms[5],$s=Ms[6],Fs=Ms[7],Os=Ms[8],Gs=Ms[9],Ns=Ms[10],Vs=Ms[11],Ds=Ms[12],ks=Ms[13],Us=Ms[14],zs=Ms[15],(tl=(Ws=Cs*Rs-Ts*Ls)*(rl=Ns*zs-Vs*Us)-(qs=Cs*$s-Bs*Ls)*(Ys=Gs*zs-Vs*ks)+(Zs=Cs*Fs-Ps*Ls)*(Xs=Gs*Us-Ns*ks)+(el=Ts*$s-Bs*Rs)*(Ks=Os*zs-Vs*Ds)-(Js=Ts*Fs-Ps*Rs)*(js=Os*Us-Ns*Ds)+(Hs=Bs*Fs-Ps*$s)*(Qs=Os*ks-Gs*Ds))&&(tl=1/tl,Ss[0]=(Rs*rl-$s*Ys+Fs*Xs)*tl,Ss[1]=(Bs*Ys-Ts*rl-Ps*Xs)*tl,Ss[2]=(ks*Hs-Us*Js+zs*el)*tl,Ss[3]=(Ns*Js-Gs*Hs-Vs*el)*tl,Ss[4]=($s*Ks-Ls*rl-Fs*js)*tl,Ss[5]=(Cs*rl-Bs*Ks+Ps*js)*tl,Ss[6]=(Us*Zs-Ds*Hs-zs*qs)*tl,Ss[7]=(Os*Hs-Ns*Zs+Vs*qs)*tl,Ss[8]=(Ls*Ys-Rs*Ks+Fs*Qs)*tl,Ss[9]=(Ts*Ks-Cs*Ys-Ps*Qs)*tl,Ss[10]=(Ds*Js-ks*Zs+zs*Ws)*tl,Ss[11]=(Gs*Zs-Os*Js-Vs*Ws)*tl,Ss[12]=(Rs*js-Ls*Xs-$s*Qs)*tl,Ss[13]=(Cs*Xs-Ts*js+Bs*Qs)*tl,Ss[14]=(ks*qs-Ds*el-Us*Ws)*tl,Ss[15]=(Os*el-Gs*qs+Ns*Ws)*tl)},Eo=function(){function va(_a,_s){_a===void 0&&(_a=new r$4.Vector3),_s===void 0&&(_s=0),this.sample=_a,this.timestampS=_s}return va.prototype.set=function(_a,_s){this.sample=_a,this.timestampS=_s},va.prototype.copy=function(_a){this.set(_a.sample,_a.timestampS)},va}(),Io=function(){function va(_a,_s){this.kFilter=_a,this.isDebug=_s,this.currentAccelMeasurement=new Eo,this.currentGyroMeasurement=new Eo,this.previousGyroMeasurement=new Eo,lo()?this.filterQ=new r$4.Quaternion(-1,0,0,1):this.filterQ=new r$4.Quaternion(1,0,0,1),this.previousFilterQ=new r$4.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r$4.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r$4.Vector3,this.measuredGravity=new r$4.Vector3,this.gyroIntegralQ=new r$4.Quaternion}return va.prototype.addAccelMeasurement=function(_a,_s){this.currentAccelMeasurement.set(_a,_s)},va.prototype.addGyroMeasurement=function(_a,_s){this.currentGyroMeasurement.set(_a,_s);var Ss,Ms=_s-this.previousGyroMeasurement.timestampS;Ss=Ms,isNaN(Ss)||Ss<=.001||Ss>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},va.prototype.getOrientation=function(){return this.filterQ},va.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var _a=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,_s=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,_a);this.gyroIntegralQ.multiply(_s),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(_s);var Ss=new r$4.Quaternion;Ss.copy(this.filterQ),Ss.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Ss),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Ms,Cs=new r$4.Quaternion;Cs.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Cs.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",uo*((Ms=Cs).w>1?0:2*Math.acos(Ms.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Ts=new r$4.Quaternion;Ts.copy(this.filterQ),Ts.multiply(Cs),this.filterQ.slerp(Ts,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},va.prototype.accelToQuaternion_=function(_a){var _s=new r$4.Vector3;_s.copy(_a),_s.normalize();var Ss=new r$4.Quaternion;return Ss.setFromUnitVectors(new r$4.Vector3(0,0,-1),_s),Ss.inverse(),Ss},va.prototype.gyroToQuaternionDelta_=function(_a,_s){var Ss=new r$4.Quaternion,Ms=new r$4.Vector3;return Ms.copy(_a),Ms.normalize(),Ss.setFromAxisAngle(Ms,_a.length()*_s),Ss},va}(),Co=function(){function va(_a,_s){this.predictionTimeS=_a,this.isDebug=_s,this.previousQ=new r$4.Quaternion,this.previousTimestampS=null,this.deltaQ=new r$4.Quaternion,this.outQ=new r$4.Quaternion}return va.prototype.getPrediction=function(_a,_s,Ss){if(!this.previousTimestampS)return this.previousQ.copy(_a),this.previousTimestampS=Ss,_a;var Ms=new r$4.Vector3;Ms.copy(_s),Ms.normalize();var Cs=_s.length();if(Cs<20*ao)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(uo*Cs).toFixed(1)),this.outQ.copy(_a),this.previousQ.copy(_a),this.outQ;var Ts=Cs*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Ms,Ts),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(_a),this.previousTimestampS=Ss,this.outQ},va}(),So=function(){function va(_a){this.coefficients=_a}return va.prototype.distortInverse=function(_a){for(var _s=0,Ss=1,Ms=_a-this.distort(_s);Math.abs(Ss-_s)>1e-4;){var Cs=_a-this.distort(Ss),Ts=Ss-Cs*((Ss-_s)/(Cs-Ms));_s=Ss,Ss=Ts,Ms=Cs}return Ss},va.prototype.distort=function(_a){for(var _s=_a*_a,Ss=0,Ms=0;Ms<this.coefficients.length;Ms++)Ss=_s*(Ss+this.coefficients[Ms]);return(Ss+1)*_a},va}(),Bo=function(){this.angularAcceleration=null,this.angularVelocity=null,this.linearAcceleration=null,this.linearVelocity=null,this.orientation=null,this.position=null},Mo=function(){this.leftDegrees=0,this.rightDegrees=0,this.upDegrees=0,this.downDegrees=0},Po=function(){function va(_a,_s,Ss,Ms){this.viewer={id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},this.device={widthMeters:.11,heightMeters:.062,bevelMeters:.004},this.depthNear=.01,this.depthFar=1e4,this.yawOnly=Ss,this.accelerometer=new r$4.Vector3,this.gyroscope=new r$4.Vector3,this.filter=new Io(_a,Ms),this.posePredictor=new Co(_s,Ms),this.isFirefoxAndroid=co(),this.isIOS=lo();var Cs=po();this.isDeviceMotionInRadians=!this.isIOS&&Cs!==null&&Cs<66,this.isWithoutDeviceMotion=Ao()||fo(),this.filterToWorldQ=new r$4.Quaternion,lo()?this.filterToWorldQ.setFromAxisAngle(new r$4.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new r$4.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new r$4.Quaternion,this.worldToScreenQ=new r$4.Quaternion,this.originalPoseAdjustQ=new r$4.Quaternion;var Ts=typeof window<"u"?-window.orientation*Math.PI/180:0;this.originalPoseAdjustQ.setFromAxisAngle(new r$4.Vector3(0,0,1),Ts),this.setScreenTransform_(),vo()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new r$4.Quaternion,this.orientationOut_=new Float32Array(4),this.previousTimestampS=Date.now()}return va.prototype.getPosition=function(){return null},va.prototype.getOrientation=function(){var _a;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Ts=new r$4.Quaternion().setFromAxisAngle(new r$4.Vector3(0,0,-1),0),Bs=new r$4.Quaternion;return typeof window<"u"&&window.orientation===-90?Bs.setFromAxisAngle(new r$4.Vector3(0,1,0),Math.PI/-2):Bs.setFromAxisAngle(new r$4.Vector3(0,1,0),Math.PI/2),Ts.multiply(Bs)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((Ss=new r$4.Quaternion).setFromAxisAngle(new r$4.Vector3(1,0,0),-Math.PI/2),Ss),_a=this._deviceOrientationQ;var _s=new r$4.Quaternion;return _s.copy(_a),_s.multiply(this.deviceOrientationFilterToWorldQ),_s.multiply(this.resetQ),_s.multiply(this.worldToScreenQ),_s.multiplyQuaternions(this.deviceOrientationFixQ,_s),this.yawOnly&&(_s.x=0,_s.z=0,_s.normalize()),this.orientationOut_[0]=_s.x,this.orientationOut_[1]=_s.y,this.orientationOut_[2]=_s.z,this.orientationOut_[3]=_s.w,this.orientationOut_}var Ss,Ms=this.filter.getOrientation();_a=this.posePredictor.getPrediction(Ms,this.gyroscope,this.previousTimestampS);var Cs=new r$4.Quaternion;return Cs.copy(this.filterToWorldQ),Cs.multiply(this.resetQ),Cs.multiply(_a),Cs.multiply(this.worldToScreenQ),this.yawOnly&&(Cs.x=0,Cs.z=0,Cs.normalize()),this.orientationOut_[0]=Cs.x,this.orientationOut_[1]=Cs.y,this.orientationOut_[2]=Cs.z,this.orientationOut_[3]=Cs.w,this.orientationOut_},va.prototype.getPose=function(){var _a=new Bo;return _a.orientation=this.getOrientation(),_a},va.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),vo()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},va.prototype.getFrameData=function(_a){var _s=this.getOrientation(),Ss=this.getEyeOffset(),Ms=this.getEyeProjectionMatrix();return _a.pose.angularAcceleration=null,_a.pose.angularVelocity=null,_a.pose.linearAcceleration=null,_a.pose.linearVelocity=null,_a.pose.orientation=_s,_a.pose.position=null,_a.timestamp=this.previousTimestampS,_a.leftProjectionMatrix.set(Ms.left),_a.rightProjectionMatrix.set(Ms.right),xo(_a.leftViewMatrix,_s,Ss.left),xo(_a.rightViewMatrix,_s,Ss.right),_a},va.prototype.start=function(){if(typeof window>"u")return function(){};var _a=this.onDeviceMotion_.bind(this),_s=this.onOrientationChange_.bind(this),Ss=this.onMessage_.bind(this),Ms=this.onDeviceOrientation_.bind(this);return lo()&&function(){if(typeof window>"u"||typeof document>"u")return!1;var Cs=window.self!==window.top,Ts=bo(document.referrer),Bs=bo(window.location.href);return Cs&&Ts!==Bs}()&&window.addEventListener("message",Ss),window.addEventListener("orientationchange",_s),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",Ms):window.addEventListener("devicemotion",_a),function(){window.removeEventListener("devicemotion",_a),window.removeEventListener("deviceorientation",_s),window.removeEventListener("orientationchange",_s),window.removeEventListener("message",Ss)}},va.prototype.getEyeOffset=function(){return{left:[.5*-this.viewer.interLensDistance,0,0],right:[.5*this.viewer.interLensDistance,0,0]}},va.prototype.getEyeProjectionMatrix=function(){var _a=this.getEyeFieldOfView(),_s=this.depthNear,Ss=this.depthFar,Ms={left:[],right:[]},Cs=_a.left.upDegrees*ao,Ts=_a.left.downDegrees*ao,Bs=2/((Ls=_a.left.leftDegrees*ao)+(Rs=_a.left.rightDegrees*ao)),Ps=2/(Cs+Ts);Ms.left[0]=Bs,Ms.left[1]=0,Ms.left[2]=0,Ms.left[3]=0,Ms.left[4]=0,Ms.left[5]=Ps,Ms.left[6]=0,Ms.left[7]=0,Ms.left[8]=-(Ls-Rs)*Bs*.5,Ms.left[9]=(Cs-Ts)*Ps*.5,Ms.left[10]=Ss/(_s-Ss),Ms.left[11]=-1,Ms.left[12]=0,Ms.left[13]=0,Ms.left[14]=Ss*_s/(_s-Ss),Ms.left[15]=0;var Ls,Rs;return Cs=_a.right.upDegrees*ao,Ts=_a.right.downDegrees*ao,Bs=2/((Ls=_a.right.leftDegrees*ao)+(Rs=_a.right.rightDegrees*ao)),Ps=2/(Cs+Ts),Ms.right[0]=Bs,Ms.right[1]=0,Ms.right[2]=0,Ms.right[3]=0,Ms.right[4]=0,Ms.right[5]=Ps,Ms.right[6]=0,Ms.right[7]=0,Ms.right[8]=-(Ls-Rs)*Bs*.5,Ms.right[9]=(Cs-Ts)*Ps*.5,Ms.right[10]=Ss/(_s-Ss),Ms.right[11]=-1,Ms.right[12]=0,Ms.right[13]=0,Ms.right[14]=Ss*_s/(_s-Ss),Ms.right[15]=0,Ms},va.prototype.getEyeFieldOfView=function(){var _a=this.viewer,_s=this.device,Ss=new So(_a.distortionCoefficients),Ms=_a.screenLensDistance,Cs=(_s.widthMeters-_a.interLensDistance)/2,Ts=_a.interLensDistance/2,Bs=_a.baselineLensDistance-_s.bevelMeters,Ps=_s.heightMeters-Bs,Ls=uo*Math.atan(Ss.distort(Cs/Ms)),Rs=uo*Math.atan(Ss.distort(Ts/Ms)),$s=uo*Math.atan(Ss.distort(Bs/Ms)),Fs=uo*Math.atan(Ss.distort(Ps/Ms)),Os=new Mo,Gs=new Mo;return Os.leftDegrees=Math.min(Ls,_a.fov),Os.rightDegrees=Math.min(Rs,_a.fov),Os.downDegrees=Math.min($s,_a.fov),Os.upDegrees=Math.min(Fs,_a.fov),Gs.leftDegrees=Os.rightDegrees,Gs.rightDegrees=Os.leftDegrees,Gs.upDegrees=Os.upDegrees,Gs.downDegrees=Os.downDegrees,{left:Os,right:Gs}},va.prototype.onDeviceOrientation_=function(_a){this._deviceOrientationQ=this._deviceOrientationQ||new r$4.Quaternion;var _s=_a.alpha,Ss=_a.beta,Ms=_a.gamma;_s=(_s||0)*Math.PI/180,Ss=(Ss||0)*Math.PI/180,Ms=(Ms||0)*Math.PI/180,this._deviceOrientationQ.setFromEuler(new r$4.Euler(_s,Ss,-Ms,"YXZ"))},va.prototype.onDeviceMotion_=function(_a){this.updateDeviceMotion_(_a)},va.prototype.updateDeviceMotion_=function(_a){var _s=_a.accelerationIncludingGravity,Ss=_a.rotationRate,Ms=_a.timeStamp/1e3,Cs=Ms-this.previousTimestampS;return Cs<0?(yo("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=Ms)):Cs<=.001||Cs>1?(yo("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=Ms)):(_s&&(this.accelerometer.set(-_s.x,-_s.y,-_s.z),Ss&&(go()?this.gyroscope.set(-Ss.beta,Ss.alpha,Ss.gamma):this.gyroscope.set(Ss.alpha,Ss.beta,Ss.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Ms)),this.filter.addAccelMeasurement(this.accelerometer,Ms)),void(this.previousTimestampS=Ms))},va.prototype.onOrientationChange_=function(){this.setScreenTransform_()},va.prototype.onMessage_=function(_a){var _s=_a.data;_s&&_s.type&&_s.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(_s.deviceMotionEvent)},va.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),typeof window<"u"?window.orientation:0){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new r$4.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new r$4.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},va}(),To=[0,0,.5,1],Qo=[.5,0,.5,1],Ro=function(){function va(_a){var _s=this;this.renderer=_a,this.sensor=new Po(.98,.04,!1,!1),this.scale=1,this.cameraL=new r$4.PerspectiveCamera,this.cameraR=new r$4.PerspectiveCamera;var Ss=this.sensor.start();this.dispose=function(){var Ms=_s.renderer.getSize(new r$4.Vector2);_s.renderer.setScissor(0,0,Ms.width,Ms.height),_s.renderer.setViewport(0,0,Ms.width,Ms.height),_s.renderer.setScissorTest(!1),Ss()}}return va.prototype.render=function(_a,_s){var Ss=this.renderer.getSize(new r$4.Vector2);if(Ss.width>Ss.height){var Ms=_a.autoUpdate;Ms&&(_a.updateMatrixWorld(),_a.autoUpdate=!1);var Cs={x:Math.round(Ss.width*To[0]),y:Math.round(Ss.height*To[1]),width:Math.round(Ss.width*To[2]),height:Math.round(Ss.height*To[3])},Ts={x:Math.round(Ss.width*Qo[0]),y:Math.round(Ss.height*Qo[1]),width:Math.round(Ss.width*Qo[2]),height:Math.round(Ss.height*Qo[3])};this.renderer.setScissorTest(!0),this.renderer.autoClear&&this.renderer.clear(),_s.parent===null&&_s.updateMatrixWorld(),_s.matrixWorld.decompose(this.cameraL.position,this.cameraL.quaternion,this.cameraL.scale),_s.matrixWorld.decompose(this.cameraR.position,this.cameraR.quaternion,this.cameraR.scale);var Bs=this.sensor.getEyeOffset();this.cameraL.translateOnAxis(new r$4.Vector3().fromArray(Bs.left),this.scale),this.cameraR.translateOnAxis(new r$4.Vector3().fromArray(Bs.right),this.scale);var Ps=this.sensor.getEyeProjectionMatrix();this.cameraL.projectionMatrix.elements=Ps.left.slice(),this.cameraR.projectionMatrix.elements=Ps.right.slice(),this.renderer.setViewport(Cs.x,Cs.y,Cs.width,Cs.height),this.renderer.setScissor(Cs.x,Cs.y,Cs.width,Cs.height),this.renderer.render(_a,this.cameraL),this.renderer.setViewport(Ts.x,Ts.y,Ts.width,Ts.height),this.renderer.setScissor(Ts.x,Ts.y,Ts.width,Ts.height),this.renderer.render(_a,this.cameraR),this.renderer.setViewport(0,0,Ss.width,Ss.height),this.renderer.setScissor(0,0,Ss.width,Ss.height),this.renderer.setScissorTest(!1),Ms&&(_a.autoUpdate=!0)}else this.renderer.render(_a,_s)},va.prototype.dispose=function(){},va}(),Do={zh:{TITLE:"\u773C\u955C\u6A21\u5F0F",HIT:"\u8BF7\u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165 VR \u773C\u955C\u4E2D"},en:{TITLE:"GLASSES MODE",HIT:"Please put the mobile phone horizontally into the VR glasses."},ja:{TITLE:"\u30E1\u30AC\u30CD\u30E2\u30FC\u30C9",HIT:"\u643A\u5E2F\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002"}},ko=typeof navigator<"u"&&(wo=Do[navigator.language.split("-")[0]])!==null&&wo!==void 0?wo:Do.zh,No=`
<style>
.$id {
  all: initial;
  position: absolute;
  overflow: hidden;
  display: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.$id-modal {
  width: 100%;
  height: 332px;
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  overflow: hidden;
  pointer-events: none;
  will-change: transform;
  animation: $id-modal-fade-in 0.3s ease 1;
}
.$id-modal-bg {
  background: rgba(0, 0, 0, 0.75);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
}
.$id-modal-bg-line {
  height: 1px;
  background-image: linear-gradient(
    85deg,
    rgba(162, 177, 255, 0.3) 1%,
    rgba(120, 126, 255, 0.8) 30%,
    rgba(147, 218, 255, 0.8) 66%,
    rgba(250, 255, 184, 0.3) 92%
  );
}
.$id-modal-bg-wave svg {
  width: 375px;
  height: 61px;
  display: block;
}
.$id-modal-content {
  color: #ffffff;
  padding: 0 14px;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  overflow: hidden;
}
.$id-modal-content-title {
  font-size: 17px;
  font-family: sans-serif;
  line-height: 18px;
  padding: 20px 0;
  font-weight: bold;
}
.$id-modal-content-hit {
  font-size: 14px;
  font-family: sans-serif;
  line-height: 24px;
  opacity: 0.85;
}
.$id-modal-content-guide {
  position: relative;
  width: 168px;
  height: 139px;
  margin: 36px auto 0;
}
.$id-modal-content-guide-cardboard {
  position: absolute;
  width: 100px;
  height: 82px;
  left: 68px;
  top: 57px;
}
.$id-modal-content-guide-cardboard-image {
  width: 100px;
  height: 82px;
  background-image: url(`.concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADqCAMAAAAvZYhaAAAC/VBMVEUAAAD///99fX37+/v5+fn29vbx8fHv7+/Nzc3o6Ojq6urh4eHU1NTR0dGDg4Pl5eWSkpLHx8fj4+Pe3t7X19fAwMDZ2dnCwsKrq6uioqLb29uNjY2enp67u7t5eXmAgIC2traWlpa5ubnKysqmpqZycnKHh4eurq6ysrKKioqDg4Pd3d12dnb9/f1vb2/s7OxlZWXz8/OoqKiZmZlpaWmbm5teXl7W1tbJycnExMRiYmJsbGywsLCPj49aWlq9vb1UVFRYWFhra2t+fn7t7e1RUVFOTk6Dg4OAgICCgoKKioqEhISIiIhqamqCgoKIiIiQkJCIiIiWlpawsLBmZmaAgICenp6Li4uBgYGTk5OMjIyVlZWFhYWCgoKvr6+Ojo59fX2SkpKvr6+Ojo6QkJCurq6BgYGxsbF8fHx4eHitra2enp6srKyJiYmurq54eHj5+fl+fn57e3v////5+fnS0tLAwMCVlZWwsLCurq5QUFCtra2EhISUlJSwsLCUlJSUlJSlpaWVlZW3t7diYmLAwMCFhYV3d3f///+tra3///9XV1eampqnp6d8fHz///////9VVVVlZWVtbW3+/v5SUlKcnJytra28vLzGxsbR0dHX19doaGiWlpafn5/Hx8ezs7Nzc3Nubm7AwMCIiIjj4+NTU1P29vZbW1vl5eVkZGTMzMxYWFjq6upfX1/k5OT////4+PjV1dWkpKRoaGj4+Pizs7Pm5ubAwMCfn5+vr6+urq4wMDCxsbG2tra5ubliYmIuLi6zs7NHR0empqY0NDRCQkKqqqo5OTmoqKg7OztfX19dXV1oaGikpKRkZGStra0hISE/Pz89PT0pKSlmZmZJSUlERERbW1s2NjZVVVUmJia7u7uEhIRXV1dZWVlLS0tOTk6srKxqamojIyNTU1MrKyuAgICCgoJRUVFra2ttbW13d3dxcXFvb299fX1zc3N2dnZ5eXl8fHyHh4eSkpKenp6Ojo6VlZWMjIyYmJihoaGcnJyJiYmamprZ2YdEAAAAunRSTlMAs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7P9s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Oz+QSzswb9DiH3FyI57Jn1ajgu7uHYmIgr8OHHwqVOQybv6OZuUvTt3dHPrIeFSNVgLCAWD9/UqKebiH1iXVTczcvKvambhnBuY/vGrKqjlHlzVDj37s/Fw7+tpJGAeN7VzcWTgGJNQ8O9u7iko5aVjvbNsa+so1pd3mNGAAAqAElEQVR42uzZzWvTYBwH8DxNmvRlfVNr17Wl05a9dISyiugO4qVQ2g1pVyx2Q7QKCoIivgxF1HnTXbbDDnNDJ8iQHcQX8O3We1t6GnjJyYPSuTmdf4C/ZE260U5rl6bJ2g8Pu2zP5cvz++ZJhilOcOxcfPHq/NuFhVcftK8WXizeCGItFWKKX5x/23Zk3/6OPr1+j0mr1fkpkuxXv5luBbbZWPzevEWjMRja2iCrvXs3stJRFGRFEDhOT1xv5QWCkYvPPtosFg+XFZyrvSYdRUJEBA4Igg2LRuBhk+cVOndv3uWyWm0DlqMajWafXkcSNNrexA2sSQ1dvPK+86DruNUGWRn6dGoa/dvk9BjWbMLxZ7e7e3ogK5fVZtBTOKrew6Y6Xufu3Qm0d3f3dEJWGj1Fo/81dbU52isUf2T3etvZrHoG9vtxVKOJm9guF049ddrt3gBkdVCzh0DlWtO4YejT00OHnU44VwHXPgqJ4PV1bFeKDD8xH4Cs7PaAtY9AYpncfeUFSR0zc1l5B/Q4EhW9q+KCpHodXFYBjxZxWnFtk9SZrl4uK6/Hj+pmWvlxDQ2fMRq7eh0OSIpCW7Ti2iJ8/4zK7WazcloqJtUaxqLweFSl4rI6ZNOhylpxsUKpqFsF3EazS4ukNLmIKcuJpFHF6erUI8lNKeiaGrl7WcUxtu+nUUO8VsZLEDz8VBy33YCjxnko+1dsrtI5hz1q1GATcm76YCrpVnHMVgrJgWwfjCN3u1Sc3k4TkgtZNv3QcLHS3Wyly4ncqis8/qSYlFNDINl5IZ9ZDKaifFHZSCRLkzKZxZEkX1QHtUi+ZDCLQlEZ2/uQzDX2c0T4vjzuntWaatiVPiQU1YEBoahoRMNCNRBzv9zuqCNJo1BUdGU4jcOiqyDhfgmLvryoOnClkfRwhcehqDh2A4ErkGTNBa9+paLClUqSK2rkrnCjMhFK9mYMqy+4Jwhf8wjlIWcvjcYGGYbxxUZvmd6V93w9XmicHpJQmD0zifM+ZovYzFWsjMifiB0urVpRyMeJmI+pyBnCxBcaF8avQ60kL58nYkyJ78f3leUvXwqrP9e/MqzBCCaykWRp/NTKQT0fHfzN8L79WlteSm9S+MUdt2t16XR4+vVXTd2vhtVfRrL9cw9ijGB9rZDOgPRm+XxunQGnRD9Ubm8bqRgvZ0Z9woFaX81lNqQzW7MCKwy4IE5T8YfKbNWRSmG6FCtN3upSNpspKosKLBXY6jorxuPPyF+pSKWYezDIFP1YyWXYpLJlSeWFqNi0fFD7O235VFTFOWbVUjUiKRIWBaTZP5vgk/r2vZDOgkylAczD4tMCy5DW6R2V+vBlvqkohZhN8DX1dY09UkJW5b0uJMXJ/dzRIEaKpe5wmShlmEv4hOHLf84WlU8gEKLi5Zagtk5itTkR5f/trvNvj/JTsKr4Xf3366GnhKSy2WJWmZJKpypfDCoHVmHriZpu6hvzZ+zu0HH8kBj8+KvKfyfN/j/UnclvG1UcxxGnhGxKaVIIioBEosi9gVAaCSkHkFhFgAOrBEIgDixCnOAAAgmVG1cEZ7jxHzi2YzvYcWyP3cRNY6e1J2sdJ7bjbLXTLOL73rzFz88TGqip+cyLZ+kMJB++v988jwN0fSJMFb1JIFxxXXq3kq4wCIjWw/+gVT3G6+++/wOtP7wmMuUVooASqtmNQim/6djd36tUyuX9o930WnZrXagCJdwQnz3lc+JvrVb16MXW+/4P/PaRg3X0AstUUm1WRil7VIn5xzkeD74EU4fl3c0CVC0bG/iLvHi6rs7vf60ncR9E4kXbVvcbf724+a2VZpMUdCuhysgfHS5xR1KVR+dyZQdvrNdOdT9851X+IWnr/wDR0h15I2kmuSwK8eQetwG+dGP+4200rW9Oq+r8/a3NT9cPH/K3x+tRSJKx8haObvqvXx8fx8CLrokOLBp/7q69daq5An5BtrWL0trVitHFkcea4M9/FY2qGBGhQreKFNI3x68TdFXSGIaO3+P3e6a+vK1Uvc+ev7R1NT1i7pktxU3AVEU2HIee64JxDCy1lrgqrBVV3Ne7r/ztZMFq6w+NtHWdUeg604Vhu62f2/Dr277m8wQ0KqkqvnkMUSo2uWKFWKvKTxaMy1+c7Oq7Tuu9ctuZZucX/mnD5kbUpCSBkT6AG00VXNkJ0/BzYeCxk2L1Ki3AnjNtZzDaFGqPnXROw6//46vnHWmHNaMyhari/iS86EAThgYNVd0ZBM0V5U37mdXnZF51/kJbc9Mr5wmzTJSZjG7tuXVTateyK0U9WXR1oq0PHiaz9fa25kY0qp31ZIaHKn8LEYEOLDpSVI0w2dv5SvoS/F5/wkBcPYH/Is791WC3DcNuXz+3oddXzxMyXFUBmQJWZ1Kxb1oeeVPUVPF82dt6Ea4e7r+/iRnCPIG6Wit5M1zV+v6YNMDE6NiUIPmqh99aGPrs9OXH4GoY39KF+y9o4KB+XD8HNOz6vs9ek40qg4Vg7E5JUdZig83NUE7h9ZuhYLJ2vvUs6e0DfVVc6LtAwErsY9gepzTs+l8/WuPzhCQyRWPlzR6M12Bri/4Rhh6setGCKMXWz8/VzK/g6nxfczLE737ZQiQDiKpoibZ0NVeQYhcs20Kki4rfGsQY0G+JL6BhPdnX19vXS8BKbst9sVaQ5zTm+h9G0w5HGsvWbIZhzh45x+tio4pmyq4SdagqDI7br3zq+jYaVktv8/HHG8+z8ltPilBt36Sh0pNFZdzmNMvjnIzdPK5Ubh0fHsRik6oq4Fei9XP1nRBF+EDvWYXes70YyrZyTDt+56/HM2KaKtz95rkqY99pdWUdmyJURTljt/Y3C7ORqMB6ompsrZUP3doMntMpZX2L5zHtZ5uLDv5AYdswM4zk9oEw5dFUKcL0jjVWLpq5mXDIlUpM5PhDeWEMzkwzshlTmrxUNiUeMj/XiWCdBUNnhwTYwbDbVtaUO3s9OhXBkS1G55Eqind3TE636+pi9aZNGpbKxZxrenpl5Uo4HE75XC5XYC4TEb4iUpdZONBuh8DtFj3+A9Kx2sFQ+xAFGwLsYNhuC+7g9QiV1dS3Z2GKsVHxezgyWZov7Z4Y21kNTFNWgA+2Ai5CYAKf9AhhEalrR86zJO7Jl5msV3ErbG8aLrFnL1aosJD624kJUWypmyzZ6qm0qWwGgWKsEK4FwuGQJcsVMr0WoiKT1FaexkpNlt/dyaoQ84aB9uag47OXECmwbWTmCRkQP3J6JGp71xsXS9ZSOpqaBqqra1dC4USKuAKpjBdIXyRcNFtIFhC+3BjuGHsHTaqwg9De0Y5B14BuA2Xf7pw7cv2ljzBTgKxsKQJPzJWxJ+pP6lKipfs63JiBH10VcKEQ4YqSMr0CIouHa1/t7sgVhvUW8XU8Re5oAj57ic+pTOqJpqp4rImCKm5Kr0Ow5w1M18JcXQGkxwcYoSj9CF+my7KVPKhtWRjv8pb1YMfd5hKefZJUkTkVsGSZedGqVF+gfo937mZuMD+aKyaLdC3mKhWYicOVECYaVxx2PGq03JdfILLQsh7p6GjpaMGgawX1mN05//L6H0bp3S+dRagY6OrZSevGpCCCpatypxeuTduoYrkCrnAiHOC2Urk4gCvFlmkeacGy6vBlTN+7tR+QLjp25/2b61s+hSaSqq34vMBSRVuHrqtez/KXvSGIsXXFZd24weswRUC0KN64Yis6SaIlVRE+svp7Z8vdA/VnzRQ2kqurMlVrl627Ud0iBDVPPPeMYDi1cmKs4MqSFbLqMEUJRfHLRlXhYm3edCjJosKW8Hs13+PznJa7xXujaTpVwPSzSlXUAVUED1noi16JUtgtIxGGAKUEtdbOVIFAOBGCKiZrdRayLF1xflckn9M6FVtu0rbwbxN8jF/Uxrc92DKIYa0BVicfA+r26a8f/PQlqwC3IsSU7FVjXBXXpCNq8KAQ9LlCiitNFZCufIFEIsxzFQpdhSyqS9qihVjmomSLf4w+nnlq8C7QjfojqcpumKsyVfPm9pRf4lGalpYsZ3bB5fP5UgjWFRtXTJV05XNBFhEFVSA4q9mihVjA31h44k2LzhwGL14cvDhIwQaGsmaIff3c019/CQ+KHaz+qmNViklR9Lu1D5anEgn4XD7MMOHKZ+NKVQWxVFYCrhhhwzCYL2JLFuJYdRVSZQf33PMjHjngB+m+2E3BBoayBnxbX1NOe/17L1lPP0uov2pXxZt+BXE71J1NbgXhicpCEQbsVNWXNROStuIGELbkLbGi1iDwv0hldf+nkFYFWdmiSU0J4hV62wF/27PKpgv4YApFWL9haaq4K9fMTDAk8RrSFtNFu9amlMV9fUxkne/+7xjGVJ2kKrucWaWIiVXayfKu2tJ9TRUSSBRVhVdShDdOaFcM6coVDEpZ4VDUkLZEISJa62qwAKalnUTWMKV7uJuCDQxlDcS2ft5tX49WRVOFVqWqyuSnSNAxavDU+tozXdQUf4GrgH2srimqAFpclSxcnDQseLJ414q6hS0erd+JrMeH8X/UODeMcQ7IbbwAbVs/9zavHxh1ULZYq5IlaBy6qStVkx6tpe0gc4SBxSrCldtrV8AFAnNzc0wVkWUajNpoxVgFimjhcenDkHXuv+C9Uev9XzGphAqYu043hf9TlCgzh0NvgBcfXuiPXq8IV6avKa5uSFeE1NzcBI8VMJeXZbRmq6J1LBoW84UHD/fiffS5xvMTujppVeu8VUlbxZjbggdeLUEmy7+f8wFY4g2LBStVq2paUwVXMlihiYk5pgokMsvVtiCLt/g9tWWBnyFLJKvnXI8CDgiwg6GstXPsr/8UXR1kDThSSzATKbsFfvqlNS1weTtIJbHyoyvW3a+oroDqSlUVCIQhK8xVJSALCFmA1+GuejMEB1RWT2NhqnbisKS6ymQKU+5q1Dr0sNeYEWB5wop90X1tiqXfBVVXYObq1SBTJWQpXYvJyrJYyWjFGi5rBKpIr8p7V3PClZgv7ON7cApRdBG3RA+rxMOIiyCDhQFEsPRYAZtYgbmFhSCPFZivKwu2xERL6Joisp7uGRnpGenBoGsNebz+OSP214+QaRVk5SM57mpeulqOOYFbhaqSuioZmiQ2A1WGOndHt1Jc6d3K4ipkcVdqstRZ/DYVVc0SldU/Iugf6SdgpW4DrPTj9Jjd9f3szXIpmsvxUMkKNNc0VVrHKi8SR0wTT5XQhh9Zzt0VVbauUqGFxcUZ4WpmBrJAtay41eHzRJXa4oms8/2NgfWqUjIHVxzhKnqLqHLSFylLMVZegBjpCJvKfgrBkqki6K5UVZCVWFxcJKY0WUDp8HnpqfGyfnrGAdYKJlelPF7IrP/ppKI0xORhfwFCmCTmSN1nHcv+LsiQrvBoZm5x8SoTBVVclt60aLKsRZU1MDDQP9CPQdcCdV85DsQ1QL9+YDRNVBUzMCVKcFW62hyzTPFcqdECe0QVF0M3a/fJ5zQiVnbtClTFCiws5ia4KhA8QRa+Dz1ZDwzccf6i7Wx60zjCON5PEPVoq5WcRFGd+ugoN/fUSy9VT1UPTXuu1EPVr5B7T/02wAG0ZrFZMAjMshCVBRziXTCOncR2Xtqq/3nZfXZmdrdJtf15CsYiCvzyf56dmd3iH3msLv2kqvGCTnK9KcVAmNbfMf4e8xSRoor5GO29JlTlzq5UV028Ipu5EtiZyXIuKVP/r6zfWLd6Xg0ByQLUrqQo9mXqetep14D0wi3pj6m9K0dBmlw909uV2Ege4gUlVNm2nyWL9aw0Wbfv3r199zbGXUDfp9wDeh491v78Y97XF0qzwojOMw+OSgQKUWtZjXUfnVtEiVbNxuO6WOlAFLnKjFW86T5bLKZwJbFJljF3OIMqNihgJSGrWH5m3aoNU2Zj5639sKzI0nS9rD05aMJWnCQxKtpjUYVP02IFjKOgPD/Rx2sZkqocWa0zocpMVqH8FmAV2AoBqUq4Om+UFNQavOohLMzWQSV70hBPsqAqyxWeRLKEKWAh4mRKkaVPtDLLUHD/9n2M24T2c/qe7s3nRa7SGju46JZLZUOXFHbYEoUlL9GrKY7Ux/xYCFm5rurkittqLsaTKalieFClL6VlsjRKvAx37xcJjoNBNX2+AC5MVRiSPyrRKeQabFWAsn9Fj8EIT8ieiFY4SgWC5hCvwOaNPcbPkZWWrHtFuvpmJ4CrDFVwBUoYiitRi0dh4nQ7XByY+1fyMQOV+kw7h0qySBXVIGiGvh+qroZZyXLMZCmy9u7vcfANBr+X0GP6efpzfsZc9DyUpqgCJes5c0XZSs61dmqRKsCjpe9fyccCrO6eGCcGZQkKDFVN2/d9y04wHJIshiJLC1ZJytrb3t7b3vtg8Icw6J6BCdbzlKOgYNngwUrT1ZioV+ixHj8y9q8SJpC8FFdKCequmgvf8xVVubIUU/yGy9ouir3vMGtwVFOTCL+zXxaUjGRd1bUp03EFNvT9q0pEnbWskdKujlNjBejkxNBrtdzYFFylyBpklWFJytrcLoyvsHI25wsc33kHT13Zs9Sp1sUTc+9O1GEtMRLUR81+XTw5P1cHUhbfbve8ieLKlAXSZfHGymVtbCtsbG9g0L3AfGz+DMEKfNnYSRTwJ773ttyFKoZWhQ3e2RVXgO3sqftXMlR1puKg368oqgD5NHIF+pbXclxhKlZlWSmyqjkNHrKKAh1rrbgax678V1DVFclS29b1QeqqhS1nlKkoIBXNvl0zF86mKnLV8x1nbAukKbh6H1liBQuKlLX9eCc4pQv4FFX+ZVfUoJGtmxq19mRd8aZF+1cUKw7WdzWtBOk5HM1Vf4rFsStFkSur9T6yMNh/hSbr252dM2VuRa46h10AX1HTinj+xFBFsmj/KqIuwVTpmXJunlzRslkg9pDtllMdQ5USq3xZpCqRrE83dnc3djc4+AaD7kH69wT9mdOdYBD3dYnP8f7sCihYGGBtlqA0wGdaVIEUKw7e8zN1O4ZUyRIckSowgQDLpmYVkS+LhGEIWbvF8BjtfUKqkrL+mHNT+Ooq04e2VoLJsEhZZqwAzsGTLHPdzKBYgV4IAaGq6v2TVRIjlnVv9x5Gjgl6jvaYvkcVXgpVlCvBct6VtqJgiduqkiutXeNd1pOx4pAsqyYTyEjaVEtQbLdbeP9eXIGEazm5sshXXIb3igHHQlmFZIrjXXNXZYzIF6/DTnasuKxePVYFyBR84B3XUtqV2q+aUa7sFvZdrKEkocp1nZx5FonCbbGyNoOdoJUswUiVFyBYXJc6e1iqsyv9hHu/J2XVKVjSBpdVORbdioJl5Eqe7uotOp3BLBJFuMD51+VOKRL2n2Vt3tvEUH6EiUMwmcSpIledxnwOVaIQqRQv8nIFcMCrU2OnVAlZrjtiz8xuVwhVJGsKV75ZgS6YVvNk0RwrTtbDzQ8GogweYeJAswVy5b2BK6ji0Gzr1VNylXrdmU2yDFcHtus2a0oJGjPROFduZzCoWqqpmGr+Fk0JQ/giWUXwbbBzThUo8ECbu5pryXp7DFV5ripox5DFRgx1JHs6tckVSHfVA1Zn0B5MaWYF3FjXtJMnq0TJKlgWtkjbhilwI13FTYuxX08/DJKrOt4bTOnNSuro4cQyyapndHaosodVaAgVVZIpY5CzU0ozB5L1oBhZ2HHoKK6EreW8MQdQlZg/dMOnubkCIws9XK9AmmvikgW2GMpy1U+6OlkYzQqqhCxypcsSoZKmSNanRbDJtrLiXuVhCP5qxLLk/AGyXuS2q/hyxmSqaFrOmYZhP32PoZl0ZTvtk5NxiirhajY7yT4VBleA6yJZdwqR9SAIdjytBoFzCFGNuAzn3NWfx6kLHEVW33JtowRJlhWGrrp1BVRXYIj+vfRJFfUqwSxUZAE6yQpV0XGwcFmPg+DUFyQ/sveMqeLQEXHeI1dmu5IGcLzrGc2KsLETNKKjIKkiV7ZtdZbLZUtLFUxJUMqTrAk8ZJGqFFkPP32I8Z9l4XShVoEtjLeNhm6rfGLmSnMFrOm0KVxpoZJOwvHYUkrQdDVtL5erhCuJNDWdAT9TVkbPuvOwCLBL+tIHpIoFq81UUYfnvM09CkpXB3g/IzVWZIpJGWKtcJCUSapkv1qcLFcrzyhAyhXIWhqKnhVDsj5+8GFaHjx8gKF//10QvFRccU4bgFciNflQqCJZhivQw9shVXqsQD/0/YXZregw6EDVapKnCnSMCTzJolApsooAyXohRZErVOG8S1XIm/zrfzkMCqzZbGi4IlUwMsS/y1SLFR0GwxOoWoYZfV26ov5uXlN6SaqKl/UoCM6oswucKg8WG7Jn4Wb2Pq5GeCN9vQKpK3ErM/xFbl1tV1KVW12BgZsbq4z+LibwkAVSZN0pgkfsSj9SJbiAK64qttW9TlFlbqD3wzA8SDdFK+QJ/oaZ3q6gyvJWDD/jEEiEmS0LZaiKKmNA1lZxsmRjp9/e8gqqulKXtLXObVfSFZtGTXVXTXIltNg+/gq/py1w3NYKnHdm2jKQKlCCf492xvydl6FGGcnaKkjWt0FwQaakrOsGo5s4JM6beq5SN9DDxcJWelWTXAlTgNnCW5tY9GNrMmCmzpdjbXvBzBVceeSKggXgytNllVGGW1tbX3xcBNhUXsMUpQoMeKgYcSG+1qYMRqyYIj7lRBUarihV0ta4WsVmVdVf4N0vJk57xThf+i65Sq3BcBaCQWzK/L8zLzVT2AkXsu4U8IVkrePGLmWtSRRuOOdmripaCYLZYjxLqcB+BF3oOHUGoA3YDJSnaqCmapqeKuC1iYGy1mkZZVgWsm4VlCzIIleC5w2gHhCHWTUY5wr0sTttG65IlnJVaNhqA6wBIet8NfBmlkCqipuV4Wqiu1I+rOCFago3hx9t3br1ScGy6NcnvWkA0gX2kwvn9HYF3MlkYajSChAjwgonLQfv1PFDV18HZsQKjAe6q2SwvD+MYB19dKtAWeeaq+p1QpVo8jfHuisJ5Qp2sCtm6Y29T644NqGcj3+vZgX8DFcyWP6NMmtgXHNZXxTBT7jkT/t1i51GgjnP1lq7kkNr7YIptsWapCq9/kiVJHsfJkXVuKqp0j9fxb+OXTFZ7Ot7LiuFL2AQNwr5z2HJckgWY9VQmMNXKGXJvavU/fM+NsXcgxxZdhI9VUBVhaHLWjgkKuOTezrJboVb8IjLKoSfgmBFseK80GRhjPTODvQz7ljGTJLLQF1VzzBFqvKPgYJFa8AtER3jM6H8QG3vZfBDobLOhSoMwU5Dt3VE7SrzOlmbLfnSZ6HATutWZqqymxVUqXSUz8+SRei/k6IAbkC3/AuT9XkhsnByZ8XrD0NyYwTrylg3V8zLZFstv5k9tSJRdmZbp1QRslc5eqRErvRP/XvBTQlfksbXXJbGJ7CHG+NxPl/KMqwSfzc05qdQlZcr2Bni5VoyVn1KlV6Bw+liylWRK5dildHYJ06y8MSd+Zl/kNXaj0qQovX6I8j67PMCkLKqBF7B/uGhZuuEYpVx7WfPbzl+/mzBcs5ujso4nVC+Wrt5qlRXC6+ajBRhfvamfxNNGOQd6P4KWbBVmKwqgRfQNoLVmNQEGbGCnxCbYMMcV8OTqzK2MCP21yQrt7GPW51UqqSKXJ1Sa2eI0+i/C1kJPoc53KSS/xwui2KFsTxs6MlyyVVdm10JPxbCGZIqo1d1jqSpEh/gapYWK0LWn2mJ00n5BFz/MpqJ8iF9/UPdufy4FMVx/MYf4E9ghURELMQCEa/Em3gl4hWPeEYICfGKJREiQbARwULEwoYVG4nGdWk7DUHTpEbbSKudajvtdDpjiO9533POvUXNovOZ03tvaybRT76/X29Oz22HFzvOZLgaFfRk9YAqVBm+XofWIPODhVQvou9NV6pZ9Yl3XCBKbOKfIatdqlJJ4UShdNmfrVyBKAypiq0rQxU655GsUZaFVFH6XatnSVd2CQK68hNFGNrYS/rVwriRjRfVp/f0XoUpr0BMVfJTu4fUrAxTRcvQewhZmyYjW+P/CH4Jo92xkKW+nLnieUawmsKVWr6gvQmRwd9mQpoVSGWpKYrbHPn14znLl/tCr0BFKvn2z6JAVLarYlNkSgFXiTUOODt+FJCyVKzwwpx2abQwBC0RKztXdJoTf55sc2L16xkn0UrX6/VKJf+Lta5E7ItExeorXlgZ7TyBqKzAF0MsUloRYiSy1x2wdzRl+VX1fBjyzKbVCHcFW5/IH78SqmxXVeGqWahX4IrQ4k2sZKr6+jmp5tZszK+wIPTGBhNSk4AvsV7rEHaOoqzvSIbv+9EHPbMOK1IVMFcnvCITxF/0SSv/+XrG5a7ieRIrThOuSLz6NFOpXu2dEwzbEtkwkkRWD2JKMHQxV+4xh7ByPJhoMX7ieIx/eYzI0r93vwVVTJcwVtVipbl69+otWSXLVGGItq5s/XzGSdcr3FU+X5ma4E2s1StNiWVPXJhC1Jz5tTvF/qEfwhJumih62+pQFp+XrjrHkPWBEhuBKKZLUISsQFewk8RffOOuguasPgtXkYoEtvL8839wa5VTeFOILZeWvgA1YsD+4W2sXME3vBuz7eqknW5Ac5UDeNMaTVkfhKsPPzyKqxrXC7tdEZirWCxFVYXMhMqZy2FpqpIHaf+Viz9+9hejKeFLCdN0vYiVapX0UKvp6ZLIjeBTxVb9ZI84nOVE1jj8UHBggofsx+3fYbI+SFexGG9ZdMPola6YKVWD5I2WJDElZBmqECxBi5mSNOWZFycbHx78ma7U+2u1avk7KFf76pV8+ufgwPBIHIaC4ReNajXIxlFHsonI+m+kLOmq6HFcaetrmCvMXObeolUFpIrbasgLyYaoK6WL9zKurBNYm2I7lSn2Qgi2LHEkqxGtUZKlVElZvGlhgIxWgkIVrqyJ5YpRX6iMXIFMVs4vpVkBKnjP6VzYczp8mVLtCsQ3Oz7OTkS0JozDmEBRx9p9sQ8CD0tZMbgilDyOOjd9yVQZrf0bVBWTsGRXoJw37ucXdGKDUGmuCqKbdZoqtgU4Yqp4pNh2nUNQXQu2JvwvkFWWqkCu7ElcLuwVZL3mqHYFVcWUZsqeNI6TOqFPx9ViVSDEO1dFN2xIEmzw9cJ3HJ1j49HBR11WVakCLuG9cKVi9eVDEWTet3EFWz1EFQtAxG+K2po69B/Bko3KbuzAdAUWn8Xr4KjIinGw4CJX8wTy5PT1a721v3sZhalSz0tblRRF+cmvu8OI533AFEiPdGBJDtxUosSOxyp7xrFYdoVEa9qEaRLcwQg7Nh8TsqQrdKFcn67KxU7UIFf1qbdI+Bz0GkhVCVlf3OeAxWAEiiAJgzKVfL1mw+3Ektjo9ccjxWwddkK+cxu2/odF+XyZq6IUIcvQFddq8GMyR2P1UU5Z2Y2dU3quGC5I8ixXYPBfMqV2ovz08wXFRSeQ5ePAf8kSycpRW9DQ7wFN1483cpLhZaqnCEq5b/Y7p/ZbXAPi0js8tQGRLLqHK0qTS7BRZjD8Z1X22TobuCFTuN3a54SwGZWEaE2aNkmAQ3VfYf473wtZOaYK1D0D90dPNPWNLTorUlXFVFizAsrV1yxXRdi97ezeYzv2btq2gqWL2GqkG54qMrPo9DwxUdp8FdtiT1WJEjy0ywll1RVia1LHkDKkqopwRah4Js0ecXIPSqWeb6+Eq/bLPMp4BrL/yqeweMe2pdQXsdUYpI1a5gZH1n3ey7kms1OpMyuYIu1qsdOGlReQrM5tIVnVWIyqCpHljlBXOWYq9fIdxzZlXJk0wOqDPTH/c1i2aSnt9JDVGGalBrgZ677csKHBSlBxaL3TniVHaFl1LqsMVUJWqZiPeBFPo/UpQ+Yvk5+/fnylFqUZbd12lXETgL9SHTRex8+TUkQxNhpxJkKLkryv7TVFdKuRTRzc54Sigk1VTfcxafokjND76jGaLCJKuCoVInCly8LscQfrrGKsQJix7VZBjC/kQSHfiHBH8rRAv6+EAX+3Ms4Ysof2ifS2Z/kF4qoj0LOqyhUoQI/ua8CWFe4KprisRgIIYWcC/tPbWLrSEV909HNzw5DogapPgSwzddgswHCWXJ/+37JKjKmGKshqs35PmrKClYknfNx1Alh2diNk5ac2lSpgqbLbFDY8sbdObj91+OL6E84/sWrSnOlzMJgCHAB2v83jAGVYU65AOuIZXWuQuQqvwMBFoaVE1hetsG6y+ey2rSumYsGIhpkoYYjYOXhy+5RTZw5fPLdv/a7jRuH9Q7jmdALpWdSUkgU8U1bQREzblY6ZEchSvv5UJLsunpm7/eTBPZyDB08eOrR9+1xoOXP48F2Y2bd+/S5bTudsuD1n4ZyFFBxQcIBB90HgYVKGJSHrOwZk0aalhA3JVGmEqqKy8uJTIRgnnG5jyfWZC2diLMSYyVH3sQHiWOxJskrSFWa+GzRZRJiUxVWFL3S01+8Vhaosve1xupANt2f+I0hWjasCTJan6xoSrmxVGNyUvoI25mYpohK3O93Ikmv/KGs/GjxVpWSxaPnKMGx6L2z53reSuqiTHRx2uhOEawZl5oyZGHQPxLHYa7KUq3K5wWIl4wVZfzqzErK4qlRNXqkoivGc06UsucZU/R378/k+WoJKlkCWoW0K2C+BGETV57wLU9SWzNcup2vZcHvGX4Nk9clYwRVkCVHY0O2QPb1nNytAVJFPNiWuXP7DuOV0MSRc/5AsnyozWRiQZTWr4AtuMlDVOwBHTJfilNPVbJg9e8ZspgMHGHyvHuMcgCzlyp8ssqUHg393bdI38qEj0WEXJKgvDC6ta1uWDNfs9ihZ/T5V1XI6IvHYGNBOQkMueMO1g3D19he1BF3UlajE7jsltcL117KkKsiqTo1oQNeAOWllX5uUgSq46vmhXafIo9XtVcjDNWv2rNkYs+QeGI8dKBQgi4vCqBYMV16kpdefHSuooq5ycSFJ9i2ycdc7Y4ENj2f9CSSrXhZUQT5i4A0HTcT4U8VX7dcirglsjY1g0XBd+pOse5AlTYXI4t3KMsVVcVfpIFVgz3FnrLDq8R9lVZQqUImYNImq4NfAr0lxNciLlhvMky4+IbVYfGnerFnzZs3DCJRVKFSUqlqtVo/EDVnxb8SUfWUSQiWvyPoed4O5OXZyRVl5dV4495Gsalm4Av1wZZAMUIVQ+a5eS7NVgjZblzhjjYdtZeWlKmoLdgxfL4zP/mKhArwGY7+gCsMicsUZgyx7wNQsmLcAQ5rC4VMpq8aJWHxI4mMqpCryPr66eg1UInLJrs7lY87YZMPpBYE8giyVKtAXj5vJKiahpPcz/QrpqH71WjL6YdgD3JSWsN0rnbHKkkuhsmqQVeWq+oisiO6rytejv6XAEweuVKzUVRlc23hnLLPyKtUzf8F8DLbHEWT1iVBRWSMRostvq94LW/rVRzxXMcRKiBI/LFvNvc4Y5wb8mGASvi5l9YGBOGRp0Wr0MlvUl9whVr/bO3fdtmEoDPNJ0r1P0UW+oKC1GGjRJoCBdKinwB09B/DgIICHvELRIQ+RQYuHnqxdjI42ejMqVWpguUWPKNJHFKtKBZJBlD5YpucPh8c/aRLeeHSOK/vgFHzBak93bsgaY3ZIVUl+eQCgVdZPcTsE5RCJqs+/lSrSJUvrhFkBX+RkJdmBXCFr1bRA+drjpp52uS35fPPDWxYQnzFbuJo6zhPnIOt6g5s06QxEfN8PAPGytQUf0JbQRbK+x4YjlR9eDpg9dOdOFjEPv0hXiMgOoJXWe7rblnIbLuWms8mz+oX2kozqEOdrLC1hSpJWVjZB+HS1TSjbgDyWZALPmXXwhdNxOvhCWz20JVyluoIYQKiiyRhqNwG/RvLsiGdW18WI2chw2pEkpRWgLEUICk9V1zf6X56bMKMqz6s+s5QrpWuc2PIlQbBSogAO+XR1Ky6afvy0AuGKniXhPWIWI3U5vdRW4AcCkJArJN7d7SLtlx9VW8pXbdfN/6frfJPYUq58cqWivBpIlTrFRcJOObOe4SKx1Vsj20Cwjam01JODjiUpcbaE9jL4W9Hkla7tNgTI9XgxmtChiMie0F5G/930+vX6wOOsKvinKDlaFdrL4XOcipIACOpcxco820J7BfhsLH1F+jyUQxE2hvYqdEezo8lk8hQIavQFwiwN7ZV5Awa0+Mnh1nen/Z44BkLv9DljYHVorwbfgwGtf4iL2u+03weXYKJKi5pXE0J7FU5Bw8zz+N6Q0F4OD4EwvhWRJoX2UoZhUY9PZ2PYrNBewuAODLzDUMPjMQ8Kd6GIaMZaclxG8FfcIWsxGLkxGOzazl7AYKLn09idtd2qmP7ZiZsK24fHR20MLafPB6O2UTWAP1yGz7GpTmekAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-content-guide-phone {
  position: absolute;
  width: 58px;
  height: 56px;
  left: 0;
  top: 0;
}
.$id-modal-content-guide-phone-move-x {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-x 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-move-y {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-y 4s cubic-bezier(0.42, 0, 0.23, 0.98) 0.5s infinite;
}
.$id-modal-content-guide-phone-blink {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  will-change: opacity;
  animation: $id-guide-blink 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-image {
  width: 58px;
  height: 56px;
  background-image: url(`).concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAClCAMAAADyFTYfAAAC+lBMVEUAAABISEhKSkpGRkZERERCQkJOTk45OTlBQUFQUFBSUlJUVFQ7OztYWFg/Pz8/Pz9aWlpkZGQ3NzdcXFxeXl5MTExHR0dhYWFJSUk9PT1WVlZMTEygoKBERERFRUVmZmZQUFA9PT1LS0tra2tPT09ubm5SUlI2NjZXV1czMzOpqalTU1O3t7dVVVVoaGhaWlpqamq1tbWhoaGenp6lpaWurq6ysrJZWVmjo6OgoKBUVFRdXV1cXFyvr6+0tLSwsLCrq6ubm5syMjKbm5twcHCQkJCLi4uGhobLy8uCgoJ9fX1ycnLPz894eHizs7NxcXFgYGCVlZWYmJh7e3umpqa3t7fOzs7JycnFxcWvr6+JiYl0dHRra2uSkpKNjY2IiIi4uLiUlJSsrKx3d3fDw8OHh4eQkJB9fX2dnZ2UlJR/f3++vr6RkZFzc3ODg4OioqKcnJyUlJSCgoJ4eHirq6u4uLh4eHiBgYF2dnaLi4uMjIyjo6OZmZm1tbWwsLCcnJyxsbF6enqAgICwsLC9vb26urqjo6OKioqsrKyWlpaoqKhbW1u2traCgoJ6enqZmZmbm5t+fn6JiYmgoKC0tLS4uLhmZma0tLSYmJhxcXF1dXWlpaWfn5+IiIicnJyzs7Ofn5+xsbGampq7u7vAwMCMjIxgYGChoaGgoKCQkJCOjo5vb2+RkZG1tbWOjo6Hh4d6enq1tbV8fHzGxsZubm5mZmanp6eZmZmvr6+Hh4eTk5Ojo6NwcHCenp6mpqZ6enqlpaWWlpaJiYmlpaVjY2OcnJyKiop9fX1/f3+CgoKlpaV4eHiUlJSIiIixsbGqqqqGhoZxcXGPj4+ysrK1tbWurq63t7eBgYG2tra2tralpaV+fn6enp6tra2EhISZmZmVlZWGhoZycnKhoaHV1dXX19fW1tbZ2dmrq6upqamwsLDa2trU1NSzs7Ovr6+ysrKurq6tra3S0tLGxsa9vb3Q0NDDw8PNzc3BwcG/v7/IyMi6urq4uLi1tbVYe8d+AAAA5HRSTlMA4+Pj4+Dj4OPj4+Pg4+Pg4+Pg4+Pj4OPg4OPg7+Dg4+Dj4OPg4+Dg4ODM4Mzg4+DjzPDwzMzM4MzM4ODgzMzMzMzg7uPMzMz+zMzM/swD4+DNzMz0/vz8+fXNzerMzAr58dPN9fLs7MzMzPn05My3j1w/Lff07+7MLRH77+7u7uVbJfr39PPr6eno6Ofn59W7jl9ZVxAK+ffr6dXVuHNAQCYm/Prx6uff3NLNuaePjX9zc/vq6d/f3NbUyK6rqaeNjXMR6ufc2tG9vLynp4xzWUnn0ry8t6WZemFLNxrRyMjIxGrWwvApAAASsUlEQVR42uzW12tTYRjH8aMQvLDiJDa2aimigqiQ3NjLIjVpTQutrba2FkupthXqIA6caNUaxYUXDlTcWhUVB+LeCxXUGy8EFxlocoxohokJ+Hvfk9Pn4q1By/EYwe9f8OHhd4b0P40qmXfm6vuJV8/Mk/6BVp19XD2Rd+Lq8xIprVu88kY1sEnuCYCltK1k3tbi+kXV8HLsgzpHIuFwnpHSMowA2EXVi7j2wYzA9/j3eLyioiL7lZRuYQTFxcX19fDiuNVtju+sOLio9ayUTmEERZO4lk9hoyUYDALburBXd8ORhkSF/DmN7osRTJoELcJtHzgrgqx43V1TRkYPtOFDQrZI6RFGAKuqrX9RFY1GgV2yYEgGsEqDErKcDs8bRtBcVFTEucDeXxv9FkWBhp4ZiLwNstwu6Z04gkdFPK59uDT+jRXccaG3KYntOK8sl0t/tcXPXhY2N6vahy9aw+EwsI4FRhNL4aoZZPmzpH80gtOFhdA2K9r75V+/htH0w4N6m3h0XF4/WQ5If6tVtx8VshTtpRWHvqJw1FJj6I0ELrT6c2kET1usHdqHzu2xGNNWzcwEFQlTgFb369II3lmtLS2Fire9PGaLgXvwcC9+WOLy6Li6cmkEe6ysFu69lB222aANm2sMLOISVkeuOALrVCsP2NfO6ZGIDbXOzDIoqVjUCTfwUdIvjGDCVGCTt22vskWQ7VBdL4OaOAXSMq5+18UIJkzo4B5fe85ut0cisbXnB6vW1FtAAb24i+c+hRVazp16b3UoZEfbF2YNNhCXsDQF3a+LEZyq5VjluBerQl9CqLKu/5DByEDcVMdFAR22e+D2ydraWlXbvn7Kly/Q2sp3GocIWuG4+nIxgicFKKk9fvSQy8+00xtygOXaX1+uyNV6BLcKOBbhsheX+T0uv99/bukAI7BMK16X3mLicUcEPv457oG9J6cV8Bj28rrJbrfH5Qo5dmUa0U+PS1hEWoGr9QiapqnaguNHK71uaD2rG0YZFWzqKZg61Y74+Ee4JftuvS2FVvHWXpzv9jHtlPEDM3FZgUta8UkjLbj96LpajmBLaWlTUxK7eZ3dh7wux67cTGjVJbB+TUveGs25d7Y9KS0rZdwmaC8frfR5YfXNahvNsHRc1m+9FtAYM8ag7QjelJVBq1z32Hw3qF7fZEvfXI6l4xpTLFf8Lef1mWHWlIsR5JexuHbzcrvPizxVm7JykcKlKYjeVJ+IHmOcZgSuViO4lp+fr2DR+kovuysbQZagRZ1gSStuoRsuqxkXI5jTmM/jXIzAi3w2S98sxLW5xE35iQA4Q3gtmOrMKveTFiNQsQgj4FaMIAfWJJe0qlc4boop1CS12XTdro8gr7ERXN7m9ZU4LJrVNnLYMEFLxyUvaVniFvqhNlA1GEPJvptX8vIa85K35SNANsvQnGGIYclLWjou1YGl1wJ5l2pwXYxgdh6PH3f3crsbny6vHyMAlrTCcUmb+rjEXZHUgvupqyO4Pm5cUgssRuCGFiMYm4NScVP+OIpbIG62mbi/PQIVC+6xNR4vw9osY4bDqnrFKSjRcAVvZw8acbt23f0/SLV7n6aiMAzg8SMkSkwkaPz+SPwqbbHcXAVjpRJ1cFIGAjJqTB1IR+IiyiDRBRZhkYGYuDK4ECb/AAcd/IgObscGk8YAf4Hve96ePj19r+e28eEf+OXJc889bfn04cqlK47LI+CYyYXc+dPCTRpu+uXmiNWq5XrcPx1yl169v0RhLVt5BJypcuE8x3VLSeOqbvVywWUtuO2PIHtJtMxdmzZMpREM5HLQppTLadHWvYlaxz3O+aO4wRFks1mnXX46bq10EvTnOJ2UywmUK1Rwb3bc7tLi+yzFlfuyPoLn5eLV3NVcR+WeONnBFITLWOFutjOClY8jI9kGd21ORjARn+nv7xcutLpcSYArCXAxBs3VI/g6cjlb12YxgkeZfqu1QbsWeza4XEon5V7gdsENj2D1MqVe7vLLxklQzGQyrKVAaxMqFw8a0g73OLjBEQxftrHaphFkBIt29RY4Spv25QK4wF5or903775eHx4erne7PDNe/UV/NIJCRsJY4upyj6XfHBH1imgEXJIKd3PrnyMYHCStlPuAR1C1IxgdGhpq1oIrWJu0m6OHDX25wPG4m8kjKA2SVrgja3O1KoVGcK4wREG5BGZs6BSTBMoVbahccDeJq0fwpVQi7KCdwgMaQZWq3Z6cL1BYK162SrfeoYtyrdfDhk4xlOtryeu1q0YQRYS15V6nEZgqZ6rcY7EFaDngkla3i49oTpv+iVKV67Xrb/fnj1I+KpWEO7xOI+BMxHevFSTYArR6C4JFuekXR30Xg7avL5m79COfz0d1rh2BqRoaQfEatF656lgIXcvDXH2KwZvMXfkWRaSNSHt99mGVsKb6vHyKsNDiQRMt2gUXWmA7vy645frtbjW4i9SslPt5ZrtqKBNxpVgkrea65bZebrxDt4Obo+ai3L5E7ru6NhqcZmqVR8C5xlFab7rhKegHLV2L6frtbglXtJa7fpu1U+WLo0UbT4stoNxcMtfXYrr6Z6kwty9pDIsRdcvaWW52en501Gk5oi0ka9X7V50LwVMsrFVj2LBvBrYSuDRD2tsvCKu4arl40Nq6iqX/zqMvN4q7JdxVovKxwNq5AWC1ViLDtd4WrXih/a+LrmjBjYW7mJfM1kxtsoewvle/Ijih96+N1qaXq7U+d4O4d77lbbfr28ZMVyqVu3eLo6FycYgprTrE2rvcHAl0q8awwlgS3zPm3gJhKbco5zhJZ24GN0fRSgJclNvJp4hWbiztfs/bdulQ2J7ncimMRc5w/Cl45QIradGCm/r61VpwY+EuUbXc7rgxYwR1adIiA5RD2IJg4YXWRbCdlKu3cKPB3SDuCmO53NptbhZSaIGlXOSc4hwIfhUiVl2u/hQRKBftxjIG90J7yOVSdLO+V7CSHpfe0/61HN0GD139UwS0/2r3u32jfTamtkBQR9Va1yv9OS1yyOWs0oa2EFgutMKN69xV+0ajLbxVxXqRZrUUWs6BQwc4vb29x/zLjY+FNjQFcNHuF7uFGdoCtOAOuFyEVheLkFa8kv2cw+Rt99tyF48rWOHaM5enW4ZUtJ5XqGJVWkiBFa5kXz3OG/jPQbXcFi5Z6W/CmHmxetQzVKp+wMLaXq1FjnK6u7t9beLlRrTCjcG1BxmduhW9WnFKUC7ScMpm1Q5IStZWbrfN3nr8LahyKU+auXLRNcYkvRRgBRRBraBKudB6te7rdlyA9+zdw+nq6iKtOhaEGzvub+JGFFNzXEyWmYob3KyTIl6tVgoruOJ1OXiwhRs3ceViLu1Ci6fLST2tgkILbwPqsNA6qkS04FJ22uzYDe4zx40oNeImnwXt70CCdvVeEXAhVVzyco6PjY097rpx5PXGb+JGBC7RzRxYHLHQpjQLK6T7odVQaD2oSKHl9Nx/tGcXx223xGMAF3sNbdZz+lxILfRvc2f2clMUhvGNkzFucOPOrTtD4kJcupArc8oQURQyJZI5U5nKzI1ZQiFTpkLxDyhxZZ91bHPmsbzvWmftd6/1rGWT4zjP58Plr6ffftdwPptHyylI0Al7FVQOkxrczLjLuC+clRZMiI/ZPPCE4dNleX1ne0qCsBVKu4qRodCuKdahDIogY6sQz1iNC8L+iratNNvWa7bCyTKWgS/x6FHTxfrbGAElVMaFXg0pzoOu8Hh5sFYAkTZPjkq/Ca1pV1/oUruwLyiZBdArLLc+p8MLukocDQyqtKuvn2mZcOdskFbW2hzTpxVnXVrsVXARVXBz2o4dO2pc2y6vYUAbecBCT5eHK6hxXk3q4BZBg7hsrsFFUhOcXPS7MRZmgQ1qEFjAfFCkzUk5BpfL5UctZoHg4sYAcB1UjxaXMNAAaAG3r22XUAO8uIShBbCbhUEA5cooAFyXlH5Z3DZZtjQh2rzdAmV40EoKuEIbHVtC6k8EwQzj2nTr1q1zlvVPBjLuUG438nAFaIWzWC5uuFxaO2froEhrFZDhJbCUo1k2RXBjswAONeEhS9+wj/Hi4DKpZkVcgXVwF2XZhIRoPdzQydZDRVyeswaUvrv4tIWHS6wFUEb1abvl6Tg7y7Yl5uNfcvcPDgpdveATBr06xmK1MGQtrgDTk5bNTwZKuxo0RGtIi7wwDNwDo88ptIEFoQ19wehymrUubEgSXa7gFijNX9ADKBZPX3k8VtjGwJAVWMHtzem4lF0wuEM0buR+QzyAjUFeLgsLWxigrcdwurA4DDSt4FK5SycRLtMyrmxiJNE5i4fFPMFezbqAtUpwzhpS+sXpROY+SDSuaVeqRVzoVWhttbKCAS3H2xigr4Y155VejQq7s2xZYnCHcLsKaC0qDFrvrAiPWM4JHuDk4oSc9XCn09Z8JeNyt0aGHl6gWLjf8EB9WpPgZlY4Jb4Gkm5MeyPhmJ+5SVUqkE7gMiZ2pEFnXVx8xAqkdnSBB5zKbLodu5zoEK2RAZ+uQoC2ZDebc3q0QupW6wwDD/f2UqFNzA80kQxQbWgWdI01i7QOKEjroIoH0GyHTVzt03tJPUzLuEpooyeFAmVx0KKySItLwi8esJy348Tdb+inGJaeTXzcVHCjqy1IAL2GN97uoaZQqkMLzW6a/vTVK/qpgBOrkjxsLuGq1HRqElEWeONDNu4Bbr2DyrZftPTZM6LN7jpvHCJYIwM8XRYXDouS6GERcUMS4OgSCV4+o7zqf2A+QyJu6gorEgCtkCItYMITJmMLcEWCZy9f0z/9y07yyhDBNajIG7mMKXMWUIUWQE2sBNlLerPBy2cbtu1MMJp2GLkbmAX0HTvSeLi4L4gfaULWigT0NiTCXWckwGjaYeRuoNnwaiuBBQx79QetA+rhbjrycjTlxxuRAHE1r0pTC+ntEb1eQ6Or3IKKJDYLOs1YoF819eMOSBBqNw19XNfrF8XSd6zYdh6uR4q7rsr5/of0m7FAgiBuH3LXoS2bBbkHfKAJWOClSGtJhfbo7NHfGHb1FZAAwrTa3RLa6NE2uB5gsRoXeiUJFq/WL/L6fucMSoBhWi2DsMIuJnKm4V+5tYCKHuCeq7Jn3Zf3nFEgQSTaBZah0G35p0q4mUXa+AJW33QfnX3oC9PuAgni0bR9VKry5cs5gQGog/uLYv2LLju3RILX+j1e74+BBCW4xEsyWFq49o59DOrhuq0WyoViWYKl9GYswl1wCiT4dZiWZaB2cdDG14Tf23hTKrgvODrls36R1+Qt25M/Dbug2xUFOLEjjaMBbLhKlgTG7Tx98rt3THvsNEpQHi5XP2qOsBxZwkqPto6uYIGwVvaO+qpf5DUeJPgjXJUqBxeURVy53wiLgLPr9u6PGvZQVILyMC3jmnbLP60TWtxwSWBykQSHvn5l2o0swV/ipkoFL2PgIC6o3vwC0CJuu0UL9Hu8vu4iCf4qxGrc7QwiiAW61PiaAFPLlfZC/7H6RV6H97MEDcFN1W9/WifBy0NcwDofmTXiE9NqCRqDO0CpFM40MV6oFou1C1ibRatHjGDahVtJgkZE0w5QqXJoQVko1y3Wpc0lGPOBaceJBA1ql93NSfHyCD9Uil512j97HfnM7/Ea8Wn96UkNQpV2U6V0tUAaXW7jNwYswYxdL94y7VqSoKFhWiMDXnUBaHBwoQT9Prx4Szm3TyRodLupoMJHH5LyK+9es8+l/CKvDytukQQND8FSlFIOreGM0/omiATVapVo12xd0jhExKW5294RAc40RVoftY47cd2LKtMOFwkajzuAeVOlIhfJeKahLyiWJRhLr3Ai2BVzQYKG4lLYXfg8HCSI33a2nTH5OaVWmzYHJGhsdLmDuN2exAonBTzZIuzEUS+ec0ZMBQn+Ea5KlXNI4C/UAO/k6hKwBptJgn8fgmVckgFXML9YEEFLUKMvlqAp0eWyDEAL65dLqyWo6RekTZ2XNCsD6rgpTK/4p3WcrrPH1ghWJGhONC3JoGAkRHH1JKjpNEcCxOV2I8MWyiUJqNVajSVodgiWcVMVLVeSS1ATCZoc88qjVKlSc3kSLJ5c5V6rTZQAcVkGbBeuOkgCgq2CBM3MoFwGr1tvim2aMpZZqyBBc3N1UF2GX90j9SQJKCBB83OfYAcNVjFcSrvzo95WOShB83Ody5V24fqzO0nAUSzB/89Nph38VqmuOa3gticJOP9fApuHTDt4nFJ7AXdPC0lg8/gq8y5XapSrgpUgbQ0JpF5u97hS1fOC26nlJJA8Yd41Sg3fU4dtRQkKeXSN3jo4Qqm0397OmyZOGatoDrScBIWM3DFn5kXi1ZyqRSUoZtKOa1vWKArztqgEnhIHty4f9/btuEstKwGkxf+XuCT5CbTFnFRuxktuAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-close {
  position: absolute;
  top: 20px;
  right: 14px;
  width: 14px;
  height: 14px;
}
.$id-modal-close svg {
  width: 14px;
  height: 14px;
  display: block;
}

@keyframes $id-modal-fade-in {
  0% { transform: translate3d(0, 100%, 0); opacity: 0.5; }
  100% { transform: translate3d(0, 0, 0);  opacity: 1; }
}
@keyframes $id-guide-blink {
  0% { opacity: 0; }
  7% { opacity: 0; }
  12% { opacity: 1; }
  29% { opacity: 1; }
  34% { opacity: 0.3; }
  39% { opacity: 1; }
  44% { opacity: 0.3; }
  49% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
@keyframes $id-guide-move-x {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(70px, 0, 0); }
  100% { transform: translate3d(70px, 0, 0); }
}
@keyframes $id-guide-move-y {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(0, 58px, 0); }
  100% { transform: translate3d(0, 58px, 0); }
}
@media screen and (orientation: portrait) {
  .$id {
    display: block;
  }
}
</style>
<div class="$id-modal">
  <div class="$id-modal-bg">
    <div class="$id-modal-bg-line"></div>
    <div class="$id-modal-bg-wave">
      <svg width="375" height="61" viewBox="0 0 375 61" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient x1="0" y1="0%" x2="0" y2="100%" id="$id-2y6_dj_hgp">
            <stop stop-color="#8598FF" stop-opacity="0.15" offset="0%"></stop>
            <stop stop-color="#000" stop-opacity="0" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path transform="translate(187.5, 30.5) scale(-1, 1) translate(-187.5, -30.5)" fill="url(#$id-2y6_dj_hgp)" d="
M0,1
C83.001,1.706 140.146,4.164 171.435,8.374
C218.369,14.688 253.467,26.308 273.002,33
C292.536,39.691323.501,51 343.709,56
C357.182,59.333 367.612,61 375,61
L375,0
L0,0
L0,1
Z
"></path>
      </svg>
    </div>
  </div>
  <div class="$id-modal-content">
    <div class="$id-modal-content-title">`).concat(ko.TITLE,`</div>
    <div class="$id-modal-content-hit">`).concat(ko.HIT,`</div>
    <div class="$id-modal-content-guide">
      <div class="$id-modal-content-guide-phone">
        <div class="$id-modal-content-guide-phone-move-x">
          <div class="$id-modal-content-guide-phone-move-y">
            <div class="$id-modal-content-guide-phone-blink">
              <div class="$id-modal-content-guide-phone-image"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="$id-modal-content-guide-cardboard">
        <div class="$id-modal-content-guide-cardboard-image"></div>
      </div>
    </div>
  </div>
  <div class="$id-modal-close">
    <svg width="14" height="14" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70%" id="$id-ho0itsc4p9">
          <stop stop-color="#FFF" stop-opacity="0.75" offset="0%"></stop>
          <stop stop-color="#FFF" stop-opacity="0.22" offset="100%"></stop>
        </radialGradient>
      </defs>
      <path transform="translate(-3, -3)" fill="url(#$id-ho0itsc4p9)" fill-rule="nonzero" d="
M16.791,3.198
C17.044,3.438 17.067,3.814 16.860,4.080
L16.791,4.156
L12.144,9.331
C11.803,9.711 11.803,10.288 12.144,10.668
L16.791,15.843
C17.044,16.084 17.067,16.460 16.860,16.725
L16.791,16.801
C16.538,17.042 16.142,17.063 15.864,16.867
L15.784,16.801
L10.000,11.250
L4.215,16.801
L4.135,16.867
C3.857,17.063 3.461,17.042 3.208,16.801
L3.208,16.801
L3.139,16.725
C2.932,16.460 2.955,16.084 3.208,15.843
L3.208,15.843
L7.855,10.668
C8.196,10.288 8.196,9.711 7.855,9.331
L7.855,9.331
L3.208,4.156
L3.139,4.080
C2.932,3.814 2.955,3.438 3.208,3.198
C3.486,2.933 3.937,2.933 4.215,3.198
L4.215,3.198 L9.999,8.749
L15.784,3.198
C16.062,2.933 16.513,2.933 16.791,3.198
Z
"></path>
    </svg>
  </div>
</div>
`);function Fo(va){for(var _a=1,_s=document.getElementsByTagName("meta"),Ss=0;Ss<_s.length;Ss++){var Ms=_s[Ss];if(Ms.getAttribute("name")==="viewport"){var Cs=(Ms.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);Cs&&(_a=Number(Cs[1])),isNaN(_a)&&(_a=1)}}return No.replace(/\n/g," ").replace(/\ +/g," ").replace(/\$id/g,va).replace(/(\d+)px/g,function(Ts,Bs){return function(Ps){return Math.floor(Ps*_a)+"px"}(Number(Bs))})}var Oo=new r$4.CircleBufferGeometry(.12,16),Lo=function(){var va=me(),_a=new r$4.Texture;return va.onload=function(){if(typeof document<"u"){var _s=256,Ss=document.createElement("canvas");Ss.setAttribute("width",String(_s)),Ss.setAttribute("height",String(_s));var Ms=Ss.getContext("2d");if(Ms){Ms.drawImage(va,0,0,_s,_s),Ms.globalCompositeOperation="source-out";var Cs=128;Ms.beginPath(),Ms.lineWidth=6.4,Ms.arc(Cs,Cs,83.2,0,2*Math.PI),Ms.strokeStyle="rgba(255, 255, 255, 1.0)",Ms.closePath(),Ms.stroke(),_a.image=Ss,_a.needsUpdate=!0}}},va.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",_a}(),Vo=function(){if(typeof document<"u"){var va=document.createElement("canvas");va.setAttribute("width",String(512)),va.setAttribute("height",String(512));var _a=va.getContext("2d");if(_a){var _s=256;return _a.beginPath(),_a.arc(_s,_s,192,0,2*Math.PI),_a.fillStyle="rgba(255, 255, 255, 0.1)",_a.closePath(),_a.fill(),_a.save(),_a.beginPath(),_a.arc(_s,_s,192,0,2*Math.PI),_a.strokeStyle="rgba(255, 255, 255, 0.5)",_a.lineWidth=10.24,_a.closePath(),_a.stroke(),new r$4.CanvasTexture(va)}}return null}(),Ho=function(){if(typeof document<"u"){var va=512,_a=document.createElement("canvas");_a.setAttribute("width",String(va)),_a.setAttribute("height",String(va));var _s=_a.getContext("2d");if(_s){var Ss=256;_s.arc(Ss,Ss,192,0,2*Math.PI),_s.fillStyle="rgba(85, 90, 255, 0.6)",_s.shadowBlur=25.6,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.fill(),_s.arc(Ss,Ss,192,0,2*Math.PI);var Ms=_s.createRadialGradient(Ss,Ss,0,Ss,Ss,Ss);Ms.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(1,"rgba(255, 255, 255, 0.2)"),_s.fillStyle=Ms,_s.fill(),_s.lineWidth=4.8,_s.arc(Ss,Ss,187.2,0,2*Math.PI);var Cs=_s.createLinearGradient(0,0,0,va);return Cs.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Cs.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Cs,_s.stroke(),new r$4.CanvasTexture(_a)}}return null}(),Ko=function(){if(typeof document<"u"){var va=512,_a=document.createElement("canvas");_a.setAttribute("width",String(va)),_a.setAttribute("height",String(va));var _s=_a.getContext("2d");if(_s){var Ss=256,Ms=179.2;_s.arc(Ss,Ss,Ms,0,2*Math.PI),_s.fillStyle="rgba(255, 255, 255, 0.4)",_s.shadowBlur=25.6,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.fill(),_s.arc(Ss,Ss,Ms,0,2*Math.PI);var Cs=_s.createRadialGradient(Ss,Ss,0,Ss,Ss,Ss);Cs.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(1,"rgba(255, 255, 255, 0.5)"),_s.fillStyle=Cs,_s.fill(),_s.lineWidth=4.8,_s.arc(Ss,Ss,Ms-4.8,0,2*Math.PI);var Ts=_s.createLinearGradient(0,0,0,va);return Ts.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ts.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Ts,_s.stroke(),new r$4.CanvasTexture(_a)}}return null}(),zo=function(){if(typeof document<"u"){var va=512,_a=document.createElement("canvas");_a.setAttribute("width",String(va)),_a.setAttribute("height",String(va));var _s=_a.getContext("2d");if(_s){var Ss=256,Ms=217.6,Cs=64;_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI),_s.strokeStyle="rgba(147, 162, 255, 0.3)",_s.shadowBlur=25.6,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.stroke(),_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI);var Ts=_s.createRadialGradient(Ss,Ss,185.6,Ss,Ss,249.6);Ts.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Ts.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(1,"rgba(255, 255, 255, 0.5)"),_s.strokeStyle=Ts,_s.stroke(),_s.beginPath(),_s.lineWidth=4,_s.arc(Ss,Ss,245.6,0,2*Math.PI);var Bs=_s.createLinearGradient(0,0,va,0);return Bs.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Bs.addColorStop(.1,"rgba(255, 255, 255, 0.0)"),Bs.addColorStop(.9,"rgba(255, 255, 255, 0.0)"),Bs.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Bs,_s.stroke(),new r$4.CanvasTexture(_a)}}return null}(),qo=function(va){function _a(){var _s=va.call(this)||this;_s.progress=0,_s.opacity=0,_s.loading=!1,_s.current=!1,_s.disabled=!1,_s.opacityMotion=new vn({opacity:0}),_s.loadingMotion=new vn({opacity:0}),_s.currentMotion=new vn({ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1});var Ss={blending:r$4.CustomBlending,blendSrc:r$4.SrcAlphaFactor,blendDst:r$4.OneMinusSrcAlphaFactor,blendSrcAlpha:r$4.OneFactor,blendDstAlpha:r$4.OneMinusSrcAlphaFactor,depthWrite:!1,transparent:!0};return _s.hitTestMesh=new r$4.Mesh(Oo,new r$4.MeshBasicMaterial(e$3.__assign(e$3.__assign({},Ss),{color:0,opacity:0}))),_s.hitTestMesh.scale.set(1.5,1.5,1.5),_s.centerMesh=new r$4.Mesh(Oo,new r$4.MeshBasicMaterial(e$3.__assign(e$3.__assign({},Ss),{map:Ho,opacity:0}))),_s.centerMesh2=new r$4.Mesh(Oo,new r$4.MeshBasicMaterial(e$3.__assign(e$3.__assign({},Ss),{map:Ko,opacity:0}))),_s.ringMesh=new r$4.Mesh(Oo,new r$4.MeshBasicMaterial(e$3.__assign(e$3.__assign({},Ss),{map:zo,opacity:0}))),_s.loadingMesh=new r$4.Mesh(Oo,new r$4.MeshBasicMaterial(e$3.__assign(e$3.__assign({},Ss),{map:Lo,opacity:.8}))),_s.disableMesh=new r$4.Mesh(Oo,new r$4.MeshBasicMaterial(e$3.__assign(e$3.__assign({},Ss),{map:Vo}))),_s.loadingMesh.visible=!1,_s.disableMesh.visible=!1,_s.hitTestMesh.position.z=0,_s.ringMesh.position.z=.003,_s.disableMesh.position.z=.002,_s.centerMesh.position.z=.002,_s.centerMesh2.position.z=.002,_s.loadingMesh.position.z=.005,_s.hitTestMesh.frustumCulled=!1,_s.centerMesh.frustumCulled=!1,_s.centerMesh2.frustumCulled=!1,_s.ringMesh.frustumCulled=!1,_s.loadingMesh.frustumCulled=!1,_s.disableMesh.frustumCulled=!1,_s.add(_s.hitTestMesh),_s.add(_s.centerMesh),_s.add(_s.centerMesh2),_s.add(_s.ringMesh),_s.add(_s.loadingMesh),_s.add(_s.disableMesh),_s.renderOrder=1e4,_s.needsRender=!0,_s}return e$3.__extends(_a,va),_a.prototype.setProgress=function(_s){this.progress=_s,this.setLoading(_s>0)},_a.prototype.setOpacity=function(_s){this.opacity!==_s&&(this.opacity=_s=pn(_s,0,1),this.opacityMotion.set({opacity:_s},30).catch(Lt))},_a.prototype.setCurrent=function(_s){if(this.current!==_s){if(_s){var Ss=[{progress:0,value:{ringScale:2,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.05,value:{ringScale:1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.15,value:{ringScale:1.2,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.25,value:{ringScale:1.1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.8,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:1}},{progress:.9,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:.92,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:1,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.3,circleScale:1.1}}];this.currentMotion.setKeyframes(Ss,1500).catch(Lt)}else Ss=[{progress:0,value:e$3.__assign({},this.currentMotion.value)},{progress:1,value:{ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}}],this.currentMotion.setKeyframes(Ss,200).catch(Lt);this.current=_s}},_a.prototype.setLoading=function(_s){this.loading!==_s&&(_s?this.loadingMotion.setKeyframes([{progress:0,value:{opacity:0}},{progress:.3,value:{opacity:0}},{progress:1,value:{opacity:.8}}],500):this.loadingMotion.set({opacity:0},0),this.loading=_s,this.disabled===!0&&this.setDisabled(!1),this.needsRender=!0)},_a.prototype.setDisabled=function(_s){this.disabled!==_s&&(this.disabled=_s,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=_s,this.centerMesh.visible=!_s,this.needsRender=!0)},_a.prototype.tap=function(){return Promise.resolve()},_a.prototype.updateTime=function(_s,Ss){this.opacityMotion.update(_s),this.currentMotion.update(_s),this.loadingMotion.update(_s);var Ms=this.opacityMotion.value.opacity,Cs=this.currentMotion.value,Ts=Cs.ringScale,Bs=Cs.ringOpacity,Ps=Cs.circleFade,Ls=Cs.circleOpacity,Rs=Cs.circleScale;if(this.ringMesh.scale.set(Ts,Ts,Ts),this.centerMesh.scale.set(Rs,Rs,Rs),this.centerMesh2.scale.set(Rs,Rs,Rs),this.ringMesh.material.opacity=Bs*Ms,this.centerMesh.material.opacity=(1-Ps)*Ms,this.centerMesh2.material.opacity=Ps*Ls*Ms,this.loadingMotion.value.opacity>0){this.loadingMesh.visible=!0,this.loadingMesh.material.opacity=this.loadingMotion.value.opacity,this.loadingMesh.rotateZ(-Ss/200);var $s=this.opacityMotion.value.opacity,Fs=1.1;this.centerMesh.scale.set(Fs,Fs,Fs),this.centerMesh2.scale.set(Fs,Fs,Fs),this.centerMesh.material.opacity=0*$s,this.centerMesh2.material.opacity=.2*$s}else this.loadingMesh.visible=!1;this.needsRender=!0},_a.prototype.dispose=function(){this.currentMotion.dispose(),this.opacityMotion.dispose(),this.loadingMotion.dispose(),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose()},_a}(r$4.Object3D),_o=function(va){function _a(_s){var Ss=this,Ms=_a.parseArgs(_s);(Ss=va.call(this,Ms)||this).cardboard=new Ro(Ss.renderer);var Cs,Ts,Bs,Ps=(Cs="five_vr_helper_"+$n(),Ts=Fo(Cs),(Bs=document.createElement("div")).className=Cs,Bs.innerHTML=Ts,Bs);Ss.helperElement=Ps;var Ls=new yr(Ps);return Ss.element.parentNode&&(Ss.element.parentNode.insertBefore(Ps,Ss.element),Ss.setHelperElementSize(),Ls.on("tap",function(){return Ss.emit("vrWantsToExit")})),Ss.destroyHelper=function(){Ls.destroy(),Ps.parentNode&&Ps.parentNode.removeChild(Ps),delete Ss.helperElement},Ss.boundingMesh.visible=!0,Ss}return e$3.__extends(_a,va),_a.parseArgs=function(_s){var Ss=e$3.__assign(e$3.__assign({},_s),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return va.parseArgs.call(this,Ss)},_a.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return va.initAnimationEndPose.call(this,Ss)},_a.prototype.destroy=function(){va.prototype.destroy.call(this),this.cardboard.dispose(),this.destroyHelper();for(var _s=0,Ss=this.panoMeshes;_s<Ss.length;_s++){var Ms=Ss[_s];this.helper.remove(Ms),Ms.dispose()}this.panoMeshes.length=0},_a.prototype.isReady=function(){return!1},_a.prototype.updateRenderSize=function(){this.needsRender=!0,this.setHelperElementSize()},_a.prototype.updatePanoMeshes=function(){var _s=this;this.panoMeshes.forEach(function(Ts){_s.helper.remove(Ts),Ts.dispose()}),this.panoMeshes.length=0;for(var Ss=0;Ss<this.work.observers.length;Ss++){var Ms=this.work.observers[Ss],Cs=new qo;Cs.name="panoSphere_".concat(this.work.workCode,"_").concat(Ss),Cs.position.copy(Ms.position),Cs.needsRender=!0,this.helper.add(Cs),this.panoMeshes[Ss]=Cs}},_a.prototype.updateTime=function(_s,Ss){var Ms,Cs;if(!this.destroyed){this.needsRender=!0;var Ts={},Bs={};if(this.locationMotion.ended===!1){this.locationMotion.update(_s);var Ps=this.locationMotion.getKeyFrameSegment(_s),Ls=Ps[0],Rs=Ps[1],$s=this.panoResourceFromLocationMotionKeyframe(Ls),Fs=this.panoResourceFromLocationMotionKeyframe(Rs),Os=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Gs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Ns=$s.position,Vs=Fs.position,Ds=this.locationMotion.value.count-Rs.value.count+1;Ts.modelAlpha=this.locationMotion.value.modelAlpha,Ts.perspToOrtho=pn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ts.useBlackTransition=Fs.effect==="instant",Fs.panoPicture&&(Ds<1?$s.panoPicture&&(Ts.pano0=$s.panoPicture):Ts.pano0=Fs.panoPicture,Ts.pano1=Fs.panoPicture),Fs.effect==="fade"&&(Ts.pano0&&$s.panoPicture&&(Ts.pano0={map:Ts.pano0.map,luminanceMap:Ts.pano0.luminanceMap,matrix:$s.panoPicture.matrix.clone().setPosition(Fs.position)}),Ns.copy(Vs)),Ts.progress=Ds,Bs.distance=this.locationMotion.value.distance,Bs.offset=new r$4.Vector3(Ns.x+(Vs.x-Ns.x)*Ds,Ns.y+(Vs.y-Ns.y)*Ds,Ns.z+(Vs.z-Ns.z)*Ds);for(var ks=[],Us=[],zs=0,Ws=this.locationMotion.keyframes;zs<Ws.length;zs++){var qs=Ws[zs],Zs=qs.key,el=qs.progress;Zs!==void 0&&(ks.push(Zs),el>=this.locationMotion.progress&&Us.push(Zs))}for(var Js=0,Hs=Object.keys(this.panoResources);Js<Hs.length;Js++){var Qs=Hs[Js];if(!(Us.indexOf(Qs)>=0)){var js=this.panoResources[Qs];if(js.panoPicture){var Ks=js.panoPicture.map;if(Ks){if(Ks===((Ms=Ts.pano0)===null||Ms===void 0?void 0:Ms.map)||Ks===((Cs=Ts.pano1)===null||Cs===void 0?void 0:Cs.map))continue;Ks.dispose(),js.panoPicture=null}}ks.indexOf(Qs)>=0||delete this.panoResources[Qs]}}this.currentPanoIndex=Ds<.5?$s.panoIndex:Fs.panoIndex,this.emit("movingToPano",Gs.panoIndex,Os.panoIndex,this.locationMotion.progress)}vr(Ts)===!1&&(this.model.setMaterial(Ts),this.boundingMesh.setMaterial(Ts)),Bs.offset&&this.camera.position.copy(Bs.offset);var Xs=this.camera.pose.longitude,Ys=this.camera.pose.latitude;this.camera.quaternion.fromArray(this.cardboard.sensor.getOrientation()),this.camera.updateMatrixWorld(),this.camera.computePose();for(var rl=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),tl=0;tl<this.work.observers.length;tl++){var il=this.work.observers[tl];if((al=this.panoMeshes[tl]).visible=!0,il.loadable||il.active){if(rl.indexOf(tl)===-1)al.visible=!1;else{al.visible=!0;var ll=al.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);ll<.05?al.setOpacity(0):al.setOpacity(pn(1.5/ll,0,1)),this.currentPanoIndex===tl&&al.setOpacity(0)}al.lookAt(this.camera.position)}else al.visible=!0}var cl=this.intersect(_s);for(tl=0;tl<this.work.observers.length;tl++)(al=this.panoMeshes[tl])==null||al.setCurrent(al===cl);for(tl=0;tl<this.work.observers.length;tl++){var al;(al=this.panoMeshes[tl])&&al.updateTime&&al.updateTime(_s,Ss)}Xs===this.camera.pose.longitude&&Ys===this.camera.pose.latitude||(this.cameraMotion.set(ni(this.camera.pose,["longitude","latitude"]),0).catch(Lt),this.emit("cameraDirectionUpdate",ni(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",mr(ni(this.camera.pose,["longitude","latitude","fov","offset"])),!0))}},_a.prototype.render=function(){this.cardboard.render(this.scene,this.camera)},_a.prototype.setCamera=function(_s){},_a.prototype.destroyHelper=function(){},_a.prototype.setHelperElementSize=function(){if(this.helperElement){var _s=new r$4.Vector2(this.element.offsetWidth,this.element.offsetHeight),Ss=_s.x*this.scissor.left,Ms=_s.y*(1-this.scissor.bottom-this.scissor.height),Cs=_s.x*this.scissor.width,Ts=_s.y*this.scissor.height;this.helperElement.style.marginLeft=Ss+"px",this.helperElement.style.marginTop=Ms+"px",this.helperElement.style.width=Cs+"px",this.helperElement.style.height=Ts+"px"}},_a.prototype.intersect=function(_s){var Ss;if(this.locationMotion.ended===!1)return this.intersectMesh.visible=!1,delete this.activePanoMesh,void delete this.activeTime;if(this.activePanoMesh&&this.activeTime&&_s-this.activeTime>1500){var Ms=this.activePanoMesh;return(Rs=this.panoMeshes.indexOf(Ms))>=0&&this.moveToPano(Rs,{},!0),delete this.activePanoMesh,delete this.activeTime,Ms}for(var Cs=this.camera.getWorldDirection(new r$4.Vector3),Ts=new r$4.Raycaster(this.camera.position,Cs),Bs=void 0,Ps=[],Ls=this.work.observers[this.currentPanoIndex].visibleNodes,Rs=0;Rs<this.work.observers.length;Rs++){var $s=this.panoMeshes[Rs];if(Ls.indexOf(Rs)!==-1){var Fs=Ts.intersectObject((Ss=$s.hitTestMesh)!==null&&Ss!==void 0?Ss:$s,!0)[0];Fs&&Ps.push({panoMesh:$s,intersection:Fs})}}var Os=Ps.sort(function(ks,Us){return ks.intersection.distance-Us.intersection.distance})[0];if(Os?(Bs=Os.intersection,this.activePanoMesh!==Os.panoMesh&&(this.activePanoMesh=Os.panoMesh,this.activeTime=_s),this.intersectMesh.position.copy(Os.panoMesh.position),this.intersectMesh.lookAt(this.camera.position),this.intersectMesh.visible=!1):(this.activePanoMesh=void 0,this.activeTime=void 0),!Bs)if((Bs=this.model.intersectRaycaster(Ts)[0])&&Bs.face){var Gs=Bs.face.normal,Ns=new r$4.Quaternion;Ns.setFromUnitVectors(new r$4.Vector3(0,0,1),Gs),this.intersectMesh.quaternion.copy(Ns);var Vs=Gs.clone().multiplyScalar(.05),Ds=Bs.point.clone().add(Vs);this.intersectMesh.position.copy(Ds),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",Bs,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden");return Os?.panoMesh},_a.prototype.onPanGesture=function(){},_a.prototype.onTapGesture=function(){},_a.prototype.onPinchGesture=function(){},_a.prototype.onMouseMove=function(){},_a.prototype.onMouseOut=function(){},_a}(so),jo=function(va){function _a(_s){var Ss,Ms,Cs,Ts,Bs=this,Ps=_a.parseArgs(_s);return(Bs=va.call(this,Ps)||this).currentPanoIndex=Ps.initial[0],Bs.locationMotion=new vn({x:Bs.camera.pose.offset.x,y:Bs.camera.pose.offset.y,z:Bs.camera.pose.offset.z,distance:Bs.camera.pose.distance,modelAlpha:(Ms=(Ss=Bs.model.getMaterial())===null||Ss===void 0?void 0:Ss.modelAlpha)!==null&&Ms!==void 0?Ms:0,perspToOrtho:(Ts=(Cs=Bs.model.getMaterial())===null||Cs===void 0?void 0:Cs.perspToOrtho)!==null&&Ts!==void 0?Ts:0}),Bs}return e$3.__extends(_a,va),_a.parseArgs=function(_s){return va.parseArgs.call(this,_s)},_a.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return va.initAnimationEndPose.call(this,Ss)},_a.prototype.destroy=function(){va.prototype.destroy.call(this),this.locationMotion.dispose()},_a.prototype.isReady=function(){return this.locationMotion.ended!==!1&&va.prototype.isReady.call(this)},_a.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){this.work=_s,this.currentPanoIndex=Ss,this.hideIntersectMesh();var Bs={duration:0,longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov};return this.moveToPano(Ss,Bs,Ts),!0},_a.prototype.updateTime=function(_s,Ss){if(!this.destroyed){var Ms={},Cs={};if(!this.locationMotion.ended){this.locationMotion.update(_s),Ms.modelAlpha=this.locationMotion.value.modelAlpha,Ms.perspToOrtho=pn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Cs.distance=this.locationMotion.value.distance,Cs.offset=new r$4.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var Ts=new r$4.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Bs=gr(this.work.observers,function(Ps){return Ps.position.distanceTo(Ts)});this.currentPanoIndex=this.work.observers.indexOf(Bs)}this.cameraMotion.ended||(this.cameraMotion.update(_s),Cs.longitude=this.cameraMotion.value.longitude,Cs.latitude=this.cameraMotion.value.latitude,Cs.fov=this.cameraMotion.value.fov),vr(Ms)||this.model.setMaterial(Ms),vr(Cs)||this.setCamera(Cs)}},_a.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls=this;this.destroyed||(this.pending=!1,this.userAction=Cs,this.moveToPano(_s,{longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:pn((Bs=Ss.latitude)!==null&&Bs!==void 0?Bs:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:pn((Ps=Ss.fov)!==null&&Ps!==void 0?Ps:this.defaultFov,this.minFov,this.maxFov),duration:Ms,moveStartCallback:function(Rs,$s){Ls.emit("initAnimationWillStart",Rs,$s,Ls.userAction)},moveEndCallback:function(Rs,$s){Ls.emit("initAnimationEnded",Rs,$s,Ls.userAction)},moveCancelCallback:function(){var Rs=Ls.currentPanoIndex,$s={longitude:Ls.camera.pose.longitude,latitude:Ls.camera.pose.latitude,fov:Ls.camera.pose.fov,offset:Ls.camera.pose.offset.clone()};Ls.emit("initAnimationEnded",Rs,$s,Ls.userAction)}},Cs))},_a.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:new r$4.Vector3(Ss.value.x,Ss.value.y,Ss.value.z)}},_a.prototype.moveToPano=function(_s,Ss,Ms){Ss===void 0&&(Ss={});var Cs=this.work.observers[_s];Cs&&this.moveToPosition(Cs.position,Ss,Ms)},_a.prototype.moveToPosition=function(_s,Ss,Ms){var Cs,Ts,Bs,Ps=this;Ss===void 0&&(Ss={}),this.userAction=Ms;for(var Ls=Ht(),Rs=new r$4.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(_s),$s=this.locationMotion.getProgressVelocity(Ls),Fs=0,Os=1;Os<this.locationMotion.keyframes.length;Os++){var Gs=this.locationMotion.keyframes[Os-1].value,Ns=Gs.x,Vs=Gs.y,Ds=Gs.z,ks=this.locationMotion.keyframes[Os].value,Us=ks.x,zs=ks.y,Ws=ks.z;Fs+=Math.sqrt(Math.pow(Us-Ns,2)+Math.pow(zs-Vs,2)+Math.pow(Ws-Ds,2))}var qs=Rs===0?0:$s*Fs/Rs,Zs=this.calculateMovingDuration(Ss.duration,Rs),el={x:_s.x,y:_s.y,z:_s.z,distance:0,modelAlpha:1,perspToOrtho:0},Js={longitude:Ss.longitude,latitude:Ss.latitude,fov:Ss.fov},Hs={longitude:(Cs=Js.longitude)!==null&&Cs!==void 0?Cs:this.camera.pose.longitude,latitude:(Ts=Js.latitude)!==null&&Ts!==void 0?Ts:this.camera.pose.latitude,fov:(Bs=Js.fov)!==null&&Bs!==void 0?Bs:this.camera.pose.fov,offset:_s.clone()},Qs=gr(this.work.observers,function(Ks){return Ks.position.distanceTo(_s)}),js=this.work.observers.indexOf(Qs);this.emit("moveToPano",js,this.userAction),Ss.moveStartCallback&&Ss.moveStartCallback(js,Hs),this.emit("panoWillArrive",js,Hs,this.userAction),this.cameraMotion.set(Js,Zs).catch(Lt),this.locationMotion.set(el,Zs,qs).then(function(){var Ks=mr(Ps.camera.pose);Ss.moveEndCallback&&Ss.moveEndCallback(js,Ks),Ps.emit("panoArrived",js,Ks,Ps.userAction)},function(){Ss.moveCancelCallback&&Ss.moveCancelCallback(),Ps.emit("moveToPanoCanceled",js)})},_a.prototype.onTapGesture=function(_s){var Ss=_s.pointers.map(function(Gs){return ni(Gs,["x","y"])});if(!this.emit("wantsGesture","tap",Ss,!0)){var Ms=this.relativeClientPosition(_s.center),Cs=new r$4.Raycaster;if(Cs.setFromCamera(Ms,this.camera),!this.emit("wantsTapGesture",Cs,Ms,!0)){this.emit("gesture","tap",Ss,!0),this.emit("tapGesture",Cs,Ms,!0),this.interiaMovement=!1;var Ts=this.model.intersectRaycaster(Cs)[0];if(Ts&&Ts.face){var Bs=Ts.face.normal,Ps=Ts.point;if(new r$4.Vector3(0,1,0).angleTo(Bs)>Math.PI/3){var Ls=this.camera.position.clone().setY(Ps.y),Rs=Ps.clone().sub(Ls).setLength(.3),$s=Ps.clone().sub(Rs);Cs.set($s,new r$4.Vector3(0,-1,0)),Ts=this.model.intersectRaycaster(Cs)[0]}}if(Ts){var Fs=Ts.point.clone(),Os=gr(this.work.observers.filter(function(Gs){return Math.abs(Gs.standingPosition.y-Fs.y)<1}),function(Gs){return Gs.standingPosition.distanceTo(Fs)});if(Os)return Fs.y=Os.position.y,void this.moveToPosition(Fs,{},!0)}this.cameraBounce()}}},_a}(Nr),Uo=function(){for(var va=[],_a=0;_a<arguments.length;_a++)va[_a]=arguments[_a];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),Go=function(){for(var va=[],_a=0;_a<arguments.length;_a++)va[_a]=arguments[_a];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),Wo=Object.assign({opacity:new r$4.Uniform(1),scale:new r$4.Uniform(13.1),panoMap:new r$4.Uniform(null),panoDisplacementMap:new r$4.Uniform(null),panoPosition:new r$4.Uniform(new r$4.Vector3),panoMatrix:new r$4.Uniform(new r$4.Matrix4)},{emissive:new r$4.Uniform(new r$4.Color(0)),emissiveMap:new r$4.Uniform(null),specular:new r$4.Uniform(new r$4.Color(1118481)),specularMap:new r$4.Uniform(null),normalMap:new r$4.Uniform(null),bumpMap:new r$4.Uniform(null),shininess:new r$4.Uniform(30)},r$4.UniformsLib.common,r$4.UniformsLib.lights),Xo=new r$4.SphereBufferGeometry(.01,128,128),Yo=function(){function va(_a){_a===void 0&&(_a={}),this.textureLoader=new Si({allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}),this.allowHosts=_a.allowHosts,this.networkSubscribe=_a.networkSubscribe}return va.prototype.setAllowHosts=function(_a){this.allowHosts=_a,this.textureLoader.setAllowHosts(_a)},va.prototype.setNetworkSubscribe=function(_a){this.networkSubscribe=_a,this.textureLoader.setNetworkSubscribe(_a)},va.prototype.load=function(_a,_s,Ss,Ms,Cs,Ts,Bs,Ps){var Ls=[0,0],Rs=function(Fs,Os){Ls[Os]=Fs,Bs(.8*Ls[0]+.2*Ls[1])},$s=[this.textureLoader.load(_a,{viaAjax:!0},void 0,void 0,function(Fs){return Rs(Fs,1)},Ps),this.textureLoader.loadCube(_s,{viaAjax:!0},void 0,void 0,function(Fs){return Rs(Fs,0)},Ps)];return Promise.all($s).then(function(Fs){var Os=Fs[0],Gs=Fs[1],Ns={body:function(Vs,Ds,ks,Us){var zs=new r$4.ShaderMaterial({side:r$4.BackSide,vertexShader:Uo,fragmentShader:Go,transparent:!0,uniforms:r$4.UniformsUtils.clone(Wo)}),Ws=Ds;return Ws.needsUpdate=!0,Ws.minFilter=r$4.LinearFilter,Ws.magFilter=r$4.LinearFilter,Vs.needsUpdate=!0,Vs.minFilter=r$4.LinearFilter,Vs.magFilter=r$4.LinearFilter,zs.uniforms.opacity.value=0,zs.uniforms.panoMap.value=Ws,zs.uniforms.panoDisplacementMap.value=Vs,zs.uniforms.panoPosition.value=ks,zs.uniforms.panoMatrix.value=Us,Object.assign(new r$4.Mesh(Xo,zs),{frustumCulled:!1,dispose:function(){this.material instanceof r$4.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(Os.body,Gs.body,Ss,Ms),meta:e$3.__spreadArray([Os.meta],Gs.meta,!0)};return Cs(Ns),Ns}).catch(function(Fs){for(var Os=0,Gs=$s;Os<Gs.length;Os++)Gs[Os].then(function(Ns){return Ns.body.dispose()}).catch(Lt);return Ts(Fs),Promise.reject(Fs)})},va}(),Zo=new r$4.Vector3(-1,1,1),Jo=function(va){function _a(_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs=this,$s=_a.parseArgs(_s);return(Rs=va.call(this,$s)||this).currentPanoIndex=$s.initial[0],Rs.maxAccessibleDistance=$s.maxAccessibleDistance,Rs.panoTapTriggerRadius=$s.panoTapTriggerRadius,Rs.panoCircleMeshCreator=$s.panoCircleMeshCreator,Rs.boundingMesh=Rs.generateBoundingMesh(),Rs.boundingMesh.setMaterial(Rs.model.getMaterial()||{}),Rs.boundingMesh.visible=!1,Rs.scene.add(Rs.boundingMesh),Rs.panoModelGroup=new r$4.Group,Rs.panoModelGroup.name="panoModels",Rs.scene.add(Rs.panoModelGroup),Rs.panoMeshes=[],Rs.updatePanoMeshes(),Rs.helper.remove(Rs.intersectMesh),Rs.locationMotion=new vn({count:0,distance:Rs.camera.pose.distance,modelAlpha:(Ms=(Ss=Rs.model.getMaterial())===null||Ss===void 0?void 0:Ss.modelAlpha)!==null&&Ms!==void 0?Ms:0,perspToOrtho:(Ts=(Cs=Rs.model.getMaterial())===null||Cs===void 0?void 0:Cs.perspToOrtho)!==null&&Ts!==void 0?Ts:0}),Rs.panoResources={},Rs.panoResources[Rs.locationMotion.keyframes[0].key=Rs.locationMotion.keyframes[1].key=$n()]={panoIndex:Rs.currentPanoIndex,workCode:Rs.work.workCode,matrix:(Ls=(Ps=(Bs=Rs.model.getMaterial())===null||Bs===void 0?void 0:Bs.pano1)===null||Ps===void 0?void 0:Ps.matrix)!==null&&Ls!==void 0?Ls:new r$4.Matrix4,position:Rs.camera.pose.offset.clone(),effect:"fly"},Rs.depthTextureLoader=new Yo({allowHosts:Rs.work.allowHosts,networkSubscribe:Rs.networkSubscribe}),Rs}return e$3.__extends(_a,va),_a.parseArgs=function(_s){var Ss,Ms,Cs,Ts=va.parseArgs.call(this,_s);return e$3.__assign(e$3.__assign({},Ts),{maxAccessibleDistance:(Ss=_s.maxAccessibleDistance)!==null&&Ss!==void 0?Ss:5,panoTapTriggerRadius:(Ms=_s.panoTapTriggerRadius)!==null&&Ms!==void 0?Ms:1,panoCircleMeshCreator:(Cs=_s.panoCircleMeshCreator)!==null&&Cs!==void 0?Cs:function(){return new Gn}})},_a.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return va.initAnimationEndPose.call(this,Ss)},_a.prototype.destroy=function(){var _s,Ss=this;if(va.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var Ms=0,Cs=this.panoModelGroup.children;Ms<Cs.length;Ms++){var Ts=Cs[Ms];typeof Ts.dispose=="function"&&Ts.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Gs){Ss.helper.remove(Gs),Gs.dispose()}),this.panoMeshes.length=0);for(var Bs=(_s=this.model.getMaterial())!==null&&_s!==void 0?_s:{},Ps=Bs.pano0,Ls=Bs.pano1,Rs=0,$s=Object.keys(this.panoResources);Rs<$s.length;Rs++){var Fs=$s[Rs],Os=this.panoResources[Fs];Os.panoModel&&Os.panoModel.material.uniforms.panoMap.value!==Ps?.map&&Os.panoModel.material.uniforms.panoMap.value!==Ls?.map&&(this.panoModelGroup.remove(Os.panoModel),Os.panoModel.material.uniforms.panoMap.value.dispose(),Os.panoModel.dispose(),delete Os.panoModel),delete this.panoResources[Fs]}this.interiaMovement=!1},_a.prototype.isReady=function(){return this.locationMotion.ended===!1&&va.prototype.isReady.call(this)},_a.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){this.userAction=Ts,this.work=_s,this.currentPanoIndex=Ss,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var Bs={},Ps=!0;this.boundingMesh&&(Bs=this.boundingMesh.getMaterial()||{},Ps=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Ps,this.boundingMesh.setMaterial(Bs),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Ls=0,Rs=this.panoMeshes;Ls<Rs.length;Ls++)Rs[Ls].visible=!1;return this.moveToPano(Ss,{effect:"fade",duration:Cs,longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov},Ts),!0},_a.prototype.updateTime=function(_s,Ss){var Ms,Cs,Ts;if(!this.destroyed){var Bs={},Ps={},Ls=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Rs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),$s=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(_s);var Fs=this.locationMotion.getKeyFrameSegment(_s),Os=Fs[0],Gs=Fs[1],Ns=this.panoResourceFromLocationMotionKeyframe(Os),Vs=this.panoResourceFromLocationMotionKeyframe(Gs),Ds=new r$4.Vector3().copy(Ns.position),ks=new r$4.Vector3().copy(Vs.position),Us=this.locationMotion.value.count-Gs.value.count+1;Bs.progress=Us,Bs.modelAlpha=this.locationMotion.value.modelAlpha,Bs.perspToOrtho=pn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1);for(var zs=0,Ws=this.panoModelGroup.children;zs<Ws.length;zs++){var qs=Ws[zs];qs.visible=qs===Ns.panoModel||qs===Vs.panoModel}Ns.panoModel&&(Ns.panoModel.material.uniforms.opacity.value=1-Us,Ns.panoModel.material.depthTest=Us!==0),Vs.panoModel&&(Vs.panoModel.material.uniforms.opacity.value=Us,Vs.panoModel.material.depthTest=Us!==1),Vs.panoModel&&(Us<1?Ns.panoModel&&(Bs.pano0={map:Ns.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Ns.matrix}):Bs.pano0={map:Vs.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Vs.matrix},Bs.pano1={map:Vs.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Vs.matrix}),$s=Bs.useBlackTransition=Vs.effect==="instant"||Vs.effect==="montage",Vs.effect!=="fade"&&Vs.effect!=="montage"||(Bs.pano0&&(Bs.pano0={map:Bs.pano0.map,luminanceMap:null,matrix:Ns.matrix.clone().setPosition(Vs.position)}),Ds.copy(ks)),Ps.distance=this.locationMotion.value.distance,Ps.offset=new r$4.Vector3(Ds.x+(ks.x-Ds.x)*Us,Ds.y+(ks.y-Ds.y)*Us,Ds.z+(ks.z-Ds.z)*Us);for(var Zs=[],el=[],Js=0,Hs=this.locationMotion.keyframes;Js<Hs.length;Js++){var Qs=Hs[Js],js=Qs.key,Ks=Qs.progress;js!==void 0&&(Zs.push(js),Ks>=this.locationMotion.progress&&el.push(js))}for(var Xs=0,Ys=Object.keys(this.panoResources);Xs<Ys.length;Xs++){var rl=Ys[Xs];if(!(el.indexOf(rl)>=0)){var tl=this.panoResources[rl];if(tl.panoModel){if(tl.panoModel.material.uniforms.panoMap.value===((Ms=Bs.pano0)===null||Ms===void 0?void 0:Ms.map)||tl.panoModel.material.uniforms.panoMap.value===((Cs=Bs.pano1)===null||Cs===void 0?void 0:Cs.map))continue;this.panoModelGroup.remove(tl.panoModel),tl.panoModel.material.uniforms.panoMap.value.dispose(),tl.panoModel.dispose(),delete tl.panoModel}Zs.indexOf(rl)>=0||delete this.panoResources[rl]}}Ns.workCode===Vs.workCode?this.currentPanoIndex=Us<.5?Ns.panoIndex:Vs.panoIndex:this.currentPanoIndex=Vs.panoIndex,this.emit("movingToPano",Rs.panoIndex,Ls.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(_s),Ps.longitude=this.cameraMotion.value.longitude,Ps.latitude=this.cameraMotion.value.latitude,Ps.fov=this.cameraMotion.value.fov),vr(Bs)===!1&&(this.model.setMaterial(Bs),this.boundingMesh.setMaterial(Bs)),vr(Ps)===!1&&this.setCamera(Ps),this.camera.pose.distance>.1)for(var il=0;il<this.work.observers.length;il++)(dl=this.panoMeshes[il])&&(dl.visible=!1);else{var ll=this.work.observers[this.currentPanoIndex];if(ll){var cl=ll.visibleNodes.concat(this.currentPanoIndex),al=this.getForwardPanoIndexOrNot();for(il=0;il<this.work.observers.length;il++){var dl,yl=this.work.observers[il];if(dl=this.panoMeshes[il])if(yl.loadable||yl.active)if(cl.indexOf(il)!==-1)if($s)dl.visible=!1,dl.setOpacity(0);else{dl.visible=!0;var xl=dl.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);dl.setCurrent(al===il),dl.setOpacity(xl<.01?0:pn(1.4/xl,.5,.7)),dl.updateTime&&dl.updateTime(_s,Ss)}else dl.visible=!1,dl.setOpacity(0);else dl.visible=!1,dl.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Ts=this.boundingMesh.getMaterial())===null||Ts===void 0?void 0:Ts.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},_a.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1],Ms=this.panoResourceFromLocationMotionKeyframe(Ss),Cs=this.work.observers[Ms.panoIndex];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:Cs?Cs.position.clone():this.camera.position.clone()}},_a.prototype.moveToPano=function(_s,Ss,Ms){var Cs,Ts,Bs=this;Ss===void 0&&(Ss={});var Ps=this.work.observers[_s].images.depth,Ls=e$3.__assign({key:"pano.".concat(_s),basisLoaderInitialized:Ii.isInitialized()},ni(this.imageOptions,["format","size","quality","sharpen"])),Rs=(Cs=this.imageOptions.transform)!==null&&Cs!==void 0?Cs:de,$s={right:Rs(this.work.observers[_s].images.right,e$3.__assign(e$3.__assign({},Ls),{key:"pano.".concat(_s,".right")})),left:Rs(this.work.observers[_s].images.left,e$3.__assign(e$3.__assign({},Ls),{key:"pano.".concat(_s,".left")})),up:Rs(this.work.observers[_s].images.up,e$3.__assign(e$3.__assign({},Ls),{key:"pano.".concat(_s,".up")})),down:Rs(this.work.observers[_s].images.down,e$3.__assign(e$3.__assign({},Ls),{key:"pano.".concat(_s,".down")})),front:Rs(this.work.observers[_s].images.front,e$3.__assign(e$3.__assign({},Ls),{key:"pano.".concat(_s,".front")})),back:Rs(this.work.observers[_s].images.back,e$3.__assign(e$3.__assign({},Ls),{key:"pano.".concat(_s,".back")}))},Fs=this.work.observers[_s],Os=Fs.position,Gs=Fs.quaternion,Ns=new r$4.Matrix4().compose(Os,Gs,new r$4.Vector3(-1,1,1)),Vs="pano:"+Dr($s);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Vs)return;var Ds=this.pendingTextureTask.panoIndex;(Ts=this.panoMeshes[Ds])===null||Ts===void 0||Ts.setProgress(0),this.emit("textureAbort",Ds,this.work.observers[Ds]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:_s,hash:Vs,onLoad:function(Us){Bs.pending=!1,Bs.destroyed?Us.body.dispose():(Us.body.name=Vs,Bs.emit("panoLoaded",_s),Bs.doMoveToPano(_s,Us.body,Ss,Ms))},onError:function(Us){Bs.pending=!1,Ss.moveCancelCallback&&Ss.moveCancelCallback(),Bs.emit("panoLoadError",Us,_s),Bs.emit("moveToPanoCanceled",_s)}};var ks=this.panoMeshes[_s];ks&&ks.tap&&ks.tap(),this.depthTextureLoader.load(Ps,$s,Os,Ns,function(Us){var zs,Ws;((zs=Bs.pendingTextureTask)===null||zs===void 0?void 0:zs.hash)===Vs?(Bs.pendingTextureTask.onLoad(Us),(Ws=Bs.panoMeshes[_s])===null||Ws===void 0||Ws.setProgress(0),delete Bs.pendingTextureTask,Bs.emit("textureLoaded",_s,Bs.work.observers[_s],Us.meta)):Us.body.dispose()},function(Us){var zs,Ws;((zs=Bs.pendingTextureTask)===null||zs===void 0?void 0:zs.hash)===Vs&&(Bs.pendingTextureTask.onError(Us),(Ws=Bs.panoMeshes[_s])===null||Ws===void 0||Ws.setProgress(0),delete Bs.pendingTextureTask,Bs.emit("textureError",Us,_s,Bs.work.observers[_s]),Bs.emit("error",Us))},function(Us){var zs,Ws;Bs.emit("textureLoading",Us,_s,Bs.work.observers[_s]),((zs=Bs.pendingTextureTask)===null||zs===void 0?void 0:zs.hash)===Vs&&((Ws=Bs.panoMeshes[_s])===null||Ws===void 0||Ws.setProgress(Us))},this.renderer),this.emit("textureStartLoad",_s,this.work.observers[_s])},_a.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls=this;if(!this.destroyed){var Rs=!1;this.pending=!1,this.userAction=Cs,this.moveToPano(_s,{longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:pn((Bs=Ss.latitude)!==null&&Bs!==void 0?Bs:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:pn((Ps=Ss.fov)!==null&&Ps!==void 0?Ps:this.defaultFov,this.minFov,this.maxFov),duration:Ms,moveStartCallback:function($s,Fs){Rs=!0,Ls.emit("initAnimationWillStart",$s,Fs,Ls.userAction)},moveEndCallback:function($s,Fs){Ls.emit("initAnimationEnded",$s,Fs,Ls.userAction)},moveCancelCallback:function(){var $s=mr(Ls.camera.pose);Rs===!1&&Ls.emit("initAnimationWillStart",Ls.currentPanoIndex,$s,Ls.userAction),Ls.emit("initAnimationEnded",Ls.currentPanoIndex,$s,Ls.userAction)}},Cs)}},_a.prototype.panoResourceFromLocationMotionKeyframe=function(_s){return this.panoResources[_s.key]},_a.prototype.locationMotionKeyframesLength=function(_s){for(var Ss=0,Ms=1;Ms<_s.length;Ms++){var Cs=this.panoResourceFromLocationMotionKeyframe(_s[Ms-1]).position,Ts=this.panoResourceFromLocationMotionKeyframe(_s[Ms]).position;Ss+=Cs.distanceTo(Ts)*(_s[Ms].value.count-_s[Ms-1].value.count)}return Ss},_a.prototype.updatePanoMeshes=function(){for(var _s={},Ss=0,Ms=this.panoMeshes;Ss<Ms.length;Ss++)_s[(Ps=Ms[Ss]).name]=Ps;this.panoMeshes.length=0;for(var Cs=0;Cs<this.work.observers.length;Cs++){var Ts="panoCircle_".concat(this.work.workCode,"_").concat(Cs),Bs=this.work.observers[Cs],Ps=void 0;_s[Ts]?(Ps=_s[Ts],delete _s[Ts]):((Ps=this.panoCircleMeshCreator()).name=Ts,this.helper.add(Ps)),Ps.position.copy(Bs.standingPosition),this.panoMeshes[Cs]=Ps}for(var Ls=0,Rs=Object.keys(_s);Ls<Rs.length;Ls++){var $s=Rs[Ls];this.helper.remove(_s[$s]),_s[$s].dispose(),delete _s[$s]}},_a.prototype.generateBoundingMesh=function(_s){_s===void 0&&(_s=!1);for(var Ss=this.model.bounding.clone(),Ms=0,Cs=this.work.observers;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss.expandByPoint(Ts.standingPosition),Ss.expandByPoint(new r$4.Vector3().fromArray([Ts.position.x,2*Ts.position.y-Ts.standingPosition.y,Ts.position.z]))}_s&&Ss.expandByPoint(this.camera.position);var Bs=sr(Ss,new r$4.Vector3(1,0,1));return Bs.name="panorama_bounding",Bs.frustumCulled=!1,Bs},_a.prototype.doMoveToPano=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls,Rs=this;Ms===void 0&&(Ms={}),this.userAction=Cs;var $s=Ht(),Fs=$n(),Os=this.work.observers[_s],Gs=this.panoResources[Fs]={panoIndex:_s,workCode:this.work.workCode,effect:(Ts=Ms.effect)!==null&&Ts!==void 0?Ts:"fly",panoModel:Ss,matrix:new r$4.Matrix4().compose(Os.position,Os.quaternion,Zo),position:Os.position.clone()};Ss.visible=!1,Ss.renderOrder=-1,this.panoModelGroup.add(Ss);var Ns,Vs,Ds;if(this.locationMotion.ended){var ks=this.locationMotion.getKeyFrameSegment($s);ks[0];var Us=ks[1],zs=this.locationMotion.value,Ws=this.panoResourceFromLocationMotionKeyframe(Us).position,qs=Gs.position;Ns=Math.max(Ws.distanceTo(qs),1),Vs=[{key:Us.key,progress:0,value:e$3.__assign(e$3.__assign({},zs),{count:0})},{key:Fs,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Ds=0}else{var Zs=this.locationMotion.getKeyFrameSegment($s),el=Zs[0],Js=(Us=Zs[1],zs=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(el).position),Hs=(Ws=this.panoResourceFromLocationMotionKeyframe(Us).position,qs=Gs.position,Us.value.count-zs.count),Qs=Math.max(Js.distanceTo(Ws),1)*Hs;Ns=Qs+Math.max(Ws.distanceTo(qs),1),Vs=[{key:el.key,progress:0,value:e$3.__assign({},zs)},{key:Us.key,progress:Qs/Ns,value:Us.value},{key:Fs,progress:1,value:{count:Us.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var js=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Ks=this.locationMotionKeyframesLength(Vs);Ds=js===0||js===0?0:this.locationMotion.getProgressVelocity($s)*js/Ks}var Xs=this.calculateMovingDuration(Ms.duration,Ms.effect==="fade"||Ms.effect==="montage"?0:Ns),Ys={longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov},rl={longitude:(Bs=Ys.longitude)!==null&&Bs!==void 0?Bs:this.camera.pose.longitude,latitude:(Ps=Ys.latitude)!==null&&Ps!==void 0?Ps:this.camera.pose.latitude,fov:(Ls=Ys.fov)!==null&&Ls!==void 0?Ls:this.camera.pose.fov,offset:Os.position.clone()};Ms.moveStartCallback&&Ms.moveStartCallback(_s,rl),this.emit("panoWillArrive",_s,rl,this.userAction),this.cameraMotion.set(Ys,Xs).catch(Lt),this.locationMotion.setKeyframes(Vs,Xs,Ds).then(function(){var tl={longitude:Rs.camera.pose.longitude,latitude:Rs.camera.pose.latitude,fov:Rs.camera.pose.fov,offset:Rs.camera.pose.offset.clone()};Ms.moveEndCallback&&Ms.moveEndCallback(_s,tl),Rs.emit("panoArrived",_s,tl,Cs)},function(){Ms.moveCancelCallback&&Ms.moveCancelCallback(),Rs.emit("moveToPanoCanceled",_s)})},_a.prototype.getForwardPanoIndexOrNot=function(_s){var Ss=this,Ms=this.camera.getWorldDirection(new r$4.Vector3),Cs=this.camera.position.clone(),Ts=this.work.observers[this.currentPanoIndex];if(!Ts)return null;var Bs=Ts.accessibleNodes.filter(function(Ds){if(Ds===Ss.currentPanoIndex)return!1;var ks=Ss.work.observers[Ds],Us=ks.standingPosition.clone().sub(Cs);return Us.length()!==0&&!(Us.angleTo(new r$4.Vector3(0,-1,0))<Math.PI/12)&&(ks.loadable||ks.active)}),Ps=(_s?_s.ray.direction.clone():Ms.clone()).setY(0);if(Ps.length()===0)return null;for(var Ls=Bs.slice().sort(function(Ds,ks){var Us=Ss.work.observers[Ds].position.clone().setY(Cs.y),zs=Ss.work.observers[ks].position.clone().setY(Cs.y);return Us.distanceTo(Cs)-zs.distanceTo(Cs)}),Rs=0,$s=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Rs<$s.length;Rs++)for(var Fs=$s[Rs],Os=0,Gs=Ls;Os<Gs.length;Os++){var Ns=Gs[Os],Vs=this.work.observers[Ns].position.clone().setY(Cs.y).sub(Cs);if(Vs.length()!==0&&Ps.angleTo(Vs)<Fs)return Ns}return null},_a.prototype.onTapGesture=function(_s){var Ss=this,Ms=_s.pointers.map(function(tl){return ni(tl,["x","y"])});if(!this.emit("wantsGesture","tap",Ms,!0)){var Cs=this.relativeClientPosition(_s.center),Ts=new r$4.Raycaster;if(Ts.setFromCamera(Cs,this.camera),!this.emit("wantsTapGesture",Ts,Cs,!0)){this.emit("gesture","tap",Ms,!0),this.emit("tapGesture",Ts,Cs,!0),this.interiaMovement=!1;var Bs=this.camera.getWorldDirection(new r$4.Vector3).setY(0),Ps=null,Ls=this.work.observers[this.currentPanoIndex];if(Ls){var Rs=Ls.accessibleNodes.filter(function(tl){if(tl===Ss.currentPanoIndex)return!1;var il=Ss.work.observers[tl];return!(il.position.distanceTo(Ss.camera.position)>Ss.maxAccessibleDistance)&&(il.loadable||il.active)}),$s=Ts.intersectObject(this.boundingMesh,!0)[0];if($s){var Fs=gr(Rs,function(tl){var il=Ss.work.observers[tl].standingPosition.clone();return il.clone().sub(Ss.camera.position).setY(0).angleTo(Bs)>Math.PI/2?1/0:il.distanceTo($s.point)},!0),Os=Fs[0];Fs[1]<this.panoTapTriggerRadius&&(Ps=Os)}ji(Ps)&&(Ps=this.getForwardPanoIndexOrNot(Ts));for(var Gs=0,Ns=this.locationMotion.keyframes;Gs<Ns.length;Gs++){var Vs=Ns[Gs],Ds=this.panoResourceFromLocationMotionKeyframe(Vs);if(!(Vs.progress<this.locationMotion.progress)&&Ds.panoIndex===Ps){Ps=null;break}}if(this.emit("panoSelected",Ps),ji(Ps))this.locationMotion.ended===!0&&this.cameraBounce();else{var ks=this.work.observers[Ps];if(ks.active){for(var Us={},zs=Math.PI/6,Ws=Math.PI/12,qs=new r$4.Vector3(0,1,0),Zs=ks.position.clone().setY(0).sub(Ls.position.clone().setY(0)).normalize(),el=Zs.clone().applyAxisAngle(qs,zs),Js=Zs.clone().applyAxisAngle(qs,-zs),Hs=[],Qs=[],js=[],Ks=0,Xs=ks.accessibleNodes;Ks<Xs.length;Ks++)if((Os=Xs[Ks])!==this.currentPanoIndex&&Os!==Ps){var Ys=this.work.observers[Os].position.clone().sub(ks.position).setY(0);Zs.angleTo(Ys)<zs?js.push(Ys):el.angleTo(Ys)<zs?Hs.push(Ys):Js.angleTo(Ys)<zs&&Qs.push(Ys)}var rl=(js.length>0?js:e$3.__spreadArray(e$3.__spreadArray([],Hs,!0),Qs,!0)).slice().sort(function(tl,il){return tl.angleTo(Zs)-il.angleTo(Zs)})[0];rl&&rl.angleTo(Bs)>Ws&&(Us.longitude=Math.atan2(-rl.x,-rl.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Us.latitude=pn(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",Ps,Us,!0)}else this.panoMeshes[Ps]&&(this.panoMeshes[Ps].setDisabled(!1),this.panoMeshes[Ps].setLoading(!0))}}}}},_a}(Nr),$o=["Panorama","DepthPanorama","Model"],ts={Floorplan:Tr,Topview:Qr,Panorama:so,VRPanorama:_o,Model:jo,DepthPanorama:Jo};function es(va){for(var _a=0,_s=$o;_a<_s.length;_a++){var Ss=_s[_a];if(typeof va=="string"){if(Ss===va)return!0}else if(va instanceof Pr&&va instanceof ts[Ss])return!0}return!1}var is=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError"];function ns(va){for(var _a,_s,Ss={},Ms=0,Cs=va.split(/(\;|\,)/);Ms<Cs.length;Ms++){var Ts=Cs[Ms].split("="),Bs=(_a=Ts[0])===null||_a===void 0?void 0:_a.trim(),Ps=(_s=Ts[1])===null||_s===void 0?void 0:_s.trim();Bs&&Ps&&(Ss[Bs]=Ps)}return Ss}function rs(){for(var va,_a=document.getElementsByTagName("meta"),_s=0;_s<_a.length;_s++){var Ss=_a[_s];if(Ss.getAttribute("name")==="viewport"){var Ms=ns((va=Ss.getAttribute("content"))!==null&&va!==void 0?va:""),Cs=Number(Ms["initial-scale"]);if(!isNaN(Cs))return Cs}}return 1}var os=[351,63],ss=[20,20],as=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),us=new Float32Array([0,0,1,0,0,1,1,1]),ls=new Uint8Array([0,1,2,1,3,2]),hs=new r$4.BufferGeometry;hs.setAttribute("position",new r$4.BufferAttribute(as,3)),hs.setAttribute("uv",new r$4.BufferAttribute(us,2)),hs.setIndex(new r$4.BufferAttribute(ls,1));var cs=new r$4.MeshBasicMaterial({transparent:!0,depthTest:!1}),ds=new r$4.Mesh(hs,cs),ps=new r$4.Scene;ps.add(ds);var As=new r$4.OrthographicCamera(-.5,.5,.5,-.5,.1,1);As.position.set(0,0,.5),As.lookAt(0,0,0);var fs=new r$4.Vector4,gs=new r$4.Vector4;function vs(va){if(cs.map){var _a=va.getViewport(fs),_s=va.getScissor(gs),Ss=va.getScissorTest(),Ms=va.autoClear;va.setViewport(_s.x+ss[0]/3,_s.y+ss[1]/3,os[0]/3,os[1]/3),va.setScissor(_s.x+ss[0]/3,_s.y+ss[1]/3,os[0]/3,os[1]/3),va.setScissorTest(!0),va.autoClear=!1,va.render(ps,As),va.setViewport(_a),va.setScissor(_s),va.setScissorTest(Ss),va.autoClear=Ms}else{var Cs=new r$4.Texture,Ts=new Image;Ts.onload=function(){Cs.image=Ts,Cs.wrapS=r$4.ClampToEdgeWrapping,Cs.wrapT=r$4.ClampToEdgeWrapping,Cs.minFilter=r$4.LinearFilter,Cs.needsUpdate=!0,cs.needsUpdate=!0,Ts.onload=function(){}},Ts.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",cs.map=Cs}}var ms=new r$4.Box3(new r$4.Vector3(-50,-50,-50),new r$4.Vector3(50,50,50)),ys=new r$4.Vector2,bs=new r$4.Frustum,ws=new r$4.Matrix4,xs=new r$4.Clock,Es=new WeakMap,Is=function(va){function _a(_s){_s===void 0&&(_s={});var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s,Fs,Os=this;if((Os=va.call(this)||this).ident=$n(),Os.renderSwitch01=0,Os.panoIndex=0,Os.needsRender=!1,Os.onlyRenderIfNeeds=(Ss=_s.onlyRenderIfNeeds)===null||Ss===void 0||Ss,Os.imageOptions=e$3.__assign({},(Ms=_s.imageOptions)!==null&&Ms!==void 0?Ms:{}),Os.textureOptions=e$3.__assign({},(Cs=_s.textureOptions)!==null&&Cs!==void 0?Cs:{}),Os.poweredByRealsee=(Ts=_s.poweredByRealsee)===null||Ts===void 0||Ts,Os.extraElements=[],Os.controllerInits={Panorama:Object.assign({},_s.panorama),Model:Object.assign({},_s.model),Floorplan:Object.assign({},_s.floorplan),Topview:Object.assign({},_s.topview),DepthPanorama:Object.assign({},_s.depthPanorama),VRPanorama:Object.assign({},_s.vrPanorama)},Os.fps={testCount:0,testTime:Ht()},Os.modeChangeDuration=(Bs=_s.modeChangeDuration)!==null&&Bs!==void 0?Bs:1e3,Os.panoramaLikeSavedPose={},typeof window<"u")if(_s.renderer)_s.renderer instanceof Ie&&Os.throwError(new Error("cannot render a internal renderer")),Os.renderer=_s.renderer;else try{Os.renderer=new Ie({preserveDrawingBuffer:_s.preserveDrawingBuffer,backgroundColor:_s.backgroundColor,backgroundAlpha:_s.backgroundAlpha,antialias:_s.antialias});var Gs=rs();Os.renderer.setPixelRatio(Gs===1?window.devicePixelRatio:1),Os.renderer.setSize(512,512)}catch(el){el instanceof Error&&Os.throwError(el)}Os.getPixelsRenderTarget=new r$4.WebGLRenderTarget(1,1,{encoding:(Ls=(Ps=Os.renderer)===null||Ps===void 0?void 0:Ps.outputEncoding)!==null&&Ls!==void 0?Ls:r$4.sRGBEncoding}),Os.scissor=Object.assign({left:0,bottom:0,width:1,height:1},_s.scissor),Os.camera=new De(80),Os.scene=new Ce,Os.lastLoadWorkTask=Promise.resolve(),Os.networkSubscribe=new te,Os.networkSubscribe.on("network",function(el,Js,Hs,Qs){var js;Os.emit("network",el,Js,Hs,Qs),(js=Os.analysis)===null||js===void 0||js.network(Os.work,el,Js,Hs,Qs)}),Os.model=new Xi({allowHosts:[],networkSubscribe:Os.networkSubscribe});var Ns=sr(ms);Ns.name="model_empty",Os.model.add(Ns),Os.model.visible=!1,Os.readyCallbacks=[],Os.modelPending=!1,Os.syncingState=!1,Os.scene.add(Os.model),Os.helperGroup=new r$4.Group,Os.helperGroup.name="helper",Os.scene.add(Os.helperGroup),Os.videoTexture=new r$4.VideoTexture(_s.videoInstance||function(){var el=document.createElement("video");el.loop=!0,el.autoplay=!0,el.playsInline=!0,el.muted=!0,el.crossOrigin="";var Js=function(){document.removeEventListener("touchstart",Js,!1),document.removeEventListener("mousedown",Js,!1),el.muted=!1};return document.addEventListener("touchstart",Js,!1),document.addEventListener("mousedown",Js,!1),el}()),function(el){(Js=new r$4.DirectionalLight(16777215,.5)).position.copy(new r$4.Vector3(1,1,1)),el.add(Js);var Js=new r$4.DirectionalLight(16777215,.3);el.add(Js),Js=new r$4.AmbientLight(16777215,.3),el.add(Js)}(Os.scene),Os.state={mode:(Rs=Os.currentMode)!==null&&Rs!==void 0?Rs:"Panorama",panoIndex:($s=Os.panoIndex)!==null&&$s!==void 0?$s:0,longitude:Os.camera.pose.longitude,latitude:Os.camera.pose.latitude,fov:Os.camera.pose.fov,offset:Os.camera.pose.offset.clone()},Os.stateSynced=!1,Os._enableIOSEDR=!1,Os.destroyed=!1,Os.paused=!0,typeof window<"u"&&(_s.play!==!1&&Os.play(),((Fs=_s.initialBasisLoader)!==null&&Fs!==void 0&&Fs)!==!1&&(typeof _s.initialBasisLoader=="string"?Os.initBasisLoader(_s.initialBasisLoader):Os.initBasisLoader()),Os.stopAnimationLoop=se.shared.add(function(el,Js){Os.updateTime(el,Js)},!1,0,10));var Vs=function(){typeof document<"u"&&document.fullscreenElement===null&&Os.currentMode==="VRPanorama"&&Os.controller.emit("vrWantsToExit")};if(typeof document<"u"&&document.addEventListener("fullscreenchange",Vs,!1),Os.removeEventListeners=function(){typeof document<"u"&&document.removeEventListener("fullscreenchange",Vs,!1)},Os.plugins={},_s.plugins&&_s.plugins.length)for(var Ds=0,ks=_s.plugins;Ds<ks.length;Ds++){var Us=ks[Ds];if(typeof Us=="function")Us(Os);else if(Array.isArray(Us)){var zs=Us[0],Ws=Us[1],qs=Us[2];if(typeof zs=="function"){var Zs=zs(Os,qs);typeof Ws=="string"&&(Os.plugins[Ws]?Os.throwError(new Error("plugin name ".concat(Ws," is exists."))):Os.plugins[Ws]=Zs)}}}return Os}return e$3.__extends(_a,va),_a.prototype.dispose=function(){var _s;if(this.destroyed!==!0){this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var Ss=this.getElement();Ss&&Ss.parentNode&&Ss.parentNode.removeChild(Ss),this.scene.remove(this.model);var Ms=this.model.getMaterial();Ms&&(Ms.pano0&&Ms.pano0.map.dispose(),Ms.pano1&&Ms.pano1.map!==((_s=Ms.pano0)===null||_s===void 0?void 0:_s.map)&&Ms.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof Ie&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},_a.prototype.setScissor=function(_s){Object.assign(this.scissor,_s),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty(_a.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(_s){this.helperGroup.visible!==_s&&(this.helperGroup.visible=_s,this.emit("helpersVisibleChange",_s),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(_a.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(_s){this._enableIOSEDR!==_s&&(this._enableIOSEDR=_s,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(_a.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(_s){var Ss,Ms;if(_s){if(!this.screenBuffer){var Cs=this.getDrawingBufferSize(ys);this.screenBuffer=new r$4.WebGLRenderTarget(Cs.x,Cs.y,{encoding:(Ms=(Ss=this.renderer)===null||Ss===void 0?void 0:Ss.outputEncoding)!==null&&Ms!==void 0?Ms:r$4.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),_a.prototype.updateConfiguration=function(_s){var Ss=!1;_s.panorama&&(Object.assign(this.controllerInits.Panorama,_s.panorama),this.currentMode==="Panorama"&&(Ss=!0)),_s.model&&(Object.assign(this.controllerInits.Model,_s.model),this.currentMode==="Model"&&(Ss=!0)),_s.floorplan&&(Object.assign(this.controllerInits.Floorplan,_s.floorplan),this.currentMode==="Floorplan"&&(Ss=!0)),_s.topview&&(Object.assign(this.controllerInits.Topview,_s.topview),this.currentMode==="Topview"&&(Ss=!0)),_s.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,_s.depthPanorama),this.currentMode==="DepthPanorama"&&(Ss=!0)),_s.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,_s.vrPanorama),this.currentMode==="VRPanorama"&&(Ss=!0)),_s.imageOptions&&(Object.assign(this.imageOptions,_s.imageOptions),this.currentMode!=="Panorama"&&this.currentMode!=="DepthPanorama"&&this.currentMode!=="VRPanorama"||(Ss=!0)),Ss&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},_a.prototype.appendTo=function(_s,Ss){if(Ss===void 0&&(Ss={}),this.renderer)if(this.renderer instanceof Ie){var Ms=this.getElement();if(Ms){_s.appendChild(Ms),this.refresh(Ss);var Cs=window.getComputedStyle(_s).position;Cs!=="relative"&&Cs!=="absolute"&&Cs!=="fixed"&&Cs!=="sticky"&&(_s.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},_a.prototype.refresh=function(_s,Ss){if(_s===void 0&&(_s={}),this.renderer){var Ms=this.getElement();if(Ms){var Cs=Ms.parentNode;if(Cs&&Cs.nodeName){var Ts=_s.width,Bs=Ts===void 0?Cs.offsetWidth:Ts,Ps=_s.height,Ls=Ps===void 0?Cs.offsetHeight:Ps;this.renderer instanceof Ie&&(Ss&&this.renderer.setPixelRatio(Ss),this.renderer.setSize(Bs,Ls))}var Rs=this.renderer.getSize(new r$4.Vector2);this.camera.aspect=Rs.x*this.scissor.width/(Rs.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},_a.prototype.addExtraElement=function(_s){var Ss=this;return this.extraElements.indexOf(_s)===-1&&(this.extraElements.push(_s),this.controller&&this.controller.bindExtraElement(_s)),function(){return Ss.removeExtraElement(_s)}},_a.prototype.removeExtraElement=function(_s){var Ss=this.extraElements.indexOf(_s);Ss!==-1&&(this.extraElements.splice(Ss,1),this.controller&&this.controller.unbindExtraElement(_s))},_a.prototype.getPose=function(){var _s=this.camera.copyPose();return{longitude:_s.longitude,latitude:_s.latitude,fov:_s.fov,offset:_s.offset}},_a.prototype.getSize=function(_s){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(_s),_s.x*=this.scissor.width,_s.y*=this.scissor.height,_s},_a.prototype.getDrawingBufferSize=function(_s){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(_s),_s.x*=this.scissor.width,_s.y*=this.scissor.height,_s},_a.prototype.updateCamera=function(_s,Ss,Ms){return Ms===void 0&&(Ms=!0),this.controller?this.controller.updateCamera(_s,Ss,Ms):Promise.reject(new Error("controller is not initialized."))},_a.prototype.getLongitudeAndLatitude=function(){var _s=this.getPose();return{longitude:_s.longitude,latitude:_s.latitude}},_a.prototype.getOffset=function(){return this.getPose().offset},_a.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var _s=this.work.observers[this.panoIndex],Ss=new r$4.Object3D;return Ss.position.copy(_s.position),Ss.quaternion.copy(_s.quaternion),Ss.scale.set(1,1,1),Ss.updateMatrixWorld(!0),function(Ms,Cs){var Ts=new r$4.Vector3(0,0,-1);Ts.applyQuaternion(Ms.quaternion);var Bs=Cs.quaternion.clone().inverse();return Ts.applyQuaternion(Bs),{theta:Math.atan2(Ts.x,-Ts.z),phi:-Math.asin(Ts.y),lookAtVector:Ts}}(this.camera,Ss)}},_a.prototype.initBasisLoader=function(_s){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise>"u"||typeof WeakMap>"u"||typeof WebAssembly>"u")throw new Error("Basis loader not support.");typeof _s=="string"&&Ii.setTranscoderPath(_s),Ii.workerConfig.format||Ii.detectSupport(this.renderer),Ii._allocateWorker(0)}catch(Ss){Ss instanceof Error&&this.throwError(Ss)}},Object.defineProperty(_a.prototype,"work",{get:function(){var _s=Es.get(this);if(_s&&an.get(_s))return _s},enumerable:!1,configurable:!0}),_a.prototype.load=function(_s,Ss,Ms,Cs){var Ts=this;if(Cs===void 0&&(Cs=!0),!this.renderer)throw new Error("renderer is not initialized");var Bs=this.lastLoadWorkTask.then(function(){return!(Ps=_s)||typeof Ps!="object"&&typeof Ps!="function"||typeof Ps.then!="function"?Ts.load_(_s,Ss,Ms,Cs):_s.then(function(Ls){return Ts.load_(Ls,Ss,Ms,Cs)});var Ps});return this.lastLoadWorkTask=Bs.catch(function(Ps){Ts.throwError(Ps)}),Bs},_a.prototype.load_=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls,Rs,$s,Fs,Os,Gs,Ns=this;Cs===void 0&&(Cs=!0);var Vs,Ds,ks,Us=dn(_s),zs=this.work;Ss===void 0&&(Ss=zs?"inherit":"initial"),Ss==="inherit"?(Vs=typeof this.panoIndex=="number"&&Us.observers[this.panoIndex]?this.panoIndex:Us.initial.panoIndex,Ds=(Ts=this.currentMode)!==null&&Ts!==void 0?Ts:Us.initial.mode,ks={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):Ss==="initial"?(Ds=(Bs=this.currentMode)!==null&&Bs!==void 0?Bs:Us.initial.mode,Vs=Us.initial.panoIndex,ks=Ds===_a.Mode.Panorama||Ds===_a.Mode.DepthPanorama||Ds===_a.Mode.Model||Ds===_a.Mode.VRPanorama?{longitude:Us.initial.longitude,latitude:Us.initial.latitude,fov:Us.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(Vs=(Ps=Ss.panoIndex)!==null&&Ps!==void 0?Ps:Us.initial.panoIndex,Ds=(Rs=(Ls=Ss.mode)!==null&&Ls!==void 0?Ls:this.currentMode)!==null&&Rs!==void 0?Rs:"Panorama",ks={longitude:($s=Ss.longitude)!==null&&$s!==void 0?$s:Us.initial.longitude,latitude:(Fs=Ss.latitude)!==null&&Fs!==void 0?Fs:Us.initial.latitude,fov:(Os=Ss.fov)!==null&&Os!==void 0?Os:Us.initial.fov}),this.emit("willLoad",_s,Us,{panoIndex:Vs,mode:Ds,longitude:ks.longitude,latitude:ks.latitude,fov:ks.fov});var Ws=function(){var Zs;Ns.panoIndex=Vs,Ns.panoramaLikeSavedPose.longitude=Us.initial.longitude,Ns.panoramaLikeSavedPose.latitude=Us.initial.latitude,Ns.panoramaLikeSavedPose.fov=Us.initial.fov;var el=Ns.controller?Ms??Ns.modeChangeDuration:0,Js=e$3.__assign(e$3.__assign({initial:[Vs,ks,el,Cs]},Ns.commonParams()),Ns.controllerInits[Ds]);Ns.controller?Ns.controller.updateWork(Us,Vs,ks,el,Cs)===!1&&(Ns.controller.destroy(),Ns.controller=Ns.applyController(Ds,Js)):Ns.controller=Ns.applyController(Ds,Js),Ns.emit("load",_s,Us,{panoIndex:Vs,mode:Ds,longitude:ks.longitude,latitude:ks.latitude,fov:ks.fov}),(Zs=Ns.analysis)===null||Zs===void 0||Zs.work(Us)},qs=function(Zs){var el;Zs===void 0&&(Zs=Lt),Us.model&&(Ns.model.name!==((el=Us.model)===null||el===void 0?void 0:el.file)?(Ns.emit("modelWillLoad",Us.model),Ns.loadModel(Us.model,Us.allowHosts,Zs,!0)):Zs&&Zs())};return Es.set(this,Us),Ds===_a.Mode.Floorplan||Ds===_a.Mode.Topview||Ds===_a.Mode.Model?qs(function(){Ws(),Ns.needsRender=!0}):(this.controller||(this.camera.setFromPose({distance:0,fov:Us.initial.fov,longitude:Us.initial.longitude,latitude:Us.initial.latitude,offset:Us.observers[Us.initial.panoIndex].position}),this.needsRender=!0),Ws(),(Gs=this.controller)===null||Gs===void 0||Gs.once("panoLoaded",function(){Ns.needsRender=!0,Ns.emit("cameraUpdate",Ns.camera.copyPose(),Cs),qs()})),this.ready().then(function(){Ns.emit("loaded",_s,Ns.work)})},_a.prototype.changeMode=function(_s,Ss,Ms,Cs,Ts){var Bs=this;if(Ss===void 0&&(Ss={}),Ms===void 0&&(Ms=this.modeChangeDuration),Cs===void 0&&(Cs=!0),Ts===void 0&&(Ts=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function(Ps,Ls){if(!_a.Mode.hasOwnProperty(_s)){var Rs=new Error('mode "'.concat(_s,'" is not existed'));return Bs.throwError(Rs),void Ls(Rs)}if((_s===_a.Mode.Floorplan||_s===_a.Mode.Topview||_s===_a.Mode.Model)&&(ji(Bs.model)||Bs.model.loaded!==!0))return Rs=new Error("model is not ready."),Bs.throwError(Rs),void Ls(Rs);if(ji(Bs.controller))return Rs=new Error("controller is not ready."),Bs.throwError(Rs),void Ls(Rs);var $s=Bs.controller,Fs=Bs.currentMode,Os=function(){var Gs,Ns,Vs,Ds;if(Bs.emit("wantsChangeMode",_s,Fs))Ls(new Error("change mode canceled."));else{if(Bs.controller&&Ts===!1&&Fs===_s)_s===_a.Mode.Panorama||_s===_a.Mode.DepthPanorama||_s===_a.Mode.Model||_s===_a.Mode.VRPanorama?typeof Ss.panoIndex=="number"&&Ss.panoIndex!==Bs.panoIndex?Bs.controller.moveToPano((Ns=(Gs=Ss.panoIndex)!==null&&Gs!==void 0?Gs:Bs.panoIndex)!==null&&Ns!==void 0?Ns:0,e$3.__assign({duration:Ms},Ss),Cs):Bs.controller.updateCamera(Ss,Ms,Cs).catch(Lt):(typeof Ss.panoIndex=="number"&&Ss.panoIndex!==Bs.panoIndex&&(Bs.panoIndex=Ss.panoIndex),Bs.controller.updateCamera(Ss,Ms,Cs).catch(Lt));else{$s.destroy();var ks=(Ds=(Vs=Ss.panoIndex)!==null&&Vs!==void 0?Vs:Bs.panoIndex)!==null&&Ds!==void 0?Ds:0,Us=es(_s)?Bs.panoramaLikeSavedPose:{};typeof Ss.longitude!="number"&&typeof Ss.latitude!="number"||(Us.longitude=Ss.longitude,Us.latitude=Ss.latitude),typeof Ss.fov=="number"&&(Us.fov=Ss.fov);var zs=e$3.__assign(e$3.__assign({initial:[ks,Us,Ms,Cs]},Bs.commonParams()),Bs.controllerInits[_s]);Bs.saveControllerPose($s),Bs.controller=Bs.applyController(_s,zs);var Ws=ts[_s].initAnimationEndPose(zs);Bs.emit("modeChange",_s,Fs,ks,Ws)}Ps()}};_s===_a.Mode.VRPanorama?(Bs.requestFullscreen(),(typeof location>"u"||location.protocol!=="https:"?Promise.reject(new Error("Request DeviceOrientation Permission denied.")):typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(Gs){if(Gs=="granted")return Promise.resolve();var Ns=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(Ns)}):Promise.resolve()).then(function(){return Os()}).catch(function(Gs){Gs instanceof Error&&(Bs.exitFullscreen(),Bs.throwError(Gs),Ls(Gs))})):Os()})},_a.prototype.getPixels=function(_s,Ss,Ms,Cs,Ts){if(Ts===void 0&&(Ts=1),!this.renderer)throw new Error("renderer is not initialized.");var Bs=this.getPixelsRenderTarget,Ps=this.renderer.getSize(new r$4.Vector2);_s=pn(_s,Math.floor(Ms/2),Math.floor(Ps.x-Ms)),Ss=pn(Ss,Math.floor(Cs/2),Math.floor(Ps.y-Cs)),_s*=Ts,Ss*=Ts,Ms*=Ts,Cs*=Ts,Bs.setSize(Ps.x*Ts,Ps.y*Ts),Bs.scissor.set(_s,Ss,Ms,Cs),Bs.scissorTest=!0,this.renderer.setRenderTarget(Bs);var Ls=new Uint8Array(Ms*Cs*4);return this.controller?this.controller.render(xs.getDelta()):this.renderer.render(this.scene,this.camera),this.renderer.readRenderTargetPixels(Bs,_s,Ss,Ms,Cs,Ls),this.renderer.setRenderTarget(null),Bs.setSize(1,1),Bs.scissor.set(0,0,0,0),Bs.scissorTest=!1,Ls},_a.prototype.getElement=function(){var _s;return(_s=this.renderer)===null||_s===void 0?void 0:_s.domElement},_a.prototype.render=function(_s,Ss){var Ms=this;if(Ss===void 0&&(Ss=!1),!this.renderer)return null;if(Ss){var Cs=this.renderer.getSize(ys);this.scene.traverseVisible(function(Ps){Ps.setResolution&&Ps.setResolution(Cs.x,Cs.y)})}var Ts=xs.getDelta();if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var Bs=this.getDrawingBufferSize(ys);return this.screenBuffer.setSize(Bs.x,Bs.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(Ts),this.renderer.setRenderTarget(null),this.currentMode!=="VRPanorama"&&this.poweredByRealsee&&vs(this.renderer),this.renderer.setRenderTarget(null),_s&&se.shared.add(_s,!0),this.screenBuffer}return this.aroundScissor(function(){Ms.renderer&&(Ms.controller?Ms.controller.render(Ts):Ms.renderer.render(Ms.scene,Ms.camera),Ms.currentMode!=="VRPanorama"&&Ms.poweredByRealsee&&vs(Ms.renderer)),_s&&se.shared.add(_s,!0)}),null},_a.prototype.updateTime=function(_s,Ss){var Ms=this;if(!this.destroyed){this.syncingState=this.syncState(_s,Ss),this.controller&&this.controller.updateTime(_s,Ss),this.syncingState=!1;var Cs=new r$4.Vector2(512,512),Ts=new r$4.Vector2(512,512);this.renderer&&(this.renderer.getSize(Cs),Cs.x*=this.scissor.width,Cs.y*=this.scissor.height,this.renderer.getDrawingBufferSize(Ts),Ts.x*=this.scissor.width,Ts.y*=this.scissor.height);var Bs=[];if(ws.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),bs.setFromProjectionMatrix(ws),this.scene.traverse(function(Gs){Gs.setResolution&&Gs.setResolution(Cs.x,Cs.y),Gs.mixer instanceof r$4.AnimationMixer&&Gs.mixer.update(xs.getDelta()),(Gs instanceof r$4.Mesh||Gs instanceof r$4.Line||Gs instanceof r$4.Points)&&(Gs instanceof r$4.ImmediateRenderObject||!Gs.frustumCulled||bs.intersectsObject(Gs))&&Bs.push(Gs)}),Ts.width*Ts.height>8388608?this.renderSwitch01=1^this.renderSwitch01:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var Ps=void 0;if(this.onlyRenderIfNeeds!==!0)Ps=this.render();else{for(var Ls=0,Rs=Bs;Ls<Rs.length;Ls++){var $s=Rs[Ls],Fs=function(Gs){Gs.needsRender===!0?(Gs.needsRender=!1,Ms.needsRender=!0):Gs.mixer&&Gs.mixer.stats.actions.inUse>0&&(Ms.needsRender=!0)};Fs($s),$s.traverseAncestors(Fs)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(Ps=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return Ms.controller.postProcessing(Ms.screenBuffer,void 0,xs.getDelta())}),this.hasListener("renderFrame")&&this.emit("renderFrame",Ps!==void 0)}if(this.fps.testTime&&_s-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=_s,this.fps.testCount=0,this.renderer){var Os=function(Gs){var Ns=Gs.getError();if(Ns===Gs.NO_ERROR)return null;switch(Ns){case Gs.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case Gs.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case Gs.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case Gs.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case Gs.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case Gs.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}(this.renderer.getContext());Os&&this.throwError(Os)}}},_a.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof Ie&&this.renderer.clear(!0,!0,!0)},_a.prototype.play=function(){this.needsRender=!0,this.paused=!1},_a.prototype.moveToPano=function(_s,Ss,Ms){Ss===void 0&&(Ss={}),Ms===void 0&&(Ms=!0);var Cs=this,Ts=Cs.controller,Bs=Cs.currentMode,Ps=Cs.renderer;Ts?Ps?Bs===_a.Mode.Floorplan||Bs===_a.Mode.Topview?ji(_s)||(this.panoIndex=_s,this.changeMode(_a.Mode.Panorama,Ss,void 0,Ms)):Ts.moveToPano(_s,Ss,Ms):this.throwError(new Error("renderer is not initialized.")):this.throwError(new Error("controller is not initialized."))},_a.prototype.preloadPano=function(_s,Ss){var Ms=this;if(Ss===void 0&&(Ss=Lt),!this.work)return Promise.reject(new Error("work never loaded"));var Cs=this.work.observers[_s],Ts=Ht();return Promise.all(["right","left","up","down","front","back"].map(function(Bs){var Ps=e$3.__assign({key:"pano.".concat(_s,".").concat(Bs),basisLoaderInitialized:Ii.isInitialized()},ni(Ms.imageOptions,["size","format","quality"])),Ls=Cs.images[Bs];return function(Rs,$s){return $s===void 0&&($s={}),Rs in ie?ie[Rs]:ie[Rs]=new Promise(function(Fs,Os){var Gs=document.createElement("link");Gs.href=Rs,Gs.rel=Gs.relList&&Gs.relList.supports("prefetch")?"prefetch":"preload",Gs.as="fetch",Gs.crossOrigin="";var Ns=Ht(),Vs=document.head||document.getElementsByTagName("head")[0];Vs&&Vs.appendChild(Gs);var Ds=!1;Gs.onload=function(){var ks;if(Ds!==!0){Ds=!0,Fs();var Us=Ht(),zs={source:Rs,requestTime:Ns,responseTime:Us,costs:Us-Ns,headers:{}};(ks=$s.networkSubscribe)===null||ks===void 0||ks.emit("network",Rs,"Link","preload",JSON.stringify(zs))}},Gs.onerror=function(ks){var Us;if(Ds!==!0){Ds=!0;var zs=new Wt(Rs,"Link",0);Os(zs),(Us=$s.networkSubscribe)===null||Us===void 0||Us.emit("network",Rs,"Link","error",zs.message)}}})}(Ms.imageOptions.transform?Ms.imageOptions.transform(Ls,Ps):de(Ls,Ps),{networkSubscribe:Ms.networkSubscribe})})).then(function(){var Bs=Ht()-Ts;return Ss(Bs),Bs})},_a.prototype.project2d=function(_s,Ss){if(Ss===void 0&&(Ss=!1),!this.renderer)return null;if(this.model.empty===!1&&Ss){var Ms=this.camera.position,Cs=_s.clone().sub(Ms),Ts=new r$4.Raycaster(Ms,Cs.clone().normalize()),Bs=this.model.intersectRaycaster(Ts)[0];if(Bs&&Bs.distance+.01<Cs.length())return null}var Ps=_s.clone().project(this.camera);if(Math.abs(Ps.z)>1)return null;var Ls=this.renderer.getSize(new r$4.Vector2),Rs=Ls.x*this.scissor.width,$s=Ls.y*this.scissor.height,Fs=Ls.x*this.scissor.left+(Ps.x+1)/2*Rs,Os=Ls.y*(1-this.scissor.bottom-this.scissor.height)+(1-Ps.y)/2*$s;return new r$4.Vector2(Fs,Os)},_a.prototype.getRenderObjects=function(_s){ws.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),bs.setFromProjectionMatrix(ws),_s||(_s=this.scene);var Ss=[];return _s.traverseVisible(function(Ms){(Ms instanceof r$4.Mesh||Ms instanceof r$4.Line||Ms instanceof r$4.Points)&&(Ms instanceof r$4.ImmediateRenderObject||!Ms.frustumCulled||bs.intersectsObject(Ms))&&Ss.push(Ms)}),Ss},_a.prototype.getCurrentState=function(){return e$3.__assign(e$3.__assign({},this.getPose()),{mode:this.currentMode||_a.Mode.Panorama,panoIndex:this.panoIndex||0})},_a.prototype.setState=function(_s,Ss,Ms){var Cs,Ts,Bs,Ps,Ls,Rs,$s,Fs;Ss===void 0&&(Ss=!1),Ms===void 0&&(Ms=!0),!(_s=Object.assign({},_s)).offset||_s instanceof r$4.Vector3||(_s.offset=new r$4.Vector3(_s.offset.x,_s.offset.y,_s.offset.z));var Os,Gs,Ns,Vs,Ds=(Cs=_s.panoIndex)!==null&&Cs!==void 0?Cs:this.state.panoIndex,ks=(Ts=_s.mode)!==null&&Ts!==void 0?Ts:this.state.mode;if(this.work)if(this.work.observers[Ds])if(_s.mode!==_a.Mode.Floorplan&&_s.mode!==_a.Mode.Topview&&_s.mode!==_a.Mode.Model||!ji(this.model)&&this.model.loaded===!0){if(this.state.mode!==ks){if(ks==="VRPanorama")return void this.changeMode("VRPanorama",void 0,void 0,!0);var Us=void 0;Us=es(this.state.mode)&&es(ks)?e$3.__assign({},this.state):es(ks)?e$3.__assign({},this.panoramaLikeSavedPose):e$3.__assign({},_s),typeof _s.longitude=="number"&&(Us.longitude=_s.longitude),typeof _s.latitude=="number"&&(Us.latitude=_s.latitude),typeof _s.fov=="number"&&(Us.fov=_s.fov);var zs=e$3.__assign(e$3.__assign({initial:[Ds,Us,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[ks]),Ws=ts[ks].initAnimationEndPose(zs);Os=Ws.longitude,Gs=Ws.latitude,Ns=Ws.fov,Vs=Ws.offset}else Os=(Bs=_s.longitude)!==null&&Bs!==void 0?Bs:this.state.longitude,Gs=(Ps=_s.latitude)!==null&&Ps!==void 0?Ps:this.state.latitude,Ns=(Ls=_s.fov)!==null&&Ls!==void 0?Ls:this.state.fov,Vs=(Rs=_s.offset)!==null&&Rs!==void 0?Rs:this.state.offset;var qs={panoIndex:Ds,mode:ks,longitude:Os,latitude:Gs,fov:Ns,offset:Vs};this.emit("setState",qs),Ar(this.state,qs)||(pr(this.state,qs),this.controller&&(this.controller.userAction=Ms),Ss&&this.state.mode===qs.mode&&(this.syncingState=this.syncState(Ht(),0,Ss),this.syncingState&&(($s=this.controller)===null||$s===void 0||$s.updateTime(Ht(),0),this.syncingState=!1)),this.emit("stateChange",this.state,Ms),(Fs=this.analysis)===null||Fs===void 0||Fs.state(this.work,this.state))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},_a.prototype.aroundScissor=function(_s){if(this.renderer){var Ss=new r$4.Vector2,Ms=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(Ms){this.renderer.getSize(Ss);var Cs=Math.floor(Ss.x*this.scissor.left),Ts=Math.floor(Ss.y*this.scissor.bottom),Bs=Math.floor(Ss.x*this.scissor.width),Ps=Math.floor(Ss.y*this.scissor.height);this.renderer.setViewport(Cs,Ts,Bs,Ps),this.renderer.setScissor(Cs,Ts,Bs,Ps),this.renderer.setScissorTest(!0)}_s(),Ms&&(this.renderer.setViewport(0,0,Ss.x,Ss.y),this.renderer.setScissor(0,0,Ss.x,Ss.y),this.renderer.setScissorTest(!1))}},_a.prototype.syncState=function(_s,Ss,Ms){Ms===void 0&&(Ms=!1);var Cs=this.stateSynced;if(this.stateSynced=!1,!this.controller)return!1;if(this.state.mode!==this.currentMode){var Ts={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,Ts,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var Bs=this.currentMode;if(!(Bs===_a.Mode.Floorplan||Bs===_a.Mode.Topview||Bs===_a.Mode.Model)||!this.modelPending)for(var Ps=void 0;Ps=this.readyCallbacks.shift();)Ps()}if(this.controller instanceof ts.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var Ls={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,Ls,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return Ls={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset},this.controller.moveToPano(this.state.panoIndex,Ls,!1),!0;if(this.controller instanceof ts.Topview){var Rs=1,$s=Ms?this.state.fov:cr(this.camera.pose.fov,this.state.fov,Rs),Fs=Ms?new r$4.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$4.Vector3(cr(this.camera.pose.offset.x,this.state.offset.x,.2),cr(this.camera.pose.offset.y,this.state.offset.y,.2),cr(this.camera.pose.offset.z,this.state.offset.z,.2));if(er($s,this.camera.pose.fov)||nr(Fs,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:$s},0).catch(Lt),this.controller.locationMotion.set({x:Fs.x,y:Fs.y,z:Fs.z},0).catch(Lt),!0}else{Rs=1;var Os=Math.PI/45,Gs=($s=Ms?this.state.fov:cr(this.camera.pose.fov,this.state.fov,Rs),Ms?{longitude:this.state.longitude,latitude:this.state.latitude}:function(Ds,ks,Us){if(Ds.longitude===ks.longitude&&Ds.latitude===ks.latitude)return{longitude:ks.longitude,latitude:ks.latitude};var zs=ur(Ds.longitude),Ws=Ds.latitude,qs=ur(ks.longitude),Zs=ks.latitude;qs-zs>lr?zs+=hr:zs-qs>lr&&(zs-=hr);var el=Us/Math.sqrt(Math.pow(qs-zs,2)+Math.pow(Zs-Ws,2));return el>=1?{longitude:ks.longitude,latitude:ks.latitude}:{longitude:zs+(qs-zs)*el,latitude:Ws+(Zs-Ws)*el}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},Os)),Ns=Gs.longitude,Vs=Gs.latitude;if(er(Ns,this.camera.pose.longitude,2*Math.PI)||er(Vs,this.camera.pose.latitude)||er($s,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:Ns,latitude:Vs,fov:$s},0).catch(Lt),!0}return this.stateSynced=!0,Cs===!1&&this.emit("stateSynced",this.state),!1},_a.prototype.ready=function(){var _s=this;return new Promise(function(Ss){return _s.readyCallbacks.push(Ss)})},_a.prototype.requestFullscreen=function(){var _s;if(dr()){var Ss=(_s=this.getElement())===null||_s===void 0?void 0:_s.parentNode;Ss&&"requestFullscreen"in Ss&&typeof document<"u"&&document.fullscreenElement===null&&Ss.requestFullscreen()}},_a.prototype.exitFullscreen=function(){typeof document<"u"&&document.fullscreenElement&&"exitFullscreen"in document&&document.exitFullscreen()},_a.prototype.throwError=function(_s){this.hasListener("error")?this.emit("error",_s):console.error(_s)},_a.prototype.loadModel=function(_s,Ss,Ms,Cs){var Ts=this,Bs=_s.file;this.emit("modelWillLoad",_s);var Ps=new Xi({allowHosts:Ss,networkSubscribe:this.networkSubscribe});Ps.once("bvhLoaded",function(){var Ls,Rs;Ts.destroyed||Bs===((Rs=(Ls=Ts.work)===null||Ls===void 0?void 0:Ls.model)===null||Rs===void 0?void 0:Rs.file)&&Ts.emit("modelBvhLoaded",Ps)}),Ps.once("materialLoaded",function(){var Ls,Rs;Ts.destroyed||Bs===((Rs=(Ls=Ts.work)===null||Ls===void 0?void 0:Ls.model)===null||Rs===void 0?void 0:Rs.file)&&Ts.emit("modelMaterialLoaded",Ps)}),Ps.once("geometryLoaded",function(){var Ls,Rs,$s,Fs;if(!Ts.destroyed&&Bs===((Rs=(Ls=Ts.work)===null||Ls===void 0?void 0:Ls.model)===null||Rs===void 0?void 0:Rs.file)){Ps.bounding.max.y-Ps.bounding.min.y<1.5&&(Ps.bounding.max.y=Ps.bounding.min.y+10);var Os,Gs=Ts.model;Gs&&(Gs.show(),Os=Gs.getMaterial()||{},Ts.scene.remove(Gs),Gs.dispose(),Ps.setTransparent(Gs.getTransparent())),Os&&Ps.setMaterial(Os),_s.bvh&&Ps.buildBVH(),Ts.model=Ps,Ts.scene.add(Ps),($s=Ts.controller)===null||$s===void 0||$s.updateModel(Ps),(Fs=Ts.renderer)===null||Fs===void 0||Fs.compile(Ts.scene,Ts.camera),Ts.needsRender=!0,Ts.modelPending=!1,Ts.emit("modelGeometryLoaded",Ps)}}),Ps.once("loaded",function(){var Ls,Rs;Ts.destroyed||Bs===((Rs=(Ls=Ts.work)===null||Ls===void 0?void 0:Ls.model)===null||Rs===void 0?void 0:Rs.file)&&(Ms(),Ts.emit("modelLoaded",Ps))}),Ps.on("shownFloorChange",function(Ls,Rs){var $s,Fs;Ts.destroyed||Bs===((Fs=($s=Ts.work)===null||$s===void 0?void 0:$s.model)===null||Fs===void 0?void 0:Fs.file)&&Ts.emit("modelShownFloorChange",Ls,Rs)}),Ps.on("error",function(Ls){var Rs,$s,Fs,Os;if(!Ts.destroyed&&Bs===(($s=(Rs=Ts.work)===null||Rs===void 0?void 0:Rs.model)===null||$s===void 0?void 0:$s.file)){Ps.bounding.makeEmpty();for(var Gs=0,Ns=Ts.work.observers;Gs<Ns.length;Gs++){var Vs=Ns[Gs];Ps.bounding.expandByPoint(Vs.standingPosition),Ps.bounding.expandByPoint(new r$4.Vector3().fromArray([Vs.position.x,2*Vs.position.y-Vs.standingPosition.y,Vs.position.z]))}var Ds=sr(Ps.bounding,new r$4.Vector3(1,0,1));Ds.visible=!0,Ds.name="model_empty",Ps.add(Ds);var ks,Us=Ts.model;Us&&(Us.show(),ks=Us.getMaterial()||{},Ts.scene.remove(Us),Us.dispose(),Ps.setTransparent(Us.getTransparent())),ks&&Ps.setMaterial(ks),Ts.model=Ps,Ts.scene.add(Ps),(Fs=Ts.controller)===null||Fs===void 0||Fs.updateModel(Ps),(Os=Ts.renderer)===null||Os===void 0||Os.compile(Ts.scene,Ts.camera),Ts.emit("modelLoadError",Ls,Ps),Ts.throwError(Ls),Ts.modelPending=!1,Ms()}}),this.modelPending=!0,Ps.load(_s,this.textureOptions).catch(Lt)},_a.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe}},_a.prototype.saveControllerPose=function(_s){_s===void 0&&(_s=this.controller),_s&&es(_s)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},_a.prototype.applyController=function(_s,Ss){var Ms=this;if(!this.renderer)throw new Error("renderer is not initialized.");var Cs=ts[_s];_s===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(_s===_a.Mode.Floorplan||_s===_a.Mode.Topview||_s===_a.Mode.Model),this.currentMode=_s;for(var Ts=new Cs(Ss),Bs=function(Os){Ts.on(Os,function(){for(var Gs=[],Ns=0;Ns<arguments.length;Ns++)Gs[Ns]=arguments[Ns];var Vs=Ms.emit.apply(Ms,e$3.__spreadArray([Os],Gs,!1));if(Vs)return!1})},Ps=0,Ls=is;Ps<Ls.length;Ps++)Bs(Ls[Ps]);var Rs=ts[_s].initAnimationEndPose(Ss),$s=Ss.initial[3],Fs={panoIndex:Ss.initial[0],mode:_s,longitude:Rs.longitude,latitude:Rs.latitude,fov:Rs.fov,offset:Rs.offset};return Ar(this.state,Fs)||(pr(this.state,Fs),this.emit("stateChange",this.state,$s)),this.emit("currentStateChange",this.getCurrentState(),$s),Ts.on("cameraUpdate",function(Os,Gs){var Ns;if(Ms.controller){var Vs=e$3.__assign(e$3.__assign({},Ms.controller.getTargetPose()),{panoIndex:Ms.panoIndex,mode:_s});Gs&&Ms.syncingState===!1&&Ms.state.mode===Vs.mode&&!Ar(Ms.state,Vs)&&(pr(Ms.state,Vs),Ms.emit("stateChange",Ms.state,Gs),(Ns=Ms.analysis)===null||Ns===void 0||Ns.state(Ms.work,Ms.state))}Ms.emit("currentStateChange",Ms.getCurrentState(),Gs)}),Ts.on("initAnimationWillStart",function(Os,Gs,Ns){var Vs,Ds=e$3.__assign(e$3.__assign({},Gs),{panoIndex:Os,mode:_s});Ns&&Ms.state.mode===Ds.mode&&!Ar(Ms.state,Ds)&&(pr(Ms.state,Ds),Ms.emit("stateChange",Ms.state,Ns),(Vs=Ms.analysis)===null||Vs===void 0||Vs.state(Ms.work,Ms.state))}),Ts.on("initAnimationEnded",function(Os,Gs,Ns){var Vs,Ds=e$3.__assign(e$3.__assign({},Gs),{panoIndex:Os,mode:_s});Ns&&Ms.state.mode===Ds.mode&&!Ar(Ms.state,Ds)&&(pr(Ms.state,Ds),Ms.emit("stateChange",Ms.state,Ns),(Vs=Ms.analysis)===null||Vs===void 0||Vs.state(Ms.work,Ms.state))}),Ts.on("panoWillArrive",function(Os,Gs,Ns){var Vs;Ms.panoIndex=Os;var Ds=e$3.__assign(e$3.__assign({},Gs),{panoIndex:Os,mode:_s});Ns&&Ms.state.mode===Ds.mode&&!Ar(Ms.state,Ds)&&(pr(Ms.state,Ds),Ms.emit("stateChange",Ms.state,Ns),(Vs=Ms.analysis)===null||Vs===void 0||Vs.state(Ms.work,Ms.state))}),Ts.on("panoArrived",function(Os,Gs,Ns){var Vs,Ds=e$3.__assign(e$3.__assign({},Gs),{panoIndex:Os,mode:_s});Ns&&Ms.state.mode===Ds.mode&&!Ar(Ms.state,Ds)&&(pr(Ms.state,Ds),Ms.emit("stateChange",Ms.state,Ns),(Vs=Ms.analysis)===null||Vs===void 0||Vs.state(Ms.work,Ms.state))}),Ts.on("moveToPano",function(Os,Gs){Ms.emit("currentStateChange",Ms.getCurrentState(),Gs)}),Ts.on("wantsMoveToPano",function(Os,Gs,Ns){var Vs=Ms.emit("wantsMoveToPano",Os,Gs,Ns);Vs||(Vs=Ms.emit("wantsToMoveToPano",Os,Gs,Ns)),Vs||Ms.moveToPano(Os,Gs,Ns)}),Ts.on("vrWantsToExit",function(){Ms.currentMode===_a.Mode.VRPanorama&&(Ms.exitFullscreen(),Ms.changeMode(_a.Mode.Panorama))}),Ts.on("error",function(Os){return Ms.throwError(Os)}),Ts},_a.prototype.removeEventListeners=function(){},_a.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama"},_a.Line=null,_a}(Ot);five.AnimationFrameLoop=se,five.BVH=Ke,five.BVHIntersect=Fe,five.BVHNode=Ne,five.BVHVector3=ke,five.Camera=De,Five=five.Five=Is,five.InternalWebGLRenderer=Ie,five.IntersectMesh=Zn,five.LegacyPanoCircleMesh=Rn,five.Model=Xi,five.NetworkSubscribe=te,five.PBMContainer=Ae,five.PBMGroup=fe,five.PBMMaterial=Ee,five.PBMMesh=pe,five.PROXY_CONTROLLER_EVENT_NAMES=is,five.PanoCircleMesh=Gn,five.Scene=Ce,Subscribe=five.Subscribe=Ot,five.Work=un,five.defaultImageURLTransform=de,five.getViewportScale=rs,parseWork=five.parseWork=dn;/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var mod={},l$3=void 0,aa=mod;function r$3(va,_a){var _s=va.split("."),Ss=aa;!(_s[0]in Ss)&&Ss.execScript&&Ss.execScript("var "+_s[0]);for(var Ms;_s.length&&(Ms=_s.shift());)!_s.length&&_a!==l$3?Ss[Ms]=_a:Ss=Ss[Ms]?Ss[Ms]:Ss[Ms]={}}var t$2=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u"&&typeof DataView<"u";function v$3(va){var _a=va.length,_s=0,Ss=Number.POSITIVE_INFINITY,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s,Fs,Os;for($s=0;$s<_a;++$s)va[$s]>_s&&(_s=va[$s]),va[$s]<Ss&&(Ss=va[$s]);for(Ms=1<<_s,Cs=new(t$2?Uint32Array:Array)(Ms),Ts=1,Bs=0,Ps=2;Ts<=_s;){for($s=0;$s<_a;++$s)if(va[$s]===Ts){for(Ls=0,Rs=Bs,Fs=0;Fs<Ts;++Fs)Ls=Ls<<1|Rs&1,Rs>>=1;for(Os=Ts<<16|$s,Fs=Ls;Fs<Ms;Fs+=Ps)Cs[Fs]=Os;++Bs}++Ts,Bs<<=1,Ps<<=1}return[Cs,_s,Ss]}function w$3(va,_a){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=t$2?new Uint8Array(va):va,this.m=!1,this.i=y$3,this.r=!1,(_a||!(_a={}))&&(_a.index&&(this.a=_a.index),_a.bufferSize&&(this.h=_a.bufferSize),_a.bufferType&&(this.i=_a.bufferType),_a.resize&&(this.r=_a.resize)),this.i){case A$3:this.b=32768,this.c=new(t$2?Uint8Array:Array)(32768+this.h+258);break;case y$3:this.b=0,this.c=new(t$2?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var A$3=0,y$3=1,B$1={t:A$3,s:y$3};w$3.prototype.k=function(){for(;!this.m;){var va=C$2(this,3);switch(va&1&&(this.m=!0),va>>>=1,va){case 0:var _a=this.input,_s=this.a,Ss=this.c,Ms=this.b,Cs=_a.length,Ts=l$3,Bs=l$3,Ps=Ss.length,Ls=l$3;if(this.d=this.f=0,_s+1>=Cs)throw Error("invalid uncompressed block header: LEN");if(Ts=_a[_s++]|_a[_s++]<<8,_s+1>=Cs)throw Error("invalid uncompressed block header: NLEN");if(Bs=_a[_s++]|_a[_s++]<<8,Ts===~Bs)throw Error("invalid uncompressed block header: length verify");if(_s+Ts>_a.length)throw Error("input buffer is broken");switch(this.i){case A$3:for(;Ms+Ts>Ss.length;){if(Ls=Ps-Ms,Ts-=Ls,t$2)Ss.set(_a.subarray(_s,_s+Ls),Ms),Ms+=Ls,_s+=Ls;else for(;Ls--;)Ss[Ms++]=_a[_s++];this.b=Ms,Ss=this.e(),Ms=this.b}break;case y$3:for(;Ms+Ts>Ss.length;)Ss=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(t$2)Ss.set(_a.subarray(_s,_s+Ts),Ms),Ms+=Ts,_s+=Ts;else for(;Ts--;)Ss[Ms++]=_a[_s++];this.a=_s,this.b=Ms,this.c=Ss;break;case 1:this.j(ba,ca);break;case 2:for(var Rs=C$2(this,5)+257,$s=C$2(this,5)+1,Fs=C$2(this,4)+4,Os=new(t$2?Uint8Array:Array)(D$1.length),Gs=l$3,Ns=l$3,Vs=l$3,Ds=l$3,ks=l$3,Us=l$3,zs=l$3,qs=l$3,Ws=l$3,qs=0;qs<Fs;++qs)Os[D$1[qs]]=C$2(this,3);if(!t$2)for(qs=Fs,Fs=Os.length;qs<Fs;++qs)Os[D$1[qs]]=0;for(Gs=v$3(Os),Ds=new(t$2?Uint8Array:Array)(Rs+$s),qs=0,Ws=Rs+$s;qs<Ws;)switch(ks=E$2(this,Gs),ks){case 16:for(zs=3+C$2(this,2);zs--;)Ds[qs++]=Us;break;case 17:for(zs=3+C$2(this,3);zs--;)Ds[qs++]=0;Us=0;break;case 18:for(zs=11+C$2(this,7);zs--;)Ds[qs++]=0;Us=0;break;default:Us=Ds[qs++]=ks}Ns=v$3(t$2?Ds.subarray(0,Rs):Ds.slice(0,Rs)),Vs=v$3(t$2?Ds.subarray(Rs):Ds.slice(Rs)),this.j(Ns,Vs);break;default:throw Error("unknown BTYPE: "+va)}}return this.n()};var G$1=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D$1=t$2?new Uint16Array(G$1):G$1,H$1=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I$1=t$2?new Uint16Array(H$1):H$1,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t$2?new Uint8Array(J):J,L$1=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t$2?new Uint16Array(L$1):L$1,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N$1=t$2?new Uint8Array(ea):ea,O$1=new(t$2?Uint8Array:Array)(288),P$1,fa;P$1=0;for(fa=O$1.length;P$1<fa;++P$1)O$1[P$1]=143>=P$1?8:255>=P$1?9:279>=P$1?7:8;var ba=v$3(O$1),Q=new(t$2?Uint8Array:Array)(30),R$1,ga;R$1=0;for(ga=Q.length;R$1<ga;++R$1)Q[R$1]=5;var ca=v$3(Q);function C$2(va,_a){for(var _s=va.f,Ss=va.d,Ms=va.input,Cs=va.a,Ts=Ms.length,Bs;Ss<_a;){if(Cs>=Ts)throw Error("input buffer is broken");_s|=Ms[Cs++]<<Ss,Ss+=8}return Bs=_s&(1<<_a)-1,va.f=_s>>>_a,va.d=Ss-_a,va.a=Cs,Bs}function E$2(va,_a){for(var _s=va.f,Ss=va.d,Ms=va.input,Cs=va.a,Ts=Ms.length,Bs=_a[0],Ps=_a[1],Ls,Rs;Ss<Ps&&!(Cs>=Ts);)_s|=Ms[Cs++]<<Ss,Ss+=8;if(Ls=Bs[_s&(1<<Ps)-1],Rs=Ls>>>16,Rs>Ss)throw Error("invalid code length: "+Rs);return va.f=_s>>Rs,va.d=Ss-Rs,va.a=Cs,Ls&65535}w$3.prototype.j=function(va,_a){var _s=this.c,Ss=this.b;this.o=va;for(var Ms=_s.length-258,Cs,Ts,Bs,Ps;(Cs=E$2(this,va))!==256;)if(256>Cs)Ss>=Ms&&(this.b=Ss,_s=this.e(),Ss=this.b),_s[Ss++]=Cs;else for(Ts=Cs-257,Ps=I$1[Ts],0<K[Ts]&&(Ps+=C$2(this,K[Ts])),Cs=E$2(this,_a),Bs=da[Cs],0<N$1[Cs]&&(Bs+=C$2(this,N$1[Cs])),Ss>=Ms&&(this.b=Ss,_s=this.e(),Ss=this.b);Ps--;)_s[Ss]=_s[Ss++-Bs];for(;8<=this.d;)this.d-=8,this.a--;this.b=Ss};w$3.prototype.w=function(va,_a){var _s=this.c,Ss=this.b;this.o=va;for(var Ms=_s.length,Cs,Ts,Bs,Ps;(Cs=E$2(this,va))!==256;)if(256>Cs)Ss>=Ms&&(_s=this.e(),Ms=_s.length),_s[Ss++]=Cs;else for(Ts=Cs-257,Ps=I$1[Ts],0<K[Ts]&&(Ps+=C$2(this,K[Ts])),Cs=E$2(this,_a),Bs=da[Cs],0<N$1[Cs]&&(Bs+=C$2(this,N$1[Cs])),Ss+Ps>Ms&&(_s=this.e(),Ms=_s.length);Ps--;)_s[Ss]=_s[Ss++-Bs];for(;8<=this.d;)this.d-=8,this.a--;this.b=Ss};w$3.prototype.e=function(){var va=new(t$2?Uint8Array:Array)(this.b-32768),_a=this.b-32768,_s,Ss,Ms=this.c;if(t$2)va.set(Ms.subarray(32768,va.length));else for(_s=0,Ss=va.length;_s<Ss;++_s)va[_s]=Ms[_s+32768];if(this.g.push(va),this.l+=va.length,t$2)Ms.set(Ms.subarray(_a,_a+32768));else for(_s=0;32768>_s;++_s)Ms[_s]=Ms[_a+_s];return this.b=32768,Ms};w$3.prototype.z=function(va){var _a,_s=this.input.length/this.a+1|0,Ss,Ms,Cs,Ts=this.input,Bs=this.c;return va&&(typeof va.p=="number"&&(_s=va.p),typeof va.u=="number"&&(_s+=va.u)),2>_s?(Ss=(Ts.length-this.a)/this.o[2],Cs=258*(Ss/2)|0,Ms=Cs<Bs.length?Bs.length+Cs:Bs.length<<1):Ms=Bs.length*_s,t$2?(_a=new Uint8Array(Ms),_a.set(Bs)):_a=Bs,this.c=_a};w$3.prototype.n=function(){var va=0,_a=this.c,_s=this.g,Ss,Ms=new(t$2?Uint8Array:Array)(this.l+(this.b-32768)),Cs,Ts,Bs,Ps;if(_s.length===0)return t$2?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(Cs=0,Ts=_s.length;Cs<Ts;++Cs)for(Ss=_s[Cs],Bs=0,Ps=Ss.length;Bs<Ps;++Bs)Ms[va++]=Ss[Bs];for(Cs=32768,Ts=this.b;Cs<Ts;++Cs)Ms[va++]=_a[Cs];return this.g=[],this.buffer=Ms};w$3.prototype.v=function(){var va,_a=this.b;return t$2?this.r?(va=new Uint8Array(_a),va.set(this.c.subarray(0,_a))):va=this.c.subarray(0,_a):(this.c.length>_a&&(this.c.length=_a),va=this.c),this.buffer=va};function W$1(va,_a){var _s,Ss;switch(this.input=va,this.a=0,(_a||!(_a={}))&&(_a.index&&(this.a=_a.index),_a.verify&&(this.A=_a.verify)),_s=va[this.a++],Ss=va[this.a++],_s&15){case ha:this.method=ha;break;default:throw Error("unsupported compression method")}if(((_s<<8)+Ss)%31!==0)throw Error("invalid fcheck flag:"+((_s<<8)+Ss)%31);if(Ss&32)throw Error("fdict flag is not supported");this.q=new w$3(va,{index:this.a,bufferSize:_a.bufferSize,bufferType:_a.bufferType,resize:_a.resize})}W$1.prototype.k=function(){var va=this.input,_a,_s;if(_a=this.q.k(),this.a=this.q.a,this.A){_s=(va[this.a++]<<24|va[this.a++]<<16|va[this.a++]<<8|va[this.a++])>>>0;var Ss=_a;if(typeof Ss=="string"){var Ms=Ss.split(""),Cs,Ts;for(Cs=0,Ts=Ms.length;Cs<Ts;Cs++)Ms[Cs]=(Ms[Cs].charCodeAt(0)&255)>>>0;Ss=Ms}for(var Bs=1,Ps=0,Ls=Ss.length,Rs,$s=0;0<Ls;){Rs=1024<Ls?1024:Ls,Ls-=Rs;do Bs+=Ss[$s++],Ps+=Bs;while(--Rs);Bs%=65521,Ps%=65521}if(_s!==(Ps<<16|Bs)>>>0)throw Error("invalid adler-32 checksum")}return _a};var ha=8;r$3("Zlib.Inflate",W$1);r$3("Zlib.Inflate.prototype.decompress",W$1.prototype.k);var X={ADAPTIVE:B$1.s,BLOCK:B$1.t},Y,Z,$,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(ia=Y.length;$<ia;++$)Z=Y[$],r$3("Zlib.Inflate.BufferType."+Z,X[Z]);var Zlib=mod.Zlib,NURBSUtils={findSpan:function(va,_a,_s){var Ss=_s.length-va-1;if(_a>=_s[Ss])return Ss-1;if(_a<=_s[va])return va;for(var Ms=va,Cs=Ss,Ts=Math.floor((Ms+Cs)/2);_a<_s[Ts]||_a>=_s[Ts+1];)_a<_s[Ts]?Cs=Ts:Ms=Ts,Ts=Math.floor((Ms+Cs)/2);return Ts},calcBasisFunctions:function(va,_a,_s,Ss){var Ms=[],Cs=[],Ts=[];Ms[0]=1;for(var Bs=1;Bs<=_s;++Bs){Cs[Bs]=_a-Ss[va+1-Bs],Ts[Bs]=Ss[va+Bs]-_a;for(var Ps=0,Ls=0;Ls<Bs;++Ls){var Rs=Ts[Ls+1],$s=Cs[Bs-Ls],Fs=Ms[Ls]/(Rs+$s);Ms[Ls]=Ps+Rs*Fs,Ps=$s*Fs}Ms[Bs]=Ps}return Ms},calcBSplinePoint:function(va,_a,_s,Ss){for(var Ms=this.findSpan(va,Ss,_a),Cs=this.calcBasisFunctions(Ms,Ss,va,_a),Ts=new Vector4(0,0,0,0),Bs=0;Bs<=va;++Bs){var Ps=_s[Ms-va+Bs],Ls=Cs[Bs],Rs=Ps.w*Ls;Ts.x+=Ps.x*Rs,Ts.y+=Ps.y*Rs,Ts.z+=Ps.z*Rs,Ts.w+=Ps.w*Ls}return Ts},calcBasisFunctionDerivatives:function(va,_a,_s,Ss,Ms){for(var Cs=[],Ts=0;Ts<=_s;++Ts)Cs[Ts]=0;for(var Bs=[],Ts=0;Ts<=Ss;++Ts)Bs[Ts]=Cs.slice(0);for(var Ps=[],Ts=0;Ts<=_s;++Ts)Ps[Ts]=Cs.slice(0);Ps[0][0]=1;for(var Ls=Cs.slice(0),Rs=Cs.slice(0),$s=1;$s<=_s;++$s){Ls[$s]=_a-Ms[va+1-$s],Rs[$s]=Ms[va+$s]-_a;for(var Fs=0,Js=0;Js<$s;++Js){var Os=Rs[Js+1],Gs=Ls[$s-Js];Ps[$s][Js]=Os+Gs;var Ns=Ps[Js][$s-1]/Ps[$s][Js];Ps[Js][$s]=Fs+Os*Ns,Fs=Gs*Ns}Ps[$s][$s]=Fs}for(var $s=0;$s<=_s;++$s)Bs[0][$s]=Ps[$s][_s];for(var Js=0;Js<=_s;++Js){for(var Vs=0,Ds=1,ks=[],Ts=0;Ts<=_s;++Ts)ks[Ts]=Cs.slice(0);ks[0][0]=1;for(var Us=1;Us<=Ss;++Us){var zs=0,Ws=Js-Us,qs=_s-Us;Js>=Us&&(ks[Ds][0]=ks[Vs][0]/Ps[qs+1][Ws],zs=ks[Ds][0]*Ps[Ws][qs]);for(var Zs=Ws>=-1?1:-Ws,el=Js-1<=qs?Us-1:_s-Js,$s=Zs;$s<=el;++$s)ks[Ds][$s]=(ks[Vs][$s]-ks[Vs][$s-1])/Ps[qs+1][Ws+$s],zs+=ks[Ds][$s]*Ps[Ws+$s][qs];Js<=qs&&(ks[Ds][Us]=-ks[Vs][Us-1]/Ps[qs+1][Js],zs+=ks[Ds][Us]*Ps[Js][qs]),Bs[Us][Js]=zs;var $s=Vs;Vs=Ds,Ds=$s}}for(var Js=_s,Us=1;Us<=Ss;++Us){for(var $s=0;$s<=_s;++$s)Bs[Us][$s]*=Js;Js*=_s-Us}return Bs},calcBSplineDerivatives:function(va,_a,_s,Ss,Ms){for(var Cs=Ms<va?Ms:va,Ts=[],Bs=this.findSpan(va,Ss,_a),Ps=this.calcBasisFunctionDerivatives(Bs,Ss,va,Cs,_a),Ls=[],Rs=0;Rs<_s.length;++Rs){var $s=_s[Rs].clone(),Fs=$s.w;$s.x*=Fs,$s.y*=Fs,$s.z*=Fs,Ls[Rs]=$s}for(var Os=0;Os<=Cs;++Os){for(var $s=Ls[Bs-va].clone().multiplyScalar(Ps[Os][0]),Gs=1;Gs<=va;++Gs)$s.add(Ls[Bs-va+Gs].clone().multiplyScalar(Ps[Os][Gs]));Ts[Os]=$s}for(var Os=Cs+1;Os<=Ms+1;++Os)Ts[Os]=new Vector4(0,0,0);return Ts},calcKoverI:function(va,_a){for(var _s=1,Ss=2;Ss<=va;++Ss)_s*=Ss;for(var Ms=1,Ss=2;Ss<=_a;++Ss)Ms*=Ss;for(var Ss=2;Ss<=va-_a;++Ss)Ms*=Ss;return _s/Ms},calcRationalCurveDerivatives:function(va){for(var _a=va.length,_s=[],Ss=[],Ms=0;Ms<_a;++Ms){var Cs=va[Ms];_s[Ms]=new Vector3(Cs.x,Cs.y,Cs.z),Ss[Ms]=Cs.w}for(var Ts=[],Bs=0;Bs<_a;++Bs){for(var Ps=_s[Bs].clone(),Ms=1;Ms<=Bs;++Ms)Ps.sub(Ts[Bs-Ms].clone().multiplyScalar(this.calcKoverI(Bs,Ms)*Ss[Ms]));Ts[Bs]=Ps.divideScalar(Ss[0])}return Ts},calcNURBSDerivatives:function(va,_a,_s,Ss,Ms){var Cs=this.calcBSplineDerivatives(va,_a,_s,Ss,Ms);return this.calcRationalCurveDerivatives(Cs)},calcSurfacePoint:function(va,_a,_s,Ss,Ms,Cs,Ts,Bs){for(var Ps=this.findSpan(va,Cs,_s),Ls=this.findSpan(_a,Ts,Ss),Rs=this.calcBasisFunctions(Ps,Cs,va,_s),$s=this.calcBasisFunctions(Ls,Ts,_a,Ss),Fs=[],Os=0;Os<=_a;++Os){Fs[Os]=new Vector4(0,0,0,0);for(var Gs=0;Gs<=va;++Gs){var Ns=Ms[Ps-va+Gs][Ls-_a+Os].clone(),Vs=Ns.w;Ns.x*=Vs,Ns.y*=Vs,Ns.z*=Vs,Fs[Os].add(Ns.multiplyScalar(Rs[Gs]))}}for(var Ds=new Vector4(0,0,0,0),Os=0;Os<=_a;++Os)Ds.add(Fs[Os].multiplyScalar($s[Os]));Ds.divideScalar(Ds.w),Bs.set(Ds.x,Ds.y,Ds.z)}},NURBSCurve=function(va,_a,_s,Ss,Ms){Curve.call(this),this.degree=va,this.knots=_a,this.controlPoints=[],this.startKnot=Ss||0,this.endKnot=Ms||this.knots.length-1;for(var Cs=0;Cs<_s.length;++Cs){var Ts=_s[Cs];this.controlPoints[Cs]=new Vector4(Ts.x,Ts.y,Ts.z,Ts.w)}};NURBSCurve.prototype=Object.create(Curve.prototype);NURBSCurve.prototype.constructor=NURBSCurve;NURBSCurve.prototype.getPoint=function(va,_a){var _s=_a||new Vector3,Ss=this.knots[this.startKnot]+va*(this.knots[this.endKnot]-this.knots[this.startKnot]),Ms=NURBSUtils.calcBSplinePoint(this.degree,this.knots,this.controlPoints,Ss);return Ms.w!=1&&Ms.divideScalar(Ms.w),_s.set(Ms.x,Ms.y,Ms.z)};NURBSCurve.prototype.getTangent=function(va,_a){var _s=_a||new Vector3,Ss=this.knots[0]+va*(this.knots[this.knots.length-1]-this.knots[0]),Ms=NURBSUtils.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,Ss,1);return _s.copy(Ms[1]).normalize(),_s};var FBXLoader=function(){var va,_a,_s;function Ss(Hs){Loader.call(this,Hs)}Ss.prototype=Object.assign(Object.create(Loader.prototype),{constructor:Ss,load:function(Hs,Qs,js,Ks){var Xs=this,Ys=Xs.path===""?LoaderUtils.extractUrlBase(Hs):Xs.path,rl=new FileLoader(this.manager);rl.setPath(Xs.path),rl.setResponseType("arraybuffer"),rl.load(Hs,function(tl){try{Qs(Xs.parse(tl,Ys))}catch(il){Ks?Ks(il):console.error(il),Xs.manager.itemError(Hs)}},js,Ks)},parse:function(Hs,Qs){if($s(Hs))va=new Ps().parse(Hs);else{var js=qs(Hs);if(!Fs(js))throw new Error("THREE.FBXLoader: Unknown format.");if(Os(js)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Os(js));va=new Bs().parse(js)}var Ks=new TextureLoader(this.manager).setPath(this.resourcePath||Qs).setCrossOrigin(this.crossOrigin);return new Ms(Ks,this.manager).parse(va)}});function Ms(Hs,Qs){this.textureLoader=Hs,this.manager=Qs}Ms.prototype={constructor:Ms,parse:function(){_a=this.parseConnections();var Hs=this.parseImages(),Qs=this.parseTextures(Hs),js=this.parseMaterials(Qs),Ks=this.parseDeformers(),Xs=new Cs().parse(Ks);return this.parseScene(Ks,Xs,js),_s},parseConnections:function(){var Hs=new Map;if("Connections"in va){var Qs=va.Connections.connections;Qs.forEach(function(js){var Ks=js[0],Xs=js[1],Ys=js[2];Hs.has(Ks)||Hs.set(Ks,{parents:[],children:[]});var rl={ID:Xs,relationship:Ys};Hs.get(Ks).parents.push(rl),Hs.has(Xs)||Hs.set(Xs,{parents:[],children:[]});var tl={ID:Ks,relationship:Ys};Hs.get(Xs).children.push(tl)})}return Hs},parseImages:function(){var Hs={},Qs={};if("Video"in va.Objects){var js=va.Objects.Video;for(var Ks in js){var Xs=js[Ks],Ys=parseInt(Ks);if(Hs[Ys]=Xs.RelativeFilename||Xs.Filename,"Content"in Xs){var rl=Xs.Content instanceof ArrayBuffer&&Xs.Content.byteLength>0,tl=typeof Xs.Content=="string"&&Xs.Content!=="";if(rl||tl){var il=this.parseImage(js[Ks]);Qs[Xs.RelativeFilename||Xs.Filename]=il}}}}for(var Ys in Hs){var ll=Hs[Ys];Qs[ll]!==void 0?Hs[Ys]=Qs[ll]:Hs[Ys]=Hs[Ys].split("\\").pop()}return Hs},parseImage:function(Hs){var Qs=Hs.Content,js=Hs.RelativeFilename||Hs.Filename,Ks=js.slice(js.lastIndexOf(".")+1).toLowerCase(),Xs;switch(Ks){case"bmp":Xs="image/bmp";break;case"jpg":case"jpeg":Xs="image/jpeg";break;case"png":Xs="image/png";break;case"tif":Xs="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",js),Xs="image/tga";break;default:console.warn('FBXLoader: Image type "'+Ks+'" is not supported.');return}if(typeof Qs=="string")return"data:"+Xs+";base64,"+Qs;var Ys=new Uint8Array(Qs);return window.URL.createObjectURL(new Blob([Ys],{type:Xs}))},parseTextures:function(Hs){var Qs=new Map;if("Texture"in va.Objects){var js=va.Objects.Texture;for(var Ks in js){var Xs=this.parseTexture(js[Ks],Hs);Qs.set(parseInt(Ks),Xs)}}return Qs},parseTexture:function(Hs,Qs){var js=this.loadTexture(Hs,Qs);js.ID=Hs.id,js.name=Hs.attrName;var Ks=Hs.WrapModeU,Xs=Hs.WrapModeV,Ys=Ks!==void 0?Ks.value:0,rl=Xs!==void 0?Xs.value:0;if(js.wrapS=Ys===0?RepeatWrapping:ClampToEdgeWrapping,js.wrapT=rl===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in Hs){var tl=Hs.Scaling.value;js.repeat.x=tl[0],js.repeat.y=tl[1]}return js},loadTexture:function(Hs,Qs){var js,Ks=this.textureLoader.path,Xs=_a.get(Hs.id).children;Xs!==void 0&&Xs.length>0&&Qs[Xs[0].ID]!==void 0&&(js=Qs[Xs[0].ID],(js.indexOf("blob:")===0||js.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var Ys,rl=Hs.FileName.slice(-3).toLowerCase();if(rl==="tga"){var tl=this.manager.getHandler(".tga");tl===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",Hs.RelativeFilename),Ys=new Texture):Ys=tl.load(js)}else rl==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",Hs.RelativeFilename),Ys=new Texture):Ys=this.textureLoader.load(js);return this.textureLoader.setPath(Ks),Ys},parseMaterials:function(Hs){var Qs=new Map;if("Material"in va.Objects){var js=va.Objects.Material;for(var Ks in js){var Xs=this.parseMaterial(js[Ks],Hs);Xs!==null&&Qs.set(parseInt(Ks),Xs)}}return Qs},parseMaterial:function(Hs,Qs){var js=Hs.id,Ks=Hs.attrName,Xs=Hs.ShadingModel;if(typeof Xs=="object"&&(Xs=Xs.value),!_a.has(js))return null;var Ys=this.parseParameters(Hs,Qs,js),rl;switch(Xs.toLowerCase()){case"phong":rl=new MeshPhongMaterial;break;case"lambert":rl=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',Xs),rl=new MeshPhongMaterial;break}return rl.setValues(Ys),rl.name=Ks,rl},parseParameters:function(Hs,Qs,js){var Ks={};Hs.BumpFactor&&(Ks.bumpScale=Hs.BumpFactor.value),Hs.Diffuse?Ks.color=new Color().fromArray(Hs.Diffuse.value):Hs.DiffuseColor&&Hs.DiffuseColor.type==="Color"&&(Ks.color=new Color().fromArray(Hs.DiffuseColor.value)),Hs.DisplacementFactor&&(Ks.displacementScale=Hs.DisplacementFactor.value),Hs.Emissive?Ks.emissive=new Color().fromArray(Hs.Emissive.value):Hs.EmissiveColor&&Hs.EmissiveColor.type==="Color"&&(Ks.emissive=new Color().fromArray(Hs.EmissiveColor.value)),Hs.EmissiveFactor&&(Ks.emissiveIntensity=parseFloat(Hs.EmissiveFactor.value)),Hs.Opacity&&(Ks.opacity=parseFloat(Hs.Opacity.value)),Ks.opacity<1&&(Ks.transparent=!0),Hs.ReflectionFactor&&(Ks.reflectivity=Hs.ReflectionFactor.value),Hs.Shininess&&(Ks.shininess=Hs.Shininess.value),Hs.Specular?Ks.specular=new Color().fromArray(Hs.Specular.value):Hs.SpecularColor&&Hs.SpecularColor.type==="Color"&&(Ks.specular=new Color().fromArray(Hs.SpecularColor.value));var Xs=this;return _a.get(js).children.forEach(function(Ys){var rl=Ys.relationship;switch(rl){case"Bump":Ks.bumpMap=Xs.getTexture(Qs,Ys.ID);break;case"Maya|TEX_ao_map":Ks.aoMap=Xs.getTexture(Qs,Ys.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":Ks.map=Xs.getTexture(Qs,Ys.ID),Ks.map.encoding=sRGBEncoding;break;case"DisplacementColor":Ks.displacementMap=Xs.getTexture(Qs,Ys.ID);break;case"EmissiveColor":Ks.emissiveMap=Xs.getTexture(Qs,Ys.ID),Ks.emissiveMap.encoding=sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":Ks.normalMap=Xs.getTexture(Qs,Ys.ID);break;case"ReflectionColor":Ks.envMap=Xs.getTexture(Qs,Ys.ID),Ks.envMap.mapping=EquirectangularReflectionMapping,Ks.envMap.encoding=sRGBEncoding;break;case"SpecularColor":Ks.specularMap=Xs.getTexture(Qs,Ys.ID),Ks.specularMap.encoding=sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":Ks.alphaMap=Xs.getTexture(Qs,Ys.ID),Ks.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",rl);break}}),Ks},getTexture:function(Hs,Qs){return"LayeredTexture"in va.Objects&&Qs in va.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),Qs=_a.get(Qs).children[0].ID),Hs.get(Qs)},parseDeformers:function(){var Hs={},Qs={};if("Deformer"in va.Objects){var js=va.Objects.Deformer;for(var Ks in js){var Xs=js[Ks],Ys=_a.get(parseInt(Ks));if(Xs.attrType==="Skin"){var rl=this.parseSkeleton(Ys,js);rl.ID=Ks,Ys.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),rl.geometryID=Ys.parents[0].ID,Hs[Ks]=rl}else if(Xs.attrType==="BlendShape"){var tl={id:Ks};tl.rawTargets=this.parseMorphTargets(Ys,js),tl.id=Ks,Ys.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),Qs[Ks]=tl}}}return{skeletons:Hs,morphTargets:Qs}},parseSkeleton:function(Hs,Qs){var js=[];return Hs.children.forEach(function(Ks){var Xs=Qs[Ks.ID];if(Xs.attrType==="Cluster"){var Ys={ID:Ks.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(Xs.TransformLink.a)};"Indexes"in Xs&&(Ys.indices=Xs.Indexes.a,Ys.weights=Xs.Weights.a),js.push(Ys)}}),{rawBones:js,bones:[]}},parseMorphTargets:function(Hs,Qs){for(var js=[],Ks=0;Ks<Hs.children.length;Ks++){var Xs=Hs.children[Ks],Ys=Qs[Xs.ID],rl={name:Ys.attrName,initialWeight:Ys.DeformPercent,id:Ys.id,fullWeights:Ys.FullWeights.a};if(Ys.attrType!=="BlendShapeChannel")return;rl.geoID=_a.get(parseInt(Xs.ID)).children.filter(function(tl){return tl.relationship===void 0})[0].ID,js.push(rl)}return js},parseScene:function(Hs,Qs,js){_s=new Group$1;var Ks=this.parseModels(Hs.skeletons,Qs,js),Xs=va.Objects.Model,Ys=this;Ks.forEach(function(tl){var il=Xs[tl.ID];Ys.setLookAtProperties(tl,il);var ll=_a.get(tl.ID).parents;ll.forEach(function(cl){var al=Ks.get(cl.ID);al!==void 0&&al.add(tl)}),tl.parent===null&&_s.add(tl)}),this.bindSkeleton(Hs.skeletons,Qs,Ks),this.createAmbientLight(),this.setupMorphMaterials(),_s.traverse(function(tl){if(tl.userData.transformData){tl.parent&&(tl.userData.transformData.parentMatrixWorld=tl.parent.matrix);var il=Us(tl.userData.transformData);tl.applyMatrix4(il)}});var rl=new Ts().parse();_s.children.length===1&&_s.children[0].isGroup&&(_s.children[0].animations=rl,_s=_s.children[0]),_s.animations=rl},parseModels:function(Hs,Qs,js){var Ks=new Map,Xs=va.Objects.Model;for(var Ys in Xs){var rl=parseInt(Ys),tl=Xs[Ys],il=_a.get(rl),ll=this.buildSkeleton(il,Hs,rl,tl.attrName);if(!ll){switch(tl.attrType){case"Camera":ll=this.createCamera(il);break;case"Light":ll=this.createLight(il);break;case"Mesh":ll=this.createMesh(il,Qs,js);break;case"NurbsCurve":ll=this.createCurve(il,Qs);break;case"LimbNode":case"Root":ll=new Bone;break;case"Null":default:ll=new Group$1;break}ll.name=tl.attrName?PropertyBinding.sanitizeNodeName(tl.attrName):"",ll.ID=rl}this.getTransformData(ll,tl),Ks.set(rl,ll)}return Ks},buildSkeleton:function(Hs,Qs,js,Ks){var Xs=null;return Hs.parents.forEach(function(Ys){for(var rl in Qs){var tl=Qs[rl];tl.rawBones.forEach(function(il,ll){if(il.ID===Ys.ID){var cl=Xs;Xs=new Bone,Xs.matrixWorld.copy(il.transformLink),Xs.name=Ks?PropertyBinding.sanitizeNodeName(Ks):"",Xs.ID=js,tl.bones[ll]=Xs,cl!==null&&Xs.add(cl)}})}}),Xs},createCamera:function(Hs){var Qs,js;if(Hs.children.forEach(function(al){var dl=va.Objects.NodeAttribute[al.ID];dl!==void 0&&(js=dl)}),js===void 0)Qs=new Object3D;else{var Ks=0;js.CameraProjectionType!==void 0&&js.CameraProjectionType.value===1&&(Ks=1);var Xs=1;js.NearPlane!==void 0&&(Xs=js.NearPlane.value/1e3);var Ys=1e3;js.FarPlane!==void 0&&(Ys=js.FarPlane.value/1e3);var rl=window.innerWidth,tl=window.innerHeight;js.AspectWidth!==void 0&&js.AspectHeight!==void 0&&(rl=js.AspectWidth.value,tl=js.AspectHeight.value);var il=rl/tl,ll=45;js.FieldOfView!==void 0&&(ll=js.FieldOfView.value);var cl=js.FocalLength?js.FocalLength.value:null;switch(Ks){case 0:Qs=new PerspectiveCamera(ll,il,Xs,Ys),cl!==null&&Qs.setFocalLength(cl);break;case 1:Qs=new OrthographicCamera(-rl/2,rl/2,tl/2,-tl/2,Xs,Ys);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+Ks+"."),Qs=new Object3D;break}}return Qs},createLight:function(Hs){var Qs,js;if(Hs.children.forEach(function(cl){var al=va.Objects.NodeAttribute[cl.ID];al!==void 0&&(js=al)}),js===void 0)Qs=new Object3D;else{var Ks;js.LightType===void 0?Ks=0:Ks=js.LightType.value;var Xs=16777215;js.Color!==void 0&&(Xs=new Color().fromArray(js.Color.value));var Ys=js.Intensity===void 0?1:js.Intensity.value/100;js.CastLightOnObject!==void 0&&js.CastLightOnObject.value===0&&(Ys=0);var rl=0;js.FarAttenuationEnd!==void 0&&(js.EnableFarAttenuation!==void 0&&js.EnableFarAttenuation.value===0?rl=0:rl=js.FarAttenuationEnd.value);var tl=1;switch(Ks){case 0:Qs=new PointLight(Xs,Ys,rl,tl);break;case 1:Qs=new DirectionalLight(Xs,Ys);break;case 2:var il=Math.PI/3;js.InnerAngle!==void 0&&(il=MathUtils.degToRad(js.InnerAngle.value));var ll=0;js.OuterAngle!==void 0&&(ll=MathUtils.degToRad(js.OuterAngle.value),ll=Math.max(ll,1)),Qs=new SpotLight(Xs,Ys,rl,il,ll,tl);break;default:console.warn("THREE.FBXLoader: Unknown light type "+js.LightType.value+", defaulting to a PointLight."),Qs=new PointLight(Xs,Ys);break}js.CastShadows!==void 0&&js.CastShadows.value===1&&(Qs.castShadow=!0)}return Qs},createMesh:function(Hs,Qs,js){var Ks,Xs=null,Ys=null,rl=[];return Hs.children.forEach(function(tl){Qs.has(tl.ID)&&(Xs=Qs.get(tl.ID)),js.has(tl.ID)&&rl.push(js.get(tl.ID))}),rl.length>1?Ys=rl:rl.length>0?Ys=rl[0]:(Ys=new MeshPhongMaterial({color:13421772}),rl.push(Ys)),"color"in Xs.attributes&&rl.forEach(function(tl){tl.vertexColors=!0}),Xs.FBX_Deformer?(rl.forEach(function(tl){tl.skinning=!0}),Ks=new SkinnedMesh(Xs,Ys),Ks.normalizeSkinWeights()):Ks=new Mesh(Xs,Ys),Ks},createCurve:function(Hs,Qs){var js=Hs.children.reduce(function(Xs,Ys){return Qs.has(Ys.ID)&&(Xs=Qs.get(Ys.ID)),Xs},null),Ks=new LineBasicMaterial({color:3342591,linewidth:1});return new Line$1(js,Ks)},getTransformData:function(Hs,Qs){var js={};"InheritType"in Qs&&(js.inheritType=parseInt(Qs.InheritType.value)),"RotationOrder"in Qs?js.eulerOrder=zs(Qs.RotationOrder.value):js.eulerOrder="ZYX","Lcl_Translation"in Qs&&(js.translation=Qs.Lcl_Translation.value),"PreRotation"in Qs&&(js.preRotation=Qs.PreRotation.value),"Lcl_Rotation"in Qs&&(js.rotation=Qs.Lcl_Rotation.value),"PostRotation"in Qs&&(js.postRotation=Qs.PostRotation.value),"Lcl_Scaling"in Qs&&(js.scale=Qs.Lcl_Scaling.value),"ScalingOffset"in Qs&&(js.scalingOffset=Qs.ScalingOffset.value),"ScalingPivot"in Qs&&(js.scalingPivot=Qs.ScalingPivot.value),"RotationOffset"in Qs&&(js.rotationOffset=Qs.RotationOffset.value),"RotationPivot"in Qs&&(js.rotationPivot=Qs.RotationPivot.value),Hs.userData.transformData=js},setLookAtProperties:function(Hs,Qs){if("LookAtProperty"in Qs){var js=_a.get(Hs.ID).children;js.forEach(function(Ks){if(Ks.relationship==="LookAtProperty"){var Xs=va.Objects.Model[Ks.ID];if("Lcl_Translation"in Xs){var Ys=Xs.Lcl_Translation.value;Hs.target!==void 0?(Hs.target.position.fromArray(Ys),_s.add(Hs.target)):Hs.lookAt(new Vector3().fromArray(Ys))}}})}},bindSkeleton:function(Hs,Qs,js){var Ks=this.parsePoseNodes();for(var Xs in Hs){var Ys=Hs[Xs],rl=_a.get(parseInt(Ys.ID)).parents;rl.forEach(function(tl){if(Qs.has(tl.ID)){var il=tl.ID,ll=_a.get(il);ll.parents.forEach(function(cl){if(js.has(cl.ID)){var al=js.get(cl.ID);al.bind(new Skeleton(Ys.bones),Ks[cl.ID])}})}})}},parsePoseNodes:function(){var Hs={};if("Pose"in va.Objects){var Qs=va.Objects.Pose;for(var js in Qs)if(Qs[js].attrType==="BindPose"){var Ks=Qs[js].PoseNode;Array.isArray(Ks)?Ks.forEach(function(Xs){Hs[Xs.Node]=new Matrix4().fromArray(Xs.Matrix.a)}):Hs[Ks.Node]=new Matrix4().fromArray(Ks.Matrix.a)}}return Hs},createAmbientLight:function(){if("GlobalSettings"in va&&"AmbientColor"in va.GlobalSettings){var Hs=va.GlobalSettings.AmbientColor.value,Qs=Hs[0],js=Hs[1],Ks=Hs[2];if(Qs!==0||js!==0||Ks!==0){var Xs=new Color(Qs,js,Ks);_s.add(new AmbientLight(Xs,1))}}},setupMorphMaterials:function(){var Hs=this;_s.traverse(function(Qs){Qs.isMesh&&Qs.geometry.morphAttributes.position&&Qs.geometry.morphAttributes.position.length&&(Array.isArray(Qs.material)?Qs.material.forEach(function(js,Ks){Hs.setupMorphMaterial(Qs,js,Ks)}):Hs.setupMorphMaterial(Qs,Qs.material))})},setupMorphMaterial:function(Hs,Qs,js){var Ks=Hs.uuid,Xs=Qs.uuid,Ys=!1;if(_s.traverse(function(tl){tl.isMesh&&(Array.isArray(tl.material)?tl.material.forEach(function(il){il.uuid===Xs&&tl.uuid!==Ks&&(Ys=!0)}):tl.material.uuid===Xs&&tl.uuid!==Ks&&(Ys=!0))}),Ys===!0){var rl=Qs.clone();rl.morphTargets=!0,js===void 0?Hs.material=rl:Hs.material[js]=rl}else Qs.morphTargets=!0}};function Cs(){}Cs.prototype={constructor:Cs,parse:function(Hs){var Qs=new Map;if("Geometry"in va.Objects){var js=va.Objects.Geometry;for(var Ks in js){var Xs=_a.get(parseInt(Ks)),Ys=this.parseGeometry(Xs,js[Ks],Hs);Qs.set(parseInt(Ks),Ys)}}return Qs},parseGeometry:function(Hs,Qs,js){switch(Qs.attrType){case"Mesh":return this.parseMeshGeometry(Hs,Qs,js);case"NurbsCurve":return this.parseNurbsGeometry(Qs)}},parseMeshGeometry:function(Hs,Qs,js){var Ks=js.skeletons,Xs=[],Ys=Hs.parents.map(function(cl){return va.Objects.Model[cl.ID]});if(Ys.length!==0){var rl=Hs.children.reduce(function(cl,al){return Ks[al.ID]!==void 0&&(cl=Ks[al.ID]),cl},null);Hs.children.forEach(function(cl){js.morphTargets[cl.ID]!==void 0&&Xs.push(js.morphTargets[cl.ID])});var tl=Ys[0],il={};"RotationOrder"in tl&&(il.eulerOrder=zs(tl.RotationOrder.value)),"InheritType"in tl&&(il.inheritType=parseInt(tl.InheritType.value)),"GeometricTranslation"in tl&&(il.translation=tl.GeometricTranslation.value),"GeometricRotation"in tl&&(il.rotation=tl.GeometricRotation.value),"GeometricScaling"in tl&&(il.scale=tl.GeometricScaling.value);var ll=Us(il);return this.genGeometry(Qs,rl,Xs,ll)}},genGeometry:function(Hs,Qs,js,Ks){var Xs=new BufferGeometry;Hs.attrName&&(Xs.name=Hs.attrName);var Ys=this.parseGeoNode(Hs,Qs),rl=this.genBuffers(Ys),tl=new Float32BufferAttribute(rl.vertex,3);if(tl.applyMatrix4(Ks),Xs.setAttribute("position",tl),rl.colors.length>0&&Xs.setAttribute("color",new Float32BufferAttribute(rl.colors,3)),Qs&&(Xs.setAttribute("skinIndex",new Uint16BufferAttribute(rl.weightsIndices,4)),Xs.setAttribute("skinWeight",new Float32BufferAttribute(rl.vertexWeights,4)),Xs.FBX_Deformer=Qs),rl.normal.length>0){var il=new Matrix3().getNormalMatrix(Ks),ll=new Float32BufferAttribute(rl.normal,3);ll.applyNormalMatrix(il),Xs.setAttribute("normal",ll)}if(rl.uvs.forEach(function(xl,wl){var Al="uv"+(wl+1).toString();wl===0&&(Al="uv"),Xs.setAttribute(Al,new Float32BufferAttribute(rl.uvs[wl],2))}),Ys.material&&Ys.material.mappingType!=="AllSame"){var cl=rl.materialIndex[0],al=0;if(rl.materialIndex.forEach(function(xl,wl){xl!==cl&&(Xs.addGroup(al,wl-al,cl),cl=xl,al=wl)}),Xs.groups.length>0){var dl=Xs.groups[Xs.groups.length-1],yl=dl.start+dl.count;yl!==rl.materialIndex.length&&Xs.addGroup(yl,rl.materialIndex.length-yl,cl)}Xs.groups.length===0&&Xs.addGroup(0,rl.materialIndex.length,rl.materialIndex[0])}return this.addMorphTargets(Xs,Hs,js,Ks),Xs},parseGeoNode:function(Hs,Qs){var js={};if(js.vertexPositions=Hs.Vertices!==void 0?Hs.Vertices.a:[],js.vertexIndices=Hs.PolygonVertexIndex!==void 0?Hs.PolygonVertexIndex.a:[],Hs.LayerElementColor&&(js.color=this.parseVertexColors(Hs.LayerElementColor[0])),Hs.LayerElementMaterial&&(js.material=this.parseMaterialIndices(Hs.LayerElementMaterial[0])),Hs.LayerElementNormal&&(js.normal=this.parseNormals(Hs.LayerElementNormal[0])),Hs.LayerElementUV){js.uv=[];for(var Ks=0;Hs.LayerElementUV[Ks];)js.uv.push(this.parseUVs(Hs.LayerElementUV[Ks])),Ks++}return js.weightTable={},Qs!==null&&(js.skeleton=Qs,Qs.rawBones.forEach(function(Xs,Ys){Xs.indices.forEach(function(rl,tl){js.weightTable[rl]===void 0&&(js.weightTable[rl]=[]),js.weightTable[rl].push({id:Ys,weight:Xs.weights[tl]})})})),js},genBuffers:function(Hs){var Qs={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},js=0,Ks=0,Xs=!1,Ys=[],rl=[],tl=[],il=[],ll=[],cl=[],al=this;return Hs.vertexIndices.forEach(function(dl,yl){var xl=!1;dl<0&&(dl=dl^-1,xl=!0);var wl=[],Al=[];if(Ys.push(dl*3,dl*3+1,dl*3+2),Hs.color){var bl=Vs(yl,js,dl,Hs.color);tl.push(bl[0],bl[1],bl[2])}if(Hs.skeleton){if(Hs.weightTable[dl]!==void 0&&Hs.weightTable[dl].forEach(function(Rl){Al.push(Rl.weight),wl.push(Rl.id)}),Al.length>4){Xs||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),Xs=!0);var Bl=[0,0,0,0],Cl=[0,0,0,0];Al.forEach(function(Rl,Fl){var jl=Rl,Vl=wl[Fl];Cl.forEach(function(Wl,ul,pl){if(jl>Wl){pl[ul]=jl,jl=Wl;var kl=Bl[ul];Bl[ul]=Vl,Vl=kl}})}),wl=Bl,Al=Cl}for(;Al.length<4;)Al.push(0),wl.push(0);for(var Sl=0;Sl<4;++Sl)ll.push(Al[Sl]),cl.push(wl[Sl])}if(Hs.normal){var bl=Vs(yl,js,dl,Hs.normal);rl.push(bl[0],bl[1],bl[2])}if(Hs.material&&Hs.material.mappingType!=="AllSame")var El=Vs(yl,js,dl,Hs.material)[0];Hs.uv&&Hs.uv.forEach(function(Rl,Fl){var jl=Vs(yl,js,dl,Rl);il[Fl]===void 0&&(il[Fl]=[]),il[Fl].push(jl[0]),il[Fl].push(jl[1])}),Ks++,xl&&(al.genFace(Qs,Hs,Ys,El,rl,tl,il,ll,cl,Ks),js++,Ks=0,Ys=[],rl=[],tl=[],il=[],ll=[],cl=[])}),Qs},genFace:function(Hs,Qs,js,Ks,Xs,Ys,rl,tl,il,ll){for(var cl=2;cl<ll;cl++)Hs.vertex.push(Qs.vertexPositions[js[0]]),Hs.vertex.push(Qs.vertexPositions[js[1]]),Hs.vertex.push(Qs.vertexPositions[js[2]]),Hs.vertex.push(Qs.vertexPositions[js[(cl-1)*3]]),Hs.vertex.push(Qs.vertexPositions[js[(cl-1)*3+1]]),Hs.vertex.push(Qs.vertexPositions[js[(cl-1)*3+2]]),Hs.vertex.push(Qs.vertexPositions[js[cl*3]]),Hs.vertex.push(Qs.vertexPositions[js[cl*3+1]]),Hs.vertex.push(Qs.vertexPositions[js[cl*3+2]]),Qs.skeleton&&(Hs.vertexWeights.push(tl[0]),Hs.vertexWeights.push(tl[1]),Hs.vertexWeights.push(tl[2]),Hs.vertexWeights.push(tl[3]),Hs.vertexWeights.push(tl[(cl-1)*4]),Hs.vertexWeights.push(tl[(cl-1)*4+1]),Hs.vertexWeights.push(tl[(cl-1)*4+2]),Hs.vertexWeights.push(tl[(cl-1)*4+3]),Hs.vertexWeights.push(tl[cl*4]),Hs.vertexWeights.push(tl[cl*4+1]),Hs.vertexWeights.push(tl[cl*4+2]),Hs.vertexWeights.push(tl[cl*4+3]),Hs.weightsIndices.push(il[0]),Hs.weightsIndices.push(il[1]),Hs.weightsIndices.push(il[2]),Hs.weightsIndices.push(il[3]),Hs.weightsIndices.push(il[(cl-1)*4]),Hs.weightsIndices.push(il[(cl-1)*4+1]),Hs.weightsIndices.push(il[(cl-1)*4+2]),Hs.weightsIndices.push(il[(cl-1)*4+3]),Hs.weightsIndices.push(il[cl*4]),Hs.weightsIndices.push(il[cl*4+1]),Hs.weightsIndices.push(il[cl*4+2]),Hs.weightsIndices.push(il[cl*4+3])),Qs.color&&(Hs.colors.push(Ys[0]),Hs.colors.push(Ys[1]),Hs.colors.push(Ys[2]),Hs.colors.push(Ys[(cl-1)*3]),Hs.colors.push(Ys[(cl-1)*3+1]),Hs.colors.push(Ys[(cl-1)*3+2]),Hs.colors.push(Ys[cl*3]),Hs.colors.push(Ys[cl*3+1]),Hs.colors.push(Ys[cl*3+2])),Qs.material&&Qs.material.mappingType!=="AllSame"&&(Hs.materialIndex.push(Ks),Hs.materialIndex.push(Ks),Hs.materialIndex.push(Ks)),Qs.normal&&(Hs.normal.push(Xs[0]),Hs.normal.push(Xs[1]),Hs.normal.push(Xs[2]),Hs.normal.push(Xs[(cl-1)*3]),Hs.normal.push(Xs[(cl-1)*3+1]),Hs.normal.push(Xs[(cl-1)*3+2]),Hs.normal.push(Xs[cl*3]),Hs.normal.push(Xs[cl*3+1]),Hs.normal.push(Xs[cl*3+2])),Qs.uv&&Qs.uv.forEach(function(al,dl){Hs.uvs[dl]===void 0&&(Hs.uvs[dl]=[]),Hs.uvs[dl].push(rl[dl][0]),Hs.uvs[dl].push(rl[dl][1]),Hs.uvs[dl].push(rl[dl][(cl-1)*2]),Hs.uvs[dl].push(rl[dl][(cl-1)*2+1]),Hs.uvs[dl].push(rl[dl][cl*2]),Hs.uvs[dl].push(rl[dl][cl*2+1])})},addMorphTargets:function(Hs,Qs,js,Ks){if(js.length!==0){Hs.morphTargetsRelative=!0,Hs.morphAttributes.position=[];var Xs=this;js.forEach(function(Ys){Ys.rawTargets.forEach(function(rl){var tl=va.Objects.Geometry[rl.geoID];tl!==void 0&&Xs.genMorphGeometry(Hs,Qs,tl,Ks,rl.name)})})}},genMorphGeometry:function(Hs,Qs,js,Ks,Xs){for(var Ys=Qs.PolygonVertexIndex!==void 0?Qs.PolygonVertexIndex.a:[],rl=js.Vertices!==void 0?js.Vertices.a:[],tl=js.Indexes!==void 0?js.Indexes.a:[],il=Hs.attributes.position.count*3,ll=new Float32Array(il),cl=0;cl<tl.length;cl++){var al=tl[cl]*3;ll[al]=rl[cl*3],ll[al+1]=rl[cl*3+1],ll[al+2]=rl[cl*3+2]}var dl={vertexIndices:Ys,vertexPositions:ll},yl=this.genBuffers(dl),xl=new Float32BufferAttribute(yl.vertex,3);xl.name=Xs||js.attrName,xl.applyMatrix4(Ks),Hs.morphAttributes.position.push(xl)},parseNormals:function(Hs){var Qs=Hs.MappingInformationType,js=Hs.ReferenceInformationType,Ks=Hs.Normals.a,Xs=[];return js==="IndexToDirect"&&("NormalIndex"in Hs?Xs=Hs.NormalIndex.a:"NormalsIndex"in Hs&&(Xs=Hs.NormalsIndex.a)),{dataSize:3,buffer:Ks,indices:Xs,mappingType:Qs,referenceType:js}},parseUVs:function(Hs){var Qs=Hs.MappingInformationType,js=Hs.ReferenceInformationType,Ks=Hs.UV.a,Xs=[];return js==="IndexToDirect"&&(Xs=Hs.UVIndex.a),{dataSize:2,buffer:Ks,indices:Xs,mappingType:Qs,referenceType:js}},parseVertexColors:function(Hs){var Qs=Hs.MappingInformationType,js=Hs.ReferenceInformationType,Ks=Hs.Colors.a,Xs=[];return js==="IndexToDirect"&&(Xs=Hs.ColorIndex.a),{dataSize:4,buffer:Ks,indices:Xs,mappingType:Qs,referenceType:js}},parseMaterialIndices:function(Hs){var Qs=Hs.MappingInformationType,js=Hs.ReferenceInformationType;if(Qs==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:js};for(var Ks=Hs.Materials.a,Xs=[],Ys=0;Ys<Ks.length;++Ys)Xs.push(Ys);return{dataSize:1,buffer:Ks,indices:Xs,mappingType:Qs,referenceType:js}},parseNurbsGeometry:function(Hs){if(NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new BufferGeometry;var Qs=parseInt(Hs.Order);if(isNaN(Qs))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",Hs.Order,Hs.id),new BufferGeometry;for(var js=Qs-1,Ks=Hs.KnotVector.a,Xs=[],Ys=Hs.Points.a,rl=0,tl=Ys.length;rl<tl;rl+=4)Xs.push(new Vector4().fromArray(Ys,rl));var il,ll;if(Hs.Form==="Closed")Xs.push(Xs[0]);else if(Hs.Form==="Periodic"){il=js,ll=Ks.length-1-il;for(var rl=0;rl<js;++rl)Xs.push(Xs[rl])}var cl=new NURBSCurve(js,Ks,Xs,il,ll),al=cl.getPoints(Xs.length*7),dl=new Float32Array(al.length*3);al.forEach(function(xl,wl){xl.toArray(dl,wl*3)});var yl=new BufferGeometry;return yl.setAttribute("position",new BufferAttribute(dl,3)),yl}};function Ts(){}Ts.prototype={constructor:Ts,parse:function(){var Hs=[],Qs=this.parseClips();if(Qs!==void 0)for(var js in Qs){var Ks=Qs[js],Xs=this.addClip(Ks);Hs.push(Xs)}return Hs},parseClips:function(){if(va.Objects.AnimationCurve!==void 0){var Hs=this.parseAnimationCurveNodes();this.parseAnimationCurves(Hs);var Qs=this.parseAnimationLayers(Hs),js=this.parseAnimStacks(Qs);return js}},parseAnimationCurveNodes:function(){var Hs=va.Objects.AnimationCurveNode,Qs=new Map;for(var js in Hs){var Ks=Hs[js];if(Ks.attrName.match(/S|R|T|DeformPercent/)!==null){var Xs={id:Ks.id,attr:Ks.attrName,curves:{}};Qs.set(Xs.id,Xs)}}return Qs},parseAnimationCurves:function(Hs){var Qs=va.Objects.AnimationCurve;for(var js in Qs){var Ks={id:Qs[js].id,times:Qs[js].KeyTime.a.map(Gs),values:Qs[js].KeyValueFloat.a},Xs=_a.get(Ks.id);if(Xs!==void 0){var Ys=Xs.parents[0].ID,rl=Xs.parents[0].relationship;rl.match(/X/)?Hs.get(Ys).curves.x=Ks:rl.match(/Y/)?Hs.get(Ys).curves.y=Ks:rl.match(/Z/)?Hs.get(Ys).curves.z=Ks:rl.match(/d|DeformPercent/)&&Hs.has(Ys)&&(Hs.get(Ys).curves.morph=Ks)}}},parseAnimationLayers:function(Hs){var Qs=va.Objects.AnimationLayer,js=new Map;for(var Ks in Qs){var Xs=[],Ys=_a.get(parseInt(Ks));if(Ys!==void 0){var rl=Ys.children;rl.forEach(function(tl,il){if(Hs.has(tl.ID)){var ll=Hs.get(tl.ID);if(ll.curves.x!==void 0||ll.curves.y!==void 0||ll.curves.z!==void 0){if(Xs[il]===void 0){var cl=_a.get(tl.ID).parents.filter(function(Al){return Al.relationship!==void 0})[0].ID;if(cl!==void 0){var al=va.Objects.Model[cl.toString()];if(al===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",tl);return}var dl={modelName:al.attrName?PropertyBinding.sanitizeNodeName(al.attrName):"",ID:al.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};_s.traverse(function(Al){Al.ID===al.id&&(dl.transform=Al.matrix,Al.userData.transformData&&(dl.eulerOrder=Al.userData.transformData.eulerOrder))}),dl.transform||(dl.transform=new Matrix4),"PreRotation"in al&&(dl.preRotation=al.PreRotation.value),"PostRotation"in al&&(dl.postRotation=al.PostRotation.value),Xs[il]=dl}}Xs[il]&&(Xs[il][ll.attr]=ll)}else if(ll.curves.morph!==void 0){if(Xs[il]===void 0){var yl=_a.get(tl.ID).parents.filter(function(Cl){return Cl.relationship!==void 0})[0].ID,xl=_a.get(yl).parents[0].ID,wl=_a.get(xl).parents[0].ID,cl=_a.get(wl).parents[0].ID,al=va.Objects.Model[cl],dl={modelName:al.attrName?PropertyBinding.sanitizeNodeName(al.attrName):"",morphName:va.Objects.Deformer[yl].attrName};Xs[il]=dl}Xs[il][ll.attr]=ll}}}),js.set(parseInt(Ks),Xs)}}return js},parseAnimStacks:function(Hs){var Qs=va.Objects.AnimationStack,js={};for(var Ks in Qs){var Xs=_a.get(parseInt(Ks)).children;Xs.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var Ys=Hs.get(Xs[0].ID);js[Ks]={name:Qs[Ks].attrName,layer:Ys}}return js},addClip:function(Hs){var Qs=[],js=this;return Hs.layer.forEach(function(Ks){Qs=Qs.concat(js.generateTracks(Ks))}),new AnimationClip(Hs.name,-1,Qs)},generateTracks:function(Hs){var Qs=[],js=new Vector3,Ks=new Quaternion,Xs=new Vector3;if(Hs.transform&&Hs.transform.decompose(js,Ks,Xs),js=js.toArray(),Ks=new Euler().setFromQuaternion(Ks,Hs.eulerOrder).toArray(),Xs=Xs.toArray(),Hs.T!==void 0&&Object.keys(Hs.T.curves).length>0){var Ys=this.generateVectorTrack(Hs.modelName,Hs.T.curves,js,"position");Ys!==void 0&&Qs.push(Ys)}if(Hs.R!==void 0&&Object.keys(Hs.R.curves).length>0){var rl=this.generateRotationTrack(Hs.modelName,Hs.R.curves,Ks,Hs.preRotation,Hs.postRotation,Hs.eulerOrder);rl!==void 0&&Qs.push(rl)}if(Hs.S!==void 0&&Object.keys(Hs.S.curves).length>0){var tl=this.generateVectorTrack(Hs.modelName,Hs.S.curves,Xs,"scale");tl!==void 0&&Qs.push(tl)}if(Hs.DeformPercent!==void 0){var il=this.generateMorphTrack(Hs);il!==void 0&&Qs.push(il)}return Qs},generateVectorTrack:function(Hs,Qs,js,Ks){var Xs=this.getTimesForAllAxes(Qs),Ys=this.getKeyframeTrackValues(Xs,Qs,js);return new VectorKeyframeTrack(Hs+"."+Ks,Xs,Ys)},generateRotationTrack:function(Hs,Qs,js,Ks,Xs,Ys){Qs.x!==void 0&&(this.interpolateRotations(Qs.x),Qs.x.values=Qs.x.values.map(MathUtils.degToRad)),Qs.y!==void 0&&(this.interpolateRotations(Qs.y),Qs.y.values=Qs.y.values.map(MathUtils.degToRad)),Qs.z!==void 0&&(this.interpolateRotations(Qs.z),Qs.z.values=Qs.z.values.map(MathUtils.degToRad));var rl=this.getTimesForAllAxes(Qs),tl=this.getKeyframeTrackValues(rl,Qs,js);Ks!==void 0&&(Ks=Ks.map(MathUtils.degToRad),Ks.push(Ys),Ks=new Euler().fromArray(Ks),Ks=new Quaternion().setFromEuler(Ks)),Xs!==void 0&&(Xs=Xs.map(MathUtils.degToRad),Xs.push(Ys),Xs=new Euler().fromArray(Xs),Xs=new Quaternion().setFromEuler(Xs).inverse());for(var il=new Quaternion,ll=new Euler,cl=[],al=0;al<tl.length;al+=3)ll.set(tl[al],tl[al+1],tl[al+2],Ys),il.setFromEuler(ll),Ks!==void 0&&il.premultiply(Ks),Xs!==void 0&&il.multiply(Xs),il.toArray(cl,al/3*4);return new QuaternionKeyframeTrack(Hs+".quaternion",rl,cl)},generateMorphTrack:function(Hs){var Qs=Hs.DeformPercent.curves.morph,js=Qs.values.map(function(Xs){return Xs/100}),Ks=_s.getObjectByName(Hs.modelName).morphTargetDictionary[Hs.morphName];return new NumberKeyframeTrack(Hs.modelName+".morphTargetInfluences["+Ks+"]",Qs.times,js)},getTimesForAllAxes:function(Hs){var Qs=[];return Hs.x!==void 0&&(Qs=Qs.concat(Hs.x.times)),Hs.y!==void 0&&(Qs=Qs.concat(Hs.y.times)),Hs.z!==void 0&&(Qs=Qs.concat(Hs.z.times)),Qs=Qs.sort(function(js,Ks){return js-Ks}).filter(function(js,Ks,Xs){return Xs.indexOf(js)==Ks}),Qs},getKeyframeTrackValues:function(Hs,Qs,js){var Ks=js,Xs=[],Ys=-1,rl=-1,tl=-1;return Hs.forEach(function(il){if(Qs.x&&(Ys=Qs.x.times.indexOf(il)),Qs.y&&(rl=Qs.y.times.indexOf(il)),Qs.z&&(tl=Qs.z.times.indexOf(il)),Ys!==-1){var ll=Qs.x.values[Ys];Xs.push(ll),Ks[0]=ll}else Xs.push(Ks[0]);if(rl!==-1){var cl=Qs.y.values[rl];Xs.push(cl),Ks[1]=cl}else Xs.push(Ks[1]);if(tl!==-1){var al=Qs.z.values[tl];Xs.push(al),Ks[2]=al}else Xs.push(Ks[2])}),Xs},interpolateRotations:function(Hs){for(var Qs=1;Qs<Hs.values.length;Qs++){var js=Hs.values[Qs-1],Ks=Hs.values[Qs]-js,Xs=Math.abs(Ks);if(Xs>=180){for(var Ys=Xs/180,rl=Ks/Ys,tl=js+rl,il=Hs.times[Qs-1],ll=Hs.times[Qs]-il,cl=ll/Ys,al=il+cl,dl=[],yl=[];al<Hs.times[Qs];)dl.push(al),al+=cl,yl.push(tl),tl+=rl;Hs.times=Js(Hs.times,Qs,dl),Hs.values=Js(Hs.values,Qs,yl)}}}};function Bs(){}Bs.prototype={constructor:Bs,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(Hs){this.nodeStack.push(Hs),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(Hs,Qs){this.currentProp=Hs,this.currentPropName=Qs},parse:function(Hs){this.currentIndent=0,this.allNodes=new Rs,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var Qs=this,js=Hs.split(/[\r\n]+/);return js.forEach(function(Ks,Xs){var Ys=Ks.match(/^[\s\t]*;/),rl=Ks.match(/^[\s\t]*$/);if(!(Ys||rl)){var tl=Ks.match("^\\t{"+Qs.currentIndent+"}(\\w+):(.*){",""),il=Ks.match("^\\t{"+Qs.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),ll=Ks.match("^\\t{"+(Qs.currentIndent-1)+"}}");tl?Qs.parseNodeBegin(Ks,tl):il?Qs.parseNodeProperty(Ks,il,js[++Xs]):ll?Qs.popStack():Ks.match(/^[^\s\t}]/)&&Qs.parseNodePropertyContinued(Ks)}}),this.allNodes},parseNodeBegin:function(Hs,Qs){var js=Qs[1].trim().replace(/^"/,"").replace(/"$/,""),Ks=Qs[2].split(",").map(function(tl){return tl.trim().replace(/^"/,"").replace(/"$/,"")}),Xs={name:js},Ys=this.parseNodeAttr(Ks),rl=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(js,Xs):js in rl?(js==="PoseNode"?rl.PoseNode.push(Xs):rl[js].id!==void 0&&(rl[js]={},rl[js][rl[js].id]=rl[js]),Ys.id!==""&&(rl[js][Ys.id]=Xs)):typeof Ys.id=="number"?(rl[js]={},rl[js][Ys.id]=Xs):js!=="Properties70"&&(js==="PoseNode"?rl[js]=[Xs]:rl[js]=Xs),typeof Ys.id=="number"&&(Xs.id=Ys.id),Ys.name!==""&&(Xs.attrName=Ys.name),Ys.type!==""&&(Xs.attrType=Ys.type),this.pushStack(Xs)},parseNodeAttr:function(Hs){var Qs=Hs[0];Hs[0]!==""&&(Qs=parseInt(Hs[0]),isNaN(Qs)&&(Qs=Hs[0]));var js="",Ks="";return Hs.length>1&&(js=Hs[1].replace(/^(\w+)::/,""),Ks=Hs[2]),{id:Qs,name:js,type:Ks}},parseNodeProperty:function(Hs,Qs,js){var Ks=Qs[1].replace(/^"/,"").replace(/"$/,"").trim(),Xs=Qs[2].replace(/^"/,"").replace(/"$/,"").trim();Ks==="Content"&&Xs===","&&(Xs=js.replace(/"/g,"").replace(/,$/,"").trim());var Ys=this.getCurrentNode(),rl=Ys.name;if(rl==="Properties70"){this.parseNodeSpecialProperty(Hs,Ks,Xs);return}if(Ks==="C"){var tl=Xs.split(",").slice(1),il=parseInt(tl[0]),ll=parseInt(tl[1]),cl=Xs.split(",").slice(3);cl=cl.map(function(al){return al.trim().replace(/^"/,"")}),Ks="connections",Xs=[il,ll],Zs(Xs,cl),Ys[Ks]===void 0&&(Ys[Ks]=[])}Ks==="Node"&&(Ys.id=Xs),Ks in Ys&&Array.isArray(Ys[Ks])?Ys[Ks].push(Xs):Ks!=="a"?Ys[Ks]=Xs:Ys.a=Xs,this.setCurrentProp(Ys,Ks),Ks==="a"&&Xs.slice(-1)!==","&&(Ys.a=Ws(Xs))},parseNodePropertyContinued:function(Hs){var Qs=this.getCurrentNode();Qs.a+=Hs,Hs.slice(-1)!==","&&(Qs.a=Ws(Qs.a))},parseNodeSpecialProperty:function(Hs,Qs,js){var Ks=js.split('",').map(function(ll){return ll.trim().replace(/^\"/,"").replace(/\s/,"_")}),Xs=Ks[0],Ys=Ks[1],rl=Ks[2],tl=Ks[3],il=Ks[4];switch(Ys){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":il=parseFloat(il);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":il=Ws(il);break}this.getPrevNode()[Xs]={type:Ys,type2:rl,flag:tl,value:il},this.setCurrentProp(this.getPrevNode(),Xs)}};function Ps(){}Ps.prototype={constructor:Ps,parse:function(Hs){var Qs=new Ls(Hs);Qs.skip(23);var js=Qs.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+js);for(var Ks=new Rs;!this.endOfContent(Qs);){var Xs=this.parseNode(Qs,js);Xs!==null&&Ks.add(Xs.name,Xs)}return Ks},endOfContent:function(Hs){return Hs.size()%16===0?(Hs.getOffset()+160+16&-16)>=Hs.size():Hs.getOffset()+160+16>=Hs.size()},parseNode:function(Hs,Qs){var js={},Ks=Qs>=7500?Hs.getUint64():Hs.getUint32(),Xs=Qs>=7500?Hs.getUint64():Hs.getUint32();Qs>=7500?Hs.getUint64():Hs.getUint32();var Ys=Hs.getUint8(),rl=Hs.getString(Ys);if(Ks===0)return null;for(var tl=[],il=0;il<Xs;il++)tl.push(this.parseProperty(Hs));var ll=tl.length>0?tl[0]:"",cl=tl.length>1?tl[1]:"",al=tl.length>2?tl[2]:"";for(js.singleProperty=Xs===1&&Hs.getOffset()===Ks;Ks>Hs.getOffset();){var dl=this.parseNode(Hs,Qs);dl!==null&&this.parseSubNode(rl,js,dl)}return js.propertyList=tl,typeof ll=="number"&&(js.id=ll),cl!==""&&(js.attrName=cl),al!==""&&(js.attrType=al),rl!==""&&(js.name=rl),js},parseSubNode:function(Hs,Qs,js){if(js.singleProperty===!0){var Ks=js.propertyList[0];Array.isArray(Ks)?(Qs[js.name]=js,js.a=Ks):Qs[js.name]=Ks}else if(Hs==="Connections"&&js.name==="C"){var Xs=[];js.propertyList.forEach(function(al,dl){dl!==0&&Xs.push(al)}),Qs.connections===void 0&&(Qs.connections=[]),Qs.connections.push(Xs)}else if(js.name==="Properties70"){var Ys=Object.keys(js);Ys.forEach(function(al){Qs[al]=js[al]})}else if(Hs==="Properties70"&&js.name==="P"){var rl=js.propertyList[0],tl=js.propertyList[1],il=js.propertyList[2],ll=js.propertyList[3],cl;rl.indexOf("Lcl ")===0&&(rl=rl.replace("Lcl ","Lcl_")),tl.indexOf("Lcl ")===0&&(tl=tl.replace("Lcl ","Lcl_")),tl==="Color"||tl==="ColorRGB"||tl==="Vector"||tl==="Vector3D"||tl.indexOf("Lcl_")===0?cl=[js.propertyList[4],js.propertyList[5],js.propertyList[6]]:cl=js.propertyList[4],Qs[rl]={type:tl,type2:il,flag:ll,value:cl}}else Qs[js.name]===void 0?typeof js.id=="number"?(Qs[js.name]={},Qs[js.name][js.id]=js):Qs[js.name]=js:js.name==="PoseNode"?(Array.isArray(Qs[js.name])||(Qs[js.name]=[Qs[js.name]]),Qs[js.name].push(js)):Qs[js.name][js.id]===void 0&&(Qs[js.name][js.id]=js)},parseProperty:function(Hs){var Qs=Hs.getString(1);switch(Qs){case"C":return Hs.getBoolean();case"D":return Hs.getFloat64();case"F":return Hs.getFloat32();case"I":return Hs.getInt32();case"L":return Hs.getInt64();case"R":var js=Hs.getUint32();return Hs.getArrayBuffer(js);case"S":var js=Hs.getUint32();return Hs.getString(js);case"Y":return Hs.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var Ks=Hs.getUint32(),Xs=Hs.getUint32(),Ys=Hs.getUint32();if(Xs===0)switch(Qs){case"b":case"c":return Hs.getBooleanArray(Ks);case"d":return Hs.getFloat64Array(Ks);case"f":return Hs.getFloat32Array(Ks);case"i":return Hs.getInt32Array(Ks);case"l":return Hs.getInt64Array(Ks)}typeof Zlib>"u"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var rl=new Zlib.Inflate(new Uint8Array(Hs.getArrayBuffer(Ys))),tl=new Ls(rl.decompress().buffer);switch(Qs){case"b":case"c":return tl.getBooleanArray(Ks);case"d":return tl.getFloat64Array(Ks);case"f":return tl.getFloat32Array(Ks);case"i":return tl.getInt32Array(Ks);case"l":return tl.getInt64Array(Ks)}default:throw new Error("THREE.FBXLoader: Unknown property type "+Qs)}}};function Ls(Hs,Qs){this.dv=new DataView(Hs),this.offset=0,this.littleEndian=Qs!==void 0?Qs:!0}Ls.prototype={constructor:Ls,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(Hs){this.offset+=Hs},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(Hs){for(var Qs=[],js=0;js<Hs;js++)Qs.push(this.getBoolean());return Qs},getUint8:function(){var Hs=this.dv.getUint8(this.offset);return this.offset+=1,Hs},getInt16:function(){var Hs=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,Hs},getInt32:function(){var Hs=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,Hs},getInt32Array:function(Hs){for(var Qs=[],js=0;js<Hs;js++)Qs.push(this.getInt32());return Qs},getUint32:function(){var Hs=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,Hs},getInt64:function(){var Hs,Qs;return this.littleEndian?(Hs=this.getUint32(),Qs=this.getUint32()):(Qs=this.getUint32(),Hs=this.getUint32()),Qs&2147483648?(Qs=~Qs&4294967295,Hs=~Hs&4294967295,Hs===4294967295&&(Qs=Qs+1&4294967295),Hs=Hs+1&4294967295,-(Qs*4294967296+Hs)):Qs*4294967296+Hs},getInt64Array:function(Hs){for(var Qs=[],js=0;js<Hs;js++)Qs.push(this.getInt64());return Qs},getUint64:function(){var Hs,Qs;return this.littleEndian?(Hs=this.getUint32(),Qs=this.getUint32()):(Qs=this.getUint32(),Hs=this.getUint32()),Qs*4294967296+Hs},getFloat32:function(){var Hs=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,Hs},getFloat32Array:function(Hs){for(var Qs=[],js=0;js<Hs;js++)Qs.push(this.getFloat32());return Qs},getFloat64:function(){var Hs=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,Hs},getFloat64Array:function(Hs){for(var Qs=[],js=0;js<Hs;js++)Qs.push(this.getFloat64());return Qs},getArrayBuffer:function(Hs){var Qs=this.dv.buffer.slice(this.offset,this.offset+Hs);return this.offset+=Hs,Qs},getString:function(Hs){for(var Qs=[],js=0;js<Hs;js++)Qs[js]=this.getUint8();var Ks=Qs.indexOf(0);return Ks>=0&&(Qs=Qs.slice(0,Ks)),LoaderUtils.decodeText(new Uint8Array(Qs))}};function Rs(){}Rs.prototype={constructor:Rs,add:function(Hs,Qs){this[Hs]=Qs}};function $s(Hs){var Qs="Kaydara FBX Binary  \0";return Hs.byteLength>=Qs.length&&Qs===qs(Hs,0,Qs.length)}function Fs(Hs){var Qs=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],js=0;function Ks(rl){var tl=Hs[rl-1];return Hs=Hs.slice(js+rl),js++,tl}for(var Xs=0;Xs<Qs.length;++Xs){var Ys=Ks(1);if(Ys===Qs[Xs])return!1}return!0}function Os(Hs){var Qs=/FBXVersion: (\d+)/,js=Hs.match(Qs);if(js){var Ks=parseInt(js[1]);return Ks}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Gs(Hs){return Hs/46186158e3}var Ns=[];function Vs(Hs,Qs,js,Ks){var Xs;switch(Ks.mappingType){case"ByPolygonVertex":Xs=Hs;break;case"ByPolygon":Xs=Qs;break;case"ByVertice":Xs=js;break;case"AllSame":Xs=Ks.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+Ks.mappingType)}Ks.referenceType==="IndexToDirect"&&(Xs=Ks.indices[Xs]);var Ys=Xs*Ks.dataSize,rl=Ys+Ks.dataSize;return el(Ns,Ks.buffer,Ys,rl)}var Ds=new Euler,ks=new Vector3;function Us(Hs){var Qs=new Matrix4,js=new Matrix4,Ks=new Matrix4,Xs=new Matrix4,Ys=new Matrix4,rl=new Matrix4,tl=new Matrix4,il=new Matrix4,ll=new Matrix4,cl=new Matrix4,al=new Matrix4,dl=Hs.inheritType?Hs.inheritType:0;if(Hs.translation&&Qs.setPosition(ks.fromArray(Hs.translation)),Hs.preRotation){var yl=Hs.preRotation.map(MathUtils.degToRad);yl.push(Hs.eulerOrder),js.makeRotationFromEuler(Ds.fromArray(yl))}if(Hs.rotation){var yl=Hs.rotation.map(MathUtils.degToRad);yl.push(Hs.eulerOrder),Ks.makeRotationFromEuler(Ds.fromArray(yl))}if(Hs.postRotation){var yl=Hs.postRotation.map(MathUtils.degToRad);yl.push(Hs.eulerOrder),Xs.makeRotationFromEuler(Ds.fromArray(yl))}Hs.scale&&Ys.scale(ks.fromArray(Hs.scale)),Hs.scalingOffset&&tl.setPosition(ks.fromArray(Hs.scalingOffset)),Hs.scalingPivot&&rl.setPosition(ks.fromArray(Hs.scalingPivot)),Hs.rotationOffset&&il.setPosition(ks.fromArray(Hs.rotationOffset)),Hs.rotationPivot&&ll.setPosition(ks.fromArray(Hs.rotationPivot)),Hs.parentMatrixWorld&&(cl=Hs.parentMatrixWorld);var xl=js.multiply(Ks).multiply(Xs),wl=new Matrix4;cl.extractRotation(wl);var Al=new Matrix4;Al.copyPosition(cl);var bl=new Matrix4;bl.getInverse(wl).multiply(cl);var Bl=new Matrix4;if(dl===0)Bl.copy(wl).multiply(xl).multiply(bl).multiply(Ys);else if(dl===1)Bl.copy(wl).multiply(bl).multiply(xl).multiply(Ys);else{var Cl=new Matrix4().getInverse(Ys),Sl=new Matrix4().multiply(bl).multiply(Cl);Bl.copy(wl).multiply(xl).multiply(Sl).multiply(Ys)}var El=new Matrix4().getInverse(ll),Rl=new Matrix4().getInverse(rl),Fl=new Matrix4;Fl.copy(Qs).multiply(il).multiply(ll).multiply(js).multiply(Ks).multiply(Xs).multiply(El).multiply(tl).multiply(rl).multiply(Ys).multiply(Rl);var jl=new Matrix4().copyPosition(Fl),Vl=new Matrix4().copy(cl).multiply(jl);return al.copyPosition(Vl),Fl=new Matrix4().multiply(al).multiply(Bl),Fl}function zs(Hs){Hs=Hs||0;var Qs=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return Hs===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),Qs[0]):Qs[Hs]}function Ws(Hs){var Qs=Hs.split(",").map(function(js){return parseFloat(js)});return Qs}function qs(Hs,Qs,js){return Qs===void 0&&(Qs=0),js===void 0&&(js=Hs.byteLength),LoaderUtils.decodeText(new Uint8Array(Hs,Qs,js))}function Zs(Hs,Qs){for(var js=0,Ks=Hs.length,Xs=Qs.length;js<Xs;js++,Ks++)Hs[Ks]=Qs[js]}function el(Hs,Qs,js,Ks){for(var Xs=js,Ys=0;Xs<Ks;Xs++,Ys++)Hs[Ys]=Qs[Xs];return Hs}function Js(Hs,Qs,js){return Hs.slice(0,Qs).concat(js).concat(Hs.slice(Qs))}return Ss}(),Easing={Linear:{None:function(va){return va}},Quadratic:{In:function(va){return va*va},Out:function(va){return va*(2-va)},InOut:function(va){return(va*=2)<1?.5*va*va:-.5*(--va*(va-2)-1)}},Cubic:{In:function(va){return va*va*va},Out:function(va){return--va*va*va+1},InOut:function(va){return(va*=2)<1?.5*va*va*va:.5*((va-=2)*va*va+2)}},Quartic:{In:function(va){return va*va*va*va},Out:function(va){return 1- --va*va*va*va},InOut:function(va){return(va*=2)<1?.5*va*va*va*va:-.5*((va-=2)*va*va*va-2)}},Quintic:{In:function(va){return va*va*va*va*va},Out:function(va){return--va*va*va*va*va+1},InOut:function(va){return(va*=2)<1?.5*va*va*va*va*va:.5*((va-=2)*va*va*va*va+2)}},Sinusoidal:{In:function(va){return 1-Math.cos(va*Math.PI/2)},Out:function(va){return Math.sin(va*Math.PI/2)},InOut:function(va){return .5*(1-Math.cos(Math.PI*va))}},Exponential:{In:function(va){return va===0?0:Math.pow(1024,va-1)},Out:function(va){return va===1?1:1-Math.pow(2,-10*va)},InOut:function(va){return va===0?0:va===1?1:(va*=2)<1?.5*Math.pow(1024,va-1):.5*(-Math.pow(2,-10*(va-1))+2)}},Circular:{In:function(va){return 1-Math.sqrt(1-va*va)},Out:function(va){return Math.sqrt(1- --va*va)},InOut:function(va){return(va*=2)<1?-.5*(Math.sqrt(1-va*va)-1):.5*(Math.sqrt(1-(va-=2)*va)+1)}},Elastic:{In:function(va){return va===0?0:va===1?1:-Math.pow(2,10*(va-1))*Math.sin((va-1.1)*5*Math.PI)},Out:function(va){return va===0?0:va===1?1:Math.pow(2,-10*va)*Math.sin((va-.1)*5*Math.PI)+1},InOut:function(va){return va===0?0:va===1?1:(va*=2,va<1?-.5*Math.pow(2,10*(va-1))*Math.sin((va-1.1)*5*Math.PI):.5*Math.pow(2,-10*(va-1))*Math.sin((va-1.1)*5*Math.PI)+1)}},Back:{In:function(va){var _a=1.70158;return va*va*((_a+1)*va-_a)},Out:function(va){var _a=1.70158;return--va*va*((_a+1)*va+_a)+1},InOut:function(va){var _a=2.5949095;return(va*=2)<1?.5*(va*va*((_a+1)*va-_a)):.5*((va-=2)*va*((_a+1)*va+_a)+2)}},Bounce:{In:function(va){return 1-Easing.Bounce.Out(1-va)},Out:function(va){return va<1/2.75?7.5625*va*va:va<2/2.75?7.5625*(va-=1.5/2.75)*va+.75:va<2.5/2.75?7.5625*(va-=2.25/2.75)*va+.9375:7.5625*(va-=2.625/2.75)*va+.984375},InOut:function(va){return va<.5?Easing.Bounce.In(va*2)*.5:Easing.Bounce.Out(va*2-1)*.5+.5}}},now;typeof self>"u"&&typeof process<"u"&&process.hrtime?now=function(){var va=process.hrtime();return va[0]*1e3+va[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?now=self.performance.now.bind(self.performance):Date.now!==void 0?now=Date.now:now=function(){return new Date().getTime()};var now$1=now,Group=function(){function va(){this._tweens={},this._tweensAddedDuringUpdate={}}return va.prototype.getAll=function(){var _a=this;return Object.keys(this._tweens).map(function(_s){return _a._tweens[_s]})},va.prototype.removeAll=function(){this._tweens={}},va.prototype.add=function(_a){this._tweens[_a.getId()]=_a,this._tweensAddedDuringUpdate[_a.getId()]=_a},va.prototype.remove=function(_a){delete this._tweens[_a.getId()],delete this._tweensAddedDuringUpdate[_a.getId()]},va.prototype.update=function(_a,_s){_a===void 0&&(_a=now$1()),_s===void 0&&(_s=!1);var Ss=Object.keys(this._tweens);if(Ss.length===0)return!1;for(;Ss.length>0;){this._tweensAddedDuringUpdate={};for(var Ms=0;Ms<Ss.length;Ms++){var Cs=this._tweens[Ss[Ms]],Ts=!_s;Cs&&Cs.update(_a,Ts)===!1&&!_s&&delete this._tweens[Ss[Ms]]}Ss=Object.keys(this._tweensAddedDuringUpdate)}return!0},va}(),Interpolation={Linear:function(va,_a){var _s=va.length-1,Ss=_s*_a,Ms=Math.floor(Ss),Cs=Interpolation.Utils.Linear;return _a<0?Cs(va[0],va[1],Ss):_a>1?Cs(va[_s],va[_s-1],_s-Ss):Cs(va[Ms],va[Ms+1>_s?_s:Ms+1],Ss-Ms)},Bezier:function(va,_a){for(var _s=0,Ss=va.length-1,Ms=Math.pow,Cs=Interpolation.Utils.Bernstein,Ts=0;Ts<=Ss;Ts++)_s+=Ms(1-_a,Ss-Ts)*Ms(_a,Ts)*va[Ts]*Cs(Ss,Ts);return _s},CatmullRom:function(va,_a){var _s=va.length-1,Ss=_s*_a,Ms=Math.floor(Ss),Cs=Interpolation.Utils.CatmullRom;return va[0]===va[_s]?(_a<0&&(Ms=Math.floor(Ss=_s*(1+_a))),Cs(va[(Ms-1+_s)%_s],va[Ms],va[(Ms+1)%_s],va[(Ms+2)%_s],Ss-Ms)):_a<0?va[0]-(Cs(va[0],va[0],va[1],va[1],-Ss)-va[0]):_a>1?va[_s]-(Cs(va[_s],va[_s],va[_s-1],va[_s-1],Ss-_s)-va[_s]):Cs(va[Ms?Ms-1:0],va[Ms],va[_s<Ms+1?_s:Ms+1],va[_s<Ms+2?_s:Ms+2],Ss-Ms)},Utils:{Linear:function(va,_a,_s){return(_a-va)*_s+va},Bernstein:function(va,_a){var _s=Interpolation.Utils.Factorial;return _s(va)/_s(_a)/_s(va-_a)},Factorial:function(){var va=[1];return function(_a){var _s=1;if(va[_a])return va[_a];for(var Ss=_a;Ss>1;Ss--)_s*=Ss;return va[_a]=_s,_s}}(),CatmullRom:function(va,_a,_s,Ss,Ms){var Cs=(_s-va)*.5,Ts=(Ss-_a)*.5,Bs=Ms*Ms,Ps=Ms*Bs;return(2*_a-2*_s+Cs+Ts)*Ps+(-3*_a+3*_s-2*Cs-Ts)*Bs+Cs*Ms+_a}}},Sequence=function(){function va(){}return va.nextId=function(){return va._nextId++},va._nextId=0,va}(),mainGroup=new Group,Tween=function(){function va(_a,_s){_s===void 0&&(_s=mainGroup),this._object=_a,this._group=_s,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return va.prototype.getId=function(){return this._id},va.prototype.isPlaying=function(){return this._isPlaying},va.prototype.isPaused=function(){return this._isPaused},va.prototype.to=function(_a,_s){return this._valuesEnd=Object.create(_a),_s!==void 0&&(this._duration=_s),this},va.prototype.duration=function(_a){return this._duration=_a,this},va.prototype.start=function(_a){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var _s in this._valuesStartRepeat)this._swapEndStartRepeatValues(_s),this._valuesStart[_s]=this._valuesStartRepeat[_s]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=_a!==void 0?typeof _a=="string"?now$1()+parseFloat(_a):_a:now$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},va.prototype._setupProperties=function(_a,_s,Ss,Ms){for(var Cs in Ss){var Ts=_a[Cs],Bs=Array.isArray(Ts),Ps=Bs?"array":typeof Ts,Ls=!Bs&&Array.isArray(Ss[Cs]);if(!(Ps==="undefined"||Ps==="function")){if(Ls){var Rs=Ss[Cs];if(Rs.length===0)continue;Rs=Rs.map(this._handleRelativeValue.bind(this,Ts)),Ss[Cs]=[Ts].concat(Rs)}if((Ps==="object"||Bs)&&Ts&&!Ls){_s[Cs]=Bs?[]:{};for(var $s in Ts)_s[Cs][$s]=Ts[$s];Ms[Cs]=Bs?[]:{},this._setupProperties(Ts,_s[Cs],Ss[Cs],Ms[Cs])}else typeof _s[Cs]>"u"&&(_s[Cs]=Ts),Bs||(_s[Cs]*=1),Ls?Ms[Cs]=Ss[Cs].slice().reverse():Ms[Cs]=_s[Cs]||0}}},va.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},va.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},va.prototype.pause=function(_a){return _a===void 0&&(_a=now$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=_a,this._group&&this._group.remove(this),this)},va.prototype.resume=function(_a){return _a===void 0&&(_a=now$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=_a-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},va.prototype.stopChainedTweens=function(){for(var _a=0,_s=this._chainedTweens.length;_a<_s;_a++)this._chainedTweens[_a].stop();return this},va.prototype.group=function(_a){return this._group=_a,this},va.prototype.delay=function(_a){return this._delayTime=_a,this},va.prototype.repeat=function(_a){return this._initialRepeat=_a,this._repeat=_a,this},va.prototype.repeatDelay=function(_a){return this._repeatDelayTime=_a,this},va.prototype.yoyo=function(_a){return this._yoyo=_a,this},va.prototype.easing=function(_a){return this._easingFunction=_a,this},va.prototype.interpolation=function(_a){return this._interpolationFunction=_a,this},va.prototype.chain=function(){for(var _a=[],_s=0;_s<arguments.length;_s++)_a[_s]=arguments[_s];return this._chainedTweens=_a,this},va.prototype.onStart=function(_a){return this._onStartCallback=_a,this},va.prototype.onUpdate=function(_a){return this._onUpdateCallback=_a,this},va.prototype.onRepeat=function(_a){return this._onRepeatCallback=_a,this},va.prototype.onComplete=function(_a){return this._onCompleteCallback=_a,this},va.prototype.onStop=function(_a){return this._onStopCallback=_a,this},va.prototype.update=function(_a,_s){if(_a===void 0&&(_a=now$1()),_s===void 0&&(_s=!0),this._isPaused)return!0;var Ss,Ms,Cs=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(_a>Cs)return!1;_s&&this.start(_a)}if(this._goToEnd=!1,_a<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),Ms=(_a-this._startTime)/this._duration,Ms=this._duration===0||Ms>1?1:Ms;var Ts=this._easingFunction(Ms);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Ts),this._onUpdateCallback&&this._onUpdateCallback(this._object,Ms),Ms===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Ss in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Ss]=="string"&&(this._valuesStartRepeat[Ss]=this._valuesStartRepeat[Ss]+parseFloat(this._valuesEnd[Ss])),this._yoyo&&this._swapEndStartRepeatValues(Ss),this._valuesStart[Ss]=this._valuesStartRepeat[Ss];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=_a+this._repeatDelayTime:this._startTime=_a+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var Bs=0,Ps=this._chainedTweens.length;Bs<Ps;Bs++)this._chainedTweens[Bs].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},va.prototype._updateProperties=function(_a,_s,Ss,Ms){for(var Cs in Ss)if(_s[Cs]!==void 0){var Ts=_s[Cs]||0,Bs=Ss[Cs],Ps=Array.isArray(_a[Cs]),Ls=Array.isArray(Bs),Rs=!Ps&&Ls;Rs?_a[Cs]=this._interpolationFunction(Bs,Ms):typeof Bs=="object"&&Bs?this._updateProperties(_a[Cs],Ts,Bs,Ms):(Bs=this._handleRelativeValue(Ts,Bs),typeof Bs=="number"&&(_a[Cs]=Ts+(Bs-Ts)*Ms))}},va.prototype._handleRelativeValue=function(_a,_s){return typeof _s!="string"?_s:_s.charAt(0)==="+"||_s.charAt(0)==="-"?_a+parseFloat(_s):parseFloat(_s)},va.prototype._swapEndStartRepeatValues=function(_a){var _s=this._valuesStartRepeat[_a],Ss=this._valuesEnd[_a];typeof Ss=="string"?this._valuesStartRepeat[_a]=this._valuesStartRepeat[_a]+parseFloat(Ss):this._valuesStartRepeat[_a]=this._valuesEnd[_a],this._valuesEnd[_a]=_s},va}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN=mainGroup,getAll=TWEEN.getAll.bind(TWEEN),removeAll=TWEEN.removeAll.bind(TWEEN),add=TWEEN.add.bind(TWEEN),remove=TWEEN.remove.bind(TWEEN),update=TWEEN.update.bind(TWEEN),exports={Easing,Group,Interpolation,now:now$1,Sequence,nextId,Tween,VERSION,getAll,removeAll,add,remove,update},hammer={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(va){(function(_a,_s,Ss,Ms){var Cs=["","webkit","Moz","MS","ms","o"],Ts=_s.createElement("div"),Bs="function",Ps=Math.round,Ls=Math.abs,Rs=Date.now;function $s(ol,sl,vl){return setTimeout(Us(ol,vl),sl)}function Fs(ol,sl,vl){return Array.isArray(ol)?(Os(ol,vl[sl],vl),!0):!1}function Os(ol,sl,vl){var Ml;if(!!ol)if(ol.forEach)ol.forEach(sl,vl);else if(ol.length!==Ms)for(Ml=0;Ml<ol.length;)sl.call(vl,ol[Ml],Ml,ol),Ml++;else for(Ml in ol)ol.hasOwnProperty(Ml)&&sl.call(vl,ol[Ml],Ml,ol)}function Gs(ol,sl,vl){var Ml="DEPRECATED METHOD: "+sl+`
`+vl+` AT 
`;return function(){var Ol=new Error("get-stack-trace"),Kl=Ol&&Ol.stack?Ol.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",fu=_a.console&&(_a.console.warn||_a.console.log);return fu&&fu.call(_a.console,Ml,Kl),ol.apply(this,arguments)}}var Ns;typeof Object.assign!="function"?Ns=function(sl){if(sl===Ms||sl===null)throw new TypeError("Cannot convert undefined or null to object");for(var vl=Object(sl),Ml=1;Ml<arguments.length;Ml++){var Ol=arguments[Ml];if(Ol!==Ms&&Ol!==null)for(var Kl in Ol)Ol.hasOwnProperty(Kl)&&(vl[Kl]=Ol[Kl])}return vl}:Ns=Object.assign;var Vs=Gs(function(sl,vl,Ml){for(var Ol=Object.keys(vl),Kl=0;Kl<Ol.length;)(!Ml||Ml&&sl[Ol[Kl]]===Ms)&&(sl[Ol[Kl]]=vl[Ol[Kl]]),Kl++;return sl},"extend","Use `assign`."),Ds=Gs(function(sl,vl){return Vs(sl,vl,!0)},"merge","Use `assign`.");function ks(ol,sl,vl){var Ml=sl.prototype,Ol;Ol=ol.prototype=Object.create(Ml),Ol.constructor=ol,Ol._super=Ml,vl&&Ns(Ol,vl)}function Us(ol,sl){return function(){return ol.apply(sl,arguments)}}function zs(ol,sl){return typeof ol==Bs?ol.apply(sl&&sl[0]||Ms,sl):ol}function Ws(ol,sl){return ol===Ms?sl:ol}function qs(ol,sl,vl){Os(Hs(sl),function(Ml){ol.addEventListener(Ml,vl,!1)})}function Zs(ol,sl,vl){Os(Hs(sl),function(Ml){ol.removeEventListener(Ml,vl,!1)})}function el(ol,sl){for(;ol;){if(ol==sl)return!0;ol=ol.parentNode}return!1}function Js(ol,sl){return ol.indexOf(sl)>-1}function Hs(ol){return ol.trim().split(/\s+/g)}function Qs(ol,sl,vl){if(ol.indexOf&&!vl)return ol.indexOf(sl);for(var Ml=0;Ml<ol.length;){if(vl&&ol[Ml][vl]==sl||!vl&&ol[Ml]===sl)return Ml;Ml++}return-1}function js(ol){return Array.prototype.slice.call(ol,0)}function Ks(ol,sl,vl){for(var Ml=[],Ol=[],Kl=0;Kl<ol.length;){var fu=sl?ol[Kl][sl]:ol[Kl];Qs(Ol,fu)<0&&Ml.push(ol[Kl]),Ol[Kl]=fu,Kl++}return vl&&(sl?Ml=Ml.sort(function(Tu,Ru){return Tu[sl]>Ru[sl]}):Ml=Ml.sort()),Ml}function Xs(ol,sl){for(var vl,Ml,Ol=sl[0].toUpperCase()+sl.slice(1),Kl=0;Kl<Cs.length;){if(vl=Cs[Kl],Ml=vl?vl+Ol:sl,Ml in ol)return Ml;Kl++}return Ms}var Ys=1;function rl(){return Ys++}function tl(ol){var sl=ol.ownerDocument||ol;return sl.defaultView||sl.parentWindow||_a}var il=/mobile|tablet|ip(ad|hone|od)|android/i,ll="ontouchstart"in _a,cl=Xs(_a,"PointerEvent")!==Ms,al=ll&&il.test(navigator.userAgent),dl="touch",yl="pen",xl="mouse",wl="kinect",Al=25,bl=1,Bl=2,Cl=4,Sl=8,El=1,Rl=2,Fl=4,jl=8,Vl=16,Wl=Rl|Fl,ul=jl|Vl,pl=Wl|ul,kl=["x","y"],$l=["clientX","clientY"];function Ql(ol,sl){var vl=this;this.manager=ol,this.callback=sl,this.element=ol.element,this.target=ol.options.inputTarget,this.domHandler=function(Ml){zs(ol.options.enable,[ol])&&vl.handler(Ml)},this.init()}Ql.prototype={handler:function(){},init:function(){this.evEl&&qs(this.element,this.evEl,this.domHandler),this.evTarget&&qs(this.target,this.evTarget,this.domHandler),this.evWin&&qs(tl(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Zs(this.element,this.evEl,this.domHandler),this.evTarget&&Zs(this.target,this.evTarget,this.domHandler),this.evWin&&Zs(tl(this.element),this.evWin,this.domHandler)}};function zl(ol){var sl,vl=ol.options.inputClass;return vl?sl=vl:cl?sl=xu:al?sl=Gl:ll?sl=iu:sl=mu,new sl(ol,Nl)}function Nl(ol,sl,vl){var Ml=vl.pointers.length,Ol=vl.changedPointers.length,Kl=sl&bl&&Ml-Ol===0,fu=sl&(Cl|Sl)&&Ml-Ol===0;vl.isFirst=!!Kl,vl.isFinal=!!fu,Kl&&(ol.session={}),vl.eventType=sl,su(ol,vl),ol.emit("hammer.input",vl),ol.recognize(vl),ol.session.prevInput=vl}function su(ol,sl){var vl=ol.session,Ml=sl.pointers,Ol=Ml.length;vl.firstInput||(vl.firstInput=Ul(sl)),Ol>1&&!vl.firstMultiple?vl.firstMultiple=Ul(sl):Ol===1&&(vl.firstMultiple=!1);var Kl=vl.firstInput,fu=vl.firstMultiple,Cu=fu?fu.center:Kl.center,Tu=sl.center=Yl(Ml);sl.timeStamp=Rs(),sl.deltaTime=sl.timeStamp-Kl.timeStamp,sl.angle=ql(Cu,Tu),sl.distance=gl(Cu,Tu),ru(vl,sl),sl.offsetDirection=Dl(sl.deltaX,sl.deltaY);var Ru=Hl(sl.deltaTime,sl.deltaX,sl.deltaY);sl.overallVelocityX=Ru.x,sl.overallVelocityY=Ru.y,sl.overallVelocity=Ls(Ru.x)>Ls(Ru.y)?Ru.x:Ru.y,sl.scale=fu?uu(fu.pointers,Ml):1,sl.rotation=fu?Xl(fu.pointers,Ml):0,sl.maxPointers=vl.prevInput?sl.pointers.length>vl.prevInput.maxPointers?sl.pointers.length:vl.prevInput.maxPointers:sl.pointers.length,nu(vl,sl);var Vu=ol.element;el(sl.srcEvent.target,Vu)&&(Vu=sl.srcEvent.target),sl.target=Vu}function ru(ol,sl){var vl=sl.center,Ml=ol.offsetDelta||{},Ol=ol.prevDelta||{},Kl=ol.prevInput||{};(sl.eventType===bl||Kl.eventType===Cl)&&(Ol=ol.prevDelta={x:Kl.deltaX||0,y:Kl.deltaY||0},Ml=ol.offsetDelta={x:vl.x,y:vl.y}),sl.deltaX=Ol.x+(vl.x-Ml.x),sl.deltaY=Ol.y+(vl.y-Ml.y)}function nu(ol,sl){var vl=ol.lastInterval||sl,Ml=sl.timeStamp-vl.timeStamp,Ol,Kl,fu,Cu;if(sl.eventType!=Sl&&(Ml>Al||vl.velocity===Ms)){var Tu=sl.deltaX-vl.deltaX,Ru=sl.deltaY-vl.deltaY,Vu=Hl(Ml,Tu,Ru);Kl=Vu.x,fu=Vu.y,Ol=Ls(Vu.x)>Ls(Vu.y)?Vu.x:Vu.y,Cu=Dl(Tu,Ru),ol.lastInterval=sl}else Ol=vl.velocity,Kl=vl.velocityX,fu=vl.velocityY,Cu=vl.direction;sl.velocity=Ol,sl.velocityX=Kl,sl.velocityY=fu,sl.direction=Cu}function Ul(ol){for(var sl=[],vl=0;vl<ol.pointers.length;)sl[vl]={clientX:Ps(ol.pointers[vl].clientX),clientY:Ps(ol.pointers[vl].clientY)},vl++;return{timeStamp:Rs(),pointers:sl,center:Yl(sl),deltaX:ol.deltaX,deltaY:ol.deltaY}}function Yl(ol){var sl=ol.length;if(sl===1)return{x:Ps(ol[0].clientX),y:Ps(ol[0].clientY)};for(var vl=0,Ml=0,Ol=0;Ol<sl;)vl+=ol[Ol].clientX,Ml+=ol[Ol].clientY,Ol++;return{x:Ps(vl/sl),y:Ps(Ml/sl)}}function Hl(ol,sl,vl){return{x:sl/ol||0,y:vl/ol||0}}function Dl(ol,sl){return ol===sl?El:Ls(ol)>=Ls(sl)?ol<0?Rl:Fl:sl<0?jl:Vl}function gl(ol,sl,vl){vl||(vl=kl);var Ml=sl[vl[0]]-ol[vl[0]],Ol=sl[vl[1]]-ol[vl[1]];return Math.sqrt(Ml*Ml+Ol*Ol)}function ql(ol,sl,vl){vl||(vl=kl);var Ml=sl[vl[0]]-ol[vl[0]],Ol=sl[vl[1]]-ol[vl[1]];return Math.atan2(Ol,Ml)*180/Math.PI}function Xl(ol,sl){return ql(sl[1],sl[0],$l)+ql(ol[1],ol[0],$l)}function uu(ol,sl){return gl(sl[0],sl[1],$l)/gl(ol[0],ol[1],$l)}var Zl={mousedown:bl,mousemove:Bl,mouseup:Cl},hu="mousedown",vu="mousemove mouseup";function mu(){this.evEl=hu,this.evWin=vu,this.pressed=!1,Ql.apply(this,arguments)}ks(mu,Ql,{handler:function(sl){var vl=Zl[sl.type];vl&bl&&sl.button===0&&(this.pressed=!0),vl&Bl&&sl.which!==1&&(vl=Cl),this.pressed&&(vl&Cl&&(this.pressed=!1),this.callback(this.manager,vl,{pointers:[sl],changedPointers:[sl],pointerType:xl,srcEvent:sl}))}});var bu={pointerdown:bl,pointermove:Bl,pointerup:Cl,pointercancel:Sl,pointerout:Sl},du={2:dl,3:yl,4:xl,5:wl},_u="pointerdown",wu="pointermove pointerup pointercancel";_a.MSPointerEvent&&!_a.PointerEvent&&(_u="MSPointerDown",wu="MSPointerMove MSPointerUp MSPointerCancel");function xu(){this.evEl=_u,this.evWin=wu,Ql.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}ks(xu,Ql,{handler:function(sl){var vl=this.store,Ml=!1,Ol=sl.type.toLowerCase().replace("ms",""),Kl=bu[Ol],fu=du[sl.pointerType]||sl.pointerType,Cu=fu==dl,Tu=Qs(vl,sl.pointerId,"pointerId");Kl&bl&&(sl.button===0||Cu)?Tu<0&&(vl.push(sl),Tu=vl.length-1):Kl&(Cl|Sl)&&(Ml=!0),!(Tu<0)&&(vl[Tu]=sl,this.callback(this.manager,Kl,{pointers:vl,changedPointers:[sl],pointerType:fu,srcEvent:sl}),Ml&&vl.splice(Tu,1))}});var Iu={touchstart:bl,touchmove:Bl,touchend:Cl,touchcancel:Sl},Gu="touchstart",Uu="touchstart touchmove touchend touchcancel";function hl(){this.evTarget=Gu,this.evWin=Uu,this.started=!1,Ql.apply(this,arguments)}ks(hl,Ql,{handler:function(sl){var vl=Iu[sl.type];if(vl===bl&&(this.started=!0),!!this.started){var Ml=Il.call(this,sl,vl);vl&(Cl|Sl)&&Ml[0].length-Ml[1].length===0&&(this.started=!1),this.callback(this.manager,vl,{pointers:Ml[0],changedPointers:Ml[1],pointerType:dl,srcEvent:sl})}}});function Il(ol,sl){var vl=js(ol.touches),Ml=js(ol.changedTouches);return sl&(Cl|Sl)&&(vl=Ks(vl.concat(Ml),"identifier",!0)),[vl,Ml]}var Tl={touchstart:bl,touchmove:Bl,touchend:Cl,touchcancel:Sl},Pl="touchstart touchmove touchend touchcancel";function Gl(){this.evTarget=Pl,this.targetIds={},Ql.apply(this,arguments)}ks(Gl,Ql,{handler:function(sl){var vl=Tl[sl.type],Ml=lu.call(this,sl,vl);!Ml||this.callback(this.manager,vl,{pointers:Ml[0],changedPointers:Ml[1],pointerType:dl,srcEvent:sl})}});function lu(ol,sl){var vl=js(ol.touches),Ml=this.targetIds;if(sl&(bl|Bl)&&vl.length===1)return Ml[vl[0].identifier]=!0,[vl,vl];var Ol,Kl,fu=js(ol.changedTouches),Cu=[],Tu=this.target;if(Kl=vl.filter(function(Ru){return el(Ru.target,Tu)}),sl===bl)for(Ol=0;Ol<Kl.length;)Ml[Kl[Ol].identifier]=!0,Ol++;for(Ol=0;Ol<fu.length;)Ml[fu[Ol].identifier]&&Cu.push(fu[Ol]),sl&(Cl|Sl)&&delete Ml[fu[Ol].identifier],Ol++;if(!!Cu.length)return[Ks(Kl.concat(Cu),"identifier",!0),Cu]}var au=2500,eu=25;function iu(){Ql.apply(this,arguments);var ol=Us(this.handler,this);this.touch=new Gl(this.manager,ol),this.mouse=new mu(this.manager,ol),this.primaryTouch=null,this.lastTouches=[]}ks(iu,Ql,{handler:function(sl,vl,Ml){var Ol=Ml.pointerType==dl,Kl=Ml.pointerType==xl;if(!(Kl&&Ml.sourceCapabilities&&Ml.sourceCapabilities.firesTouchEvents)){if(Ol)cu.call(this,vl,Ml);else if(Kl&&nl.call(this,Ml))return;this.callback(sl,vl,Ml)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function cu(ol,sl){ol&bl?(this.primaryTouch=sl.changedPointers[0].identifier,gu.call(this,sl)):ol&(Cl|Sl)&&gu.call(this,sl)}function gu(ol){var sl=ol.changedPointers[0];if(sl.identifier===this.primaryTouch){var vl={x:sl.clientX,y:sl.clientY};this.lastTouches.push(vl);var Ml=this.lastTouches,Ol=function(){var Kl=Ml.indexOf(vl);Kl>-1&&Ml.splice(Kl,1)};setTimeout(Ol,au)}}function nl(ol){for(var sl=ol.srcEvent.clientX,vl=ol.srcEvent.clientY,Ml=0;Ml<this.lastTouches.length;Ml++){var Ol=this.lastTouches[Ml],Kl=Math.abs(sl-Ol.x),fu=Math.abs(vl-Ol.y);if(Kl<=eu&&fu<=eu)return!0}return!1}var fl=Xs(Ts.style,"touchAction"),ml=fl!==Ms,_l="compute",Ll="auto",tu="manipulation",ou="none",yu="pan-x",Jl="pan-y",Au=Qu();function Bu(ol,sl){this.manager=ol,this.set(sl)}Bu.prototype={set:function(ol){ol==_l&&(ol=this.compute()),ml&&this.manager.element.style&&Au[ol]&&(this.manager.element.style[fl]=ol),this.actions=ol.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ol=[];return Os(this.manager.recognizers,function(sl){zs(sl.options.enable,[sl])&&(ol=ol.concat(sl.getTouchAction()))}),Wu(ol.join(" "))},preventDefaults:function(ol){var sl=ol.srcEvent,vl=ol.offsetDirection;if(this.manager.session.prevented){sl.preventDefault();return}var Ml=this.actions,Ol=Js(Ml,ou)&&!Au[ou],Kl=Js(Ml,Jl)&&!Au[Jl],fu=Js(Ml,yu)&&!Au[yu];if(Ol){var Cu=ol.pointers.length===1,Tu=ol.distance<2,Ru=ol.deltaTime<250;if(Cu&&Tu&&Ru)return}if(!(fu&&Kl)&&(Ol||Kl&&vl&Wl||fu&&vl&ul))return this.preventSrc(sl)},preventSrc:function(ol){this.manager.session.prevented=!0,ol.preventDefault()}};function Wu(ol){if(Js(ol,ou))return ou;var sl=Js(ol,yu),vl=Js(ol,Jl);return sl&&vl?ou:sl||vl?sl?yu:Jl:Js(ol,tu)?tu:Ll}function Qu(){if(!ml)return!1;var ol={},sl=_a.CSS&&_a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(vl){ol[vl]=sl?_a.CSS.supports("touch-action",vl):!0}),ol}var Fu=1,Pu=2,zu=4,Lu=8,$u=Lu,Su=16,pu=32;function Mu(ol){this.options=Ns({},this.defaults,ol||{}),this.id=rl(),this.manager=null,this.options.enable=Ws(this.options.enable,!0),this.state=Fu,this.simultaneous={},this.requireFail=[]}Mu.prototype={defaults:{},set:function(ol){return Ns(this.options,ol),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ol){if(Fs(ol,"recognizeWith",this))return this;var sl=this.simultaneous;return ol=Du(ol,this),sl[ol.id]||(sl[ol.id]=ol,ol.recognizeWith(this)),this},dropRecognizeWith:function(ol){return Fs(ol,"dropRecognizeWith",this)?this:(ol=Du(ol,this),delete this.simultaneous[ol.id],this)},requireFailure:function(ol){if(Fs(ol,"requireFailure",this))return this;var sl=this.requireFail;return ol=Du(ol,this),Qs(sl,ol)===-1&&(sl.push(ol),ol.requireFailure(this)),this},dropRequireFailure:function(ol){if(Fs(ol,"dropRequireFailure",this))return this;ol=Du(ol,this);var sl=Qs(this.requireFail,ol);return sl>-1&&this.requireFail.splice(sl,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ol){return!!this.simultaneous[ol.id]},emit:function(ol){var sl=this,vl=this.state;function Ml(Ol){sl.manager.emit(Ol,ol)}vl<Lu&&Ml(sl.options.event+Ou(vl)),Ml(sl.options.event),ol.additionalEvent&&Ml(ol.additionalEvent),vl>=Lu&&Ml(sl.options.event+Ou(vl))},tryEmit:function(ol){if(this.canEmit())return this.emit(ol);this.state=pu},canEmit:function(){for(var ol=0;ol<this.requireFail.length;){if(!(this.requireFail[ol].state&(pu|Fu)))return!1;ol++}return!0},recognize:function(ol){var sl=Ns({},ol);if(!zs(this.options.enable,[this,sl])){this.reset(),this.state=pu;return}this.state&($u|Su|pu)&&(this.state=Fu),this.state=this.process(sl),this.state&(Pu|zu|Lu|Su)&&this.tryEmit(sl)},process:function(ol){},getTouchAction:function(){},reset:function(){}};function Ou(ol){return ol&Su?"cancel":ol&Lu?"end":ol&zu?"move":ol&Pu?"start":""}function ku(ol){return ol==Vl?"down":ol==jl?"up":ol==Rl?"left":ol==Fl?"right":""}function Du(ol,sl){var vl=sl.manager;return vl?vl.get(ol):ol}function Eu(){Mu.apply(this,arguments)}ks(Eu,Mu,{defaults:{pointers:1},attrTest:function(ol){var sl=this.options.pointers;return sl===0||ol.pointers.length===sl},process:function(ol){var sl=this.state,vl=ol.eventType,Ml=sl&(Pu|zu),Ol=this.attrTest(ol);return Ml&&(vl&Sl||!Ol)?sl|Su:Ml||Ol?vl&Cl?sl|Lu:sl&Pu?sl|zu:Pu:pu}});function ju(){Eu.apply(this,arguments),this.pX=null,this.pY=null}ks(ju,Eu,{defaults:{event:"pan",threshold:10,pointers:1,direction:pl},getTouchAction:function(){var ol=this.options.direction,sl=[];return ol&Wl&&sl.push(Jl),ol&ul&&sl.push(yu),sl},directionTest:function(ol){var sl=this.options,vl=!0,Ml=ol.distance,Ol=ol.direction,Kl=ol.deltaX,fu=ol.deltaY;return Ol&sl.direction||(sl.direction&Wl?(Ol=Kl===0?El:Kl<0?Rl:Fl,vl=Kl!=this.pX,Ml=Math.abs(ol.deltaX)):(Ol=fu===0?El:fu<0?jl:Vl,vl=fu!=this.pY,Ml=Math.abs(ol.deltaY))),ol.direction=Ol,vl&&Ml>sl.threshold&&Ol&sl.direction},attrTest:function(ol){return Eu.prototype.attrTest.call(this,ol)&&(this.state&Pu||!(this.state&Pu)&&this.directionTest(ol))},emit:function(ol){this.pX=ol.deltaX,this.pY=ol.deltaY;var sl=ku(ol.direction);sl&&(ol.additionalEvent=this.options.event+sl),this._super.emit.call(this,ol)}});function qu(){Eu.apply(this,arguments)}ks(qu,Eu,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ou]},attrTest:function(ol){return this._super.attrTest.call(this,ol)&&(Math.abs(ol.scale-1)>this.options.threshold||this.state&Pu)},emit:function(ol){if(ol.scale!==1){var sl=ol.scale<1?"in":"out";ol.additionalEvent=this.options.event+sl}this._super.emit.call(this,ol)}});function Ku(){Mu.apply(this,arguments),this._timer=null,this._input=null}ks(Ku,Mu,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ll]},process:function(ol){var sl=this.options,vl=ol.pointers.length===sl.pointers,Ml=ol.distance<sl.threshold,Ol=ol.deltaTime>sl.time;if(this._input=ol,!Ml||!vl||ol.eventType&(Cl|Sl)&&!Ol)this.reset();else if(ol.eventType&bl)this.reset(),this._timer=$s(function(){this.state=$u,this.tryEmit()},sl.time,this);else if(ol.eventType&Cl)return $u;return pu},reset:function(){clearTimeout(this._timer)},emit:function(ol){this.state===$u&&(ol&&ol.eventType&Cl?this.manager.emit(this.options.event+"up",ol):(this._input.timeStamp=Rs(),this.manager.emit(this.options.event,this._input)))}});function Nu(){Eu.apply(this,arguments)}ks(Nu,Eu,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ou]},attrTest:function(ol){return this._super.attrTest.call(this,ol)&&(Math.abs(ol.rotation)>this.options.threshold||this.state&Pu)}});function Yu(){Eu.apply(this,arguments)}ks(Yu,Eu,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Wl|ul,pointers:1},getTouchAction:function(){return ju.prototype.getTouchAction.call(this)},attrTest:function(ol){var sl=this.options.direction,vl;return sl&(Wl|ul)?vl=ol.overallVelocity:sl&Wl?vl=ol.overallVelocityX:sl&ul&&(vl=ol.overallVelocityY),this._super.attrTest.call(this,ol)&&sl&ol.offsetDirection&&ol.distance>this.options.threshold&&ol.maxPointers==this.options.pointers&&Ls(vl)>this.options.velocity&&ol.eventType&Cl},emit:function(ol){var sl=ku(ol.offsetDirection);sl&&this.manager.emit(this.options.event+sl,ol),this.manager.emit(this.options.event,ol)}});function Xu(){Mu.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}ks(Xu,Mu,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[tu]},process:function(ol){var sl=this.options,vl=ol.pointers.length===sl.pointers,Ml=ol.distance<sl.threshold,Ol=ol.deltaTime<sl.time;if(this.reset(),ol.eventType&bl&&this.count===0)return this.failTimeout();if(Ml&&Ol&&vl){if(ol.eventType!=Cl)return this.failTimeout();var Kl=this.pTime?ol.timeStamp-this.pTime<sl.interval:!0,fu=!this.pCenter||gl(this.pCenter,ol.center)<sl.posThreshold;this.pTime=ol.timeStamp,this.pCenter=ol.center,!fu||!Kl?this.count=1:this.count+=1,this._input=ol;var Cu=this.count%sl.taps;if(Cu===0)return this.hasRequireFailures()?(this._timer=$s(function(){this.state=$u,this.tryEmit()},sl.interval,this),Pu):$u}return pu},failTimeout:function(){return this._timer=$s(function(){this.state=pu},this.options.interval,this),pu},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==$u&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Hu(ol,sl){return sl=sl||{},sl.recognizers=Ws(sl.recognizers,Hu.defaults.preset),new Zu(ol,sl)}Hu.VERSION="2.0.7",Hu.defaults={domEvents:!1,touchAction:_l,enable:!0,inputTarget:null,inputClass:null,preset:[[Nu,{enable:!1}],[qu,{enable:!1},["rotate"]],[Yu,{direction:Wl}],[ju,{direction:Wl},["swipe"]],[Xu],[Xu,{event:"doubletap",taps:2},["tap"]],[Ku]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var _h=1,Ju=2;function Zu(ol,sl){this.options=Ns({},Hu.defaults,sl||{}),this.options.inputTarget=this.options.inputTarget||ol,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ol,this.input=zl(this),this.touchAction=new Bu(this,this.options.touchAction),_c(this,!0),Os(this.options.recognizers,function(vl){var Ml=this.add(new vl[0](vl[1]));vl[2]&&Ml.recognizeWith(vl[2]),vl[3]&&Ml.requireFailure(vl[3])},this)}Zu.prototype={set:function(ol){return Ns(this.options,ol),ol.touchAction&&this.touchAction.update(),ol.inputTarget&&(this.input.destroy(),this.input.target=ol.inputTarget,this.input.init()),this},stop:function(ol){this.session.stopped=ol?Ju:_h},recognize:function(ol){var sl=this.session;if(!sl.stopped){this.touchAction.preventDefaults(ol);var vl,Ml=this.recognizers,Ol=sl.curRecognizer;(!Ol||Ol&&Ol.state&$u)&&(Ol=sl.curRecognizer=null);for(var Kl=0;Kl<Ml.length;)vl=Ml[Kl],sl.stopped!==Ju&&(!Ol||vl==Ol||vl.canRecognizeWith(Ol))?vl.recognize(ol):vl.reset(),!Ol&&vl.state&(Pu|zu|Lu)&&(Ol=sl.curRecognizer=vl),Kl++}},get:function(ol){if(ol instanceof Mu)return ol;for(var sl=this.recognizers,vl=0;vl<sl.length;vl++)if(sl[vl].options.event==ol)return sl[vl];return null},add:function(ol){if(Fs(ol,"add",this))return this;var sl=this.get(ol.options.event);return sl&&this.remove(sl),this.recognizers.push(ol),ol.manager=this,this.touchAction.update(),ol},remove:function(ol){if(Fs(ol,"remove",this))return this;if(ol=this.get(ol),ol){var sl=this.recognizers,vl=Qs(sl,ol);vl!==-1&&(sl.splice(vl,1),this.touchAction.update())}return this},on:function(ol,sl){if(ol!==Ms&&sl!==Ms){var vl=this.handlers;return Os(Hs(ol),function(Ml){vl[Ml]=vl[Ml]||[],vl[Ml].push(sl)}),this}},off:function(ol,sl){if(ol!==Ms){var vl=this.handlers;return Os(Hs(ol),function(Ml){sl?vl[Ml]&&vl[Ml].splice(Qs(vl[Ml],sl),1):delete vl[Ml]}),this}},emit:function(ol,sl){this.options.domEvents&&_f(ol,sl);var vl=this.handlers[ol]&&this.handlers[ol].slice();if(!(!vl||!vl.length)){sl.type=ol,sl.preventDefault=function(){sl.srcEvent.preventDefault()};for(var Ml=0;Ml<vl.length;)vl[Ml](sl),Ml++}},destroy:function(){this.element&&_c(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function _c(ol,sl){var vl=ol.element;if(!!vl.style){var Ml;Os(ol.options.cssProps,function(Ol,Kl){Ml=Xs(vl.style,Kl),sl?(ol.oldCssProps[Ml]=vl.style[Ml],vl.style[Ml]=Ol):vl.style[Ml]=ol.oldCssProps[Ml]||""}),sl||(ol.oldCssProps={})}}function _f(ol,sl){var vl=_s.createEvent("Event");vl.initEvent(ol,!0,!0),vl.gesture=sl,sl.target.dispatchEvent(vl)}Ns(Hu,{INPUT_START:bl,INPUT_MOVE:Bl,INPUT_END:Cl,INPUT_CANCEL:Sl,STATE_POSSIBLE:Fu,STATE_BEGAN:Pu,STATE_CHANGED:zu,STATE_ENDED:Lu,STATE_RECOGNIZED:$u,STATE_CANCELLED:Su,STATE_FAILED:pu,DIRECTION_NONE:El,DIRECTION_LEFT:Rl,DIRECTION_RIGHT:Fl,DIRECTION_UP:jl,DIRECTION_DOWN:Vl,DIRECTION_HORIZONTAL:Wl,DIRECTION_VERTICAL:ul,DIRECTION_ALL:pl,Manager:Zu,Input:Ql,TouchAction:Bu,TouchInput:Gl,MouseInput:mu,PointerEventInput:xu,TouchMouseInput:iu,SingleTouchInput:hl,Recognizer:Mu,AttrRecognizer:Eu,Tap:Xu,Pan:ju,Swipe:Yu,Pinch:qu,Rotate:Nu,Press:Ku,on:qs,off:Zs,each:Os,merge:Ds,extend:Vs,assign:Ns,inherit:ks,bindFn:Us,prefixed:Xs});var _d=typeof _a<"u"?_a:typeof self<"u"?self:{};_d.Hammer=Hu,typeof Ms=="function"&&Ms.amd?Ms(function(){return Hu}):va.exports?va.exports=Hu:_a[Ss]=Hu})(window,document,"Hammer")})(hammer);var Hammer=hammer.exports,Hammer$1=_mergeNamespaces({__proto__:null,default:Hammer},[hammer.exports]);const subscriber_queue=[];function writable(va,_a=noop$1){let _s;const Ss=new Set;function Ms(Bs){if(safe_not_equal(va,Bs)&&(va=Bs,_s)){const Ps=!subscriber_queue.length;for(const Ls of Ss)Ls[1](),subscriber_queue.push(Ls,va);if(Ps){for(let Ls=0;Ls<subscriber_queue.length;Ls+=2)subscriber_queue[Ls][0](subscriber_queue[Ls+1]);subscriber_queue.length=0}}}function Cs(Bs){Ms(Bs(va))}function Ts(Bs,Ps=noop$1){const Ls=[Bs,Ps];return Ss.add(Ls),Ss.size===1&&(_s=_a(Ms)||noop$1),Bs(va),()=>{Ss.delete(Ls),Ss.size===0&&(_s(),_s=null)}}return{set:Ms,update:Cs,subscribe:Ts}}var react={},useFiveState,useFiveModelReadyState,useFiveEventCallback,unsafe__useFiveInstance,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e$2=tslib.exports,t$1=react$1.exports,n$3=require$$2$1,r$2=five;function o(va){if(va&&va.__esModule)return va;var _a=Object.create(null);return va&&Object.keys(va).forEach(function(_s){if(_s!=="default"){var Ss=Object.getOwnPropertyDescriptor(va,_s);Object.defineProperty(_a,_s,Ss.get?Ss:{enumerable:!0,get:function(){return va[_s]}})}}),_a.default=va,Object.freeze(_a)}var u$1=o(t$1),i=o(n$3),a=[],f$3=u$1.createContext(null);function s(){var va=u$1.useContext(f$3);if(!va)throw new Error("FiveProvider never found.");return va.five}function c$2(){var va=u$1.useContext(f$3);if(!va)throw new Error("FiveProvider never found.");return va.loadWork}var l$2={display:"inline-block",overflow:"hidden"};function d$2(va,_a){var _s=s(),Ss=[_s];_a!==void 0&&(Ss=Ss.concat(_a)),u$1.useLayoutEffect(function(){return va(_s.scene)},Ss)}var v$2=d$2;function p$3(va){return e$2.__assign({},va.state)}function h$3(va){var _a=va.camera.getWorldDirection(new i.Vector3);return new i.Raycaster(va.camera.position,_a)}function m$3(va){return va.camera.getWorldDirection(new i.Vector3)}function y$2(va){return va.model.empty?"Empty":"Loaded"}function S(va,_a){return _a.indexOf(va)>=0}function g$3(va,_a){for(var _s=0,Ss=Object.keys(_a);_s<Ss.length;_s++){var Ms=Ss[_s];_a[Ms]!==void 0&&(va[Ms]=_a[Ms])}}function C$1(va,_a){if(S("loadWork",_a))return va}function b$2(va,_a){if(S("setState",_a))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.setState.apply(va,_s)}}function w$2(va,_a){if(S("on",_a))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.on.apply(va,_s)}}function E$1(va,_a){if(S("on",_a))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.once.apply(va,_s)}}function k$2(va,_a){if(S("off",_a))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.off.apply(va,_s)}}function x$2(va,_a){if(S("intersectRaycaster",_a))return function(){for(var _s,Ss=[],Ms=0;Ms<arguments.length;Ms++)Ss[Ms]=arguments[Ms];return(_s=va.model).intersectRaycaster.apply(_s,Ss)}}function L(va,_a){if(S("project2d",_a))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.project2d.apply(va,_s)}}function F$1(va,_a){if(S("updateCamera",_a))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.updateCamera.apply(va,_s)}}function _$1(va,_a){if(S("initBasisLoader",_a))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.initBasisLoader.apply(va,_s)}}function P(va,_a){if(S("getPixels",_a))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.getPixels.apply(va,_s)}}function R(va,_a){if(S("render",_a))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.render.apply(va,_s)}}function V(va,_a){if(S("needsRender",_a))return function(){va.needsRender=!0}}function M(va,_a){if(S("preloadPano",_a))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return va.preloadPano.apply(va,_s)}}function W(va,_a){if(S("showFloor",_a))return function(_s){typeof _s=="number"?va.model.show(_s):va.model.show()}}function O(va,_a){if(S("toggleHelperVisible",_a))return function(_s){va.helperVisible=_s}}function j(va,_a){for(var _s={},Ss=_a.length,Ms=-1;++Ms<Ss;){var Cs=_a[Ms];Cs in va&&(_s[Cs]=va[Cs])}return _s}function N(va,_a){for(var _s=0;_s<va.length;_s++)for(var Ss=0;Ss<_a.length;Ss++)if(va[_s]===_a[Ss])return!0;return!1}var A$2=function(){function va(_a,_s){this.values=_a,this.listeners=[],this.onValuesChange=_s}return va.prototype.on=function(_a,_s){var Ss=this,Ms=[_a,_s];return this.listeners.push(Ms),function(){var Cs=Ss.listeners.indexOf(Ms);Cs>=0&&Ss.listeners.splice(Cs,1)}},va.prototype.getValues=function(_a){return j(this.values,_a)},va.prototype.setValues=function(_a,_s){var Ss,Ms,Cs=[];for(var Ts in _s)_a.indexOf(Ts)>=0&&(Ss=_s[Ts],Ms=this.values[Ts],!(typeof Ss=="number"&&typeof Ms=="number"&&isNaN(Ss)&&isNaN(Ms)||Ss===Ms))&&Cs.push(Ts);if(Cs.length!==0){for(var Bs=e$2.__assign({},this.values),Ps=0,Ls=Cs;Ps<Ls.length;Ps++){var Rs=Ls[Ps];this.values[Rs]=_s[Rs]}this.onValuesChange&&this.onValuesChange(this.values,Bs);for(var $s=0,Fs=this.listeners;$s<Fs.length;$s++){var Os=Fs[$s],Gs=Os[0],Ns=Os[1];if(N(Gs,Cs)){var Vs=j(Bs,Gs);Ns(j(this.values,Gs),Vs)}}}},va}();FiveCanvas=react.FiveCanvas=function(va){var _a=va.width,_s=va.height,Ss=s(),Ms=u$1.createRef(),Cs=e$2.__assign({width:_a,height:_s},l$2);return u$1.useLayoutEffect(function(){if(Ms.current&&Ss.renderer){if(Ss.renderer.domElement.parentNode!==null&&Ss.renderer.domElement.parentNode!==Ms.current)throw new Error("There are more than 2 fiveCanvas in this context.");Ss.renderer.domElement.parentNode!==Ms.current&&Ms.current.appendChild(Ss.renderer.domElement),Ss.camera.aspect=_a/_s,Ss.camera.updateProjectionMatrix(),Ss.renderer.setSize(_a,_s),Ss.needsRender=!0}},[_a,_s,Ms.current]),u$1.createElement("div",{ref:Ms,style:Cs})},react.INJECTION_PROPNAME="$five",react.Store=A$2,react.createFiveFeature=function(){for(var va=[],_a=0;_a<arguments.length;_a++)va[_a]=arguments[_a];return va},createFiveProvider=react.createFiveProvider=function(va){return va===void 0&&(va={}),function(_a){function _s(Ss){var Ms,Cs=this;Cs=_a.call(this,Ss)||this;var Ts=function(Bs){var Ps=Bs===void 0?{}:Bs,Ls=Ps.backgroundColor,Rs=Ls===void 0?1579548:Ls,$s=Ps.backgroundAlpha,Fs=$s===void 0?1:$s,Os=Ps.pixelRatio,Gs=Os===void 0?1:Os;if(typeof window<"u"){var Ns=a.shift();return Ns||((Ns=new i.WebGLRenderer({antialias:!1,alpha:!0})).outputEncoding=i.sRGBEncoding),Ns.setPixelRatio(Gs),Ns.setClearColor(Rs,Fs),Ns.autoClear=!0,Ns}}({pixelRatio:r$2.getViewportScale()===1?window.devicePixelRatio:1});return Cs.five=new r$2.Five(e$2.__assign({renderer:Ts},va)),(Ss.work||Ss.initialWork)&&Cs.five.load(Ss.work||Ss.initialWork,Ss.initialState,void 0,(Ms=Ss.initialUserAction)===null||Ms===void 0||Ms),Cs.five.on("load",function(){var Bs;Cs.props.onWorkChange&&Cs.props.onWorkChange((Bs=Cs.five)===null||Bs===void 0?void 0:Bs.work)}),Cs.five.on("stateChange",function(Bs,Ps){Cs.props.onStateChange&&Cs.props.onStateChange(Bs,Ps)}),Cs.five.on("currentStateChange",function(Bs,Ps){Cs.props.onCurrentStateChange&&Cs.props.onCurrentStateChange(Bs,Ps)}),Cs.five.on("error",function(Bs){Cs.props.onError?Cs.props.onError(Bs):console.warn(Bs.message)}),Cs}return e$2.__extends(_s,_a),_s.prototype.loadWork=function(Ss,Ms,Cs,Ts){if(Ts===void 0&&(Ts=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(Ss,Ms,Cs,Ts)},_s.prototype.shouldComponentUpdate=function(Ss){var Ms,Cs;return Ss.work&&Ss.work!==((Ms=this.five)===null||Ms===void 0?void 0:Ms.work)&&((Cs=this.five)===null||Cs===void 0||Cs.load(Ss.work,Ss.initialState)),!0},_s.prototype.componentWillUnmount=function(){var Ss;this.five&&(this.five.dispose(),(Ss=this.five.renderer)&&a.indexOf(Ss)===-1&&a.push(Ss),delete this.five)},_s.prototype.render=function(){var Ss=this;return u$1.createElement(f$3.Provider,{value:{five:this.five,loadWork:function(){for(var Ms=[],Cs=0;Cs<arguments.length;Cs++)Ms[Cs]=arguments[Cs];return Ss.loadWork.apply(Ss,Ms)}}},this.props.children)},_s}(u$1.Component)},react.createStore=function(va){var _a=u$1.createContext(null);return{useStore:function(_s){var Ss=u$1.useContext(_a);if(Ss===null)throw new Error("StoreProvider never found.");var Ms=u$1.useRef(!0),Cs=u$1.useState(Ss.getValues(_s)),Ts=Cs[0],Bs=Cs[1],Ps=e$2.__spreadArray([Ss],_s,!0);return u$1.useLayoutEffect(function(){return Ms.current?Ms.current=!1:Bs(Ss.getValues(_s)),Ss.on(_s,function(Ls){return Bs(Ls)})},Ps),[Ts,u$1.useCallback(function(Ls){return Ss.setValues(_s,Ls)},Ps)]},useStoreSetter:function(_s){var Ss=u$1.useContext(_a);if(Ss===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(Ms){return Ss.setValues(_s,Ms)},e$2.__spreadArray([Ss],_s,!0))},watchStore:function(_s,Ss,Ms){var Cs=u$1.useContext(_a);if(Cs===null)throw new Error("StoreProvider never found.");var Ts=e$2.__spreadArray([Cs],_s,!0);Ms!==void 0&&(Ts=Ts.concat(Ms)),u$1.useLayoutEffect(function(){return Cs.on(_s,Ss)},Ts)},useStoreAction:function(_s){var Ss=u$1.useContext(_a);if(Ss===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(){for(var Ms=[],Cs=0;Cs<arguments.length;Cs++)Ms[Cs]=arguments[Cs];var Ts=va[_s],Bs=Ts[0],Ps=Ts.slice(1),Ls=function(){return Ss.getValues(Ps)},Rs=function($s){return Ss.setValues(Ps,$s)};return Bs.apply(void 0,e$2.__spreadArray([Ls,Rs],Ms,!1))},[])},StoreProvider:function(_s){function Ss(Ms){var Cs=_s.call(this,Ms)||this;return Cs.store=new A$2(Ms.initialValue,function(){for(var Ts,Bs=[],Ps=0;Ps<arguments.length;Ps++)Bs[Ps]=arguments[Ps];Cs.props.onValuesChange&&(Ts=Cs.props).onValuesChange.apply(Ts,Bs)}),Cs}return e$2.__extends(Ss,_s),Ss.prototype.shouldComponentUpdate=function(Ms){return Ms.children!==this.props.children},Ss.prototype.render=function(){return u$1.createElement(_a.Provider,{value:this.store},this.props.children)},Ss}(u$1.Component)}},unsafe__useFiveInstance=react.unsafe__useFiveInstance=function(){return s()},react.useFiveAction=function(){var va=s();return{updateCamera:u$1.useCallback(function(_a,_s){return va.updateCamera(_a,_s)},[va]),initBasisLoader:u$1.useCallback(function(_a){return va.initBasisLoader(_a)},[va]),getPixels:u$1.useCallback(function(_a,_s,Ss,Ms,Cs){return va.getPixels(_a,_s,Ss,Ms,Cs)},[va]),render:u$1.useCallback(function(_a){return va.render(_a)},[va]),needsRender:u$1.useCallback(function(){return va.needsRender=!0},[va]),preloadPano:u$1.useCallback(function(_a,_s){return va.preloadPano(_a,_s)},[va])}},react.useFiveCameraDirection=function(){var va=s(),_a=u$1.useState(function(){return m$3(va)}),_s=_a[0],Ss=_a[1];return u$1.useLayoutEffect(function(){return va.on("cameraUpdate",function(){return Ss(m$3(va))})},[va]),_s},react.useFiveCameraRaycaster=function(){var va=s(),_a=u$1.useState(function(){return h$3(va)}),_s=_a[0],Ss=_a[1];return u$1.useLayoutEffect(function(){return va.on("cameraUpdate",function(){return Ss(h$3(va))})},[va]),_s},react.useFiveCurrentObserver=function(){var va=s(),_a=u$1.useState(function(){return va.getCurrentState()}),_s=_a[0],Ss=_a[1];return u$1.useLayoutEffect(function(){return va.on("currentStateChange",function(){return Ss(va.getCurrentState())})},[va]),va.work?va.work.observers[_s.panoIndex]:null},react.useFiveCurrentState=function(){var va=s(),_a=u$1.useState(function(){return va.getCurrentState()}),_s=_a[0],Ss=_a[1],Ms=u$1.useCallback(function(Cs,Ts,Bs){Ts===void 0&&(Ts=!1),Bs===void 0&&(Bs=!0);var Ps=typeof Cs=="function"?Cs(va.getCurrentState()):Cs;va.setState(Ps,Ts,Bs)},[va]);return u$1.useLayoutEffect(function(){return va.on("currentStateChange",function(){return Ss(va.getCurrentState())})},[va]),[_s,Ms]},useFiveEventCallback=react.useFiveEventCallback=function(va,_a,_s){var Ss=s(),Ms=[Ss,va];_s!==void 0&&(Ms=Ms.concat(_s)),u$1.useLayoutEffect(function(){return Ss.on(va,_a)},Ms)},react.useFiveFloor=function(){var va=s(),_a=u$1.useState(va.model.shownFloor),_s=_a[0],Ss=_a[1],Ms=u$1.useState(va.model.floorLength),Cs=Ms[0],Ts=Ms[1],Bs=u$1.useCallback(function(Ps){typeof Ps=="number"?va.model.show(Ps):va.model.show()},[va]);return u$1.useLayoutEffect(function(){var Ps=[];return Ps.push(va.on("modelShownFloorChange",function(){return Ss(va.model.shownFloor)})),Ps.push(va.on("modelLoaded",function(){return Ts(va.model.floorLength)})),function(){for(var Ls;Ls=Ps.shift();)Ls()}},[va]),[_s,Cs,Bs]},react.useFiveHelper=function(){var va=s(),_a=u$1.useState(va.helperVisible),_s=_a[0],Ss=_a[1],Ms=u$1.useCallback(function(Cs){va.helperVisible=Cs},[va]);return u$1.useLayoutEffect(function(){return va.on("helpersVisibleChange",function(Cs){return Ss(Cs)})},[va]),[_s,Ms]},react.useFiveModelIntersectRaycaster=function(){var va=s();return u$1.useCallback(function(_a){return va.model.intersectRaycaster(_a)},[va])},useFiveModelReadyState=react.useFiveModelReadyState=function(){var va=s(),_a=u$1.useState(function(){return y$2(va)}),_s=_a[0],Ss=_a[1];return u$1.useLayoutEffect(function(){return va.on("modelLoaded",function(){return Ss(y$2(va))})},[va]),_s},react.useFiveProject2d=function(){var va=s(),_a=u$1.useState(function(){return Symbol()});_a[0];var _s=_a[1];return u$1.useLayoutEffect(function(){return va.on("cameraUpdate",function(){return _s(Symbol())})},[va]),u$1.useCallback(function(Ss,Ms){return va.project2d(Ss,Ms)},[va])},react.useFiveScene=v$2,react.useFiveSceneEffect=d$2,useFiveState=react.useFiveState=function(){var va=s(),_a=u$1.useState(function(){return p$3(va)}),_s=_a[0],Ss=_a[1],Ms=u$1.useCallback(function(Cs,Ts,Bs){Ts===void 0&&(Ts=!1),Bs===void 0&&(Bs=!0);var Ps=typeof Cs=="function"?Cs(va.getCurrentState()):Cs;va.setState(Ps,Ts,Bs)},[va]);return u$1.useLayoutEffect(function(){return va.on("stateChange",function(){return Ss(p$3(va))})},[va]),[_s,Ms]},react.useFiveWork=function(){var va=s(),_a=c$2(),_s=u$1.useState(function(){return va.work}),Ss=_s[0],Ms=_s[1];return u$1.useLayoutEffect(function(){return va.on("load",function(){return Ms(va.work)})},[va]),[Ss,_a]},react.withFive=function(va){return function(_a){return u$1.forwardRef(function(_s,Ss){var Ms=s(),Cs=c$2(),Ts=function(bl,Bl){return[S("unsafe__fiveInstance",Bl)?bl:void 0]}(Ms,va)[0],Bs=function(bl,Bl){var Cl=S("state",Bl),Sl=u$1.useState(Symbol()),El=Sl[0],Rl=Sl[1],Fl=u$1.useMemo(function(){if(Cl)return e$2.__assign({},bl.state)},[bl,El]);return u$1.useLayoutEffect(function(){if(Cl)return bl.on("stateChange",function(){return Rl(Symbol())})},[bl]),[Fl,El]}(Ms,va),Ps=Bs[0],Ls=Bs[1],Rs=function(bl,Bl){var Cl=S("currentState",Bl),Sl=u$1.useState(Symbol()),El=Sl[0],Rl=Sl[1],Fl=u$1.useMemo(function(){if(Cl)return bl.getCurrentState()},[bl,El]);return u$1.useLayoutEffect(function(){if(Cl)return bl.on("currentStateChange",function(){return Rl(Symbol())})},[bl]),[Fl,El]}(Ms,va),$s=Rs[0],Fs=Rs[1],Os=function(bl,Bl){var Cl=S("currentObserver",Bl),Sl=u$1.useState(Symbol()),El=Sl[0],Rl=Sl[1],Fl=u$1.useMemo(function(){if(Cl)return bl.getCurrentState()},[bl,El]);return u$1.useLayoutEffect(function(){if(Cl)return bl.on("currentStateChange",function(){return Rl(Symbol())})},[bl]),[Fl?bl.work?bl.work.observers[Fl.panoIndex]:null:void 0,El]}(Ms,va),Gs=Os[0],Ns=Os[1],Vs=function(bl,Bl){var Cl=S("work",Bl),Sl=u$1.useState(Symbol()),El=Sl[0],Rl=Sl[1],Fl=u$1.useMemo(function(){if(Cl)return bl.work},[bl,El]);return u$1.useLayoutEffect(function(){if(Cl)return bl.on("load",function(){return Rl(Symbol())})},[bl]),[Fl,El]}(Ms,va),Ds=Vs[0],ks=Vs[1],Us=function(bl,Bl){var Cl=S("model",Bl),Sl=u$1.useState(Symbol()),El=Sl[0],Rl=Sl[1],Fl=u$1.useMemo(function(){if(Cl)return bl.model},[bl,El]);return u$1.useLayoutEffect(function(){if(Cl)return bl.on("modelLoaded",function(){return Rl(Symbol())})},[bl]),[Fl,El]}(Ms,va),zs=Us[0],Ws=Us[1],qs=function(bl,Bl){return[S("scene",Bl)?bl.scene:void 0]}(Ms,va)[0],Zs=function(bl,Bl){var Cl=S("cameraDirection",Bl),Sl=u$1.useState(Symbol()),El=Sl[0],Rl=Sl[1],Fl=u$1.useMemo(function(){if(Cl)return bl.camera.getWorldDirection(new i.Vector3)},[bl,El]);return u$1.useLayoutEffect(function(){if(Cl)return bl.on("cameraUpdate",function(){return Rl(Symbol())})},[bl]),[Fl,El]}(Ms,va),el=Zs[0],Js=Zs[1],Hs=function(bl,Bl){var Cl=S("cameraRaycaster",Bl),Sl=u$1.useState(Symbol()),El=Sl[0],Rl=Sl[1],Fl=u$1.useMemo(function(){if(Cl){var jl=bl.camera.getWorldDirection(new i.Vector3);return new i.Raycaster(bl.camera.position,jl)}},[bl,El]);return u$1.useLayoutEffect(function(){if(Cl)return bl.on("cameraUpdate",function(){return Rl(Symbol())})},[bl]),[Fl,El]}(Ms,va),Qs=Hs[0],js=Hs[1],Ks=function(bl,Bl){var Cl=S("modelReadyState",Bl),Sl=u$1.useState(Symbol()),El=Sl[0],Rl=Sl[1],Fl=u$1.useMemo(function(){if(Cl)return bl.model.empty?"Empty":"Loaded"},[bl,El]);return u$1.useLayoutEffect(function(){if(Cl)return bl.on("modelLoaded",function(){return Rl(Symbol())})},[bl]),[Fl,El]}(Ms,va),Xs=Ks[0],Ys=Ks[1],rl=function(bl,Bl){var Cl=S("shownFloor",Bl),Sl=u$1.useState(Symbol()),El=Sl[0],Rl=Sl[1],Fl=u$1.useMemo(function(){if(Cl)return bl.model.shownFloor},[bl,El]);return u$1.useLayoutEffect(function(){if(Cl)return bl.on("modelShownFloorChange",function(){return Rl(Symbol())})},[bl]),[Fl,El]}(Ms,va),tl=rl[0],il=rl[1],ll=function(bl,Bl){var Cl=S("totalFloorLength",Bl),Sl=u$1.useState(Symbol()),El=Sl[0],Rl=Sl[1],Fl=u$1.useMemo(function(){if(Cl)return bl.model.hasFloors()},[bl,El]);return u$1.useLayoutEffect(function(){if(Cl)return bl.on("modelLoaded",function(){return Rl(Symbol())})},[bl]),[Fl,El]}(Ms,va),cl=ll[0],al=ll[1],dl=function(bl,Bl){var Cl=S("helperVisible",Bl),Sl=u$1.useState(Symbol()),El=Sl[0],Rl=Sl[1],Fl=u$1.useMemo(function(){if(Cl)return bl.helperVisible},[bl,El]);return u$1.useLayoutEffect(function(){if(Cl)return bl.on("helpersVisibleChange",function(){return Rl(Symbol())})},[bl]),[Fl,El]}(Ms,va),yl=dl[0],xl=dl[1],wl=u$1.useMemo(function(){var bl={};return g$3(bl,{setState:b$2(Ms,va),loadWork:C$1(Cs,va),on:w$2(Ms,va),once:E$1(Ms,va),off:k$2(Ms,va),intersectRaycaster:x$2(Ms,va),project2d:L(Ms,va),updateCamera:F$1(Ms,va),initBasisLoader:_$1(Ms,va),getPixels:P(Ms,va),render:R(Ms,va),needsRender:V(Ms,va),preloadPano:M(Ms,va),showFloor:W(Ms,va),toggleHelperVisible:O(Ms,va)}),bl},[Ms,Cs]),Al=u$1.useMemo(function(){var bl=e$2.__assign({},wl);return g$3(bl,{unsafe__fiveInstance:Ts,state:Ps,currentState:$s,currentObserver:Gs,work:Ds,model:zs,scene:qs,cameraDirection:el,cameraRaycaster:Qs,modelReadyState:Xs,shownFloor:tl,totalFloorLength:cl,helperVisible:yl}),bl},[Ms,wl,Ls,Fs,Ns,ks,Ws,Js,js,Ys,il,al,xl]);return u$1.createElement(_a,e$2.__assign({ref:Ss,$five:Al},_s))})}};const common={black:"#000",white:"#fff"};var common$1=common;const red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var red$1=red;const purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var purple$1=purple;const blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var blue$1=blue;const lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var lightBlue$1=lightBlue;const green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var green$1=green;const orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var orange$1=orange;const grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var grey$1=grey;function _extends(){return _extends=Object.assign||function(va){for(var _a=1;_a<arguments.length;_a++){var _s=arguments[_a];for(var Ss in _s)Object.prototype.hasOwnProperty.call(_s,Ss)&&(va[Ss]=_s[Ss])}return va},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(va,_a){if(va==null)return{};var _s={},Ss=Object.keys(va),Ms,Cs;for(Cs=0;Cs<Ss.length;Cs++)Ms=Ss[Cs],!(_a.indexOf(Ms)>=0)&&(_s[Ms]=va[Ms]);return _s}function memoize$1(va){var _a=Object.create(null);return function(_s){return _a[_s]===void 0&&(_a[_s]=va(_s)),_a[_s]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(va){return reactPropsRegex.test(va)||va.charCodeAt(0)===111&&va.charCodeAt(1)===110&&va.charCodeAt(2)<91});function sheetForTag(va){if(va.sheet)return va.sheet;for(var _a=0;_a<document.styleSheets.length;_a++)if(document.styleSheets[_a].ownerNode===va)return document.styleSheets[_a]}function createStyleElement(va){var _a=document.createElement("style");return _a.setAttribute("data-emotion",va.key),va.nonce!==void 0&&_a.setAttribute("nonce",va.nonce),_a.appendChild(document.createTextNode("")),_a.setAttribute("data-s",""),_a}var StyleSheet=function(){function va(_s){var Ss=this;this._insertTag=function(Ms){var Cs;Ss.tags.length===0?Ss.insertionPoint?Cs=Ss.insertionPoint.nextSibling:Ss.prepend?Cs=Ss.container.firstChild:Cs=Ss.before:Cs=Ss.tags[Ss.tags.length-1].nextSibling,Ss.container.insertBefore(Ms,Cs),Ss.tags.push(Ms)},this.isSpeedy=_s.speedy===void 0?!0:_s.speedy,this.tags=[],this.ctr=0,this.nonce=_s.nonce,this.key=_s.key,this.container=_s.container,this.prepend=_s.prepend,this.insertionPoint=_s.insertionPoint,this.before=null}var _a=va.prototype;return _a.hydrate=function(Ss){Ss.forEach(this._insertTag)},_a.insert=function(Ss){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var Ms=this.tags[this.tags.length-1];if(this.isSpeedy){var Cs=sheetForTag(Ms);try{Cs.insertRule(Ss,Cs.cssRules.length)}catch{}}else Ms.appendChild(document.createTextNode(Ss));this.ctr++},_a.flush=function(){this.tags.forEach(function(Ss){return Ss.parentNode&&Ss.parentNode.removeChild(Ss)}),this.tags=[],this.ctr=0},va}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(va,_a){return(((_a<<2^charat(va,0))<<2^charat(va,1))<<2^charat(va,2))<<2^charat(va,3)}function trim(va){return va.trim()}function match(va,_a){return(va=_a.exec(va))?va[0]:va}function replace(va,_a,_s){return va.replace(_a,_s)}function indexof(va,_a){return va.indexOf(_a)}function charat(va,_a){return va.charCodeAt(_a)|0}function substr(va,_a,_s){return va.slice(_a,_s)}function strlen(va){return va.length}function sizeof(va){return va.length}function append(va,_a){return _a.push(va),va}function combine(va,_a){return va.map(_a).join("")}var line=1,column=1,length=0,position$1=0,character=0,characters="";function node(va,_a,_s,Ss,Ms,Cs,Ts){return{value:va,root:_a,parent:_s,type:Ss,props:Ms,children:Cs,line,column,length:Ts,return:""}}function copy(va,_a){return assign(node("",null,null,"",null,null,0),va,{length:-va.length},_a)}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice(va,_a){return substr(characters,va,_a)}function token(va){switch(va){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(va){return line=column=1,length=strlen(characters=va),position$1=0,[]}function dealloc(va){return characters="",va}function delimit(va){return trim(slice(position$1-1,delimiter(va===91?va+2:va===40?va+1:va)))}function whitespace(va){for(;(character=peek())&&character<33;)next();return token(va)>2||token(character)>3?"":" "}function escaping(va,_a){for(;--_a&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(va,caret()+(_a<6&&peek()==32&&next()==32))}function delimiter(va){for(;next();)switch(character){case va:return position$1;case 34:case 39:va!==34&&va!==39&&delimiter(character);break;case 40:va===41&&delimiter(va);break;case 92:next();break}return position$1}function commenter(va,_a){for(;next()&&va+character!==47+10;)if(va+character===42+42&&peek()===47)break;return"/*"+slice(_a,position$1-1)+"*"+from(va===47?va:next())}function identifier(va){for(;!token(peek());)next();return slice(va,position$1)}function compile(va){return dealloc(parse("",null,null,null,[""],va=alloc(va),0,[0],va))}function parse(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps){for(var Ls=0,Rs=0,$s=Ts,Fs=0,Os=0,Gs=0,Ns=1,Vs=1,Ds=1,ks=0,Us="",zs=Ms,Ws=Cs,qs=Ss,Zs=Us;Vs;)switch(Gs=ks,ks=next()){case 40:if(Gs!=108&&Zs.charCodeAt($s-1)==58){indexof(Zs+=replace(delimit(ks),"&","&\f"),"&\f")!=-1&&(Ds=-1);break}case 34:case 39:case 91:Zs+=delimit(ks);break;case 9:case 10:case 13:case 32:Zs+=whitespace(Gs);break;case 92:Zs+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),_a,_s),Ps);break;default:Zs+="/"}break;case 123*Ns:Bs[Ls++]=strlen(Zs)*Ds;case 125*Ns:case 59:case 0:switch(ks){case 0:case 125:Vs=0;case 59+Rs:Os>0&&strlen(Zs)-$s&&append(Os>32?declaration(Zs+";",Ss,_s,$s-1):declaration(replace(Zs," ","")+";",Ss,_s,$s-2),Ps);break;case 59:Zs+=";";default:if(append(qs=ruleset(Zs,_a,_s,Ls,Rs,Ms,Bs,Us,zs=[],Ws=[],$s),Cs),ks===123)if(Rs===0)parse(Zs,_a,qs,qs,zs,Cs,$s,Bs,Ws);else switch(Fs){case 100:case 109:case 115:parse(va,qs,qs,Ss&&append(ruleset(va,qs,qs,0,0,Ms,Bs,Us,Ms,zs=[],$s),Ws),Ms,Ws,$s,Bs,Ss?zs:Ws);break;default:parse(Zs,qs,qs,qs,[""],Ws,0,Bs,Ws)}}Ls=Rs=Os=0,Ns=Ds=1,Us=Zs="",$s=Ts;break;case 58:$s=1+strlen(Zs),Os=Gs;default:if(Ns<1){if(ks==123)--Ns;else if(ks==125&&Ns++==0&&prev()==125)continue}switch(Zs+=from(ks),ks*Ns){case 38:Ds=Rs>0?1:(Zs+="\f",-1);break;case 44:Bs[Ls++]=(strlen(Zs)-1)*Ds,Ds=1;break;case 64:peek()===45&&(Zs+=delimit(next())),Fs=peek(),Rs=$s=strlen(Us=Zs+=identifier(caret())),ks++;break;case 45:Gs===45&&strlen(Zs)==2&&(Ns=0)}}return Cs}function ruleset(va,_a,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs){for(var $s=Ms-1,Fs=Ms===0?Cs:[""],Os=sizeof(Fs),Gs=0,Ns=0,Vs=0;Gs<Ss;++Gs)for(var Ds=0,ks=substr(va,$s+1,$s=abs(Ns=Ts[Gs])),Us=va;Ds<Os;++Ds)(Us=trim(Ns>0?Fs[Ds]+" "+ks:replace(ks,/&\f/g,Fs[Ds])))&&(Ps[Vs++]=Us);return node(va,_a,_s,Ms===0?RULESET:Bs,Ps,Ls,Rs)}function comment(va,_a,_s){return node(va,_a,_s,COMMENT,from(char()),substr(va,2,-2),0)}function declaration(va,_a,_s,Ss){return node(va,_a,_s,DECLARATION,substr(va,0,Ss),substr(va,Ss+1,-1),Ss)}function prefix(va,_a){switch(hash(va,_a)){case 5103:return WEBKIT+"print-"+va+va;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+va+va;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+va+MOZ+va+MS+va+va;case 6828:case 4268:return WEBKIT+va+MS+va+va;case 6165:return WEBKIT+va+MS+"flex-"+va+va;case 5187:return WEBKIT+va+replace(va,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+va;case 5443:return WEBKIT+va+MS+"flex-item-"+replace(va,/flex-|-self/,"")+va;case 4675:return WEBKIT+va+MS+"flex-line-pack"+replace(va,/align-content|flex-|-self/,"")+va;case 5548:return WEBKIT+va+MS+replace(va,"shrink","negative")+va;case 5292:return WEBKIT+va+MS+replace(va,"basis","preferred-size")+va;case 6060:return WEBKIT+"box-"+replace(va,"-grow","")+WEBKIT+va+MS+replace(va,"grow","positive")+va;case 4554:return WEBKIT+replace(va,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+va;case 6187:return replace(replace(replace(va,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),va,"")+va;case 5495:case 3959:return replace(va,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(va,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+va+va;case 4095:case 3583:case 4068:case 2532:return replace(va,/(.+)-inline(.+)/,WEBKIT+"$1$2")+va;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(va)-1-_a>6)switch(charat(va,_a+1)){case 109:if(charat(va,_a+4)!==45)break;case 102:return replace(va,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(va,_a+3)==108?"$3":"$2-$3"))+va;case 115:return~indexof(va,"stretch")?prefix(replace(va,"stretch","fill-available"),_a)+va:va}break;case 4949:if(charat(va,_a+1)!==115)break;case 6444:switch(charat(va,strlen(va)-3-(~indexof(va,"!important")&&10))){case 107:return replace(va,":",":"+WEBKIT)+va;case 101:return replace(va,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(va,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+va}break;case 5936:switch(charat(va,_a+11)){case 114:return WEBKIT+va+MS+replace(va,/[svh]\w+-[tblr]{2}/,"tb")+va;case 108:return WEBKIT+va+MS+replace(va,/[svh]\w+-[tblr]{2}/,"tb-rl")+va;case 45:return WEBKIT+va+MS+replace(va,/[svh]\w+-[tblr]{2}/,"lr")+va}return WEBKIT+va+MS+va+va}return va}function serialize(va,_a){for(var _s="",Ss=sizeof(va),Ms=0;Ms<Ss;Ms++)_s+=_a(va[Ms],Ms,va,_a)||"";return _s}function stringify(va,_a,_s,Ss){switch(va.type){case IMPORT:case DECLARATION:return va.return=va.return||va.value;case COMMENT:return"";case KEYFRAMES:return va.return=va.value+"{"+serialize(va.children,Ss)+"}";case RULESET:va.value=va.props.join(",")}return strlen(_s=serialize(va.children,Ss))?va.return=va.value+"{"+_s+"}":""}function middleware(va){var _a=sizeof(va);return function(_s,Ss,Ms,Cs){for(var Ts="",Bs=0;Bs<_a;Bs++)Ts+=va[Bs](_s,Ss,Ms,Cs)||"";return Ts}}function rulesheet(va){return function(_a){_a.root||(_a=_a.return)&&va(_a)}}function prefixer(va,_a,_s,Ss){if(va.length>-1&&!va.return)switch(va.type){case DECLARATION:va.return=prefix(va.value,va.length);break;case KEYFRAMES:return serialize([copy(va,{value:replace(va.value,"@","@"+WEBKIT)})],Ss);case RULESET:if(va.length)return combine(va.props,function(Ms){switch(match(Ms,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(va,{props:[replace(Ms,/:(read-\w+)/,":"+MOZ+"$1")]})],Ss);case"::placeholder":return serialize([copy(va,{props:[replace(Ms,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(va,{props:[replace(Ms,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(va,{props:[replace(Ms,/:(plac\w+)/,MS+"input-$1")]})],Ss)}return""})}}var identifierWithPointTracking=function va(_a,_s,Ss){for(var Ms=0,Cs=0;Ms=Cs,Cs=peek(),Ms===38&&Cs===12&&(_s[Ss]=1),!token(Cs);)next();return slice(_a,position$1)},toRules=function va(_a,_s){var Ss=-1,Ms=44;do switch(token(Ms)){case 0:Ms===38&&peek()===12&&(_s[Ss]=1),_a[Ss]+=identifierWithPointTracking(position$1-1,_s,Ss);break;case 2:_a[Ss]+=delimit(Ms);break;case 4:if(Ms===44){_a[++Ss]=peek()===58?"&\f":"",_s[Ss]=_a[Ss].length;break}default:_a[Ss]+=from(Ms)}while(Ms=next());return _a},getRules=function va(_a,_s){return dealloc(toRules(alloc(_a),_s))},fixedElements=new WeakMap,compat=function va(_a){if(!(_a.type!=="rule"||!_a.parent||_a.length<1)){for(var _s=_a.value,Ss=_a.parent,Ms=_a.column===Ss.column&&_a.line===Ss.line;Ss.type!=="rule";)if(Ss=Ss.parent,!Ss)return;if(!(_a.props.length===1&&_s.charCodeAt(0)!==58&&!fixedElements.get(Ss))&&!Ms){fixedElements.set(_a,!0);for(var Cs=[],Ts=getRules(_s,Cs),Bs=Ss.props,Ps=0,Ls=0;Ps<Ts.length;Ps++)for(var Rs=0;Rs<Bs.length;Rs++,Ls++)_a.props[Ls]=Cs[Ps]?Ts[Ps].replace(/&\f/g,Bs[Rs]):Bs[Rs]+" "+Ts[Ps]}}},removeLabel=function va(_a){if(_a.type==="decl"){var _s=_a.value;_s.charCodeAt(0)===108&&_s.charCodeAt(2)===98&&(_a.return="",_a.value="")}},defaultStylisPlugins=[prefixer],createCache=function va(_a){var _s=_a.key;if(_s==="css"){var Ss=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(Ss,function(Ns){var Vs=Ns.getAttribute("data-emotion");Vs.indexOf(" ")!==-1&&(document.head.appendChild(Ns),Ns.setAttribute("data-s",""))})}var Ms=_a.stylisPlugins||defaultStylisPlugins,Cs={},Ts,Bs=[];Ts=_a.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+_s+' "]'),function(Ns){for(var Vs=Ns.getAttribute("data-emotion").split(" "),Ds=1;Ds<Vs.length;Ds++)Cs[Vs[Ds]]=!0;Bs.push(Ns)});var Ps,Ls=[compat,removeLabel];{var Rs,$s=[stringify,rulesheet(function(Ns){Rs.insert(Ns)})],Fs=middleware(Ls.concat(Ms,$s)),Os=function(Vs){return serialize(compile(Vs),Fs)};Ps=function(Vs,Ds,ks,Us){Rs=ks,Os(Vs?Vs+"{"+Ds.styles+"}":Ds.styles),Us&&(Gs.inserted[Ds.name]=!0)}}var Gs={key:_s,sheet:new StyleSheet({key:_s,container:Ts,nonce:_a.nonce,speedy:_a.speedy,prepend:_a.prepend,insertionPoint:_a.insertionPoint}),nonce:_a.nonce,inserted:Cs,registered:{},insert:Ps};return Gs.sheet.hydrate(Bs),Gs},reactIs$1={exports:{}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$1=b$1?Symbol.for("react.portal"):60106,e$1=b$1?Symbol.for("react.fragment"):60107,f$2=b$1?Symbol.for("react.strict_mode"):60108,g$2=b$1?Symbol.for("react.profiler"):60114,h$2=b$1?Symbol.for("react.provider"):60109,k$1=b$1?Symbol.for("react.context"):60110,l$1=b$1?Symbol.for("react.async_mode"):60111,m$2=b$1?Symbol.for("react.concurrent_mode"):60111,n$2=b$1?Symbol.for("react.forward_ref"):60112,p$2=b$1?Symbol.for("react.suspense"):60113,q$2=b$1?Symbol.for("react.suspense_list"):60120,r$1=b$1?Symbol.for("react.memo"):60115,t=b$1?Symbol.for("react.lazy"):60116,v$1=b$1?Symbol.for("react.block"):60121,w$1=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y$1=b$1?Symbol.for("react.scope"):60119;function z$1(va){if(typeof va=="object"&&va!==null){var _a=va.$$typeof;switch(_a){case c$1:switch(va=va.type,va){case l$1:case m$2:case e$1:case g$2:case f$2:case p$2:return va;default:switch(va=va&&va.$$typeof,va){case k$1:case n$2:case t:case r$1:case h$2:return va;default:return _a}}case d$1:return _a}}}function A$1(va){return z$1(va)===m$2}reactIs_production_min$1.AsyncMode=l$1;reactIs_production_min$1.ConcurrentMode=m$2;reactIs_production_min$1.ContextConsumer=k$1;reactIs_production_min$1.ContextProvider=h$2;reactIs_production_min$1.Element=c$1;reactIs_production_min$1.ForwardRef=n$2;reactIs_production_min$1.Fragment=e$1;reactIs_production_min$1.Lazy=t;reactIs_production_min$1.Memo=r$1;reactIs_production_min$1.Portal=d$1;reactIs_production_min$1.Profiler=g$2;reactIs_production_min$1.StrictMode=f$2;reactIs_production_min$1.Suspense=p$2;reactIs_production_min$1.isAsyncMode=function(va){return A$1(va)||z$1(va)===l$1};reactIs_production_min$1.isConcurrentMode=A$1;reactIs_production_min$1.isContextConsumer=function(va){return z$1(va)===k$1};reactIs_production_min$1.isContextProvider=function(va){return z$1(va)===h$2};reactIs_production_min$1.isElement=function(va){return typeof va=="object"&&va!==null&&va.$$typeof===c$1};reactIs_production_min$1.isForwardRef=function(va){return z$1(va)===n$2};reactIs_production_min$1.isFragment=function(va){return z$1(va)===e$1};reactIs_production_min$1.isLazy=function(va){return z$1(va)===t};reactIs_production_min$1.isMemo=function(va){return z$1(va)===r$1};reactIs_production_min$1.isPortal=function(va){return z$1(va)===d$1};reactIs_production_min$1.isProfiler=function(va){return z$1(va)===g$2};reactIs_production_min$1.isStrictMode=function(va){return z$1(va)===f$2};reactIs_production_min$1.isSuspense=function(va){return z$1(va)===p$2};reactIs_production_min$1.isValidElementType=function(va){return typeof va=="string"||typeof va=="function"||va===e$1||va===m$2||va===g$2||va===f$2||va===p$2||va===q$2||typeof va=="object"&&va!==null&&(va.$$typeof===t||va.$$typeof===r$1||va.$$typeof===h$2||va.$$typeof===k$1||va.$$typeof===n$2||va.$$typeof===w$1||va.$$typeof===x$1||va.$$typeof===y$1||va.$$typeof===v$1)};reactIs_production_min$1.typeOf=z$1;reactIs$1.exports=reactIs_production_min$1;var reactIs=reactIs$1.exports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser=!0;function getRegisteredStyles(va,_a,_s){var Ss="";return _s.split(" ").forEach(function(Ms){va[Ms]!==void 0?_a.push(va[Ms]+";"):Ss+=Ms+" "}),Ss}var registerStyles=function va(_a,_s,Ss){var Ms=_a.key+"-"+_s.name;(Ss===!1||isBrowser===!1)&&_a.registered[Ms]===void 0&&(_a.registered[Ms]=_s.styles)},insertStyles=function va(_a,_s,Ss){registerStyles(_a,_s,Ss);var Ms=_a.key+"-"+_s.name;if(_a.inserted[_s.name]===void 0){var Cs=_s;do _a.insert(_s===Cs?"."+Ms:"",Cs,_a.sheet,!0),Cs=Cs.next;while(Cs!==void 0)}};function murmur2(va){for(var _a=0,_s,Ss=0,Ms=va.length;Ms>=4;++Ss,Ms-=4)_s=va.charCodeAt(Ss)&255|(va.charCodeAt(++Ss)&255)<<8|(va.charCodeAt(++Ss)&255)<<16|(va.charCodeAt(++Ss)&255)<<24,_s=(_s&65535)*1540483477+((_s>>>16)*59797<<16),_s^=_s>>>24,_a=(_s&65535)*1540483477+((_s>>>16)*59797<<16)^(_a&65535)*1540483477+((_a>>>16)*59797<<16);switch(Ms){case 3:_a^=(va.charCodeAt(Ss+2)&255)<<16;case 2:_a^=(va.charCodeAt(Ss+1)&255)<<8;case 1:_a^=va.charCodeAt(Ss)&255,_a=(_a&65535)*1540483477+((_a>>>16)*59797<<16)}return _a^=_a>>>13,_a=(_a&65535)*1540483477+((_a>>>16)*59797<<16),((_a^_a>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function va(_a){return _a.charCodeAt(1)===45},isProcessableValue=function va(_a){return _a!=null&&typeof _a!="boolean"},processStyleName=memoize$1(function(va){return isCustomProperty(va)?va:va.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function va(_a,_s){switch(_a){case"animation":case"animationName":if(typeof _s=="string")return _s.replace(animationRegex,function(Ss,Ms,Cs){return cursor={name:Ms,styles:Cs,next:cursor},Ms})}return unitlessKeys[_a]!==1&&!isCustomProperty(_a)&&typeof _s=="number"&&_s!==0?_s+"px":_s};function handleInterpolation(va,_a,_s){if(_s==null)return"";if(_s.__emotion_styles!==void 0)return _s;switch(typeof _s){case"boolean":return"";case"object":{if(_s.anim===1)return cursor={name:_s.name,styles:_s.styles,next:cursor},_s.name;if(_s.styles!==void 0){var Ss=_s.next;if(Ss!==void 0)for(;Ss!==void 0;)cursor={name:Ss.name,styles:Ss.styles,next:cursor},Ss=Ss.next;var Ms=_s.styles+";";return Ms}return createStringFromObject(va,_a,_s)}case"function":{if(va!==void 0){var Cs=cursor,Ts=_s(va);return cursor=Cs,handleInterpolation(va,_a,Ts)}break}}if(_a==null)return _s;var Bs=_a[_s];return Bs!==void 0?Bs:_s}function createStringFromObject(va,_a,_s){var Ss="";if(Array.isArray(_s))for(var Ms=0;Ms<_s.length;Ms++)Ss+=handleInterpolation(va,_a,_s[Ms])+";";else for(var Cs in _s){var Ts=_s[Cs];if(typeof Ts!="object")_a!=null&&_a[Ts]!==void 0?Ss+=Cs+"{"+_a[Ts]+"}":isProcessableValue(Ts)&&(Ss+=processStyleName(Cs)+":"+processStyleValue(Cs,Ts)+";");else if(Array.isArray(Ts)&&typeof Ts[0]=="string"&&(_a==null||_a[Ts[0]]===void 0))for(var Bs=0;Bs<Ts.length;Bs++)isProcessableValue(Ts[Bs])&&(Ss+=processStyleName(Cs)+":"+processStyleValue(Cs,Ts[Bs])+";");else{var Ps=handleInterpolation(va,_a,Ts);switch(Cs){case"animation":case"animationName":{Ss+=processStyleName(Cs)+":"+Ps+";";break}default:Ss+=Cs+"{"+Ps+"}"}}}return Ss}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function va(_a,_s,Ss){if(_a.length===1&&typeof _a[0]=="object"&&_a[0]!==null&&_a[0].styles!==void 0)return _a[0];var Ms=!0,Cs="";cursor=void 0;var Ts=_a[0];Ts==null||Ts.raw===void 0?(Ms=!1,Cs+=handleInterpolation(Ss,_s,Ts)):Cs+=Ts[0];for(var Bs=1;Bs<_a.length;Bs++)Cs+=handleInterpolation(Ss,_s,_a[Bs]),Ms&&(Cs+=Ts[Bs]);labelPattern.lastIndex=0;for(var Ps="",Ls;(Ls=labelPattern.exec(Cs))!==null;)Ps+="-"+Ls[1];var Rs=murmur2(Cs)+Ps;return{name:Rs,styles:Cs,next:cursor}},EmotionCacheContext=react$1.exports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function va(_a){return react$1.exports.forwardRef(function(_s,Ss){var Ms=react$1.exports.useContext(EmotionCacheContext);return _a(_s,Ms,Ss)})},ThemeContext$2=react$1.exports.createContext({});React$1["useInsertionEffect"]&&React$1["useInsertionEffect"];React$1["useInsertionEffect"]?React$1["useInsertionEffect"]:react$1.exports.useLayoutEffect;function css(){for(var va=arguments.length,_a=new Array(va),_s=0;_s<va;_s++)_a[_s]=arguments[_s];return serializeStyles(_a)}var keyframes=function va(){var _a=css.apply(void 0,arguments),_s="animation-"+_a.name;return{name:_s,styles:"@keyframes "+_s+"{"+_a.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function va(_a){return _a!=="theme"},getDefaultShouldForwardProp=function va(_a){return typeof _a=="string"&&_a.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function va(_a,_s,Ss){var Ms;if(_s){var Cs=_s.shouldForwardProp;Ms=_a.__emotion_forwardProp&&Cs?function(Ts){return _a.__emotion_forwardProp(Ts)&&Cs(Ts)}:Cs}return typeof Ms!="function"&&Ss&&(Ms=_a.__emotion_forwardProp),Ms},useInsertionEffect=React$1["useInsertionEffect"]?React$1["useInsertionEffect"]:function va(_a){_a()};function useInsertionEffectMaybe(va){useInsertionEffect(va)}var Insertion=function va(_a){var _s=_a.cache,Ss=_a.serialized,Ms=_a.isStringTag;return registerStyles(_s,Ss,Ms),useInsertionEffectMaybe(function(){return insertStyles(_s,Ss,Ms)}),null},createStyled$1=function va(_a,_s){var Ss=_a.__emotion_real===_a,Ms=Ss&&_a.__emotion_base||_a,Cs,Ts;_s!==void 0&&(Cs=_s.label,Ts=_s.target);var Bs=composeShouldForwardProps(_a,_s,Ss),Ps=Bs||getDefaultShouldForwardProp(Ms),Ls=!Ps("as");return function(){var Rs=arguments,$s=Ss&&_a.__emotion_styles!==void 0?_a.__emotion_styles.slice(0):[];if(Cs!==void 0&&$s.push("label:"+Cs+";"),Rs[0]==null||Rs[0].raw===void 0)$s.push.apply($s,Rs);else{$s.push(Rs[0][0]);for(var Fs=Rs.length,Os=1;Os<Fs;Os++)$s.push(Rs[Os],Rs[0][Os])}var Gs=withEmotionCache(function(Ns,Vs,Ds){var ks=Ls&&Ns.as||Ms,Us="",zs=[],Ws=Ns;if(Ns.theme==null){Ws={};for(var qs in Ns)Ws[qs]=Ns[qs];Ws.theme=react$1.exports.useContext(ThemeContext$2)}typeof Ns.className=="string"?Us=getRegisteredStyles(Vs.registered,zs,Ns.className):Ns.className!=null&&(Us=Ns.className+" ");var Zs=serializeStyles($s.concat(zs),Vs.registered,Ws);Us+=Vs.key+"-"+Zs.name,Ts!==void 0&&(Us+=" "+Ts);var el=Ls&&Bs===void 0?getDefaultShouldForwardProp(ks):Ps,Js={};for(var Hs in Ns)Ls&&Hs==="as"||el(Hs)&&(Js[Hs]=Ns[Hs]);return Js.className=Us,Js.ref=Ds,react$1.exports.createElement(react$1.exports.Fragment,null,react$1.exports.createElement(Insertion,{cache:Vs,serialized:Zs,isStringTag:typeof ks=="string"}),react$1.exports.createElement(ks,Js))});return Gs.displayName=Cs!==void 0?Cs:"Styled("+(typeof Ms=="string"?Ms:Ms.displayName||Ms.name||"Component")+")",Gs.defaultProps=_a.defaultProps,Gs.__emotion_real=Gs,Gs.__emotion_base=Ms,Gs.__emotion_styles=$s,Gs.__emotion_forwardProp=Bs,Object.defineProperty(Gs,"toString",{value:function(){return"."+Ts}}),Gs.withComponent=function(Ns,Vs){return va(Ns,_extends({},_s,Vs,{shouldForwardProp:composeShouldForwardProps(Gs,Vs,!0)})).apply(void 0,$s)},Gs}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(va){newStyled[va]=newStyled(va)});var emStyled=newStyled,jsxRuntime$1={exports:{}},reactJsxRuntime_production_min={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=react$1.exports,g$1=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h$1=Symbol.for;g$1=h$1("react.element"),reactJsxRuntime_production_min.Fragment=h$1("react.fragment")}var m$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$1=Object.prototype.hasOwnProperty,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q$1(va,_a,_s){var Ss,Ms={},Cs=null,Ts=null;_s!==void 0&&(Cs=""+_s),_a.key!==void 0&&(Cs=""+_a.key),_a.ref!==void 0&&(Ts=_a.ref);for(Ss in _a)n$1.call(_a,Ss)&&!p$1.hasOwnProperty(Ss)&&(Ms[Ss]=_a[Ss]);if(va&&va.defaultProps)for(Ss in _a=va.defaultProps,_a)Ms[Ss]===void 0&&(Ms[Ss]=_a[Ss]);return{$$typeof:g$1,type:va,key:Cs,ref:Ts,props:Ms,_owner:m$1.current}}reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime$1.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime$1.exports.jsx,jsxs=jsxRuntime$1.exports.jsxs,Fragment=jsxRuntime$1.exports.Fragment;var jsxRuntime=Object.freeze(Object.defineProperty({__proto__:null,jsx,jsxs,Fragment},Symbol.toStringTag,{value:"Module"}));/** @license MUI v5.5.2
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$2(va,_a){return emStyled(va,_a)}function isPlainObject(va){return va!==null&&typeof va=="object"&&va.constructor===Object}function deepmerge(va,_a,_s={clone:!0}){const Ss=_s.clone?_extends({},va):va;return isPlainObject(va)&&isPlainObject(_a)&&Object.keys(_a).forEach(Ms=>{Ms!=="__proto__"&&(isPlainObject(_a[Ms])&&Ms in va&&isPlainObject(va[Ms])?Ss[Ms]=deepmerge(va[Ms],_a[Ms],_s):Ss[Ms]=_a[Ms])}),Ss}function formatMuiErrorMessage(va){let _a="https://mui.com/production-error/?code="+va;for(let _s=1;_s<arguments.length;_s+=1)_a+="&args[]="+encodeURIComponent(arguments[_s]);return"Minified MUI error #"+va+"; visit "+_a+" for the full message."}var reactIs_production_min={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=60103,c=60106,d=60107,e=60108,f=60114,g=60109,h=60110,k=60112,l=60113,m=60120,n=60115,p=60116,q=60121,r=60122,u=60117,v=60129,w=60131;if(typeof Symbol=="function"&&Symbol.for){var x=Symbol.for;b=x("react.element"),c=x("react.portal"),d=x("react.fragment"),e=x("react.strict_mode"),f=x("react.profiler"),g=x("react.provider"),h=x("react.context"),k=x("react.forward_ref"),l=x("react.suspense"),m=x("react.suspense_list"),n=x("react.memo"),p=x("react.lazy"),q=x("react.block"),r=x("react.server.block"),u=x("react.fundamental"),v=x("react.debug_trace_mode"),w=x("react.legacy_hidden")}function y(va){if(typeof va=="object"&&va!==null){var _a=va.$$typeof;switch(_a){case b:switch(va=va.type,va){case d:case f:case e:case l:case m:return va;default:switch(va=va&&va.$$typeof,va){case h:case k:case p:case n:case g:return va;default:return _a}}case c:return _a}}}var z=g,A=b,B=k,C=d,D=p,E=n,F=c,G=f,H=e,I=l;reactIs_production_min.ContextConsumer=h;reactIs_production_min.ContextProvider=z;reactIs_production_min.Element=A;reactIs_production_min.ForwardRef=B;reactIs_production_min.Fragment=C;reactIs_production_min.Lazy=D;reactIs_production_min.Memo=E;reactIs_production_min.Portal=F;reactIs_production_min.Profiler=G;reactIs_production_min.StrictMode=H;reactIs_production_min.Suspense=I;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(va){return y(va)===h};reactIs_production_min.isContextProvider=function(va){return y(va)===g};reactIs_production_min.isElement=function(va){return typeof va=="object"&&va!==null&&va.$$typeof===b};reactIs_production_min.isForwardRef=function(va){return y(va)===k};reactIs_production_min.isFragment=function(va){return y(va)===d};reactIs_production_min.isLazy=function(va){return y(va)===p};reactIs_production_min.isMemo=function(va){return y(va)===n};reactIs_production_min.isPortal=function(va){return y(va)===c};reactIs_production_min.isProfiler=function(va){return y(va)===f};reactIs_production_min.isStrictMode=function(va){return y(va)===e};reactIs_production_min.isSuspense=function(va){return y(va)===l};reactIs_production_min.isValidElementType=function(va){return typeof va=="string"||typeof va=="function"||va===d||va===f||va===v||va===e||va===l||va===m||va===w||typeof va=="object"&&va!==null&&(va.$$typeof===p||va.$$typeof===n||va.$$typeof===g||va.$$typeof===h||va.$$typeof===k||va.$$typeof===u||va.$$typeof===q||va[0]===r)};reactIs_production_min.typeOf=y;function capitalize(va){if(typeof va!="string")throw new Error(formatMuiErrorMessage(7));return va.charAt(0).toUpperCase()+va.slice(1)}function createChainedFunction(...va){return va.reduce((_a,_s)=>_s==null?_a:function(...Ms){_a.apply(this,Ms),_s.apply(this,Ms)},()=>{})}function debounce(va,_a=166){let _s;function Ss(...Ms){const Cs=()=>{va.apply(this,Ms)};clearTimeout(_s),_s=setTimeout(Cs,_a)}return Ss.clear=()=>{clearTimeout(_s)},Ss}function deprecatedPropType(va,_a){return()=>null}function isMuiElement(va,_a){return react$1.exports.isValidElement(va)&&_a.indexOf(va.type.muiName)!==-1}function ownerDocument(va){return va&&va.ownerDocument||document}function ownerWindow(va){return ownerDocument(va).defaultView||window}function requirePropFactory(va,_a){return()=>null}function setRef(va,_a){typeof va=="function"?va(_a):va&&(va.current=_a)}const useEnhancedEffect=typeof window<"u"?react$1.exports.useLayoutEffect:react$1.exports.useEffect;var useEnhancedEffect$1=useEnhancedEffect;let globalId=0;function useGlobalId(va){const[_a,_s]=react$1.exports.useState(va),Ss=va||_a;return react$1.exports.useEffect(()=>{_a==null&&(globalId+=1,_s(`mui-${globalId}`))},[_a]),Ss}const maybeReactUseId=React$1["useId"];function useId(va){if(maybeReactUseId!==void 0){const _a=maybeReactUseId();return va??_a}return useGlobalId(va)}function unsupportedProp(va,_a,_s,Ss,Ms){return null}function useControlled({controlled:va,default:_a,name:_s,state:Ss="value"}){const{current:Ms}=react$1.exports.useRef(va!==void 0),[Cs,Ts]=react$1.exports.useState(_a),Bs=Ms?va:Cs,Ps=react$1.exports.useCallback(Ls=>{Ms||Ts(Ls)},[]);return[Bs,Ps]}function useEventCallback(va){const _a=react$1.exports.useRef(va);return useEnhancedEffect$1(()=>{_a.current=va}),react$1.exports.useCallback((..._s)=>(0,_a.current)(..._s),[])}function useForkRef(va,_a){return react$1.exports.useMemo(()=>va==null&&_a==null?null:_s=>{setRef(va,_s),setRef(_a,_s)},[va,_a])}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(va){const{type:_a,tagName:_s}=va;return!!(_s==="INPUT"&&inputTypesWhitelist[_a]&&!va.readOnly||_s==="TEXTAREA"&&!va.readOnly||va.isContentEditable)}function handleKeyDown(va){va.metaKey||va.altKey||va.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(va){va.addEventListener("keydown",handleKeyDown,!0),va.addEventListener("mousedown",handlePointerDown,!0),va.addEventListener("pointerdown",handlePointerDown,!0),va.addEventListener("touchstart",handlePointerDown,!0),va.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(va){const{target:_a}=va;try{return _a.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(_a)}function useIsFocusVisible(){const va=react$1.exports.useCallback(Ms=>{Ms!=null&&prepare(Ms.ownerDocument)},[]),_a=react$1.exports.useRef(!1);function _s(){return _a.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),_a.current=!1,!0):!1}function Ss(Ms){return isFocusVisible(Ms)?(_a.current=!0,!0):!1}return{isFocusVisibleRef:_a,onFocus:Ss,onBlur:_s,ref:va}}function resolveProps(va,_a){const _s=_extends({},_a);return Object.keys(va).forEach(Ss=>{_s[Ss]===void 0&&(_s[Ss]=va[Ss])}),_s}function merge(va,_a){return _a?deepmerge(va,_a,{clone:!1}):va}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:va=>`@media (min-width:${values$1[va]}px)`};function handleBreakpoints(va,_a,_s){const Ss=va.theme||{};if(Array.isArray(_a)){const Cs=Ss.breakpoints||defaultBreakpoints;return _a.reduce((Ts,Bs,Ps)=>(Ts[Cs.up(Cs.keys[Ps])]=_s(_a[Ps]),Ts),{})}if(typeof _a=="object"){const Cs=Ss.breakpoints||defaultBreakpoints;return Object.keys(_a).reduce((Ts,Bs)=>{if(Object.keys(Cs.values||values$1).indexOf(Bs)!==-1){const Ps=Cs.up(Bs);Ts[Ps]=_s(_a[Bs],Bs)}else{const Ps=Bs;Ts[Ps]=_a[Ps]}return Ts},{})}return _s(_a)}function createEmptyBreakpointObject(va={}){var _a;return(va==null||(_a=va.keys)==null?void 0:_a.reduce((Ss,Ms)=>{const Cs=va.up(Ms);return Ss[Cs]={},Ss},{}))||{}}function removeUnusedBreakpoints(va,_a){return va.reduce((_s,Ss)=>{const Ms=_s[Ss];return(!Ms||Object.keys(Ms).length===0)&&delete _s[Ss],_s},_a)}function getPath(va,_a){return!_a||typeof _a!="string"?null:_a.split(".").reduce((_s,Ss)=>_s&&_s[Ss]?_s[Ss]:null,va)}function getValue$1(va,_a,_s,Ss=_s){let Ms;return typeof va=="function"?Ms=va(_s):Array.isArray(va)?Ms=va[_s]||Ss:Ms=getPath(va,_s)||Ss,_a&&(Ms=_a(Ms)),Ms}function style$1(va){const{prop:_a,cssProperty:_s=va.prop,themeKey:Ss,transform:Ms}=va,Cs=Ts=>{if(Ts[_a]==null)return null;const Bs=Ts[_a],Ps=Ts.theme,Ls=getPath(Ps,Ss)||{};return handleBreakpoints(Ts,Bs,$s=>{let Fs=getValue$1(Ls,Ms,$s);return $s===Fs&&typeof $s=="string"&&(Fs=getValue$1(Ls,Ms,`${_a}${$s==="default"?"":capitalize($s)}`,$s)),_s===!1?Fs:{[_s]:Fs}})};return Cs.propTypes={},Cs.filterProps=[_a],Cs}function compose(...va){const _a=va.reduce((Ss,Ms)=>(Ms.filterProps.forEach(Cs=>{Ss[Cs]=Ms}),Ss),{}),_s=Ss=>Object.keys(Ss).reduce((Ms,Cs)=>_a[Cs]?merge(Ms,_a[Cs](Ss)):Ms,{});return _s.propTypes={},_s.filterProps=va.reduce((Ss,Ms)=>Ss.concat(Ms.filterProps),[]),_s}function memoize(va){const _a={};return _s=>(_a[_s]===void 0&&(_a[_s]=va(_s)),_a[_s])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(va=>{if(va.length>2)if(aliases[va])va=aliases[va];else return[va];const[_a,_s]=va.split(""),Ss=properties[_a],Ms=directions[_s]||"";return Array.isArray(Ms)?Ms.map(Cs=>Ss+Cs):[Ss+Ms]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],spacingKeys=[...marginKeys,...paddingKeys];function createUnaryUnit(va,_a,_s,Ss){const Ms=getPath(va,_a)||_s;return typeof Ms=="number"?Cs=>typeof Cs=="string"?Cs:Ms*Cs:Array.isArray(Ms)?Cs=>typeof Cs=="string"?Cs:Ms[Cs]:typeof Ms=="function"?Ms:()=>{}}function createUnarySpacing(va){return createUnaryUnit(va,"spacing",8)}function getValue(va,_a){if(typeof _a=="string"||_a==null)return _a;const _s=Math.abs(_a),Ss=va(_s);return _a>=0?Ss:typeof Ss=="number"?-Ss:`-${Ss}`}function getStyleFromPropValue(va,_a){return _s=>va.reduce((Ss,Ms)=>(Ss[Ms]=getValue(_a,_s),Ss),{})}function resolveCssProperty(va,_a,_s,Ss){if(_a.indexOf(_s)===-1)return null;const Ms=getCssProperties(_s),Cs=getStyleFromPropValue(Ms,Ss),Ts=va[_s];return handleBreakpoints(va,Ts,Cs)}function style(va,_a){const _s=createUnarySpacing(va.theme);return Object.keys(va).map(Ss=>resolveCssProperty(va,_a,Ss,_s)).reduce(merge,{})}function spacing(va){return style(va,spacingKeys)}spacing.propTypes={};spacing.filterProps=spacingKeys;function getBorder(va){return typeof va!="number"?va:`${va}px solid`}const border=style$1({prop:"border",themeKey:"borders",transform:getBorder}),borderTop=style$1({prop:"borderTop",themeKey:"borders",transform:getBorder}),borderRight=style$1({prop:"borderRight",themeKey:"borders",transform:getBorder}),borderBottom=style$1({prop:"borderBottom",themeKey:"borders",transform:getBorder}),borderLeft=style$1({prop:"borderLeft",themeKey:"borders",transform:getBorder}),borderColor=style$1({prop:"borderColor",themeKey:"palette"}),borderTopColor=style$1({prop:"borderTopColor",themeKey:"palette"}),borderRightColor=style$1({prop:"borderRightColor",themeKey:"palette"}),borderBottomColor=style$1({prop:"borderBottomColor",themeKey:"palette"}),borderLeftColor=style$1({prop:"borderLeftColor",themeKey:"palette"}),borderRadius=va=>{if(va.borderRadius!==void 0&&va.borderRadius!==null){const _a=createUnaryUnit(va.theme,"shape.borderRadius",4),_s=Ss=>({borderRadius:getValue(_a,Ss)});return handleBreakpoints(va,va.borderRadius,_s)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];const borders=compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius);var borders$1=borders;const displayPrint=style$1({prop:"displayPrint",cssProperty:!1,transform:va=>({"@media print":{display:va}})}),displayRaw=style$1({prop:"display"}),overflow=style$1({prop:"overflow"}),textOverflow=style$1({prop:"textOverflow"}),visibility=style$1({prop:"visibility"}),whiteSpace=style$1({prop:"whiteSpace"});var display=compose(displayPrint,displayRaw,overflow,textOverflow,visibility,whiteSpace);const flexBasis=style$1({prop:"flexBasis"}),flexDirection=style$1({prop:"flexDirection"}),flexWrap=style$1({prop:"flexWrap"}),justifyContent=style$1({prop:"justifyContent"}),alignItems=style$1({prop:"alignItems"}),alignContent=style$1({prop:"alignContent"}),order=style$1({prop:"order"}),flex=style$1({prop:"flex"}),flexGrow=style$1({prop:"flexGrow"}),flexShrink=style$1({prop:"flexShrink"}),alignSelf=style$1({prop:"alignSelf"}),justifyItems=style$1({prop:"justifyItems"}),justifySelf=style$1({prop:"justifySelf"}),flexbox=compose(flexBasis,flexDirection,flexWrap,justifyContent,alignItems,alignContent,order,flex,flexGrow,flexShrink,alignSelf,justifyItems,justifySelf);var flexbox$1=flexbox;const gap=va=>{if(va.gap!==void 0&&va.gap!==null){const _a=createUnaryUnit(va.theme,"spacing",8),_s=Ss=>({gap:getValue(_a,Ss)});return handleBreakpoints(va,va.gap,_s)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=va=>{if(va.columnGap!==void 0&&va.columnGap!==null){const _a=createUnaryUnit(va.theme,"spacing",8),_s=Ss=>({columnGap:getValue(_a,Ss)});return handleBreakpoints(va,va.columnGap,_s)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=va=>{if(va.rowGap!==void 0&&va.rowGap!==null){const _a=createUnaryUnit(va.theme,"spacing",8),_s=Ss=>({rowGap:getValue(_a,Ss)});return handleBreakpoints(va,va.rowGap,_s)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"}),grid=compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);var grid$1=grid;const color=style$1({prop:"color",themeKey:"palette"}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette"}),palette=compose(color,bgcolor,backgroundColor);var palette$1=palette;const position=style$1({prop:"position"}),zIndex$2=style$1({prop:"zIndex",themeKey:"zIndex"}),top=style$1({prop:"top"}),right=style$1({prop:"right"}),bottom=style$1({prop:"bottom"}),left=style$1({prop:"left"});var positions=compose(position,zIndex$2,top,right,bottom,left);const boxShadow=style$1({prop:"boxShadow",themeKey:"shadows"});var shadows$2=boxShadow;function transform(va){return va<=1&&va!==0?`${va*100}%`:va}const width=style$1({prop:"width",transform}),maxWidth=va=>{if(va.maxWidth!==void 0&&va.maxWidth!==null){const _a=_s=>{var Ss,Ms,Cs;return{maxWidth:((Ss=va.theme)==null||(Ms=Ss.breakpoints)==null||(Cs=Ms.values)==null?void 0:Cs[_s])||values$1[_s]||transform(_s)}};return handleBreakpoints(va,va.maxWidth,_a)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform}),height=style$1({prop:"height",transform}),maxHeight=style$1({prop:"maxHeight",transform}),minHeight=style$1({prop:"minHeight",transform});style$1({prop:"size",cssProperty:"width",transform});style$1({prop:"size",cssProperty:"height",transform});const boxSizing=style$1({prop:"boxSizing"}),sizing=compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);var sizing$1=sizing;const fontFamily=style$1({prop:"fontFamily",themeKey:"typography"}),fontSize=style$1({prop:"fontSize",themeKey:"typography"}),fontStyle=style$1({prop:"fontStyle",themeKey:"typography"}),fontWeight=style$1({prop:"fontWeight",themeKey:"typography"}),letterSpacing=style$1({prop:"letterSpacing"}),textTransform=style$1({prop:"textTransform"}),lineHeight=style$1({prop:"lineHeight"}),textAlign=style$1({prop:"textAlign"}),typographyVariant=style$1({prop:"typography",cssProperty:!1,themeKey:"typography"}),typography=compose(typographyVariant,fontFamily,fontSize,fontStyle,fontWeight,letterSpacing,lineHeight,textAlign,textTransform);var typography$1=typography;const filterPropsMapping={borders:borders$1.filterProps,display:display.filterProps,flexbox:flexbox$1.filterProps,grid:grid$1.filterProps,positions:positions.filterProps,palette:palette$1.filterProps,shadows:shadows$2.filterProps,sizing:sizing$1.filterProps,spacing:spacing.filterProps,typography:typography$1.filterProps},styleFunctionMapping={borders:borders$1,display,flexbox:flexbox$1,grid:grid$1,positions,palette:palette$1,shadows:shadows$2,sizing:sizing$1,spacing,typography:typography$1},propToStyleFunction=Object.keys(filterPropsMapping).reduce((va,_a)=>(filterPropsMapping[_a].forEach(_s=>{va[_s]=styleFunctionMapping[_a]}),va),{});function objectsHaveSameKeys(...va){const _a=va.reduce((Ss,Ms)=>Ss.concat(Object.keys(Ms)),[]),_s=new Set(_a);return va.every(Ss=>_s.size===Object.keys(Ss).length)}function callIfFn(va,_a){return typeof va=="function"?va(_a):va}function unstable_createStyleFunctionSx(va=styleFunctionMapping){const _a=Object.keys(va).reduce((Ms,Cs)=>(va[Cs].filterProps.forEach(Ts=>{Ms[Ts]=va[Cs]}),Ms),{});function _s(Ms,Cs,Ts){const Bs={[Ms]:Cs,theme:Ts},Ps=_a[Ms];return Ps?Ps(Bs):{[Ms]:Cs}}function Ss(Ms){const{sx:Cs,theme:Ts={}}=Ms||{};if(!Cs)return null;function Bs(Ps){let Ls=Ps;if(typeof Ps=="function")Ls=Ps(Ts);else if(typeof Ps!="object")return Ps;if(!Ls)return null;const Rs=createEmptyBreakpointObject(Ts.breakpoints),$s=Object.keys(Rs);let Fs=Rs;return Object.keys(Ls).forEach(Os=>{const Gs=callIfFn(Ls[Os],Ts);if(Gs!=null)if(typeof Gs=="object")if(_a[Os])Fs=merge(Fs,_s(Os,Gs,Ts));else{const Ns=handleBreakpoints({theme:Ts},Gs,Vs=>({[Os]:Vs}));objectsHaveSameKeys(Ns,Gs)?Fs[Os]=Ss({sx:Gs,theme:Ts}):Fs=merge(Fs,Ns)}else Fs=merge(Fs,_s(Os,Gs,Ts))}),removeUnusedBreakpoints($s,Fs)}return Array.isArray(Cs)?Cs.map(Bs):Bs(Cs)}return Ss}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];var defaultStyleFunctionSx=styleFunctionSx;const _excluded$h=["sx"],splitProps=va=>{const _a={systemProps:{},otherProps:{}};return Object.keys(va).forEach(_s=>{propToStyleFunction[_s]?_a.systemProps[_s]=va[_s]:_a.otherProps[_s]=va[_s]}),_a};function extendSxProp(va){const{sx:_a}=va,_s=_objectWithoutPropertiesLoose(va,_excluded$h),{systemProps:Ss,otherProps:Ms}=splitProps(_s);let Cs;return Array.isArray(_a)?Cs=[Ss,..._a]:typeof _a=="function"?Cs=(...Ts)=>{const Bs=_a(...Ts);return isPlainObject(Bs)?_extends({},Ss,Bs):Ss}:Cs=_extends({},Ss,_a),_extends({},Ms,{sx:Cs})}function toVal(va){var _a,_s,Ss="";if(typeof va=="string"||typeof va=="number")Ss+=va;else if(typeof va=="object")if(Array.isArray(va))for(_a=0;_a<va.length;_a++)va[_a]&&(_s=toVal(va[_a]))&&(Ss&&(Ss+=" "),Ss+=_s);else for(_a in va)va[_a]&&(Ss&&(Ss+=" "),Ss+=_a);return Ss}function clsx(){for(var va=0,_a,_s,Ss="";va<arguments.length;)(_a=arguments[va++])&&(_s=toVal(_a))&&(Ss&&(Ss+=" "),Ss+=_s);return Ss}const _excluded$g=["values","unit","step"],sortBreakpointsValues=va=>{const _a=Object.keys(va).map(_s=>({key:_s,val:va[_s]}))||[];return _a.sort((_s,Ss)=>_s.val-Ss.val),_a.reduce((_s,Ss)=>_extends({},_s,{[Ss.key]:Ss.val}),{})};function createBreakpoints(va){const{values:_a={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:_s="px",step:Ss=5}=va,Ms=_objectWithoutPropertiesLoose(va,_excluded$g),Cs=sortBreakpointsValues(_a),Ts=Object.keys(Cs);function Bs(Fs){return`@media (min-width:${typeof _a[Fs]=="number"?_a[Fs]:Fs}${_s})`}function Ps(Fs){return`@media (max-width:${(typeof _a[Fs]=="number"?_a[Fs]:Fs)-Ss/100}${_s})`}function Ls(Fs,Os){const Gs=Ts.indexOf(Os);return`@media (min-width:${typeof _a[Fs]=="number"?_a[Fs]:Fs}${_s}) and (max-width:${(Gs!==-1&&typeof _a[Ts[Gs]]=="number"?_a[Ts[Gs]]:Os)-Ss/100}${_s})`}function Rs(Fs){return Ts.indexOf(Fs)+1<Ts.length?Ls(Fs,Ts[Ts.indexOf(Fs)+1]):Bs(Fs)}function $s(Fs){const Os=Ts.indexOf(Fs);return Os===0?Bs(Ts[1]):Os===Ts.length-1?Ps(Ts[Os]):Ls(Fs,Ts[Ts.indexOf(Fs)+1]).replace("@media","@media not all and")}return _extends({keys:Ts,values:Cs,up:Bs,down:Ps,between:Ls,only:Rs,not:$s,unit:_s},Ms)}const shape={borderRadius:4};var shape$1=shape;function createSpacing(va=8){if(va.mui)return va;const _a=createUnarySpacing({spacing:va}),_s=(...Ss)=>(Ss.length===0?[1]:Ss).map(Cs=>{const Ts=_a(Cs);return typeof Ts=="number"?`${Ts}px`:Ts}).join(" ");return _s.mui=!0,_s}const _excluded$f=["breakpoints","palette","spacing","shape"];function createTheme$1(va={},..._a){const{breakpoints:_s={},palette:Ss={},spacing:Ms,shape:Cs={}}=va,Ts=_objectWithoutPropertiesLoose(va,_excluded$f),Bs=createBreakpoints(_s),Ps=createSpacing(Ms);let Ls=deepmerge({breakpoints:Bs,direction:"ltr",components:{},palette:_extends({mode:"light"},Ss),spacing:Ps,shape:_extends({},shape$1,Cs)},Ts);return Ls=_a.reduce((Rs,$s)=>deepmerge(Rs,$s),Ls),Ls}const ThemeContext=react$1.exports.createContext(null);var ThemeContext$1=ThemeContext;function useTheme$2(){return react$1.exports.useContext(ThemeContext$1)}function isObjectEmpty(va){return Object.keys(va).length===0}function useTheme$1(va=null){const _a=useTheme$2();return!_a||isObjectEmpty(_a)?va:_a}const systemDefaultTheme$1=createTheme$1();function useTheme(va=systemDefaultTheme$1){return useTheme$1(va)}const _excluded$e=["className","component"];function createBox(va={}){const{defaultTheme:_a,defaultClassName:_s="MuiBox-root",generateClassName:Ss,styleFunctionSx:Ms=defaultStyleFunctionSx}=va,Cs=styled$2("div")(Ms);return react$1.exports.forwardRef(function(Ps,Ls){const Rs=useTheme(_a),$s=extendSxProp(Ps),{className:Fs,component:Os="div"}=$s,Gs=_objectWithoutPropertiesLoose($s,_excluded$e);return jsx(Cs,_extends({as:Os,ref:Ls,className:clsx(Fs,Ss?Ss(_s):_s),theme:Rs},Gs))})}const _excluded$d=["variant"];function isEmpty$1(va){return va.length===0}function propsToClassKey(va){const{variant:_a}=va,_s=_objectWithoutPropertiesLoose(va,_excluded$d);let Ss=_a||"";return Object.keys(_s).sort().forEach(Ms=>{Ms==="color"?Ss+=isEmpty$1(Ss)?va[Ms]:capitalize(va[Ms]):Ss+=`${isEmpty$1(Ss)?Ms:capitalize(Ms)}${capitalize(va[Ms].toString())}`}),Ss}const _excluded$c=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],_excluded2=["theme"],_excluded3=["theme"];function isEmpty(va){return Object.keys(va).length===0}const getStyleOverrides=(va,_a)=>_a.components&&_a.components[va]&&_a.components[va].styleOverrides?_a.components[va].styleOverrides:null,getVariantStyles=(va,_a)=>{let _s=[];_a&&_a.components&&_a.components[va]&&_a.components[va].variants&&(_s=_a.components[va].variants);const Ss={};return _s.forEach(Ms=>{const Cs=propsToClassKey(Ms.props);Ss[Cs]=Ms.style}),Ss},variantsResolver=(va,_a,_s,Ss)=>{var Ms,Cs;const{ownerState:Ts={}}=va,Bs=[],Ps=_s==null||(Ms=_s.components)==null||(Cs=Ms[Ss])==null?void 0:Cs.variants;return Ps&&Ps.forEach(Ls=>{let Rs=!0;Object.keys(Ls.props).forEach($s=>{Ts[$s]!==Ls.props[$s]&&va[$s]!==Ls.props[$s]&&(Rs=!1)}),Rs&&Bs.push(_a[propsToClassKey(Ls.props)])}),Bs};function shouldForwardProp(va){return va!=="ownerState"&&va!=="theme"&&va!=="sx"&&va!=="as"}const systemDefaultTheme=createTheme$1();function createStyled(va={}){const{defaultTheme:_a=systemDefaultTheme,rootShouldForwardProp:_s=shouldForwardProp,slotShouldForwardProp:Ss=shouldForwardProp,styleFunctionSx:Ms=defaultStyleFunctionSx}=va;return(Cs,Ts={})=>{const{name:Bs,slot:Ps,skipVariantsResolver:Ls,skipSx:Rs,overridesResolver:$s}=Ts,Fs=_objectWithoutPropertiesLoose(Ts,_excluded$c),Os=Ls!==void 0?Ls:Ps&&Ps!=="Root"||!1,Gs=Rs||!1;let Ns,Vs=shouldForwardProp;Ps==="Root"?Vs=_s:Ps&&(Vs=Ss);const Ds=styled$2(Cs,_extends({shouldForwardProp:Vs,label:Ns},Fs)),ks=(Us,...zs)=>{const Ws=zs?zs.map(Js=>typeof Js=="function"&&Js.__emotion_real!==Js?Hs=>{let{theme:Qs}=Hs,js=_objectWithoutPropertiesLoose(Hs,_excluded2);return Js(_extends({theme:isEmpty(Qs)?_a:Qs},js))}:Js):[];let qs=Us;Bs&&$s&&Ws.push(Js=>{const Hs=isEmpty(Js.theme)?_a:Js.theme,Qs=getStyleOverrides(Bs,Hs);if(Qs){const js={};return Object.entries(Qs).forEach(([Ks,Xs])=>{js[Ks]=typeof Xs=="function"?Xs(Js):Xs}),$s(Js,js)}return null}),Bs&&!Os&&Ws.push(Js=>{const Hs=isEmpty(Js.theme)?_a:Js.theme;return variantsResolver(Js,getVariantStyles(Bs,Hs),Hs,Bs)}),Gs||Ws.push(Js=>{const Hs=isEmpty(Js.theme)?_a:Js.theme;return Ms(_extends({},Js,{theme:Hs}))});const Zs=Ws.length-zs.length;if(Array.isArray(Us)&&Zs>0){const Js=new Array(Zs).fill("");qs=[...Us,...Js],qs.raw=[...Us.raw,...Js]}else typeof Us=="function"&&Us.__emotion_real!==Us&&(qs=Js=>{let{theme:Hs}=Js,Qs=_objectWithoutPropertiesLoose(Js,_excluded3);return Us(_extends({theme:isEmpty(Hs)?_a:Hs},Qs))});return Ds(qs,...Ws)};return Ds.withConfig&&(ks.withConfig=Ds.withConfig),ks}}function getThemeProps(va){const{theme:_a,name:_s,props:Ss}=va;return!_a||!_a.components||!_a.components[_s]||!_a.components[_s].defaultProps?Ss:resolveProps(_a.components[_s].defaultProps,Ss)}function useThemeProps$1({props:va,name:_a,defaultTheme:_s}){const Ss=useTheme(_s);return getThemeProps({theme:Ss,name:_a,props:va})}function clamp(va,_a=0,_s=1){return Math.min(Math.max(_a,va),_s)}function hexToRgb(va){va=va.slice(1);const _a=new RegExp(`.{1,${va.length>=6?2:1}}`,"g");let _s=va.match(_a);return _s&&_s[0].length===1&&(_s=_s.map(Ss=>Ss+Ss)),_s?`rgb${_s.length===4?"a":""}(${_s.map((Ss,Ms)=>Ms<3?parseInt(Ss,16):Math.round(parseInt(Ss,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(va){if(va.type)return va;if(va.charAt(0)==="#")return decomposeColor(hexToRgb(va));const _a=va.indexOf("("),_s=va.substring(0,_a);if(["rgb","rgba","hsl","hsla","color"].indexOf(_s)===-1)throw new Error(formatMuiErrorMessage(9,va));let Ss=va.substring(_a+1,va.length-1),Ms;if(_s==="color"){if(Ss=Ss.split(" "),Ms=Ss.shift(),Ss.length===4&&Ss[3].charAt(0)==="/"&&(Ss[3]=Ss[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(Ms)===-1)throw new Error(formatMuiErrorMessage(10,Ms))}else Ss=Ss.split(",");return Ss=Ss.map(Cs=>parseFloat(Cs)),{type:_s,values:Ss,colorSpace:Ms}}function recomposeColor(va){const{type:_a,colorSpace:_s}=va;let{values:Ss}=va;return _a.indexOf("rgb")!==-1?Ss=Ss.map((Ms,Cs)=>Cs<3?parseInt(Ms,10):Ms):_a.indexOf("hsl")!==-1&&(Ss[1]=`${Ss[1]}%`,Ss[2]=`${Ss[2]}%`),_a.indexOf("color")!==-1?Ss=`${_s} ${Ss.join(" ")}`:Ss=`${Ss.join(", ")}`,`${_a}(${Ss})`}function hslToRgb(va){va=decomposeColor(va);const{values:_a}=va,_s=_a[0],Ss=_a[1]/100,Ms=_a[2]/100,Cs=Ss*Math.min(Ms,1-Ms),Ts=(Ls,Rs=(Ls+_s/30)%12)=>Ms-Cs*Math.max(Math.min(Rs-3,9-Rs,1),-1);let Bs="rgb";const Ps=[Math.round(Ts(0)*255),Math.round(Ts(8)*255),Math.round(Ts(4)*255)];return va.type==="hsla"&&(Bs+="a",Ps.push(_a[3])),recomposeColor({type:Bs,values:Ps})}function getLuminance(va){va=decomposeColor(va);let _a=va.type==="hsl"?decomposeColor(hslToRgb(va)).values:va.values;return _a=_a.map(_s=>(va.type!=="color"&&(_s/=255),_s<=.03928?_s/12.92:((_s+.055)/1.055)**2.4)),Number((.2126*_a[0]+.7152*_a[1]+.0722*_a[2]).toFixed(3))}function getContrastRatio(va,_a){const _s=getLuminance(va),Ss=getLuminance(_a);return(Math.max(_s,Ss)+.05)/(Math.min(_s,Ss)+.05)}function alpha(va,_a){return va=decomposeColor(va),_a=clamp(_a),(va.type==="rgb"||va.type==="hsl")&&(va.type+="a"),va.type==="color"?va.values[3]=`/${_a}`:va.values[3]=_a,recomposeColor(va)}function darken(va,_a){if(va=decomposeColor(va),_a=clamp(_a),va.type.indexOf("hsl")!==-1)va.values[2]*=1-_a;else if(va.type.indexOf("rgb")!==-1||va.type.indexOf("color")!==-1)for(let _s=0;_s<3;_s+=1)va.values[_s]*=1-_a;return recomposeColor(va)}function lighten(va,_a){if(va=decomposeColor(va),_a=clamp(_a),va.type.indexOf("hsl")!==-1)va.values[2]+=(100-va.values[2])*_a;else if(va.type.indexOf("rgb")!==-1)for(let _s=0;_s<3;_s+=1)va.values[_s]+=(255-va.values[_s])*_a;else if(va.type.indexOf("color")!==-1)for(let _s=0;_s<3;_s+=1)va.values[_s]+=(1-va.values[_s])*_a;return recomposeColor(va)}function composeClasses(va,_a,_s){const Ss={};return Object.keys(va).forEach(Ms=>{Ss[Ms]=va[Ms].reduce((Cs,Ts)=>(Ts&&(_s&&_s[Ts]&&Cs.push(_s[Ts]),Cs.push(_a(Ts))),Cs),[]).join(" ")}),Ss}const defaultGenerator=va=>va,createClassNameGenerator=()=>{let va=defaultGenerator;return{configure(_a){va=_a},generate(_a){return va(_a)},reset(){va=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();var ClassNameGenerator$1=ClassNameGenerator;const globalStateClassesMapping={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function generateUtilityClass(va,_a){return globalStateClassesMapping[_a]||`${ClassNameGenerator$1.generate(va)}-${_a}`}function generateUtilityClasses(va,_a){const _s={};return _a.forEach(Ss=>{_s[Ss]=generateUtilityClass(va,Ss)}),_s}function createMixins(va,_a,_s){return _extends({toolbar:{minHeight:56,[`${va.up("xs")} and (orientation: landscape)`]:{minHeight:48},[va.up("sm")]:{minHeight:64}}},_s)}const _excluded$b=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(va,_a,_s,Ss){const Ms=Ss.light||Ss,Cs=Ss.dark||Ss*1.5;va[_a]||(va.hasOwnProperty(_s)?va[_a]=va[_s]:_a==="light"?va.light=lighten(va.main,Ms):_a==="dark"&&(va.dark=darken(va.main,Cs)))}function getDefaultPrimary(va="light"){return va==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(va="light"){return va==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(va="light"){return va==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(va="light"){return va==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(va="light"){return va==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(va="light"){return va==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(va){const{mode:_a="light",contrastThreshold:_s=3,tonalOffset:Ss=.2}=va,Ms=_objectWithoutPropertiesLoose(va,_excluded$b),Cs=va.primary||getDefaultPrimary(_a),Ts=va.secondary||getDefaultSecondary(_a),Bs=va.error||getDefaultError(_a),Ps=va.info||getDefaultInfo(_a),Ls=va.success||getDefaultSuccess(_a),Rs=va.warning||getDefaultWarning(_a);function $s(Ns){return getContrastRatio(Ns,dark.text.primary)>=_s?dark.text.primary:light.text.primary}const Fs=({color:Ns,name:Vs,mainShade:Ds=500,lightShade:ks=300,darkShade:Us=700})=>{if(Ns=_extends({},Ns),!Ns.main&&Ns[Ds]&&(Ns.main=Ns[Ds]),!Ns.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Vs?` (${Vs})`:"",Ds));if(typeof Ns.main!="string")throw new Error(formatMuiErrorMessage(12,Vs?` (${Vs})`:"",JSON.stringify(Ns.main)));return addLightOrDark(Ns,"light",ks,Ss),addLightOrDark(Ns,"dark",Us,Ss),Ns.contrastText||(Ns.contrastText=$s(Ns.main)),Ns},Os={dark,light};return deepmerge(_extends({common:common$1,mode:_a,primary:Fs({color:Cs,name:"primary"}),secondary:Fs({color:Ts,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:Fs({color:Bs,name:"error"}),warning:Fs({color:Rs,name:"warning"}),info:Fs({color:Ps,name:"info"}),success:Fs({color:Ls,name:"success"}),grey:grey$1,contrastThreshold:_s,getContrastText:$s,augmentColor:Fs,tonalOffset:Ss},Os[_a]),Ms)}const _excluded$a=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round(va){return Math.round(va*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(va,_a){const _s=typeof _a=="function"?_a(va):_a,{fontFamily:Ss=defaultFontFamily,fontSize:Ms=14,fontWeightLight:Cs=300,fontWeightRegular:Ts=400,fontWeightMedium:Bs=500,fontWeightBold:Ps=700,htmlFontSize:Ls=16,allVariants:Rs,pxToRem:$s}=_s,Fs=_objectWithoutPropertiesLoose(_s,_excluded$a),Os=Ms/14,Gs=$s||(Ds=>`${Ds/Ls*Os}rem`),Ns=(Ds,ks,Us,zs,Ws)=>_extends({fontFamily:Ss,fontWeight:Ds,fontSize:Gs(ks),lineHeight:Us},Ss===defaultFontFamily?{letterSpacing:`${round(zs/ks)}em`}:{},Ws,Rs),Vs={h1:Ns(Cs,96,1.167,-1.5),h2:Ns(Cs,60,1.2,-.5),h3:Ns(Ts,48,1.167,0),h4:Ns(Ts,34,1.235,.25),h5:Ns(Ts,24,1.334,0),h6:Ns(Bs,20,1.6,.15),subtitle1:Ns(Ts,16,1.75,.15),subtitle2:Ns(Bs,14,1.57,.1),body1:Ns(Ts,16,1.5,.15),body2:Ns(Ts,14,1.43,.15),button:Ns(Bs,14,1.75,.4,caseAllCaps),caption:Ns(Ts,12,1.66,.4),overline:Ns(Ts,12,2.66,1,caseAllCaps)};return deepmerge(_extends({htmlFontSize:Ls,pxToRem:Gs,fontFamily:Ss,fontSize:Ms,fontWeightLight:Cs,fontWeightRegular:Ts,fontWeightMedium:Bs,fontWeightBold:Ps},Vs),Fs,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...va){return[`${va[0]}px ${va[1]}px ${va[2]}px ${va[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${va[4]}px ${va[5]}px ${va[6]}px ${va[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${va[8]}px ${va[9]}px ${va[10]}px ${va[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)];var shadows$1=shadows;const _excluded$9=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(va){return`${Math.round(va)}ms`}function getAutoHeightDuration(va){if(!va)return 0;const _a=va/36;return Math.round((4+15*_a**.25+_a/5)*10)}function createTransitions(va){const _a=_extends({},easing,va.easing),_s=_extends({},duration,va.duration);return _extends({getAutoHeightDuration,create:(Ms=["all"],Cs={})=>{const{duration:Ts=_s.standard,easing:Bs=_a.easeInOut,delay:Ps=0}=Cs;return _objectWithoutPropertiesLoose(Cs,_excluded$9),(Array.isArray(Ms)?Ms:[Ms]).map(Ls=>`${Ls} ${typeof Ts=="string"?Ts:formatMs(Ts)} ${Bs} ${typeof Ps=="string"?Ps:formatMs(Ps)}`).join(",")}},va,{easing:_a,duration:_s})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var zIndex$1=zIndex;const _excluded$8=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(va={},..._a){const{mixins:_s={},palette:Ss={},transitions:Ms={},typography:Cs={}}=va,Ts=_objectWithoutPropertiesLoose(va,_excluded$8),Bs=createPalette(Ss),Ps=createTheme$1(va);let Ls=deepmerge(Ps,{mixins:createMixins(Ps.breakpoints,Ps.spacing,_s),palette:Bs,shadows:shadows$1.slice(),typography:createTypography(Bs,Cs),transitions:createTransitions(Ms),zIndex:_extends({},zIndex$1)});return Ls=deepmerge(Ls,Ts),Ls=_a.reduce((Rs,$s)=>deepmerge(Rs,$s),Ls),Ls}const defaultTheme$1=createTheme();var defaultTheme$2=defaultTheme$1;function useThemeProps({props:va,name:_a}){return useThemeProps$1({props:va,name:_a,defaultTheme:defaultTheme$2})}const rootShouldForwardProp=va=>shouldForwardProp(va)&&va!=="classes",styled=createStyled({defaultTheme:defaultTheme$2,rootShouldForwardProp});var styled$1=styled;function getSvgIconUtilityClass(va){return generateUtilityClass("MuiSvgIcon",va)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$7=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses$6=va=>{const{color:_a,fontSize:_s,classes:Ss}=va,Ms={root:["root",_a!=="inherit"&&`color${capitalize(_a)}`,`fontSize${capitalize(_s)}`]};return composeClasses(Ms,getSvgIconUtilityClass,Ss)},SvgIconRoot=styled$1("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(va,_a)=>{const{ownerState:_s}=va;return[_a.root,_s.color!=="inherit"&&_a[`color${capitalize(_s.color)}`],_a[`fontSize${capitalize(_s.fontSize)}`]]}})(({theme:va,ownerState:_a})=>{var _s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,$s,Fs,Os,Gs,Ns,Vs,Ds,ks;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(_s=va.transitions)==null||(Ss=_s.create)==null?void 0:Ss.call(_s,"fill",{duration:(Ms=va.transitions)==null||(Cs=Ms.duration)==null?void 0:Cs.shorter}),fontSize:{inherit:"inherit",small:((Ts=va.typography)==null||(Bs=Ts.pxToRem)==null?void 0:Bs.call(Ts,20))||"1.25rem",medium:((Ps=va.typography)==null||(Ls=Ps.pxToRem)==null?void 0:Ls.call(Ps,24))||"1.5rem",large:((Rs=va.typography)==null||($s=Rs.pxToRem)==null?void 0:$s.call(Rs,35))||"2.1875"}[_a.fontSize],color:(Fs=(Os=va.palette)==null||(Gs=Os[_a.color])==null?void 0:Gs.main)!=null?Fs:{action:(Ns=va.palette)==null||(Vs=Ns.action)==null?void 0:Vs.active,disabled:(Ds=va.palette)==null||(ks=Ds.action)==null?void 0:ks.disabled,inherit:void 0}[_a.color]}}),SvgIcon=react$1.exports.forwardRef(function va(_a,_s){const Ss=useThemeProps({props:_a,name:"MuiSvgIcon"}),{children:Ms,className:Cs,color:Ts="inherit",component:Bs="svg",fontSize:Ps="medium",htmlColor:Ls,inheritViewBox:Rs=!1,titleAccess:$s,viewBox:Fs="0 0 24 24"}=Ss,Os=_objectWithoutPropertiesLoose(Ss,_excluded$7),Gs=_extends({},Ss,{color:Ts,component:Bs,fontSize:Ps,instanceFontSize:_a.fontSize,inheritViewBox:Rs,viewBox:Fs}),Ns={};Rs||(Ns.viewBox=Fs);const Vs=useUtilityClasses$6(Gs);return jsxs(SvgIconRoot,_extends({as:Bs,className:clsx(Vs.root,Cs),ownerState:Gs,focusable:"false",color:Ls,"aria-hidden":$s?void 0:!0,role:$s?"img":void 0,ref:_s},Ns,Os,{children:[Ms,$s?jsx("title",{children:$s}):null]}))});SvgIcon.muiName="SvgIcon";var SvgIcon$1=SvgIcon;function createSvgIcon$1(va,_a){const _s=(Ss,Ms)=>jsx(SvgIcon$1,_extends({"data-testid":`${_a}Icon`,ref:Ms},Ss,{children:va}));return _s.muiName=SvgIcon$1.muiName,react$1.exports.memo(react$1.exports.forwardRef(_s))}const unstable_ClassNameGenerator={configure:va=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join(`
`)),ClassNameGenerator$1.configure(va)}};var utils=Object.freeze(Object.defineProperty({__proto__:null,unstable_ClassNameGenerator,capitalize,createChainedFunction,createSvgIcon:createSvgIcon$1,debounce,deprecatedPropType,isMuiElement,ownerDocument,ownerWindow,requirePropFactory,setRef,unstable_useEnhancedEffect:useEnhancedEffect$1,unstable_useId:useId,unsupportedProp,useControlled,useEventCallback,useForkRef,useIsFocusVisible},Symbol.toStringTag,{value:"Module"}));function _setPrototypeOf(va,_a){return _setPrototypeOf=Object.setPrototypeOf||function(Ss,Ms){return Ss.__proto__=Ms,Ss},_setPrototypeOf(va,_a)}function _inheritsLoose(va,_a){va.prototype=Object.create(_a.prototype),va.prototype.constructor=va,_setPrototypeOf(va,_a)}var TransitionGroupContext=React.createContext(null);function _assertThisInitialized(va){if(va===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return va}function getChildMapping(va,_a){var _s=function(Cs){return _a&&react$1.exports.isValidElement(Cs)?_a(Cs):Cs},Ss=Object.create(null);return va&&react$1.exports.Children.map(va,function(Ms){return Ms}).forEach(function(Ms){Ss[Ms.key]=_s(Ms)}),Ss}function mergeChildMappings(va,_a){va=va||{},_a=_a||{};function _s(Rs){return Rs in _a?_a[Rs]:va[Rs]}var Ss=Object.create(null),Ms=[];for(var Cs in va)Cs in _a?Ms.length&&(Ss[Cs]=Ms,Ms=[]):Ms.push(Cs);var Ts,Bs={};for(var Ps in _a){if(Ss[Ps])for(Ts=0;Ts<Ss[Ps].length;Ts++){var Ls=Ss[Ps][Ts];Bs[Ss[Ps][Ts]]=_s(Ls)}Bs[Ps]=_s(Ps)}for(Ts=0;Ts<Ms.length;Ts++)Bs[Ms[Ts]]=_s(Ms[Ts]);return Bs}function getProp(va,_a,_s){return _s[_a]!=null?_s[_a]:va.props[_a]}function getInitialChildMapping(va,_a){return getChildMapping(va.children,function(_s){return react$1.exports.cloneElement(_s,{onExited:_a.bind(null,_s),in:!0,appear:getProp(_s,"appear",va),enter:getProp(_s,"enter",va),exit:getProp(_s,"exit",va)})})}function getNextChildMapping(va,_a,_s){var Ss=getChildMapping(va.children),Ms=mergeChildMappings(_a,Ss);return Object.keys(Ms).forEach(function(Cs){var Ts=Ms[Cs];if(!!react$1.exports.isValidElement(Ts)){var Bs=Cs in _a,Ps=Cs in Ss,Ls=_a[Cs],Rs=react$1.exports.isValidElement(Ls)&&!Ls.props.in;Ps&&(!Bs||Rs)?Ms[Cs]=react$1.exports.cloneElement(Ts,{onExited:_s.bind(null,Ts),in:!0,exit:getProp(Ts,"exit",va),enter:getProp(Ts,"enter",va)}):!Ps&&Bs&&!Rs?Ms[Cs]=react$1.exports.cloneElement(Ts,{in:!1}):Ps&&Bs&&react$1.exports.isValidElement(Ls)&&(Ms[Cs]=react$1.exports.cloneElement(Ts,{onExited:_s.bind(null,Ts),in:Ls.props.in,exit:getProp(Ts,"exit",va),enter:getProp(Ts,"enter",va)}))}}),Ms}var values=Object.values||function(va){return Object.keys(va).map(function(_a){return va[_a]})},defaultProps={component:"div",childFactory:function va(_a){return _a}},TransitionGroup=function(va){_inheritsLoose(_a,va);function _a(Ss,Ms){var Cs;Cs=va.call(this,Ss,Ms)||this;var Ts=Cs.handleExited.bind(_assertThisInitialized(Cs));return Cs.state={contextValue:{isMounting:!0},handleExited:Ts,firstRender:!0},Cs}var _s=_a.prototype;return _s.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},_s.componentWillUnmount=function(){this.mounted=!1},_a.getDerivedStateFromProps=function(Ms,Cs){var Ts=Cs.children,Bs=Cs.handleExited,Ps=Cs.firstRender;return{children:Ps?getInitialChildMapping(Ms,Bs):getNextChildMapping(Ms,Ts,Bs),firstRender:!1}},_s.handleExited=function(Ms,Cs){var Ts=getChildMapping(this.props.children);Ms.key in Ts||(Ms.props.onExited&&Ms.props.onExited(Cs),this.mounted&&this.setState(function(Bs){var Ps=_extends({},Bs.children);return delete Ps[Ms.key],{children:Ps}}))},_s.render=function(){var Ms=this.props,Cs=Ms.component,Ts=Ms.childFactory,Bs=_objectWithoutPropertiesLoose(Ms,["component","childFactory"]),Ps=this.state.contextValue,Ls=values(this.state.children).map(Ts);return delete Bs.appear,delete Bs.enter,delete Bs.exit,Cs===null?React.createElement(TransitionGroupContext.Provider,{value:Ps},Ls):React.createElement(TransitionGroupContext.Provider,{value:Ps},React.createElement(Cs,Bs,Ls))},_a}(React.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;var TransitionGroup$1=TransitionGroup;function getPaperUtilityClass(va){return generateUtilityClass("MuiPaper",va)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const _excluded$6=["className","component","elevation","square","variant"],getOverlayAlpha=va=>{let _a;return va<1?_a=5.11916*va**2:_a=4.5*Math.log(va+1)+2,(_a/100).toFixed(2)},useUtilityClasses$5=va=>{const{square:_a,elevation:_s,variant:Ss,classes:Ms}=va,Cs={root:["root",Ss,!_a&&"rounded",Ss==="elevation"&&`elevation${_s}`]};return composeClasses(Cs,getPaperUtilityClass,Ms)},PaperRoot=styled$1("div",{name:"MuiPaper",slot:"Root",overridesResolver:(va,_a)=>{const{ownerState:_s}=va;return[_a.root,_a[_s.variant],!_s.square&&_a.rounded,_s.variant==="elevation"&&_a[`elevation${_s.elevation}`]]}})(({theme:va,ownerState:_a})=>_extends({backgroundColor:va.palette.background.paper,color:va.palette.text.primary,transition:va.transitions.create("box-shadow")},!_a.square&&{borderRadius:va.shape.borderRadius},_a.variant==="outlined"&&{border:`1px solid ${va.palette.divider}`},_a.variant==="elevation"&&_extends({boxShadow:va.shadows[_a.elevation]},va.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${alpha("#fff",getOverlayAlpha(_a.elevation))}, ${alpha("#fff",getOverlayAlpha(_a.elevation))})`}))),Paper=react$1.exports.forwardRef(function va(_a,_s){const Ss=useThemeProps({props:_a,name:"MuiPaper"}),{className:Ms,component:Cs="div",elevation:Ts=1,square:Bs=!1,variant:Ps="elevation"}=Ss,Ls=_objectWithoutPropertiesLoose(Ss,_excluded$6),Rs=_extends({},Ss,{component:Cs,elevation:Ts,square:Bs,variant:Ps}),$s=useUtilityClasses$5(Rs);return jsx(PaperRoot,_extends({as:Cs,ownerState:Rs,className:clsx($s.root,Ms),ref:_s},Ls))});var Paper$1=Paper;function Ripple(va){const{className:_a,classes:_s,pulsate:Ss=!1,rippleX:Ms,rippleY:Cs,rippleSize:Ts,in:Bs,onExited:Ps,timeout:Ls}=va,[Rs,$s]=react$1.exports.useState(!1),Fs=clsx(_a,_s.ripple,_s.rippleVisible,Ss&&_s.ripplePulsate),Os={width:Ts,height:Ts,top:-(Ts/2)+Cs,left:-(Ts/2)+Ms},Gs=clsx(_s.child,Rs&&_s.childLeaving,Ss&&_s.childPulsate);return!Bs&&!Rs&&$s(!0),react$1.exports.useEffect(()=>{if(!Bs&&Ps!=null){const Ns=setTimeout(Ps,Ls);return()=>{clearTimeout(Ns)}}},[Ps,Bs,Ls]),jsx("span",{className:Fs,style:Os,children:jsx("span",{className:Gs})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var touchRippleClasses$1=touchRippleClasses;const _excluded$5=["center","classes","className"];let _=va=>va,_t,_t2,_t3,_t4;const DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes(_t||(_t=_`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),exitKeyframe=keyframes(_t2||(_t2=_`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),pulsateKeyframe=keyframes(_t3||(_t3=_`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),TouchRippleRoot=styled$1("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled$1(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})(_t4||(_t4=_`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),touchRippleClasses$1.rippleVisible,enterKeyframe,DURATION,({theme:va})=>va.transitions.easing.easeInOut,touchRippleClasses$1.ripplePulsate,({theme:va})=>va.transitions.duration.shorter,touchRippleClasses$1.child,touchRippleClasses$1.childLeaving,exitKeyframe,DURATION,({theme:va})=>va.transitions.easing.easeInOut,touchRippleClasses$1.childPulsate,pulsateKeyframe,({theme:va})=>va.transitions.easing.easeInOut),TouchRipple=react$1.exports.forwardRef(function va(_a,_s){const Ss=useThemeProps({props:_a,name:"MuiTouchRipple"}),{center:Ms=!1,classes:Cs={},className:Ts}=Ss,Bs=_objectWithoutPropertiesLoose(Ss,_excluded$5),[Ps,Ls]=react$1.exports.useState([]),Rs=react$1.exports.useRef(0),$s=react$1.exports.useRef(null);react$1.exports.useEffect(()=>{$s.current&&($s.current(),$s.current=null)},[Ps]);const Fs=react$1.exports.useRef(!1),Os=react$1.exports.useRef(null),Gs=react$1.exports.useRef(null),Ns=react$1.exports.useRef(null);react$1.exports.useEffect(()=>()=>{clearTimeout(Os.current)},[]);const Vs=react$1.exports.useCallback(zs=>{const{pulsate:Ws,rippleX:qs,rippleY:Zs,rippleSize:el,cb:Js}=zs;Ls(Hs=>[...Hs,jsx(TouchRippleRipple,{classes:{ripple:clsx(Cs.ripple,touchRippleClasses$1.ripple),rippleVisible:clsx(Cs.rippleVisible,touchRippleClasses$1.rippleVisible),ripplePulsate:clsx(Cs.ripplePulsate,touchRippleClasses$1.ripplePulsate),child:clsx(Cs.child,touchRippleClasses$1.child),childLeaving:clsx(Cs.childLeaving,touchRippleClasses$1.childLeaving),childPulsate:clsx(Cs.childPulsate,touchRippleClasses$1.childPulsate)},timeout:DURATION,pulsate:Ws,rippleX:qs,rippleY:Zs,rippleSize:el},Rs.current)]),Rs.current+=1,$s.current=Js},[Cs]),Ds=react$1.exports.useCallback((zs={},Ws={},qs)=>{const{pulsate:Zs=!1,center:el=Ms||Ws.pulsate,fakeElement:Js=!1}=Ws;if(zs.type==="mousedown"&&Fs.current){Fs.current=!1;return}zs.type==="touchstart"&&(Fs.current=!0);const Hs=Js?null:Ns.current,Qs=Hs?Hs.getBoundingClientRect():{width:0,height:0,left:0,top:0};let js,Ks,Xs;if(el||zs.clientX===0&&zs.clientY===0||!zs.clientX&&!zs.touches)js=Math.round(Qs.width/2),Ks=Math.round(Qs.height/2);else{const{clientX:Ys,clientY:rl}=zs.touches?zs.touches[0]:zs;js=Math.round(Ys-Qs.left),Ks=Math.round(rl-Qs.top)}if(el)Xs=Math.sqrt((2*Qs.width**2+Qs.height**2)/3),Xs%2===0&&(Xs+=1);else{const Ys=Math.max(Math.abs((Hs?Hs.clientWidth:0)-js),js)*2+2,rl=Math.max(Math.abs((Hs?Hs.clientHeight:0)-Ks),Ks)*2+2;Xs=Math.sqrt(Ys**2+rl**2)}zs.touches?Gs.current===null&&(Gs.current=()=>{Vs({pulsate:Zs,rippleX:js,rippleY:Ks,rippleSize:Xs,cb:qs})},Os.current=setTimeout(()=>{Gs.current&&(Gs.current(),Gs.current=null)},DELAY_RIPPLE)):Vs({pulsate:Zs,rippleX:js,rippleY:Ks,rippleSize:Xs,cb:qs})},[Ms,Vs]),ks=react$1.exports.useCallback(()=>{Ds({},{pulsate:!0})},[Ds]),Us=react$1.exports.useCallback((zs,Ws)=>{if(clearTimeout(Os.current),zs.type==="touchend"&&Gs.current){Gs.current(),Gs.current=null,Os.current=setTimeout(()=>{Us(zs,Ws)});return}Gs.current=null,Ls(qs=>qs.length>0?qs.slice(1):qs),$s.current=Ws},[]);return react$1.exports.useImperativeHandle(_s,()=>({pulsate:ks,start:Ds,stop:Us}),[ks,Ds,Us]),jsx(TouchRippleRoot,_extends({className:clsx(Cs.root,touchRippleClasses$1.root,Ts),ref:Ns},Bs,{children:jsx(TransitionGroup$1,{component:null,exit:!0,children:Ps})}))});var TouchRipple$1=TouchRipple;function getButtonBaseUtilityClass(va){return generateUtilityClass("MuiButtonBase",va)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]);var buttonBaseClasses$1=buttonBaseClasses;const _excluded$4=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],useUtilityClasses$4=va=>{const{disabled:_a,focusVisible:_s,focusVisibleClassName:Ss,classes:Ms}=va,Ts=composeClasses({root:["root",_a&&"disabled",_s&&"focusVisible"]},getButtonBaseUtilityClass,Ms);return _s&&Ss&&(Ts.root+=` ${Ss}`),Ts},ButtonBaseRoot=styled$1("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(va,_a)=>_a.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses$1.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=react$1.exports.forwardRef(function va(_a,_s){const Ss=useThemeProps({props:_a,name:"MuiButtonBase"}),{action:Ms,centerRipple:Cs=!1,children:Ts,className:Bs,component:Ps="button",disabled:Ls=!1,disableRipple:Rs=!1,disableTouchRipple:$s=!1,focusRipple:Fs=!1,LinkComponent:Os="a",onBlur:Gs,onClick:Ns,onContextMenu:Vs,onDragLeave:Ds,onFocus:ks,onFocusVisible:Us,onKeyDown:zs,onKeyUp:Ws,onMouseDown:qs,onMouseLeave:Zs,onMouseUp:el,onTouchEnd:Js,onTouchMove:Hs,onTouchStart:Qs,tabIndex:js=0,TouchRippleProps:Ks,touchRippleRef:Xs,type:Ys}=Ss,rl=_objectWithoutPropertiesLoose(Ss,_excluded$4),tl=react$1.exports.useRef(null),il=react$1.exports.useRef(null),ll=useForkRef(il,Xs),{isFocusVisibleRef:cl,onFocus:al,onBlur:dl,ref:yl}=useIsFocusVisible(),[xl,wl]=react$1.exports.useState(!1);Ls&&xl&&wl(!1),react$1.exports.useImperativeHandle(Ms,()=>({focusVisible:()=>{wl(!0),tl.current.focus()}}),[]);const[Al,bl]=react$1.exports.useState(!1);react$1.exports.useEffect(()=>{bl(!0)},[]);const Bl=Al&&!Rs&&!Ls;react$1.exports.useEffect(()=>{xl&&Fs&&!Rs&&Al&&il.current.pulsate()},[Rs,Fs,xl,Al]);function Cl(Dl,gl,ql=$s){return useEventCallback(Xl=>(gl&&gl(Xl),!ql&&il.current&&il.current[Dl](Xl),!0))}const Sl=Cl("start",qs),El=Cl("stop",Vs),Rl=Cl("stop",Ds),Fl=Cl("stop",el),jl=Cl("stop",Dl=>{xl&&Dl.preventDefault(),Zs&&Zs(Dl)}),Vl=Cl("start",Qs),Wl=Cl("stop",Js),ul=Cl("stop",Hs),pl=Cl("stop",Dl=>{dl(Dl),cl.current===!1&&wl(!1),Gs&&Gs(Dl)},!1),kl=useEventCallback(Dl=>{tl.current||(tl.current=Dl.currentTarget),al(Dl),cl.current===!0&&(wl(!0),Us&&Us(Dl)),ks&&ks(Dl)}),$l=()=>{const Dl=tl.current;return Ps&&Ps!=="button"&&!(Dl.tagName==="A"&&Dl.href)},Ql=react$1.exports.useRef(!1),zl=useEventCallback(Dl=>{Fs&&!Ql.current&&xl&&il.current&&Dl.key===" "&&(Ql.current=!0,il.current.stop(Dl,()=>{il.current.start(Dl)})),Dl.target===Dl.currentTarget&&$l()&&Dl.key===" "&&Dl.preventDefault(),zs&&zs(Dl),Dl.target===Dl.currentTarget&&$l()&&Dl.key==="Enter"&&!Ls&&(Dl.preventDefault(),Ns&&Ns(Dl))}),Nl=useEventCallback(Dl=>{Fs&&Dl.key===" "&&il.current&&xl&&!Dl.defaultPrevented&&(Ql.current=!1,il.current.stop(Dl,()=>{il.current.pulsate(Dl)})),Ws&&Ws(Dl),Ns&&Dl.target===Dl.currentTarget&&$l()&&Dl.key===" "&&!Dl.defaultPrevented&&Ns(Dl)});let su=Ps;su==="button"&&(rl.href||rl.to)&&(su=Os);const ru={};su==="button"?(ru.type=Ys===void 0?"button":Ys,ru.disabled=Ls):(!rl.href&&!rl.to&&(ru.role="button"),Ls&&(ru["aria-disabled"]=Ls));const nu=useForkRef(yl,tl),Ul=useForkRef(_s,nu),Yl=_extends({},Ss,{centerRipple:Cs,component:Ps,disabled:Ls,disableRipple:Rs,disableTouchRipple:$s,focusRipple:Fs,tabIndex:js,focusVisible:xl}),Hl=useUtilityClasses$4(Yl);return jsxs(ButtonBaseRoot,_extends({as:su,className:clsx(Hl.root,Bs),ownerState:Yl,onBlur:pl,onClick:Ns,onContextMenu:El,onFocus:kl,onKeyDown:zl,onKeyUp:Nl,onMouseDown:Sl,onMouseLeave:jl,onMouseUp:Fl,onDragLeave:Rl,onTouchEnd:Wl,onTouchMove:ul,onTouchStart:Vl,ref:Ul,tabIndex:Ls?-1:js,type:Ys},ru,rl,{children:[Ts,Bl?jsx(TouchRipple$1,_extends({ref:ll,center:Cs},Ks)):null]}))});var ButtonBase$1=ButtonBase;function getBottomNavigationUtilityClass(va){return generateUtilityClass("MuiBottomNavigation",va)}generateUtilityClasses("MuiBottomNavigation",["root"]);const _excluded$3=["children","className","component","onChange","showLabels","value"],useUtilityClasses$3=va=>{const{classes:_a}=va;return composeClasses({root:["root"]},getBottomNavigationUtilityClass,_a)},BottomNavigationRoot=styled$1("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(va,_a)=>_a.root})(({theme:va})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:va.palette.background.paper})),BottomNavigation=react$1.exports.forwardRef(function va(_a,_s){const Ss=useThemeProps({props:_a,name:"MuiBottomNavigation"}),{children:Ms,className:Cs,component:Ts="div",onChange:Bs,showLabels:Ps=!1,value:Ls}=Ss,Rs=_objectWithoutPropertiesLoose(Ss,_excluded$3),$s=_extends({},Ss,{component:Ts,showLabels:Ps}),Fs=useUtilityClasses$3($s);return jsx(BottomNavigationRoot,_extends({as:Ts,className:clsx(Fs.root,Cs),ref:_s,ownerState:$s},Rs,{children:react$1.exports.Children.map(Ms,(Os,Gs)=>{if(!react$1.exports.isValidElement(Os))return null;const Ns=Os.props.value===void 0?Gs:Os.props.value;return react$1.exports.cloneElement(Os,{selected:Ns===Ls,showLabel:Os.props.showLabel!==void 0?Os.props.showLabel:Ps,value:Ns,onChange:Bs})})}))});var BottomNavigation$1=BottomNavigation;function getBottomNavigationActionUtilityClass(va){return generateUtilityClass("MuiBottomNavigationAction",va)}const bottomNavigationActionClasses=generateUtilityClasses("MuiBottomNavigationAction",["root","iconOnly","selected","label"]);var bottomNavigationActionClasses$1=bottomNavigationActionClasses;const _excluded$2=["className","icon","label","onChange","onClick","selected","showLabel","value"],useUtilityClasses$2=va=>{const{classes:_a,showLabel:_s,selected:Ss}=va;return composeClasses({root:["root",!_s&&!Ss&&"iconOnly",Ss&&"selected"],label:["label",!_s&&!Ss&&"iconOnly",Ss&&"selected"]},getBottomNavigationActionUtilityClass,_a)},BottomNavigationActionRoot=styled$1(ButtonBase$1,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(va,_a)=>{const{ownerState:_s}=va;return[_a.root,!_s.showLabel&&!_s.selected&&_a.iconOnly]}})(({theme:va,ownerState:_a})=>_extends({transition:va.transitions.create(["color","padding-top"],{duration:va.transitions.duration.short}),padding:"6px 12px 8px",minWidth:80,maxWidth:168,color:va.palette.text.secondary,flexDirection:"column",flex:"1"},!_a.showLabel&&!_a.selected&&{paddingTop:16},{[`&.${bottomNavigationActionClasses$1.selected}`]:{paddingTop:6,color:va.palette.primary.main}})),BottomNavigationActionLabel=styled$1("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(va,_a)=>_a.label})(({theme:va,ownerState:_a})=>_extends({fontFamily:va.typography.fontFamily,fontSize:va.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!_a.showLabel&&!_a.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${bottomNavigationActionClasses$1.selected}`]:{fontSize:va.typography.pxToRem(14)}})),BottomNavigationAction=react$1.exports.forwardRef(function va(_a,_s){const Ss=useThemeProps({props:_a,name:"MuiBottomNavigationAction"}),{className:Ms,icon:Cs,label:Ts,onChange:Bs,onClick:Ps,value:Ls}=Ss,Rs=_objectWithoutPropertiesLoose(Ss,_excluded$2),$s=Ss,Fs=useUtilityClasses$2($s),Os=Gs=>{Bs&&Bs(Gs,Ls),Ps&&Ps(Gs)};return jsxs(BottomNavigationActionRoot,_extends({ref:_s,className:clsx(Fs.root,Ms),focusRipple:!0,onClick:Os,ownerState:$s},Rs,{children:[Cs,jsx(BottomNavigationActionLabel,{className:Fs.label,ownerState:$s,children:Ts})]}))});var BottomNavigationAction$1=BottomNavigationAction;const defaultTheme=createTheme(),Box=createBox({defaultTheme,defaultClassName:"MuiBox-root",generateClassName:ClassNameGenerator$1.generate});var Box$1=Box;function getButtonUtilityClass(va){return generateUtilityClass("MuiButton",va)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var buttonClasses$1=buttonClasses;const ButtonGroupContext=react$1.exports.createContext({});var ButtonGroupContext$1=ButtonGroupContext;const _excluded$1=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],useUtilityClasses$1=va=>{const{color:_a,disableElevation:_s,fullWidth:Ss,size:Ms,variant:Cs,classes:Ts}=va,Bs={root:["root",Cs,`${Cs}${capitalize(_a)}`,`size${capitalize(Ms)}`,`${Cs}Size${capitalize(Ms)}`,_a==="inherit"&&"colorInherit",_s&&"disableElevation",Ss&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${capitalize(Ms)}`],endIcon:["endIcon",`iconSize${capitalize(Ms)}`]},Ps=composeClasses(Bs,getButtonUtilityClass,Ts);return _extends({},Ts,Ps)},commonIconStyles=va=>_extends({},va.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},va.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},va.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),ButtonRoot=styled$1(ButtonBase$1,{shouldForwardProp:va=>rootShouldForwardProp(va)||va==="classes",name:"MuiButton",slot:"Root",overridesResolver:(va,_a)=>{const{ownerState:_s}=va;return[_a.root,_a[_s.variant],_a[`${_s.variant}${capitalize(_s.color)}`],_a[`size${capitalize(_s.size)}`],_a[`${_s.variant}Size${capitalize(_s.size)}`],_s.color==="inherit"&&_a.colorInherit,_s.disableElevation&&_a.disableElevation,_s.fullWidth&&_a.fullWidth]}})(({theme:va,ownerState:_a})=>_extends({},va.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:va.shape.borderRadius,transition:va.transitions.create(["background-color","box-shadow","border-color","color"],{duration:va.transitions.duration.short}),"&:hover":_extends({textDecoration:"none",backgroundColor:alpha(va.palette.text.primary,va.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},_a.variant==="text"&&_a.color!=="inherit"&&{backgroundColor:alpha(va.palette[_a.color].main,va.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},_a.variant==="outlined"&&_a.color!=="inherit"&&{border:`1px solid ${va.palette[_a.color].main}`,backgroundColor:alpha(va.palette[_a.color].main,va.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},_a.variant==="contained"&&{backgroundColor:va.palette.grey.A100,boxShadow:va.shadows[4],"@media (hover: none)":{boxShadow:va.shadows[2],backgroundColor:va.palette.grey[300]}},_a.variant==="contained"&&_a.color!=="inherit"&&{backgroundColor:va.palette[_a.color].dark,"@media (hover: none)":{backgroundColor:va.palette[_a.color].main}}),"&:active":_extends({},_a.variant==="contained"&&{boxShadow:va.shadows[8]}),[`&.${buttonClasses$1.focusVisible}`]:_extends({},_a.variant==="contained"&&{boxShadow:va.shadows[6]}),[`&.${buttonClasses$1.disabled}`]:_extends({color:va.palette.action.disabled},_a.variant==="outlined"&&{border:`1px solid ${va.palette.action.disabledBackground}`},_a.variant==="outlined"&&_a.color==="secondary"&&{border:`1px solid ${va.palette.action.disabled}`},_a.variant==="contained"&&{color:va.palette.action.disabled,boxShadow:va.shadows[0],backgroundColor:va.palette.action.disabledBackground})},_a.variant==="text"&&{padding:"6px 8px"},_a.variant==="text"&&_a.color!=="inherit"&&{color:va.palette[_a.color].main},_a.variant==="outlined"&&{padding:"5px 15px",border:`1px solid ${va.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},_a.variant==="outlined"&&_a.color!=="inherit"&&{color:va.palette[_a.color].main,border:`1px solid ${alpha(va.palette[_a.color].main,.5)}`},_a.variant==="contained"&&{color:va.palette.getContrastText(va.palette.grey[300]),backgroundColor:va.palette.grey[300],boxShadow:va.shadows[2]},_a.variant==="contained"&&_a.color!=="inherit"&&{color:va.palette[_a.color].contrastText,backgroundColor:va.palette[_a.color].main},_a.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},_a.size==="small"&&_a.variant==="text"&&{padding:"4px 5px",fontSize:va.typography.pxToRem(13)},_a.size==="large"&&_a.variant==="text"&&{padding:"8px 11px",fontSize:va.typography.pxToRem(15)},_a.size==="small"&&_a.variant==="outlined"&&{padding:"3px 9px",fontSize:va.typography.pxToRem(13)},_a.size==="large"&&_a.variant==="outlined"&&{padding:"7px 21px",fontSize:va.typography.pxToRem(15)},_a.size==="small"&&_a.variant==="contained"&&{padding:"4px 10px",fontSize:va.typography.pxToRem(13)},_a.size==="large"&&_a.variant==="contained"&&{padding:"8px 22px",fontSize:va.typography.pxToRem(15)},_a.fullWidth&&{width:"100%"}),({ownerState:va})=>va.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses$1.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses$1.disabled}`]:{boxShadow:"none"}}),ButtonStartIcon=styled$1("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(va,_a)=>{const{ownerState:_s}=va;return[_a.startIcon,_a[`iconSize${capitalize(_s.size)}`]]}})(({ownerState:va})=>_extends({display:"inherit",marginRight:8,marginLeft:-4},va.size==="small"&&{marginLeft:-2},commonIconStyles(va))),ButtonEndIcon=styled$1("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(va,_a)=>{const{ownerState:_s}=va;return[_a.endIcon,_a[`iconSize${capitalize(_s.size)}`]]}})(({ownerState:va})=>_extends({display:"inherit",marginRight:-4,marginLeft:8},va.size==="small"&&{marginRight:-2},commonIconStyles(va))),Button=react$1.exports.forwardRef(function va(_a,_s){const Ss=react$1.exports.useContext(ButtonGroupContext$1),Ms=resolveProps(Ss,_a),Cs=useThemeProps({props:Ms,name:"MuiButton"}),{children:Ts,color:Bs="primary",component:Ps="button",className:Ls,disabled:Rs=!1,disableElevation:$s=!1,disableFocusRipple:Fs=!1,endIcon:Os,focusVisibleClassName:Gs,fullWidth:Ns=!1,size:Vs="medium",startIcon:Ds,type:ks,variant:Us="text"}=Cs,zs=_objectWithoutPropertiesLoose(Cs,_excluded$1),Ws=_extends({},Cs,{color:Bs,component:Ps,disabled:Rs,disableElevation:$s,disableFocusRipple:Fs,fullWidth:Ns,size:Vs,type:ks,variant:Us}),qs=useUtilityClasses$1(Ws),Zs=Ds&&jsx(ButtonStartIcon,{className:qs.startIcon,ownerState:Ws,children:Ds}),el=Os&&jsx(ButtonEndIcon,{className:qs.endIcon,ownerState:Ws,children:Os});return jsxs(ButtonRoot,_extends({ownerState:Ws,className:clsx(Ls,Ss.className),component:Ps,disabled:Rs,focusRipple:!Fs,focusVisibleClassName:clsx(qs.focusVisible,Gs),ref:_s,type:ks},zs,{classes:qs,children:[Zs,Ts,el]}))});var Button$1=Button;function getButtonGroupUtilityClass(va){return generateUtilityClass("MuiButtonGroup",va)}const buttonGroupClasses=generateUtilityClasses("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]);var buttonGroupClasses$1=buttonGroupClasses;const _excluded=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],overridesResolver=(va,_a)=>{const{ownerState:_s}=va;return[{[`& .${buttonGroupClasses$1.grouped}`]:_a.grouped},{[`& .${buttonGroupClasses$1.grouped}`]:_a[`grouped${capitalize(_s.orientation)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:_a[`grouped${capitalize(_s.variant)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:_a[`grouped${capitalize(_s.variant)}${capitalize(_s.orientation)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:_a[`grouped${capitalize(_s.variant)}${capitalize(_s.color)}`]},_a.root,_a[_s.variant],_s.disableElevation===!0&&_a.disableElevation,_s.fullWidth&&_a.fullWidth,_s.orientation==="vertical"&&_a.vertical]},useUtilityClasses=va=>{const{classes:_a,color:_s,disabled:Ss,disableElevation:Ms,fullWidth:Cs,orientation:Ts,variant:Bs}=va,Ps={root:["root",Bs,Ts==="vertical"&&"vertical",Cs&&"fullWidth",Ms&&"disableElevation"],grouped:["grouped",`grouped${capitalize(Ts)}`,`grouped${capitalize(Bs)}`,`grouped${capitalize(Bs)}${capitalize(Ts)}`,`grouped${capitalize(Bs)}${capitalize(_s)}`,Ss&&"disabled"]};return composeClasses(Ps,getButtonGroupUtilityClass,_a)},ButtonGroupRoot=styled$1("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver})(({theme:va,ownerState:_a})=>_extends({display:"inline-flex",borderRadius:va.shape.borderRadius},_a.variant==="contained"&&{boxShadow:va.shadows[2]},_a.disableElevation&&{boxShadow:"none"},_a.fullWidth&&{width:"100%"},_a.orientation==="vertical"&&{flexDirection:"column"},{[`& .${buttonGroupClasses$1.grouped}`]:_extends({minWidth:40,"&:not(:first-of-type)":_extends({},_a.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},_a.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},_a.variant==="outlined"&&_a.orientation==="horizontal"&&{marginLeft:-1},_a.variant==="outlined"&&_a.orientation==="vertical"&&{marginTop:-1}),"&:not(:last-of-type)":_extends({},_a.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},_a.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},_a.variant==="text"&&_a.orientation==="horizontal"&&{borderRight:`1px solid ${va.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},_a.variant==="text"&&_a.orientation==="vertical"&&{borderBottom:`1px solid ${va.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},_a.variant==="text"&&_a.color!=="inherit"&&{borderColor:alpha(va.palette[_a.color].main,.5)},_a.variant==="outlined"&&_a.orientation==="horizontal"&&{borderRightColor:"transparent"},_a.variant==="outlined"&&_a.orientation==="vertical"&&{borderBottomColor:"transparent"},_a.variant==="contained"&&_a.orientation==="horizontal"&&{borderRight:`1px solid ${va.palette.grey[400]}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderRight:`1px solid ${va.palette.action.disabled}`}},_a.variant==="contained"&&_a.orientation==="vertical"&&{borderBottom:`1px solid ${va.palette.grey[400]}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderBottom:`1px solid ${va.palette.action.disabled}`}},_a.variant==="contained"&&_a.color!=="inherit"&&{borderColor:va.palette[_a.color].dark},{"&:hover":_extends({},_a.variant==="outlined"&&_a.orientation==="horizontal"&&{borderRightColor:"currentColor"},_a.variant==="outlined"&&_a.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),"&:hover":_extends({},_a.variant==="contained"&&{boxShadow:"none"})},_a.variant==="contained"&&{boxShadow:"none"})})),ButtonGroup=react$1.exports.forwardRef(function va(_a,_s){const Ss=useThemeProps({props:_a,name:"MuiButtonGroup"}),{children:Ms,className:Cs,color:Ts="primary",component:Bs="div",disabled:Ps=!1,disableElevation:Ls=!1,disableFocusRipple:Rs=!1,disableRipple:$s=!1,fullWidth:Fs=!1,orientation:Os="horizontal",size:Gs="medium",variant:Ns="outlined"}=Ss,Vs=_objectWithoutPropertiesLoose(Ss,_excluded),Ds=_extends({},Ss,{color:Ts,component:Bs,disabled:Ps,disableElevation:Ls,disableFocusRipple:Rs,disableRipple:$s,fullWidth:Fs,orientation:Os,size:Gs,variant:Ns}),ks=useUtilityClasses(Ds),Us=react$1.exports.useMemo(()=>({className:ks.grouped,color:Ts,disabled:Ps,disableElevation:Ls,disableFocusRipple:Rs,disableRipple:$s,fullWidth:Fs,size:Gs,variant:Ns}),[Ts,Ps,Ls,Rs,$s,Fs,Gs,Ns,ks.grouped]);return jsx(ButtonGroupRoot,_extends({as:Bs,role:"group",className:clsx(ks.root,Cs),ref:_s,ownerState:Ds},Vs,{children:jsx(ButtonGroupContext$1.Provider,{value:Us,children:Ms})}))});var ButtonGroup$1=ButtonGroup,DirectionsWalk={},interopRequireDefault={exports:{}};(function(va){function _a(_s){return _s&&_s.__esModule?_s:{default:_s}}va.exports=_a,va.exports.__esModule=!0,va.exports.default=va.exports})(interopRequireDefault);var createSvgIcon={},require$$0=getAugmentedNamespace(utils);(function(va){Object.defineProperty(va,"__esModule",{value:!0}),Object.defineProperty(va,"default",{enumerable:!0,get:function(){return _a.createSvgIcon}});var _a=require$$0})(createSvgIcon);var require$$2=getAugmentedNamespace(jsxRuntime),_interopRequireDefault$1=interopRequireDefault.exports;Object.defineProperty(DirectionsWalk,"__esModule",{value:!0});var default_1$1=DirectionsWalk.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(createSvgIcon),_jsxRuntime$1=require$$2,_default$1=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9 7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"}),"DirectionsWalk");default_1$1=DirectionsWalk.default=_default$1;var ViewInAr={},_interopRequireDefault=interopRequireDefault.exports;Object.defineProperty(ViewInAr,"__esModule",{value:!0});var default_1=ViewInAr.default=void 0,_createSvgIcon=_interopRequireDefault(createSvgIcon),_jsxRuntime=require$$2,_default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"m18.25 7.6-5.5-3.18c-.46-.27-1.04-.27-1.5 0L5.75 7.6c-.46.27-.75.76-.75 1.3v6.35c0 .54.29 1.03.75 1.3l5.5 3.18c.46.27 1.04.27 1.5 0l5.5-3.18c.46-.27.75-.76.75-1.3V8.9c0-.54-.29-1.03-.75-1.3zM7 14.96v-4.62l4 2.32v4.61l-4-2.31zm5-4.03L8 8.61l4-2.31 4 2.31-4 2.32zm1 6.34v-4.61l4-2.32v4.62l-4 2.31zM7 2H3.5C2.67 2 2 2.67 2 3.5V7h2V4h3V2zm10 0h3.5c.83 0 1.5.67 1.5 1.5V7h-2V4h-3V2zM7 22H3.5c-.83 0-1.5-.67-1.5-1.5V17h2v3h3v2zm10 0h3.5c.83 0 1.5-.67 1.5-1.5V17h-2v3h-3v2z"}),"ViewInAr");default_1=ViewInAr.default=_default;export{src_url_equal as $,AmbientLight as A,Box$1 as B,Color as C,DirectionalLight as D,destroy_block as E,Five as F,Group$1 as G,assign$1 as H,create_component as I,mount_component as J,get_spread_update as K,transition_in as L,Mesh as M,transition_out as N,Object3D as O,PerspectiveCamera as P,destroy_component as Q,ReactDOM as R,Scene as S,TextureLoader as T,empty as U,Vector3 as V,WebGLRenderer as W,group_outros as X,check_outros as Y,add_render_callback as Z,add_resize_listener as _,unsafe__useFiveInstance as a,HtmlTag as a0,svg_element as a1,listen as a2,outro_and_destroy_block as a3,Vector2 as a4,binding_callbacks as a5,text as a6,toggle_class as a7,set_data as a8,Raycaster as a9,Subscribe as aA,CircleGeometry as aB,Line as aC,Hammer$1 as aD,Hammer as aE,CurvePath as aF,LineCurve3 as aG,TubeGeometry as aH,SphereGeometry as aI,writable as aJ,afterUpdate as aK,Frustum as aL,Plane as aM,useFiveEventCallback as aa,Paper$1 as ab,BottomNavigation$1 as ac,BottomNavigationAction$1 as ad,default_1$1 as ae,default_1 as af,destroy_each as ag,create_in_transition as ah,identity as ai,fade as aj,Matrix4 as ak,Euler as al,FBXLoader as am,DoubleSide as an,AdditiveBlending as ao,MeshBasicMaterial as ap,CanvasTexture as aq,AnimationMixer as ar,reactDom as as,CSS3DRenderer as at,CSS3DObject as au,PlaneGeometry as av,Tween as aw,Easing as ax,ButtonGroup$1 as ay,Button$1 as az,useFiveModelReadyState as b,createFiveProvider as c,jsxs as d,FiveCanvas as e,exports as f,SvelteComponent as g,safe_not_equal as h,init as i,jsx as j,append_styles as k,element as l,attr as m,set_style as n,insert as o,parseWork as p,append$1 as q,react$1 as r,sRGBEncoding as s,noop$1 as t,useFiveState as u,detach as v,onMount as w,onDestroy as x,space as y,update_keyed_each as z};
